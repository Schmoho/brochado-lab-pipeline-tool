(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(o){if(o.ep)return;o.ep=!0;const f=i(o);fetch(o.href,f)}})();function accessor(n,t,i){return n.fields=t||[],n.fname=i,n}function accessorName(n){return n==null?null:n.fname}function accessorFields(n){return n==null?null:n.fields}function getter$1(n){return n.length===1?get1(n[0]):getN(n)}const get1=n=>function(t){return t[n]},getN=n=>{const t=n.length;return function(i){for(let s=0;s<t;++s)i=i[n[s]];return i}};function error$1(n){throw Error(n)}function splitAccessPath(n){const t=[],i=n.length;let s=null,o=0,f="",d,p,v;n=n+"";function _(){t.push(f+n.substring(d,p)),f="",d=p+1}for(d=p=0;p<i;++p)if(v=n[p],v==="\\")f+=n.substring(d,p++),d=p;else if(v===s)_(),s=null,o=-1;else{if(s)continue;d===o&&v==='"'||d===o&&v==="'"?(d=p+1,s=v):v==="."&&!o?p>d?_():d=p+1:v==="["?(p>d&&_(),o=d=p+1):v==="]"&&(o||error$1("Access path missing open bracket: "+n),o>0&&_(),o=0,d=p+1)}return o&&error$1("Access path missing closing bracket: "+n),s&&error$1("Access path missing closing quote: "+n),p>d&&(p++,_()),t}function field$1(n,t,i){const s=splitAccessPath(n);return n=s.length===1?s[0]:n,accessor((i&&i.get||getter$1)(s),[n],t||n)}const id$1=field$1("id"),identity$7=accessor(n=>n,[],"identity"),zero$9=accessor(()=>0,[],"zero"),one$3=accessor(()=>1,[],"one"),truthy=accessor(()=>!0,[],"true"),falsy=accessor(()=>!1,[],"false");function log$1$1(n,t,i){const s=[t].concat([].slice.call(i));console[n].apply(console,s)}const None$2=0,Error$1=1,Warn=2,Info=3,Debug=4;function logger(n,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:log$1$1,s=n||None$2;return{level(o){return arguments.length?(s=+o,this):s},error(){return s>=Error$1&&i(t||"error","ERROR",arguments),this},warn(){return s>=Warn&&i(t||"warn","WARN",arguments),this},info(){return s>=Info&&i(t||"log","INFO",arguments),this},debug(){return s>=Debug&&i(t||"log","DEBUG",arguments),this}}}var isArray=Array.isArray;function isObject(n){return n===Object(n)}const isLegalKey=n=>n!=="__proto__";function mergeConfig(){for(var n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return t.reduce((s,o)=>{for(const f in o)if(f==="signals")s.signals=mergeNamed(s.signals,o.signals);else{const d=f==="legend"?{layout:1}:f==="style"?!0:null;writeConfig(s,f,o[f],d)}return s},{})}function writeConfig(n,t,i,s){if(!isLegalKey(t))return;let o,f;if(isObject(i)&&!isArray(i)){f=isObject(n[t])?n[t]:n[t]={};for(o in i)s&&(s===!0||s[o])?writeConfig(f,o,i[o]):isLegalKey(o)&&(f[o]=i[o])}else n[t]=i}function mergeNamed(n,t){if(n==null)return t;const i={},s=[];function o(f){i[f.name]||(i[f.name]=1,s.push(f))}return t.forEach(o),n.forEach(o),s}function peek$2(n){return n[n.length-1]}function toNumber(n){return n==null||n===""?null:+n}const exp$3=n=>t=>n*Math.exp(t),log$6=n=>t=>Math.log(n*t),symlog$1=n=>t=>Math.sign(t)*Math.log1p(Math.abs(t/n)),symexp=n=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*n,pow$b=n=>t=>t<0?-Math.pow(-t,n):Math.pow(t,n);function pan(n,t,i,s){const o=i(n[0]),f=i(peek$2(n)),d=(f-o)*t;return[s(o-d),s(f-d)]}function panLinear(n,t){return pan(n,t,toNumber,identity$7)}function panLog(n,t){var i=Math.sign(n[0]);return pan(n,t,log$6(i),exp$3(i))}function panPow(n,t,i){return pan(n,t,pow$b(i),pow$b(1/i))}function panSymlog(n,t,i){return pan(n,t,symlog$1(i),symexp(i))}function zoom$2(n,t,i,s,o){const f=s(n[0]),d=s(peek$2(n)),p=t!=null?s(t):(f+d)/2;return[o(p+(f-p)*i),o(p+(d-p)*i)]}function zoomLinear(n,t,i){return zoom$2(n,t,i,toNumber,identity$7)}function zoomLog(n,t,i){const s=Math.sign(n[0]);return zoom$2(n,t,i,log$6(s),exp$3(s))}function zoomPow(n,t,i,s){return zoom$2(n,t,i,pow$b(s),pow$b(1/s))}function zoomSymlog(n,t,i,s){return zoom$2(n,t,i,symlog$1(s),symexp(s))}function quarter(n){return 1+~~(new Date(n).getMonth()/3)}function utcquarter(n){return 1+~~(new Date(n).getUTCMonth()/3)}function array$5(n){return n!=null?isArray(n)?n:[n]:[]}function clampRange(n,t,i){let s=n[0],o=n[1],f;return o<s&&(f=o,o=s,s=f),f=o-s,f>=i-t?[t,i]:[s=Math.min(Math.max(s,t),i-f),s+f]}function isFunction$1(n){return typeof n=="function"}const DESCENDING="descending";function compare$2(n,t,i){i=i||{},t=array$5(t)||[];const s=[],o=[],f={},d=i.comparator||comparator$1;return array$5(n).forEach((p,v)=>{p!=null&&(s.push(t[v]===DESCENDING?-1:1),o.push(p=isFunction$1(p)?p:field$1(p,null,i)),(accessorFields(p)||[]).forEach(_=>f[_]=1))}),o.length===0?null:accessor(d(o,s),Object.keys(f))}const ascending$8=(n,t)=>(n<t||n==null)&&t!=null?-1:(n>t||t==null)&&n!=null?1:(t=t instanceof Date?+t:t,(n=n instanceof Date?+n:n)!==n&&t===t?-1:t!==t&&n===n?1:0),comparator$1=(n,t)=>n.length===1?compare1(n[0],t[0]):compareN(n,t,n.length),compare1=(n,t)=>function(i,s){return ascending$8(n(i),n(s))*t},compareN=(n,t,i)=>(t.push(0),function(s,o){let f,d=0,p=-1;for(;d===0&&++p<i;)f=n[p],d=ascending$8(f(s),f(o));return d*t[p]});function constant$6(n){return isFunction$1(n)?n:()=>n}function debounce(n,t){let i;return s=>{i&&clearTimeout(i),i=setTimeout(()=>(t(s),i=null),n)}}function extend$3(n){for(let t,i,s=1,o=arguments.length;s<o;++s){t=arguments[s];for(i in t)n[i]=t[i]}return n}function extent(n,t){let i=0,s,o,f,d;if(n&&(s=n.length))if(t==null){for(o=n[i];i<s&&(o==null||o!==o);o=n[++i]);for(f=d=o;i<s;++i)o=n[i],o!=null&&(o<f&&(f=o),o>d&&(d=o))}else{for(o=t(n[i]);i<s&&(o==null||o!==o);o=t(n[++i]));for(f=d=o;i<s;++i)o=t(n[i]),o!=null&&(o<f&&(f=o),o>d&&(d=o))}return[f,d]}function extentIndex(n,t){const i=n.length;let s=-1,o,f,d,p,v;if(t==null){for(;++s<i;)if(f=n[s],f!=null&&f>=f){o=d=f;break}if(s===i)return[-1,-1];for(p=v=s;++s<i;)f=n[s],f!=null&&(o>f&&(o=f,p=s),d<f&&(d=f,v=s))}else{for(;++s<i;)if(f=t(n[s],s,n),f!=null&&f>=f){o=d=f;break}if(s===i)return[-1,-1];for(p=v=s;++s<i;)f=t(n[s],s,n),f!=null&&(o>f&&(o=f,p=s),d<f&&(d=f,v=s))}return[p,v]}function has$1(n,t){return Object.hasOwn(n,t)}const NULL={};function fastmap(n){let t={},i;function s(f){return has$1(t,f)&&t[f]!==NULL}const o={size:0,empty:0,object:t,has:s,get(f){return s(f)?t[f]:void 0},set(f,d){return s(f)||(++o.size,t[f]===NULL&&--o.empty),t[f]=d,this},delete(f){return s(f)&&(--o.size,++o.empty,t[f]=NULL),this},clear(){o.size=o.empty=0,o.object=t={}},test(f){return arguments.length?(i=f,o):i},clean(){const f={};let d=0;for(const p in t){const v=t[p];v!==NULL&&(!i||!i(v))&&(f[p]=v,++d)}o.size=d,o.empty=0,o.object=t=f}};return n&&Object.keys(n).forEach(f=>{o.set(f,n[f])}),o}function flush(n,t,i,s,o,f){if(!i&&i!==0)return f;const d=+i;let p=n[0],v=peek$2(n),_;v<p&&(_=p,p=v,v=_),_=Math.abs(t-p);const k=Math.abs(v-t);return _<k&&_<=d?s:k<=d?o:f}function inherits(n,t,i){const s=n.prototype=Object.create(t.prototype);return Object.defineProperty(s,"constructor",{value:n,writable:!0,enumerable:!0,configurable:!0}),extend$3(s,i)}function inrange(n,t,i,s){let o=t[0],f=t[t.length-1],d;return o>f&&(d=o,o=f,f=d),i=i===void 0||i,s=s===void 0||s,(i?o<=n:o<n)&&(s?n<=f:n<f)}function isBoolean$2(n){return typeof n=="boolean"}function isDate$1(n){return Object.prototype.toString.call(n)==="[object Date]"}function isIterable(n){return n&&isFunction$1(n[Symbol.iterator])}function isNumber$1(n){return typeof n=="number"}function isRegExp(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function isString(n){return typeof n=="string"}function key(n,t,i){n&&(n=t?array$5(n).map(p=>p.replace(/\\(.)/g,"$1")):array$5(n));const s=n&&n.length,o=i&&i.get||getter$1,f=p=>o(t?[p]:splitAccessPath(p));let d;if(!s)d=function(){return""};else if(s===1){const p=f(n[0]);d=function(v){return""+p(v)}}else{const p=n.map(f);d=function(v){let _=""+p[0](v),k=0;for(;++k<s;)_+="|"+p[k](v);return _}}return accessor(d,n,"key")}function lerp(n,t){const i=n[0],s=peek$2(n),o=+t;return o?o===1?s:i+o*(s-i):i}const DEFAULT_MAX_SIZE=1e4;function lruCache(n){n=+n||DEFAULT_MAX_SIZE;let t,i,s;const o=()=>{t={},i={},s=0},f=(d,p)=>(++s>n&&(i=t,t={},s=1),t[d]=p);return o(),{clear:o,has:d=>has$1(t,d)||has$1(i,d),get:d=>has$1(t,d)?t[d]:has$1(i,d)?f(d,i[d]):void 0,set:(d,p)=>has$1(t,d)?t[d]=p:f(d,p)}}function merge$3(n,t,i,s){const o=t.length,f=i.length;if(!f)return t;if(!o)return i;const d=s||new t.constructor(o+f);let p=0,v=0,_=0;for(;p<o&&v<f;++_)d[_]=n(t[p],i[v])>0?i[v++]:t[p++];for(;p<o;++p,++_)d[_]=t[p];for(;v<f;++v,++_)d[_]=i[v];return d}function repeat(n,t){let i="";for(;--t>=0;)i+=n;return i}function pad$3(n,t,i,s){const o=i||" ",f=n+"",d=t-f.length;return d<=0?f:s==="left"?repeat(o,d)+f:s==="center"?repeat(o,~~(d/2))+f+repeat(o,Math.ceil(d/2)):f+repeat(o,d)}function span(n){return n&&peek$2(n)-n[0]||0}function $(n){return isArray(n)?"["+n.map($)+"]":isObject(n)||isString(n)?JSON.stringify(n).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):n}function toBoolean(n){return n==null||n===""?null:!n||n==="false"||n==="0"?!1:!!n}const defaultParser=n=>isNumber$1(n)||isDate$1(n)?n:Date.parse(n);function toDate(n,t){return t=t||defaultParser,n==null||n===""?null:t(n)}function toString(n){return n==null||n===""?null:n+""}function toSet(n){const t={},i=n.length;for(let s=0;s<i;++s)t[n[s]]=!0;return t}function truncate$1(n,t,i,s){const o=s??"â€¦",f=n+"",d=f.length,p=Math.max(0,t-o.length);return d<=t?f:i==="left"?o+f.slice(d-p):i==="center"?f.slice(0,Math.ceil(p/2))+o+f.slice(d-~~(p/2)):f.slice(0,p)+o}function visitArray(n,t,i){if(n)if(t){const s=n.length;for(let o=0;o<s;++o){const f=t(n[o]);f&&i(f,o,n)}}else n.forEach(i)}function formatValue$2(n,t,i,s){if(isArray(n))return`[${n.map(o=>t(isString(o)?o:stringify$2(o,i))).join(", ")}]`;if(isObject(n)){let o="";const{title:f,image:d,...p}=n;f&&(o+=`<h2>${t(f)}</h2>`),d&&(o+=`<img src="${new URL(t(d),s||location.href).href}">`);const v=Object.keys(p);if(v.length>0){o+="<table>";for(const _ of v){let k=p[_];k!==void 0&&(isObject(k)&&(k=stringify$2(k,i)),o+=`<tr><td class="key">${t(_)}</td><td class="value">${t(k)}</td></tr>`)}o+="</table>"}return o||"{}"}return t(n)}function replacer(n){const t=[];return function(i,s){if(typeof s!="object"||s===null)return s;const o=t.indexOf(this)+1;return t.length=o,t.length>n?"[Object]":t.indexOf(s)>=0?"[Circular]":(t.push(s),s)}}function stringify$2(n,t){return JSON.stringify(n,replacer(t))}var defaultStyle=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const EL_ID="vg-tooltip-element",DEFAULT_OPTIONS={offsetX:10,offsetY:10,id:EL_ID,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:escapeHTML,maxDepth:2,formatTooltip:formatValue$2,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function escapeHTML(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function createDefaultStyle(n){if(!/^[A-Za-z]+[-:.\w]*$/.test(n))throw new Error("Invalid HTML ID");return defaultStyle.toString().replace(EL_ID,n)}function calculatePositionRelativeToCursor(n,t,{offsetX:i,offsetY:s}){const o=getPositions({x1:n.clientX,x2:n.clientX,y1:n.clientY,y2:n.clientY},t,i,s),f=["bottom-right","bottom-left","top-right","top-left"];for(const d of f)if(tooltipIsInViewport(o[d],t))return o[d];return o["top-left"]}function calculatePositionRelativeToMark(n,t,i,s,o){const{position:f,offsetX:d,offsetY:p}=o,v=n._el.getBoundingClientRect(),_=n._origin,k=getMarkBounds(v,_,i),P=getPositions(k,s,d,p),L=Array.isArray(f)?f:[f];for(const G of L)if(tooltipIsInViewport(P[G],s)&&!mouseIsOnTooltip(t,P[G],s))return P[G];return calculatePositionRelativeToCursor(t,s,o)}function getMarkBounds(n,t,i){const s=i.isVoronoi?i.datum.bounds:i.bounds;let o=n.left+t[0]+s.x1,f=n.top+t[1]+s.y1,d=i;for(;d.mark.group;)d=d.mark.group,o+=d.x??0,f+=d.y??0;const p=s.x2-s.x1,v=s.y2-s.y1;return{x1:o,x2:o+p,y1:f,y2:f+v}}function getPositions(n,t,i,s){const o=(n.x1+n.x2)/2,f=(n.y1+n.y2)/2,d=n.x1-t.width-i,p=o-t.width/2,v=n.x2+i,_=n.y1-t.height-s,k=f-t.height/2,P=n.y2+s;return{top:{x:p,y:_},bottom:{x:p,y:P},left:{x:d,y:k},right:{x:v,y:k},"top-left":{x:d,y:_},"top-right":{x:v,y:_},"bottom-left":{x:d,y:P},"bottom-right":{x:v,y:P}}}function tooltipIsInViewport(n,t){return n.x>=0&&n.y>=0&&n.x+t.width<=window.innerWidth&&n.y+t.height<=window.innerHeight}function mouseIsOnTooltip(n,t,i){return n.clientX>=t.x&&n.clientX<=t.x+i.width&&n.clientY>=t.y&&n.clientY<=t.y+i.height}let Handler$1=class{constructor(t){this.options={...DEFAULT_OPTIONS,...t};const i=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const s=document.createElement("style");s.setAttribute("id",this.options.styleId),s.innerHTML=createDefaultStyle(i);const o=document.head;o.childNodes.length>0?o.insertBefore(s,o.childNodes[0]):o.appendChild(s)}}tooltipHandler(t,i,s,o){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),o==null||o===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(o,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:f,y:d}=this.options.anchor==="mark"?calculatePositionRelativeToMark(t,i,s,this.el.getBoundingClientRect(),this.options):calculatePositionRelativeToCursor(i,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${d}px`,this.el.style.left=`${f}px`}};function getDefaultExportFromCjs$1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var client={},reactDom={exports:{}},reactDom_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var n=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),P=Symbol.iterator;function L(_a){return _a===null||typeof _a!="object"?null:(_a=P&&_a[P]||_a["@@iterator"],typeof _a=="function"?_a:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,W={};function j(_a,Pa,qc){this.props=_a,this.context=Pa,this.refs=W,this.updater=qc||G}j.prototype.isReactComponent={},j.prototype.setState=function(_a,Pa){if(typeof _a!="object"&&typeof _a!="function"&&_a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_a,Pa,"setState")},j.prototype.forceUpdate=function(_a){this.updater.enqueueForceUpdate(this,_a,"forceUpdate")};function H(){}H.prototype=j.prototype;function me(_a,Pa,qc){this.props=_a,this.context=Pa,this.refs=W,this.updater=qc||G}var $e=me.prototype=new H;$e.constructor=me,Z($e,j.prototype),$e.isPureReactComponent=!0;var De=Array.isArray,le=Object.prototype.hasOwnProperty,Ce={current:null},Me={key:!0,ref:!0,__self:!0,__source:!0};function _n(_a,Pa,qc){var uf,_h={},Uh=null,Kd=null;if(Pa!=null)for(uf in Pa.ref!==void 0&&(Kd=Pa.ref),Pa.key!==void 0&&(Uh=""+Pa.key),Pa)le.call(Pa,uf)&&!Me.hasOwnProperty(uf)&&(_h[uf]=Pa[uf]);var ud=arguments.length-2;if(ud===1)_h.children=qc;else if(1<ud){for(var sc=Array(ud),Yd=0;Yd<ud;Yd++)sc[Yd]=arguments[Yd+2];_h.children=sc}if(_a&&_a.defaultProps)for(uf in ud=_a.defaultProps,ud)_h[uf]===void 0&&(_h[uf]=ud[uf]);return{$$typeof:n,type:_a,key:Uh,ref:Kd,props:_h,_owner:Ce.current}}function _i(_a,Pa){return{$$typeof:n,type:_a.type,key:Pa,ref:_a.ref,props:_a.props,_owner:_a._owner}}function ll(_a){return typeof _a=="object"&&_a!==null&&_a.$$typeof===n}function _l(_a){var Pa={"=":"=0",":":"=2"};return"$"+_a.replace(/[=:]/g,function(qc){return Pa[qc]})}var oa=/\/+/g;function Ru(_a,Pa){return typeof _a=="object"&&_a!==null&&_a.key!=null?_l(""+_a.key):Pa.toString(36)}function ga(_a,Pa,qc,uf,_h){var Uh=typeof _a;(Uh==="undefined"||Uh==="boolean")&&(_a=null);var Kd=!1;if(_a===null)Kd=!0;else switch(Uh){case"string":case"number":Kd=!0;break;case"object":switch(_a.$$typeof){case n:case t:Kd=!0}}if(Kd)return Kd=_a,_h=_h(Kd),_a=uf===""?"."+Ru(Kd,0):uf,De(_h)?(qc="",_a!=null&&(qc=_a.replace(oa,"$&/")+"/"),ga(_h,Pa,qc,"",function(Yd){return Yd})):_h!=null&&(ll(_h)&&(_h=_i(_h,qc+(!_h.key||Kd&&Kd.key===_h.key?"":(""+_h.key).replace(oa,"$&/")+"/")+_a)),Pa.push(_h)),1;if(Kd=0,uf=uf===""?".":uf+":",De(_a))for(var ud=0;ud<_a.length;ud++){Uh=_a[ud];var sc=uf+Ru(Uh,ud);Kd+=ga(Uh,Pa,qc,sc,_h)}else if(sc=L(_a),typeof sc=="function")for(_a=sc.call(_a),ud=0;!(Uh=_a.next()).done;)Uh=Uh.value,sc=uf+Ru(Uh,ud++),Kd+=ga(Uh,Pa,qc,sc,_h);else if(Uh==="object")throw Pa=String(_a),Error("Objects are not valid as a React child (found: "+(Pa==="[object Object]"?"object with keys {"+Object.keys(_a).join(", ")+"}":Pa)+"). If you meant to render a collection of children, use an array instead.");return Kd}function _s(_a,Pa,qc){if(_a==null)return _a;var uf=[],_h=0;return ga(_a,uf,"","",function(Uh){return Pa.call(qc,Uh,_h++)}),uf}function Sa(_a){if(_a._status===-1){var Pa=_a._result;Pa=Pa(),Pa.then(function(qc){(_a._status===0||_a._status===-1)&&(_a._status=1,_a._result=qc)},function(qc){(_a._status===0||_a._status===-1)&&(_a._status=2,_a._result=qc)}),_a._status===-1&&(_a._status=0,_a._result=Pa)}if(_a._status===1)return _a._result.default;throw _a._result}var Ra={current:null},Da={transition:null},Fa={ReactCurrentDispatcher:Ra,ReactCurrentBatchConfig:Da,ReactCurrentOwner:Ce};function Na(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:_s,forEach:function(_a,Pa,qc){_s(_a,function(){Pa.apply(this,arguments)},qc)},count:function(_a){var Pa=0;return _s(_a,function(){Pa++}),Pa},toArray:function(_a){return _s(_a,function(Pa){return Pa})||[]},only:function(_a){if(!ll(_a))throw Error("React.Children.only expected to receive a single React element child.");return _a}},react_production_min.Component=j,react_production_min.Fragment=i,react_production_min.Profiler=o,react_production_min.PureComponent=me,react_production_min.StrictMode=s,react_production_min.Suspense=v,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fa,react_production_min.act=Na,react_production_min.cloneElement=function(_a,Pa,qc){if(_a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_a+".");var uf=Z({},_a.props),_h=_a.key,Uh=_a.ref,Kd=_a._owner;if(Pa!=null){if(Pa.ref!==void 0&&(Uh=Pa.ref,Kd=Ce.current),Pa.key!==void 0&&(_h=""+Pa.key),_a.type&&_a.type.defaultProps)var ud=_a.type.defaultProps;for(sc in Pa)le.call(Pa,sc)&&!Me.hasOwnProperty(sc)&&(uf[sc]=Pa[sc]===void 0&&ud!==void 0?ud[sc]:Pa[sc])}var sc=arguments.length-2;if(sc===1)uf.children=qc;else if(1<sc){ud=Array(sc);for(var Yd=0;Yd<sc;Yd++)ud[Yd]=arguments[Yd+2];uf.children=ud}return{$$typeof:n,type:_a.type,key:_h,ref:Uh,props:uf,_owner:Kd}},react_production_min.createContext=function(_a){return _a={$$typeof:d,_currentValue:_a,_currentValue2:_a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_a.Provider={$$typeof:f,_context:_a},_a.Consumer=_a},react_production_min.createElement=_n,react_production_min.createFactory=function(_a){var Pa=_n.bind(null,_a);return Pa.type=_a,Pa},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(_a){return{$$typeof:p,render:_a}},react_production_min.isValidElement=ll,react_production_min.lazy=function(_a){return{$$typeof:k,_payload:{_status:-1,_result:_a},_init:Sa}},react_production_min.memo=function(_a,Pa){return{$$typeof:_,type:_a,compare:Pa===void 0?null:Pa}},react_production_min.startTransition=function(_a){var Pa=Da.transition;Da.transition={};try{_a()}finally{Da.transition=Pa}},react_production_min.unstable_act=Na,react_production_min.useCallback=function(_a,Pa){return Ra.current.useCallback(_a,Pa)},react_production_min.useContext=function(_a){return Ra.current.useContext(_a)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(_a){return Ra.current.useDeferredValue(_a)},react_production_min.useEffect=function(_a,Pa){return Ra.current.useEffect(_a,Pa)},react_production_min.useId=function(){return Ra.current.useId()},react_production_min.useImperativeHandle=function(_a,Pa,qc){return Ra.current.useImperativeHandle(_a,Pa,qc)},react_production_min.useInsertionEffect=function(_a,Pa){return Ra.current.useInsertionEffect(_a,Pa)},react_production_min.useLayoutEffect=function(_a,Pa){return Ra.current.useLayoutEffect(_a,Pa)},react_production_min.useMemo=function(_a,Pa){return Ra.current.useMemo(_a,Pa)},react_production_min.useReducer=function(_a,Pa,qc){return Ra.current.useReducer(_a,Pa,qc)},react_production_min.useRef=function(_a){return Ra.current.useRef(_a)},react_production_min.useState=function(_a){return Ra.current.useState(_a)},react_production_min.useSyncExternalStore=function(_a,Pa,qc){return Ra.current.useSyncExternalStore(_a,Pa,qc)},react_production_min.useTransition=function(){return Ra.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}var scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(n){function t(Da,Fa){var Na=Da.length;Da.push(Fa);e:for(;0<Na;){var _a=Na-1>>>1,Pa=Da[_a];if(0<o(Pa,Fa))Da[_a]=Fa,Da[Na]=Pa,Na=_a;else break e}}function i(Da){return Da.length===0?null:Da[0]}function s(Da){if(Da.length===0)return null;var Fa=Da[0],Na=Da.pop();if(Na!==Fa){Da[0]=Na;e:for(var _a=0,Pa=Da.length,qc=Pa>>>1;_a<qc;){var uf=2*(_a+1)-1,_h=Da[uf],Uh=uf+1,Kd=Da[Uh];if(0>o(_h,Na))Uh<Pa&&0>o(Kd,_h)?(Da[_a]=Kd,Da[Uh]=Na,_a=Uh):(Da[_a]=_h,Da[uf]=Na,_a=uf);else if(Uh<Pa&&0>o(Kd,Na))Da[_a]=Kd,Da[Uh]=Na,_a=Uh;else break e}}return Fa}function o(Da,Fa){var Na=Da.sortIndex-Fa.sortIndex;return Na!==0?Na:Da.id-Fa.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var d=Date,p=d.now();n.unstable_now=function(){return d.now()-p}}var v=[],_=[],k=1,P=null,L=3,G=!1,Z=!1,W=!1,j=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $e(Da){for(var Fa=i(_);Fa!==null;){if(Fa.callback===null)s(_);else if(Fa.startTime<=Da)s(_),Fa.sortIndex=Fa.expirationTime,t(v,Fa);else break;Fa=i(_)}}function De(Da){if(W=!1,$e(Da),!Z)if(i(v)!==null)Z=!0,Sa(le);else{var Fa=i(_);Fa!==null&&Ra(De,Fa.startTime-Da)}}function le(Da,Fa){Z=!1,W&&(W=!1,H(_n),_n=-1),G=!0;var Na=L;try{for($e(Fa),P=i(v);P!==null&&(!(P.expirationTime>Fa)||Da&&!_l());){var _a=P.callback;if(typeof _a=="function"){P.callback=null,L=P.priorityLevel;var Pa=_a(P.expirationTime<=Fa);Fa=n.unstable_now(),typeof Pa=="function"?P.callback=Pa:P===i(v)&&s(v),$e(Fa)}else s(v);P=i(v)}if(P!==null)var qc=!0;else{var uf=i(_);uf!==null&&Ra(De,uf.startTime-Fa),qc=!1}return qc}finally{P=null,L=Na,G=!1}}var Ce=!1,Me=null,_n=-1,_i=5,ll=-1;function _l(){return!(n.unstable_now()-ll<_i)}function oa(){if(Me!==null){var Da=n.unstable_now();ll=Da;var Fa=!0;try{Fa=Me(!0,Da)}finally{Fa?Ru():(Ce=!1,Me=null)}}else Ce=!1}var Ru;if(typeof me=="function")Ru=function(){me(oa)};else if(typeof MessageChannel<"u"){var ga=new MessageChannel,_s=ga.port2;ga.port1.onmessage=oa,Ru=function(){_s.postMessage(null)}}else Ru=function(){j(oa,0)};function Sa(Da){Me=Da,Ce||(Ce=!0,Ru())}function Ra(Da,Fa){_n=j(function(){Da(n.unstable_now())},Fa)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Da){Da.callback=null},n.unstable_continueExecution=function(){Z||G||(Z=!0,Sa(le))},n.unstable_forceFrameRate=function(Da){0>Da||125<Da?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_i=0<Da?Math.floor(1e3/Da):5},n.unstable_getCurrentPriorityLevel=function(){return L},n.unstable_getFirstCallbackNode=function(){return i(v)},n.unstable_next=function(Da){switch(L){case 1:case 2:case 3:var Fa=3;break;default:Fa=L}var Na=L;L=Fa;try{return Da()}finally{L=Na}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Da,Fa){switch(Da){case 1:case 2:case 3:case 4:case 5:break;default:Da=3}var Na=L;L=Da;try{return Fa()}finally{L=Na}},n.unstable_scheduleCallback=function(Da,Fa,Na){var _a=n.unstable_now();switch(typeof Na=="object"&&Na!==null?(Na=Na.delay,Na=typeof Na=="number"&&0<Na?_a+Na:_a):Na=_a,Da){case 1:var Pa=-1;break;case 2:Pa=250;break;case 5:Pa=1073741823;break;case 4:Pa=1e4;break;default:Pa=5e3}return Pa=Na+Pa,Da={id:k++,callback:Fa,priorityLevel:Da,startTime:Na,expirationTime:Pa,sortIndex:-1},Na>_a?(Da.sortIndex=Na,t(_,Da),i(v)===null&&Da===i(_)&&(W?(H(_n),_n=-1):W=!0,Ra(De,Na-_a))):(Da.sortIndex=Pa,t(v,Da),Z||G||(Z=!0,Sa(le))),Da},n.unstable_shouldYield=_l,n.unstable_wrapCallback=function(Da){var Fa=L;return function(){var Na=L;L=Fa;try{return Da.apply(this,arguments)}finally{L=Na}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var n=requireReact(),t=requireScheduler();function i(ne){for(var _e="https://reactjs.org/docs/error-decoder.html?invariant="+ne,Ei=1;Ei<arguments.length;Ei++)_e+="&args[]="+encodeURIComponent(arguments[Ei]);return"Minified React error #"+ne+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function f(ne,_e){d(ne,_e),d(ne+"Capture",_e)}function d(ne,_e){for(o[ne]=_e,ne=0;ne<_e.length;ne++)s.add(_e[ne])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k={},P={};function L(ne){return v.call(P,ne)?!0:v.call(k,ne)?!1:_.test(ne)?P[ne]=!0:(k[ne]=!0,!1)}function G(ne,_e,Ei,wu){if(Ei!==null&&Ei.type===0)return!1;switch(typeof _e){case"function":case"symbol":return!0;case"boolean":return wu?!1:Ei!==null?!Ei.acceptsBooleans:(ne=ne.toLowerCase().slice(0,5),ne!=="data-"&&ne!=="aria-");default:return!1}}function Z(ne,_e,Ei,wu){if(_e===null||typeof _e>"u"||G(ne,_e,Ei,wu))return!0;if(wu)return!1;if(Ei!==null)switch(Ei.type){case 3:return!_e;case 4:return _e===!1;case 5:return isNaN(_e);case 6:return isNaN(_e)||1>_e}return!1}function W(ne,_e,Ei,wu,Ma,za,bc){this.acceptsBooleans=_e===2||_e===3||_e===4,this.attributeName=wu,this.attributeNamespace=Ma,this.mustUseProperty=Ei,this.propertyName=ne,this.type=_e,this.sanitizeURL=za,this.removeEmptyString=bc}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(ne){j[ne]=new W(ne,0,!1,ne,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(ne){var _e=ne[0];j[_e]=new W(_e,1,!1,ne[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(ne){j[ne]=new W(ne,2,!1,ne.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(ne){j[ne]=new W(ne,2,!1,ne,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(ne){j[ne]=new W(ne,3,!1,ne.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(ne){j[ne]=new W(ne,3,!0,ne,null,!1,!1)}),["capture","download"].forEach(function(ne){j[ne]=new W(ne,4,!1,ne,null,!1,!1)}),["cols","rows","size","span"].forEach(function(ne){j[ne]=new W(ne,6,!1,ne,null,!1,!1)}),["rowSpan","start"].forEach(function(ne){j[ne]=new W(ne,5,!1,ne.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function me(ne){return ne[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(ne){var _e=ne.replace(H,me);j[_e]=new W(_e,1,!1,ne,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(ne){var _e=ne.replace(H,me);j[_e]=new W(_e,1,!1,ne,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(ne){var _e=ne.replace(H,me);j[_e]=new W(_e,1,!1,ne,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(ne){j[ne]=new W(ne,1,!1,ne.toLowerCase(),null,!1,!1)}),j.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(ne){j[ne]=new W(ne,1,!1,ne.toLowerCase(),null,!0,!0)});function $e(ne,_e,Ei,wu){var Ma=j.hasOwnProperty(_e)?j[_e]:null;(Ma!==null?Ma.type!==0:wu||!(2<_e.length)||_e[0]!=="o"&&_e[0]!=="O"||_e[1]!=="n"&&_e[1]!=="N")&&(Z(_e,Ei,Ma,wu)&&(Ei=null),wu||Ma===null?L(_e)&&(Ei===null?ne.removeAttribute(_e):ne.setAttribute(_e,""+Ei)):Ma.mustUseProperty?ne[Ma.propertyName]=Ei===null?Ma.type===3?!1:"":Ei:(_e=Ma.attributeName,wu=Ma.attributeNamespace,Ei===null?ne.removeAttribute(_e):(Ma=Ma.type,Ei=Ma===3||Ma===4&&Ei===!0?"":""+Ei,wu?ne.setAttributeNS(wu,_e,Ei):ne.setAttribute(_e,Ei))))}var De=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),Ce=Symbol.for("react.portal"),Me=Symbol.for("react.fragment"),_n=Symbol.for("react.strict_mode"),_i=Symbol.for("react.profiler"),ll=Symbol.for("react.provider"),_l=Symbol.for("react.context"),oa=Symbol.for("react.forward_ref"),Ru=Symbol.for("react.suspense"),ga=Symbol.for("react.suspense_list"),_s=Symbol.for("react.memo"),Sa=Symbol.for("react.lazy"),Ra=Symbol.for("react.offscreen"),Da=Symbol.iterator;function Fa(ne){return ne===null||typeof ne!="object"?null:(ne=Da&&ne[Da]||ne["@@iterator"],typeof ne=="function"?ne:null)}var Na=Object.assign,_a;function Pa(ne){if(_a===void 0)try{throw Error()}catch(Ei){var _e=Ei.stack.trim().match(/\n( *(at )?)/);_a=_e&&_e[1]||""}return`
`+_a+ne}var qc=!1;function uf(ne,_e){if(!ne||qc)return"";qc=!0;var Ei=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_e)if(_e=function(){throw Error()},Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(_5){var wu=_5}Reflect.construct(ne,[],_e)}else{try{_e.call()}catch(_5){wu=_5}ne.call(_e.prototype)}else{try{throw Error()}catch(_5){wu=_5}ne()}}catch(_5){if(_5&&wu&&typeof _5.stack=="string"){for(var Ma=_5.stack.split(`
`),za=wu.stack.split(`
`),bc=Ma.length-1,yg=za.length-1;1<=bc&&0<=yg&&Ma[bc]!==za[yg];)yg--;for(;1<=bc&&0<=yg;bc--,yg--)if(Ma[bc]!==za[yg]){if(bc!==1||yg!==1)do if(bc--,yg--,0>yg||Ma[bc]!==za[yg]){var f0=`
`+Ma[bc].replace(" at new "," at ");return ne.displayName&&f0.includes("<anonymous>")&&(f0=f0.replace("<anonymous>",ne.displayName)),f0}while(1<=bc&&0<=yg);break}}}finally{qc=!1,Error.prepareStackTrace=Ei}return(ne=ne?ne.displayName||ne.name:"")?Pa(ne):""}function _h(ne){switch(ne.tag){case 5:return Pa(ne.type);case 16:return Pa("Lazy");case 13:return Pa("Suspense");case 19:return Pa("SuspenseList");case 0:case 2:case 15:return ne=uf(ne.type,!1),ne;case 11:return ne=uf(ne.type.render,!1),ne;case 1:return ne=uf(ne.type,!0),ne;default:return""}}function Uh(ne){if(ne==null)return null;if(typeof ne=="function")return ne.displayName||ne.name||null;if(typeof ne=="string")return ne;switch(ne){case Me:return"Fragment";case Ce:return"Portal";case _i:return"Profiler";case _n:return"StrictMode";case Ru:return"Suspense";case ga:return"SuspenseList"}if(typeof ne=="object")switch(ne.$$typeof){case _l:return(ne.displayName||"Context")+".Consumer";case ll:return(ne._context.displayName||"Context")+".Provider";case oa:var _e=ne.render;return ne=ne.displayName,ne||(ne=_e.displayName||_e.name||"",ne=ne!==""?"ForwardRef("+ne+")":"ForwardRef"),ne;case _s:return _e=ne.displayName||null,_e!==null?_e:Uh(ne.type)||"Memo";case Sa:_e=ne._payload,ne=ne._init;try{return Uh(ne(_e))}catch{}}return null}function Kd(ne){var _e=ne.type;switch(ne.tag){case 24:return"Cache";case 9:return(_e.displayName||"Context")+".Consumer";case 10:return(_e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ne=_e.render,ne=ne.displayName||ne.name||"",_e.displayName||(ne!==""?"ForwardRef("+ne+")":"ForwardRef");case 7:return"Fragment";case 5:return _e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uh(_e);case 8:return _e===_n?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e}return null}function ud(ne){switch(typeof ne){case"boolean":case"number":case"string":case"undefined":return ne;case"object":return ne;default:return""}}function sc(ne){var _e=ne.type;return(ne=ne.nodeName)&&ne.toLowerCase()==="input"&&(_e==="checkbox"||_e==="radio")}function Yd(ne){var _e=sc(ne)?"checked":"value",Ei=Object.getOwnPropertyDescriptor(ne.constructor.prototype,_e),wu=""+ne[_e];if(!ne.hasOwnProperty(_e)&&typeof Ei<"u"&&typeof Ei.get=="function"&&typeof Ei.set=="function"){var Ma=Ei.get,za=Ei.set;return Object.defineProperty(ne,_e,{configurable:!0,get:function(){return Ma.call(this)},set:function(bc){wu=""+bc,za.call(this,bc)}}),Object.defineProperty(ne,_e,{enumerable:Ei.enumerable}),{getValue:function(){return wu},setValue:function(bc){wu=""+bc},stopTracking:function(){ne._valueTracker=null,delete ne[_e]}}}}function wg(ne){ne._valueTracker||(ne._valueTracker=Yd(ne))}function Pf(ne){if(!ne)return!1;var _e=ne._valueTracker;if(!_e)return!0;var Ei=_e.getValue(),wu="";return ne&&(wu=sc(ne)?ne.checked?"true":"false":ne.value),ne=wu,ne!==Ei?(_e.setValue(ne),!0):!1}function ac(ne){if(ne=ne||(typeof document<"u"?document:void 0),typeof ne>"u")return null;try{return ne.activeElement||ne.body}catch{return ne.body}}function fc(ne,_e){var Ei=_e.checked;return Na({},_e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Ei??ne._wrapperState.initialChecked})}function nd(ne,_e){var Ei=_e.defaultValue==null?"":_e.defaultValue,wu=_e.checked!=null?_e.checked:_e.defaultChecked;Ei=ud(_e.value!=null?_e.value:Ei),ne._wrapperState={initialChecked:wu,initialValue:Ei,controlled:_e.type==="checkbox"||_e.type==="radio"?_e.checked!=null:_e.value!=null}}function a0(ne,_e){_e=_e.checked,_e!=null&&$e(ne,"checked",_e,!1)}function _1(ne,_e){a0(ne,_e);var Ei=ud(_e.value),wu=_e.type;if(Ei!=null)wu==="number"?(Ei===0&&ne.value===""||ne.value!=Ei)&&(ne.value=""+Ei):ne.value!==""+Ei&&(ne.value=""+Ei);else if(wu==="submit"||wu==="reset"){ne.removeAttribute("value");return}_e.hasOwnProperty("value")?$b(ne,_e.type,Ei):_e.hasOwnProperty("defaultValue")&&$b(ne,_e.type,ud(_e.defaultValue)),_e.checked==null&&_e.defaultChecked!=null&&(ne.defaultChecked=!!_e.defaultChecked)}function _$(ne,_e,Ei){if(_e.hasOwnProperty("value")||_e.hasOwnProperty("defaultValue")){var wu=_e.type;if(!(wu!=="submit"&&wu!=="reset"||_e.value!==void 0&&_e.value!==null))return;_e=""+ne._wrapperState.initialValue,Ei||_e===ne.value||(ne.value=_e),ne.defaultValue=_e}Ei=ne.name,Ei!==""&&(ne.name=""),ne.defaultChecked=!!ne._wrapperState.initialChecked,Ei!==""&&(ne.name=Ei)}function $b(ne,_e,Ei){(_e!=="number"||ac(ne.ownerDocument)!==ne)&&(Ei==null?ne.defaultValue=""+ne._wrapperState.initialValue:ne.defaultValue!==""+Ei&&(ne.defaultValue=""+Ei))}var Z_=Array.isArray;function _b(ne,_e,Ei,wu){if(ne=ne.options,_e){_e={};for(var Ma=0;Ma<Ei.length;Ma++)_e["$"+Ei[Ma]]=!0;for(Ei=0;Ei<ne.length;Ei++)Ma=_e.hasOwnProperty("$"+ne[Ei].value),ne[Ei].selected!==Ma&&(ne[Ei].selected=Ma),Ma&&wu&&(ne[Ei].defaultSelected=!0)}else{for(Ei=""+ud(Ei),_e=null,Ma=0;Ma<ne.length;Ma++){if(ne[Ma].value===Ei){ne[Ma].selected=!0,wu&&(ne[Ma].defaultSelected=!0);return}_e!==null||ne[Ma].disabled||(_e=ne[Ma])}_e!==null&&(_e.selected=!0)}}function cb(ne,_e){if(_e.dangerouslySetInnerHTML!=null)throw Error(i(91));return Na({},_e,{value:void 0,defaultValue:void 0,children:""+ne._wrapperState.initialValue})}function ib(ne,_e){var Ei=_e.value;if(Ei==null){if(Ei=_e.children,_e=_e.defaultValue,Ei!=null){if(_e!=null)throw Error(i(92));if(Z_(Ei)){if(1<Ei.length)throw Error(i(93));Ei=Ei[0]}_e=Ei}_e==null&&(_e=""),Ei=_e}ne._wrapperState={initialValue:ud(Ei)}}function _2(ne,_e){var Ei=ud(_e.value),wu=ud(_e.defaultValue);Ei!=null&&(Ei=""+Ei,Ei!==ne.value&&(ne.value=Ei),_e.defaultValue==null&&ne.defaultValue!==Ei&&(ne.defaultValue=Ei)),wu!=null&&(ne.defaultValue=""+wu)}function Nb(ne){var _e=ne.textContent;_e===ne._wrapperState.initialValue&&_e!==""&&_e!==null&&(ne.value=_e)}function _D(ne){switch(ne){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ec(ne,_e){return ne==null||ne==="http://www.w3.org/1999/xhtml"?_D(_e):ne==="http://www.w3.org/2000/svg"&&_e==="foreignObject"?"http://www.w3.org/1999/xhtml":ne}var Jc,ih=function(ne){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_e,Ei,wu,Ma){MSApp.execUnsafeLocalFunction(function(){return ne(_e,Ei,wu,Ma)})}:ne}(function(ne,_e){if(ne.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in ne)ne.innerHTML=_e;else{for(Jc=Jc||document.createElement("div"),Jc.innerHTML="<svg>"+_e.valueOf().toString()+"</svg>",_e=Jc.firstChild;ne.firstChild;)ne.removeChild(ne.firstChild);for(;_e.firstChild;)ne.appendChild(_e.firstChild)}});function Bd(ne,_e){if(_e){var Ei=ne.firstChild;if(Ei&&Ei===ne.lastChild&&Ei.nodeType===3){Ei.nodeValue=_e;return}}ne.textContent=_e}var xg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hb=["Webkit","ms","Moz","O"];Object.keys(xg).forEach(function(ne){hb.forEach(function(_e){_e=_e+ne.charAt(0).toUpperCase()+ne.substring(1),xg[_e]=xg[ne]})});function _S(ne,_e,Ei){return _e==null||typeof _e=="boolean"||_e===""?"":Ei||typeof _e!="number"||_e===0||xg.hasOwnProperty(ne)&&xg[ne]?(""+_e).trim():_e+"px"}function rc(ne,_e){ne=ne.style;for(var Ei in _e)if(_e.hasOwnProperty(Ei)){var wu=Ei.indexOf("--")===0,Ma=_S(Ei,_e[Ei],wu);Ei==="float"&&(Ei="cssFloat"),wu?ne.setProperty(Ei,Ma):ne[Ei]=Ma}}var e0=Na({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function b0(ne,_e){if(_e){if(e0[ne]&&(_e.children!=null||_e.dangerouslySetInnerHTML!=null))throw Error(i(137,ne));if(_e.dangerouslySetInnerHTML!=null){if(_e.children!=null)throw Error(i(60));if(typeof _e.dangerouslySetInnerHTML!="object"||!("__html"in _e.dangerouslySetInnerHTML))throw Error(i(61))}if(_e.style!=null&&typeof _e.style!="object")throw Error(i(62))}}function nb(ne,_e){if(ne.indexOf("-")===-1)return typeof _e.is=="string";switch(ne){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vf=null;function c0(ne){return ne=ne.target||ne.srcElement||window,ne.correspondingUseElement&&(ne=ne.correspondingUseElement),ne.nodeType===3?ne.parentNode:ne}var Ba=null,$_=null,_A=null;function ka(ne){if(ne=cte(ne)){if(typeof Ba!="function")throw Error(i(280));var _e=ne.stateNode;_e&&(_e=pne(_e),Ba(ne.stateNode,ne.type,_e))}}function Pp(ne){$_?_A?_A.push(ne):_A=[ne]:$_=ne}function _0(){if($_){var ne=$_,_e=_A;if(_A=$_=null,ka(ne),_e)for(ne=0;ne<_e.length;ne++)ka(_e[ne])}}function Oc(ne,_e){return ne(_e)}function zg(){}var _p=!1;function _O(ne,_e,Ei){if(_p)return ne(_e,Ei);_p=!0;try{return Oc(ne,_e,Ei)}finally{_p=!1,($_!==null||_A!==null)&&(zg(),_0())}}function _M(ne,_e){var Ei=ne.stateNode;if(Ei===null)return null;var wu=pne(Ei);if(wu===null)return null;Ei=wu[_e];e:switch(_e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(wu=!wu.disabled)||(ne=ne.type,wu=!(ne==="button"||ne==="input"||ne==="select"||ne==="textarea")),ne=!wu;break e;default:ne=!1}if(ne)return null;if(Ei&&typeof Ei!="function")throw Error(i(231,_e,typeof Ei));return Ei}var _T=!1;if(p)try{var _9={};Object.defineProperty(_9,"passive",{get:function(){_T=!0}}),window.addEventListener("test",_9,_9),window.removeEventListener("test",_9,_9)}catch{_T=!1}function _q(ne,_e,Ei,wu,Ma,za,bc,yg,f0){var _5=Array.prototype.slice.call(arguments,3);try{_e.apply(Ei,_5)}catch(_C){this.onError(_C)}}var Ez=!1,_z=null,xz=!1,Vj=null,Kz={onError:function(ne){Ez=!0,_z=ne}};function _ee(ne,_e,Ei,wu,Ma,za,bc,yg,f0){Ez=!1,_z=null,_q.apply(Kz,arguments)}function dee(ne,_e,Ei,wu,Ma,za,bc,yg,f0){if(_ee.apply(this,arguments),Ez){if(Ez){var _5=_z;Ez=!1,_z=null}else throw Error(i(198));xz||(xz=!0,Vj=_5)}}function zz(ne){var _e=ne,Ei=ne;if(ne.alternate)for(;_e.return;)_e=_e.return;else{ne=_e;do _e=ne,(_e.flags&4098)!==0&&(Ei=_e.return),ne=_e.return;while(ne)}return _e.tag===3?Ei:null}function $j(ne){if(ne.tag===13){var _e=ne.memoizedState;if(_e===null&&(ne=ne.alternate,ne!==null&&(_e=ne.memoizedState)),_e!==null)return _e.dehydrated}return null}function Gz(ne){if(zz(ne)!==ne)throw Error(i(188))}function nee(ne){var _e=ne.alternate;if(!_e){if(_e=zz(ne),_e===null)throw Error(i(188));return _e!==ne?null:ne}for(var Ei=ne,wu=_e;;){var Ma=Ei.return;if(Ma===null)break;var za=Ma.alternate;if(za===null){if(wu=Ma.return,wu!==null){Ei=wu;continue}break}if(Ma.child===za.child){for(za=Ma.child;za;){if(za===Ei)return Gz(Ma),ne;if(za===wu)return Gz(Ma),_e;za=za.sibling}throw Error(i(188))}if(Ei.return!==wu.return)Ei=Ma,wu=za;else{for(var bc=!1,yg=Ma.child;yg;){if(yg===Ei){bc=!0,Ei=Ma,wu=za;break}if(yg===wu){bc=!0,wu=Ma,Ei=za;break}yg=yg.sibling}if(!bc){for(yg=za.child;yg;){if(yg===Ei){bc=!0,Ei=za,wu=Ma;break}if(yg===wu){bc=!0,wu=za,Ei=Ma;break}yg=yg.sibling}if(!bc)throw Error(i(189))}}if(Ei.alternate!==wu)throw Error(i(190))}if(Ei.tag!==3)throw Error(i(188));return Ei.stateNode.current===Ei?ne:_e}function _V(ne){return ne=nee(ne),ne!==null?Ree(ne):null}function Ree(ne){if(ne.tag===5||ne.tag===6)return ne;for(ne=ne.child;ne!==null;){var _e=Ree(ne);if(_e!==null)return _e;ne=ne.sibling}return null}var Sne=t.unstable_scheduleCallback,Lee=t.unstable_cancelCallback,Bne=t.unstable_shouldYield,Une=t.unstable_requestPaint,_B=t.unstable_now,Kne=t.unstable_getCurrentPriorityLevel,sne=t.unstable_ImmediatePriority,une=t.unstable_UserBlockingPriority,Gne=t.unstable_NormalPriority,Fle=t.unstable_LowPriority,Eie=t.unstable_IdlePriority,qte=null,Az=null;function ane(ne){if(Az&&typeof Az.onCommitFiberRoot=="function")try{Az.onCommitFiberRoot(qte,ne,void 0,(ne.current.flags&128)===128)}catch{}}var _Y=Math.clz32?Math.clz32:Tre,Mle=Math.log,Wne=Math.LN2;function Tre(ne){return ne>>>=0,ne===0?32:31-(Mle(ne)/Wne|0)|0}var Hne=64,qne=4194304;function Ene(ne){switch(ne&-ne){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ne&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ne&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ne}}function Vne(ne,_e){var Ei=ne.pendingLanes;if(Ei===0)return 0;var wu=0,Ma=ne.suspendedLanes,za=ne.pingedLanes,bc=Ei&268435455;if(bc!==0){var yg=bc&~Ma;yg!==0?wu=Ene(yg):(za&=bc,za!==0&&(wu=Ene(za)))}else bc=Ei&~Ma,bc!==0?wu=Ene(bc):za!==0&&(wu=Ene(za));if(wu===0)return 0;if(_e!==0&&_e!==wu&&(_e&Ma)===0&&(Ma=wu&-wu,za=_e&-_e,Ma>=za||Ma===16&&(za&4194240)!==0))return _e;if((wu&4)!==0&&(wu|=Ei&16),_e=ne.entangledLanes,_e!==0)for(ne=ne.entanglements,_e&=wu;0<_e;)Ei=31-_Y(_e),Ma=1<<Ei,wu|=ne[Ei],_e&=~Ma;return wu}function _ne(ne,_e){switch(ne){case 1:case 2:case 4:return _e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _te(ne,_e){for(var Ei=ne.suspendedLanes,wu=ne.pingedLanes,Ma=ne.expirationTimes,za=ne.pendingLanes;0<za;){var bc=31-_Y(za),yg=1<<bc,f0=Ma[bc];f0===-1?((yg&Ei)===0||(yg&wu)!==0)&&(Ma[bc]=_ne(yg,_e)):f0<=_e&&(ne.expiredLanes|=yg),za&=~yg}}function ree(ne){return ne=ne.pendingLanes&-1073741825,ne!==0?ne:ne&1073741824?1073741824:0}function $ne(){var ne=Hne;return Hne<<=1,(Hne&4194240)===0&&(Hne=64),ne}function qee(ne){for(var _e=[],Ei=0;31>Ei;Ei++)_e.push(ne);return _e}function zee(ne,_e,Ei){ne.pendingLanes|=_e,_e!==536870912&&(ne.suspendedLanes=0,ne.pingedLanes=0),ne=ne.eventTimes,_e=31-_Y(_e),ne[_e]=Ei}function Ole(ne,_e){var Ei=ne.pendingLanes&~_e;ne.pendingLanes=_e,ne.suspendedLanes=0,ne.pingedLanes=0,ne.expiredLanes&=_e,ne.mutableReadLanes&=_e,ne.entangledLanes&=_e,_e=ne.entanglements;var wu=ne.eventTimes;for(ne=ne.expirationTimes;0<Ei;){var Ma=31-_Y(Ei),za=1<<Ma;_e[Ma]=0,wu[Ma]=-1,ne[Ma]=-1,Ei&=~za}}function Vee(ne,_e){var Ei=ne.entangledLanes|=_e;for(ne=ne.entanglements;Ei;){var wu=31-_Y(Ei),Ma=1<<wu;Ma&_e|ne[wu]&_e&&(ne[wu]|=_e),Ei&=~Ma}}var Uj=0;function Jee(ne){return ne&=-ne,1<ne?4<ne?(ne&268435455)!==0?16:536870912:4:1}var _ie,$ie,Xee,gee,pee,Bz=!1,cne=[],jee=null,Yee=null,$ee=null,Jne=new Map,bne=new Map,bee=[],kle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bie(ne,_e){switch(ne){case"focusin":case"focusout":jee=null;break;case"dragenter":case"dragleave":Yee=null;break;case"mouseover":case"mouseout":$ee=null;break;case"pointerover":case"pointerout":Jne.delete(_e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bne.delete(_e.pointerId)}}function mee(ne,_e,Ei,wu,Ma,za){return ne===null||ne.nativeEvent!==za?(ne={blockedOn:_e,domEventName:Ei,eventSystemFlags:wu,nativeEvent:za,targetContainers:[Ma]},_e!==null&&(_e=cte(_e),_e!==null&&$ie(_e)),ne):(ne.eventSystemFlags|=wu,_e=ne.targetContainers,Ma!==null&&_e.indexOf(Ma)===-1&&_e.push(Ma),ne)}function $te(ne,_e,Ei,wu,Ma){switch(_e){case"focusin":return jee=mee(jee,ne,_e,Ei,wu,Ma),!0;case"dragenter":return Yee=mee(Yee,ne,_e,Ei,wu,Ma),!0;case"mouseover":return $ee=mee($ee,ne,_e,Ei,wu,Ma),!0;case"pointerover":var za=Ma.pointerId;return Jne.set(za,mee(Jne.get(za)||null,ne,_e,Ei,wu,Ma)),!0;case"gotpointercapture":return za=Ma.pointerId,bne.set(za,mee(bne.get(za)||null,ne,_e,Ei,wu,Ma)),!0}return!1}function Cie(ne){var _e=Fne(ne.target);if(_e!==null){var Ei=zz(_e);if(Ei!==null){if(_e=Ei.tag,_e===13){if(_e=$j(Ei),_e!==null){ne.blockedOn=_e,pee(ne.priority,function(){Xee(Ei)});return}}else if(_e===3&&Ei.stateNode.current.memoizedState.isDehydrated){ne.blockedOn=Ei.tag===3?Ei.stateNode.containerInfo:null;return}}}ne.blockedOn=null}function Vte(ne){if(ne.blockedOn!==null)return!1;for(var _e=ne.targetContainers;0<_e.length;){var Ei=Mre(ne.domEventName,ne.eventSystemFlags,_e[0],ne.nativeEvent);if(Ei===null){Ei=ne.nativeEvent;var wu=new Ei.constructor(Ei.type,Ei);vf=wu,Ei.target.dispatchEvent(wu),vf=null}else return _e=cte(Ei),_e!==null&&$ie(_e),ne.blockedOn=Ei,!1;_e.shift()}return!0}function Xne(ne,_e,Ei){Vte(ne)&&Ei.delete(_e)}function Aie(){Bz=!1,jee!==null&&Vte(jee)&&(jee=null),Yee!==null&&Vte(Yee)&&(Yee=null),$ee!==null&&Vte($ee)&&($ee=null),Jne.forEach(Xne),bne.forEach(Xne)}function Yne(ne,_e){ne.blockedOn===_e&&(ne.blockedOn=null,Bz||(Bz=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Aie)))}function bte(ne){function _e(Ma){return Yne(Ma,ne)}if(0<cne.length){Yne(cne[0],ne);for(var Ei=1;Ei<cne.length;Ei++){var wu=cne[Ei];wu.blockedOn===ne&&(wu.blockedOn=null)}}for(jee!==null&&Yne(jee,ne),Yee!==null&&Yne(Yee,ne),$ee!==null&&Yne($ee,ne),Jne.forEach(_e),bne.forEach(_e),Ei=0;Ei<bee.length;Ei++)wu=bee[Ei],wu.blockedOn===ne&&(wu.blockedOn=null);for(;0<bee.length&&(Ei=bee[0],Ei.blockedOn===null);)Cie(Ei),Ei.blockedOn===null&&bee.shift()}var Cne=De.ReactCurrentBatchConfig,Jte=!0;function Ile(ne,_e,Ei,wu){var Ma=Uj,za=Cne.transition;Cne.transition=null;try{Uj=1,Fre(ne,_e,Ei,wu)}finally{Uj=Ma,Cne.transition=za}}function Nle(ne,_e,Ei,wu){var Ma=Uj,za=Cne.transition;Cne.transition=null;try{Uj=4,Fre(ne,_e,Ei,wu)}finally{Uj=Ma,Cne.transition=za}}function Fre(ne,_e,Ei,wu){if(Jte){var Ma=Mre(ne,_e,Ei,wu);if(Ma===null)pre(ne,_e,wu,Xte,Ei),bie(ne,wu);else if($te(Ma,ne,_e,Ei,wu))wu.stopPropagation();else if(bie(ne,wu),_e&4&&-1<kle.indexOf(ne)){for(;Ma!==null;){var za=cte(Ma);if(za!==null&&_ie(za),za=Mre(ne,_e,Ei,wu),za===null&&pre(ne,_e,wu,Xte,Ei),za===Ma)break;Ma=za}Ma!==null&&wu.stopPropagation()}else pre(ne,_e,wu,null,Ei)}}var Xte=null;function Mre(ne,_e,Ei,wu){if(Xte=null,ne=c0(wu),ne=Fne(ne),ne!==null)if(_e=zz(ne),_e===null)ne=null;else if(Ei=_e.tag,Ei===13){if(ne=$j(_e),ne!==null)return ne;ne=null}else if(Ei===3){if(_e.stateNode.current.memoizedState.isDehydrated)return _e.tag===3?_e.stateNode.containerInfo:null;ne=null}else _e!==ne&&(ne=null);return Xte=ne,null}function Die(ne){switch(ne){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kne()){case sne:return 1;case une:return 4;case Gne:case Fle:return 16;case Eie:return 536870912;default:return 16}default:return 16}}var fne=null,Ore=null,Yte=null;function Rie(){if(Yte)return Yte;var ne,_e=Ore,Ei=_e.length,wu,Ma="value"in fne?fne.value:fne.textContent,za=Ma.length;for(ne=0;ne<Ei&&_e[ne]===Ma[ne];ne++);var bc=Ei-ne;for(wu=1;wu<=bc&&_e[Ei-wu]===Ma[za-wu];wu++);return Yte=Ma.slice(ne,1<wu?1-wu:void 0)}function Qte(ne){var _e=ne.keyCode;return"charCode"in ne?(ne=ne.charCode,ne===0&&_e===13&&(ne=13)):ne=_e,ne===10&&(ne=13),32<=ne||ne===13?ne:0}function Zte(){return!0}function Qne(){return!1}function Cee(ne){function _e(Ei,wu,Ma,za,bc){this._reactName=Ei,this._targetInst=Ma,this.type=wu,this.nativeEvent=za,this.target=bc,this.currentTarget=null;for(var yg in ne)ne.hasOwnProperty(yg)&&(Ei=ne[yg],this[yg]=Ei?Ei(za):za[yg]);return this.isDefaultPrevented=(za.defaultPrevented!=null?za.defaultPrevented:za.returnValue===!1)?Zte:Qne,this.isPropagationStopped=Qne,this}return Na(_e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Ei=this.nativeEvent;Ei&&(Ei.preventDefault?Ei.preventDefault():typeof Ei.returnValue!="unknown"&&(Ei.returnValue=!1),this.isDefaultPrevented=Zte)},stopPropagation:function(){var Ei=this.nativeEvent;Ei&&(Ei.stopPropagation?Ei.stopPropagation():typeof Ei.cancelBubble!="unknown"&&(Ei.cancelBubble=!0),this.isPropagationStopped=Zte)},persist:function(){},isPersistent:Zte}),_e}var Zne={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(ne){return ne.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kre=Cee(Zne),hne=Na({},Zne,{view:0,detail:0}),Tie=Cee(hne),Ane,Ire,Cte,ere=Na({},hne,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rte,button:0,buttons:0,relatedTarget:function(ne){return ne.relatedTarget===void 0?ne.fromElement===ne.srcElement?ne.toElement:ne.fromElement:ne.relatedTarget},movementX:function(ne){return"movementX"in ne?ne.movementX:(ne!==Cte&&(Cte&&ne.type==="mousemove"?(Ane=ne.screenX-Cte.screenX,Ire=ne.screenY-Cte.screenY):Ire=Ane=0,Cte=ne),Ane)},movementY:function(ne){return"movementY"in ne?ne.movementY:Ire}}),Fie=Cee(ere),Ate=Na({},ere,{dataTransfer:0}),Ple=Cee(Ate),Mie=Na({},hne,{relatedTarget:0}),nre=Cee(Mie),Lle=Na({},Zne,{animationName:0,elapsedTime:0,pseudoElement:0}),zle=Cee(Lle),jle=Na({},Zne,{clipboardData:function(ne){return"clipboardData"in ne?ne.clipboardData:window.clipboardData}}),Ble=Cee(jle),tre=Na({},Zne,{data:0}),Oie=Cee(tre),Ule={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dte(ne){var _e=this.nativeEvent;return _e.getModifierState?_e.getModifierState(ne):(ne=Gle[ne])?!!_e[ne]:!1}function Rte(){return Dte}var Wle=Na({},hne,{key:function(ne){if(ne.key){var _e=Ule[ne.key]||ne.key;if(_e!=="Unidentified")return _e}return ne.type==="keypress"?(ne=Qte(ne),ne===13?"Enter":String.fromCharCode(ne)):ne.type==="keydown"||ne.type==="keyup"?Kle[ne.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rte,charCode:function(ne){return ne.type==="keypress"?Qte(ne):0},keyCode:function(ne){return ne.type==="keydown"||ne.type==="keyup"?ne.keyCode:0},which:function(ne){return ne.type==="keypress"?Qte(ne):ne.type==="keydown"||ne.type==="keyup"?ne.keyCode:0}}),Hle=Cee(Wle),qle=Na({},ere,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kie=Cee(qle),Vle=Na({},hne,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rte}),Jle=Cee(Vle),Xle=Na({},Zne,{propertyName:0,elapsedTime:0,pseudoElement:0}),rre=Cee(Xle),Yle=Na({},ere,{deltaX:function(ne){return"deltaX"in ne?ne.deltaX:"wheelDeltaX"in ne?-ne.wheelDeltaX:0},deltaY:function(ne){return"deltaY"in ne?ne.deltaY:"wheelDeltaY"in ne?-ne.wheelDeltaY:"wheelDelta"in ne?-ne.wheelDelta:0},deltaZ:0,deltaMode:0}),Qle=Cee(Yle),ete=[9,13,27,32],ire=p&&"CompositionEvent"in window,nte=null;p&&"documentMode"in document&&(nte=document.documentMode);var Iie=p&&"TextEvent"in window&&!nte,lre=p&&(!ire||nte&&8<nte&&11>=nte),Nre=" ",Nie=!1;function Lie(ne,_e){switch(ne){case"keyup":return ete.indexOf(_e.keyCode)!==-1;case"keydown":return _e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zie(ne){return ne=ne.detail,typeof ne=="object"&&"data"in ne?ne.data:null}var tte=!1;function roe(ne,_e){switch(ne){case"compositionend":return zie(_e);case"keypress":return _e.which!==32?null:(Nie=!0,Nre);case"textInput":return ne=_e.data,ne===Nre&&Nie?null:ne;default:return null}}function Tte(ne,_e){if(tte)return ne==="compositionend"||!ire&&Lie(ne,_e)?(ne=Rie(),Yte=Ore=fne=null,tte=!1,ne):null;switch(ne){case"paste":return null;case"keypress":if(!(_e.ctrlKey||_e.altKey||_e.metaKey)||_e.ctrlKey&&_e.altKey){if(_e.char&&1<_e.char.length)return _e.char;if(_e.which)return String.fromCharCode(_e.which)}return null;case"compositionend":return lre&&_e.locale!=="ko"?null:_e.data;default:return null}}var Zle={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pre(ne){var _e=ne&&ne.nodeName&&ne.nodeName.toLowerCase();return _e==="input"?!!Zle[ne.type]:_e==="textarea"}function Lre(ne,_e,Ei,wu){Pp(wu),_e=ote(_e,"onChange"),0<_e.length&&(Ei=new kre("onChange","change",null,Ei,wu),ne.push({event:Ei,listeners:_e}))}var rte=null,Fte=null;function sre(ne){gne(ne,0)}function Bee(ne){var _e=fte(ne);if(Pf(_e))return ne}function ese(ne,_e){if(ne==="change")return _e}var jie=!1;if(p){var vee;if(p){var ore="oninput"in document;if(!ore){var zre=document.createElement("div");zre.setAttribute("oninput","return;"),ore=typeof zre.oninput=="function"}vee=ore}else vee=!1;jie=vee&&(!document.documentMode||9<document.documentMode)}function Bie(){rte&&(rte.detachEvent("onpropertychange",jre),Fte=rte=null)}function jre(ne){if(ne.propertyName==="value"&&Bee(Fte)){var _e=[];Lre(_e,Fte,ne,c0(ne)),_O(sre,_e)}}function ure(ne,_e,Ei){ne==="focusin"?(Bie(),rte=_e,Fte=Ei,rte.attachEvent("onpropertychange",jre)):ne==="focusout"&&Bie()}function Uie(ne){if(ne==="selectionchange"||ne==="keyup"||ne==="keydown")return Bee(Fte)}function Kie(ne,_e){if(ne==="click")return Bee(_e)}function Gie(ne,_e){if(ne==="input"||ne==="change")return Bee(_e)}function Wie(ne,_e){return ne===_e&&(ne!==0||1/ne===1/_e)||ne!==ne&&_e!==_e}var Tee=typeof Object.is=="function"?Object.is:Wie;function ite(ne,_e){if(Tee(ne,_e))return!0;if(typeof ne!="object"||ne===null||typeof _e!="object"||_e===null)return!1;var Ei=Object.keys(ne),wu=Object.keys(_e);if(Ei.length!==wu.length)return!1;for(wu=0;wu<Ei.length;wu++){var Ma=Ei[wu];if(!v.call(_e,Ma)||!Tee(ne[Ma],_e[Ma]))return!1}return!0}function Bre(ne){for(;ne&&ne.firstChild;)ne=ne.firstChild;return ne}function Ure(ne,_e){var Ei=Bre(ne);ne=0;for(var wu;Ei;){if(Ei.nodeType===3){if(wu=ne+Ei.textContent.length,ne<=_e&&wu>=_e)return{node:Ei,offset:_e-ne};ne=wu}e:{for(;Ei;){if(Ei.nextSibling){Ei=Ei.nextSibling;break e}Ei=Ei.parentNode}Ei=void 0}Ei=Bre(Ei)}}function Kre(ne,_e){return ne&&_e?ne===_e?!0:ne&&ne.nodeType===3?!1:_e&&_e.nodeType===3?Kre(ne,_e.parentNode):"contains"in ne?ne.contains(_e):ne.compareDocumentPosition?!!(ne.compareDocumentPosition(_e)&16):!1:!1}function Mte(){for(var ne=window,_e=ac();_e instanceof ne.HTMLIFrameElement;){try{var Ei=typeof _e.contentWindow.location.href=="string"}catch{Ei=!1}if(Ei)ne=_e.contentWindow;else break;_e=ac(ne.document)}return _e}function Iee(ne){var _e=ne&&ne.nodeName&&ne.nodeName.toLowerCase();return _e&&(_e==="input"&&(ne.type==="text"||ne.type==="search"||ne.type==="tel"||ne.type==="url"||ne.type==="password")||_e==="textarea"||ne.contentEditable==="true")}function Gre(ne){var _e=Mte(),Ei=ne.focusedElem,wu=ne.selectionRange;if(_e!==Ei&&Ei&&Ei.ownerDocument&&Kre(Ei.ownerDocument.documentElement,Ei)){if(wu!==null&&Iee(Ei)){if(_e=wu.start,ne=wu.end,ne===void 0&&(ne=_e),"selectionStart"in Ei)Ei.selectionStart=_e,Ei.selectionEnd=Math.min(ne,Ei.value.length);else if(ne=(_e=Ei.ownerDocument||document)&&_e.defaultView||window,ne.getSelection){ne=ne.getSelection();var Ma=Ei.textContent.length,za=Math.min(wu.start,Ma);wu=wu.end===void 0?za:Math.min(wu.end,Ma),!ne.extend&&za>wu&&(Ma=wu,wu=za,za=Ma),Ma=Ure(Ei,za);var bc=Ure(Ei,wu);Ma&&bc&&(ne.rangeCount!==1||ne.anchorNode!==Ma.node||ne.anchorOffset!==Ma.offset||ne.focusNode!==bc.node||ne.focusOffset!==bc.offset)&&(_e=_e.createRange(),_e.setStart(Ma.node,Ma.offset),ne.removeAllRanges(),za>wu?(ne.addRange(_e),ne.extend(bc.node,bc.offset)):(_e.setEnd(bc.node,bc.offset),ne.addRange(_e)))}}for(_e=[],ne=Ei;ne=ne.parentNode;)ne.nodeType===1&&_e.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof Ei.focus=="function"&&Ei.focus(),Ei=0;Ei<_e.length;Ei++)ne=_e[Ei],ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}var Hie=p&&"documentMode"in document&&11>=document.documentMode,dne=null,are=null,lte=null,cre=!1;function Wre(ne,_e,Ei){var wu=Ei.window===Ei?Ei.document:Ei.nodeType===9?Ei:Ei.ownerDocument;cre||dne==null||dne!==ac(wu)||(wu=dne,"selectionStart"in wu&&Iee(wu)?wu={start:wu.selectionStart,end:wu.selectionEnd}:(wu=(wu.ownerDocument&&wu.ownerDocument.defaultView||window).getSelection(),wu={anchorNode:wu.anchorNode,anchorOffset:wu.anchorOffset,focusNode:wu.focusNode,focusOffset:wu.focusOffset}),lte&&ite(lte,wu)||(lte=wu,wu=ote(are,"onSelect"),0<wu.length&&(_e=new kre("onSelect","select",null,_e,Ei),ne.push({event:_e,listeners:wu}),_e.target=dne)))}function Dne(ne,_e){var Ei={};return Ei[ne.toLowerCase()]=_e.toLowerCase(),Ei["Webkit"+ne]="webkit"+_e,Ei["Moz"+ne]="moz"+_e,Ei}var Qee={animationend:Dne("Animation","AnimationEnd"),animationiteration:Dne("Animation","AnimationIteration"),animationstart:Dne("Animation","AnimationStart"),transitionend:Dne("Transition","TransitionEnd")},fre={},Hre={};p&&(Hre=document.createElement("div").style,"AnimationEvent"in window||(delete Qee.animationend.animation,delete Qee.animationiteration.animation,delete Qee.animationstart.animation),"TransitionEvent"in window||delete Qee.transitionend.transition);function Ote(ne){if(fre[ne])return fre[ne];if(!Qee[ne])return ne;var _e=Qee[ne],Ei;for(Ei in _e)if(_e.hasOwnProperty(Ei)&&Ei in Hre)return fre[ne]=_e[Ei];return ne}var qre=Ote("animationend"),Vre=Ote("animationiteration"),hre=Ote("animationstart"),Jre=Ote("transitionend"),Xre=new Map,_G="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zee(ne,_e){Xre.set(ne,_e),f(_e,[ne])}for(var dre=0;dre<_G.length;dre++){var Yre=_G[dre],nse=Yre.toLowerCase(),ioe=Yre[0].toUpperCase()+Yre.slice(1);Zee(nse,"on"+ioe)}Zee(qre,"onAnimationEnd"),Zee(Vre,"onAnimationIteration"),Zee(hre,"onAnimationStart"),Zee("dblclick","onDoubleClick"),Zee("focusin","onFocus"),Zee("focusout","onBlur"),Zee(Jre,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kte="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qie=new Set("cancel close invalid load scroll toggle".split(" ").concat(kte));function Vie(ne,_e,Ei){var wu=ne.type||"unknown-event";ne.currentTarget=Ei,dee(wu,_e,void 0,ne),ne.currentTarget=null}function gne(ne,_e){_e=(_e&4)!==0;for(var Ei=0;Ei<ne.length;Ei++){var wu=ne[Ei],Ma=wu.event;wu=wu.listeners;e:{var za=void 0;if(_e)for(var bc=wu.length-1;0<=bc;bc--){var yg=wu[bc],f0=yg.instance,_5=yg.currentTarget;if(yg=yg.listener,f0!==za&&Ma.isPropagationStopped())break e;Vie(Ma,yg,_5),za=f0}else for(bc=0;bc<wu.length;bc++){if(yg=wu[bc],f0=yg.instance,_5=yg.currentTarget,yg=yg.listener,f0!==za&&Ma.isPropagationStopped())break e;Vie(Ma,yg,_5),za=f0}}}if(xz)throw ne=Vj,xz=!1,Vj=null,ne}function _U(ne,_e){var Ei=_e[Tne];Ei===void 0&&(Ei=_e[Tne]=new Set);var wu=ne+"__bubble";Ei.has(wu)||(Jie(_e,ne,2,!1),Ei.add(wu))}function gre(ne,_e,Ei){var wu=0;_e&&(wu|=4),Jie(Ei,ne,wu,_e)}var Ite="_reactListening"+Math.random().toString(36).slice(2);function ste(ne){if(!ne[Ite]){ne[Ite]=!0,s.forEach(function(Ei){Ei!=="selectionchange"&&(qie.has(Ei)||gre(Ei,!1,ne),gre(Ei,!0,ne))});var _e=ne.nodeType===9?ne:ne.ownerDocument;_e===null||_e[Ite]||(_e[Ite]=!0,gre("selectionchange",!1,_e))}}function Jie(ne,_e,Ei,wu){switch(Die(_e)){case 1:var Ma=Ile;break;case 4:Ma=Nle;break;default:Ma=Fre}Ei=Ma.bind(null,_e,Ei,ne),Ma=void 0,!_T||_e!=="touchstart"&&_e!=="touchmove"&&_e!=="wheel"||(Ma=!0),wu?Ma!==void 0?ne.addEventListener(_e,Ei,{capture:!0,passive:Ma}):ne.addEventListener(_e,Ei,!0):Ma!==void 0?ne.addEventListener(_e,Ei,{passive:Ma}):ne.addEventListener(_e,Ei,!1)}function pre(ne,_e,Ei,wu,Ma){var za=wu;if((_e&1)===0&&(_e&2)===0&&wu!==null)e:for(;;){if(wu===null)return;var bc=wu.tag;if(bc===3||bc===4){var yg=wu.stateNode.containerInfo;if(yg===Ma||yg.nodeType===8&&yg.parentNode===Ma)break;if(bc===4)for(bc=wu.return;bc!==null;){var f0=bc.tag;if((f0===3||f0===4)&&(f0=bc.stateNode.containerInfo,f0===Ma||f0.nodeType===8&&f0.parentNode===Ma))return;bc=bc.return}for(;yg!==null;){if(bc=Fne(yg),bc===null)return;if(f0=bc.tag,f0===5||f0===6){wu=za=bc;continue e}yg=yg.parentNode}}wu=wu.return}_O(function(){var _5=za,_C=c0(Ei),_R=[];e:{var _3=Xre.get(ne);if(_3!==void 0){var _I=kre,_N=ne;switch(ne){case"keypress":if(Qte(Ei)===0)break e;case"keydown":case"keyup":_I=Hle;break;case"focusin":_N="focus",_I=nre;break;case"focusout":_N="blur",_I=nre;break;case"beforeblur":case"afterblur":_I=nre;break;case"click":if(Ei.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_I=Fie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_I=Ple;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_I=Jle;break;case qre:case Vre:case hre:_I=zle;break;case Jre:_I=rre;break;case"scroll":_I=Tie;break;case"wheel":_I=Qle;break;case"copy":case"cut":case"paste":_I=Ble;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_I=kie}var _P=(_e&4)!==0,eee=!_P&&ne==="scroll",_w=_P?_3!==null?_3+"Capture":null:_3;_P=[];for(var Qp=_5,__;Qp!==null;){__=Qp;var _F=__.stateNode;if(__.tag===5&&_F!==null&&(__=_F,_w!==null&&(_F=_M(Qp,_w),_F!=null&&_P.push(Rne(Qp,_F,__)))),eee)break;Qp=Qp.return}0<_P.length&&(_3=new _I(_3,_N,null,Ei,_C),_R.push({event:_3,listeners:_P}))}}if((_e&7)===0){e:{if(_3=ne==="mouseover"||ne==="pointerover",_I=ne==="mouseout"||ne==="pointerout",_3&&Ei!==vf&&(_N=Ei.relatedTarget||Ei.fromElement)&&(Fne(_N)||_N[ene]))break e;if((_I||_3)&&(_3=_C.window===_C?_C:(_3=_C.ownerDocument)?_3.defaultView||_3.parentWindow:window,_I?(_N=Ei.relatedTarget||Ei.toElement,_I=_5,_N=_N?Fne(_N):null,_N!==null&&(eee=zz(_N),_N!==eee||_N.tag!==5&&_N.tag!==6)&&(_N=null)):(_I=null,_N=_5),_I!==_N)){if(_P=Fie,_F="onMouseLeave",_w="onMouseEnter",Qp="mouse",(ne==="pointerout"||ne==="pointerover")&&(_P=kie,_F="onPointerLeave",_w="onPointerEnter",Qp="pointer"),eee=_I==null?_3:fte(_I),__=_N==null?_3:fte(_N),_3=new _P(_F,Qp+"leave",_I,Ei,_C),_3.target=eee,_3.relatedTarget=__,_F=null,Fne(_C)===_5&&(_P=new _P(_w,Qp+"enter",_N,Ei,_C),_P.target=__,_P.relatedTarget=eee,_F=_P),eee=_F,_I&&_N)n:{for(_P=_I,_w=_N,Qp=0,__=_P;__;__=ute(__))Qp++;for(__=0,_F=_w;_F;_F=ute(_F))__++;for(;0<Qp-__;)_P=ute(_P),Qp--;for(;0<__-Qp;)_w=ute(_w),__--;for(;Qp--;){if(_P===_w||_w!==null&&_P===_w.alternate)break n;_P=ute(_P),_w=ute(_w)}_P=null}else _P=null;_I!==null&&Qre(_R,_3,_I,_P,!1),_N!==null&&eee!==null&&Qre(_R,eee,_N,_P,!0)}}e:{if(_3=_5?fte(_5):window,_I=_3.nodeName&&_3.nodeName.toLowerCase(),_I==="select"||_I==="input"&&_3.type==="file")var _L=ese;else if(Pre(_3))if(jie)_L=Gie;else{_L=Uie;var wz=ure}else(_I=_3.nodeName)&&_I.toLowerCase()==="input"&&(_3.type==="checkbox"||_3.type==="radio")&&(_L=Kie);if(_L&&(_L=_L(ne,_5))){Lre(_R,_L,Ei,_C);break e}wz&&wz(ne,_3,_5),ne==="focusout"&&(wz=_3._wrapperState)&&wz.controlled&&_3.type==="number"&&$b(_3,"number",_3.value)}switch(wz=_5?fte(_5):window,ne){case"focusin":(Pre(wz)||wz.contentEditable==="true")&&(dne=wz,are=_5,lte=null);break;case"focusout":lte=are=dne=null;break;case"mousedown":cre=!0;break;case"contextmenu":case"mouseup":case"dragend":cre=!1,Wre(_R,Ei,_C);break;case"selectionchange":if(Hie)break;case"keydown":case"keyup":Wre(_R,Ei,_C)}var yz;if(ire)e:{switch(ne){case"compositionstart":var Cz="onCompositionStart";break e;case"compositionend":Cz="onCompositionEnd";break e;case"compositionupdate":Cz="onCompositionUpdate";break e}Cz=void 0}else tte?Lie(ne,Ei)&&(Cz="onCompositionEnd"):ne==="keydown"&&Ei.keyCode===229&&(Cz="onCompositionStart");Cz&&(lre&&Ei.locale!=="ko"&&(tte||Cz!=="onCompositionStart"?Cz==="onCompositionEnd"&&tte&&(yz=Rie()):(fne=_C,Ore="value"in fne?fne.value:fne.textContent,tte=!0)),wz=ote(_5,Cz),0<wz.length&&(Cz=new Oie(Cz,ne,null,Ei,_C),_R.push({event:Cz,listeners:wz}),yz?Cz.data=yz:(yz=zie(Ei),yz!==null&&(Cz.data=yz)))),(yz=Iie?roe(ne,Ei):Tte(ne,Ei))&&(_5=ote(_5,"onBeforeInput"),0<_5.length&&(_C=new Oie("onBeforeInput","beforeinput",null,Ei,_C),_R.push({event:_C,listeners:_5}),_C.data=yz))}gne(_R,_e)})}function Rne(ne,_e,Ei){return{instance:ne,listener:_e,currentTarget:Ei}}function ote(ne,_e){for(var Ei=_e+"Capture",wu=[];ne!==null;){var Ma=ne,za=Ma.stateNode;Ma.tag===5&&za!==null&&(Ma=za,za=_M(ne,Ei),za!=null&&wu.unshift(Rne(ne,za,Ma)),za=_M(ne,_e),za!=null&&wu.push(Rne(ne,za,Ma))),ne=ne.return}return wu}function ute(ne){if(ne===null)return null;do ne=ne.return;while(ne&&ne.tag!==5);return ne||null}function Qre(ne,_e,Ei,wu,Ma){for(var za=_e._reactName,bc=[];Ei!==null&&Ei!==wu;){var yg=Ei,f0=yg.alternate,_5=yg.stateNode;if(f0!==null&&f0===wu)break;yg.tag===5&&_5!==null&&(yg=_5,Ma?(f0=_M(Ei,za),f0!=null&&bc.unshift(Rne(Ei,f0,yg))):Ma||(f0=_M(Ei,za),f0!=null&&bc.push(Rne(Ei,f0,yg)))),Ei=Ei.return}bc.length!==0&&ne.push({event:_e,listeners:bc})}var tse=/\r\n?/g,rse=/\u0000|\uFFFD/g;function Xie(ne){return(typeof ne=="string"?ne:""+ne).replace(tse,`
`).replace(rse,"")}function mre(ne,_e,Ei){if(_e=Xie(_e),Xie(ne)!==_e&&Ei)throw Error(i(425))}function vre(){}var Zre=null,eie=null;function nie(ne,_e){return ne==="textarea"||ne==="noscript"||typeof _e.children=="string"||typeof _e.children=="number"||typeof _e.dangerouslySetInnerHTML=="object"&&_e.dangerouslySetInnerHTML!==null&&_e.dangerouslySetInnerHTML.__html!=null}var tie=typeof setTimeout=="function"?setTimeout:void 0,ise=typeof clearTimeout=="function"?clearTimeout:void 0,Yie=typeof Promise=="function"?Promise:void 0,lse=typeof queueMicrotask=="function"?queueMicrotask:typeof Yie<"u"?function(ne){return Yie.resolve(null).then(ne).catch(sse)}:tie;function sse(ne){setTimeout(function(){throw ne})}function rie(ne,_e){var Ei=_e,wu=0;do{var Ma=Ei.nextSibling;if(ne.removeChild(Ei),Ma&&Ma.nodeType===8)if(Ei=Ma.data,Ei==="/$"){if(wu===0){ne.removeChild(Ma),bte(_e);return}wu--}else Ei!=="$"&&Ei!=="$?"&&Ei!=="$!"||wu++;Ei=Ma}while(Ei);bte(_e)}function see(ne){for(;ne!=null;ne=ne.nextSibling){var _e=ne.nodeType;if(_e===1||_e===3)break;if(_e===8){if(_e=ne.data,_e==="$"||_e==="$!"||_e==="$?")break;if(_e==="/$")return null}}return ne}function Qie(ne){ne=ne.previousSibling;for(var _e=0;ne;){if(ne.nodeType===8){var Ei=ne.data;if(Ei==="$"||Ei==="$!"||Ei==="$?"){if(_e===0)return ne;_e--}else Ei==="/$"&&_e++}ne=ne.previousSibling}return null}var ate=Math.random().toString(36).slice(2),Nee="__reactFiber$"+ate,Nte="__reactProps$"+ate,ene="__reactContainer$"+ate,Tne="__reactEvents$"+ate,iie="__reactListeners$"+ate,lie="__reactHandles$"+ate;function Fne(ne){var _e=ne[Nee];if(_e)return _e;for(var Ei=ne.parentNode;Ei;){if(_e=Ei[ene]||Ei[Nee]){if(Ei=_e.alternate,_e.child!==null||Ei!==null&&Ei.child!==null)for(ne=Qie(ne);ne!==null;){if(Ei=ne[Nee])return Ei;ne=Qie(ne)}return _e}ne=Ei,Ei=ne.parentNode}return null}function cte(ne){return ne=ne[Nee]||ne[ene],!ne||ne.tag!==5&&ne.tag!==6&&ne.tag!==13&&ne.tag!==3?null:ne}function fte(ne){if(ne.tag===5||ne.tag===6)return ne.stateNode;throw Error(i(33))}function pne(ne){return ne[Nte]||null}var Pte=[],hte=-1;function mne(ne){return{current:ne}}function _W(ne){0>hte||(ne.current=Pte[hte],Pte[hte]=null,hte--)}function _K(ne,_e){hte++,Pte[hte]=ne.current,ne.current=_e}var vne={},oee=mne(vne),wee=mne(!1),Mne=vne;function dte(ne,_e){var Ei=ne.type.contextTypes;if(!Ei)return vne;var wu=ne.stateNode;if(wu&&wu.__reactInternalMemoizedUnmaskedChildContext===_e)return wu.__reactInternalMemoizedMaskedChildContext;var Ma={},za;for(za in Ei)Ma[za]=_e[za];return wu&&(ne=ne.stateNode,ne.__reactInternalMemoizedUnmaskedChildContext=_e,ne.__reactInternalMemoizedMaskedChildContext=Ma),Ma}function yee(ne){return ne=ne.childContextTypes,ne!=null}function wre(){_W(wee),_W(oee)}function Zie(ne,_e,Ei){if(oee.current!==vne)throw Error(i(168));_K(oee,_e),_K(wee,Ei)}function ele(ne,_e,Ei){var wu=ne.stateNode;if(_e=_e.childContextTypes,typeof wu.getChildContext!="function")return Ei;wu=wu.getChildContext();for(var Ma in wu)if(!(Ma in _e))throw Error(i(108,Kd(ne)||"Unknown",Ma));return Na({},Ei,wu)}function yre(ne){return ne=(ne=ne.stateNode)&&ne.__reactInternalMemoizedMergedChildContext||vne,Mne=oee.current,_K(oee,ne),_K(wee,wee.current),!0}function sie(ne,_e,Ei){var wu=ne.stateNode;if(!wu)throw Error(i(169));Ei?(ne=ele(ne,_e,Mne),wu.__reactInternalMemoizedMergedChildContext=ne,_W(wee),_W(oee),_K(oee,ne)):_W(wee),_K(wee,Ei)}var Uee=null,Lte=!1,xre=!1;function oie(ne){Uee===null?Uee=[ne]:Uee.push(ne)}function nle(ne){Lte=!0,oie(ne)}function nne(){if(!xre&&Uee!==null){xre=!0;var ne=0,_e=Uj;try{var Ei=Uee;for(Uj=1;ne<Ei.length;ne++){var wu=Ei[ne];do wu=wu(!0);while(wu!==null)}Uee=null,Lte=!1}catch(Ma){throw Uee!==null&&(Uee=Uee.slice(ne+1)),Sne(sne,nne),Ma}finally{Uj=_e,xre=!1}}return null}var One=[],kne=0,Sre=null,kl=0,ja=[],xa=0,af=null,Ld=1,Cd="";function _E(ne,_e){One[kne++]=kl,One[kne++]=Sre,Sre=ne,kl=_e}function _m(ne,_e,Ei){ja[xa++]=Ld,ja[xa++]=Cd,ja[xa++]=af,af=ne;var wu=Ld;ne=Cd;var Ma=32-_Y(wu)-1;wu&=~(1<<Ma),Ei+=1;var za=32-_Y(_e)+Ma;if(30<za){var bc=Ma-Ma%5;za=(wu&(1<<bc)-1).toString(32),wu>>=bc,Ma-=bc,Ld=1<<32-_Y(_e)+Ma|Ei<<Ma|wu,Cd=za+ne}else Ld=1<<za|Ei<<Ma|wu,Cd=ne}function _6(ne){ne.return!==null&&(_E(ne,1),_m(ne,1,0))}function d0(ne){for(;ne===Sre;)Sre=One[--kne],One[kne]=null,kl=One[--kne],One[kne]=null;for(;ne===af;)af=ja[--xa],ja[xa]=null,Cd=ja[--xa],ja[xa]=null,Ld=ja[--xa],ja[xa]=null}var _v=null,Dz=null,XR=!1,Vb=null;function _7(ne,_e){var Ei=Hee(5,null,null,0);Ei.elementType="DELETED",Ei.stateNode=_e,Ei.return=ne,_e=ne.deletions,_e===null?(ne.deletions=[Ei],ne.flags|=16):_e.push(Ei)}function _H(ne,_e){switch(ne.tag){case 5:var Ei=ne.type;return _e=_e.nodeType!==1||Ei.toLowerCase()!==_e.nodeName.toLowerCase()?null:_e,_e!==null?(ne.stateNode=_e,_v=ne,Dz=see(_e.firstChild),!0):!1;case 6:return _e=ne.pendingProps===""||_e.nodeType!==3?null:_e,_e!==null?(ne.stateNode=_e,_v=ne,Dz=null,!0):!1;case 13:return _e=_e.nodeType!==8?null:_e,_e!==null?(Ei=af!==null?{id:Ld,overflow:Cd}:null,ne.memoizedState={dehydrated:_e,treeContext:Ei,retryLane:1073741824},Ei=Hee(18,null,null,0),Ei.stateNode=_e,Ei.return=ne,ne.child=Ei,_v=ne,Dz=null,!0):!1;default:return!1}}function Nz(ne){return(ne.mode&1)!==0&&(ne.flags&128)===0}function Mz(ne){if(XR){var _e=Dz;if(_e){var Ei=_e;if(!_H(ne,_e)){if(Nz(ne))throw Error(i(418));_e=see(Ei.nextSibling);var wu=_v;_e&&_H(ne,_e)?_7(wu,Ei):(ne.flags=ne.flags&-4097|2,XR=!1,_v=ne)}}else{if(Nz(ne))throw Error(i(418));ne.flags=ne.flags&-4097|2,XR=!1,_v=ne}}}function Hz(ne){for(ne=ne.return;ne!==null&&ne.tag!==5&&ne.tag!==3&&ne.tag!==13;)ne=ne.return;_v=ne}function Oz(ne){if(ne!==_v)return!1;if(!XR)return Hz(ne),XR=!0,!1;var _e;if((_e=ne.tag!==3)&&!(_e=ne.tag!==5)&&(_e=ne.type,_e=_e!=="head"&&_e!=="body"&&!nie(ne.type,ne.memoizedProps)),_e&&(_e=Dz)){if(Nz(ne))throw _4(),Error(i(418));for(;_e;)_7(ne,_e),_e=see(_e.nextSibling)}if(Hz(ne),ne.tag===13){if(ne=ne.memoizedState,ne=ne!==null?ne.dehydrated:null,!ne)throw Error(i(317));e:{for(ne=ne.nextSibling,_e=0;ne;){if(ne.nodeType===8){var Ei=ne.data;if(Ei==="/$"){if(_e===0){Dz=see(ne.nextSibling);break e}_e--}else Ei!=="$"&&Ei!=="$!"&&Ei!=="$?"||_e++}ne=ne.nextSibling}Dz=null}}else Dz=_v?see(ne.stateNode.nextSibling):null;return!0}function _4(){for(var ne=Dz;ne;)ne=see(ne.nextSibling)}function Pz(){Dz=_v=null,XR=!1}function _Q(ne){Vb===null?Vb=[ne]:Vb.push(ne)}var vz=De.ReactCurrentBatchConfig;function Jz(ne,_e,Ei){if(ne=Ei.ref,ne!==null&&typeof ne!="function"&&typeof ne!="object"){if(Ei._owner){if(Ei=Ei._owner,Ei){if(Ei.tag!==1)throw Error(i(309));var wu=Ei.stateNode}if(!wu)throw Error(i(147,ne));var Ma=wu,za=""+ne;return _e!==null&&_e.ref!==null&&typeof _e.ref=="function"&&_e.ref._stringRef===za?_e.ref:(_e=function(bc){var yg=Ma.refs;bc===null?delete yg[za]:yg[za]=bc},_e._stringRef=za,_e)}if(typeof ne!="string")throw Error(i(284));if(!Ei._owner)throw Error(i(290,ne))}return ne}function Iz(ne,_e){throw ne=Object.prototype.toString.call(_e),Error(i(31,ne==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":ne))}function Fz(ne){var _e=ne._init;return _e(ne._payload)}function Lz(ne){function _e(_w,Qp){if(ne){var __=_w.deletions;__===null?(_w.deletions=[Qp],_w.flags|=16):__.push(Qp)}}function Ei(_w,Qp){if(!ne)return null;for(;Qp!==null;)_e(_w,Qp),Qp=Qp.sibling;return null}function wu(_w,Qp){for(_w=new Map;Qp!==null;)Qp.key!==null?_w.set(Qp.key,Qp):_w.set(Qp.index,Qp),Qp=Qp.sibling;return _w}function Ma(_w,Qp){return _w=Ste(_w,Qp),_w.index=0,_w.sibling=null,_w}function za(_w,Qp,__){return _w.index=__,ne?(__=_w.alternate,__!==null?(__=__.index,__<Qp?(_w.flags|=2,Qp):__):(_w.flags|=2,Qp)):(_w.flags|=1048576,Qp)}function bc(_w){return ne&&_w.alternate===null&&(_w.flags|=2),_w}function yg(_w,Qp,__,_F){return Qp===null||Qp.tag!==6?(Qp=Yse(__,_w.mode,_F),Qp.return=_w,Qp):(Qp=Ma(Qp,__),Qp.return=_w,Qp)}function f0(_w,Qp,__,_F){var _L=__.type;return _L===Me?_C(_w,Qp,__.props.children,_F,__.key):Qp!==null&&(Qp.elementType===_L||typeof _L=="object"&&_L!==null&&_L.$$typeof===Sa&&Fz(_L)===Qp.type)?(_F=Ma(Qp,__.props),_F.ref=Jz(_w,Qp,__),_F.return=_w,_F):(_F=_le(__.type,__.key,__.props,null,_w.mode,_F),_F.ref=Jz(_w,Qp,__),_F.return=_w,_F)}function _5(_w,Qp,__,_F){return Qp===null||Qp.tag!==4||Qp.stateNode.containerInfo!==__.containerInfo||Qp.stateNode.implementation!==__.implementation?(Qp=Qse(__,_w.mode,_F),Qp.return=_w,Qp):(Qp=Ma(Qp,__.children||[]),Qp.return=_w,Qp)}function _C(_w,Qp,__,_F,_L){return Qp===null||Qp.tag!==7?(Qp=Hte(__,_w.mode,_F,_L),Qp.return=_w,Qp):(Qp=Ma(Qp,__),Qp.return=_w,Qp)}function _R(_w,Qp,__){if(typeof Qp=="string"&&Qp!==""||typeof Qp=="number")return Qp=Yse(""+Qp,_w.mode,__),Qp.return=_w,Qp;if(typeof Qp=="object"&&Qp!==null){switch(Qp.$$typeof){case le:return __=_le(Qp.type,Qp.key,Qp.props,null,_w.mode,__),__.ref=Jz(_w,null,Qp),__.return=_w,__;case Ce:return Qp=Qse(Qp,_w.mode,__),Qp.return=_w,Qp;case Sa:var _F=Qp._init;return _R(_w,_F(Qp._payload),__)}if(Z_(Qp)||Fa(Qp))return Qp=Hte(Qp,_w.mode,__,null),Qp.return=_w,Qp;Iz(_w,Qp)}return null}function _3(_w,Qp,__,_F){var _L=Qp!==null?Qp.key:null;if(typeof __=="string"&&__!==""||typeof __=="number")return _L!==null?null:yg(_w,Qp,""+__,_F);if(typeof __=="object"&&__!==null){switch(__.$$typeof){case le:return __.key===_L?f0(_w,Qp,__,_F):null;case Ce:return __.key===_L?_5(_w,Qp,__,_F):null;case Sa:return _L=__._init,_3(_w,Qp,_L(__._payload),_F)}if(Z_(__)||Fa(__))return _L!==null?null:_C(_w,Qp,__,_F,null);Iz(_w,__)}return null}function _I(_w,Qp,__,_F,_L){if(typeof _F=="string"&&_F!==""||typeof _F=="number")return _w=_w.get(__)||null,yg(Qp,_w,""+_F,_L);if(typeof _F=="object"&&_F!==null){switch(_F.$$typeof){case le:return _w=_w.get(_F.key===null?__:_F.key)||null,f0(Qp,_w,_F,_L);case Ce:return _w=_w.get(_F.key===null?__:_F.key)||null,_5(Qp,_w,_F,_L);case Sa:var wz=_F._init;return _I(_w,Qp,__,wz(_F._payload),_L)}if(Z_(_F)||Fa(_F))return _w=_w.get(__)||null,_C(Qp,_w,_F,_L,null);Iz(Qp,_F)}return null}function _N(_w,Qp,__,_F){for(var _L=null,wz=null,yz=Qp,Cz=Qp=0,cee=null;yz!==null&&Cz<__.length;Cz++){yz.index>Cz?(cee=yz,yz=null):cee=yz.sibling;var Wj=_3(_w,yz,__[Cz],_F);if(Wj===null){yz===null&&(yz=cee);break}ne&&yz&&Wj.alternate===null&&_e(_w,yz),Qp=za(Wj,Qp,Cz),wz===null?_L=Wj:wz.sibling=Wj,wz=Wj,yz=cee}if(Cz===__.length)return Ei(_w,yz),XR&&_E(_w,Cz),_L;if(yz===null){for(;Cz<__.length;Cz++)yz=_R(_w,__[Cz],_F),yz!==null&&(Qp=za(yz,Qp,Cz),wz===null?_L=yz:wz.sibling=yz,wz=yz);return XR&&_E(_w,Cz),_L}for(yz=wu(_w,yz);Cz<__.length;Cz++)cee=_I(yz,_w,Cz,__[Cz],_F),cee!==null&&(ne&&cee.alternate!==null&&yz.delete(cee.key===null?Cz:cee.key),Qp=za(cee,Qp,Cz),wz===null?_L=cee:wz.sibling=cee,wz=cee);return ne&&yz.forEach(function(Ete){return _e(_w,Ete)}),XR&&_E(_w,Cz),_L}function _P(_w,Qp,__,_F){var _L=Fa(__);if(typeof _L!="function")throw Error(i(150));if(__=_L.call(__),__==null)throw Error(i(151));for(var wz=_L=null,yz=Qp,Cz=Qp=0,cee=null,Wj=__.next();yz!==null&&!Wj.done;Cz++,Wj=__.next()){yz.index>Cz?(cee=yz,yz=null):cee=yz.sibling;var Ete=_3(_w,yz,Wj.value,_F);if(Ete===null){yz===null&&(yz=cee);break}ne&&yz&&Ete.alternate===null&&_e(_w,yz),Qp=za(Ete,Qp,Cz),wz===null?_L=Ete:wz.sibling=Ete,wz=Ete,yz=cee}if(Wj.done)return Ei(_w,yz),XR&&_E(_w,Cz),_L;if(yz===null){for(;!Wj.done;Cz++,Wj=__.next())Wj=_R(_w,Wj.value,_F),Wj!==null&&(Qp=za(Wj,Qp,Cz),wz===null?_L=Wj:wz.sibling=Wj,wz=Wj);return XR&&_E(_w,Cz),_L}for(yz=wu(_w,yz);!Wj.done;Cz++,Wj=__.next())Wj=_I(yz,_w,Cz,Wj.value,_F),Wj!==null&&(ne&&Wj.alternate!==null&&yz.delete(Wj.key===null?Cz:Wj.key),Qp=za(Wj,Qp,Cz),wz===null?_L=Wj:wz.sibling=Wj,wz=Wj);return ne&&yz.forEach(function(lae){return _e(_w,lae)}),XR&&_E(_w,Cz),_L}function eee(_w,Qp,__,_F){if(typeof __=="object"&&__!==null&&__.type===Me&&__.key===null&&(__=__.props.children),typeof __=="object"&&__!==null){switch(__.$$typeof){case le:e:{for(var _L=__.key,wz=Qp;wz!==null;){if(wz.key===_L){if(_L=__.type,_L===Me){if(wz.tag===7){Ei(_w,wz.sibling),Qp=Ma(wz,__.props.children),Qp.return=_w,_w=Qp;break e}}else if(wz.elementType===_L||typeof _L=="object"&&_L!==null&&_L.$$typeof===Sa&&Fz(_L)===wz.type){Ei(_w,wz.sibling),Qp=Ma(wz,__.props),Qp.ref=Jz(_w,wz,__),Qp.return=_w,_w=Qp;break e}Ei(_w,wz);break}else _e(_w,wz);wz=wz.sibling}__.type===Me?(Qp=Hte(__.props.children,_w.mode,_F,__.key),Qp.return=_w,_w=Qp):(_F=_le(__.type,__.key,__.props,null,_w.mode,_F),_F.ref=Jz(_w,Qp,__),_F.return=_w,_w=_F)}return bc(_w);case Ce:e:{for(wz=__.key;Qp!==null;){if(Qp.key===wz)if(Qp.tag===4&&Qp.stateNode.containerInfo===__.containerInfo&&Qp.stateNode.implementation===__.implementation){Ei(_w,Qp.sibling),Qp=Ma(Qp,__.children||[]),Qp.return=_w,_w=Qp;break e}else{Ei(_w,Qp);break}else _e(_w,Qp);Qp=Qp.sibling}Qp=Qse(__,_w.mode,_F),Qp.return=_w,_w=Qp}return bc(_w);case Sa:return wz=__._init,eee(_w,Qp,wz(__._payload),_F)}if(Z_(__))return _N(_w,Qp,__,_F);if(Fa(__))return _P(_w,Qp,__,_F);Iz(_w,__)}return typeof __=="string"&&__!==""||typeof __=="number"?(__=""+__,Qp!==null&&Qp.tag===6?(Ei(_w,Qp.sibling),Qp=Ma(Qp,__),Qp.return=_w,_w=Qp):(Ei(_w,Qp),Qp=Yse(__,_w.mode,_F),Qp.return=_w,_w=Qp),bc(_w)):Ei(_w,Qp)}return eee}var Fee=Lz(!0),uie=Lz(!1),Ine=mne(null),Nne=null,Ere=null,ose=null;function use(){ose=Ere=Nne=null}function ase(ne){var _e=Ine.current;_W(Ine),ne._currentValue=_e}function cse(ne,_e,Ei){for(;ne!==null;){var wu=ne.alternate;if((ne.childLanes&_e)!==_e?(ne.childLanes|=_e,wu!==null&&(wu.childLanes|=_e)):wu!==null&&(wu.childLanes&_e)!==_e&&(wu.childLanes|=_e),ne===Ei)break;ne=ne.return}}function _re(ne,_e){Nne=ne,ose=Ere=null,ne=ne.dependencies,ne!==null&&ne.firstContext!==null&&((ne.lanes&_e)!==0&&(Mee=!0),ne.firstContext=null)}function Kee(ne){var _e=ne._currentValue;if(ose!==ne)if(ne={context:ne,memoizedValue:_e,next:null},Ere===null){if(Nne===null)throw Error(i(308));Ere=ne,Nne.dependencies={lanes:0,firstContext:ne}}else Ere=Ere.next=ne;return _e}var zte=null;function fse(ne){zte===null?zte=[ne]:zte.push(ne)}function loe(ne,_e,Ei,wu){var Ma=_e.interleaved;return Ma===null?(Ei.next=Ei,fse(_e)):(Ei.next=Ma.next,Ma.next=Ei),_e.interleaved=Ei,Pne(ne,wu)}function Pne(ne,_e){ne.lanes|=_e;var Ei=ne.alternate;for(Ei!==null&&(Ei.lanes|=_e),Ei=ne,ne=ne.return;ne!==null;)ne.childLanes|=_e,Ei=ne.alternate,Ei!==null&&(Ei.childLanes|=_e),Ei=ne,ne=ne.return;return Ei.tag===3?Ei.stateNode:null}var gte=!1;function hse(ne){ne.updateQueue={baseState:ne.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function soe(ne,_e){ne=ne.updateQueue,_e.updateQueue===ne&&(_e.updateQueue={baseState:ne.baseState,firstBaseUpdate:ne.firstBaseUpdate,lastBaseUpdate:ne.lastBaseUpdate,shared:ne.shared,effects:ne.effects})}function Lne(ne,_e){return{eventTime:ne,lane:_e,tag:0,payload:null,callback:null,next:null}}function pte(ne,_e,Ei){var wu=ne.updateQueue;if(wu===null)return null;if(wu=wu.shared,(_j&2)!==0){var Ma=wu.pending;return Ma===null?_e.next=_e:(_e.next=Ma.next,Ma.next=_e),wu.pending=_e,Pne(ne,Ei)}return Ma=wu.interleaved,Ma===null?(_e.next=_e,fse(wu)):(_e.next=Ma.next,Ma.next=_e),wu.interleaved=_e,Pne(ne,Ei)}function tle(ne,_e,Ei){if(_e=_e.updateQueue,_e!==null&&(_e=_e.shared,(Ei&4194240)!==0)){var wu=_e.lanes;wu&=ne.pendingLanes,Ei|=wu,_e.lanes=Ei,Vee(ne,Ei)}}function ooe(ne,_e){var Ei=ne.updateQueue,wu=ne.alternate;if(wu!==null&&(wu=wu.updateQueue,Ei===wu)){var Ma=null,za=null;if(Ei=Ei.firstBaseUpdate,Ei!==null){do{var bc={eventTime:Ei.eventTime,lane:Ei.lane,tag:Ei.tag,payload:Ei.payload,callback:Ei.callback,next:null};za===null?Ma=za=bc:za=za.next=bc,Ei=Ei.next}while(Ei!==null);za===null?Ma=za=_e:za=za.next=_e}else Ma=za=_e;Ei={baseState:wu.baseState,firstBaseUpdate:Ma,lastBaseUpdate:za,shared:wu.shared,effects:wu.effects},ne.updateQueue=Ei;return}ne=Ei.lastBaseUpdate,ne===null?Ei.firstBaseUpdate=_e:ne.next=_e,Ei.lastBaseUpdate=_e}function rle(ne,_e,Ei,wu){var Ma=ne.updateQueue;gte=!1;var za=Ma.firstBaseUpdate,bc=Ma.lastBaseUpdate,yg=Ma.shared.pending;if(yg!==null){Ma.shared.pending=null;var f0=yg,_5=f0.next;f0.next=null,bc===null?za=_5:bc.next=_5,bc=f0;var _C=ne.alternate;_C!==null&&(_C=_C.updateQueue,yg=_C.lastBaseUpdate,yg!==bc&&(yg===null?_C.firstBaseUpdate=_5:yg.next=_5,_C.lastBaseUpdate=f0))}if(za!==null){var _R=Ma.baseState;bc=0,_C=_5=f0=null,yg=za;do{var _3=yg.lane,_I=yg.eventTime;if((wu&_3)===_3){_C!==null&&(_C=_C.next={eventTime:_I,lane:0,tag:yg.tag,payload:yg.payload,callback:yg.callback,next:null});e:{var _N=ne,_P=yg;switch(_3=_e,_I=Ei,_P.tag){case 1:if(_N=_P.payload,typeof _N=="function"){_R=_N.call(_I,_R,_3);break e}_R=_N;break e;case 3:_N.flags=_N.flags&-65537|128;case 0:if(_N=_P.payload,_3=typeof _N=="function"?_N.call(_I,_R,_3):_N,_3==null)break e;_R=Na({},_R,_3);break e;case 2:gte=!0}}yg.callback!==null&&yg.lane!==0&&(ne.flags|=64,_3=Ma.effects,_3===null?Ma.effects=[yg]:_3.push(yg))}else _I={eventTime:_I,lane:_3,tag:yg.tag,payload:yg.payload,callback:yg.callback,next:null},_C===null?(_5=_C=_I,f0=_R):_C=_C.next=_I,bc|=_3;if(yg=yg.next,yg===null){if(yg=Ma.shared.pending,yg===null)break;_3=yg,yg=_3.next,_3.next=null,Ma.lastBaseUpdate=_3,Ma.shared.pending=null}}while(!0);if(_C===null&&(f0=_R),Ma.baseState=f0,Ma.firstBaseUpdate=_5,Ma.lastBaseUpdate=_C,_e=Ma.shared.interleaved,_e!==null){Ma=_e;do bc|=Ma.lane,Ma=Ma.next;while(Ma!==_e)}else za===null&&(Ma.shared.lanes=0);Ute|=bc,ne.lanes=bc,ne.memoizedState=_R}}function uoe(ne,_e,Ei){if(ne=_e.effects,_e.effects=null,ne!==null)for(_e=0;_e<ne.length;_e++){var wu=ne[_e],Ma=wu.callback;if(Ma!==null){if(wu.callback=null,wu=Ei,typeof Ma!="function")throw Error(i(191,Ma));Ma.call(wu)}}}var aie={},wne=mne(aie),cie=mne(aie),fie=mne(aie);function jte(ne){if(ne===aie)throw Error(i(174));return ne}function dse(ne,_e){switch(_K(fie,_e),_K(cie,ne),_K(wne,aie),ne=_e.nodeType,ne){case 9:case 11:_e=(_e=_e.documentElement)?_e.namespaceURI:ec(null,"");break;default:ne=ne===8?_e.parentNode:_e,_e=ne.namespaceURI||null,ne=ne.tagName,_e=ec(_e,ne)}_W(wne),_K(wne,_e)}function $re(){_W(wne),_W(cie),_W(fie)}function aoe(ne){jte(fie.current);var _e=jte(wne.current),Ei=ec(_e,ne.type);_e!==Ei&&(_K(cie,ne),_K(wne,Ei))}function gse(ne){cie.current===ne&&(_W(wne),_W(cie))}var _J=mne(0);function ile(ne){for(var _e=ne;_e!==null;){if(_e.tag===13){var Ei=_e.memoizedState;if(Ei!==null&&(Ei=Ei.dehydrated,Ei===null||Ei.data==="$?"||Ei.data==="$!"))return _e}else if(_e.tag===19&&_e.memoizedProps.revealOrder!==void 0){if((_e.flags&128)!==0)return _e}else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===ne)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===ne)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}return null}var pse=[];function mse(){for(var ne=0;ne<pse.length;ne++)pse[ne]._workInProgressVersionPrimary=null;pse.length=0}var lle=De.ReactCurrentDispatcher,vse=De.ReactCurrentBatchConfig,Bte=0,_X=null,iee=null,uee=null,sle=!1,hie=!1,die=0,Aue=0;function xee(){throw Error(i(321))}function wse(ne,_e){if(_e===null)return!1;for(var Ei=0;Ei<_e.length&&Ei<ne.length;Ei++)if(!Tee(ne[Ei],_e[Ei]))return!1;return!0}function yse(ne,_e,Ei,wu,Ma,za){if(Bte=za,_X=_e,_e.memoizedState=null,_e.updateQueue=null,_e.lanes=0,lle.current=ne===null||ne.memoizedState===null?Fue:Mue,ne=Ei(wu,Ma),hie){za=0;do{if(hie=!1,die=0,25<=za)throw Error(i(301));za+=1,uee=iee=null,_e.updateQueue=null,lle.current=Oue,ne=Ei(wu,Ma)}while(hie)}if(lle.current=ale,_e=iee!==null&&iee.next!==null,Bte=0,uee=iee=_X=null,sle=!1,_e)throw Error(i(300));return ne}function xse(){var ne=die!==0;return die=0,ne}function yne(){var ne={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return uee===null?_X.memoizedState=uee=ne:uee=uee.next=ne,uee}function Gee(){if(iee===null){var ne=_X.alternate;ne=ne!==null?ne.memoizedState:null}else ne=iee.next;var _e=uee===null?_X.memoizedState:uee.next;if(_e!==null)uee=_e,iee=ne;else{if(ne===null)throw Error(i(310));iee=ne,ne={memoizedState:iee.memoizedState,baseState:iee.baseState,baseQueue:iee.baseQueue,queue:iee.queue,next:null},uee===null?_X.memoizedState=uee=ne:uee=uee.next=ne}return uee}function gie(ne,_e){return typeof _e=="function"?_e(ne):_e}function Sse(ne){var _e=Gee(),Ei=_e.queue;if(Ei===null)throw Error(i(311));Ei.lastRenderedReducer=ne;var wu=iee,Ma=wu.baseQueue,za=Ei.pending;if(za!==null){if(Ma!==null){var bc=Ma.next;Ma.next=za.next,za.next=bc}wu.baseQueue=Ma=za,Ei.pending=null}if(Ma!==null){za=Ma.next,wu=wu.baseState;var yg=bc=null,f0=null,_5=za;do{var _C=_5.lane;if((Bte&_C)===_C)f0!==null&&(f0=f0.next={lane:0,action:_5.action,hasEagerState:_5.hasEagerState,eagerState:_5.eagerState,next:null}),wu=_5.hasEagerState?_5.eagerState:ne(wu,_5.action);else{var _R={lane:_C,action:_5.action,hasEagerState:_5.hasEagerState,eagerState:_5.eagerState,next:null};f0===null?(yg=f0=_R,bc=wu):f0=f0.next=_R,_X.lanes|=_C,Ute|=_C}_5=_5.next}while(_5!==null&&_5!==za);f0===null?bc=wu:f0.next=yg,Tee(wu,_e.memoizedState)||(Mee=!0),_e.memoizedState=wu,_e.baseState=bc,_e.baseQueue=f0,Ei.lastRenderedState=wu}if(ne=Ei.interleaved,ne!==null){Ma=ne;do za=Ma.lane,_X.lanes|=za,Ute|=za,Ma=Ma.next;while(Ma!==ne)}else Ma===null&&(Ei.lanes=0);return[_e.memoizedState,Ei.dispatch]}function Ese(ne){var _e=Gee(),Ei=_e.queue;if(Ei===null)throw Error(i(311));Ei.lastRenderedReducer=ne;var wu=Ei.dispatch,Ma=Ei.pending,za=_e.memoizedState;if(Ma!==null){Ei.pending=null;var bc=Ma=Ma.next;do za=ne(za,bc.action),bc=bc.next;while(bc!==Ma);Tee(za,_e.memoizedState)||(Mee=!0),_e.memoizedState=za,_e.baseQueue===null&&(_e.baseState=za),Ei.lastRenderedState=za}return[za,wu]}function coe(){}function foe(ne,_e){var Ei=_X,wu=Gee(),Ma=_e(),za=!Tee(wu.memoizedState,Ma);if(za&&(wu.memoizedState=Ma,Mee=!0),wu=wu.queue,_se(goe.bind(null,Ei,wu,ne),[ne]),wu.getSnapshot!==_e||za||uee!==null&&uee.memoizedState.tag&1){if(Ei.flags|=2048,pie(9,doe.bind(null,Ei,wu,Ma,_e),void 0,null),aee===null)throw Error(i(349));(Bte&30)!==0||hoe(Ei,_e,Ma)}return Ma}function hoe(ne,_e,Ei){ne.flags|=16384,ne={getSnapshot:_e,value:Ei},_e=_X.updateQueue,_e===null?(_e={lastEffect:null,stores:null},_X.updateQueue=_e,_e.stores=[ne]):(Ei=_e.stores,Ei===null?_e.stores=[ne]:Ei.push(ne))}function doe(ne,_e,Ei,wu){_e.value=Ei,_e.getSnapshot=wu,poe(_e)&&moe(ne)}function goe(ne,_e,Ei){return Ei(function(){poe(_e)&&moe(ne)})}function poe(ne){var _e=ne.getSnapshot;ne=ne.value;try{var Ei=_e();return!Tee(ne,Ei)}catch{return!0}}function moe(ne){var _e=Pne(ne,1);_e!==null&&lne(_e,ne,1,-1)}function voe(ne){var _e=yne();return typeof ne=="function"&&(ne=ne()),_e.memoizedState=_e.baseState=ne,ne={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gie,lastRenderedState:ne},_e.queue=ne,ne=ne.dispatch=Tue.bind(null,_X,ne),[_e.memoizedState,ne]}function pie(ne,_e,Ei,wu){return ne={tag:ne,create:_e,destroy:Ei,deps:wu,next:null},_e=_X.updateQueue,_e===null?(_e={lastEffect:null,stores:null},_X.updateQueue=_e,_e.lastEffect=ne.next=ne):(Ei=_e.lastEffect,Ei===null?_e.lastEffect=ne.next=ne:(wu=Ei.next,Ei.next=ne,ne.next=wu,_e.lastEffect=ne)),ne}function woe(){return Gee().memoizedState}function ole(ne,_e,Ei,wu){var Ma=yne();_X.flags|=ne,Ma.memoizedState=pie(1|_e,Ei,void 0,wu===void 0?null:wu)}function ule(ne,_e,Ei,wu){var Ma=Gee();wu=wu===void 0?null:wu;var za=void 0;if(iee!==null){var bc=iee.memoizedState;if(za=bc.destroy,wu!==null&&wse(wu,bc.deps)){Ma.memoizedState=pie(_e,Ei,za,wu);return}}_X.flags|=ne,Ma.memoizedState=pie(1|_e,Ei,za,wu)}function yoe(ne,_e){return ole(8390656,8,ne,_e)}function _se(ne,_e){return ule(2048,8,ne,_e)}function xoe(ne,_e){return ule(4,2,ne,_e)}function Soe(ne,_e){return ule(4,4,ne,_e)}function Eoe(ne,_e){if(typeof _e=="function")return ne=ne(),_e(ne),function(){_e(null)};if(_e!=null)return ne=ne(),_e.current=ne,function(){_e.current=null}}function _oe(ne,_e,Ei){return Ei=Ei!=null?Ei.concat([ne]):null,ule(4,4,Eoe.bind(null,_e,ne),Ei)}function $se(){}function $oe(ne,_e){var Ei=Gee();_e=_e===void 0?null:_e;var wu=Ei.memoizedState;return wu!==null&&_e!==null&&wse(_e,wu[1])?wu[0]:(Ei.memoizedState=[ne,_e],ne)}function boe(ne,_e){var Ei=Gee();_e=_e===void 0?null:_e;var wu=Ei.memoizedState;return wu!==null&&_e!==null&&wse(_e,wu[1])?wu[0]:(ne=ne(),Ei.memoizedState=[ne,_e],ne)}function Coe(ne,_e,Ei){return(Bte&21)===0?(ne.baseState&&(ne.baseState=!1,Mee=!0),ne.memoizedState=Ei):(Tee(Ei,_e)||(Ei=$ne(),_X.lanes|=Ei,Ute|=Ei,ne.baseState=!0),_e)}function Due(ne,_e){var Ei=Uj;Uj=Ei!==0&&4>Ei?Ei:4,ne(!0);var wu=vse.transition;vse.transition={};try{ne(!1),_e()}finally{Uj=Ei,vse.transition=wu}}function Aoe(){return Gee().memoizedState}function Rue(ne,_e,Ei){var wu=yte(ne);if(Ei={lane:wu,action:Ei,hasEagerState:!1,eagerState:null,next:null},Doe(ne))Roe(_e,Ei);else if(Ei=loe(ne,_e,Ei,wu),Ei!==null){var Ma=Dee();lne(Ei,ne,wu,Ma),Toe(Ei,_e,wu)}}function Tue(ne,_e,Ei){var wu=yte(ne),Ma={lane:wu,action:Ei,hasEagerState:!1,eagerState:null,next:null};if(Doe(ne))Roe(_e,Ma);else{var za=ne.alternate;if(ne.lanes===0&&(za===null||za.lanes===0)&&(za=_e.lastRenderedReducer,za!==null))try{var bc=_e.lastRenderedState,yg=za(bc,Ei);if(Ma.hasEagerState=!0,Ma.eagerState=yg,Tee(yg,bc)){var f0=_e.interleaved;f0===null?(Ma.next=Ma,fse(_e)):(Ma.next=f0.next,f0.next=Ma),_e.interleaved=Ma;return}}catch{}finally{}Ei=loe(ne,_e,Ma,wu),Ei!==null&&(Ma=Dee(),lne(Ei,ne,wu,Ma),Toe(Ei,_e,wu))}}function Doe(ne){var _e=ne.alternate;return ne===_X||_e!==null&&_e===_X}function Roe(ne,_e){hie=sle=!0;var Ei=ne.pending;Ei===null?_e.next=_e:(_e.next=Ei.next,Ei.next=_e),ne.pending=_e}function Toe(ne,_e,Ei){if((Ei&4194240)!==0){var wu=_e.lanes;wu&=ne.pendingLanes,Ei|=wu,_e.lanes=Ei,Vee(ne,Ei)}}var ale={readContext:Kee,useCallback:xee,useContext:xee,useEffect:xee,useImperativeHandle:xee,useInsertionEffect:xee,useLayoutEffect:xee,useMemo:xee,useReducer:xee,useRef:xee,useState:xee,useDebugValue:xee,useDeferredValue:xee,useTransition:xee,useMutableSource:xee,useSyncExternalStore:xee,useId:xee,unstable_isNewReconciler:!1},Fue={readContext:Kee,useCallback:function(ne,_e){return yne().memoizedState=[ne,_e===void 0?null:_e],ne},useContext:Kee,useEffect:yoe,useImperativeHandle:function(ne,_e,Ei){return Ei=Ei!=null?Ei.concat([ne]):null,ole(4194308,4,Eoe.bind(null,_e,ne),Ei)},useLayoutEffect:function(ne,_e){return ole(4194308,4,ne,_e)},useInsertionEffect:function(ne,_e){return ole(4,2,ne,_e)},useMemo:function(ne,_e){var Ei=yne();return _e=_e===void 0?null:_e,ne=ne(),Ei.memoizedState=[ne,_e],ne},useReducer:function(ne,_e,Ei){var wu=yne();return _e=Ei!==void 0?Ei(_e):_e,wu.memoizedState=wu.baseState=_e,ne={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ne,lastRenderedState:_e},wu.queue=ne,ne=ne.dispatch=Rue.bind(null,_X,ne),[wu.memoizedState,ne]},useRef:function(ne){var _e=yne();return ne={current:ne},_e.memoizedState=ne},useState:voe,useDebugValue:$se,useDeferredValue:function(ne){return yne().memoizedState=ne},useTransition:function(){var ne=voe(!1),_e=ne[0];return ne=Due.bind(null,ne[1]),yne().memoizedState=ne,[_e,ne]},useMutableSource:function(){},useSyncExternalStore:function(ne,_e,Ei){var wu=_X,Ma=yne();if(XR){if(Ei===void 0)throw Error(i(407));Ei=Ei()}else{if(Ei=_e(),aee===null)throw Error(i(349));(Bte&30)!==0||hoe(wu,_e,Ei)}Ma.memoizedState=Ei;var za={value:Ei,getSnapshot:_e};return Ma.queue=za,yoe(goe.bind(null,wu,za,ne),[ne]),wu.flags|=2048,pie(9,doe.bind(null,wu,za,Ei,_e),void 0,null),Ei},useId:function(){var ne=yne(),_e=aee.identifierPrefix;if(XR){var Ei=Cd,wu=Ld;Ei=(wu&~(1<<32-_Y(wu)-1)).toString(32)+Ei,_e=":"+_e+"R"+Ei,Ei=die++,0<Ei&&(_e+="H"+Ei.toString(32)),_e+=":"}else Ei=Aue++,_e=":"+_e+"r"+Ei.toString(32)+":";return ne.memoizedState=_e},unstable_isNewReconciler:!1},Mue={readContext:Kee,useCallback:$oe,useContext:Kee,useEffect:_se,useImperativeHandle:_oe,useInsertionEffect:xoe,useLayoutEffect:Soe,useMemo:boe,useReducer:Sse,useRef:woe,useState:function(){return Sse(gie)},useDebugValue:$se,useDeferredValue:function(ne){var _e=Gee();return Coe(_e,iee.memoizedState,ne)},useTransition:function(){var ne=Sse(gie)[0],_e=Gee().memoizedState;return[ne,_e]},useMutableSource:coe,useSyncExternalStore:foe,useId:Aoe,unstable_isNewReconciler:!1},Oue={readContext:Kee,useCallback:$oe,useContext:Kee,useEffect:_se,useImperativeHandle:_oe,useInsertionEffect:xoe,useLayoutEffect:Soe,useMemo:boe,useReducer:Ese,useRef:woe,useState:function(){return Ese(gie)},useDebugValue:$se,useDeferredValue:function(ne){var _e=Gee();return iee===null?_e.memoizedState=ne:Coe(_e,iee.memoizedState,ne)},useTransition:function(){var ne=Ese(gie)[0],_e=Gee().memoizedState;return[ne,_e]},useMutableSource:coe,useSyncExternalStore:foe,useId:Aoe,unstable_isNewReconciler:!1};function tne(ne,_e){if(ne&&ne.defaultProps){_e=Na({},_e),ne=ne.defaultProps;for(var Ei in ne)_e[Ei]===void 0&&(_e[Ei]=ne[Ei]);return _e}return _e}function bse(ne,_e,Ei,wu){_e=ne.memoizedState,Ei=Ei(wu,_e),Ei=Ei==null?_e:Na({},_e,Ei),ne.memoizedState=Ei,ne.lanes===0&&(ne.updateQueue.baseState=Ei)}var cle={isMounted:function(ne){return(ne=ne._reactInternals)?zz(ne)===ne:!1},enqueueSetState:function(ne,_e,Ei){ne=ne._reactInternals;var wu=Dee(),Ma=yte(ne),za=Lne(wu,Ma);za.payload=_e,Ei!=null&&(za.callback=Ei),_e=pte(ne,za,Ma),_e!==null&&(lne(_e,ne,Ma,wu),tle(_e,ne,Ma))},enqueueReplaceState:function(ne,_e,Ei){ne=ne._reactInternals;var wu=Dee(),Ma=yte(ne),za=Lne(wu,Ma);za.tag=1,za.payload=_e,Ei!=null&&(za.callback=Ei),_e=pte(ne,za,Ma),_e!==null&&(lne(_e,ne,Ma,wu),tle(_e,ne,Ma))},enqueueForceUpdate:function(ne,_e){ne=ne._reactInternals;var Ei=Dee(),wu=yte(ne),Ma=Lne(Ei,wu);Ma.tag=2,_e!=null&&(Ma.callback=_e),_e=pte(ne,Ma,wu),_e!==null&&(lne(_e,ne,wu,Ei),tle(_e,ne,wu))}};function Foe(ne,_e,Ei,wu,Ma,za,bc){return ne=ne.stateNode,typeof ne.shouldComponentUpdate=="function"?ne.shouldComponentUpdate(wu,za,bc):_e.prototype&&_e.prototype.isPureReactComponent?!ite(Ei,wu)||!ite(Ma,za):!0}function Moe(ne,_e,Ei){var wu=!1,Ma=vne,za=_e.contextType;return typeof za=="object"&&za!==null?za=Kee(za):(Ma=yee(_e)?Mne:oee.current,wu=_e.contextTypes,za=(wu=wu!=null)?dte(ne,Ma):vne),_e=new _e(Ei,za),ne.memoizedState=_e.state!==null&&_e.state!==void 0?_e.state:null,_e.updater=cle,ne.stateNode=_e,_e._reactInternals=ne,wu&&(ne=ne.stateNode,ne.__reactInternalMemoizedUnmaskedChildContext=Ma,ne.__reactInternalMemoizedMaskedChildContext=za),_e}function Ooe(ne,_e,Ei,wu){ne=_e.state,typeof _e.componentWillReceiveProps=="function"&&_e.componentWillReceiveProps(Ei,wu),typeof _e.UNSAFE_componentWillReceiveProps=="function"&&_e.UNSAFE_componentWillReceiveProps(Ei,wu),_e.state!==ne&&cle.enqueueReplaceState(_e,_e.state,null)}function Cse(ne,_e,Ei,wu){var Ma=ne.stateNode;Ma.props=Ei,Ma.state=ne.memoizedState,Ma.refs={},hse(ne);var za=_e.contextType;typeof za=="object"&&za!==null?Ma.context=Kee(za):(za=yee(_e)?Mne:oee.current,Ma.context=dte(ne,za)),Ma.state=ne.memoizedState,za=_e.getDerivedStateFromProps,typeof za=="function"&&(bse(ne,_e,za,Ei),Ma.state=ne.memoizedState),typeof _e.getDerivedStateFromProps=="function"||typeof Ma.getSnapshotBeforeUpdate=="function"||typeof Ma.UNSAFE_componentWillMount!="function"&&typeof Ma.componentWillMount!="function"||(_e=Ma.state,typeof Ma.componentWillMount=="function"&&Ma.componentWillMount(),typeof Ma.UNSAFE_componentWillMount=="function"&&Ma.UNSAFE_componentWillMount(),_e!==Ma.state&&cle.enqueueReplaceState(Ma,Ma.state,null),rle(ne,Ei,Ma,wu),Ma.state=ne.memoizedState),typeof Ma.componentDidMount=="function"&&(ne.flags|=4194308)}function bre(ne,_e){try{var Ei="",wu=_e;do Ei+=_h(wu),wu=wu.return;while(wu);var Ma=Ei}catch(za){Ma=`
Error generating stack: `+za.message+`
`+za.stack}return{value:ne,source:_e,stack:Ma,digest:null}}function Ase(ne,_e,Ei){return{value:ne,source:null,stack:Ei??null,digest:_e??null}}function Dse(ne,_e){try{console.error(_e.value)}catch(Ei){setTimeout(function(){throw Ei})}}var kue=typeof WeakMap=="function"?WeakMap:Map;function koe(ne,_e,Ei){Ei=Lne(-1,Ei),Ei.tag=3,Ei.payload={element:null};var wu=_e.value;return Ei.callback=function(){vle||(vle=!0,Kse=wu),Dse(ne,_e)},Ei}function Ioe(ne,_e,Ei){Ei=Lne(-1,Ei),Ei.tag=3;var wu=ne.type.getDerivedStateFromError;if(typeof wu=="function"){var Ma=_e.value;Ei.payload=function(){return wu(Ma)},Ei.callback=function(){Dse(ne,_e)}}var za=ne.stateNode;return za!==null&&typeof za.componentDidCatch=="function"&&(Ei.callback=function(){Dse(ne,_e),typeof wu!="function"&&(vte===null?vte=new Set([this]):vte.add(this));var bc=_e.stack;this.componentDidCatch(_e.value,{componentStack:bc!==null?bc:""})}),Ei}function Noe(ne,_e,Ei){var wu=ne.pingCache;if(wu===null){wu=ne.pingCache=new kue;var Ma=new Set;wu.set(_e,Ma)}else Ma=wu.get(_e),Ma===void 0&&(Ma=new Set,wu.set(_e,Ma));Ma.has(Ei)||(Ma.add(Ei),ne=Vue.bind(null,ne,_e,Ei),_e.then(ne,ne))}function Poe(ne){do{var _e;if((_e=ne.tag===13)&&(_e=ne.memoizedState,_e=_e!==null?_e.dehydrated!==null:!0),_e)return ne;ne=ne.return}while(ne!==null);return null}function Loe(ne,_e,Ei,wu,Ma){return(ne.mode&1)===0?(ne===_e?ne.flags|=65536:(ne.flags|=128,Ei.flags|=131072,Ei.flags&=-52805,Ei.tag===1&&(Ei.alternate===null?Ei.tag=17:(_e=Lne(-1,1),_e.tag=2,pte(Ei,_e,1))),Ei.lanes|=1),ne):(ne.flags|=65536,ne.lanes=Ma,ne)}var Iue=De.ReactCurrentOwner,Mee=!1;function Aee(ne,_e,Ei,wu){_e.child=ne===null?uie(_e,null,Ei,wu):Fee(_e,ne.child,Ei,wu)}function zoe(ne,_e,Ei,wu,Ma){Ei=Ei.render;var za=_e.ref;return _re(_e,Ma),wu=yse(ne,_e,Ei,wu,za,Ma),Ei=xse(),ne!==null&&!Mee?(_e.updateQueue=ne.updateQueue,_e.flags&=-2053,ne.lanes&=~Ma,zne(ne,_e,Ma)):(XR&&Ei&&_6(_e),_e.flags|=1,Aee(ne,_e,wu,Ma),_e.child)}function joe(ne,_e,Ei,wu,Ma){if(ne===null){var za=Ei.type;return typeof za=="function"&&!Xse(za)&&za.defaultProps===void 0&&Ei.compare===null&&Ei.defaultProps===void 0?(_e.tag=15,_e.type=za,Boe(ne,_e,za,wu,Ma)):(ne=_le(Ei.type,null,wu,_e,_e.mode,Ma),ne.ref=_e.ref,ne.return=_e,_e.child=ne)}if(za=ne.child,(ne.lanes&Ma)===0){var bc=za.memoizedProps;if(Ei=Ei.compare,Ei=Ei!==null?Ei:ite,Ei(bc,wu)&&ne.ref===_e.ref)return zne(ne,_e,Ma)}return _e.flags|=1,ne=Ste(za,wu),ne.ref=_e.ref,ne.return=_e,_e.child=ne}function Boe(ne,_e,Ei,wu,Ma){if(ne!==null){var za=ne.memoizedProps;if(ite(za,wu)&&ne.ref===_e.ref)if(Mee=!1,_e.pendingProps=wu=za,(ne.lanes&Ma)!==0)(ne.flags&131072)!==0&&(Mee=!0);else return _e.lanes=ne.lanes,zne(ne,_e,Ma)}return Rse(ne,_e,Ei,wu,Ma)}function Uoe(ne,_e,Ei){var wu=_e.pendingProps,Ma=wu.children,za=ne!==null?ne.memoizedState:null;if(wu.mode==="hidden")if((_e.mode&1)===0)_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_K(Are,Pee),Pee|=Ei;else{if((Ei&1073741824)===0)return ne=za!==null?za.baseLanes|Ei:Ei,_e.lanes=_e.childLanes=1073741824,_e.memoizedState={baseLanes:ne,cachePool:null,transitions:null},_e.updateQueue=null,_K(Are,Pee),Pee|=ne,null;_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wu=za!==null?za.baseLanes:Ei,_K(Are,Pee),Pee|=wu}else za!==null?(wu=za.baseLanes|Ei,_e.memoizedState=null):wu=Ei,_K(Are,Pee),Pee|=wu;return Aee(ne,_e,Ma,Ei),_e.child}function Koe(ne,_e){var Ei=_e.ref;(ne===null&&Ei!==null||ne!==null&&ne.ref!==Ei)&&(_e.flags|=512,_e.flags|=2097152)}function Rse(ne,_e,Ei,wu,Ma){var za=yee(Ei)?Mne:oee.current;return za=dte(_e,za),_re(_e,Ma),Ei=yse(ne,_e,Ei,wu,za,Ma),wu=xse(),ne!==null&&!Mee?(_e.updateQueue=ne.updateQueue,_e.flags&=-2053,ne.lanes&=~Ma,zne(ne,_e,Ma)):(XR&&wu&&_6(_e),_e.flags|=1,Aee(ne,_e,Ei,Ma),_e.child)}function Goe(ne,_e,Ei,wu,Ma){if(yee(Ei)){var za=!0;yre(_e)}else za=!1;if(_re(_e,Ma),_e.stateNode===null)hle(ne,_e),Moe(_e,Ei,wu),Cse(_e,Ei,wu,Ma),wu=!0;else if(ne===null){var bc=_e.stateNode,yg=_e.memoizedProps;bc.props=yg;var f0=bc.context,_5=Ei.contextType;typeof _5=="object"&&_5!==null?_5=Kee(_5):(_5=yee(Ei)?Mne:oee.current,_5=dte(_e,_5));var _C=Ei.getDerivedStateFromProps,_R=typeof _C=="function"||typeof bc.getSnapshotBeforeUpdate=="function";_R||typeof bc.UNSAFE_componentWillReceiveProps!="function"&&typeof bc.componentWillReceiveProps!="function"||(yg!==wu||f0!==_5)&&Ooe(_e,bc,wu,_5),gte=!1;var _3=_e.memoizedState;bc.state=_3,rle(_e,wu,bc,Ma),f0=_e.memoizedState,yg!==wu||_3!==f0||wee.current||gte?(typeof _C=="function"&&(bse(_e,Ei,_C,wu),f0=_e.memoizedState),(yg=gte||Foe(_e,Ei,yg,wu,_3,f0,_5))?(_R||typeof bc.UNSAFE_componentWillMount!="function"&&typeof bc.componentWillMount!="function"||(typeof bc.componentWillMount=="function"&&bc.componentWillMount(),typeof bc.UNSAFE_componentWillMount=="function"&&bc.UNSAFE_componentWillMount()),typeof bc.componentDidMount=="function"&&(_e.flags|=4194308)):(typeof bc.componentDidMount=="function"&&(_e.flags|=4194308),_e.memoizedProps=wu,_e.memoizedState=f0),bc.props=wu,bc.state=f0,bc.context=_5,wu=yg):(typeof bc.componentDidMount=="function"&&(_e.flags|=4194308),wu=!1)}else{bc=_e.stateNode,soe(ne,_e),yg=_e.memoizedProps,_5=_e.type===_e.elementType?yg:tne(_e.type,yg),bc.props=_5,_R=_e.pendingProps,_3=bc.context,f0=Ei.contextType,typeof f0=="object"&&f0!==null?f0=Kee(f0):(f0=yee(Ei)?Mne:oee.current,f0=dte(_e,f0));var _I=Ei.getDerivedStateFromProps;(_C=typeof _I=="function"||typeof bc.getSnapshotBeforeUpdate=="function")||typeof bc.UNSAFE_componentWillReceiveProps!="function"&&typeof bc.componentWillReceiveProps!="function"||(yg!==_R||_3!==f0)&&Ooe(_e,bc,wu,f0),gte=!1,_3=_e.memoizedState,bc.state=_3,rle(_e,wu,bc,Ma);var _N=_e.memoizedState;yg!==_R||_3!==_N||wee.current||gte?(typeof _I=="function"&&(bse(_e,Ei,_I,wu),_N=_e.memoizedState),(_5=gte||Foe(_e,Ei,_5,wu,_3,_N,f0)||!1)?(_C||typeof bc.UNSAFE_componentWillUpdate!="function"&&typeof bc.componentWillUpdate!="function"||(typeof bc.componentWillUpdate=="function"&&bc.componentWillUpdate(wu,_N,f0),typeof bc.UNSAFE_componentWillUpdate=="function"&&bc.UNSAFE_componentWillUpdate(wu,_N,f0)),typeof bc.componentDidUpdate=="function"&&(_e.flags|=4),typeof bc.getSnapshotBeforeUpdate=="function"&&(_e.flags|=1024)):(typeof bc.componentDidUpdate!="function"||yg===ne.memoizedProps&&_3===ne.memoizedState||(_e.flags|=4),typeof bc.getSnapshotBeforeUpdate!="function"||yg===ne.memoizedProps&&_3===ne.memoizedState||(_e.flags|=1024),_e.memoizedProps=wu,_e.memoizedState=_N),bc.props=wu,bc.state=_N,bc.context=f0,wu=_5):(typeof bc.componentDidUpdate!="function"||yg===ne.memoizedProps&&_3===ne.memoizedState||(_e.flags|=4),typeof bc.getSnapshotBeforeUpdate!="function"||yg===ne.memoizedProps&&_3===ne.memoizedState||(_e.flags|=1024),wu=!1)}return Tse(ne,_e,Ei,wu,za,Ma)}function Tse(ne,_e,Ei,wu,Ma,za){Koe(ne,_e);var bc=(_e.flags&128)!==0;if(!wu&&!bc)return Ma&&sie(_e,Ei,!1),zne(ne,_e,za);wu=_e.stateNode,Iue.current=_e;var yg=bc&&typeof Ei.getDerivedStateFromError!="function"?null:wu.render();return _e.flags|=1,ne!==null&&bc?(_e.child=Fee(_e,ne.child,null,za),_e.child=Fee(_e,null,yg,za)):Aee(ne,_e,yg,za),_e.memoizedState=wu.state,Ma&&sie(_e,Ei,!0),_e.child}function Woe(ne){var _e=ne.stateNode;_e.pendingContext?Zie(ne,_e.pendingContext,_e.pendingContext!==_e.context):_e.context&&Zie(ne,_e.context,!1),dse(ne,_e.containerInfo)}function Hoe(ne,_e,Ei,wu,Ma){return Pz(),_Q(Ma),_e.flags|=256,Aee(ne,_e,Ei,wu),_e.child}var Fse={dehydrated:null,treeContext:null,retryLane:0};function Mse(ne){return{baseLanes:ne,cachePool:null,transitions:null}}function qoe(ne,_e,Ei){var wu=_e.pendingProps,Ma=_J.current,za=!1,bc=(_e.flags&128)!==0,yg;if((yg=bc)||(yg=ne!==null&&ne.memoizedState===null?!1:(Ma&2)!==0),yg?(za=!0,_e.flags&=-129):(ne===null||ne.memoizedState!==null)&&(Ma|=1),_K(_J,Ma&1),ne===null)return Mz(_e),ne=_e.memoizedState,ne!==null&&(ne=ne.dehydrated,ne!==null)?((_e.mode&1)===0?_e.lanes=1:ne.data==="$!"?_e.lanes=8:_e.lanes=1073741824,null):(bc=wu.children,ne=wu.fallback,za?(wu=_e.mode,za=_e.child,bc={mode:"hidden",children:bc},(wu&1)===0&&za!==null?(za.childLanes=0,za.pendingProps=bc):za=$le(bc,wu,0,null),ne=Hte(ne,wu,Ei,null),za.return=_e,ne.return=_e,za.sibling=ne,_e.child=za,_e.child.memoizedState=Mse(Ei),_e.memoizedState=Fse,ne):Ose(_e,bc));if(Ma=ne.memoizedState,Ma!==null&&(yg=Ma.dehydrated,yg!==null))return Nue(ne,_e,bc,wu,yg,Ma,Ei);if(za){za=wu.fallback,bc=_e.mode,Ma=ne.child,yg=Ma.sibling;var f0={mode:"hidden",children:wu.children};return(bc&1)===0&&_e.child!==Ma?(wu=_e.child,wu.childLanes=0,wu.pendingProps=f0,_e.deletions=null):(wu=Ste(Ma,f0),wu.subtreeFlags=Ma.subtreeFlags&14680064),yg!==null?za=Ste(yg,za):(za=Hte(za,bc,Ei,null),za.flags|=2),za.return=_e,wu.return=_e,wu.sibling=za,_e.child=wu,wu=za,za=_e.child,bc=ne.child.memoizedState,bc=bc===null?Mse(Ei):{baseLanes:bc.baseLanes|Ei,cachePool:null,transitions:bc.transitions},za.memoizedState=bc,za.childLanes=ne.childLanes&~Ei,_e.memoizedState=Fse,wu}return za=ne.child,ne=za.sibling,wu=Ste(za,{mode:"visible",children:wu.children}),(_e.mode&1)===0&&(wu.lanes=Ei),wu.return=_e,wu.sibling=null,ne!==null&&(Ei=_e.deletions,Ei===null?(_e.deletions=[ne],_e.flags|=16):Ei.push(ne)),_e.child=wu,_e.memoizedState=null,wu}function Ose(ne,_e){return _e=$le({mode:"visible",children:_e},ne.mode,0,null),_e.return=ne,ne.child=_e}function fle(ne,_e,Ei,wu){return wu!==null&&_Q(wu),Fee(_e,ne.child,null,Ei),ne=Ose(_e,_e.pendingProps.children),ne.flags|=2,_e.memoizedState=null,ne}function Nue(ne,_e,Ei,wu,Ma,za,bc){if(Ei)return _e.flags&256?(_e.flags&=-257,wu=Ase(Error(i(422))),fle(ne,_e,bc,wu)):_e.memoizedState!==null?(_e.child=ne.child,_e.flags|=128,null):(za=wu.fallback,Ma=_e.mode,wu=$le({mode:"visible",children:wu.children},Ma,0,null),za=Hte(za,Ma,bc,null),za.flags|=2,wu.return=_e,za.return=_e,wu.sibling=za,_e.child=wu,(_e.mode&1)!==0&&Fee(_e,ne.child,null,bc),_e.child.memoizedState=Mse(bc),_e.memoizedState=Fse,za);if((_e.mode&1)===0)return fle(ne,_e,bc,null);if(Ma.data==="$!"){if(wu=Ma.nextSibling&&Ma.nextSibling.dataset,wu)var yg=wu.dgst;return wu=yg,za=Error(i(419)),wu=Ase(za,wu,void 0),fle(ne,_e,bc,wu)}if(yg=(bc&ne.childLanes)!==0,Mee||yg){if(wu=aee,wu!==null){switch(bc&-bc){case 4:Ma=2;break;case 16:Ma=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ma=32;break;case 536870912:Ma=268435456;break;default:Ma=0}Ma=(Ma&(wu.suspendedLanes|bc))!==0?0:Ma,Ma!==0&&Ma!==za.retryLane&&(za.retryLane=Ma,Pne(ne,Ma),lne(wu,ne,Ma,-1))}return Jse(),wu=Ase(Error(i(421))),fle(ne,_e,bc,wu)}return Ma.data==="$?"?(_e.flags|=128,_e.child=ne.child,_e=Jue.bind(null,ne),Ma._reactRetry=_e,null):(ne=za.treeContext,Dz=see(Ma.nextSibling),_v=_e,XR=!0,Vb=null,ne!==null&&(ja[xa++]=Ld,ja[xa++]=Cd,ja[xa++]=af,Ld=ne.id,Cd=ne.overflow,af=_e),_e=Ose(_e,wu.children),_e.flags|=4096,_e)}function Voe(ne,_e,Ei){ne.lanes|=_e;var wu=ne.alternate;wu!==null&&(wu.lanes|=_e),cse(ne.return,_e,Ei)}function kse(ne,_e,Ei,wu,Ma){var za=ne.memoizedState;za===null?ne.memoizedState={isBackwards:_e,rendering:null,renderingStartTime:0,last:wu,tail:Ei,tailMode:Ma}:(za.isBackwards=_e,za.rendering=null,za.renderingStartTime=0,za.last=wu,za.tail=Ei,za.tailMode=Ma)}function Joe(ne,_e,Ei){var wu=_e.pendingProps,Ma=wu.revealOrder,za=wu.tail;if(Aee(ne,_e,wu.children,Ei),wu=_J.current,(wu&2)!==0)wu=wu&1|2,_e.flags|=128;else{if(ne!==null&&(ne.flags&128)!==0)e:for(ne=_e.child;ne!==null;){if(ne.tag===13)ne.memoizedState!==null&&Voe(ne,Ei,_e);else if(ne.tag===19)Voe(ne,Ei,_e);else if(ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===_e)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===_e)break e;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}wu&=1}if(_K(_J,wu),(_e.mode&1)===0)_e.memoizedState=null;else switch(Ma){case"forwards":for(Ei=_e.child,Ma=null;Ei!==null;)ne=Ei.alternate,ne!==null&&ile(ne)===null&&(Ma=Ei),Ei=Ei.sibling;Ei=Ma,Ei===null?(Ma=_e.child,_e.child=null):(Ma=Ei.sibling,Ei.sibling=null),kse(_e,!1,Ma,Ei,za);break;case"backwards":for(Ei=null,Ma=_e.child,_e.child=null;Ma!==null;){if(ne=Ma.alternate,ne!==null&&ile(ne)===null){_e.child=Ma;break}ne=Ma.sibling,Ma.sibling=Ei,Ei=Ma,Ma=ne}kse(_e,!0,Ei,null,za);break;case"together":kse(_e,!1,null,null,void 0);break;default:_e.memoizedState=null}return _e.child}function hle(ne,_e){(_e.mode&1)===0&&ne!==null&&(ne.alternate=null,_e.alternate=null,_e.flags|=2)}function zne(ne,_e,Ei){if(ne!==null&&(_e.dependencies=ne.dependencies),Ute|=_e.lanes,(Ei&_e.childLanes)===0)return null;if(ne!==null&&_e.child!==ne.child)throw Error(i(153));if(_e.child!==null){for(ne=_e.child,Ei=Ste(ne,ne.pendingProps),_e.child=Ei,Ei.return=_e;ne.sibling!==null;)ne=ne.sibling,Ei=Ei.sibling=Ste(ne,ne.pendingProps),Ei.return=_e;Ei.sibling=null}return _e.child}function Pue(ne,_e,Ei){switch(_e.tag){case 3:Woe(_e),Pz();break;case 5:aoe(_e);break;case 1:yee(_e.type)&&yre(_e);break;case 4:dse(_e,_e.stateNode.containerInfo);break;case 10:var wu=_e.type._context,Ma=_e.memoizedProps.value;_K(Ine,wu._currentValue),wu._currentValue=Ma;break;case 13:if(wu=_e.memoizedState,wu!==null)return wu.dehydrated!==null?(_K(_J,_J.current&1),_e.flags|=128,null):(Ei&_e.child.childLanes)!==0?qoe(ne,_e,Ei):(_K(_J,_J.current&1),ne=zne(ne,_e,Ei),ne!==null?ne.sibling:null);_K(_J,_J.current&1);break;case 19:if(wu=(Ei&_e.childLanes)!==0,(ne.flags&128)!==0){if(wu)return Joe(ne,_e,Ei);_e.flags|=128}if(Ma=_e.memoizedState,Ma!==null&&(Ma.rendering=null,Ma.tail=null,Ma.lastEffect=null),_K(_J,_J.current),wu)break;return null;case 22:case 23:return _e.lanes=0,Uoe(ne,_e,Ei)}return zne(ne,_e,Ei)}var Xoe,Ise,Yoe,Qoe;Xoe=function(ne,_e){for(var Ei=_e.child;Ei!==null;){if(Ei.tag===5||Ei.tag===6)ne.appendChild(Ei.stateNode);else if(Ei.tag!==4&&Ei.child!==null){Ei.child.return=Ei,Ei=Ei.child;continue}if(Ei===_e)break;for(;Ei.sibling===null;){if(Ei.return===null||Ei.return===_e)return;Ei=Ei.return}Ei.sibling.return=Ei.return,Ei=Ei.sibling}},Ise=function(){},Yoe=function(ne,_e,Ei,wu){var Ma=ne.memoizedProps;if(Ma!==wu){ne=_e.stateNode,jte(wne.current);var za=null;switch(Ei){case"input":Ma=fc(ne,Ma),wu=fc(ne,wu),za=[];break;case"select":Ma=Na({},Ma,{value:void 0}),wu=Na({},wu,{value:void 0}),za=[];break;case"textarea":Ma=cb(ne,Ma),wu=cb(ne,wu),za=[];break;default:typeof Ma.onClick!="function"&&typeof wu.onClick=="function"&&(ne.onclick=vre)}b0(Ei,wu);var bc;Ei=null;for(_5 in Ma)if(!wu.hasOwnProperty(_5)&&Ma.hasOwnProperty(_5)&&Ma[_5]!=null)if(_5==="style"){var yg=Ma[_5];for(bc in yg)yg.hasOwnProperty(bc)&&(Ei||(Ei={}),Ei[bc]="")}else _5!=="dangerouslySetInnerHTML"&&_5!=="children"&&_5!=="suppressContentEditableWarning"&&_5!=="suppressHydrationWarning"&&_5!=="autoFocus"&&(o.hasOwnProperty(_5)?za||(za=[]):(za=za||[]).push(_5,null));for(_5 in wu){var f0=wu[_5];if(yg=Ma!=null?Ma[_5]:void 0,wu.hasOwnProperty(_5)&&f0!==yg&&(f0!=null||yg!=null))if(_5==="style")if(yg){for(bc in yg)!yg.hasOwnProperty(bc)||f0&&f0.hasOwnProperty(bc)||(Ei||(Ei={}),Ei[bc]="");for(bc in f0)f0.hasOwnProperty(bc)&&yg[bc]!==f0[bc]&&(Ei||(Ei={}),Ei[bc]=f0[bc])}else Ei||(za||(za=[]),za.push(_5,Ei)),Ei=f0;else _5==="dangerouslySetInnerHTML"?(f0=f0?f0.__html:void 0,yg=yg?yg.__html:void 0,f0!=null&&yg!==f0&&(za=za||[]).push(_5,f0)):_5==="children"?typeof f0!="string"&&typeof f0!="number"||(za=za||[]).push(_5,""+f0):_5!=="suppressContentEditableWarning"&&_5!=="suppressHydrationWarning"&&(o.hasOwnProperty(_5)?(f0!=null&&_5==="onScroll"&&_U("scroll",ne),za||yg===f0||(za=[])):(za=za||[]).push(_5,f0))}Ei&&(za=za||[]).push("style",Ei);var _5=za;(_e.updateQueue=_5)&&(_e.flags|=4)}},Qoe=function(ne,_e,Ei,wu){Ei!==wu&&(_e.flags|=4)};function mie(ne,_e){if(!XR)switch(ne.tailMode){case"hidden":_e=ne.tail;for(var Ei=null;_e!==null;)_e.alternate!==null&&(Ei=_e),_e=_e.sibling;Ei===null?ne.tail=null:Ei.sibling=null;break;case"collapsed":Ei=ne.tail;for(var wu=null;Ei!==null;)Ei.alternate!==null&&(wu=Ei),Ei=Ei.sibling;wu===null?_e||ne.tail===null?ne.tail=null:ne.tail.sibling=null:wu.sibling=null}}function See(ne){var _e=ne.alternate!==null&&ne.alternate.child===ne.child,Ei=0,wu=0;if(_e)for(var Ma=ne.child;Ma!==null;)Ei|=Ma.lanes|Ma.childLanes,wu|=Ma.subtreeFlags&14680064,wu|=Ma.flags&14680064,Ma.return=ne,Ma=Ma.sibling;else for(Ma=ne.child;Ma!==null;)Ei|=Ma.lanes|Ma.childLanes,wu|=Ma.subtreeFlags,wu|=Ma.flags,Ma.return=ne,Ma=Ma.sibling;return ne.subtreeFlags|=wu,ne.childLanes=Ei,_e}function Lue(ne,_e,Ei){var wu=_e.pendingProps;switch(d0(_e),_e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return See(_e),null;case 1:return yee(_e.type)&&wre(),See(_e),null;case 3:return wu=_e.stateNode,$re(),_W(wee),_W(oee),mse(),wu.pendingContext&&(wu.context=wu.pendingContext,wu.pendingContext=null),(ne===null||ne.child===null)&&(Oz(_e)?_e.flags|=4:ne===null||ne.memoizedState.isDehydrated&&(_e.flags&256)===0||(_e.flags|=1024,Vb!==null&&(Hse(Vb),Vb=null))),Ise(ne,_e),See(_e),null;case 5:gse(_e);var Ma=jte(fie.current);if(Ei=_e.type,ne!==null&&_e.stateNode!=null)Yoe(ne,_e,Ei,wu,Ma),ne.ref!==_e.ref&&(_e.flags|=512,_e.flags|=2097152);else{if(!wu){if(_e.stateNode===null)throw Error(i(166));return See(_e),null}if(ne=jte(wne.current),Oz(_e)){wu=_e.stateNode,Ei=_e.type;var za=_e.memoizedProps;switch(wu[Nee]=_e,wu[Nte]=za,ne=(_e.mode&1)!==0,Ei){case"dialog":_U("cancel",wu),_U("close",wu);break;case"iframe":case"object":case"embed":_U("load",wu);break;case"video":case"audio":for(Ma=0;Ma<kte.length;Ma++)_U(kte[Ma],wu);break;case"source":_U("error",wu);break;case"img":case"image":case"link":_U("error",wu),_U("load",wu);break;case"details":_U("toggle",wu);break;case"input":nd(wu,za),_U("invalid",wu);break;case"select":wu._wrapperState={wasMultiple:!!za.multiple},_U("invalid",wu);break;case"textarea":ib(wu,za),_U("invalid",wu)}b0(Ei,za),Ma=null;for(var bc in za)if(za.hasOwnProperty(bc)){var yg=za[bc];bc==="children"?typeof yg=="string"?wu.textContent!==yg&&(za.suppressHydrationWarning!==!0&&mre(wu.textContent,yg,ne),Ma=["children",yg]):typeof yg=="number"&&wu.textContent!==""+yg&&(za.suppressHydrationWarning!==!0&&mre(wu.textContent,yg,ne),Ma=["children",""+yg]):o.hasOwnProperty(bc)&&yg!=null&&bc==="onScroll"&&_U("scroll",wu)}switch(Ei){case"input":wg(wu),_$(wu,za,!0);break;case"textarea":wg(wu),Nb(wu);break;case"select":case"option":break;default:typeof za.onClick=="function"&&(wu.onclick=vre)}wu=Ma,_e.updateQueue=wu,wu!==null&&(_e.flags|=4)}else{bc=Ma.nodeType===9?Ma:Ma.ownerDocument,ne==="http://www.w3.org/1999/xhtml"&&(ne=_D(Ei)),ne==="http://www.w3.org/1999/xhtml"?Ei==="script"?(ne=bc.createElement("div"),ne.innerHTML="<script><\/script>",ne=ne.removeChild(ne.firstChild)):typeof wu.is=="string"?ne=bc.createElement(Ei,{is:wu.is}):(ne=bc.createElement(Ei),Ei==="select"&&(bc=ne,wu.multiple?bc.multiple=!0:wu.size&&(bc.size=wu.size))):ne=bc.createElementNS(ne,Ei),ne[Nee]=_e,ne[Nte]=wu,Xoe(ne,_e,!1,!1),_e.stateNode=ne;e:{switch(bc=nb(Ei,wu),Ei){case"dialog":_U("cancel",ne),_U("close",ne),Ma=wu;break;case"iframe":case"object":case"embed":_U("load",ne),Ma=wu;break;case"video":case"audio":for(Ma=0;Ma<kte.length;Ma++)_U(kte[Ma],ne);Ma=wu;break;case"source":_U("error",ne),Ma=wu;break;case"img":case"image":case"link":_U("error",ne),_U("load",ne),Ma=wu;break;case"details":_U("toggle",ne),Ma=wu;break;case"input":nd(ne,wu),Ma=fc(ne,wu),_U("invalid",ne);break;case"option":Ma=wu;break;case"select":ne._wrapperState={wasMultiple:!!wu.multiple},Ma=Na({},wu,{value:void 0}),_U("invalid",ne);break;case"textarea":ib(ne,wu),Ma=cb(ne,wu),_U("invalid",ne);break;default:Ma=wu}b0(Ei,Ma),yg=Ma;for(za in yg)if(yg.hasOwnProperty(za)){var f0=yg[za];za==="style"?rc(ne,f0):za==="dangerouslySetInnerHTML"?(f0=f0?f0.__html:void 0,f0!=null&&ih(ne,f0)):za==="children"?typeof f0=="string"?(Ei!=="textarea"||f0!=="")&&Bd(ne,f0):typeof f0=="number"&&Bd(ne,""+f0):za!=="suppressContentEditableWarning"&&za!=="suppressHydrationWarning"&&za!=="autoFocus"&&(o.hasOwnProperty(za)?f0!=null&&za==="onScroll"&&_U("scroll",ne):f0!=null&&$e(ne,za,f0,bc))}switch(Ei){case"input":wg(ne),_$(ne,wu,!1);break;case"textarea":wg(ne),Nb(ne);break;case"option":wu.value!=null&&ne.setAttribute("value",""+ud(wu.value));break;case"select":ne.multiple=!!wu.multiple,za=wu.value,za!=null?_b(ne,!!wu.multiple,za,!1):wu.defaultValue!=null&&_b(ne,!!wu.multiple,wu.defaultValue,!0);break;default:typeof Ma.onClick=="function"&&(ne.onclick=vre)}switch(Ei){case"button":case"input":case"select":case"textarea":wu=!!wu.autoFocus;break e;case"img":wu=!0;break e;default:wu=!1}}wu&&(_e.flags|=4)}_e.ref!==null&&(_e.flags|=512,_e.flags|=2097152)}return See(_e),null;case 6:if(ne&&_e.stateNode!=null)Qoe(ne,_e,ne.memoizedProps,wu);else{if(typeof wu!="string"&&_e.stateNode===null)throw Error(i(166));if(Ei=jte(fie.current),jte(wne.current),Oz(_e)){if(wu=_e.stateNode,Ei=_e.memoizedProps,wu[Nee]=_e,(za=wu.nodeValue!==Ei)&&(ne=_v,ne!==null))switch(ne.tag){case 3:mre(wu.nodeValue,Ei,(ne.mode&1)!==0);break;case 5:ne.memoizedProps.suppressHydrationWarning!==!0&&mre(wu.nodeValue,Ei,(ne.mode&1)!==0)}za&&(_e.flags|=4)}else wu=(Ei.nodeType===9?Ei:Ei.ownerDocument).createTextNode(wu),wu[Nee]=_e,_e.stateNode=wu}return See(_e),null;case 13:if(_W(_J),wu=_e.memoizedState,ne===null||ne.memoizedState!==null&&ne.memoizedState.dehydrated!==null){if(XR&&Dz!==null&&(_e.mode&1)!==0&&(_e.flags&128)===0)_4(),Pz(),_e.flags|=98560,za=!1;else if(za=Oz(_e),wu!==null&&wu.dehydrated!==null){if(ne===null){if(!za)throw Error(i(318));if(za=_e.memoizedState,za=za!==null?za.dehydrated:null,!za)throw Error(i(317));za[Nee]=_e}else Pz(),(_e.flags&128)===0&&(_e.memoizedState=null),_e.flags|=4;See(_e),za=!1}else Vb!==null&&(Hse(Vb),Vb=null),za=!0;if(!za)return _e.flags&65536?_e:null}return(_e.flags&128)!==0?(_e.lanes=Ei,_e):(wu=wu!==null,wu!==(ne!==null&&ne.memoizedState!==null)&&wu&&(_e.child.flags|=8192,(_e.mode&1)!==0&&(ne===null||(_J.current&1)!==0?lee===0&&(lee=3):Jse())),_e.updateQueue!==null&&(_e.flags|=4),See(_e),null);case 4:return $re(),Ise(ne,_e),ne===null&&ste(_e.stateNode.containerInfo),See(_e),null;case 10:return ase(_e.type._context),See(_e),null;case 17:return yee(_e.type)&&wre(),See(_e),null;case 19:if(_W(_J),za=_e.memoizedState,za===null)return See(_e),null;if(wu=(_e.flags&128)!==0,bc=za.rendering,bc===null)if(wu)mie(za,!1);else{if(lee!==0||ne!==null&&(ne.flags&128)!==0)for(ne=_e.child;ne!==null;){if(bc=ile(ne),bc!==null){for(_e.flags|=128,mie(za,!1),wu=bc.updateQueue,wu!==null&&(_e.updateQueue=wu,_e.flags|=4),_e.subtreeFlags=0,wu=Ei,Ei=_e.child;Ei!==null;)za=Ei,ne=wu,za.flags&=14680066,bc=za.alternate,bc===null?(za.childLanes=0,za.lanes=ne,za.child=null,za.subtreeFlags=0,za.memoizedProps=null,za.memoizedState=null,za.updateQueue=null,za.dependencies=null,za.stateNode=null):(za.childLanes=bc.childLanes,za.lanes=bc.lanes,za.child=bc.child,za.subtreeFlags=0,za.deletions=null,za.memoizedProps=bc.memoizedProps,za.memoizedState=bc.memoizedState,za.updateQueue=bc.updateQueue,za.type=bc.type,ne=bc.dependencies,za.dependencies=ne===null?null:{lanes:ne.lanes,firstContext:ne.firstContext}),Ei=Ei.sibling;return _K(_J,_J.current&1|2),_e.child}ne=ne.sibling}za.tail!==null&&_B()>Dre&&(_e.flags|=128,wu=!0,mie(za,!1),_e.lanes=4194304)}else{if(!wu)if(ne=ile(bc),ne!==null){if(_e.flags|=128,wu=!0,Ei=ne.updateQueue,Ei!==null&&(_e.updateQueue=Ei,_e.flags|=4),mie(za,!0),za.tail===null&&za.tailMode==="hidden"&&!bc.alternate&&!XR)return See(_e),null}else 2*_B()-za.renderingStartTime>Dre&&Ei!==1073741824&&(_e.flags|=128,wu=!0,mie(za,!1),_e.lanes=4194304);za.isBackwards?(bc.sibling=_e.child,_e.child=bc):(Ei=za.last,Ei!==null?Ei.sibling=bc:_e.child=bc,za.last=bc)}return za.tail!==null?(_e=za.tail,za.rendering=_e,za.tail=_e.sibling,za.renderingStartTime=_B(),_e.sibling=null,Ei=_J.current,_K(_J,wu?Ei&1|2:Ei&1),_e):(See(_e),null);case 22:case 23:return Vse(),wu=_e.memoizedState!==null,ne!==null&&ne.memoizedState!==null!==wu&&(_e.flags|=8192),wu&&(_e.mode&1)!==0?(Pee&1073741824)!==0&&(See(_e),_e.subtreeFlags&6&&(_e.flags|=8192)):See(_e),null;case 24:return null;case 25:return null}throw Error(i(156,_e.tag))}function zue(ne,_e){switch(d0(_e),_e.tag){case 1:return yee(_e.type)&&wre(),ne=_e.flags,ne&65536?(_e.flags=ne&-65537|128,_e):null;case 3:return $re(),_W(wee),_W(oee),mse(),ne=_e.flags,(ne&65536)!==0&&(ne&128)===0?(_e.flags=ne&-65537|128,_e):null;case 5:return gse(_e),null;case 13:if(_W(_J),ne=_e.memoizedState,ne!==null&&ne.dehydrated!==null){if(_e.alternate===null)throw Error(i(340));Pz()}return ne=_e.flags,ne&65536?(_e.flags=ne&-65537|128,_e):null;case 19:return _W(_J),null;case 4:return $re(),null;case 10:return ase(_e.type._context),null;case 22:case 23:return Vse(),null;case 24:return null;default:return null}}var dle=!1,Eee=!1,jue=typeof WeakSet=="function"?WeakSet:Set,_8=null;function Cre(ne,_e){var Ei=ne.ref;if(Ei!==null)if(typeof Ei=="function")try{Ei(null)}catch(wu){_Z(ne,_e,wu)}else Ei.current=null}function Nse(ne,_e,Ei){try{Ei()}catch(wu){_Z(ne,_e,wu)}}var Zoe=!1;function Bue(ne,_e){if(Zre=Jte,ne=Mte(),Iee(ne)){if("selectionStart"in ne)var Ei={start:ne.selectionStart,end:ne.selectionEnd};else e:{Ei=(Ei=ne.ownerDocument)&&Ei.defaultView||window;var wu=Ei.getSelection&&Ei.getSelection();if(wu&&wu.rangeCount!==0){Ei=wu.anchorNode;var Ma=wu.anchorOffset,za=wu.focusNode;wu=wu.focusOffset;try{Ei.nodeType,za.nodeType}catch{Ei=null;break e}var bc=0,yg=-1,f0=-1,_5=0,_C=0,_R=ne,_3=null;n:for(;;){for(var _I;_R!==Ei||Ma!==0&&_R.nodeType!==3||(yg=bc+Ma),_R!==za||wu!==0&&_R.nodeType!==3||(f0=bc+wu),_R.nodeType===3&&(bc+=_R.nodeValue.length),(_I=_R.firstChild)!==null;)_3=_R,_R=_I;for(;;){if(_R===ne)break n;if(_3===Ei&&++_5===Ma&&(yg=bc),_3===za&&++_C===wu&&(f0=bc),(_I=_R.nextSibling)!==null)break;_R=_3,_3=_R.parentNode}_R=_I}Ei=yg===-1||f0===-1?null:{start:yg,end:f0}}else Ei=null}Ei=Ei||{start:0,end:0}}else Ei=null;for(eie={focusedElem:ne,selectionRange:Ei},Jte=!1,_8=_e;_8!==null;)if(_e=_8,ne=_e.child,(_e.subtreeFlags&1028)!==0&&ne!==null)ne.return=_e,_8=ne;else for(;_8!==null;){_e=_8;try{var _N=_e.alternate;if((_e.flags&1024)!==0)switch(_e.tag){case 0:case 11:case 15:break;case 1:if(_N!==null){var _P=_N.memoizedProps,eee=_N.memoizedState,_w=_e.stateNode,Qp=_w.getSnapshotBeforeUpdate(_e.elementType===_e.type?_P:tne(_e.type,_P),eee);_w.__reactInternalSnapshotBeforeUpdate=Qp}break;case 3:var __=_e.stateNode.containerInfo;__.nodeType===1?__.textContent="":__.nodeType===9&&__.documentElement&&__.removeChild(__.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(_F){_Z(_e,_e.return,_F)}if(ne=_e.sibling,ne!==null){ne.return=_e.return,_8=ne;break}_8=_e.return}return _N=Zoe,Zoe=!1,_N}function vie(ne,_e,Ei){var wu=_e.updateQueue;if(wu=wu!==null?wu.lastEffect:null,wu!==null){var Ma=wu=wu.next;do{if((Ma.tag&ne)===ne){var za=Ma.destroy;Ma.destroy=void 0,za!==void 0&&Nse(_e,Ei,za)}Ma=Ma.next}while(Ma!==wu)}}function gle(ne,_e){if(_e=_e.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){var Ei=_e=_e.next;do{if((Ei.tag&ne)===ne){var wu=Ei.create;Ei.destroy=wu()}Ei=Ei.next}while(Ei!==_e)}}function Pse(ne){var _e=ne.ref;if(_e!==null){var Ei=ne.stateNode;switch(ne.tag){case 5:ne=Ei;break;default:ne=Ei}typeof _e=="function"?_e(ne):_e.current=ne}}function eue(ne){var _e=ne.alternate;_e!==null&&(ne.alternate=null,eue(_e)),ne.child=null,ne.deletions=null,ne.sibling=null,ne.tag===5&&(_e=ne.stateNode,_e!==null&&(delete _e[Nee],delete _e[Nte],delete _e[Tne],delete _e[iie],delete _e[lie])),ne.stateNode=null,ne.return=null,ne.dependencies=null,ne.memoizedProps=null,ne.memoizedState=null,ne.pendingProps=null,ne.stateNode=null,ne.updateQueue=null}function nue(ne){return ne.tag===5||ne.tag===3||ne.tag===4}function tue(ne){e:for(;;){for(;ne.sibling===null;){if(ne.return===null||nue(ne.return))return null;ne=ne.return}for(ne.sibling.return=ne.return,ne=ne.sibling;ne.tag!==5&&ne.tag!==6&&ne.tag!==18;){if(ne.flags&2||ne.child===null||ne.tag===4)continue e;ne.child.return=ne,ne=ne.child}if(!(ne.flags&2))return ne.stateNode}}function Lse(ne,_e,Ei){var wu=ne.tag;if(wu===5||wu===6)ne=ne.stateNode,_e?Ei.nodeType===8?Ei.parentNode.insertBefore(ne,_e):Ei.insertBefore(ne,_e):(Ei.nodeType===8?(_e=Ei.parentNode,_e.insertBefore(ne,Ei)):(_e=Ei,_e.appendChild(ne)),Ei=Ei._reactRootContainer,Ei!=null||_e.onclick!==null||(_e.onclick=vre));else if(wu!==4&&(ne=ne.child,ne!==null))for(Lse(ne,_e,Ei),ne=ne.sibling;ne!==null;)Lse(ne,_e,Ei),ne=ne.sibling}function zse(ne,_e,Ei){var wu=ne.tag;if(wu===5||wu===6)ne=ne.stateNode,_e?Ei.insertBefore(ne,_e):Ei.appendChild(ne);else if(wu!==4&&(ne=ne.child,ne!==null))for(zse(ne,_e,Ei),ne=ne.sibling;ne!==null;)zse(ne,_e,Ei),ne=ne.sibling}var fee=null,rne=!1;function mte(ne,_e,Ei){for(Ei=Ei.child;Ei!==null;)rue(ne,_e,Ei),Ei=Ei.sibling}function rue(ne,_e,Ei){if(Az&&typeof Az.onCommitFiberUnmount=="function")try{Az.onCommitFiberUnmount(qte,Ei)}catch{}switch(Ei.tag){case 5:Eee||Cre(Ei,_e);case 6:var wu=fee,Ma=rne;fee=null,mte(ne,_e,Ei),fee=wu,rne=Ma,fee!==null&&(rne?(ne=fee,Ei=Ei.stateNode,ne.nodeType===8?ne.parentNode.removeChild(Ei):ne.removeChild(Ei)):fee.removeChild(Ei.stateNode));break;case 18:fee!==null&&(rne?(ne=fee,Ei=Ei.stateNode,ne.nodeType===8?rie(ne.parentNode,Ei):ne.nodeType===1&&rie(ne,Ei),bte(ne)):rie(fee,Ei.stateNode));break;case 4:wu=fee,Ma=rne,fee=Ei.stateNode.containerInfo,rne=!0,mte(ne,_e,Ei),fee=wu,rne=Ma;break;case 0:case 11:case 14:case 15:if(!Eee&&(wu=Ei.updateQueue,wu!==null&&(wu=wu.lastEffect,wu!==null))){Ma=wu=wu.next;do{var za=Ma,bc=za.destroy;za=za.tag,bc!==void 0&&((za&2)!==0||(za&4)!==0)&&Nse(Ei,_e,bc),Ma=Ma.next}while(Ma!==wu)}mte(ne,_e,Ei);break;case 1:if(!Eee&&(Cre(Ei,_e),wu=Ei.stateNode,typeof wu.componentWillUnmount=="function"))try{wu.props=Ei.memoizedProps,wu.state=Ei.memoizedState,wu.componentWillUnmount()}catch(yg){_Z(Ei,_e,yg)}mte(ne,_e,Ei);break;case 21:mte(ne,_e,Ei);break;case 22:Ei.mode&1?(Eee=(wu=Eee)||Ei.memoizedState!==null,mte(ne,_e,Ei),Eee=wu):mte(ne,_e,Ei);break;default:mte(ne,_e,Ei)}}function iue(ne){var _e=ne.updateQueue;if(_e!==null){ne.updateQueue=null;var Ei=ne.stateNode;Ei===null&&(Ei=ne.stateNode=new jue),_e.forEach(function(wu){var Ma=Xue.bind(null,ne,wu);Ei.has(wu)||(Ei.add(wu),wu.then(Ma,Ma))})}}function ine(ne,_e){var Ei=_e.deletions;if(Ei!==null)for(var wu=0;wu<Ei.length;wu++){var Ma=Ei[wu];try{var za=ne,bc=_e,yg=bc;e:for(;yg!==null;){switch(yg.tag){case 5:fee=yg.stateNode,rne=!1;break e;case 3:fee=yg.stateNode.containerInfo,rne=!0;break e;case 4:fee=yg.stateNode.containerInfo,rne=!0;break e}yg=yg.return}if(fee===null)throw Error(i(160));rue(za,bc,Ma),fee=null,rne=!1;var f0=Ma.alternate;f0!==null&&(f0.return=null),Ma.return=null}catch(_5){_Z(Ma,_e,_5)}}if(_e.subtreeFlags&12854)for(_e=_e.child;_e!==null;)lue(_e,ne),_e=_e.sibling}function lue(ne,_e){var Ei=ne.alternate,wu=ne.flags;switch(ne.tag){case 0:case 11:case 14:case 15:if(ine(_e,ne),xne(ne),wu&4){try{vie(3,ne,ne.return),gle(3,ne)}catch(_P){_Z(ne,ne.return,_P)}try{vie(5,ne,ne.return)}catch(_P){_Z(ne,ne.return,_P)}}break;case 1:ine(_e,ne),xne(ne),wu&512&&Ei!==null&&Cre(Ei,Ei.return);break;case 5:if(ine(_e,ne),xne(ne),wu&512&&Ei!==null&&Cre(Ei,Ei.return),ne.flags&32){var Ma=ne.stateNode;try{Bd(Ma,"")}catch(_P){_Z(ne,ne.return,_P)}}if(wu&4&&(Ma=ne.stateNode,Ma!=null)){var za=ne.memoizedProps,bc=Ei!==null?Ei.memoizedProps:za,yg=ne.type,f0=ne.updateQueue;if(ne.updateQueue=null,f0!==null)try{yg==="input"&&za.type==="radio"&&za.name!=null&&a0(Ma,za),nb(yg,bc);var _5=nb(yg,za);for(bc=0;bc<f0.length;bc+=2){var _C=f0[bc],_R=f0[bc+1];_C==="style"?rc(Ma,_R):_C==="dangerouslySetInnerHTML"?ih(Ma,_R):_C==="children"?Bd(Ma,_R):$e(Ma,_C,_R,_5)}switch(yg){case"input":_1(Ma,za);break;case"textarea":_2(Ma,za);break;case"select":var _3=Ma._wrapperState.wasMultiple;Ma._wrapperState.wasMultiple=!!za.multiple;var _I=za.value;_I!=null?_b(Ma,!!za.multiple,_I,!1):_3!==!!za.multiple&&(za.defaultValue!=null?_b(Ma,!!za.multiple,za.defaultValue,!0):_b(Ma,!!za.multiple,za.multiple?[]:"",!1))}Ma[Nte]=za}catch(_P){_Z(ne,ne.return,_P)}}break;case 6:if(ine(_e,ne),xne(ne),wu&4){if(ne.stateNode===null)throw Error(i(162));Ma=ne.stateNode,za=ne.memoizedProps;try{Ma.nodeValue=za}catch(_P){_Z(ne,ne.return,_P)}}break;case 3:if(ine(_e,ne),xne(ne),wu&4&&Ei!==null&&Ei.memoizedState.isDehydrated)try{bte(_e.containerInfo)}catch(_P){_Z(ne,ne.return,_P)}break;case 4:ine(_e,ne),xne(ne);break;case 13:ine(_e,ne),xne(ne),Ma=ne.child,Ma.flags&8192&&(za=Ma.memoizedState!==null,Ma.stateNode.isHidden=za,!za||Ma.alternate!==null&&Ma.alternate.memoizedState!==null||(Use=_B())),wu&4&&iue(ne);break;case 22:if(_C=Ei!==null&&Ei.memoizedState!==null,ne.mode&1?(Eee=(_5=Eee)||_C,ine(_e,ne),Eee=_5):ine(_e,ne),xne(ne),wu&8192){if(_5=ne.memoizedState!==null,(ne.stateNode.isHidden=_5)&&!_C&&(ne.mode&1)!==0)for(_8=ne,_C=ne.child;_C!==null;){for(_R=_8=_C;_8!==null;){switch(_3=_8,_I=_3.child,_3.tag){case 0:case 11:case 14:case 15:vie(4,_3,_3.return);break;case 1:Cre(_3,_3.return);var _N=_3.stateNode;if(typeof _N.componentWillUnmount=="function"){wu=_3,Ei=_3.return;try{_e=wu,_N.props=_e.memoizedProps,_N.state=_e.memoizedState,_N.componentWillUnmount()}catch(_P){_Z(wu,Ei,_P)}}break;case 5:Cre(_3,_3.return);break;case 22:if(_3.memoizedState!==null){uue(_R);continue}}_I!==null?(_I.return=_3,_8=_I):uue(_R)}_C=_C.sibling}e:for(_C=null,_R=ne;;){if(_R.tag===5){if(_C===null){_C=_R;try{Ma=_R.stateNode,_5?(za=Ma.style,typeof za.setProperty=="function"?za.setProperty("display","none","important"):za.display="none"):(yg=_R.stateNode,f0=_R.memoizedProps.style,bc=f0!=null&&f0.hasOwnProperty("display")?f0.display:null,yg.style.display=_S("display",bc))}catch(_P){_Z(ne,ne.return,_P)}}}else if(_R.tag===6){if(_C===null)try{_R.stateNode.nodeValue=_5?"":_R.memoizedProps}catch(_P){_Z(ne,ne.return,_P)}}else if((_R.tag!==22&&_R.tag!==23||_R.memoizedState===null||_R===ne)&&_R.child!==null){_R.child.return=_R,_R=_R.child;continue}if(_R===ne)break e;for(;_R.sibling===null;){if(_R.return===null||_R.return===ne)break e;_C===_R&&(_C=null),_R=_R.return}_C===_R&&(_C=null),_R.sibling.return=_R.return,_R=_R.sibling}}break;case 19:ine(_e,ne),xne(ne),wu&4&&iue(ne);break;case 21:break;default:ine(_e,ne),xne(ne)}}function xne(ne){var _e=ne.flags;if(_e&2){try{e:{for(var Ei=ne.return;Ei!==null;){if(nue(Ei)){var wu=Ei;break e}Ei=Ei.return}throw Error(i(160))}switch(wu.tag){case 5:var Ma=wu.stateNode;wu.flags&32&&(Bd(Ma,""),wu.flags&=-33);var za=tue(ne);zse(ne,za,Ma);break;case 3:case 4:var bc=wu.stateNode.containerInfo,yg=tue(ne);Lse(ne,yg,bc);break;default:throw Error(i(161))}}catch(f0){_Z(ne,ne.return,f0)}ne.flags&=-3}_e&4096&&(ne.flags&=-4097)}function Uue(ne,_e,Ei){_8=ne,sue(ne)}function sue(ne,_e,Ei){for(var wu=(ne.mode&1)!==0;_8!==null;){var Ma=_8,za=Ma.child;if(Ma.tag===22&&wu){var bc=Ma.memoizedState!==null||dle;if(!bc){var yg=Ma.alternate,f0=yg!==null&&yg.memoizedState!==null||Eee;yg=dle;var _5=Eee;if(dle=bc,(Eee=f0)&&!_5)for(_8=Ma;_8!==null;)bc=_8,f0=bc.child,bc.tag===22&&bc.memoizedState!==null?aue(Ma):f0!==null?(f0.return=bc,_8=f0):aue(Ma);for(;za!==null;)_8=za,sue(za),za=za.sibling;_8=Ma,dle=yg,Eee=_5}oue(ne)}else(Ma.subtreeFlags&8772)!==0&&za!==null?(za.return=Ma,_8=za):oue(ne)}}function oue(ne){for(;_8!==null;){var _e=_8;if((_e.flags&8772)!==0){var Ei=_e.alternate;try{if((_e.flags&8772)!==0)switch(_e.tag){case 0:case 11:case 15:Eee||gle(5,_e);break;case 1:var wu=_e.stateNode;if(_e.flags&4&&!Eee)if(Ei===null)wu.componentDidMount();else{var Ma=_e.elementType===_e.type?Ei.memoizedProps:tne(_e.type,Ei.memoizedProps);wu.componentDidUpdate(Ma,Ei.memoizedState,wu.__reactInternalSnapshotBeforeUpdate)}var za=_e.updateQueue;za!==null&&uoe(_e,za,wu);break;case 3:var bc=_e.updateQueue;if(bc!==null){if(Ei=null,_e.child!==null)switch(_e.child.tag){case 5:Ei=_e.child.stateNode;break;case 1:Ei=_e.child.stateNode}uoe(_e,bc,Ei)}break;case 5:var yg=_e.stateNode;if(Ei===null&&_e.flags&4){Ei=yg;var f0=_e.memoizedProps;switch(_e.type){case"button":case"input":case"select":case"textarea":f0.autoFocus&&Ei.focus();break;case"img":f0.src&&(Ei.src=f0.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_e.memoizedState===null){var _5=_e.alternate;if(_5!==null){var _C=_5.memoizedState;if(_C!==null){var _R=_C.dehydrated;_R!==null&&bte(_R)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Eee||_e.flags&512&&Pse(_e)}catch(_3){_Z(_e,_e.return,_3)}}if(_e===ne){_8=null;break}if(Ei=_e.sibling,Ei!==null){Ei.return=_e.return,_8=Ei;break}_8=_e.return}}function uue(ne){for(;_8!==null;){var _e=_8;if(_e===ne){_8=null;break}var Ei=_e.sibling;if(Ei!==null){Ei.return=_e.return,_8=Ei;break}_8=_e.return}}function aue(ne){for(;_8!==null;){var _e=_8;try{switch(_e.tag){case 0:case 11:case 15:var Ei=_e.return;try{gle(4,_e)}catch(f0){_Z(_e,Ei,f0)}break;case 1:var wu=_e.stateNode;if(typeof wu.componentDidMount=="function"){var Ma=_e.return;try{wu.componentDidMount()}catch(f0){_Z(_e,Ma,f0)}}var za=_e.return;try{Pse(_e)}catch(f0){_Z(_e,za,f0)}break;case 5:var bc=_e.return;try{Pse(_e)}catch(f0){_Z(_e,bc,f0)}}}catch(f0){_Z(_e,_e.return,f0)}if(_e===ne){_8=null;break}var yg=_e.sibling;if(yg!==null){yg.return=_e.return,_8=yg;break}_8=_e.return}}var Kue=Math.ceil,ple=De.ReactCurrentDispatcher,jse=De.ReactCurrentOwner,Wee=De.ReactCurrentBatchConfig,_j=0,aee=null,tee=null,hee=0,Pee=0,Are=mne(0),lee=0,wie=null,Ute=0,mle=0,Bse=0,yie=null,Oee=null,Use=0,Dre=1/0,jne=null,vle=!1,Kse=null,vte=null,wle=!1,wte=null,yle=0,xie=0,Gse=null,xle=-1,Sle=0;function Dee(){return(_j&6)!==0?_B():xle!==-1?xle:xle=_B()}function yte(ne){return(ne.mode&1)===0?1:(_j&2)!==0&&hee!==0?hee&-hee:vz.transition!==null?(Sle===0&&(Sle=$ne()),Sle):(ne=Uj,ne!==0||(ne=window.event,ne=ne===void 0?16:Die(ne.type)),ne)}function lne(ne,_e,Ei,wu){if(50<xie)throw xie=0,Gse=null,Error(i(185));zee(ne,Ei,wu),((_j&2)===0||ne!==aee)&&(ne===aee&&((_j&2)===0&&(mle|=Ei),lee===4&&xte(ne,hee)),kee(ne,wu),Ei===1&&_j===0&&(_e.mode&1)===0&&(Dre=_B()+500,Lte&&nne()))}function kee(ne,_e){var Ei=ne.callbackNode;_te(ne,_e);var wu=Vne(ne,ne===aee?hee:0);if(wu===0)Ei!==null&&Lee(Ei),ne.callbackNode=null,ne.callbackPriority=0;else if(_e=wu&-wu,ne.callbackPriority!==_e){if(Ei!=null&&Lee(Ei),_e===1)ne.tag===0?nle(fue.bind(null,ne)):oie(fue.bind(null,ne)),lse(function(){(_j&6)===0&&nne()}),Ei=null;else{switch(Jee(wu)){case 1:Ei=sne;break;case 4:Ei=une;break;case 16:Ei=Gne;break;case 536870912:Ei=Eie;break;default:Ei=Gne}Ei=xue(Ei,cue.bind(null,ne))}ne.callbackPriority=_e,ne.callbackNode=Ei}}function cue(ne,_e){if(xle=-1,Sle=0,(_j&6)!==0)throw Error(i(327));var Ei=ne.callbackNode;if(Rre()&&ne.callbackNode!==Ei)return null;var wu=Vne(ne,ne===aee?hee:0);if(wu===0)return null;if((wu&30)!==0||(wu&ne.expiredLanes)!==0||_e)_e=Ele(ne,wu);else{_e=wu;var Ma=_j;_j|=2;var za=gue();(aee!==ne||hee!==_e)&&(jne=null,Dre=_B()+500,Gte(ne,_e));do try{Hue();break}catch(yg){due(ne,yg)}while(!0);use(),ple.current=za,_j=Ma,tee!==null?_e=0:(aee=null,hee=0,_e=lee)}if(_e!==0){if(_e===2&&(Ma=ree(ne),Ma!==0&&(wu=Ma,_e=Wse(ne,Ma))),_e===1)throw Ei=wie,Gte(ne,0),xte(ne,wu),kee(ne,_B()),Ei;if(_e===6)xte(ne,wu);else{if(Ma=ne.current.alternate,(wu&30)===0&&!Gue(Ma)&&(_e=Ele(ne,wu),_e===2&&(za=ree(ne),za!==0&&(wu=za,_e=Wse(ne,za))),_e===1))throw Ei=wie,Gte(ne,0),xte(ne,wu),kee(ne,_B()),Ei;switch(ne.finishedWork=Ma,ne.finishedLanes=wu,_e){case 0:case 1:throw Error(i(345));case 2:Wte(ne,Oee,jne);break;case 3:if(xte(ne,wu),(wu&130023424)===wu&&(_e=Use+500-_B(),10<_e)){if(Vne(ne,0)!==0)break;if(Ma=ne.suspendedLanes,(Ma&wu)!==wu){Dee(),ne.pingedLanes|=ne.suspendedLanes&Ma;break}ne.timeoutHandle=tie(Wte.bind(null,ne,Oee,jne),_e);break}Wte(ne,Oee,jne);break;case 4:if(xte(ne,wu),(wu&4194240)===wu)break;for(_e=ne.eventTimes,Ma=-1;0<wu;){var bc=31-_Y(wu);za=1<<bc,bc=_e[bc],bc>Ma&&(Ma=bc),wu&=~za}if(wu=Ma,wu=_B()-wu,wu=(120>wu?120:480>wu?480:1080>wu?1080:1920>wu?1920:3e3>wu?3e3:4320>wu?4320:1960*Kue(wu/1960))-wu,10<wu){ne.timeoutHandle=tie(Wte.bind(null,ne,Oee,jne),wu);break}Wte(ne,Oee,jne);break;case 5:Wte(ne,Oee,jne);break;default:throw Error(i(329))}}}return kee(ne,_B()),ne.callbackNode===Ei?cue.bind(null,ne):null}function Wse(ne,_e){var Ei=yie;return ne.current.memoizedState.isDehydrated&&(Gte(ne,_e).flags|=256),ne=Ele(ne,_e),ne!==2&&(_e=Oee,Oee=Ei,_e!==null&&Hse(_e)),ne}function Hse(ne){Oee===null?Oee=ne:Oee.push.apply(Oee,ne)}function Gue(ne){for(var _e=ne;;){if(_e.flags&16384){var Ei=_e.updateQueue;if(Ei!==null&&(Ei=Ei.stores,Ei!==null))for(var wu=0;wu<Ei.length;wu++){var Ma=Ei[wu],za=Ma.getSnapshot;Ma=Ma.value;try{if(!Tee(za(),Ma))return!1}catch{return!1}}}if(Ei=_e.child,_e.subtreeFlags&16384&&Ei!==null)Ei.return=_e,_e=Ei;else{if(_e===ne)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===ne)return!0;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}}return!0}function xte(ne,_e){for(_e&=~Bse,_e&=~mle,ne.suspendedLanes|=_e,ne.pingedLanes&=~_e,ne=ne.expirationTimes;0<_e;){var Ei=31-_Y(_e),wu=1<<Ei;ne[Ei]=-1,_e&=~wu}}function fue(ne){if((_j&6)!==0)throw Error(i(327));Rre();var _e=Vne(ne,0);if((_e&1)===0)return kee(ne,_B()),null;var Ei=Ele(ne,_e);if(ne.tag!==0&&Ei===2){var wu=ree(ne);wu!==0&&(_e=wu,Ei=Wse(ne,wu))}if(Ei===1)throw Ei=wie,Gte(ne,0),xte(ne,_e),kee(ne,_B()),Ei;if(Ei===6)throw Error(i(345));return ne.finishedWork=ne.current.alternate,ne.finishedLanes=_e,Wte(ne,Oee,jne),kee(ne,_B()),null}function qse(ne,_e){var Ei=_j;_j|=1;try{return ne(_e)}finally{_j=Ei,_j===0&&(Dre=_B()+500,Lte&&nne())}}function Kte(ne){wte!==null&&wte.tag===0&&(_j&6)===0&&Rre();var _e=_j;_j|=1;var Ei=Wee.transition,wu=Uj;try{if(Wee.transition=null,Uj=1,ne)return ne()}finally{Uj=wu,Wee.transition=Ei,_j=_e,(_j&6)===0&&nne()}}function Vse(){Pee=Are.current,_W(Are)}function Gte(ne,_e){ne.finishedWork=null,ne.finishedLanes=0;var Ei=ne.timeoutHandle;if(Ei!==-1&&(ne.timeoutHandle=-1,ise(Ei)),tee!==null)for(Ei=tee.return;Ei!==null;){var wu=Ei;switch(d0(wu),wu.tag){case 1:wu=wu.type.childContextTypes,wu!=null&&wre();break;case 3:$re(),_W(wee),_W(oee),mse();break;case 5:gse(wu);break;case 4:$re();break;case 13:_W(_J);break;case 19:_W(_J);break;case 10:ase(wu.type._context);break;case 22:case 23:Vse()}Ei=Ei.return}if(aee=ne,tee=ne=Ste(ne.current,null),hee=Pee=_e,lee=0,wie=null,Bse=mle=Ute=0,Oee=yie=null,zte!==null){for(_e=0;_e<zte.length;_e++)if(Ei=zte[_e],wu=Ei.interleaved,wu!==null){Ei.interleaved=null;var Ma=wu.next,za=Ei.pending;if(za!==null){var bc=za.next;za.next=Ma,wu.next=bc}Ei.pending=wu}zte=null}return ne}function due(ne,_e){do{var Ei=tee;try{if(use(),lle.current=ale,sle){for(var wu=_X.memoizedState;wu!==null;){var Ma=wu.queue;Ma!==null&&(Ma.pending=null),wu=wu.next}sle=!1}if(Bte=0,uee=iee=_X=null,hie=!1,die=0,jse.current=null,Ei===null||Ei.return===null){lee=1,wie=_e,tee=null;break}e:{var za=ne,bc=Ei.return,yg=Ei,f0=_e;if(_e=hee,yg.flags|=32768,f0!==null&&typeof f0=="object"&&typeof f0.then=="function"){var _5=f0,_C=yg,_R=_C.tag;if((_C.mode&1)===0&&(_R===0||_R===11||_R===15)){var _3=_C.alternate;_3?(_C.updateQueue=_3.updateQueue,_C.memoizedState=_3.memoizedState,_C.lanes=_3.lanes):(_C.updateQueue=null,_C.memoizedState=null)}var _I=Poe(bc);if(_I!==null){_I.flags&=-257,Loe(_I,bc,yg,za,_e),_I.mode&1&&Noe(za,_5,_e),_e=_I,f0=_5;var _N=_e.updateQueue;if(_N===null){var _P=new Set;_P.add(f0),_e.updateQueue=_P}else _N.add(f0);break e}else{if((_e&1)===0){Noe(za,_5,_e),Jse();break e}f0=Error(i(426))}}else if(XR&&yg.mode&1){var eee=Poe(bc);if(eee!==null){(eee.flags&65536)===0&&(eee.flags|=256),Loe(eee,bc,yg,za,_e),_Q(bre(f0,yg));break e}}za=f0=bre(f0,yg),lee!==4&&(lee=2),yie===null?yie=[za]:yie.push(za),za=bc;do{switch(za.tag){case 3:za.flags|=65536,_e&=-_e,za.lanes|=_e;var _w=koe(za,f0,_e);ooe(za,_w);break e;case 1:yg=f0;var Qp=za.type,__=za.stateNode;if((za.flags&128)===0&&(typeof Qp.getDerivedStateFromError=="function"||__!==null&&typeof __.componentDidCatch=="function"&&(vte===null||!vte.has(__)))){za.flags|=65536,_e&=-_e,za.lanes|=_e;var _F=Ioe(za,yg,_e);ooe(za,_F);break e}}za=za.return}while(za!==null)}mue(Ei)}catch(_L){_e=_L,tee===Ei&&Ei!==null&&(tee=Ei=Ei.return);continue}break}while(!0)}function gue(){var ne=ple.current;return ple.current=ale,ne===null?ale:ne}function Jse(){(lee===0||lee===3||lee===2)&&(lee=4),aee===null||(Ute&268435455)===0&&(mle&268435455)===0||xte(aee,hee)}function Ele(ne,_e){var Ei=_j;_j|=2;var wu=gue();(aee!==ne||hee!==_e)&&(jne=null,Gte(ne,_e));do try{Wue();break}catch(Ma){due(ne,Ma)}while(!0);if(use(),_j=Ei,ple.current=wu,tee!==null)throw Error(i(261));return aee=null,hee=0,lee}function Wue(){for(;tee!==null;)pue(tee)}function Hue(){for(;tee!==null&&!Bne();)pue(tee)}function pue(ne){var _e=yue(ne.alternate,ne,Pee);ne.memoizedProps=ne.pendingProps,_e===null?mue(ne):tee=_e,jse.current=null}function mue(ne){var _e=ne;do{var Ei=_e.alternate;if(ne=_e.return,(_e.flags&32768)===0){if(Ei=Lue(Ei,_e,Pee),Ei!==null){tee=Ei;return}}else{if(Ei=zue(Ei,_e),Ei!==null){Ei.flags&=32767,tee=Ei;return}if(ne!==null)ne.flags|=32768,ne.subtreeFlags=0,ne.deletions=null;else{lee=6,tee=null;return}}if(_e=_e.sibling,_e!==null){tee=_e;return}tee=_e=ne}while(_e!==null);lee===0&&(lee=5)}function Wte(ne,_e,Ei){var wu=Uj,Ma=Wee.transition;try{Wee.transition=null,Uj=1,que(ne,_e,Ei,wu)}finally{Wee.transition=Ma,Uj=wu}return null}function que(ne,_e,Ei,wu){do Rre();while(wte!==null);if((_j&6)!==0)throw Error(i(327));Ei=ne.finishedWork;var Ma=ne.finishedLanes;if(Ei===null)return null;if(ne.finishedWork=null,ne.finishedLanes=0,Ei===ne.current)throw Error(i(177));ne.callbackNode=null,ne.callbackPriority=0;var za=Ei.lanes|Ei.childLanes;if(Ole(ne,za),ne===aee&&(tee=aee=null,hee=0),(Ei.subtreeFlags&2064)===0&&(Ei.flags&2064)===0||wle||(wle=!0,xue(Gne,function(){return Rre(),null})),za=(Ei.flags&15990)!==0,(Ei.subtreeFlags&15990)!==0||za){za=Wee.transition,Wee.transition=null;var bc=Uj;Uj=1;var yg=_j;_j|=4,jse.current=null,Bue(ne,Ei),lue(Ei,ne),Gre(eie),Jte=!!Zre,eie=Zre=null,ne.current=Ei,Uue(Ei),Une(),_j=yg,Uj=bc,Wee.transition=za}else ne.current=Ei;if(wle&&(wle=!1,wte=ne,yle=Ma),za=ne.pendingLanes,za===0&&(vte=null),ane(Ei.stateNode),kee(ne,_B()),_e!==null)for(wu=ne.onRecoverableError,Ei=0;Ei<_e.length;Ei++)Ma=_e[Ei],wu(Ma.value,{componentStack:Ma.stack,digest:Ma.digest});if(vle)throw vle=!1,ne=Kse,Kse=null,ne;return(yle&1)!==0&&ne.tag!==0&&Rre(),za=ne.pendingLanes,(za&1)!==0?ne===Gse?xie++:(xie=0,Gse=ne):xie=0,nne(),null}function Rre(){if(wte!==null){var ne=Jee(yle),_e=Wee.transition,Ei=Uj;try{if(Wee.transition=null,Uj=16>ne?16:ne,wte===null)var wu=!1;else{if(ne=wte,wte=null,yle=0,(_j&6)!==0)throw Error(i(331));var Ma=_j;for(_j|=4,_8=ne.current;_8!==null;){var za=_8,bc=za.child;if((_8.flags&16)!==0){var yg=za.deletions;if(yg!==null){for(var f0=0;f0<yg.length;f0++){var _5=yg[f0];for(_8=_5;_8!==null;){var _C=_8;switch(_C.tag){case 0:case 11:case 15:vie(8,_C,za)}var _R=_C.child;if(_R!==null)_R.return=_C,_8=_R;else for(;_8!==null;){_C=_8;var _3=_C.sibling,_I=_C.return;if(eue(_C),_C===_5){_8=null;break}if(_3!==null){_3.return=_I,_8=_3;break}_8=_I}}}var _N=za.alternate;if(_N!==null){var _P=_N.child;if(_P!==null){_N.child=null;do{var eee=_P.sibling;_P.sibling=null,_P=eee}while(_P!==null)}}_8=za}}if((za.subtreeFlags&2064)!==0&&bc!==null)bc.return=za,_8=bc;else e:for(;_8!==null;){if(za=_8,(za.flags&2048)!==0)switch(za.tag){case 0:case 11:case 15:vie(9,za,za.return)}var _w=za.sibling;if(_w!==null){_w.return=za.return,_8=_w;break e}_8=za.return}}var Qp=ne.current;for(_8=Qp;_8!==null;){bc=_8;var __=bc.child;if((bc.subtreeFlags&2064)!==0&&__!==null)__.return=bc,_8=__;else e:for(bc=Qp;_8!==null;){if(yg=_8,(yg.flags&2048)!==0)try{switch(yg.tag){case 0:case 11:case 15:gle(9,yg)}}catch(_L){_Z(yg,yg.return,_L)}if(yg===bc){_8=null;break e}var _F=yg.sibling;if(_F!==null){_F.return=yg.return,_8=_F;break e}_8=yg.return}}if(_j=Ma,nne(),Az&&typeof Az.onPostCommitFiberRoot=="function")try{Az.onPostCommitFiberRoot(qte,ne)}catch{}wu=!0}return wu}finally{Uj=Ei,Wee.transition=_e}}return!1}function vue(ne,_e,Ei){_e=bre(Ei,_e),_e=koe(ne,_e,1),ne=pte(ne,_e,1),_e=Dee(),ne!==null&&(zee(ne,1,_e),kee(ne,_e))}function _Z(ne,_e,Ei){if(ne.tag===3)vue(ne,ne,Ei);else for(;_e!==null;){if(_e.tag===3){vue(_e,ne,Ei);break}else if(_e.tag===1){var wu=_e.stateNode;if(typeof _e.type.getDerivedStateFromError=="function"||typeof wu.componentDidCatch=="function"&&(vte===null||!vte.has(wu))){ne=bre(Ei,ne),ne=Ioe(_e,ne,1),_e=pte(_e,ne,1),ne=Dee(),_e!==null&&(zee(_e,1,ne),kee(_e,ne));break}}_e=_e.return}}function Vue(ne,_e,Ei){var wu=ne.pingCache;wu!==null&&wu.delete(_e),_e=Dee(),ne.pingedLanes|=ne.suspendedLanes&Ei,aee===ne&&(hee&Ei)===Ei&&(lee===4||lee===3&&(hee&130023424)===hee&&500>_B()-Use?Gte(ne,0):Bse|=Ei),kee(ne,_e)}function wue(ne,_e){_e===0&&((ne.mode&1)===0?_e=1:(_e=qne,qne<<=1,(qne&130023424)===0&&(qne=4194304)));var Ei=Dee();ne=Pne(ne,_e),ne!==null&&(zee(ne,_e,Ei),kee(ne,Ei))}function Jue(ne){var _e=ne.memoizedState,Ei=0;_e!==null&&(Ei=_e.retryLane),wue(ne,Ei)}function Xue(ne,_e){var Ei=0;switch(ne.tag){case 13:var wu=ne.stateNode,Ma=ne.memoizedState;Ma!==null&&(Ei=Ma.retryLane);break;case 19:wu=ne.stateNode;break;default:throw Error(i(314))}wu!==null&&wu.delete(_e),wue(ne,Ei)}var yue;yue=function(ne,_e,Ei){if(ne!==null)if(ne.memoizedProps!==_e.pendingProps||wee.current)Mee=!0;else{if((ne.lanes&Ei)===0&&(_e.flags&128)===0)return Mee=!1,Pue(ne,_e,Ei);Mee=(ne.flags&131072)!==0}else Mee=!1,XR&&(_e.flags&1048576)!==0&&_m(_e,kl,_e.index);switch(_e.lanes=0,_e.tag){case 2:var wu=_e.type;hle(ne,_e),ne=_e.pendingProps;var Ma=dte(_e,oee.current);_re(_e,Ei),Ma=yse(null,_e,wu,ne,Ma,Ei);var za=xse();return _e.flags|=1,typeof Ma=="object"&&Ma!==null&&typeof Ma.render=="function"&&Ma.$$typeof===void 0?(_e.tag=1,_e.memoizedState=null,_e.updateQueue=null,yee(wu)?(za=!0,yre(_e)):za=!1,_e.memoizedState=Ma.state!==null&&Ma.state!==void 0?Ma.state:null,hse(_e),Ma.updater=cle,_e.stateNode=Ma,Ma._reactInternals=_e,Cse(_e,wu,ne,Ei),_e=Tse(null,_e,wu,!0,za,Ei)):(_e.tag=0,XR&&za&&_6(_e),Aee(null,_e,Ma,Ei),_e=_e.child),_e;case 16:wu=_e.elementType;e:{switch(hle(ne,_e),ne=_e.pendingProps,Ma=wu._init,wu=Ma(wu._payload),_e.type=wu,Ma=_e.tag=Que(wu),ne=tne(wu,ne),Ma){case 0:_e=Rse(null,_e,wu,ne,Ei);break e;case 1:_e=Goe(null,_e,wu,ne,Ei);break e;case 11:_e=zoe(null,_e,wu,ne,Ei);break e;case 14:_e=joe(null,_e,wu,tne(wu.type,ne),Ei);break e}throw Error(i(306,wu,""))}return _e;case 0:return wu=_e.type,Ma=_e.pendingProps,Ma=_e.elementType===wu?Ma:tne(wu,Ma),Rse(ne,_e,wu,Ma,Ei);case 1:return wu=_e.type,Ma=_e.pendingProps,Ma=_e.elementType===wu?Ma:tne(wu,Ma),Goe(ne,_e,wu,Ma,Ei);case 3:e:{if(Woe(_e),ne===null)throw Error(i(387));wu=_e.pendingProps,za=_e.memoizedState,Ma=za.element,soe(ne,_e),rle(_e,wu,null,Ei);var bc=_e.memoizedState;if(wu=bc.element,za.isDehydrated)if(za={element:wu,isDehydrated:!1,cache:bc.cache,pendingSuspenseBoundaries:bc.pendingSuspenseBoundaries,transitions:bc.transitions},_e.updateQueue.baseState=za,_e.memoizedState=za,_e.flags&256){Ma=bre(Error(i(423)),_e),_e=Hoe(ne,_e,wu,Ei,Ma);break e}else if(wu!==Ma){Ma=bre(Error(i(424)),_e),_e=Hoe(ne,_e,wu,Ei,Ma);break e}else for(Dz=see(_e.stateNode.containerInfo.firstChild),_v=_e,XR=!0,Vb=null,Ei=uie(_e,null,wu,Ei),_e.child=Ei;Ei;)Ei.flags=Ei.flags&-3|4096,Ei=Ei.sibling;else{if(Pz(),wu===Ma){_e=zne(ne,_e,Ei);break e}Aee(ne,_e,wu,Ei)}_e=_e.child}return _e;case 5:return aoe(_e),ne===null&&Mz(_e),wu=_e.type,Ma=_e.pendingProps,za=ne!==null?ne.memoizedProps:null,bc=Ma.children,nie(wu,Ma)?bc=null:za!==null&&nie(wu,za)&&(_e.flags|=32),Koe(ne,_e),Aee(ne,_e,bc,Ei),_e.child;case 6:return ne===null&&Mz(_e),null;case 13:return qoe(ne,_e,Ei);case 4:return dse(_e,_e.stateNode.containerInfo),wu=_e.pendingProps,ne===null?_e.child=Fee(_e,null,wu,Ei):Aee(ne,_e,wu,Ei),_e.child;case 11:return wu=_e.type,Ma=_e.pendingProps,Ma=_e.elementType===wu?Ma:tne(wu,Ma),zoe(ne,_e,wu,Ma,Ei);case 7:return Aee(ne,_e,_e.pendingProps,Ei),_e.child;case 8:return Aee(ne,_e,_e.pendingProps.children,Ei),_e.child;case 12:return Aee(ne,_e,_e.pendingProps.children,Ei),_e.child;case 10:e:{if(wu=_e.type._context,Ma=_e.pendingProps,za=_e.memoizedProps,bc=Ma.value,_K(Ine,wu._currentValue),wu._currentValue=bc,za!==null)if(Tee(za.value,bc)){if(za.children===Ma.children&&!wee.current){_e=zne(ne,_e,Ei);break e}}else for(za=_e.child,za!==null&&(za.return=_e);za!==null;){var yg=za.dependencies;if(yg!==null){bc=za.child;for(var f0=yg.firstContext;f0!==null;){if(f0.context===wu){if(za.tag===1){f0=Lne(-1,Ei&-Ei),f0.tag=2;var _5=za.updateQueue;if(_5!==null){_5=_5.shared;var _C=_5.pending;_C===null?f0.next=f0:(f0.next=_C.next,_C.next=f0),_5.pending=f0}}za.lanes|=Ei,f0=za.alternate,f0!==null&&(f0.lanes|=Ei),cse(za.return,Ei,_e),yg.lanes|=Ei;break}f0=f0.next}}else if(za.tag===10)bc=za.type===_e.type?null:za.child;else if(za.tag===18){if(bc=za.return,bc===null)throw Error(i(341));bc.lanes|=Ei,yg=bc.alternate,yg!==null&&(yg.lanes|=Ei),cse(bc,Ei,_e),bc=za.sibling}else bc=za.child;if(bc!==null)bc.return=za;else for(bc=za;bc!==null;){if(bc===_e){bc=null;break}if(za=bc.sibling,za!==null){za.return=bc.return,bc=za;break}bc=bc.return}za=bc}Aee(ne,_e,Ma.children,Ei),_e=_e.child}return _e;case 9:return Ma=_e.type,wu=_e.pendingProps.children,_re(_e,Ei),Ma=Kee(Ma),wu=wu(Ma),_e.flags|=1,Aee(ne,_e,wu,Ei),_e.child;case 14:return wu=_e.type,Ma=tne(wu,_e.pendingProps),Ma=tne(wu.type,Ma),joe(ne,_e,wu,Ma,Ei);case 15:return Boe(ne,_e,_e.type,_e.pendingProps,Ei);case 17:return wu=_e.type,Ma=_e.pendingProps,Ma=_e.elementType===wu?Ma:tne(wu,Ma),hle(ne,_e),_e.tag=1,yee(wu)?(ne=!0,yre(_e)):ne=!1,_re(_e,Ei),Moe(_e,wu,Ma),Cse(_e,wu,Ma,Ei),Tse(null,_e,wu,!0,ne,Ei);case 19:return Joe(ne,_e,Ei);case 22:return Uoe(ne,_e,Ei)}throw Error(i(156,_e.tag))};function xue(ne,_e){return Sne(ne,_e)}function Yue(ne,_e,Ei,wu){this.tag=ne,this.key=Ei,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=wu,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hee(ne,_e,Ei,wu){return new Yue(ne,_e,Ei,wu)}function Xse(ne){return ne=ne.prototype,!(!ne||!ne.isReactComponent)}function Que(ne){if(typeof ne=="function")return Xse(ne)?1:0;if(ne!=null){if(ne=ne.$$typeof,ne===oa)return 11;if(ne===_s)return 14}return 2}function Ste(ne,_e){var Ei=ne.alternate;return Ei===null?(Ei=Hee(ne.tag,_e,ne.key,ne.mode),Ei.elementType=ne.elementType,Ei.type=ne.type,Ei.stateNode=ne.stateNode,Ei.alternate=ne,ne.alternate=Ei):(Ei.pendingProps=_e,Ei.type=ne.type,Ei.flags=0,Ei.subtreeFlags=0,Ei.deletions=null),Ei.flags=ne.flags&14680064,Ei.childLanes=ne.childLanes,Ei.lanes=ne.lanes,Ei.child=ne.child,Ei.memoizedProps=ne.memoizedProps,Ei.memoizedState=ne.memoizedState,Ei.updateQueue=ne.updateQueue,_e=ne.dependencies,Ei.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext},Ei.sibling=ne.sibling,Ei.index=ne.index,Ei.ref=ne.ref,Ei}function _le(ne,_e,Ei,wu,Ma,za){var bc=2;if(wu=ne,typeof ne=="function")Xse(ne)&&(bc=1);else if(typeof ne=="string")bc=5;else e:switch(ne){case Me:return Hte(Ei.children,Ma,za,_e);case _n:bc=8,Ma|=8;break;case _i:return ne=Hee(12,Ei,_e,Ma|2),ne.elementType=_i,ne.lanes=za,ne;case Ru:return ne=Hee(13,Ei,_e,Ma),ne.elementType=Ru,ne.lanes=za,ne;case ga:return ne=Hee(19,Ei,_e,Ma),ne.elementType=ga,ne.lanes=za,ne;case Ra:return $le(Ei,Ma,za,_e);default:if(typeof ne=="object"&&ne!==null)switch(ne.$$typeof){case ll:bc=10;break e;case _l:bc=9;break e;case oa:bc=11;break e;case _s:bc=14;break e;case Sa:bc=16,wu=null;break e}throw Error(i(130,ne==null?ne:typeof ne,""))}return _e=Hee(bc,Ei,_e,Ma),_e.elementType=ne,_e.type=wu,_e.lanes=za,_e}function Hte(ne,_e,Ei,wu){return ne=Hee(7,ne,wu,_e),ne.lanes=Ei,ne}function $le(ne,_e,Ei,wu){return ne=Hee(22,ne,wu,_e),ne.elementType=Ra,ne.lanes=Ei,ne.stateNode={isHidden:!1},ne}function Yse(ne,_e,Ei){return ne=Hee(6,ne,null,_e),ne.lanes=Ei,ne}function Qse(ne,_e,Ei){return _e=Hee(4,ne.children!==null?ne.children:[],ne.key,_e),_e.lanes=Ei,_e.stateNode={containerInfo:ne.containerInfo,pendingChildren:null,implementation:ne.implementation},_e}function Zue(ne,_e,Ei,wu,Ma){this.tag=_e,this.containerInfo=ne,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qee(0),this.expirationTimes=qee(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qee(0),this.identifierPrefix=wu,this.onRecoverableError=Ma,this.mutableSourceEagerHydrationData=null}function Zse(ne,_e,Ei,wu,Ma,za,bc,yg,f0){return ne=new Zue(ne,_e,Ei,yg,f0),_e===1?(_e=1,za===!0&&(_e|=8)):_e=0,za=Hee(3,null,null,_e),ne.current=za,za.stateNode=ne,za.memoizedState={element:wu,isDehydrated:Ei,cache:null,transitions:null,pendingSuspenseBoundaries:null},hse(za),ne}function eae(ne,_e,Ei){var wu=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ce,key:wu==null?null:""+wu,children:ne,containerInfo:_e,implementation:Ei}}function Sue(ne){if(!ne)return vne;ne=ne._reactInternals;e:{if(zz(ne)!==ne||ne.tag!==1)throw Error(i(170));var _e=ne;do{switch(_e.tag){case 3:_e=_e.stateNode.context;break e;case 1:if(yee(_e.type)){_e=_e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_e=_e.return}while(_e!==null);throw Error(i(171))}if(ne.tag===1){var Ei=ne.type;if(yee(Ei))return ele(ne,Ei,_e)}return _e}function Eue(ne,_e,Ei,wu,Ma,za,bc,yg,f0){return ne=Zse(Ei,wu,!0,ne,Ma,za,bc,yg,f0),ne.context=Sue(null),Ei=ne.current,wu=Dee(),Ma=yte(Ei),za=Lne(wu,Ma),za.callback=_e??null,pte(Ei,za,Ma),ne.current.lanes=Ma,zee(ne,Ma,wu),kee(ne,wu),ne}function ble(ne,_e,Ei,wu){var Ma=_e.current,za=Dee(),bc=yte(Ma);return Ei=Sue(Ei),_e.context===null?_e.context=Ei:_e.pendingContext=Ei,_e=Lne(za,bc),_e.payload={element:ne},wu=wu===void 0?null:wu,wu!==null&&(_e.callback=wu),ne=pte(Ma,_e,bc),ne!==null&&(lne(ne,Ma,bc,za),tle(ne,Ma,bc)),bc}function Cle(ne){if(ne=ne.current,!ne.child)return null;switch(ne.child.tag){case 5:return ne.child.stateNode;default:return ne.child.stateNode}}function _ue(ne,_e){if(ne=ne.memoizedState,ne!==null&&ne.dehydrated!==null){var Ei=ne.retryLane;ne.retryLane=Ei!==0&&Ei<_e?Ei:_e}}function eoe(ne,_e){_ue(ne,_e),(ne=ne.alternate)&&_ue(ne,_e)}function nae(){return null}var $ue=typeof reportError=="function"?reportError:function(ne){console.error(ne)};function noe(ne){this._internalRoot=ne}Ale.prototype.render=noe.prototype.render=function(ne){var _e=this._internalRoot;if(_e===null)throw Error(i(409));ble(ne,_e,null,null)},Ale.prototype.unmount=noe.prototype.unmount=function(){var ne=this._internalRoot;if(ne!==null){this._internalRoot=null;var _e=ne.containerInfo;Kte(function(){ble(null,ne,null,null)}),_e[ene]=null}};function Ale(ne){this._internalRoot=ne}Ale.prototype.unstable_scheduleHydration=function(ne){if(ne){var _e=gee();ne={blockedOn:null,target:ne,priority:_e};for(var Ei=0;Ei<bee.length&&_e!==0&&_e<bee[Ei].priority;Ei++);bee.splice(Ei,0,ne),Ei===0&&Cie(ne)}};function toe(ne){return!(!ne||ne.nodeType!==1&&ne.nodeType!==9&&ne.nodeType!==11)}function Dle(ne){return!(!ne||ne.nodeType!==1&&ne.nodeType!==9&&ne.nodeType!==11&&(ne.nodeType!==8||ne.nodeValue!==" react-mount-point-unstable "))}function bue(){}function tae(ne,_e,Ei,wu,Ma){if(Ma){if(typeof wu=="function"){var za=wu;wu=function(){var _5=Cle(bc);za.call(_5)}}var bc=Eue(_e,wu,ne,0,null,!1,!1,"",bue);return ne._reactRootContainer=bc,ne[ene]=bc.current,ste(ne.nodeType===8?ne.parentNode:ne),Kte(),bc}for(;Ma=ne.lastChild;)ne.removeChild(Ma);if(typeof wu=="function"){var yg=wu;wu=function(){var _5=Cle(f0);yg.call(_5)}}var f0=Zse(ne,0,!1,null,null,!1,!1,"",bue);return ne._reactRootContainer=f0,ne[ene]=f0.current,ste(ne.nodeType===8?ne.parentNode:ne),Kte(function(){ble(_e,f0,Ei,wu)}),f0}function Rle(ne,_e,Ei,wu,Ma){var za=Ei._reactRootContainer;if(za){var bc=za;if(typeof Ma=="function"){var yg=Ma;Ma=function(){var f0=Cle(bc);yg.call(f0)}}ble(_e,bc,ne,Ma)}else bc=tae(Ei,_e,ne,Ma,wu);return Cle(bc)}_ie=function(ne){switch(ne.tag){case 3:var _e=ne.stateNode;if(_e.current.memoizedState.isDehydrated){var Ei=Ene(_e.pendingLanes);Ei!==0&&(Vee(_e,Ei|1),kee(_e,_B()),(_j&6)===0&&(Dre=_B()+500,nne()))}break;case 13:Kte(function(){var wu=Pne(ne,1);if(wu!==null){var Ma=Dee();lne(wu,ne,1,Ma)}}),eoe(ne,1)}},$ie=function(ne){if(ne.tag===13){var _e=Pne(ne,134217728);if(_e!==null){var Ei=Dee();lne(_e,ne,134217728,Ei)}eoe(ne,134217728)}},Xee=function(ne){if(ne.tag===13){var _e=yte(ne),Ei=Pne(ne,_e);if(Ei!==null){var wu=Dee();lne(Ei,ne,_e,wu)}eoe(ne,_e)}},gee=function(){return Uj},pee=function(ne,_e){var Ei=Uj;try{return Uj=ne,_e()}finally{Uj=Ei}},Ba=function(ne,_e,Ei){switch(_e){case"input":if(_1(ne,Ei),_e=Ei.name,Ei.type==="radio"&&_e!=null){for(Ei=ne;Ei.parentNode;)Ei=Ei.parentNode;for(Ei=Ei.querySelectorAll("input[name="+JSON.stringify(""+_e)+'][type="radio"]'),_e=0;_e<Ei.length;_e++){var wu=Ei[_e];if(wu!==ne&&wu.form===ne.form){var Ma=pne(wu);if(!Ma)throw Error(i(90));Pf(wu),_1(wu,Ma)}}}break;case"textarea":_2(ne,Ei);break;case"select":_e=Ei.value,_e!=null&&_b(ne,!!Ei.multiple,_e,!1)}},Oc=qse,zg=Kte;var rae={usingClientEntryPoint:!1,Events:[cte,fte,pne,Pp,_0,qse]},Sie={findFiberByHostInstance:Fne,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iae={bundleType:Sie.bundleType,version:Sie.version,rendererPackageName:Sie.rendererPackageName,rendererConfig:Sie.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:De.ReactCurrentDispatcher,findHostInstanceByFiber:function(ne){return ne=_V(ne),ne===null?null:ne.stateNode},findFiberByHostInstance:Sie.findFiberByHostInstance||nae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tle=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tle.isDisabled&&Tle.supportsFiber)try{qte=Tle.inject(iae),Az=Tle}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rae,reactDom_production_min.createPortal=function(ne,_e){var Ei=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!toe(_e))throw Error(i(200));return eae(ne,_e,null,Ei)},reactDom_production_min.createRoot=function(ne,_e){if(!toe(ne))throw Error(i(299));var Ei=!1,wu="",Ma=$ue;return _e!=null&&(_e.unstable_strictMode===!0&&(Ei=!0),_e.identifierPrefix!==void 0&&(wu=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(Ma=_e.onRecoverableError)),_e=Zse(ne,1,!1,null,null,Ei,!1,wu,Ma),ne[ene]=_e.current,ste(ne.nodeType===8?ne.parentNode:ne),new noe(_e)},reactDom_production_min.findDOMNode=function(ne){if(ne==null)return null;if(ne.nodeType===1)return ne;var _e=ne._reactInternals;if(_e===void 0)throw typeof ne.render=="function"?Error(i(188)):(ne=Object.keys(ne).join(","),Error(i(268,ne)));return ne=_V(_e),ne=ne===null?null:ne.stateNode,ne},reactDom_production_min.flushSync=function(ne){return Kte(ne)},reactDom_production_min.hydrate=function(ne,_e,Ei){if(!Dle(_e))throw Error(i(200));return Rle(null,ne,_e,!0,Ei)},reactDom_production_min.hydrateRoot=function(ne,_e,Ei){if(!toe(ne))throw Error(i(405));var wu=Ei!=null&&Ei.hydratedSources||null,Ma=!1,za="",bc=$ue;if(Ei!=null&&(Ei.unstable_strictMode===!0&&(Ma=!0),Ei.identifierPrefix!==void 0&&(za=Ei.identifierPrefix),Ei.onRecoverableError!==void 0&&(bc=Ei.onRecoverableError)),_e=Eue(_e,null,ne,1,Ei??null,Ma,!1,za,bc),ne[ene]=_e.current,ste(ne),wu)for(ne=0;ne<wu.length;ne++)Ei=wu[ne],Ma=Ei._getVersion,Ma=Ma(Ei._source),_e.mutableSourceEagerHydrationData==null?_e.mutableSourceEagerHydrationData=[Ei,Ma]:_e.mutableSourceEagerHydrationData.push(Ei,Ma);return new Ale(_e)},reactDom_production_min.render=function(ne,_e,Ei){if(!Dle(_e))throw Error(i(200));return Rle(null,ne,_e,!1,Ei)},reactDom_production_min.unmountComponentAtNode=function(ne){if(!Dle(ne))throw Error(i(40));return ne._reactRootContainer?(Kte(function(){Rle(null,null,ne,!1,function(){ne._reactRootContainer=null,ne[ene]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=qse,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(ne,_e,Ei,wu){if(!Dle(Ei))throw Error(i(200));if(ne==null||ne._reactInternals===void 0)throw Error(i(38));return Rle(ne,_e,Ei,!1,wu)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var n=requireReactDom();return client.createRoot=n.createRoot,client.hydrateRoot=n.hydrateRoot,client}var clientExports=requireClient(),propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=n,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var n=requireReactPropTypesSecret();function t(){}function i(){}return i.resetWarningCache=t,factoryWithThrowingShims=function(){function s(d,p,v,_,k,P){if(P!==n){var L=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw L.name="Invariant Violation",L}}s.isRequired=s;function o(){return s}var f={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:i,resetWarningCache:t};return f.PropTypes=f,f},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const _pt=getDefaultExportFromCjs$1(propTypesExports);var reactExports=requireReact();const React=getDefaultExportFromCjs$1(reactExports),EMPTY$1={};function shallowEqual(n,t){n===void 0&&(n=EMPTY$1),t===void 0&&(t=EMPTY$1);const i=Object.keys(n),s=Object.keys(t);return n===t||i.length===s.length&&i.every(o=>n[o]===t[o])}const stringOrChar=/("(?:[^\\"]|\\.)*")|[:,]/g;function stringify$1(n,t={}){const i=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),s=i===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:o}=t;return function f(d,p,v){d&&typeof d.toJSON=="function"&&(d=d.toJSON());const _=JSON.stringify(d,o);if(_===void 0)return _;const k=s-p.length-v;if(_.length<=k){const P=_.replace(stringOrChar,(L,G)=>G||`${L} `);if(P.length<=k)return P}if(o!=null&&(d=JSON.parse(_),o=void 0),typeof d=="object"&&d!==null){const P=p+i,L=[];let G=0,Z,W;if(Array.isArray(d)){Z="[",W="]";const{length:j}=d;for(;G<j;G++)L.push(f(d[G],P,G===j-1?0:1)||"null")}else{Z="{",W="}";const j=Object.keys(d),{length:H}=j;for(;G<H;G++){const me=j[G],$e=`${JSON.stringify(me)}: `,De=f(d[me],P,$e.length+(G===H-1?0:1));De!==void 0&&L.push($e+De)}}if(L.length>0)return[Z,i+L.join(`,
${P}`),W].join(`
${p}`)}return _}(n,"",0)}var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(n){return new Function("d","return {"+n.map(function(t,i){return JSON.stringify(t)+": d["+i+'] || ""'}).join(",")+"}")}function customConverter(n,t){var i=objectConverter(n);return function(s,o){return t(i(s),o,n)}}function inferColumns(n){var t=Object.create(null),i=[];return n.forEach(function(s){for(var o in s)o in t||i.push(t[o]=o)}),i}function pad$2(n,t){var i=n+"",s=i.length;return s<t?new Array(t-s+1).join(0)+i:i}function formatYear$2(n){return n<0?"-"+pad$2(-n,6):n>9999?"+"+pad$2(n,6):pad$2(n,4)}function formatDate(n){var t=n.getUTCHours(),i=n.getUTCMinutes(),s=n.getUTCSeconds(),o=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":formatYear$2(n.getUTCFullYear())+"-"+pad$2(n.getUTCMonth()+1,2)+"-"+pad$2(n.getUTCDate(),2)+(o?"T"+pad$2(t,2)+":"+pad$2(i,2)+":"+pad$2(s,2)+"."+pad$2(o,3)+"Z":s?"T"+pad$2(t,2)+":"+pad$2(i,2)+":"+pad$2(s,2)+"Z":i||t?"T"+pad$2(t,2)+":"+pad$2(i,2)+"Z":"")}function dsvFormat(n){var t=new RegExp('["'+n+`
\r]`),i=n.charCodeAt(0);function s(P,L){var G,Z,W=o(P,function(j,H){if(G)return G(j,H-1);Z=j,G=L?customConverter(j,L):objectConverter(j)});return W.columns=Z||[],W}function o(P,L){var G=[],Z=P.length,W=0,j=0,H,me=Z<=0,$e=!1;P.charCodeAt(Z-1)===NEWLINE&&--Z,P.charCodeAt(Z-1)===RETURN&&--Z;function De(){if(me)return EOF;if($e)return $e=!1,EOL;var Ce,Me=W,_n;if(P.charCodeAt(Me)===QUOTE){for(;W++<Z&&P.charCodeAt(W)!==QUOTE||P.charCodeAt(++W)===QUOTE;);return(Ce=W)>=Z?me=!0:(_n=P.charCodeAt(W++))===NEWLINE?$e=!0:_n===RETURN&&($e=!0,P.charCodeAt(W)===NEWLINE&&++W),P.slice(Me+1,Ce-1).replace(/""/g,'"')}for(;W<Z;){if((_n=P.charCodeAt(Ce=W++))===NEWLINE)$e=!0;else if(_n===RETURN)$e=!0,P.charCodeAt(W)===NEWLINE&&++W;else if(_n!==i)continue;return P.slice(Me,Ce)}return me=!0,P.slice(Me,Z)}for(;(H=De())!==EOF;){for(var le=[];H!==EOL&&H!==EOF;)le.push(H),H=De();L&&(le=L(le,j++))==null||G.push(le)}return G}function f(P,L){return P.map(function(G){return L.map(function(Z){return k(G[Z])}).join(n)})}function d(P,L){return L==null&&(L=inferColumns(P)),[L.map(k).join(n)].concat(f(P,L)).join(`
`)}function p(P,L){return L==null&&(L=inferColumns(P)),f(P,L).join(`
`)}function v(P){return P.map(_).join(`
`)}function _(P){return P.map(k).join(n)}function k(P){return P==null?"":P instanceof Date?formatDate(P):t.test(P+="")?'"'+P.replace(/"/g,'""')+'"':P}return{parse:s,parseRows:o,format:d,formatBody:p,formatRows:v,formatRow:_,formatValue:k}}function identity$6(n){return n}function transform$3(n){if(n==null)return identity$6;var t,i,s=n.scale[0],o=n.scale[1],f=n.translate[0],d=n.translate[1];return function(p,v){v||(t=i=0);var _=2,k=p.length,P=new Array(k);for(P[0]=(t+=p[0])*s+f,P[1]=(i+=p[1])*o+d;_<k;)P[_]=p[_],++_;return P}}function reverse$2(n,t){for(var i,s=n.length,o=s-t;o<--s;)i=n[o],n[o++]=n[s],n[s]=i}function feature(n,t){return typeof t=="string"&&(t=n.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(i){return feature$1(n,i)})}:feature$1(n,t)}function feature$1(n,t){var i=t.id,s=t.bbox,o=t.properties==null?{}:t.properties,f=object$2(n,t);return i==null&&s==null?{type:"Feature",properties:o,geometry:f}:s==null?{type:"Feature",id:i,properties:o,geometry:f}:{type:"Feature",id:i,bbox:s,properties:o,geometry:f}}function object$2(n,t){var i=transform$3(n.transform),s=n.arcs;function o(k,P){P.length&&P.pop();for(var L=s[k<0?~k:k],G=0,Z=L.length;G<Z;++G)P.push(i(L[G],G));k<0&&reverse$2(P,Z)}function f(k){return i(k)}function d(k){for(var P=[],L=0,G=k.length;L<G;++L)o(k[L],P);return P.length<2&&P.push(P[0]),P}function p(k){for(var P=d(k);P.length<4;)P.push(P[0]);return P}function v(k){return k.map(p)}function _(k){var P=k.type,L;switch(P){case"GeometryCollection":return{type:P,geometries:k.geometries.map(_)};case"Point":L=f(k.coordinates);break;case"MultiPoint":L=k.coordinates.map(f);break;case"LineString":L=d(k.arcs);break;case"MultiLineString":L=k.arcs.map(d);break;case"Polygon":L=v(k.arcs);break;case"MultiPolygon":L=k.arcs.map(v);break;default:return null}return{type:P,coordinates:L}}return _(t)}function stitch(n,t){var i={},s={},o={},f=[],d=-1;t.forEach(function(_,k){var P=n.arcs[_<0?~_:_],L;P.length<3&&!P[1][0]&&!P[1][1]&&(L=t[++d],t[d]=_,t[k]=L)}),t.forEach(function(_){var k=p(_),P=k[0],L=k[1],G,Z;if(G=o[P])if(delete o[G.end],G.push(_),G.end=L,Z=s[L]){delete s[Z.start];var W=Z===G?G:G.concat(Z);s[W.start=G.start]=o[W.end=Z.end]=W}else s[G.start]=o[G.end]=G;else if(G=s[L])if(delete s[G.start],G.unshift(_),G.start=P,Z=o[P]){delete o[Z.end];var j=Z===G?G:Z.concat(G);s[j.start=Z.start]=o[j.end=G.end]=j}else s[G.start]=o[G.end]=G;else G=[_],s[G.start=P]=o[G.end=L]=G});function p(_){var k=n.arcs[_<0?~_:_],P=k[0],L;return n.transform?(L=[0,0],k.forEach(function(G){L[0]+=G[0],L[1]+=G[1]})):L=k[k.length-1],_<0?[L,P]:[P,L]}function v(_,k){for(var P in _){var L=_[P];delete k[L.start],delete L.start,delete L.end,L.forEach(function(G){i[G<0?~G:G]=1}),f.push(L)}}return v(o,s),v(s,o),t.forEach(function(_){i[_<0?~_:_]||f.push([_])}),f}function mesh(n){return object$2(n,meshArcs.apply(this,arguments))}function meshArcs(n,t,i){var s,o,f;if(arguments.length>1)s=extractArcs(n,t,i);else for(o=0,s=new Array(f=n.arcs.length);o<f;++o)s[o]=o;return{type:"MultiLineString",arcs:stitch(n,s)}}function extractArcs(n,t,i){var s=[],o=[],f;function d(P){var L=P<0?~P:P;(o[L]||(o[L]=[])).push({i:P,g:f})}function p(P){P.forEach(d)}function v(P){P.forEach(p)}function _(P){P.forEach(v)}function k(P){switch(f=P,P.type){case"GeometryCollection":P.geometries.forEach(k);break;case"LineString":p(P.arcs);break;case"MultiLineString":case"Polygon":v(P.arcs);break;case"MultiPolygon":_(P.arcs);break}}return k(t),o.forEach(i==null?function(P){s.push(P[0].i)}:function(P){i(P[0].g,P[P.length-1].g)&&s.push(P[0].i)}),s}class InternMap extends Map{constructor(t,i=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[s,o]of t)this.set(s,o)}get(t){return super.get(intern_get(this,t))}has(t){return super.has(intern_get(this,t))}set(t,i){return super.set(intern_set(this,t),i)}delete(t){return super.delete(intern_delete(this,t))}}class InternSet extends Set{constructor(t,i=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const s of t)this.add(s)}has(t){return super.has(intern_get(this,t))}add(t){return super.add(intern_set(this,t))}delete(t){return super.delete(intern_delete(this,t))}}function intern_get({_intern:n,_key:t},i){const s=t(i);return n.has(s)?n.get(s):i}function intern_set({_intern:n,_key:t},i){const s=t(i);return n.has(s)?n.get(s):(n.set(s,i),i)}function intern_delete({_intern:n,_key:t},i){const s=t(i);return n.has(s)&&(i=n.get(i),n.delete(s)),i}function keyof(n){return n!==null&&typeof n=="object"?n.valueOf():n}const e10$5=Math.sqrt(50),e5$6=Math.sqrt(10),e2$6=Math.sqrt(2);function tickSpec$4(n,t,i){const s=(t-n)/Math.max(0,i),o=Math.floor(Math.log10(s)),f=s/Math.pow(10,o),d=f>=e10$5?10:f>=e5$6?5:f>=e2$6?2:1;let p,v,_;return o<0?(_=Math.pow(10,-o)/d,p=Math.round(n*_),v=Math.round(t*_),p/_<n&&++p,v/_>t&&--v,_=-_):(_=Math.pow(10,o)*d,p=Math.round(n/_),v=Math.round(t/_),p*_<n&&++p,v*_>t&&--v),v<p&&.5<=i&&i<2?tickSpec$4(n,t,i*2):[p,v,_]}function tickIncrement$4(n,t,i){return t=+t,n=+n,i=+i,tickSpec$4(n,t,i)[2]}function tickStep$5(n,t,i){t=+t,n=+n,i=+i;const s=t<n,o=s?tickIncrement$4(t,n,i):tickIncrement$4(n,t,i);return(s?-1:1)*(o<0?1/-o:o)}function formatDecimal(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function formatDecimalParts(n,t){if((i=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var i,s=n.slice(0,i);return[s.length>1?s[0]+s.slice(2):s,+n.slice(i+1)]}function exponent(n){return n=formatDecimalParts(Math.abs(n)),n?n[1]:NaN}function formatGroup(n,t){return function(i,s){for(var o=i.length,f=[],d=0,p=n[0],v=0;o>0&&p>0&&(v+p+1>s&&(p=Math.max(1,s-v)),f.push(i.substring(o-=p,o+p)),!((v+=p+1)>s));)p=n[d=(d+1)%n.length];return f.reverse().join(t)}}function formatNumerals(n){return function(t){return t.replace(/[0-9]/g,function(i){return n[+i]})}}var re$2=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(n){if(!(t=re$2.exec(n)))throw new Error("invalid format: "+n);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(n){e:for(var t=n.length,i=1,s=-1,o;i<t;++i)switch(n[i]){case".":s=o=i;break;case"0":s===0&&(s=i),o=i;break;default:if(!+n[i])break e;s>0&&(s=0);break}return s>0?n.slice(0,s)+n.slice(o+1):n}var prefixExponent;function formatPrefixAuto(n,t){var i=formatDecimalParts(n,t);if(!i)return n+"";var s=i[0],o=i[1],f=o-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,d=s.length;return f===d?s:f>d?s+new Array(f-d+1).join("0"):f>0?s.slice(0,f)+"."+s.slice(f):"0."+new Array(1-f).join("0")+formatDecimalParts(n,Math.max(0,t+f-1))[0]}function formatRounded(n,t){var i=formatDecimalParts(n,t);if(!i)return n+"";var s=i[0],o=i[1];return o<0?"0."+new Array(-o).join("0")+s:s.length>o+1?s.slice(0,o+1)+"."+s.slice(o+1):s+new Array(o-s.length+2).join("0")}const formatTypes={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:formatDecimal,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>formatRounded(n*100,t),r:formatRounded,s:formatPrefixAuto,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function identity$5(n){return n}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$2(n){var t=n.grouping===void 0||n.thousands===void 0?identity$5:formatGroup(map$1.call(n.grouping,Number),n.thousands+""),i=n.currency===void 0?"":n.currency[0]+"",s=n.currency===void 0?"":n.currency[1]+"",o=n.decimal===void 0?".":n.decimal+"",f=n.numerals===void 0?identity$5:formatNumerals(map$1.call(n.numerals,String)),d=n.percent===void 0?"%":n.percent+"",p=n.minus===void 0?"âˆ’":n.minus+"",v=n.nan===void 0?"NaN":n.nan+"";function _(P){P=formatSpecifier(P);var L=P.fill,G=P.align,Z=P.sign,W=P.symbol,j=P.zero,H=P.width,me=P.comma,$e=P.precision,De=P.trim,le=P.type;le==="n"?(me=!0,le="g"):formatTypes[le]||($e===void 0&&($e=12),De=!0,le="g"),(j||L==="0"&&G==="=")&&(j=!0,L="0",G="=");var Ce=W==="$"?i:W==="#"&&/[boxX]/.test(le)?"0"+le.toLowerCase():"",Me=W==="$"?s:/[%p]/.test(le)?d:"",_n=formatTypes[le],_i=/[defgprs%]/.test(le);$e=$e===void 0?6:/[gprs]/.test(le)?Math.max(1,Math.min(21,$e)):Math.max(0,Math.min(20,$e));function ll(_l){var oa=Ce,Ru=Me,ga,_s,Sa;if(le==="c")Ru=_n(_l)+Ru,_l="";else{_l=+_l;var Ra=_l<0||1/_l<0;if(_l=isNaN(_l)?v:_n(Math.abs(_l),$e),De&&(_l=formatTrim(_l)),Ra&&+_l==0&&Z!=="+"&&(Ra=!1),oa=(Ra?Z==="("?Z:p:Z==="-"||Z==="("?"":Z)+oa,Ru=(le==="s"?prefixes[8+prefixExponent/3]:"")+Ru+(Ra&&Z==="("?")":""),_i){for(ga=-1,_s=_l.length;++ga<_s;)if(Sa=_l.charCodeAt(ga),48>Sa||Sa>57){Ru=(Sa===46?o+_l.slice(ga+1):_l.slice(ga))+Ru,_l=_l.slice(0,ga);break}}}me&&!j&&(_l=t(_l,1/0));var Da=oa.length+_l.length+Ru.length,Fa=Da<H?new Array(H-Da+1).join(L):"";switch(me&&j&&(_l=t(Fa+_l,Fa.length?H-Ru.length:1/0),Fa=""),G){case"<":_l=oa+_l+Ru+Fa;break;case"=":_l=oa+Fa+_l+Ru;break;case"^":_l=Fa.slice(0,Da=Fa.length>>1)+oa+_l+Ru+Fa.slice(Da);break;default:_l=Fa+oa+_l+Ru;break}return f(_l)}return ll.toString=function(){return P+""},ll}function k(P,L){var G=_((P=formatSpecifier(P),P.type="f",P)),Z=Math.max(-8,Math.min(8,Math.floor(exponent(L)/3)))*3,W=Math.pow(10,-Z),j=prefixes[8+Z/3];return function(H){return G(W*H)+j}}return{format:_,formatPrefix:k}}var locale$3,format$3,formatPrefix;defaultLocale$3({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$3(n){return locale$3=formatLocale$2(n),format$3=locale$3.format,formatPrefix=locale$3.formatPrefix,locale$3}function precisionFixed(n){return Math.max(0,-exponent(Math.abs(n)))}function precisionPrefix(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))*3-exponent(Math.abs(n)))}function precisionRound(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,exponent(t)-exponent(n))+1}const t0$5=new Date,t1$4=new Date;function timeInterval$1(n,t,i,s){function o(f){return n(f=arguments.length===0?new Date:new Date(+f)),f}return o.floor=f=>(n(f=new Date(+f)),f),o.ceil=f=>(n(f=new Date(f-1)),t(f,1),n(f),f),o.round=f=>{const d=o(f),p=o.ceil(f);return f-d<p-f?d:p},o.offset=(f,d)=>(t(f=new Date(+f),d==null?1:Math.floor(d)),f),o.range=(f,d,p)=>{const v=[];if(f=o.ceil(f),p=p==null?1:Math.floor(p),!(f<d)||!(p>0))return v;let _;do v.push(_=new Date(+f)),t(f,p),n(f);while(_<f&&f<d);return v},o.filter=f=>timeInterval$1(d=>{if(d>=d)for(;n(d),!f(d);)d.setTime(d-1)},(d,p)=>{if(d>=d)if(p<0)for(;++p<=0;)for(;t(d,-1),!f(d););else for(;--p>=0;)for(;t(d,1),!f(d););}),i&&(o.count=(f,d)=>(t0$5.setTime(+f),t1$4.setTime(+d),n(t0$5),n(t1$4),Math.floor(i(t0$5,t1$4))),o.every=f=>(f=Math.floor(f),!isFinite(f)||!(f>0)?null:f>1?o.filter(s?d=>s(d)%f===0:d=>o.count(0,d)%f===0):o)),o}const millisecond$1=timeInterval$1(()=>{},(n,t)=>{n.setTime(+n+t)},(n,t)=>t-n);millisecond$1.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?timeInterval$1(t=>{t.setTime(Math.floor(t/n)*n)},(t,i)=>{t.setTime(+t+i*n)},(t,i)=>(i-t)/n):millisecond$1);millisecond$1.range;const durationSecond$2=1e3,durationMinute$2=durationSecond$2*60,durationHour$2=durationMinute$2*60,durationDay$2=durationHour$2*24,durationWeek$2=durationDay$2*7,second$1=timeInterval$1(n=>{n.setTime(n-n.getMilliseconds())},(n,t)=>{n.setTime(+n+t*durationSecond$2)},(n,t)=>(t-n)/durationSecond$2,n=>n.getUTCSeconds());second$1.range;const timeMinute=timeInterval$1(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*durationSecond$2)},(n,t)=>{n.setTime(+n+t*durationMinute$2)},(n,t)=>(t-n)/durationMinute$2,n=>n.getMinutes());timeMinute.range;const utcMinute$1=timeInterval$1(n=>{n.setUTCSeconds(0,0)},(n,t)=>{n.setTime(+n+t*durationMinute$2)},(n,t)=>(t-n)/durationMinute$2,n=>n.getUTCMinutes());utcMinute$1.range;const timeHour=timeInterval$1(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*durationSecond$2-n.getMinutes()*durationMinute$2)},(n,t)=>{n.setTime(+n+t*durationHour$2)},(n,t)=>(t-n)/durationHour$2,n=>n.getHours());timeHour.range;const utcHour$1=timeInterval$1(n=>{n.setUTCMinutes(0,0,0)},(n,t)=>{n.setTime(+n+t*durationHour$2)},(n,t)=>(t-n)/durationHour$2,n=>n.getUTCHours());utcHour$1.range;const timeDay=timeInterval$1(n=>n.setHours(0,0,0,0),(n,t)=>n.setDate(n.getDate()+t),(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*durationMinute$2)/durationDay$2,n=>n.getDate()-1);timeDay.range;const utcDay$1=timeInterval$1(n=>{n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t)},(n,t)=>(t-n)/durationDay$2,n=>n.getUTCDate()-1);utcDay$1.range;const unixDay=timeInterval$1(n=>{n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t)},(n,t)=>(t-n)/durationDay$2,n=>Math.floor(n/durationDay$2));unixDay.range;function timeWeekday(n){return timeInterval$1(t=>{t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute$2)/durationWeek$2)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday$1(n){return timeInterval$1(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/durationWeek$2)}const utcSunday$1=utcWeekday$1(0),utcMonday$1=utcWeekday$1(1),utcTuesday$1=utcWeekday$1(2),utcWednesday$1=utcWeekday$1(3),utcThursday$1=utcWeekday$1(4),utcFriday$1=utcWeekday$1(5),utcSaturday$1=utcWeekday$1(6);utcSunday$1.range;utcMonday$1.range;utcTuesday$1.range;utcWednesday$1.range;utcThursday$1.range;utcFriday$1.range;utcSaturday$1.range;const timeMonth=timeInterval$1(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,t)=>{n.setMonth(n.getMonth()+t)},(n,t)=>t.getMonth()-n.getMonth()+(t.getFullYear()-n.getFullYear())*12,n=>n.getMonth());timeMonth.range;const utcMonth$1=timeInterval$1(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCMonth(n.getUTCMonth()+t)},(n,t)=>t.getUTCMonth()-n.getUTCMonth()+(t.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());utcMonth$1.range;const timeYear=timeInterval$1(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t)},(n,t)=>t.getFullYear()-n.getFullYear(),n=>n.getFullYear());timeYear.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:timeInterval$1(t=>{t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*n)});timeYear.range;const utcYear$1=timeInterval$1(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t)},(n,t)=>t.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());utcYear$1.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:timeInterval$1(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*n)});utcYear$1.range;function ascending$7(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function descending$5(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function bisector$5(n){let t,i,s;n.length!==2?(t=ascending$7,i=(p,v)=>ascending$7(n(p),v),s=(p,v)=>n(p)-v):(t=n===ascending$7||n===descending$5?n:zero$8,i=n,s=n);function o(p,v,_=0,k=p.length){if(_<k){if(t(v,v)!==0)return k;do{const P=_+k>>>1;i(p[P],v)<0?_=P+1:k=P}while(_<k)}return _}function f(p,v,_=0,k=p.length){if(_<k){if(t(v,v)!==0)return k;do{const P=_+k>>>1;i(p[P],v)<=0?_=P+1:k=P}while(_<k)}return _}function d(p,v,_=0,k=p.length){const P=o(p,v,_,k-1);return P>_&&s(p[P-1],v)>-s(p[P],v)?P-1:P}return{left:o,center:d,right:f}}function zero$8(){return 0}const e10$4=Math.sqrt(50),e5$5=Math.sqrt(10),e2$5=Math.sqrt(2);function tickSpec$3(n,t,i){const s=(t-n)/Math.max(0,i),o=Math.floor(Math.log10(s)),f=s/Math.pow(10,o),d=f>=e10$4?10:f>=e5$5?5:f>=e2$5?2:1;let p,v,_;return o<0?(_=Math.pow(10,-o)/d,p=Math.round(n*_),v=Math.round(t*_),p/_<n&&++p,v/_>t&&--v,_=-_):(_=Math.pow(10,o)*d,p=Math.round(n/_),v=Math.round(t/_),p*_<n&&++p,v*_>t&&--v),v<p&&.5<=i&&i<2?tickSpec$3(n,t,i*2):[p,v,_]}function tickIncrement$3(n,t,i){return t=+t,n=+n,i=+i,tickSpec$3(n,t,i)[2]}function tickStep$4(n,t,i){t=+t,n=+n,i=+i;const s=t<n,o=s?tickIncrement$3(t,n,i):tickIncrement$3(n,t,i);return(s?-1:1)*(o<0?1/-o:o)}const YEAR="year",QUARTER="quarter",MONTH="month",WEEK="week",DATE="date",DAY="day",DAYOFYEAR="dayofyear",HOURS="hours",MINUTES="minutes",SECONDS="seconds",MILLISECONDS="milliseconds",TIME_UNITS=[YEAR,QUARTER,MONTH,WEEK,DATE,DAY,DAYOFYEAR,HOURS,MINUTES,SECONDS,MILLISECONDS],UNITS=TIME_UNITS.reduce((n,t,i)=>(n[t]=1+i,n),{});function timeUnits(n){const t=array$5(n).slice(),i={};return t.length||error$1("Missing time unit."),t.forEach(o=>{has$1(UNITS,o)?i[o]=1:error$1(`Invalid time unit: ${o}.`)}),(i[WEEK]||i[DAY]?1:0)+(i[QUARTER]||i[MONTH]||i[DATE]?1:0)+(i[DAYOFYEAR]?1:0)>1&&error$1(`Incompatible time units: ${n}`),t.sort((o,f)=>UNITS[o]-UNITS[f]),t}const defaultSpecifiers={[YEAR]:"%Y ",[QUARTER]:"Q%q ",[MONTH]:"%b ",[DATE]:"%d ",[WEEK]:"W%U ",[DAY]:"%a ",[DAYOFYEAR]:"%j ",[HOURS]:"%H:00",[MINUTES]:"00:%M",[SECONDS]:":%S",[MILLISECONDS]:".%L",[`${YEAR}-${MONTH}`]:"%Y-%m ",[`${YEAR}-${MONTH}-${DATE}`]:"%Y-%m-%d ",[`${HOURS}-${MINUTES}`]:"%H:%M"};function timeUnitSpecifier(n,t){const i=extend$3({},defaultSpecifiers,t),s=timeUnits(n),o=s.length;let f="",d=0,p,v;for(d=0;d<o;)for(p=s.length;p>d;--p)if(v=s.slice(d,p).join("-"),i[v]!=null){f+=i[v],d=p;break}return f.trim()}const t0$4=new Date;function localYear(n){return t0$4.setFullYear(n),t0$4.setMonth(0),t0$4.setDate(1),t0$4.setHours(0,0,0,0),t0$4}function dayofyear(n){return localDayOfYear(new Date(n))}function week(n){return localWeekNum(new Date(n))}function localDayOfYear(n){return timeDay.count(localYear(n.getFullYear())-1,n)}function localWeekNum(n){return timeSunday.count(localYear(n.getFullYear())-1,n)}function localFirst(n){return localYear(n).getDay()}function localDate$2(n,t,i,s,o,f,d){if(0<=n&&n<100){const p=new Date(-1,t,i,s,o,f,d);return p.setFullYear(n),p}return new Date(n,t,i,s,o,f,d)}function utcdayofyear(n){return utcDayOfYear(new Date(n))}function utcweek(n){return utcWeekNum(new Date(n))}function utcDayOfYear(n){const t=Date.UTC(n.getUTCFullYear(),0,1);return utcDay$1.count(t-1,n)}function utcWeekNum(n){const t=Date.UTC(n.getUTCFullYear(),0,1);return utcSunday$1.count(t-1,n)}function utcFirst(n){return t0$4.setTime(Date.UTC(n,0,1)),t0$4.getUTCDay()}function utcDate$2(n,t,i,s,o,f,d){if(0<=n&&n<100){const p=new Date(Date.UTC(-1,t,i,s,o,f,d));return p.setUTCFullYear(i.y),p}return new Date(Date.UTC(n,t,i,s,o,f,d))}function floor$4(n,t,i,s,o){const f=t||1,d=peek$2(n),p=(H,me,$e)=>($e=$e||H,getUnit(i[$e],s[$e],H===d&&f,me)),v=new Date,_=toSet(n),k=_[YEAR]?p(YEAR):constant$6(2012),P=_[MONTH]?p(MONTH):_[QUARTER]?p(QUARTER):zero$9,L=_[WEEK]&&_[DAY]?p(DAY,1,WEEK+DAY):_[WEEK]?p(WEEK,1):_[DAY]?p(DAY,1):_[DATE]?p(DATE,1):_[DAYOFYEAR]?p(DAYOFYEAR,1):one$3,G=_[HOURS]?p(HOURS):zero$9,Z=_[MINUTES]?p(MINUTES):zero$9,W=_[SECONDS]?p(SECONDS):zero$9,j=_[MILLISECONDS]?p(MILLISECONDS):zero$9;return function(H){v.setTime(+H);const me=k(v);return o(me,P(v),L(v,me),G(v),Z(v),W(v),j(v))}}function getUnit(n,t,i,s){const o=i<=1?n:s?(f,d)=>s+i*Math.floor((n(f,d)-s)/i):(f,d)=>i*Math.floor(n(f,d)/i);return t?(f,d)=>t(o(f,d),d):o}function weekday$1(n,t,i){return t+n*7-(i+6)%7}const localGet={[YEAR]:n=>n.getFullYear(),[QUARTER]:n=>Math.floor(n.getMonth()/3),[MONTH]:n=>n.getMonth(),[DATE]:n=>n.getDate(),[HOURS]:n=>n.getHours(),[MINUTES]:n=>n.getMinutes(),[SECONDS]:n=>n.getSeconds(),[MILLISECONDS]:n=>n.getMilliseconds(),[DAYOFYEAR]:n=>localDayOfYear(n),[WEEK]:n=>localWeekNum(n),[WEEK+DAY]:(n,t)=>weekday$1(localWeekNum(n),n.getDay(),localFirst(t)),[DAY]:(n,t)=>weekday$1(1,n.getDay(),localFirst(t))},localInv={[QUARTER]:n=>3*n,[WEEK]:(n,t)=>weekday$1(n,0,localFirst(t))};function timeFloor(n,t){return floor$4(n,t||1,localGet,localInv,localDate$2)}const utcGet={[YEAR]:n=>n.getUTCFullYear(),[QUARTER]:n=>Math.floor(n.getUTCMonth()/3),[MONTH]:n=>n.getUTCMonth(),[DATE]:n=>n.getUTCDate(),[HOURS]:n=>n.getUTCHours(),[MINUTES]:n=>n.getUTCMinutes(),[SECONDS]:n=>n.getUTCSeconds(),[MILLISECONDS]:n=>n.getUTCMilliseconds(),[DAYOFYEAR]:n=>utcDayOfYear(n),[WEEK]:n=>utcWeekNum(n),[DAY]:(n,t)=>weekday$1(1,n.getUTCDay(),utcFirst(t)),[WEEK+DAY]:(n,t)=>weekday$1(utcWeekNum(n),n.getUTCDay(),utcFirst(t))},utcInv={[QUARTER]:n=>3*n,[WEEK]:(n,t)=>weekday$1(n,0,utcFirst(t))};function utcFloor(n,t){return floor$4(n,t||1,utcGet,utcInv,utcDate$2)}const timeIntervals={[YEAR]:timeYear,[QUARTER]:timeMonth.every(3),[MONTH]:timeMonth,[WEEK]:timeSunday,[DATE]:timeDay,[DAY]:timeDay,[DAYOFYEAR]:timeDay,[HOURS]:timeHour,[MINUTES]:timeMinute,[SECONDS]:second$1,[MILLISECONDS]:millisecond$1},utcIntervals={[YEAR]:utcYear$1,[QUARTER]:utcMonth$1.every(3),[MONTH]:utcMonth$1,[WEEK]:utcSunday$1,[DATE]:utcDay$1,[DAY]:utcDay$1,[DAYOFYEAR]:utcDay$1,[HOURS]:utcHour$1,[MINUTES]:utcMinute$1,[SECONDS]:second$1,[MILLISECONDS]:millisecond$1};function timeInterval(n){return timeIntervals[n]}function utcInterval(n){return utcIntervals[n]}function offset$3(n,t,i){return n?n.offset(t,i):void 0}function timeOffset(n,t,i){return offset$3(timeInterval(n),t,i)}function utcOffset(n,t,i){return offset$3(utcInterval(n),t,i)}function sequence$1(n,t,i,s){return n?n.range(t,i,s):void 0}function timeSequence(n,t,i,s){return sequence$1(timeInterval(n),t,i,s)}function utcSequence(n,t,i,s){return sequence$1(utcInterval(n),t,i,s)}const durationSecond$1=1e3,durationMinute$1=durationSecond$1*60,durationHour$1=durationMinute$1*60,durationDay$1=durationHour$1*24,durationWeek$1=durationDay$1*7,durationMonth$1=durationDay$1*30,durationYear$1=durationDay$1*365,Milli=[YEAR,MONTH,DATE,HOURS,MINUTES,SECONDS,MILLISECONDS],Seconds=Milli.slice(0,-1),Minutes=Seconds.slice(0,-1),Hours=Minutes.slice(0,-1),Day=Hours.slice(0,-1),Week=[YEAR,WEEK],Month=[YEAR,MONTH],Year=[YEAR],intervals=[[Seconds,1,durationSecond$1],[Seconds,5,5*durationSecond$1],[Seconds,15,15*durationSecond$1],[Seconds,30,30*durationSecond$1],[Minutes,1,durationMinute$1],[Minutes,5,5*durationMinute$1],[Minutes,15,15*durationMinute$1],[Minutes,30,30*durationMinute$1],[Hours,1,durationHour$1],[Hours,3,3*durationHour$1],[Hours,6,6*durationHour$1],[Hours,12,12*durationHour$1],[Day,1,durationDay$1],[Week,1,durationWeek$1],[Month,1,durationMonth$1],[Month,3,3*durationMonth$1],[Year,1,durationYear$1]];function bin$1(n){const t=n.extent,i=n.maxbins||40,s=Math.abs(span(t))/i;let o=bisector$5(p=>p[2]).right(intervals,s),f,d;return o===intervals.length?(f=Year,d=tickStep$4(t[0]/durationYear$1,t[1]/durationYear$1,i)):o?(o=intervals[s/intervals[o-1][2]<intervals[o][2]/s?o-1:o],f=o[0],d=o[1]):(f=Milli,d=Math.max(tickStep$4(t[0],t[1],i),1)),{units:f,step:d}}var t0$3=new Date,t1$3=new Date;function newInterval(n,t,i,s){function o(f){return n(f=arguments.length===0?new Date:new Date(+f)),f}return o.floor=function(f){return n(f=new Date(+f)),f},o.ceil=function(f){return n(f=new Date(f-1)),t(f,1),n(f),f},o.round=function(f){var d=o(f),p=o.ceil(f);return f-d<p-f?d:p},o.offset=function(f,d){return t(f=new Date(+f),d==null?1:Math.floor(d)),f},o.range=function(f,d,p){var v=[],_;if(f=o.ceil(f),p=p==null?1:Math.floor(p),!(f<d)||!(p>0))return v;do v.push(_=new Date(+f)),t(f,p),n(f);while(_<f&&f<d);return v},o.filter=function(f){return newInterval(function(d){if(d>=d)for(;n(d),!f(d);)d.setTime(d-1)},function(d,p){if(d>=d)if(p<0)for(;++p<=0;)for(;t(d,-1),!f(d););else for(;--p>=0;)for(;t(d,1),!f(d););})},i&&(o.count=function(f,d){return t0$3.setTime(+f),t1$3.setTime(+d),n(t0$3),n(t1$3),Math.floor(i(t0$3,t1$3))},o.every=function(f){return f=Math.floor(f),!isFinite(f)||!(f>0)?null:f>1?o.filter(s?function(d){return s(d)%f===0}:function(d){return o.count(0,d)%f===0}):o}),o}var millisecond=newInterval(function(){},function(n,t){n.setTime(+n+t)},function(n,t){return t-n});millisecond.every=function(n){return n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?newInterval(function(t){t.setTime(Math.floor(t/n)*n)},function(t,i){t.setTime(+t+i*n)},function(t,i){return(i-t)/n}):millisecond};millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365;var second=newInterval(function(n){n.setTime(n-n.getMilliseconds())},function(n,t){n.setTime(+n+t*durationSecond)},function(n,t){return(t-n)/durationSecond},function(n){return n.getUTCSeconds()});second.range;var minute=newInterval(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*durationSecond)},function(n,t){n.setTime(+n+t*durationMinute)},function(n,t){return(t-n)/durationMinute},function(n){return n.getMinutes()});minute.range;var hour=newInterval(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*durationSecond-n.getMinutes()*durationMinute)},function(n,t){n.setTime(+n+t*durationHour)},function(n,t){return(t-n)/durationHour},function(n){return n.getHours()});hour.range;var day=newInterval(n=>n.setHours(0,0,0,0),(n,t)=>n.setDate(n.getDate()+t),(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*durationMinute)/durationDay,n=>n.getDate()-1);day.range;function weekday(n){return newInterval(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},function(t,i){t.setDate(t.getDate()+i*7)},function(t,i){return(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationWeek})}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6);sunday.range;monday.range;tuesday.range;wednesday.range;thursday.range;friday.range;saturday.range;var month=newInterval(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,t){n.setMonth(n.getMonth()+t)},function(n,t){return t.getMonth()-n.getMonth()+(t.getFullYear()-n.getFullYear())*12},function(n){return n.getMonth()});month.range;var year=newInterval(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n,t){return t.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});year.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:newInterval(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,i){t.setFullYear(t.getFullYear()+i*n)})};year.range;var utcMinute=newInterval(function(n){n.setUTCSeconds(0,0)},function(n,t){n.setTime(+n+t*durationMinute)},function(n,t){return(t-n)/durationMinute},function(n){return n.getUTCMinutes()});utcMinute.range;var utcHour=newInterval(function(n){n.setUTCMinutes(0,0,0)},function(n,t){n.setTime(+n+t*durationHour)},function(n,t){return(t-n)/durationHour},function(n){return n.getUTCHours()});utcHour.range;var utcDay=newInterval(function(n){n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCDate(n.getUTCDate()+t)},function(n,t){return(t-n)/durationDay},function(n){return n.getUTCDate()-1});utcDay.range;function utcWeekday(n){return newInterval(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCDate(t.getUTCDate()+i*7)},function(t,i){return(i-t)/durationWeek})}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;var utcMonth=newInterval(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCMonth(n.getUTCMonth()+t)},function(n,t){return t.getUTCMonth()-n.getUTCMonth()+(t.getUTCFullYear()-n.getUTCFullYear())*12},function(n){return n.getUTCMonth()});utcMonth.range;var utcYear=newInterval(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)},function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});utcYear.every=function(n){return!isFinite(n=Math.floor(n))||!(n>0)?null:newInterval(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i*n)})};utcYear.range;function ascending$6(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function bisector$4(n){let t=n,i=n;n.length===1&&(t=(d,p)=>n(d)-p,i=ascendingComparator(n));function s(d,p,v,_){for(v==null&&(v=0),_==null&&(_=d.length);v<_;){const k=v+_>>>1;i(d[k],p)<0?v=k+1:_=k}return v}function o(d,p,v,_){for(v==null&&(v=0),_==null&&(_=d.length);v<_;){const k=v+_>>>1;i(d[k],p)>0?_=k:v=k+1}return v}function f(d,p,v,_){v==null&&(v=0),_==null&&(_=d.length);const k=s(d,p,v,_-1);return k>v&&t(d[k-1],p)>-t(d[k],p)?k-1:k}return{left:s,center:f,right:o}}function ascendingComparator(n){return(t,i)=>ascending$6(n(t),i)}let Adder$1=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let s=0;for(let o=0;o<this._n&&o<32;o++){const f=i[o],d=t+f,p=Math.abs(t)<Math.abs(f)?t-(d-f):f-(d-t);p&&(i[s++]=p),t=d}return i[s]=t,this._n=s+1,this}valueOf(){const t=this._partials;let i=this._n,s,o,f,d=0;if(i>0){for(d=t[--i];i>0&&(s=d,o=t[--i],d=s+o,f=o-(d-s),!f););i>0&&(f<0&&t[i-1]<0||f>0&&t[i-1]>0)&&(o=f*2,s=d+o,o==s-d&&(d=s))}return d}};var e10$3=Math.sqrt(50),e5$4=Math.sqrt(10),e2$4=Math.sqrt(2);function tickStep$3(n,t,i){var s=Math.abs(t-n)/Math.max(0,i),o=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),f=s/o;return f>=e10$3?o*=10:f>=e5$4?o*=5:f>=e2$4&&(o*=2),t<n?-o:o}function*flatten(n){for(const t of n)yield*t}function merge$2(n){return Array.from(flatten(n))}function ticker(n,t,i,s,o,f){const d=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[f,1,durationMinute],[f,5,5*durationMinute],[f,15,15*durationMinute],[f,30,30*durationMinute],[o,1,durationHour],[o,3,3*durationHour],[o,6,6*durationHour],[o,12,12*durationHour],[s,1,durationDay],[s,2,2*durationDay],[i,1,durationWeek],[t,1,durationMonth],[t,3,3*durationMonth],[n,1,durationYear]];function p(_,k,P){const L=k<_;L&&([_,k]=[k,_]);const G=P&&typeof P.range=="function"?P:v(_,k,P),Z=G?G.range(_,+k+1):[];return L?Z.reverse():Z}function v(_,k,P){const L=Math.abs(k-_)/P,G=bisector$4(([,,j])=>j).right(d,L);if(G===d.length)return n.every(tickStep$3(_/durationYear,k/durationYear,P));if(G===0)return millisecond.every(Math.max(tickStep$3(_,k,P),1));const[Z,W]=d[L/d[G-1][2]<d[G][2]/L?G-1:G];return Z.every(W)}return[p,v]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(year,month,sunday,day,hour,minute);function localDate$1(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function utcDate$1(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function newDate$1(n,t,i){return{y:n,m:t,d:i,H:0,M:0,S:0,L:0}}function formatLocale$1(n){var t=n.dateTime,i=n.date,s=n.time,o=n.periods,f=n.days,d=n.shortDays,p=n.months,v=n.shortMonths,_=formatRe$1(o),k=formatLookup$1(o),P=formatRe$1(f),L=formatLookup$1(f),G=formatRe$1(d),Z=formatLookup$1(d),W=formatRe$1(p),j=formatLookup$1(p),H=formatRe$1(v),me=formatLookup$1(v),$e={a:Ra,A:Da,b:Fa,B:Na,c:null,d:formatDayOfMonth$1,e:formatDayOfMonth$1,f:formatMicroseconds$1,g:formatYearISO$1,G:formatFullYearISO$1,H:formatHour24$1,I:formatHour12$1,j:formatDayOfYear$1,L:formatMilliseconds$1,m:formatMonthNumber$1,M:formatMinutes$1,p:_a,q:Pa,Q:formatUnixTimestamp$1,s:formatUnixTimestampSeconds$1,S:formatSeconds$1,u:formatWeekdayNumberMonday$1,U:formatWeekNumberSunday$1,V:formatWeekNumberISO$1,w:formatWeekdayNumberSunday$1,W:formatWeekNumberMonday$1,x:null,X:null,y:formatYear$1,Y:formatFullYear$1,Z:formatZone$1,"%":formatLiteralPercent$1},De={a:qc,A:uf,b:_h,B:Uh,c:null,d:formatUTCDayOfMonth$1,e:formatUTCDayOfMonth$1,f:formatUTCMicroseconds$1,g:formatUTCYearISO$1,G:formatUTCFullYearISO$1,H:formatUTCHour24$1,I:formatUTCHour12$1,j:formatUTCDayOfYear$1,L:formatUTCMilliseconds$1,m:formatUTCMonthNumber$1,M:formatUTCMinutes$1,p:Kd,q:ud,Q:formatUnixTimestamp$1,s:formatUnixTimestampSeconds$1,S:formatUTCSeconds$1,u:formatUTCWeekdayNumberMonday$1,U:formatUTCWeekNumberSunday$1,V:formatUTCWeekNumberISO$1,w:formatUTCWeekdayNumberSunday$1,W:formatUTCWeekNumberMonday$1,x:null,X:null,y:formatUTCYear$1,Y:formatUTCFullYear$1,Z:formatUTCZone$1,"%":formatLiteralPercent$1},le={a:ll,A:_l,b:oa,B:Ru,c:ga,d:parseDayOfMonth$1,e:parseDayOfMonth$1,f:parseMicroseconds$1,g:parseYear$1,G:parseFullYear$1,H:parseHour24$1,I:parseHour24$1,j:parseDayOfYear$1,L:parseMilliseconds$1,m:parseMonthNumber$1,M:parseMinutes$1,p:_i,q:parseQuarter$1,Q:parseUnixTimestamp$1,s:parseUnixTimestampSeconds$1,S:parseSeconds$1,u:parseWeekdayNumberMonday$1,U:parseWeekNumberSunday$1,V:parseWeekNumberISO$1,w:parseWeekdayNumberSunday$1,W:parseWeekNumberMonday$1,x:_s,X:Sa,y:parseYear$1,Y:parseFullYear$1,Z:parseZone$1,"%":parseLiteralPercent$1};$e.x=Ce(i,$e),$e.X=Ce(s,$e),$e.c=Ce(t,$e),De.x=Ce(i,De),De.X=Ce(s,De),De.c=Ce(t,De);function Ce(sc,Yd){return function(wg){var Pf=[],ac=-1,fc=0,nd=sc.length,a0,_1,_$;for(wg instanceof Date||(wg=new Date(+wg));++ac<nd;)sc.charCodeAt(ac)===37&&(Pf.push(sc.slice(fc,ac)),(_1=pads$1[a0=sc.charAt(++ac)])!=null?a0=sc.charAt(++ac):_1=a0==="e"?" ":"0",(_$=Yd[a0])&&(a0=_$(wg,_1)),Pf.push(a0),fc=ac+1);return Pf.push(sc.slice(fc,ac)),Pf.join("")}}function Me(sc,Yd){return function(wg){var Pf=newDate$1(1900,void 0,1),ac=_n(Pf,sc,wg+="",0),fc,nd;if(ac!=wg.length)return null;if("Q"in Pf)return new Date(Pf.Q);if("s"in Pf)return new Date(Pf.s*1e3+("L"in Pf?Pf.L:0));if(Yd&&!("Z"in Pf)&&(Pf.Z=0),"p"in Pf&&(Pf.H=Pf.H%12+Pf.p*12),Pf.m===void 0&&(Pf.m="q"in Pf?Pf.q:0),"V"in Pf){if(Pf.V<1||Pf.V>53)return null;"w"in Pf||(Pf.w=1),"Z"in Pf?(fc=utcDate$1(newDate$1(Pf.y,0,1)),nd=fc.getUTCDay(),fc=nd>4||nd===0?utcMonday.ceil(fc):utcMonday(fc),fc=utcDay.offset(fc,(Pf.V-1)*7),Pf.y=fc.getUTCFullYear(),Pf.m=fc.getUTCMonth(),Pf.d=fc.getUTCDate()+(Pf.w+6)%7):(fc=localDate$1(newDate$1(Pf.y,0,1)),nd=fc.getDay(),fc=nd>4||nd===0?monday.ceil(fc):monday(fc),fc=day.offset(fc,(Pf.V-1)*7),Pf.y=fc.getFullYear(),Pf.m=fc.getMonth(),Pf.d=fc.getDate()+(Pf.w+6)%7)}else("W"in Pf||"U"in Pf)&&("w"in Pf||(Pf.w="u"in Pf?Pf.u%7:"W"in Pf?1:0),nd="Z"in Pf?utcDate$1(newDate$1(Pf.y,0,1)).getUTCDay():localDate$1(newDate$1(Pf.y,0,1)).getDay(),Pf.m=0,Pf.d="W"in Pf?(Pf.w+6)%7+Pf.W*7-(nd+5)%7:Pf.w+Pf.U*7-(nd+6)%7);return"Z"in Pf?(Pf.H+=Pf.Z/100|0,Pf.M+=Pf.Z%100,utcDate$1(Pf)):localDate$1(Pf)}}function _n(sc,Yd,wg,Pf){for(var ac=0,fc=Yd.length,nd=wg.length,a0,_1;ac<fc;){if(Pf>=nd)return-1;if(a0=Yd.charCodeAt(ac++),a0===37){if(a0=Yd.charAt(ac++),_1=le[a0 in pads$1?Yd.charAt(ac++):a0],!_1||(Pf=_1(sc,wg,Pf))<0)return-1}else if(a0!=wg.charCodeAt(Pf++))return-1}return Pf}function _i(sc,Yd,wg){var Pf=_.exec(Yd.slice(wg));return Pf?(sc.p=k.get(Pf[0].toLowerCase()),wg+Pf[0].length):-1}function ll(sc,Yd,wg){var Pf=G.exec(Yd.slice(wg));return Pf?(sc.w=Z.get(Pf[0].toLowerCase()),wg+Pf[0].length):-1}function _l(sc,Yd,wg){var Pf=P.exec(Yd.slice(wg));return Pf?(sc.w=L.get(Pf[0].toLowerCase()),wg+Pf[0].length):-1}function oa(sc,Yd,wg){var Pf=H.exec(Yd.slice(wg));return Pf?(sc.m=me.get(Pf[0].toLowerCase()),wg+Pf[0].length):-1}function Ru(sc,Yd,wg){var Pf=W.exec(Yd.slice(wg));return Pf?(sc.m=j.get(Pf[0].toLowerCase()),wg+Pf[0].length):-1}function ga(sc,Yd,wg){return _n(sc,t,Yd,wg)}function _s(sc,Yd,wg){return _n(sc,i,Yd,wg)}function Sa(sc,Yd,wg){return _n(sc,s,Yd,wg)}function Ra(sc){return d[sc.getDay()]}function Da(sc){return f[sc.getDay()]}function Fa(sc){return v[sc.getMonth()]}function Na(sc){return p[sc.getMonth()]}function _a(sc){return o[+(sc.getHours()>=12)]}function Pa(sc){return 1+~~(sc.getMonth()/3)}function qc(sc){return d[sc.getUTCDay()]}function uf(sc){return f[sc.getUTCDay()]}function _h(sc){return v[sc.getUTCMonth()]}function Uh(sc){return p[sc.getUTCMonth()]}function Kd(sc){return o[+(sc.getUTCHours()>=12)]}function ud(sc){return 1+~~(sc.getUTCMonth()/3)}return{format:function(sc){var Yd=Ce(sc+="",$e);return Yd.toString=function(){return sc},Yd},parse:function(sc){var Yd=Me(sc+="",!1);return Yd.toString=function(){return sc},Yd},utcFormat:function(sc){var Yd=Ce(sc+="",De);return Yd.toString=function(){return sc},Yd},utcParse:function(sc){var Yd=Me(sc+="",!0);return Yd.toString=function(){return sc},Yd}}}var pads$1={"-":"",_:" ",0:"0"},numberRe$1=/^\s*\d+/,percentRe$1=/^%/,requoteRe$1=/[\\^$*+?|[\]().{}]/g;function pad$1(n,t,i){var s=n<0?"-":"",o=(s?-n:n)+"",f=o.length;return s+(f<i?new Array(i-f+1).join(t)+o:o)}function requote$1(n){return n.replace(requoteRe$1,"\\$&")}function formatRe$1(n){return new RegExp("^(?:"+n.map(requote$1).join("|")+")","i")}function formatLookup$1(n){return new Map(n.map((t,i)=>[t.toLowerCase(),i]))}function parseWeekdayNumberSunday$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+1));return s?(n.w=+s[0],i+s[0].length):-1}function parseWeekdayNumberMonday$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+1));return s?(n.u=+s[0],i+s[0].length):-1}function parseWeekNumberSunday$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+2));return s?(n.U=+s[0],i+s[0].length):-1}function parseWeekNumberISO$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+2));return s?(n.V=+s[0],i+s[0].length):-1}function parseWeekNumberMonday$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+2));return s?(n.W=+s[0],i+s[0].length):-1}function parseFullYear$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+4));return s?(n.y=+s[0],i+s[0].length):-1}function parseYear$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+2));return s?(n.y=+s[0]+(+s[0]>68?1900:2e3),i+s[0].length):-1}function parseZone$1(n,t,i){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return s?(n.Z=s[1]?0:-(s[2]+(s[3]||"00")),i+s[0].length):-1}function parseQuarter$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+1));return s?(n.q=s[0]*3-3,i+s[0].length):-1}function parseMonthNumber$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+2));return s?(n.m=s[0]-1,i+s[0].length):-1}function parseDayOfMonth$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+2));return s?(n.d=+s[0],i+s[0].length):-1}function parseDayOfYear$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+3));return s?(n.m=0,n.d=+s[0],i+s[0].length):-1}function parseHour24$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+2));return s?(n.H=+s[0],i+s[0].length):-1}function parseMinutes$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+2));return s?(n.M=+s[0],i+s[0].length):-1}function parseSeconds$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+2));return s?(n.S=+s[0],i+s[0].length):-1}function parseMilliseconds$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+3));return s?(n.L=+s[0],i+s[0].length):-1}function parseMicroseconds$1(n,t,i){var s=numberRe$1.exec(t.slice(i,i+6));return s?(n.L=Math.floor(s[0]/1e3),i+s[0].length):-1}function parseLiteralPercent$1(n,t,i){var s=percentRe$1.exec(t.slice(i,i+1));return s?i+s[0].length:-1}function parseUnixTimestamp$1(n,t,i){var s=numberRe$1.exec(t.slice(i));return s?(n.Q=+s[0],i+s[0].length):-1}function parseUnixTimestampSeconds$1(n,t,i){var s=numberRe$1.exec(t.slice(i));return s?(n.s=+s[0],i+s[0].length):-1}function formatDayOfMonth$1(n,t){return pad$1(n.getDate(),t,2)}function formatHour24$1(n,t){return pad$1(n.getHours(),t,2)}function formatHour12$1(n,t){return pad$1(n.getHours()%12||12,t,2)}function formatDayOfYear$1(n,t){return pad$1(1+day.count(year(n),n),t,3)}function formatMilliseconds$1(n,t){return pad$1(n.getMilliseconds(),t,3)}function formatMicroseconds$1(n,t){return formatMilliseconds$1(n,t)+"000"}function formatMonthNumber$1(n,t){return pad$1(n.getMonth()+1,t,2)}function formatMinutes$1(n,t){return pad$1(n.getMinutes(),t,2)}function formatSeconds$1(n,t){return pad$1(n.getSeconds(),t,2)}function formatWeekdayNumberMonday$1(n){var t=n.getDay();return t===0?7:t}function formatWeekNumberSunday$1(n,t){return pad$1(sunday.count(year(n)-1,n),t,2)}function dISO$1(n){var t=n.getDay();return t>=4||t===0?thursday(n):thursday.ceil(n)}function formatWeekNumberISO$1(n,t){return n=dISO$1(n),pad$1(thursday.count(year(n),n)+(year(n).getDay()===4),t,2)}function formatWeekdayNumberSunday$1(n){return n.getDay()}function formatWeekNumberMonday$1(n,t){return pad$1(monday.count(year(n)-1,n),t,2)}function formatYear$1(n,t){return pad$1(n.getFullYear()%100,t,2)}function formatYearISO$1(n,t){return n=dISO$1(n),pad$1(n.getFullYear()%100,t,2)}function formatFullYear$1(n,t){return pad$1(n.getFullYear()%1e4,t,4)}function formatFullYearISO$1(n,t){var i=n.getDay();return n=i>=4||i===0?thursday(n):thursday.ceil(n),pad$1(n.getFullYear()%1e4,t,4)}function formatZone$1(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad$1(t/60|0,"0",2)+pad$1(t%60,"0",2)}function formatUTCDayOfMonth$1(n,t){return pad$1(n.getUTCDate(),t,2)}function formatUTCHour24$1(n,t){return pad$1(n.getUTCHours(),t,2)}function formatUTCHour12$1(n,t){return pad$1(n.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear$1(n,t){return pad$1(1+utcDay.count(utcYear(n),n),t,3)}function formatUTCMilliseconds$1(n,t){return pad$1(n.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds$1(n,t){return formatUTCMilliseconds$1(n,t)+"000"}function formatUTCMonthNumber$1(n,t){return pad$1(n.getUTCMonth()+1,t,2)}function formatUTCMinutes$1(n,t){return pad$1(n.getUTCMinutes(),t,2)}function formatUTCSeconds$1(n,t){return pad$1(n.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday$1(n){var t=n.getUTCDay();return t===0?7:t}function formatUTCWeekNumberSunday$1(n,t){return pad$1(utcSunday.count(utcYear(n)-1,n),t,2)}function UTCdISO$1(n){var t=n.getUTCDay();return t>=4||t===0?utcThursday(n):utcThursday.ceil(n)}function formatUTCWeekNumberISO$1(n,t){return n=UTCdISO$1(n),pad$1(utcThursday.count(utcYear(n),n)+(utcYear(n).getUTCDay()===4),t,2)}function formatUTCWeekdayNumberSunday$1(n){return n.getUTCDay()}function formatUTCWeekNumberMonday$1(n,t){return pad$1(utcMonday.count(utcYear(n)-1,n),t,2)}function formatUTCYear$1(n,t){return pad$1(n.getUTCFullYear()%100,t,2)}function formatUTCYearISO$1(n,t){return n=UTCdISO$1(n),pad$1(n.getUTCFullYear()%100,t,2)}function formatUTCFullYear$1(n,t){return pad$1(n.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO$1(n,t){var i=n.getUTCDay();return n=i>=4||i===0?utcThursday(n):utcThursday.ceil(n),pad$1(n.getUTCFullYear()%1e4,t,4)}function formatUTCZone$1(){return"+0000"}function formatLiteralPercent$1(){return"%"}function formatUnixTimestamp$1(n){return+n}function formatUnixTimestampSeconds$1(n){return Math.floor(+n/1e3)}var locale$2,timeFormat$3,timeParse$1,utcFormat$2,utcParse$1;defaultLocale$2({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale$2(n){return locale$2=formatLocale$1(n),timeFormat$3=locale$2.format,timeParse$1=locale$2.parse,utcFormat$2=locale$2.utcFormat,utcParse$1=locale$2.utcParse,locale$2}function memoize(n){const t={};return i=>t[i]||(t[i]=n(i))}function trimZeroes(n,t){return i=>{const s=n(i),o=s.indexOf(t);if(o<0)return s;let f=rightmostDigit(s,o);const d=f<s.length?s.slice(f):"";for(;--f>o;)if(s[f]!=="0"){++f;break}return s.slice(0,f)+d}}function rightmostDigit(n,t){let i=n.lastIndexOf("e"),s;if(i>0)return i;for(i=n.length;--i>t;)if(s=n.charCodeAt(i),s>=48&&s<=57)return i+1}function numberLocale(n){const t=memoize(n.format),i=n.formatPrefix;return{format:t,formatPrefix:i,formatFloat(s){const o=formatSpecifier(s||",");if(o.precision==null){switch(o.precision=12,o.type){case"%":o.precision-=2;break;case"e":o.precision-=1;break}return trimZeroes(t(o),t(".1f")(1)[1])}else return t(o)},formatSpan(s,o,f,d){d=formatSpecifier(d??",f");const p=tickStep$5(s,o,f),v=Math.max(Math.abs(s),Math.abs(o));let _;if(d.precision==null)switch(d.type){case"s":return isNaN(_=precisionPrefix(p,v))||(d.precision=_),i(d,v);case"":case"e":case"g":case"p":case"r":{isNaN(_=precisionRound(p,v))||(d.precision=_-(d.type==="e"));break}case"f":case"%":{isNaN(_=precisionFixed(p))||(d.precision=_-(d.type==="%")*2);break}}return t(d)}}}let defaultNumberLocale;resetNumberFormatDefaultLocale();function resetNumberFormatDefaultLocale(){return defaultNumberLocale=numberLocale({format:format$3,formatPrefix})}function numberFormatLocale(n){return numberLocale(formatLocale$2(n))}function numberFormatDefaultLocale(n){return arguments.length?defaultNumberLocale=numberFormatLocale(n):defaultNumberLocale}function timeMultiFormat(n,t,i){i=i||{},isObject(i)||error$1(`Invalid time multi-format specifier: ${i}`);const s=t(SECONDS),o=t(MINUTES),f=t(HOURS),d=t(DATE),p=t(WEEK),v=t(MONTH),_=t(QUARTER),k=t(YEAR),P=n(i[MILLISECONDS]||".%L"),L=n(i[SECONDS]||":%S"),G=n(i[MINUTES]||"%I:%M"),Z=n(i[HOURS]||"%I %p"),W=n(i[DATE]||i[DAY]||"%a %d"),j=n(i[WEEK]||"%b %d"),H=n(i[MONTH]||"%B"),me=n(i[QUARTER]||"%B"),$e=n(i[YEAR]||"%Y");return De=>(s(De)<De?P:o(De)<De?L:f(De)<De?G:d(De)<De?Z:v(De)<De?p(De)<De?W:j:k(De)<De?_(De)<De?H:me:$e)(De)}function timeLocale(n){const t=memoize(n.format),i=memoize(n.utcFormat);return{timeFormat:s=>isString(s)?t(s):timeMultiFormat(t,timeInterval,s),utcFormat:s=>isString(s)?i(s):timeMultiFormat(i,utcInterval,s),timeParse:memoize(n.parse),utcParse:memoize(n.utcParse)}}let defaultTimeLocale;resetTimeFormatDefaultLocale();function resetTimeFormatDefaultLocale(){return defaultTimeLocale=timeLocale({format:timeFormat$3,parse:timeParse$1,utcFormat:utcFormat$2,utcParse:utcParse$1})}function timeFormatLocale(n){return timeLocale(formatLocale$1(n))}function timeFormatDefaultLocale(n){return arguments.length?defaultTimeLocale=timeFormatLocale(n):defaultTimeLocale}const createLocale=(n,t)=>extend$3({},n,t);function locale$1(n,t){const i=n?numberFormatLocale(n):numberFormatDefaultLocale(),s=t?timeFormatLocale(t):timeFormatDefaultLocale();return createLocale(i,s)}function defaultLocale$1(n,t){const i=arguments.length;return i&&i!==2&&error$1("defaultLocale expects either zero or two arguments."),i?createLocale(numberFormatDefaultLocale(n),timeFormatDefaultLocale(t)):createLocale(numberFormatDefaultLocale(),timeFormatDefaultLocale())}function resetDefaultLocale(){return resetNumberFormatDefaultLocale(),resetTimeFormatDefaultLocale(),defaultLocale$1()}const protocol_re=/^(data:|([A-Za-z]+:)?\/\/)/,allowed_re=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,whitespace_re=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,fileProtocol="file://";function loaderFactory(n,t){return i=>({options:i||{},sanitize,load:load$1,fileAccess:!1,file:fileLoader(t),http:httpLoader(n)})}async function load$1(n,t){const i=await this.sanitize(n,t),s=i.href;return i.localFile?this.file(s):this.http(s,t)}async function sanitize(n,t){t=extend$3({},this.options,t);const i=this.fileAccess,s={href:null};let o,f,d;const p=allowed_re.test(n.replace(whitespace_re,""));(n==null||typeof n!="string"||!p)&&error$1("Sanitize failure, invalid URI: "+$(n));const v=protocol_re.test(n);return(d=t.baseURL)&&!v&&(!n.startsWith("/")&&!d.endsWith("/")&&(n="/"+n),n=d+n),f=(o=n.startsWith(fileProtocol))||t.mode==="file"||t.mode!=="http"&&!v&&i,o?n=n.slice(fileProtocol.length):n.startsWith("//")&&(t.defaultProtocol==="file"?(n=n.slice(2),f=!0):n=(t.defaultProtocol||"http")+":"+n),Object.defineProperty(s,"localFile",{value:!!f}),s.href=n,t.target&&(s.target=t.target+""),t.rel&&(s.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(s.crossOrigin=t.crossOrigin+""),s}function fileLoader(n){return n?t=>new Promise((i,s)=>{n.readFile(t,(o,f)=>{o?s(o):i(f)})}):fileReject}async function fileReject(){error$1("No file system access.")}function httpLoader(n){return n?async function(t,i){const s=extend$3({},this.options.http,i),o=i&&i.response,f=await n(t,s);return f.ok?isFunction$1(f[o])?f[o]():f.text():error$1(f.status+""+f.statusText)}:httpReject}async function httpReject(){error$1("No HTTP fetch method available.")}const isValid=n=>n!=null&&n===n,isBoolean$1=n=>n==="true"||n==="false"||n===!0||n===!1,isDate=n=>!Number.isNaN(Date.parse(n)),isNumber=n=>!Number.isNaN(+n)&&!(n instanceof Date),isInteger$1=n=>isNumber(n)&&Number.isInteger(+n),typeParsers={boolean:toBoolean,integer:toNumber,number:toNumber,date:toDate,string:toString,unknown:identity$7},typeTests=[isBoolean$1,isInteger$1,isNumber,isDate],typeList=["boolean","integer","number","date"];function inferType(n,t){if(!n||!n.length)return"unknown";const i=n.length,s=typeTests.length,o=typeTests.map((f,d)=>d+1);for(let f=0,d=0,p,v;f<i;++f)for(v=t?n[f][t]:n[f],p=0;p<s;++p)if(o[p]&&isValid(v)&&!typeTests[p](v)&&(o[p]=0,++d,d===typeTests.length))return"string";return typeList[o.reduce((f,d)=>f===0?d:f,0)-1]}function inferTypes(n,t){return t.reduce((i,s)=>(i[s]=inferType(n,s),i),{})}function delimitedFormat(n){const t=function(i,s){const o={delimiter:n};return dsv(i,s?extend$3(s,o):o)};return t.responseType="text",t}function dsv(n,t){return t.header&&(n=t.header.map($).join(t.delimiter)+`
`+n),dsvFormat(t.delimiter).parse(n+"")}dsv.responseType="text";function isBuffer(n){return typeof Buffer=="function"&&isFunction$1(Buffer.isBuffer)?Buffer.isBuffer(n):!1}function json(n,t){const i=t&&t.property?field$1(t.property):identity$7;return isObject(n)&&!isBuffer(n)?parseJSON(i(n),t):i(JSON.parse(n))}json.responseType="json";function parseJSON(n,t){return!isArray(n)&&isIterable(n)&&(n=[...n]),t&&t.copy?JSON.parse(JSON.stringify(n)):n}const filters={interior:(n,t)=>n!==t,exterior:(n,t)=>n===t};function topojson(n,t){let i,s,o,f;return n=json(n,t),t&&t.feature?(i=feature,o=t.feature):t&&t.mesh?(i=mesh,o=t.mesh,f=filters[t.filter]):error$1("Missing TopoJSON feature or mesh parameter."),s=(s=n.objects[o])?i(n,s,f):error$1("Invalid TopoJSON object: "+o),s&&s.features||[s]}topojson.responseType="json";const format$2={dsv,csv:delimitedFormat(","),tsv:delimitedFormat("	"),json,topojson};function formats$1(n,t){return arguments.length>1?(format$2[n]=t,this):has$1(format$2,n)?format$2[n]:null}function responseType(n){const t=formats$1(n);return t&&t.responseType||"text"}function read(n,t,i,s){t=t||{};const o=formats$1(t.type||"json");return o||error$1("Unknown data format type: "+t.type),n=o(n,t),t.parse&&parse$6(n,t.parse,i,s),has$1(n,"columns")&&delete n.columns,n}function parse$6(n,t,i,s){if(!n.length)return;const o=timeFormatDefaultLocale();i=i||o.timeParse,s=s||o.utcParse;let f=n.columns||Object.keys(n[0]),d,p,v,_,k,P;t==="auto"&&(t=inferTypes(n,f)),f=Object.keys(t);const L=f.map(G=>{const Z=t[G];let W,j;if(Z&&(Z.startsWith("date:")||Z.startsWith("utc:")))return W=Z.split(/:(.+)?/,2),j=W[1],(j[0]==="'"&&j[j.length-1]==="'"||j[0]==='"'&&j[j.length-1]==='"')&&(j=j.slice(1,-1)),(W[0]==="utc"?s:i)(j);if(!typeParsers[Z])throw Error("Illegal format pattern: "+G+":"+Z);return typeParsers[Z]});for(v=0,k=n.length,P=f.length;v<k;++v)for(d=n[v],_=0;_<P;++_)p=f[_],d[p]=L[_](d[p])}const loader=loaderFactory(typeof fetch<"u"&&fetch,null);function UniqueList(n){const t=n||identity$7,i=[],s={};return i.add=o=>{const f=t(o);return s[f]||(s[f]=1,i.push(o)),i},i.remove=o=>{const f=t(o);if(s[f]){s[f]=0;const d=i.indexOf(o);d>=0&&i.splice(d,1)}return i},i}async function asyncCallback(n,t){try{await t(n)}catch(i){n.error(i)}}const TUPLE_ID_KEY=Symbol("vega_id");let TUPLE_ID=1;function isTuple(n){return!!(n&&tupleid(n))}function tupleid(n){return n[TUPLE_ID_KEY]}function setid(n,t){return n[TUPLE_ID_KEY]=t,n}function ingest$1(n){const t=n===Object(n)?n:{data:n};return tupleid(t)?t:setid(t,TUPLE_ID++)}function derive(n){return rederive(n,ingest$1({}))}function rederive(n,t){for(const i in n)t[i]=n[i];return t}function replace$1(n,t){return setid(t,tupleid(n))}function stableCompare(n,t){return n?t?(i,s)=>n(i,s)||tupleid(t(i))-tupleid(t(s)):(i,s)=>n(i,s)||tupleid(i)-tupleid(s):null}function isChangeSet(n){return n&&n.constructor===changeset}function changeset(){const n=[],t=[],i=[],s=[],o=[];let f=null,d=!1;return{constructor:changeset,insert(p){const v=array$5(p),_=v.length;for(let k=0;k<_;++k)n.push(v[k]);return this},remove(p){const v=isFunction$1(p)?s:t,_=array$5(p),k=_.length;for(let P=0;P<k;++P)v.push(_[P]);return this},modify(p,v,_){const k={field:v,value:constant$6(_)};return isFunction$1(p)?(k.filter=p,o.push(k)):(k.tuple=p,i.push(k)),this},encode(p,v){return isFunction$1(p)?o.push({filter:p,field:v}):i.push({tuple:p,field:v}),this},clean(p){return f=p,this},reflow(){return d=!0,this},pulse(p,v){const _={},k={};let P,L,G,Z,W,j;for(P=0,L=v.length;P<L;++P)_[tupleid(v[P])]=1;for(P=0,L=t.length;P<L;++P)W=t[P],_[tupleid(W)]=-1;for(P=0,L=s.length;P<L;++P)Z=s[P],v.forEach(me=>{Z(me)&&(_[tupleid(me)]=-1)});for(P=0,L=n.length;P<L;++P)W=n[P],j=tupleid(W),_[j]?_[j]=1:p.add.push(ingest$1(n[P]));for(P=0,L=v.length;P<L;++P)W=v[P],_[tupleid(W)]<0&&p.rem.push(W);function H(me,$e,De){De?me[$e]=De(me):p.encode=$e,d||(k[tupleid(me)]=me)}for(P=0,L=i.length;P<L;++P)G=i[P],W=G.tuple,Z=G.field,j=_[tupleid(W)],j>0&&(H(W,Z,G.value),p.modifies(Z));for(P=0,L=o.length;P<L;++P)G=o[P],Z=G.filter,v.forEach(me=>{Z(me)&&_[tupleid(me)]>0&&H(me,G.field,G.value)}),p.modifies(G.field);if(d)p.mod=t.length||s.length?v.filter(me=>_[tupleid(me)]>0):v.slice();else for(j in k)p.mod.push(k[j]);return(f||f==null&&(t.length||s.length))&&p.clean(!0),p}}}const CACHE="_:mod:_";function Parameters(){Object.defineProperty(this,CACHE,{writable:!0,value:{}})}Parameters.prototype={set(n,t,i,s){const o=this,f=o[n],d=o[CACHE];return t!=null&&t>=0?(f[t]!==i||s)&&(f[t]=i,d[t+":"+n]=-1,d[n]=-1):(f!==i||s)&&(o[n]=i,d[n]=isArray(i)?1+i.length:-1),o},modified(n,t){const i=this[CACHE];if(arguments.length){if(isArray(n)){for(let s=0;s<n.length;++s)if(i[n[s]])return!0;return!1}}else{for(const s in i)if(i[s])return!0;return!1}return t!=null&&t>=0?t+1<i[n]||!!i[t+":"+n]:!!i[n]},clear(){return this[CACHE]={},this}};let OP_ID=0;const PULSE="pulse",NO_PARAMS=new Parameters,SKIP$1$1=1,MODIFIED=2;function Operator(n,t,i,s){this.id=++OP_ID,this.value=n,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),i&&this.parameters(i,s)}function flag(n){return function(t){const i=this.flags;return arguments.length===0?!!(i&n):(this.flags=t?i|n:i&~n,this)}}Operator.prototype={targets(){return this._targets||(this._targets=UniqueList(id$1))},set(n){return this.value!==n?(this.value=n,1):0},skip:flag(SKIP$1$1),modified:flag(MODIFIED),parameters(n,t,i){t=t!==!1;const s=this._argval=this._argval||new Parameters,o=this._argops=this._argops||[],f=[];let d,p,v,_;const k=(P,L,G)=>{G instanceof Operator?(G!==this&&(t&&G.targets().add(this),f.push(G)),o.push({op:G,name:P,index:L})):s.set(P,L,G)};for(d in n)if(p=n[d],d===PULSE)array$5(p).forEach(P=>{P instanceof Operator?P!==this&&(P.targets().add(this),f.push(P)):error$1("Pulse parameters must be operator instances.")}),this.source=p;else if(isArray(p))for(s.set(d,-1,Array(v=p.length)),_=0;_<v;++_)k(d,_,p[_]);else k(d,-1,p);return this.marshall().clear(),i&&(o.initonly=!0),f},marshall(n){const t=this._argval||NO_PARAMS,i=this._argops;let s,o,f,d;if(i){const p=i.length;for(o=0;o<p;++o)s=i[o],f=s.op,d=f.modified()&&f.stamp===n,t.set(s.name,s.index,f.value,d);if(i.initonly){for(o=0;o<p;++o)s=i[o],s.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const n=this._argops;let t,i,s,o;if(n)for(t=0,i=n.length;t<i;++t)s=n[t],o=s.op,o._targets&&o._targets.remove(this);this.pulse=null,this.source=null},evaluate(n){const t=this._update;if(t){const i=this.marshall(n.stamp),s=t.call(this,i,n);if(i.clear(),s!==this.value)this.value=s;else if(!this.modified())return n.StopPropagation}},run(n){if(n.stamp<this.stamp)return n.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(n),this.pulse=t||n}};function add$4(n,t,i,s){let o=1,f;return n instanceof Operator?f=n:n&&n.prototype instanceof Operator?f=new n:isFunction$1(n)?f=new Operator(null,n):(o=0,f=new Operator(n,t)),this.rank(f),o&&(s=i,i=t),i&&this.connect(f,f.parameters(i,s)),this.touch(f),f}function connect(n,t){const i=n.rank,s=t.length;for(let o=0;o<s;++o)if(i<t[o].rank){this.rerank(n);return}}let STREAM_ID=0;function EventStream(n,t,i){this.id=++STREAM_ID,this.value=null,i&&(this.receive=i),n&&(this._filter=n),t&&(this._apply=t)}function stream(n,t,i){return new EventStream(n,t,i)}EventStream.prototype={_filter:truthy,_apply:identity$7,targets(){return this._targets||(this._targets=UniqueList(id$1))},consume(n){return arguments.length?(this._consume=!!n,this):!!this._consume},receive(n){if(this._filter(n)){const t=this.value=this._apply(n),i=this._targets,s=i?i.length:0;for(let o=0;o<s;++o)i[o].receive(t);this._consume&&(n.preventDefault(),n.stopPropagation())}},filter(n){const t=stream(n);return this.targets().add(t),t},apply(n){const t=stream(null,n);return this.targets().add(t),t},merge(){const n=stream();this.targets().add(n);for(let t=0,i=arguments.length;t<i;++t)arguments[t].targets().add(n);return n},throttle(n){let t=-1;return this.filter(()=>{const i=Date.now();return i-t>n?(t=i,1):0})},debounce(n){const t=stream();return this.targets().add(stream(null,null,debounce(n,i=>{const s=i.dataflow;t.receive(i),s&&s.run&&s.run()}))),t},between(n,t){let i=!1;return n.targets().add(stream(null,null,()=>i=!0)),t.targets().add(stream(null,null,()=>i=!1)),this.filter(()=>i)},detach(){this._filter=truthy,this._targets=null}};function events$1(n,t,i,s){const o=this,f=stream(i,s),d=function(_){_.dataflow=o;try{f.receive(_)}catch(k){o.error(k)}finally{o.run()}};let p;typeof n=="string"&&typeof document<"u"?p=document.querySelectorAll(n):p=array$5(n);const v=p.length;for(let _=0;_<v;++_)p[_].addEventListener(t,d);return f}function parse$5(n,t){const i=this.locale();return read(n,t,i.timeParse,i.utcParse)}function ingest(n,t,i){return t=this.parse(t,i),this.pulse(n,this.changeset().insert(t))}async function request(n,t){const i=this;let s=0,o;try{o=await i.loader().load(n,{context:"dataflow",response:responseType(t&&t.type)});try{o=i.parse(o,t)}catch(f){s=-2,i.warn("Data ingestion failed",n,f)}}catch(f){s=-1,i.warn("Loading failed",n,f)}return{data:o,status:s}}async function preload(n,t,i){const s=this,o=s._pending||loadPending(s);o.requests+=1;const f=await s.request(t,i);return s.pulse(n,s.changeset().remove(truthy).insert(f.data||[])),o.done(),f}function loadPending(n){let t;const i=new Promise(s=>t=s);return i.requests=0,i.done=()=>{--i.requests===0&&(n._pending=null,t(n))},n._pending=i}const SKIP$2={skip:!0};function on$1(n,t,i,s,o){return(n instanceof Operator?onOperator:onStream)(this,n,t,i,s,o),this}function onStream(n,t,i,s,o,f){const d=extend$3({},f,SKIP$2);let p,v;isFunction$1(i)||(i=constant$6(i)),s===void 0?p=_=>n.touch(i(_)):isFunction$1(s)?(v=new Operator(null,s,o,!1),p=_=>{v.evaluate(_);const k=i(_),P=v.value;isChangeSet(P)?n.pulse(k,P,f):n.update(k,P,d)}):p=_=>n.update(i(_),s,d),t.apply(p)}function onOperator(n,t,i,s,o,f){if(s===void 0)t.targets().add(i);else{const d=f||{},p=new Operator(null,updater(i,s),o,!1);p.modified(d.force),p.rank=t.rank,t.targets().add(p),i&&(p.skip(!0),p.value=i.value,p.targets().add(i),n.connect(i,[p]))}}function updater(n,t){return t=isFunction$1(t)?t:constant$6(t),n?function(i,s){const o=t(i,s);return n.skip()||(n.skip(o!==this.value).value=o),o}:t}function rank(n){n.rank=++this._rank}function rerank(n){const t=[n];let i,s,o;for(;t.length;)if(this.rank(i=t.pop()),s=i._targets)for(o=s.length;--o>=0;)t.push(i=s[o]),i===n&&error$1("Cycle detected in dataflow graph.")}const StopPropagation={},ADD=1,REM=2,MOD$1=4,ADD_REM=ADD|REM,ADD_MOD=ADD|MOD$1,ALL=ADD|REM|MOD$1,REFLOW=8,SOURCE=16,NO_SOURCE=32,NO_FIELDS=64;function Pulse(n,t,i){this.dataflow=n,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=i||null}function materialize(n,t){const i=[];return visitArray(n,t,s=>i.push(s)),i}function filter$1(n,t){const i={};return n.visit(t,s=>{i[tupleid(s)]=1}),s=>i[tupleid(s)]?null:s}function addFilter(n,t){return n?(i,s)=>n(i,s)&&t(i,s):t}Pulse.prototype={StopPropagation,ADD,REM,MOD:MOD$1,ADD_REM,ADD_MOD,ALL,REFLOW,SOURCE,NO_SOURCE,NO_FIELDS,fork(n){return new Pulse(this.dataflow).init(this,n)},clone(){const n=this.fork(ALL);return n.add=n.add.slice(),n.rem=n.rem.slice(),n.mod=n.mod.slice(),n.source&&(n.source=n.source.slice()),n.materialize(ALL|SOURCE)},addAll(){let n=this;return!n.source||n.add===n.rem||!n.rem.length&&n.source.length===n.add.length||(n=new Pulse(this.dataflow).init(this),n.add=n.source,n.rem=[]),n},init(n,t){const i=this;return i.stamp=n.stamp,i.encode=n.encode,n.fields&&!(t&NO_FIELDS)&&(i.fields=n.fields),t&ADD?(i.addF=n.addF,i.add=n.add):(i.addF=null,i.add=[]),t&REM?(i.remF=n.remF,i.rem=n.rem):(i.remF=null,i.rem=[]),t&MOD$1?(i.modF=n.modF,i.mod=n.mod):(i.modF=null,i.mod=[]),t&NO_SOURCE?(i.srcF=null,i.source=null):(i.srcF=n.srcF,i.source=n.source,n.cleans&&(i.cleans=n.cleans)),i},runAfter(n){this.dataflow.runAfter(n)},changed(n){const t=n||ALL;return t&ADD&&this.add.length||t&REM&&this.rem.length||t&MOD$1&&this.mod.length},reflow(n){if(n)return this.fork(ALL).reflow();const t=this.add.length,i=this.source&&this.source.length;return i&&i!==t&&(this.mod=this.source,t&&this.filter(MOD$1,filter$1(this,ADD))),this},clean(n){return arguments.length?(this.cleans=!!n,this):this.cleans},modifies(n){const t=this.fields||(this.fields={});return isArray(n)?n.forEach(i=>t[i]=!0):t[n]=!0,this},modified(n,t){const i=this.fields;return(t||this.mod.length)&&i?arguments.length?isArray(n)?n.some(s=>i[s]):i[n]:!!i:!1},filter(n,t){const i=this;return n&ADD&&(i.addF=addFilter(i.addF,t)),n&REM&&(i.remF=addFilter(i.remF,t)),n&MOD$1&&(i.modF=addFilter(i.modF,t)),n&SOURCE&&(i.srcF=addFilter(i.srcF,t)),i},materialize(n){n=n||ALL;const t=this;return n&ADD&&t.addF&&(t.add=materialize(t.add,t.addF),t.addF=null),n&REM&&t.remF&&(t.rem=materialize(t.rem,t.remF),t.remF=null),n&MOD$1&&t.modF&&(t.mod=materialize(t.mod,t.modF),t.modF=null),n&SOURCE&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(n,t){const i=this,s=t;if(n&SOURCE)return visitArray(i.source,i.srcF,s),i;n&ADD&&visitArray(i.add,i.addF,s),n&REM&&visitArray(i.rem,i.remF,s),n&MOD$1&&visitArray(i.mod,i.modF,s);const o=i.source;if(n&REFLOW&&o){const f=i.add.length+i.mod.length;f===o.length||(f?visitArray(o,filter$1(i,ADD_MOD),s):visitArray(o,i.srcF,s))}return i}};function MultiPulse(n,t,i,s){const o=this;let f=0;this.dataflow=n,this.stamp=t,this.fields=null,this.encode=s||null,this.pulses=i;for(const d of i)if(d.stamp===t){if(d.fields){const p=o.fields||(o.fields={});for(const v in d.fields)p[v]=1}d.changed(o.ADD)&&(f|=o.ADD),d.changed(o.REM)&&(f|=o.REM),d.changed(o.MOD)&&(f|=o.MOD)}this.changes=f}inherits(MultiPulse,Pulse,{fork(n){const t=new Pulse(this.dataflow).init(this,n&this.NO_FIELDS);return n!==void 0&&(n&t.ADD&&this.visit(t.ADD,i=>t.add.push(i)),n&t.REM&&this.visit(t.REM,i=>t.rem.push(i)),n&t.MOD&&this.visit(t.MOD,i=>t.mod.push(i))),t},changed(n){return this.changes&n},modified(n){const t=this,i=t.fields;return i&&t.changes&t.MOD?isArray(n)?n.some(s=>i[s]):i[n]:0},filter(){error$1("MultiPulse does not support filtering.")},materialize(){error$1("MultiPulse does not support materialization.")},visit(n,t){const i=this,s=i.pulses,o=s.length;let f=0;if(n&i.SOURCE)for(;f<o;++f)s[f].visit(n,t);else for(;f<o;++f)s[f].stamp===i.stamp&&s[f].visit(n,t);return i}});async function evaluate(n,t,i){const s=this,o=[];if(s._pulse)return reentrant(s);if(s._pending&&await s._pending,t&&await asyncCallback(s,t),!s._touched.length)return s.debug("Dataflow invoked, but nothing to do."),s;const f=++s._clock;s._pulse=new Pulse(s,f,n),s._touched.forEach(k=>s._enqueue(k,!0)),s._touched=UniqueList(id$1);let d=0,p,v,_;try{for(;s._heap.size()>0;){if(p=s._heap.pop(),p.rank!==p.qrank){s._enqueue(p,!0);continue}v=p.run(s._getPulse(p,n)),v.then?v=await v:v.async&&(o.push(v.async),v=StopPropagation),v!==StopPropagation&&p._targets&&p._targets.forEach(k=>s._enqueue(k)),++d}}catch(k){s._heap.clear(),_=k}if(s._input={},s._pulse=null,s.debug(`Pulse ${f}: ${d} operators`),_&&(s._postrun=[],s.error(_)),s._postrun.length){const k=s._postrun.sort((P,L)=>L.priority-P.priority);s._postrun=[];for(let P=0;P<k.length;++P)await asyncCallback(s,k[P].callback)}return i&&await asyncCallback(s,i),o.length&&Promise.all(o).then(k=>s.runAsync(null,()=>{k.forEach(P=>{try{P(s)}catch(L){s.error(L)}})})),s}async function runAsync(n,t,i){for(;this._running;)await this._running;const s=()=>this._running=null;return(this._running=this.evaluate(n,t,i)).then(s,s),this._running}function run(n,t,i){return this._pulse?reentrant(this):(this.evaluate(n,t,i),this)}function runAfter(n,t,i){if(this._pulse||t)this._postrun.push({priority:i||0,callback:n});else try{n(this)}catch(s){this.error(s)}}function reentrant(n){return n.error("Dataflow already running. Use runAsync() to chain invocations."),n}function enqueue(n,t){const i=n.stamp<this._clock;i&&(n.stamp=this._clock),(i||t)&&(n.qrank=n.rank,this._heap.push(n))}function getPulse(n,t){const i=n.source,s=this._clock;return i&&isArray(i)?new MultiPulse(this,s,i.map(o=>o.pulse),t):this._input[n.id]||singlePulse(this._pulse,i&&i.pulse)}function singlePulse(n,t){return t&&t.stamp===n.stamp?t:(n=n.fork(),t&&t!==StopPropagation&&(n.source=t.source),n)}const NO_OPT={skip:!1,force:!1};function touch(n,t){const i=t||NO_OPT;return this._pulse?this._enqueue(n):this._touched.add(n),i.skip&&n.skip(!0),this}function update$6(n,t,i){const s=i||NO_OPT;return(n.set(t)||s.force)&&this.touch(n,s),this}function pulse(n,t,i){this.touch(n,i||NO_OPT);const s=new Pulse(this,this._clock+(this._pulse?0:1)),o=n.pulse&&n.pulse.source||[];return s.target=n,this._input[n.id]=t.pulse(s,o),this}function Heap(n){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:i=>(t.push(i),siftdown(t,0,t.length-1,n)),pop:()=>{const i=t.pop();let s;return t.length?(s=t[0],t[0]=i,siftup(t,0,n)):s=i,s}}}function siftdown(n,t,i,s){let o,f;const d=n[i];for(;i>t;){if(f=i-1>>1,o=n[f],s(d,o)<0){n[i]=o,i=f;continue}break}return n[i]=d}function siftup(n,t,i){const s=t,o=n.length,f=n[t];let d=(t<<1)+1,p;for(;d<o;)p=d+1,p<o&&i(n[d],n[p])>=0&&(d=p),n[t]=n[d],t=d,d=(t<<1)+1;return n[t]=f,siftdown(n,s,t,i)}function Dataflow(){this.logger(logger()),this.logLevel(Error$1),this._clock=0,this._rank=0,this._locale=defaultLocale$1();try{this._loader=loader()}catch{}this._touched=UniqueList(id$1),this._input={},this._pulse=null,this._heap=Heap((n,t)=>n.qrank-t.qrank),this._postrun=[]}function logMethod(n){return function(){return this._log[n].apply(this,arguments)}}Dataflow.prototype={stamp(){return this._clock},loader(n){return arguments.length?(this._loader=n,this):this._loader},locale(n){return arguments.length?(this._locale=n,this):this._locale},logger(n){return arguments.length?(this._log=n,this):this._log},error:logMethod("error"),warn:logMethod("warn"),info:logMethod("info"),debug:logMethod("debug"),logLevel:logMethod("level"),cleanThreshold:1e4,add:add$4,connect,rank,rerank,pulse,touch,update:update$6,changeset,ingest,parse:parse$5,preload,request,events:events$1,on:on$1,evaluate,run,runAsync,runAfter,_enqueue:enqueue,_getPulse:getPulse};function Transform(n,t){Operator.call(this,n,null,t)}inherits(Transform,Operator,{run(n){if(n.stamp<this.stamp)return n.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(n),t=t||n,t.then?t=t.then(i=>this.pulse=i):t!==n.StopPropagation&&(this.pulse=t),t},evaluate(n){const t=this.marshall(n.stamp),i=this.transform(t,n);return t.clear(),i},transform(){}});const transforms={};function definition$1(n){const t=transform$2(n);return t&&t.Definition||null}function transform$2(n){return n=n&&n.toLowerCase(),has$1(transforms,n)?transforms[n]:null}function ascending$5(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function number$9(n){return n===null?NaN:+n}function*numbers$3(n,t){for(let i of n)i!=null&&(i=+i)>=i&&(yield i)}function variance(n,t){let i=0,s,o=0,f=0;if(t===void 0)for(let d of n)d!=null&&(d=+d)>=d&&(s=d-o,o+=s/++i,f+=s*(d-o));else{let d=-1;for(let p of n)(p=t(p,++d,n))!=null&&(p=+p)>=p&&(s=p-o,o+=s/++i,f+=s*(p-o))}if(i>1)return f/(i-1)}function deviation(n,t){const i=variance(n,t);return i&&Math.sqrt(i)}function compareDefined$1(n=ascending$5){if(n===ascending$5)return ascendingDefined$1;if(typeof n!="function")throw new TypeError("compare is not a function");return(t,i)=>{const s=n(t,i);return s||s===0?s:(n(i,i)===0)-(n(t,t)===0)}}function ascendingDefined$1(n,t){return(n==null||!(n>=n))-(t==null||!(t>=t))||(n<t?-1:n>t?1:0)}function max$9(n,t){let i;for(const s of n)s!=null&&(i<s||i===void 0&&s>=s)&&(i=s);return i}function min$8(n,t){let i;for(const s of n)s!=null&&(i>s||i===void 0&&s>=s)&&(i=s);return i}function quickselect$1(n,t,i=0,s=1/0,o){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),s=Math.floor(Math.min(n.length-1,s)),!(i<=t&&t<=s))return n;for(o=o===void 0?ascendingDefined$1:compareDefined$1(o);s>i;){if(s-i>600){const v=s-i+1,_=t-i+1,k=Math.log(v),P=.5*Math.exp(2*k/3),L=.5*Math.sqrt(k*P*(v-P)/v)*(_-v/2<0?-1:1),G=Math.max(i,Math.floor(t-_*P/v+L)),Z=Math.min(s,Math.floor(t+(v-_)*P/v+L));quickselect$1(n,t,G,Z,o)}const f=n[t];let d=i,p=s;for(swap$2(n,i,t),o(n[s],f)>0&&swap$2(n,i,s);d<p;){for(swap$2(n,d,p),++d,--p;o(n[d],f)<0;)++d;for(;o(n[p],f)>0;)--p}o(n[i],f)===0?swap$2(n,i,p):(++p,swap$2(n,p,s)),p<=t&&(i=p+1),t<=p&&(s=p-1)}return n}function swap$2(n,t,i){const s=n[t];n[t]=n[i],n[i]=s}function quantile$2(n,t,i){if(n=Float64Array.from(numbers$3(n)),!(!(s=n.length)||isNaN(t=+t))){if(t<=0||s<2)return min$8(n);if(t>=1)return max$9(n);var s,o=(s-1)*t,f=Math.floor(o),d=max$9(quickselect$1(n,f).subarray(0,f+1)),p=min$8(n.subarray(f+1));return d+(p-d)*(o-f)}}function quantileSorted$1(n,t,i=number$9){if(!(!(s=n.length)||isNaN(t=+t))){if(t<=0||s<2)return+i(n[0],0,n);if(t>=1)return+i(n[s-1],s-1,n);var s,o=(s-1)*t,f=Math.floor(o),d=+i(n[f],f,n),p=+i(n[f+1],f+1,n);return d+(p-d)*(o-f)}}function median$1(n,t){return quantile$2(n,.5)}function*numbers$2(n,t){if(t==null)for(let i of n)i!=null&&i!==""&&(i=+i)>=i&&(yield i);else{let i=-1;for(let s of n)s=t(s,++i,n),s!=null&&s!==""&&(s=+s)>=s&&(yield s)}}function quantiles(n,t,i){const s=Float64Array.from(numbers$2(n,i));return s.sort(ascending$5),t.map(o=>quantileSorted$1(s,o))}function quartiles(n,t){return quantiles(n,[.25,.5,.75],t)}function estimateBandwidth(n,t){const i=n.length,s=deviation(n,t),o=quartiles(n,t),f=(o[2]-o[0])/1.34;return 1.06*(Math.min(s,f)||s||Math.abs(o[0])||1)*Math.pow(i,-.2)}function bin(n){const t=n.maxbins||20,i=n.base||10,s=Math.log(i),o=n.divide||[5,2];let f=n.extent[0],d=n.extent[1],p,v,_,k,P,L;const G=n.span||d-f||Math.abs(f)||1;if(n.step)p=n.step;else if(n.steps){for(k=G/t,P=0,L=n.steps.length;P<L&&n.steps[P]<k;++P);p=n.steps[Math.max(0,P-1)]}else{for(v=Math.ceil(Math.log(t)/s),_=n.minstep||0,p=Math.max(_,Math.pow(i,Math.round(Math.log(G)/s)-v));Math.ceil(G/p)>t;)p*=i;for(P=0,L=o.length;P<L;++P)k=p/o[P],k>=_&&G/k<=t&&(p=k)}k=Math.log(p);const Z=k>=0?0:~~(-k/s)+1,W=Math.pow(i,-Z-1);return(n.nice||n.nice===void 0)&&(k=Math.floor(f/p+W)*p,f=f<k?k-p:k,d=Math.ceil(d/p)*p),{start:f,stop:d===f?f+p:d,step:p}}var random$2=Math.random;function setRandom(n){random$2=n}function bootstrapCI(n,t,i,s){if(!n.length)return[void 0,void 0];const o=Float64Array.from(numbers$2(n,s)),f=o.length,d=t;let p,v,_,k;for(_=0,k=Array(d);_<d;++_){for(p=0,v=0;v<f;++v)p+=o[~~(random$2()*f)];k[_]=p/f}return k.sort(ascending$5),[quantile$2(k,i/2),quantile$2(k,1-i/2)]}function dotbin(n,t,i,s){s=s||(L=>L);const o=n.length,f=new Float64Array(o);let d=0,p=1,v=s(n[0]),_=v,k=v+t,P;for(;p<o;++p){if(P=s(n[p]),P>=k){for(_=(v+_)/2;d<p;++d)f[d]=_;k=P+t,v=P}_=P}for(_=(v+_)/2;d<p;++d)f[d]=_;return i?smoothing(f,t+t/4):f}function smoothing(n,t){const i=n.length;let s=0,o=1,f,d;for(;n[s]===n[o];)++o;for(;o<i;){for(f=o+1;n[o]===n[f];)++f;if(n[o]-n[o-1]<t){for(d=o+(s+f-o-o>>1);d<o;)n[d++]=n[o];for(;d>o;)n[d--]=n[s]}s=o,o=f}return n}function lcg$2(n){return function(){return n=(1103515245*n+12345)%2147483647,n/2147483647}}function integer(n,t){t==null&&(t=n,n=0);let i,s,o;const f={min(d){return arguments.length?(i=d||0,o=s-i,f):i},max(d){return arguments.length?(s=d||0,o=s-i,f):s},sample(){return i+Math.floor(o*random$2())},pdf(d){return d===Math.floor(d)&&d>=i&&d<s?1/o:0},cdf(d){const p=Math.floor(d);return p<i?0:p>=s?1:(p-i+1)/o},icdf(d){return d>=0&&d<=1?i-1+Math.floor(d*o):NaN}};return f.min(n).max(t)}const SQRT2PI=Math.sqrt(2*Math.PI),SQRT2=Math.SQRT2;let nextSample=NaN;function sampleNormal(n,t){n=n||0,t=t??1;let i=0,s=0,o,f;if(nextSample===nextSample)i=nextSample,nextSample=NaN;else{do i=random$2()*2-1,s=random$2()*2-1,o=i*i+s*s;while(o===0||o>1);f=Math.sqrt(-2*Math.log(o)/o),i*=f,nextSample=s*f}return n+i*t}function densityNormal(n,t,i){i=i??1;const s=(n-(t||0))/i;return Math.exp(-.5*s*s)/(i*SQRT2PI)}function cumulativeNormal(n,t,i){t=t||0,i=i??1;const s=(n-t)/i,o=Math.abs(s);let f;if(o>37)f=0;else{const d=Math.exp(-o*o/2);let p;o<7.07106781186547?(p=.0352624965998911*o+.700383064443688,p=p*o+6.37396220353165,p=p*o+33.912866078383,p=p*o+112.079291497871,p=p*o+221.213596169931,p=p*o+220.206867912376,f=d*p,p=.0883883476483184*o+1.75566716318264,p=p*o+16.064177579207,p=p*o+86.7807322029461,p=p*o+296.564248779674,p=p*o+637.333633378831,p=p*o+793.826512519948,p=p*o+440.413735824752,f=f/p):(p=o+.65,p=o+4/p,p=o+3/p,p=o+2/p,p=o+1/p,f=d/p/2.506628274631)}return s>0?1-f:f}function quantileNormal(n,t,i){return n<0||n>1?NaN:(t||0)+(i??1)*SQRT2*erfinv(2*n-1)}function erfinv(n){let t=-Math.log((1-n)*(1+n)),i;return t<6.25?(t-=3.125,i=-364441206401782e-35,i=-16850591381820166e-35+i*t,i=128584807152564e-32+i*t,i=11157877678025181e-33+i*t,i=-1333171662854621e-31+i*t,i=20972767875968562e-33+i*t,i=6637638134358324e-30+i*t,i=-4054566272975207e-29+i*t,i=-8151934197605472e-29+i*t,i=26335093153082323e-28+i*t,i=-12975133253453532e-27+i*t,i=-5415412054294628e-26+i*t,i=10512122733215323e-25+i*t,i=-4112633980346984e-24+i*t,i=-29070369957882005e-24+i*t,i=42347877827932404e-23+i*t,i=-13654692000834679e-22+i*t,i=-13882523362786469e-21+i*t,i=.00018673420803405714+i*t,i=-.000740702534166267+i*t,i=-.006033670871430149+i*t,i=.24015818242558962+i*t,i=1.6536545626831027+i*t):t<16?(t=Math.sqrt(t)-3.25,i=22137376921775787e-25,i=9075656193888539e-23+i*t,i=-27517406297064545e-23+i*t,i=18239629214389228e-24+i*t,i=15027403968909828e-22+i*t,i=-4013867526981546e-21+i*t,i=29234449089955446e-22+i*t,i=12475304481671779e-21+i*t,i=-47318229009055734e-21+i*t,i=6828485145957318e-20+i*t,i=24031110387097894e-21+i*t,i=-.0003550375203628475+i*t,i=.0009532893797373805+i*t,i=-.0016882755560235047+i*t,i=.002491442096107851+i*t,i=-.003751208507569241+i*t,i=.005370914553590064+i*t,i=1.0052589676941592+i*t,i=3.0838856104922208+i*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,i=-27109920616438573e-27,i=-2555641816996525e-25+i*t,i=15076572693500548e-25+i*t,i=-3789465440126737e-24+i*t,i=761570120807834e-23+i*t,i=-1496002662714924e-23+i*t,i=2914795345090108e-23+i*t,i=-6771199775845234e-23+i*t,i=22900482228026655e-23+i*t,i=-99298272942317e-20+i*t,i=4526062597223154e-21+i*t,i=-1968177810553167e-20+i*t,i=7599527703001776e-20+i*t,i=-.00021503011930044477+i*t,i=-.00013871931833623122+i*t,i=1.0103004648645344+i*t,i=4.849906401408584+i*t):i=1/0,i*n}function gaussian(n,t){let i,s;const o={mean(f){return arguments.length?(i=f||0,o):i},stdev(f){return arguments.length?(s=f??1,o):s},sample:()=>sampleNormal(i,s),pdf:f=>densityNormal(f,i,s),cdf:f=>cumulativeNormal(f,i,s),icdf:f=>quantileNormal(f,i,s)};return o.mean(n).stdev(t)}function kde(n,t){const i=gaussian();let s=0;const o={data(f){return arguments.length?(n=f,s=f?f.length:0,o.bandwidth(t)):n},bandwidth(f){return arguments.length?(t=f,!t&&n&&(t=estimateBandwidth(n)),o):t},sample(){return n[~~(random$2()*s)]+t*i.sample()},pdf(f){let d=0,p=0;for(;p<s;++p)d+=i.pdf((f-n[p])/t);return d/t/s},cdf(f){let d=0,p=0;for(;p<s;++p)d+=i.cdf((f-n[p])/t);return d/s},icdf(){throw Error("KDE icdf not supported.")}};return o.data(n)}function sampleLogNormal(n,t){return n=n||0,t=t??1,Math.exp(n+sampleNormal()*t)}function densityLogNormal(n,t,i){if(n<=0)return 0;t=t||0,i=i??1;const s=(Math.log(n)-t)/i;return Math.exp(-.5*s*s)/(i*SQRT2PI*n)}function cumulativeLogNormal(n,t,i){return cumulativeNormal(Math.log(n),t,i)}function quantileLogNormal(n,t,i){return Math.exp(quantileNormal(n,t,i))}function lognormal(n,t){let i,s;const o={mean(f){return arguments.length?(i=f||0,o):i},stdev(f){return arguments.length?(s=f??1,o):s},sample:()=>sampleLogNormal(i,s),pdf:f=>densityLogNormal(f,i,s),cdf:f=>cumulativeLogNormal(f,i,s),icdf:f=>quantileLogNormal(f,i,s)};return o.mean(n).stdev(t)}function mixture$1(n,t){let i=0,s;function o(d){const p=[];let v=0,_;for(_=0;_<i;++_)v+=p[_]=d[_]==null?1:+d[_];for(_=0;_<i;++_)p[_]/=v;return p}const f={weights(d){return arguments.length?(s=o(t=d||[]),f):t},distributions(d){return arguments.length?(d?(i=d.length,n=d):(i=0,n=[]),f.weights(t)):n},sample(){const d=random$2();let p=n[i-1],v=s[0],_=0;for(;_<i-1;v+=s[++_])if(d<v){p=n[_];break}return p.sample()},pdf(d){let p=0,v=0;for(;v<i;++v)p+=s[v]*n[v].pdf(d);return p},cdf(d){let p=0,v=0;for(;v<i;++v)p+=s[v]*n[v].cdf(d);return p},icdf(){throw Error("Mixture icdf not supported.")}};return f.distributions(n).weights(t)}function sampleUniform(n,t){return t==null&&(t=n??1,n=0),n+(t-n)*random$2()}function densityUniform(n,t,i){return i==null&&(i=t??1,t=0),n>=t&&n<=i?1/(i-t):0}function cumulativeUniform(n,t,i){return i==null&&(i=t??1,t=0),n<t?0:n>i?1:(n-t)/(i-t)}function quantileUniform(n,t,i){return i==null&&(i=t??1,t=0),n>=0&&n<=1?t+n*(i-t):NaN}function uniform(n,t){let i,s;const o={min(f){return arguments.length?(i=f||0,o):i},max(f){return arguments.length?(s=f??1,o):s},sample:()=>sampleUniform(i,s),pdf:f=>densityUniform(f,i,s),cdf:f=>cumulativeUniform(f,i,s),icdf:f=>quantileUniform(f,i,s)};return t==null&&(t=n??1,n=0),o.min(n).max(t)}function constant$5(n,t,i){let s=0,o=0;for(const f of n){const d=i(f);t(f)==null||d==null||isNaN(d)||(s+=(d-s)/++o)}return{coef:[s],predict:()=>s,rSquared:0}}function ols(n,t,i,s){const o=s-n*n,f=Math.abs(o)<1e-24?0:(i-n*t)/o;return[t-f*n,f]}function points(n,t,i,s){n=n.filter(G=>{let Z=t(G),W=i(G);return Z!=null&&(Z=+Z)>=Z&&W!=null&&(W=+W)>=W}),s&&n.sort((G,Z)=>t(G)-t(Z));const o=n.length,f=new Float64Array(o),d=new Float64Array(o);let p=0,v=0,_=0,k,P,L;for(L of n)f[p]=k=+t(L),d[p]=P=+i(L),++p,v+=(k-v)/p,_+=(P-_)/p;for(p=0;p<o;++p)f[p]-=v,d[p]-=_;return[f,d,v,_]}function visitPoints(n,t,i,s){let o=-1,f,d;for(const p of n)f=t(p),d=i(p),f!=null&&(f=+f)>=f&&d!=null&&(d=+d)>=d&&s(f,d,++o)}function rSquared(n,t,i,s,o){let f=0,d=0;return visitPoints(n,t,i,(p,v)=>{const _=v-o(p),k=v-s;f+=_*_,d+=k*k}),1-f/d}function linear$3(n,t,i){let s=0,o=0,f=0,d=0,p=0;visitPoints(n,t,i,(k,P)=>{++p,s+=(k-s)/p,o+=(P-o)/p,f+=(k*P-f)/p,d+=(k*k-d)/p});const v=ols(s,o,f,d),_=k=>v[0]+v[1]*k;return{coef:v,predict:_,rSquared:rSquared(n,t,i,o,_)}}function log$5(n,t,i){let s=0,o=0,f=0,d=0,p=0;visitPoints(n,t,i,(k,P)=>{++p,k=Math.log(k),s+=(k-s)/p,o+=(P-o)/p,f+=(k*P-f)/p,d+=(k*k-d)/p});const v=ols(s,o,f,d),_=k=>v[0]+v[1]*Math.log(k);return{coef:v,predict:_,rSquared:rSquared(n,t,i,o,_)}}function exp$2(n,t,i){const[s,o,f,d]=points(n,t,i);let p=0,v=0,_=0,k=0,P=0,L,G,Z;visitPoints(n,t,i,(me,$e)=>{L=s[P++],G=Math.log($e),Z=L*$e,p+=($e*G-p)/P,v+=(Z-v)/P,_+=(Z*G-_)/P,k+=(L*Z-k)/P});const[W,j]=ols(v/d,p/d,_/d,k/d),H=me=>Math.exp(W+j*(me-f));return{coef:[Math.exp(W-j*f),j],predict:H,rSquared:rSquared(n,t,i,d,H)}}function pow$a(n,t,i){let s=0,o=0,f=0,d=0,p=0,v=0;visitPoints(n,t,i,(P,L)=>{const G=Math.log(P),Z=Math.log(L);++v,s+=(G-s)/v,o+=(Z-o)/v,f+=(G*Z-f)/v,d+=(G*G-d)/v,p+=(L-p)/v});const _=ols(s,o,f,d),k=P=>_[0]*Math.pow(P,_[1]);return _[0]=Math.exp(_[0]),{coef:_,predict:k,rSquared:rSquared(n,t,i,p,k)}}function quad(n,t,i){const[s,o,f,d]=points(n,t,i),p=s.length;let v=0,_=0,k=0,P=0,L=0,G,Z,W,j;for(G=0;G<p;)Z=s[G],W=o[G++],j=Z*Z,v+=(j-v)/G,_+=(j*Z-_)/G,k+=(j*j-k)/G,P+=(Z*W-P)/G,L+=(j*W-L)/G;const H=k-v*v,me=v*H-_*_,$e=(L*v-P*_)/me,De=(P*H-L*_)/me,le=-$e*v,Ce=Me=>(Me=Me-f,$e*Me*Me+De*Me+le+d);return{coef:[le-De*f+$e*f*f+d,De-2*$e*f,$e],predict:Ce,rSquared:rSquared(n,t,i,d,Ce)}}function poly(n,t,i,s){if(s===0)return constant$5(n,t,i);if(s===1)return linear$3(n,t,i);if(s===2)return quad(n,t,i);const[o,f,d,p]=points(n,t,i),v=o.length,_=[],k=[],P=s+1;let L,G,Z,W,j;for(L=0;L<P;++L){for(Z=0,W=0;Z<v;++Z)W+=Math.pow(o[Z],L)*f[Z];for(_.push(W),j=new Float64Array(P),G=0;G<P;++G){for(Z=0,W=0;Z<v;++Z)W+=Math.pow(o[Z],L+G);j[G]=W}k.push(j)}k.push(_);const H=gaussianElimination(k),me=$e=>{$e-=d;let De=p+H[0]+H[1]*$e+H[2]*$e*$e;for(L=3;L<P;++L)De+=H[L]*Math.pow($e,L);return De};return{coef:uncenter(P,H,-d,p),predict:me,rSquared:rSquared(n,t,i,p,me)}}function uncenter(n,t,i,s){const o=Array(n);let f,d,p,v;for(f=0;f<n;++f)o[f]=0;for(f=n-1;f>=0;--f)for(p=t[f],v=1,o[f]+=p,d=1;d<=f;++d)v*=(f+1-d)/d,o[f-d]+=p*Math.pow(i,d)*v;return o[0]+=s,o}function gaussianElimination(n){const t=n.length-1,i=[];let s,o,f,d,p;for(s=0;s<t;++s){for(d=s,o=s+1;o<t;++o)Math.abs(n[s][o])>Math.abs(n[s][d])&&(d=o);for(f=s;f<t+1;++f)p=n[f][s],n[f][s]=n[f][d],n[f][d]=p;for(o=s+1;o<t;++o)for(f=t;f>=s;f--)n[f][o]-=n[f][s]*n[s][o]/n[s][s]}for(o=t-1;o>=0;--o){for(p=0,f=o+1;f<t;++f)p+=n[f][o]*i[f];i[o]=(n[t][o]-p)/n[o][o]}return i}const maxiters=2,epsilon$9=1e-12;function loess(n,t,i,s){const[o,f,d,p]=points(n,t,i,!0),v=o.length,_=Math.max(2,~~(s*v)),k=new Float64Array(v),P=new Float64Array(v),L=new Float64Array(v).fill(1);for(let G=-1;++G<=maxiters;){const Z=[0,_-1];for(let j=0;j<v;++j){const H=o[j],me=Z[0],$e=Z[1],De=H-o[me]>o[$e]-H?me:$e;let le=0,Ce=0,Me=0,_n=0,_i=0;const ll=1/Math.abs(o[De]-H||1);for(let Ru=me;Ru<=$e;++Ru){const ga=o[Ru],_s=f[Ru],Sa=tricube(Math.abs(H-ga)*ll)*L[Ru],Ra=ga*Sa;le+=Sa,Ce+=Ra,Me+=_s*Sa,_n+=_s*Ra,_i+=ga*Ra}const[_l,oa]=ols(Ce/le,Me/le,_n/le,_i/le);k[j]=_l+oa*H,P[j]=Math.abs(f[j]-k[j]),updateInterval(o,j+1,Z)}if(G===maxiters)break;const W=median$1(P);if(Math.abs(W)<epsilon$9)break;for(let j=0,H,me;j<v;++j)H=P[j]/(6*W),L[j]=H>=1?epsilon$9:(me=1-H*H)*me}return output$1(o,k,d,p)}function tricube(n){return(n=1-n*n*n)*n*n}function updateInterval(n,t,i){const s=n[t];let o=i[0],f=i[1]+1;if(!(f>=n.length))for(;t>o&&n[f]-s<=s-n[o];)i[0]=++o,i[1]=f,++f}function output$1(n,t,i,s){const o=n.length,f=[];let d=0,p=0,v=[],_;for(;d<o;++d)_=n[d]+i,v[0]===_?v[1]+=(t[d]-v[1])/++p:(p=0,v[1]+=s,v=[_,t[d]],f.push(v));return v[1]+=s,f}const MIN_RADIANS=.5*Math.PI/180;function sampleCurve(n,t,i,s){i=i||25,s=Math.max(i,s||200);const o=W=>[W,n(W)],f=t[0],d=t[1],p=d-f,v=p/s,_=[o(f)],k=[];if(i===s){for(let W=1;W<s;++W)_.push(o(f+W/i*p));return _.push(o(d)),_}else{k.push(o(d));for(let W=i;--W>0;)k.push(o(f+W/i*p))}let P=_[0],L=k[k.length-1];const G=1/p,Z=scaleY(P[1],k);for(;L;){const W=o((P[0]+L[0])/2);W[0]-P[0]>=v&&angleDelta(P,W,L,G,Z)>MIN_RADIANS?k.push(W):(P=L,_.push(L),k.pop()),L=k[k.length-1]}return _}function scaleY(n,t){let i=n,s=n;const o=t.length;for(let f=0;f<o;++f){const d=t[f][1];d<i&&(i=d),d>s&&(s=d)}return 1/(s-i)}function angleDelta(n,t,i,s,o){const f=Math.atan2(o*(i[1]-n[1]),s*(i[0]-n[0])),d=Math.atan2(o*(t[1]-n[1]),s*(t[0]-n[0]));return Math.abs(f-d)}function ascending$4(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function descending$4(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function bisector$3(n){let t,i,s;n.length!==2?(t=ascending$4,i=(p,v)=>ascending$4(n(p),v),s=(p,v)=>n(p)-v):(t=n===ascending$4||n===descending$4?n:zero$7,i=n,s=n);function o(p,v,_=0,k=p.length){if(_<k){if(t(v,v)!==0)return k;do{const P=_+k>>>1;i(p[P],v)<0?_=P+1:k=P}while(_<k)}return _}function f(p,v,_=0,k=p.length){if(_<k){if(t(v,v)!==0)return k;do{const P=_+k>>>1;i(p[P],v)<=0?_=P+1:k=P}while(_<k)}return _}function d(p,v,_=0,k=p.length){const P=o(p,v,_,k-1);return P>_&&s(p[P-1],v)>-s(p[P],v)?P-1:P}return{left:o,center:d,right:f}}function zero$7(){return 0}function*numbers$1(n,t){if(t===void 0)for(let i of n)i!=null&&(i=+i)>=i&&(yield i);else{let i=-1;for(let s of n)(s=t(s,++i,n))!=null&&(s=+s)>=s&&(yield s)}}function compareDefined(n=ascending$4){if(n===ascending$4)return ascendingDefined;if(typeof n!="function")throw new TypeError("compare is not a function");return(t,i)=>{const s=n(t,i);return s||s===0?s:(n(i,i)===0)-(n(t,t)===0)}}function ascendingDefined(n,t){return(n==null||!(n>=n))-(t==null||!(t>=t))||(n<t?-1:n>t?1:0)}function max$8(n,t){let i;if(t===void 0)for(const s of n)s!=null&&(i<s||i===void 0&&s>=s)&&(i=s);else{let s=-1;for(let o of n)(o=t(o,++s,n))!=null&&(i<o||i===void 0&&o>=o)&&(i=o)}return i}function min$7(n,t){let i;if(t===void 0)for(const s of n)s!=null&&(i>s||i===void 0&&s>=s)&&(i=s);else{let s=-1;for(let o of n)(o=t(o,++s,n))!=null&&(i>o||i===void 0&&o>=o)&&(i=o)}return i}function quickselect(n,t,i=0,s=1/0,o){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),s=Math.floor(Math.min(n.length-1,s)),!(i<=t&&t<=s))return n;for(o=o===void 0?ascendingDefined:compareDefined(o);s>i;){if(s-i>600){const v=s-i+1,_=t-i+1,k=Math.log(v),P=.5*Math.exp(2*k/3),L=.5*Math.sqrt(k*P*(v-P)/v)*(_-v/2<0?-1:1),G=Math.max(i,Math.floor(t-_*P/v+L)),Z=Math.min(s,Math.floor(t+(v-_)*P/v+L));quickselect(n,t,G,Z,o)}const f=n[t];let d=i,p=s;for(swap$1(n,i,t),o(n[s],f)>0&&swap$1(n,i,s);d<p;){for(swap$1(n,d,p),++d,--p;o(n[d],f)<0;)++d;for(;o(n[p],f)>0;)--p}o(n[i],f)===0?swap$1(n,i,p):(++p,swap$1(n,p,s)),p<=t&&(i=p+1),t<=p&&(s=p-1)}return n}function swap$1(n,t,i){const s=n[t];n[t]=n[i],n[i]=s}function quantile$1(n,t,i){if(n=Float64Array.from(numbers$1(n,i)),!(!(s=n.length)||isNaN(t=+t))){if(t<=0||s<2)return min$7(n);if(t>=1)return max$8(n);var s,o=(s-1)*t,f=Math.floor(o),d=max$8(quickselect(n,f).subarray(0,f+1)),p=min$7(n.subarray(f+1));return d+(p-d)*(o-f)}}function mean(n,t){let i=0,s=0;if(t===void 0)for(let o of n)o!=null&&(o=+o)>=o&&(++i,s+=o);else{let o=-1;for(let f of n)(f=t(f,++o,n))!=null&&(f=+f)>=f&&(++i,s+=f)}if(i)return s/i}function median(n,t){return quantile$1(n,.5,t)}function range$9(n,t,i){n=+n,t=+t,i=(o=arguments.length)<2?(t=n,n=0,1):o<3?1:+i;for(var s=-1,o=Math.max(0,Math.ceil((t-n)/i))|0,f=new Array(o);++s<o;)f[s]=n+s*i;return f}function multikey(n){return t=>{const i=n.length;let s=1,o=String(n[0](t));for(;s<i;++s)o+="|"+n[s](t);return o}}function groupkey(n){return!n||!n.length?function(){return""}:n.length===1?n[0]:multikey(n)}function measureName(n,t,i){return i||n+(t?"_"+t:"")}const noop$6=()=>{},base_op={init:noop$6,add:noop$6,rem:noop$6,idx:0},AggregateOps={values:{init:n=>n.cell.store=!0,value:n=>n.cell.data.values(),idx:-1},count:{value:n=>n.cell.num},__count__:{value:n=>n.missing+n.valid},missing:{value:n=>n.missing},valid:{value:n=>n.valid},sum:{init:n=>n.sum=0,value:n=>n.valid?n.sum:void 0,add:(n,t)=>n.sum+=+t,rem:(n,t)=>n.sum-=t},product:{init:n=>n.product=1,value:n=>n.valid?n.product:void 0,add:(n,t)=>n.product*=t,rem:(n,t)=>n.product/=t},mean:{init:n=>n.mean=0,value:n=>n.valid?n.mean:void 0,add:(n,t)=>(n.mean_d=t-n.mean,n.mean+=n.mean_d/n.valid),rem:(n,t)=>(n.mean_d=t-n.mean,n.mean-=n.valid?n.mean_d/n.valid:n.mean)},average:{value:n=>n.valid?n.mean:void 0,req:["mean"],idx:1},variance:{init:n=>n.dev=0,value:n=>n.valid>1?n.dev/(n.valid-1):void 0,add:(n,t)=>n.dev+=n.mean_d*(t-n.mean),rem:(n,t)=>n.dev-=n.mean_d*(t-n.mean),req:["mean"],idx:1},variancep:{value:n=>n.valid>1?n.dev/n.valid:void 0,req:["variance"],idx:2},stdev:{value:n=>n.valid>1?Math.sqrt(n.dev/(n.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:n=>n.valid>1?Math.sqrt(n.dev/n.valid):void 0,req:["variance"],idx:2},stderr:{value:n=>n.valid>1?Math.sqrt(n.dev/(n.valid*(n.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:n=>n.cell.data.distinct(n.get),req:["values"],idx:3},ci0:{value:n=>n.cell.data.ci0(n.get),req:["values"],idx:3},ci1:{value:n=>n.cell.data.ci1(n.get),req:["values"],idx:3},median:{value:n=>n.cell.data.q2(n.get),req:["values"],idx:3},q1:{value:n=>n.cell.data.q1(n.get),req:["values"],idx:3},q3:{value:n=>n.cell.data.q3(n.get),req:["values"],idx:3},min:{init:n=>n.min=void 0,value:n=>n.min=Number.isNaN(n.min)?n.cell.data.min(n.get):n.min,add:(n,t)=>{(t<n.min||n.min===void 0)&&(n.min=t)},rem:(n,t)=>{t<=n.min&&(n.min=NaN)},req:["values"],idx:4},max:{init:n=>n.max=void 0,value:n=>n.max=Number.isNaN(n.max)?n.cell.data.max(n.get):n.max,add:(n,t)=>{(t>n.max||n.max===void 0)&&(n.max=t)},rem:(n,t)=>{t>=n.max&&(n.max=NaN)},req:["values"],idx:4},argmin:{init:n=>n.argmin=void 0,value:n=>n.argmin||n.cell.data.argmin(n.get),add:(n,t,i)=>{t<n.min&&(n.argmin=i)},rem:(n,t)=>{t<=n.min&&(n.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:n=>n.argmax=void 0,value:n=>n.argmax||n.cell.data.argmax(n.get),add:(n,t,i)=>{t>n.max&&(n.argmax=i)},rem:(n,t)=>{t>=n.max&&(n.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(n,t)=>{n.exp=0,n.exp_r=t},value:n=>n.valid?n.exp*(1-n.exp_r)/(1-n.exp_r**n.valid):void 0,add:(n,t)=>n.exp=n.exp_r*n.exp+t,rem:(n,t)=>n.exp=(n.exp-t/n.exp_r**(n.valid-1))/n.exp_r},exponentialb:{value:n=>n.valid?n.exp*(1-n.exp_r):void 0,req:["exponential"],idx:1}},ValidAggregateOps=Object.keys(AggregateOps).filter(n=>n!=="__count__");function measure(n,t){return(i,s)=>extend$3({name:n,aggregate_param:s,out:i||n},base_op,t)}[...ValidAggregateOps,"__count__"].forEach(n=>{AggregateOps[n]=measure(n,AggregateOps[n])});function createMeasure(n,t,i){return AggregateOps[n](i,t)}function compareIndex(n,t){return n.idx-t.idx}function resolve(n){const t={};n.forEach(s=>t[s.name]=s);const i=s=>{s.req&&s.req.forEach(o=>{t[o]||i(t[o]=AggregateOps[o]())})};return n.forEach(i),Object.values(t).sort(compareIndex)}function init(){this.valid=0,this.missing=0,this._ops.forEach(n=>n.aggregate_param==null?n.init(this):n.init(this,n.aggregate_param))}function add$3(n,t){if(n==null||n===""){++this.missing;return}n===n&&(++this.valid,this._ops.forEach(i=>i.add(this,n,t)))}function rem(n,t){if(n==null||n===""){--this.missing;return}n===n&&(--this.valid,this._ops.forEach(i=>i.rem(this,n,t)))}function set$5(n){return this._out.forEach(t=>n[t.out]=t.value(this)),n}function compileMeasures(n,t){const i=t||identity$7,s=resolve(n),o=n.slice().sort(compareIndex);function f(d){this._ops=s,this._out=o,this.cell=d,this.init()}return f.prototype.init=init,f.prototype.add=add$3,f.prototype.rem=rem,f.prototype.set=set$5,f.prototype.get=i,f.fields=n.map(d=>d.out),f}function TupleStore(n){this._key=n?field$1(n):tupleid,this.reset()}const prototype$1=TupleStore.prototype;prototype$1.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};prototype$1.add=function(n){this._add.push(n)};prototype$1.rem=function(n){this._rem.push(n)};prototype$1.values=function(){if(this._get=null,this._rem.length===0)return this._add;const n=this._add,t=this._rem,i=this._key,s=n.length,o=t.length,f=Array(s-o),d={};let p,v,_;for(p=0;p<o;++p)d[i(t[p])]=1;for(p=0,v=0;p<s;++p)d[i(_=n[p])]?d[i(_)]=0:f[v++]=_;return this._rem=[],this._add=f};prototype$1.distinct=function(n){const t=this.values(),i={};let s=t.length,o=0,f;for(;--s>=0;)f=n(t[s])+"",has$1(i,f)||(i[f]=1,++o);return o};prototype$1.extent=function(n){if(this._get!==n||!this._ext){const t=this.values(),i=extentIndex(t,n);this._ext=[t[i[0]],t[i[1]]],this._get=n}return this._ext};prototype$1.argmin=function(n){return this.extent(n)[0]||{}};prototype$1.argmax=function(n){return this.extent(n)[1]||{}};prototype$1.min=function(n){const t=this.extent(n)[0];return t!=null?n(t):void 0};prototype$1.max=function(n){const t=this.extent(n)[1];return t!=null?n(t):void 0};prototype$1.quartile=function(n){return(this._get!==n||!this._q)&&(this._q=quartiles(this.values(),n),this._get=n),this._q};prototype$1.q1=function(n){return this.quartile(n)[0]};prototype$1.q2=function(n){return this.quartile(n)[1]};prototype$1.q3=function(n){return this.quartile(n)[2]};prototype$1.ci=function(n){return(this._get!==n||!this._ci)&&(this._ci=bootstrapCI(this.values(),1e3,.05,n),this._get=n),this._ci};prototype$1.ci0=function(n){return this.ci(n)[0]};prototype$1.ci1=function(n){return this.ci(n)[1]};function Aggregate$1(n){Transform.call(this,null,n),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Aggregate$1.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ValidAggregateOps},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};inherits(Aggregate$1,Transform,{transform(n,t){const i=this,s=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=n.modified();return i.stamp=s.stamp,i.value&&(o||t.modified(i._inputs,!0))?(i._prev=i.value,i.value=o?i.init(n):Object.create(null),t.visit(t.SOURCE,f=>i.add(f))):(i.value=i.value||i.init(n),t.visit(t.REM,f=>i.rem(f)),t.visit(t.ADD,f=>i.add(f))),s.modifies(i._outputs),i._drop=n.drop!==!1,n.cross&&i._dims.length>1&&(i._drop=!1,i.cross()),t.clean()&&i._drop&&s.clean(!0).runAfter(()=>this.clean()),i.changes(s)},cross(){const n=this,t=n.value,i=n._dnames,s=i.map(()=>({})),o=i.length;function f(p){let v,_,k,P;for(v in p)for(k=p[v].tuple,_=0;_<o;++_)s[_][P=k[i[_]]]=P}f(n._prev),f(t);function d(p,v,_){const k=i[_],P=s[_++];for(const L in P){const G=p?p+"|"+L:L;v[k]=P[L],_<o?d(G,v,_):t[G]||n.cell(G,v)}}d("",{},0)},init(n){const t=this._inputs=[],i=this._outputs=[],s={};function o(me){const $e=array$5(accessorFields(me)),De=$e.length;let le=0,Ce;for(;le<De;++le)s[Ce=$e[le]]||(s[Ce]=1,t.push(Ce))}this._dims=array$5(n.groupby),this._dnames=this._dims.map(me=>{const $e=accessorName(me);return o(me),i.push($e),$e}),this.cellkey=n.key?n.key:groupkey(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const f=n.fields||[null],d=n.ops||["count"],p=n.aggregate_params||[null],v=n.as||[],_=f.length,k={};let P,L,G,Z,W,j,H;for(_!==d.length&&error$1("Unmatched number of fields and aggregate ops."),H=0;H<_;++H){if(P=f[H],L=d[H],G=p[H]||null,P==null&&L!=="count"&&error$1("Null aggregate field specified."),W=accessorName(P),j=measureName(L,W,v[H]),i.push(j),L==="count"){this._counts.push(j);continue}Z=k[W],Z||(o(P),Z=k[W]=[],Z.field=P,this._measures.push(Z)),L!=="count"&&(this._countOnly=!1),Z.push(createMeasure(L,G,j))}return this._measures=this._measures.map(me=>compileMeasures(me,me.field)),Object.create(null)},cellkey:groupkey(),cell(n,t){let i=this.value[n];return i?i.num===0&&this._drop&&i.stamp<this.stamp?(i.stamp=this.stamp,this._adds[this._alen++]=i):i.stamp<this.stamp&&(i.stamp=this.stamp,this._mods[this._mlen++]=i):(i=this.value[n]=this.newcell(n,t),this._adds[this._alen++]=i),i},newcell(n,t){const i={key:n,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[n]),stamp:this.stamp,store:!1};if(!this._countOnly){const s=this._measures,o=s.length;i.agg=Array(o);for(let f=0;f<o;++f)i.agg[f]=new s[f](i)}return i.store&&(i.data=new TupleStore),i},newtuple(n,t){const i=this._dnames,s=this._dims,o=s.length,f={};for(let d=0;d<o;++d)f[i[d]]=s[d](n);return t?replace$1(t.tuple,f):ingest$1(f)},clean(){const n=this.value;for(const t in n)n[t].num===0&&delete n[t]},add(n){const t=this.cellkey(n),i=this.cell(t,n);if(i.num+=1,this._countOnly)return;i.store&&i.data.add(n);const s=i.agg;for(let o=0,f=s.length;o<f;++o)s[o].add(s[o].get(n),n)},rem(n){const t=this.cellkey(n),i=this.cell(t,n);if(i.num-=1,this._countOnly)return;i.store&&i.data.rem(n);const s=i.agg;for(let o=0,f=s.length;o<f;++o)s[o].rem(s[o].get(n),n)},celltuple(n){const t=n.tuple,i=this._counts;n.store&&n.data.values();for(let s=0,o=i.length;s<o;++s)t[i[s]]=n.num;if(!this._countOnly){const s=n.agg;for(let o=0,f=s.length;o<f;++o)s[o].set(t)}return t},changes(n){const t=this._adds,i=this._mods,s=this._prev,o=this._drop,f=n.add,d=n.rem,p=n.mod;let v,_,k,P;if(s)for(_ in s)v=s[_],(!o||v.num)&&d.push(v.tuple);for(k=0,P=this._alen;k<P;++k)f.push(this.celltuple(t[k])),t[k]=null;for(k=0,P=this._mlen;k<P;++k)v=i[k],(v.num===0&&o?d:p).push(this.celltuple(v)),i[k]=null;return this._alen=this._mlen=0,this._prev=null,n}});const EPSILON$1=1e-14;function Bin(n){Transform.call(this,null,n)}Bin.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};inherits(Bin,Transform,{transform(n,t){const i=n.interval!==!1,s=this._bins(n),o=s.start,f=s.step,d=n.as||["bin0","bin1"],p=d[0],v=d[1];let _;return n.modified()?(t=t.reflow(!0),_=t.SOURCE):_=t.modified(accessorFields(n.field))?t.ADD_MOD:t.ADD,t.visit(_,i?k=>{const P=s(k);k[p]=P,k[v]=P==null?null:o+f*(1+(P-o)/f)}:k=>k[p]=s(k)),t.modifies(i?d:p)},_bins(n){if(this.value&&!n.modified())return this.value;const t=n.field,i=bin(n),s=i.step;let o=i.start,f=o+Math.ceil((i.stop-o)/s)*s,d,p;(d=n.anchor)!=null&&(p=d-(o+s*Math.floor((d-o)/s)),o+=p,f+=p);const v=function(_){let k=toNumber(t(_));return k==null?null:k<o?-1/0:k>f?1/0:(k=Math.max(o,Math.min(k,f-s)),o+s*Math.floor(EPSILON$1+(k-o)/s))};return v.start=o,v.stop=i.stop,v.step=s,this.value=accessor(v,accessorFields(t),n.name||"bin_"+accessorName(t))}});function SortedList(n,t,i){const s=n;let o=t||[],f=i||[],d={},p=0;return{add:v=>f.push(v),remove:v=>d[s(v)]=++p,size:()=>o.length,data:(v,_)=>(p&&(o=o.filter(k=>!d[s(k)]),d={},p=0),_&&v&&o.sort(v),f.length&&(o=v?merge$3(v,o,f.sort(v)):o.concat(f),f=[]),o)}}function Collect$1(n){Transform.call(this,[],n)}Collect$1.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};inherits(Collect$1,Transform,{transform(n,t){const i=t.fork(t.ALL),s=SortedList(tupleid,this.value,i.materialize(i.ADD).add),o=n.sort,f=t.changed()||o&&(n.modified("sort")||t.modified(o.fields));return i.visit(i.REM,s.remove),this.modified(f),this.value=i.source=s.data(stableCompare(o),f),t.source&&t.source.root&&(this.value.root=t.source.root),i}});function Compare$1(n){Operator.call(this,null,update$5,n)}inherits(Compare$1,Operator);function update$5(n){return this.value&&!n.modified()?this.value:compare$2(n.fields,n.orders)}function CountPattern(n){Transform.call(this,null,n)}CountPattern.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function tokenize(n,t,i){switch(t){case"upper":n=n.toUpperCase();break;case"lower":n=n.toLowerCase();break}return n.match(i)}inherits(CountPattern,Transform,{transform(n,t){const i=P=>L=>{for(var G=tokenize(p(L),n.case,f)||[],Z,W=0,j=G.length;W<j;++W)d.test(Z=G[W])||P(Z)},s=this._parameterCheck(n,t),o=this._counts,f=this._match,d=this._stop,p=n.field,v=n.as||["text","count"],_=i(P=>o[P]=1+(o[P]||0)),k=i(P=>o[P]-=1);return s?t.visit(t.SOURCE,_):(t.visit(t.ADD,_),t.visit(t.REM,k)),this._finish(t,v)},_parameterCheck(n,t){let i=!1;return(n.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(n.stopwords||"")+"$","i"),i=!0),(n.modified("pattern")||!this._match)&&(this._match=new RegExp(n.pattern||"[\\w']+","g"),i=!0),(n.modified("field")||t.modified(n.field.fields))&&(i=!0),i&&(this._counts={}),i},_finish(n,t){const i=this._counts,s=this._tuples||(this._tuples={}),o=t[0],f=t[1],d=n.fork(n.NO_SOURCE|n.NO_FIELDS);let p,v,_;for(p in i)v=s[p],_=i[p]||0,!v&&_?(s[p]=v=ingest$1({}),v[o]=p,v[f]=_,d.add.push(v)):_===0?(v&&d.rem.push(v),i[p]=null,s[p]=null):v[f]!==_&&(v[f]=_,d.mod.push(v));return d.modifies(t)}});function Cross(n){Transform.call(this,null,n)}Cross.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};inherits(Cross,Transform,{transform(n,t){const i=t.fork(t.NO_SOURCE),s=n.as||["a","b"],o=s[0],f=s[1],d=!this.value||t.changed(t.ADD_REM)||n.modified("as")||n.modified("filter");let p=this.value;return d?(p&&(i.rem=p),p=t.materialize(t.SOURCE).source,i.add=this.value=cross(p,o,f,n.filter||truthy)):i.mod=p,i.source=this.value,i.modifies(s)}});function cross(n,t,i,s){for(var o=[],f={},d=n.length,p=0,v,_;p<d;++p)for(f[t]=_=n[p],v=0;v<d;++v)f[i]=n[v],s(f)&&(o.push(ingest$1(f)),f={},f[t]=_);return o}const Distributions={kde,mixture:mixture$1,normal:gaussian,lognormal,uniform},DISTRIBUTIONS="distributions",FUNCTION="function",FIELD="field";function parse$4(n,t){const i=n[FUNCTION];has$1(Distributions,i)||error$1("Unknown distribution function: "+i);const s=Distributions[i]();for(const o in n)o===FIELD?s.data((n.from||t()).map(n[o])):o===DISTRIBUTIONS?s[o](n[o].map(f=>parse$4(f,t))):typeof s[o]===FUNCTION&&s[o](n[o]);return s}function Density(n){Transform.call(this,null,n)}const distributions=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],mixture={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:distributions},{name:"weights",type:"number",array:!0}]};Density.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:distributions.concat(mixture)},{name:"as",type:"string",array:!0,default:["value","density"]}]};inherits(Density,Transform,{transform(n,t){const i=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||n.modified()){const s=parse$4(n.distribution,source$2(t)),o=n.steps||n.minsteps||25,f=n.steps||n.maxsteps||200;let d=n.method||"pdf";d!=="pdf"&&d!=="cdf"&&error$1("Invalid density method: "+d),!n.extent&&!s.data&&error$1("Missing density extent parameter."),d=s[d];const p=n.as||["value","density"],v=n.extent||extent(s.data()),_=sampleCurve(d,v,o,f).map(k=>{const P={};return P[p[0]]=k[0],P[p[1]]=k[1],ingest$1(P)});this.value&&(i.rem=this.value),this.value=i.add=i.source=_}return i}});function source$2(n){return()=>n.materialize(n.SOURCE).source}function fieldNames(n,t){return n?n.map((i,s)=>t[s]||accessorName(i)):null}function partition$1$1(n,t,i){const s=[],o=P=>P(v);let f,d,p,v,_,k;if(t==null)s.push(n.map(i));else for(f={},d=0,p=n.length;d<p;++d)v=n[d],_=t.map(o),k=f[_],k||(f[_]=k=[],k.dims=_,s.push(k)),k.push(i(v));return s}const Output$5="bin";function DotBin(n){Transform.call(this,null,n)}DotBin.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Output$5}]};const autostep=(n,t)=>span(extent(n,t))/30;inherits(DotBin,Transform,{transform(n,t){if(this.value&&!(n.modified()||t.changed()))return t;const i=t.materialize(t.SOURCE).source,s=partition$1$1(t.source,n.groupby,identity$7),o=n.smooth||!1,f=n.field,d=n.step||autostep(i,f),p=stableCompare((Z,W)=>f(Z)-f(W)),v=n.as||Output$5,_=s.length;let k=1/0,P=-1/0,L=0,G;for(;L<_;++L){const Z=s[L].sort(p);G=-1;for(const W of dotbin(Z,d,o,f))W<k&&(k=W),W>P&&(P=W),Z[++G][v]=W}return this.value={start:k,stop:P,step:d},t.reflow(!0).modifies(v)}});function Expression$1(n){Operator.call(this,null,update$4,n),this.modified(!0)}inherits(Expression$1,Operator);function update$4(n){const t=n.expr;return this.value&&!n.modified("expr")?this.value:accessor(i=>t(i,n),accessorFields(t),accessorName(t))}function Extent(n){Transform.call(this,[void 0,void 0],n)}Extent.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};inherits(Extent,Transform,{transform(n,t){const i=this.value,s=n.field,o=t.changed()||t.modified(s.fields)||n.modified("field");let f=i[0],d=i[1];if((o||f==null)&&(f=1/0,d=-1/0),t.visit(o?t.SOURCE:t.ADD,p=>{const v=toNumber(s(p));v!=null&&(v<f&&(f=v),v>d&&(d=v))}),!Number.isFinite(f)||!Number.isFinite(d)){let p=accessorName(s);p&&(p=` for field "${p}"`),t.dataflow.warn(`Infinite extent${p}: [${f}, ${d}]`),f=d=void 0}this.value=[f,d]}});function Subflow(n,t){Operator.call(this,n),this.parent=t,this.count=0}inherits(Subflow,Operator,{connect(n){return this.detachSubflow=n.detachSubflow,this.targets().add(n),n.source=this},add(n){this.count+=1,this.value.add.push(n)},rem(n){this.count-=1,this.value.rem.push(n)},mod(n){this.value.mod.push(n)},init(n){this.value.init(n,n.NO_SOURCE)},evaluate(){return this.value}});function Facet$1(n){Transform.call(this,{},n),this._keys=fastmap();const t=this._targets=[];t.active=0,t.forEach=i=>{for(let s=0,o=t.active;s<o;++s)i(t[s],s,t)}}inherits(Facet$1,Transform,{activate(n){this._targets[this._targets.active++]=n},subflow(n,t,i,s){const o=this.value;let f=has$1(o,n)&&o[n],d,p;return f?f.value.stamp<i.stamp&&(f.init(i),this.activate(f)):(p=s||(p=this._group[n])&&p.tuple,d=i.dataflow,f=new Subflow(i.fork(i.NO_SOURCE),this),d.add(f).connect(t(d,n,p)),o[n]=f,this.activate(f)),f},clean(){const n=this.value;let t=0;for(const i in n)if(n[i].count===0){const s=n[i].detachSubflow;s&&s(),delete n[i],++t}if(t){const i=this._targets.filter(s=>s&&s.count>0);this.initTargets(i)}},initTargets(n){const t=this._targets,i=t.length,s=n?n.length:0;let o=0;for(;o<s;++o)t[o]=n[o];for(;o<i&&t[o]!=null;++o)t[o]=null;t.active=s},transform(n,t){const i=t.dataflow,s=n.key,o=n.subflow,f=this._keys,d=n.modified("key"),p=v=>this.subflow(v,o,t);return this._group=n.group||{},this.initTargets(),t.visit(t.REM,v=>{const _=tupleid(v),k=f.get(_);k!==void 0&&(f.delete(_),p(k).rem(v))}),t.visit(t.ADD,v=>{const _=s(v);f.set(tupleid(v),_),p(_).add(v)}),d||t.modified(s.fields)?t.visit(t.MOD,v=>{const _=tupleid(v),k=f.get(_),P=s(v);k===P?p(P).mod(v):(f.set(_,P),p(k).rem(v),p(P).add(v))}):t.changed(t.MOD)&&t.visit(t.MOD,v=>{p(f.get(tupleid(v))).mod(v)}),d&&t.visit(t.REFLOW,v=>{const _=tupleid(v),k=f.get(_),P=s(v);k!==P&&(f.set(_,P),p(k).rem(v),p(P).add(v))}),t.clean()?i.runAfter(()=>{this.clean(),f.clean()}):f.empty>i.cleanThreshold&&i.runAfter(f.clean),t}});function Field$1(n){Operator.call(this,null,update$3,n)}inherits(Field$1,Operator);function update$3(n){return this.value&&!n.modified()?this.value:isArray(n.name)?array$5(n.name).map(t=>field$1(t)):field$1(n.name,n.as)}function Filter(n){Transform.call(this,fastmap(),n)}Filter.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};inherits(Filter,Transform,{transform(n,t){const i=t.dataflow,s=this.value,o=t.fork(),f=o.add,d=o.rem,p=o.mod,v=n.expr;let _=!0;t.visit(t.REM,P=>{const L=tupleid(P);s.has(L)?s.delete(L):d.push(P)}),t.visit(t.ADD,P=>{v(P,n)?f.push(P):s.set(tupleid(P),1)});function k(P){const L=tupleid(P),G=v(P,n),Z=s.get(L);G&&Z?(s.delete(L),f.push(P)):!G&&!Z?(s.set(L,1),d.push(P)):_&&G&&!Z&&p.push(P)}return t.visit(t.MOD,k),n.modified()&&(_=!1,t.visit(t.REFLOW,k)),s.empty>i.cleanThreshold&&i.runAfter(s.clean),o}});function Flatten(n){Transform.call(this,[],n)}Flatten.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};inherits(Flatten,Transform,{transform(n,t){const i=t.fork(t.NO_SOURCE),s=n.fields,o=fieldNames(s,n.as||[]),f=n.index||null,d=o.length;return i.rem=this.value,t.visit(t.SOURCE,p=>{const v=s.map(Z=>Z(p)),_=v.reduce((Z,W)=>Math.max(Z,W.length),0);let k=0,P,L,G;for(;k<_;++k){for(L=derive(p),P=0;P<d;++P)L[o[P]]=(G=v[P][k])==null?null:G;f&&(L[f]=k),i.add.push(L)}}),this.value=i.source=i.add,f&&i.modifies(f),i.modifies(o)}});function Fold(n){Transform.call(this,[],n)}Fold.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};inherits(Fold,Transform,{transform(n,t){const i=t.fork(t.NO_SOURCE),s=n.fields,o=s.map(accessorName),f=n.as||["key","value"],d=f[0],p=f[1],v=s.length;return i.rem=this.value,t.visit(t.SOURCE,_=>{for(let k=0,P;k<v;++k)P=derive(_),P[d]=o[k],P[p]=s[k](_),i.add.push(P)}),this.value=i.source=i.add,i.modifies(f)}});function Formula(n){Transform.call(this,null,n)}Formula.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};inherits(Formula,Transform,{transform(n,t){const i=n.expr,s=n.as,o=n.modified(),f=n.initonly?t.ADD:o?t.SOURCE:t.modified(i.fields)||t.modified(s)?t.ADD_MOD:t.ADD;return o&&(t=t.materialize().reflow(!0)),n.initonly||t.modifies(s),t.visit(f,d=>d[s]=i(d,n))}});function Generate(n){Transform.call(this,[],n)}inherits(Generate,Transform,{transform(n,t){const i=t.fork(t.ALL),s=n.generator;let o=this.value,f=n.size-o.length,d,p,v;if(f>0){for(d=[];--f>=0;)d.push(v=ingest$1(s(n))),o.push(v);i.add=i.add.length?i.materialize(i.ADD).add.concat(d):d}else p=o.slice(0,-f),i.rem=i.rem.length?i.materialize(i.REM).rem.concat(p):p,o=o.slice(-f);return i.source=this.value=o,i}});const Methods$1={value:"value",median,mean,min:min$7,max:max$8},Empty$1=[];function Impute(n){Transform.call(this,[],n)}Impute.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function getValue(n){var t=n.method||Methods$1.value,i;if(Methods$1[t]==null)error$1("Unrecognized imputation method: "+t);else return t===Methods$1.value?(i=n.value!==void 0?n.value:0,()=>i):Methods$1[t]}function getField$1(n){const t=n.field;return i=>i?t(i):NaN}inherits(Impute,Transform,{transform(n,t){var i=t.fork(t.ALL),s=getValue(n),o=getField$1(n),f=accessorName(n.field),d=accessorName(n.key),p=(n.groupby||[]).map(accessorName),v=partition$4(t.source,n.groupby,n.key,n.keyvals),_=[],k=this.value,P=v.domain.length,L,G,Z,W,j,H,me,$e,De,le;for(j=0,$e=v.length;j<$e;++j)for(L=v[j],Z=L.values,G=NaN,me=0;me<P;++me)if(L[me]==null){for(W=v.domain[me],le={_impute:!0},H=0,De=Z.length;H<De;++H)le[p[H]]=Z[H];le[d]=W,le[f]=Number.isNaN(G)?G=s(L,o):G,_.push(ingest$1(le))}return _.length&&(i.add=i.materialize(i.ADD).add.concat(_)),k.length&&(i.rem=i.materialize(i.REM).rem.concat(k)),this.value=_,i}});function partition$4(n,t,i,s){var o=H=>H(j),f=[],d=s?s.slice():[],p={},v={},_,k,P,L,G,Z,W,j;for(d.forEach((H,me)=>p[H]=me+1),L=0,W=n.length;L<W;++L)j=n[L],Z=i(j),G=p[Z]||(p[Z]=d.push(Z)),k=(_=t?t.map(o):Empty$1)+"",(P=v[k])||(P=v[k]=[],f.push(P),P.values=_),P[G-1]=j;return f.domain=d,f}function JoinAggregate(n){Aggregate$1.call(this,n)}JoinAggregate.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:ValidAggregateOps},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};inherits(JoinAggregate,Aggregate$1,{transform(n,t){const i=this,s=n.modified();let o;return i.value&&(s||t.modified(i._inputs,!0))?(o=i.value=s?i.init(n):{},t.visit(t.SOURCE,f=>i.add(f))):(o=i.value=i.value||this.init(n),t.visit(t.REM,f=>i.rem(f)),t.visit(t.ADD,f=>i.add(f))),i.changes(),t.visit(t.SOURCE,f=>{extend$3(f,o[i.cellkey(f)].tuple)}),t.reflow(s).modifies(this._outputs)},changes(){const n=this._adds,t=this._mods;let i,s;for(i=0,s=this._alen;i<s;++i)this.celltuple(n[i]),n[i]=null;for(i=0,s=this._mlen;i<s;++i)this.celltuple(t[i]),t[i]=null;this._alen=this._mlen=0}});function KDE(n){Transform.call(this,null,n)}KDE.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};inherits(KDE,Transform,{transform(n,t){const i=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||n.modified()){const s=t.materialize(t.SOURCE).source,o=partition$1$1(s,n.groupby,n.field),f=(n.groupby||[]).map(accessorName),d=n.bandwidth,p=n.cumulative?"cdf":"pdf",v=n.as||["value","density"],_=[];let k=n.extent,P=n.steps||n.minsteps||25,L=n.steps||n.maxsteps||200;p!=="pdf"&&p!=="cdf"&&error$1("Invalid density method: "+p),n.resolve==="shared"&&(k||(k=extent(s,n.field)),P=L=n.steps||L),o.forEach(G=>{const Z=kde(G,d)[p],W=n.counts?G.length:1,j=k||extent(G);sampleCurve(Z,j,P,L).forEach(H=>{const me={};for(let $e=0;$e<f.length;++$e)me[f[$e]]=G.dims[$e];me[v[0]]=H[0],me[v[1]]=H[1]*W,_.push(ingest$1(me))})}),this.value&&(i.rem=this.value),this.value=i.add=i.source=_}return i}});function Key$1(n){Operator.call(this,null,update$2,n)}inherits(Key$1,Operator);function update$2(n){return this.value&&!n.modified()?this.value:key(n.fields,n.flat)}function Load$1(n){Transform.call(this,[],n),this._pending=null}inherits(Load$1,Transform,{transform(n,t){const i=t.dataflow;return this._pending?output(this,t,this._pending):stop(n)?t.StopPropagation:n.values?output(this,t,i.parse(n.values,n.format)):n.async?{async:i.request(n.url,n.format).then(o=>(this._pending=array$5(o.data),f=>f.touch(this)))}:i.request(n.url,n.format).then(s=>output(this,t,array$5(s.data)))}});function stop(n){return n.modified("async")&&!(n.modified("values")||n.modified("url")||n.modified("format"))}function output(n,t,i){i.forEach(ingest$1);const s=t.fork(t.NO_FIELDS&t.NO_SOURCE);return s.rem=n.value,n.value=s.source=s.add=i,n._pending=null,s.rem.length&&s.clean(!0),s}function Lookup(n){Transform.call(this,{},n)}Lookup.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};inherits(Lookup,Transform,{transform(n,t){const i=n.fields,s=n.index,o=n.values,f=n.default==null?null:n.default,d=n.modified(),p=i.length;let v=d?t.SOURCE:t.ADD,_=t,k=n.as,P,L,G;return o?(L=o.length,p>1&&!k&&error$1('Multi-field lookup requires explicit "as" parameter.'),k&&k.length!==p*L&&error$1('The "as" parameter has too few output field names.'),k=k||o.map(accessorName),P=function(Z){for(var W=0,j=0,H,me;W<p;++W)if(me=s.get(i[W](Z)),me==null)for(H=0;H<L;++H,++j)Z[k[j]]=f;else for(H=0;H<L;++H,++j)Z[k[j]]=o[H](me)}):(k||error$1("Missing output field names."),P=function(Z){for(var W=0,j;W<p;++W)j=s.get(i[W](Z)),Z[k[W]]=j??f}),d?_=t.reflow(!0):(G=i.some(Z=>t.modified(Z.fields)),v|=G?t.MOD:0),t.visit(v,P),_.modifies(k)}});function MultiExtent$1(n){Operator.call(this,null,update$1,n)}inherits(MultiExtent$1,Operator);function update$1(n){if(this.value&&!n.modified())return this.value;const t=n.extents,i=t.length;let s=1/0,o=-1/0,f,d;for(f=0;f<i;++f)d=t[f],d[0]<s&&(s=d[0]),d[1]>o&&(o=d[1]);return[s,o]}function MultiValues$1(n){Operator.call(this,null,update,n)}inherits(MultiValues$1,Operator);function update(n){return this.value&&!n.modified()?this.value:n.values.reduce((t,i)=>t.concat(i),[])}function Params$2(n){Transform.call(this,null,n)}inherits(Params$2,Transform,{transform(n,t){return this.modified(n.modified()),this.value=n,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Pivot(n){Aggregate$1.call(this,n)}Pivot.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:ValidAggregateOps,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};inherits(Pivot,Aggregate$1,{_transform:Aggregate$1.prototype.transform,transform(n,t){return this._transform(aggregateParams(n,t),t)}});function aggregateParams(n,t){const i=n.field,s=n.value,o=(n.op==="count"?"__count__":n.op)||"sum",f=accessorFields(i).concat(accessorFields(s)),d=pivotKeys(i,n.limit||0,t);return t.changed()&&n.set("__pivot__",null,null,!0),{key:n.key,groupby:n.groupby,ops:d.map(()=>o),fields:d.map(p=>get$4(p,i,s,f)),as:d.map(p=>p+""),modified:n.modified.bind(n)}}function get$4(n,t,i,s){return accessor(o=>t(o)===n?i(o):NaN,s,n+"")}function pivotKeys(n,t,i){const s={},o=[];return i.visit(i.SOURCE,f=>{const d=n(f);s[d]||(s[d]=1,o.push(d))}),o.sort(ascending$8),t?o.slice(0,t):o}function PreFacet$1(n){Facet$1.call(this,n)}inherits(PreFacet$1,Facet$1,{transform(n,t){const i=n.subflow,s=n.field,o=f=>this.subflow(tupleid(f),i,t,f);return(n.modified("field")||s&&t.modified(accessorFields(s)))&&error$1("PreFacet does not support field modification."),this.initTargets(),s?(t.visit(t.MOD,f=>{const d=o(f);s(f).forEach(p=>d.mod(p))}),t.visit(t.ADD,f=>{const d=o(f);s(f).forEach(p=>d.add(ingest$1(p)))}),t.visit(t.REM,f=>{const d=o(f);s(f).forEach(p=>d.rem(p))})):(t.visit(t.MOD,f=>o(f).mod(f)),t.visit(t.ADD,f=>o(f).add(f)),t.visit(t.REM,f=>o(f).rem(f))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Project(n){Transform.call(this,null,n)}Project.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};inherits(Project,Transform,{transform(n,t){const i=t.fork(t.NO_SOURCE),s=n.fields,o=fieldNames(n.fields,n.as||[]),f=s?(p,v)=>project$1(p,v,s,o):rederive;let d;return this.value?d=this.value:(t=t.addAll(),d=this.value={}),t.visit(t.REM,p=>{const v=tupleid(p);i.rem.push(d[v]),d[v]=null}),t.visit(t.ADD,p=>{const v=f(p,ingest$1({}));d[tupleid(p)]=v,i.add.push(v)}),t.visit(t.MOD,p=>{i.mod.push(f(p,d[tupleid(p)]))}),i}});function project$1(n,t,i,s){for(let o=0,f=i.length;o<f;++o)t[s[o]]=i[o](n);return t}function Proxy$2(n){Transform.call(this,null,n)}inherits(Proxy$2,Transform,{transform(n,t){return this.value=n.value,n.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Quantile$1(n){Transform.call(this,null,n)}Quantile$1.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const EPSILON$2=1e-14;inherits(Quantile$1,Transform,{transform(n,t){const i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=n.as||["prob","value"];if(this.value&&!n.modified()&&!t.changed())return i.source=this.value,i;const o=t.materialize(t.SOURCE).source,f=partition$1$1(o,n.groupby,n.field),d=(n.groupby||[]).map(accessorName),p=[],v=n.step||.01,_=n.probs||range$9(v/2,1-EPSILON$2,v),k=_.length;return f.forEach(P=>{const L=quantiles(P,_);for(let G=0;G<k;++G){const Z={};for(let W=0;W<d.length;++W)Z[d[W]]=P.dims[W];Z[s[0]]=_[G],Z[s[1]]=L[G],p.push(ingest$1(Z))}}),this.value&&(i.rem=this.value),this.value=i.add=i.source=p,i}});function Relay$1(n){Transform.call(this,null,n)}inherits(Relay$1,Transform,{transform(n,t){let i,s;return this.value?s=this.value:(i=t=t.addAll(),s=this.value={}),n.derive&&(i=t.fork(t.NO_SOURCE),t.visit(t.REM,o=>{const f=tupleid(o);i.rem.push(s[f]),s[f]=null}),t.visit(t.ADD,o=>{const f=derive(o);s[tupleid(o)]=f,i.add.push(f)}),t.visit(t.MOD,o=>{const f=s[tupleid(o)];for(const d in o)f[d]=o[d],i.modifies(d);i.mod.push(f)})),i}});function Sample(n){Transform.call(this,[],n),this.count=0}Sample.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};inherits(Sample,Transform,{transform(n,t){const i=t.fork(t.NO_SOURCE),s=n.modified("size"),o=n.size,f=this.value.reduce((k,P)=>(k[tupleid(P)]=1,k),{});let d=this.value,p=this.count,v=0;function _(k){let P,L;d.length<o?d.push(k):(L=~~((p+1)*random$2()),L<d.length&&L>=v&&(P=d[L],f[tupleid(P)]&&i.rem.push(P),d[L]=k)),++p}if(t.rem.length&&(t.visit(t.REM,k=>{const P=tupleid(k);f[P]&&(f[P]=-1,i.rem.push(k)),--p}),d=d.filter(k=>f[tupleid(k)]!==-1)),(t.rem.length||s)&&d.length<o&&t.source&&(v=p=d.length,t.visit(t.SOURCE,k=>{f[tupleid(k)]||_(k)}),v=-1),s&&d.length>o){const k=d.length-o;for(let P=0;P<k;++P)f[tupleid(d[P])]=-1,i.rem.push(d[P]);d=d.slice(k)}return t.mod.length&&t.visit(t.MOD,k=>{f[tupleid(k)]&&i.mod.push(k)}),t.add.length&&t.visit(t.ADD,_),(t.add.length||v<0)&&(i.add=d.filter(k=>!f[tupleid(k)])),this.count=p,this.value=i.source=d,i}});function Sequence(n){Transform.call(this,null,n)}Sequence.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};inherits(Sequence,Transform,{transform(n,t){if(this.value&&!n.modified())return;const i=t.materialize().fork(t.MOD),s=n.as||"data";return i.rem=this.value?t.rem.concat(this.value):t.rem,this.value=range$9(n.start,n.stop,n.step||1).map(o=>{const f={};return f[s]=o,ingest$1(f)}),i.add=t.add.concat(this.value),i}});function Sieve$1(n){Transform.call(this,null,n),this.modified(!0)}inherits(Sieve$1,Transform,{transform(n,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function TimeUnit(n){Transform.call(this,null,n)}const OUTPUT=["unit0","unit1"];TimeUnit.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:TIME_UNITS,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:OUTPUT}]};inherits(TimeUnit,Transform,{transform(n,t){const i=n.field,s=n.interval!==!1,o=n.timezone==="utc",f=this._floor(n,t),d=(o?utcInterval:timeInterval)(f.unit).offset,p=n.as||OUTPUT,v=p[0],_=p[1],k=f.step;let P=f.start||1/0,L=f.stop||-1/0,G=t.ADD;return(n.modified()||t.changed(t.REM)||t.modified(accessorFields(i)))&&(t=t.reflow(!0),G=t.SOURCE,P=1/0,L=-1/0),t.visit(G,Z=>{const W=i(Z);let j,H;W==null?(Z[v]=null,s&&(Z[_]=null)):(Z[v]=j=H=f(W),s&&(Z[_]=H=d(j,k)),j<P&&(P=j),H>L&&(L=H))}),f.start=P,f.stop=L,t.modifies(s?p:v)},_floor(n,t){const i=n.timezone==="utc",{units:s,step:o}=n.units?{units:n.units,step:n.step||1}:bin$1({extent:n.extent||extent(t.materialize(t.SOURCE).source,n.field),maxbins:n.maxbins}),f=timeUnits(s),d=this.value||{},p=(i?utcFloor:timeFloor)(f,o);return p.unit=peek$2(f),p.units=f,p.step=o,p.start=d.start,p.stop=d.stop,this.value=p}});function TupleIndex(n){Transform.call(this,fastmap(),n)}inherits(TupleIndex,Transform,{transform(n,t){const i=t.dataflow,s=n.field,o=this.value,f=p=>o.set(s(p),p);let d=!0;return n.modified("field")||t.modified(s.fields)?(o.clear(),t.visit(t.SOURCE,f)):t.changed()?(t.visit(t.REM,p=>o.delete(s(p))),t.visit(t.ADD,f)):d=!1,this.modified(d),o.empty>i.cleanThreshold&&i.runAfter(o.clean),t.fork()}});function Values$1(n){Transform.call(this,null,n)}inherits(Values$1,Transform,{transform(n,t){(!this.value||n.modified("field")||n.modified("sort")||t.changed()||n.sort&&t.modified(n.sort.fields))&&(this.value=(n.sort?t.source.slice().sort(stableCompare(n.sort)):t.source).map(n.field))}});function WindowOp(n,t,i,s){const o=WindowOps[n](t,i);return{init:o.init||zero$9,update:function(f,d){d[s]=o.next(f)}}}const WindowOps={row_number:function(){return{next:n=>n.index+1}},rank:function(){let n;return{init:()=>n=1,next:t=>{const i=t.index,s=t.data;return i&&t.compare(s[i-1],s[i])?n=i+1:n}}},dense_rank:function(){let n;return{init:()=>n=1,next:t=>{const i=t.index,s=t.data;return i&&t.compare(s[i-1],s[i])?++n:n}}},percent_rank:function(){const n=WindowOps.rank(),t=n.next;return{init:n.init,next:i=>(t(i)-1)/(i.data.length-1)}},cume_dist:function(){let n;return{init:()=>n=0,next:t=>{const i=t.data,s=t.compare;let o=t.index;if(n<o){for(;o+1<i.length&&!s(i[o],i[o+1]);)++o;n=o}return(1+n)/i.length}}},ntile:function(n,t){t=+t,t>0||error$1("ntile num must be greater than zero.");const i=WindowOps.cume_dist(),s=i.next;return{init:i.init,next:o=>Math.ceil(t*s(o))}},lag:function(n,t){return t=+t||1,{next:i=>{const s=i.index-t;return s>=0?n(i.data[s]):null}}},lead:function(n,t){return t=+t||1,{next:i=>{const s=i.index+t,o=i.data;return s<o.length?n(o[s]):null}}},first_value:function(n){return{next:t=>n(t.data[t.i0])}},last_value:function(n){return{next:t=>n(t.data[t.i1-1])}},nth_value:function(n,t){return t=+t,t>0||error$1("nth_value nth must be greater than zero."),{next:i=>{const s=i.i0+(t-1);return s<i.i1?n(i.data[s]):null}}},prev_value:function(n){let t;return{init:()=>t=null,next:i=>{const s=n(i.data[i.index]);return s!=null?t=s:t}}},next_value:function(n){let t,i;return{init:()=>(t=null,i=-1),next:s=>{const o=s.data;return s.index<=i?t:(i=find$2(n,o,s.index))<0?(i=o.length,t=null):t=n(o[i])}}}};function find$2(n,t,i){for(let s=t.length;i<s;++i)if(n(t[i])!=null)return i;return-1}const ValidWindowOps=Object.keys(WindowOps);function WindowState(n){const t=array$5(n.ops),i=array$5(n.fields),s=array$5(n.params),o=array$5(n.aggregate_params),f=array$5(n.as),d=this.outputs=[],p=this.windows=[],v={},_={},k=[],P=[];let L=!0;function G(Z){array$5(accessorFields(Z)).forEach(W=>v[W]=1)}G(n.sort),t.forEach((Z,W)=>{const j=i[W],H=s[W],me=o[W]||null,$e=accessorName(j),De=measureName(Z,$e,f[W]);if(G(j),d.push(De),has$1(WindowOps,Z))p.push(WindowOp(Z,j,H,De));else{if(j==null&&Z!=="count"&&error$1("Null aggregate field specified."),Z==="count"){k.push(De);return}L=!1;let le=_[$e];le||(le=_[$e]=[],le.field=j,P.push(le)),le.push(createMeasure(Z,me,De))}}),(k.length||P.length)&&(this.cell=cell(P,k,L)),this.inputs=Object.keys(v)}const prototype=WindowState.prototype;prototype.init=function(){this.windows.forEach(n=>n.init()),this.cell&&this.cell.init()};prototype.update=function(n,t){const i=this.cell,s=this.windows,o=n.data,f=s&&s.length;let d;if(i){for(d=n.p0;d<n.i0;++d)i.rem(o[d]);for(d=n.p1;d<n.i1;++d)i.add(o[d]);i.set(t)}for(d=0;d<f;++d)s[d].update(n,t)};function cell(n,t,i){n=n.map(v=>compileMeasures(v,v.field));const s={num:0,agg:null,store:!1,count:t};if(!i)for(var o=n.length,f=s.agg=Array(o),d=0;d<o;++d)f[d]=new n[d](s);if(s.store)var p=s.data=new TupleStore;return s.add=function(v){if(s.num+=1,!i){p&&p.add(v);for(let _=0;_<o;++_)f[_].add(f[_].get(v),v)}},s.rem=function(v){if(s.num-=1,!i){p&&p.rem(v);for(let _=0;_<o;++_)f[_].rem(f[_].get(v),v)}},s.set=function(v){let _,k;for(p&&p.values(),_=0,k=t.length;_<k;++_)v[t[_]]=s.num;if(!i)for(_=0,k=f.length;_<k;++_)f[_].set(v)},s.init=function(){s.num=0,p&&p.reset();for(let v=0;v<o;++v)f[v].init()},s}function Window(n){Transform.call(this,{},n),this._mlen=0,this._mods=[]}Window.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ValidWindowOps.concat(ValidAggregateOps)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};inherits(Window,Transform,{transform(n,t){this.stamp=t.stamp;const i=n.modified(),s=stableCompare(n.sort),o=groupkey(n.groupby),f=p=>this.group(o(p));let d=this.state;(!d||i)&&(d=this.state=new WindowState(n)),i||t.modified(d.inputs)?(this.value={},t.visit(t.SOURCE,p=>f(p).add(p))):(t.visit(t.REM,p=>f(p).remove(p)),t.visit(t.ADD,p=>f(p).add(p)));for(let p=0,v=this._mlen;p<v;++p)processPartition(this._mods[p],d,s,n);return this._mlen=0,this._mods=[],t.reflow(i).modifies(d.outputs)},group(n){let t=this.value[n];return t||(t=this.value[n]=SortedList(tupleid),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function processPartition(n,t,i,s){const o=s.sort,f=o&&!s.ignorePeers,d=s.frame||[null,0],p=n.data(i),v=p.length,_=f?bisector$3(o):null,k={i0:0,i1:0,p0:0,p1:0,index:0,data:p,compare:o||constant$6(-1)};t.init();for(let P=0;P<v;++P)setWindow(k,d,P,v),f&&adjustRange(k,_),t.update(k,p[P])}function setWindow(n,t,i,s){n.p0=n.i0,n.p1=n.i1,n.i0=t[0]==null?0:Math.max(0,i-Math.abs(t[0])),n.i1=t[1]==null?s:Math.min(s,i+Math.abs(t[1])+1),n.index=i}function adjustRange(n,t){const i=n.i0,s=n.i1-1,o=n.compare,f=n.data,d=f.length-1;i>0&&!o(f[i],f[i-1])&&(n.i0=t.left(f,f[i])),s<d&&!o(f[s],f[s+1])&&(n.i1=t.right(f,f[s]))}const tx$1=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Aggregate$1,bin:Bin,collect:Collect$1,compare:Compare$1,countpattern:CountPattern,cross:Cross,density:Density,dotbin:DotBin,expression:Expression$1,extent:Extent,facet:Facet$1,field:Field$1,filter:Filter,flatten:Flatten,fold:Fold,formula:Formula,generate:Generate,impute:Impute,joinaggregate:JoinAggregate,kde:KDE,key:Key$1,load:Load$1,lookup:Lookup,multiextent:MultiExtent$1,multivalues:MultiValues$1,params:Params$2,pivot:Pivot,prefacet:PreFacet$1,project:Project,proxy:Proxy$2,quantile:Quantile$1,relay:Relay$1,sample:Sample,sequence:Sequence,sieve:Sieve$1,subflow:Subflow,timeunit:TimeUnit,tupleindex:TupleIndex,values:Values$1,window:Window},Symbol.toStringTag,{value:"Module"}));function constant$4(n){return function(){return n}}const abs$7=Math.abs,atan2$6=Math.atan2,cos$9=Math.cos,max$7=Math.max,min$6=Math.min,sin$8=Math.sin,sqrt$a=Math.sqrt,epsilon$8=1e-12,pi$6=Math.PI,halfPi$4=pi$6/2,tau$5=2*pi$6;function acos$3(n){return n>1?0:n<-1?pi$6:Math.acos(n)}function asin$4(n){return n>=1?halfPi$4:n<=-1?-halfPi$4:Math.asin(n)}const pi$5=Math.PI,tau$4=2*pi$5,epsilon$7=1e-6,tauEpsilon=tau$4-epsilon$7;function append$1(n){this._+=n[0];for(let t=1,i=n.length;t<i;++t)this._+=arguments[t]+n[t]}function appendRound$1(n){let t=Math.floor(n);if(!(t>=0))throw new Error(`invalid digits: ${n}`);if(t>15)return append$1;const i=10**t;return function(s){this._+=s[0];for(let o=1,f=s.length;o<f;++o)this._+=Math.round(arguments[o]*i)/i+s[o]}}let Path$1=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?append$1:appendRound$1(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,s,o){this._append`Q${+t},${+i},${this._x1=+s},${this._y1=+o}`}bezierCurveTo(t,i,s,o,f,d){this._append`C${+t},${+i},${+s},${+o},${this._x1=+f},${this._y1=+d}`}arcTo(t,i,s,o,f){if(t=+t,i=+i,s=+s,o=+o,f=+f,f<0)throw new Error(`negative radius: ${f}`);let d=this._x1,p=this._y1,v=s-t,_=o-i,k=d-t,P=p-i,L=k*k+P*P;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(L>epsilon$7)if(!(Math.abs(P*v-_*k)>epsilon$7)||!f)this._append`L${this._x1=t},${this._y1=i}`;else{let G=s-d,Z=o-p,W=v*v+_*_,j=G*G+Z*Z,H=Math.sqrt(W),me=Math.sqrt(L),$e=f*Math.tan((pi$5-Math.acos((W+L-j)/(2*H*me)))/2),De=$e/me,le=$e/H;Math.abs(De-1)>epsilon$7&&this._append`L${t+De*k},${i+De*P}`,this._append`A${f},${f},0,0,${+(P*G>k*Z)},${this._x1=t+le*v},${this._y1=i+le*_}`}}arc(t,i,s,o,f,d){if(t=+t,i=+i,s=+s,d=!!d,s<0)throw new Error(`negative radius: ${s}`);let p=s*Math.cos(o),v=s*Math.sin(o),_=t+p,k=i+v,P=1^d,L=d?o-f:f-o;this._x1===null?this._append`M${_},${k}`:(Math.abs(this._x1-_)>epsilon$7||Math.abs(this._y1-k)>epsilon$7)&&this._append`L${_},${k}`,s&&(L<0&&(L=L%tau$4+tau$4),L>tauEpsilon?this._append`A${s},${s},0,1,${P},${t-p},${i-v}A${s},${s},0,1,${P},${this._x1=_},${this._y1=k}`:L>epsilon$7&&this._append`A${s},${s},0,${+(L>=pi$5)},${P},${this._x1=t+s*Math.cos(f)},${this._y1=i+s*Math.sin(f)}`)}rect(t,i,s,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${s=+s}v${+o}h${-s}Z`}toString(){return this._}};function path$3(){return new Path$1}path$3.prototype=Path$1.prototype;function withPath(n){let t=3;return n.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const s=Math.floor(i);if(!(s>=0))throw new RangeError(`invalid digits: ${i}`);t=s}return n},()=>new Path$1(t)}function arcInnerRadius(n){return n.innerRadius}function arcOuterRadius(n){return n.outerRadius}function arcStartAngle(n){return n.startAngle}function arcEndAngle(n){return n.endAngle}function arcPadAngle(n){return n&&n.padAngle}function intersect$3(n,t,i,s,o,f,d,p){var v=i-n,_=s-t,k=d-o,P=p-f,L=P*v-k*_;if(!(L*L<epsilon$8))return L=(k*(t-f)-P*(n-o))/L,[n+L*v,t+L*_]}function cornerTangents(n,t,i,s,o,f,d){var p=n-i,v=t-s,_=(d?f:-f)/sqrt$a(p*p+v*v),k=_*v,P=-_*p,L=n+k,G=t+P,Z=i+k,W=s+P,j=(L+Z)/2,H=(G+W)/2,me=Z-L,$e=W-G,De=me*me+$e*$e,le=o-f,Ce=L*W-Z*G,Me=($e<0?-1:1)*sqrt$a(max$7(0,le*le*De-Ce*Ce)),_n=(Ce*$e-me*Me)/De,_i=(-Ce*me-$e*Me)/De,ll=(Ce*$e+me*Me)/De,_l=(-Ce*me+$e*Me)/De,oa=_n-j,Ru=_i-H,ga=ll-j,_s=_l-H;return oa*oa+Ru*Ru>ga*ga+_s*_s&&(_n=ll,_i=_l),{cx:_n,cy:_i,x01:-k,y01:-P,x11:_n*(o/le-1),y11:_i*(o/le-1)}}function arc$2$1(){var n=arcInnerRadius,t=arcOuterRadius,i=constant$4(0),s=null,o=arcStartAngle,f=arcEndAngle,d=arcPadAngle,p=null,v=withPath(_);function _(){var k,P,L=+n.apply(this,arguments),G=+t.apply(this,arguments),Z=o.apply(this,arguments)-halfPi$4,W=f.apply(this,arguments)-halfPi$4,j=abs$7(W-Z),H=W>Z;if(p||(p=k=v()),G<L&&(P=G,G=L,L=P),!(G>epsilon$8))p.moveTo(0,0);else if(j>tau$5-epsilon$8)p.moveTo(G*cos$9(Z),G*sin$8(Z)),p.arc(0,0,G,Z,W,!H),L>epsilon$8&&(p.moveTo(L*cos$9(W),L*sin$8(W)),p.arc(0,0,L,W,Z,H));else{var me=Z,$e=W,De=Z,le=W,Ce=j,Me=j,_n=d.apply(this,arguments)/2,_i=_n>epsilon$8&&(s?+s.apply(this,arguments):sqrt$a(L*L+G*G)),ll=min$6(abs$7(G-L)/2,+i.apply(this,arguments)),_l=ll,oa=ll,Ru,ga;if(_i>epsilon$8){var _s=asin$4(_i/L*sin$8(_n)),Sa=asin$4(_i/G*sin$8(_n));(Ce-=_s*2)>epsilon$8?(_s*=H?1:-1,De+=_s,le-=_s):(Ce=0,De=le=(Z+W)/2),(Me-=Sa*2)>epsilon$8?(Sa*=H?1:-1,me+=Sa,$e-=Sa):(Me=0,me=$e=(Z+W)/2)}var Ra=G*cos$9(me),Da=G*sin$8(me),Fa=L*cos$9(le),Na=L*sin$8(le);if(ll>epsilon$8){var _a=G*cos$9($e),Pa=G*sin$8($e),qc=L*cos$9(De),uf=L*sin$8(De),_h;if(j<pi$6)if(_h=intersect$3(Ra,Da,qc,uf,_a,Pa,Fa,Na)){var Uh=Ra-_h[0],Kd=Da-_h[1],ud=_a-_h[0],sc=Pa-_h[1],Yd=1/sin$8(acos$3((Uh*ud+Kd*sc)/(sqrt$a(Uh*Uh+Kd*Kd)*sqrt$a(ud*ud+sc*sc)))/2),wg=sqrt$a(_h[0]*_h[0]+_h[1]*_h[1]);_l=min$6(ll,(L-wg)/(Yd-1)),oa=min$6(ll,(G-wg)/(Yd+1))}else _l=oa=0}Me>epsilon$8?oa>epsilon$8?(Ru=cornerTangents(qc,uf,Ra,Da,G,oa,H),ga=cornerTangents(_a,Pa,Fa,Na,G,oa,H),p.moveTo(Ru.cx+Ru.x01,Ru.cy+Ru.y01),oa<ll?p.arc(Ru.cx,Ru.cy,oa,atan2$6(Ru.y01,Ru.x01),atan2$6(ga.y01,ga.x01),!H):(p.arc(Ru.cx,Ru.cy,oa,atan2$6(Ru.y01,Ru.x01),atan2$6(Ru.y11,Ru.x11),!H),p.arc(0,0,G,atan2$6(Ru.cy+Ru.y11,Ru.cx+Ru.x11),atan2$6(ga.cy+ga.y11,ga.cx+ga.x11),!H),p.arc(ga.cx,ga.cy,oa,atan2$6(ga.y11,ga.x11),atan2$6(ga.y01,ga.x01),!H))):(p.moveTo(Ra,Da),p.arc(0,0,G,me,$e,!H)):p.moveTo(Ra,Da),!(L>epsilon$8)||!(Ce>epsilon$8)?p.lineTo(Fa,Na):_l>epsilon$8?(Ru=cornerTangents(Fa,Na,_a,Pa,L,-_l,H),ga=cornerTangents(Ra,Da,qc,uf,L,-_l,H),p.lineTo(Ru.cx+Ru.x01,Ru.cy+Ru.y01),_l<ll?p.arc(Ru.cx,Ru.cy,_l,atan2$6(Ru.y01,Ru.x01),atan2$6(ga.y01,ga.x01),!H):(p.arc(Ru.cx,Ru.cy,_l,atan2$6(Ru.y01,Ru.x01),atan2$6(Ru.y11,Ru.x11),!H),p.arc(0,0,L,atan2$6(Ru.cy+Ru.y11,Ru.cx+Ru.x11),atan2$6(ga.cy+ga.y11,ga.cx+ga.x11),H),p.arc(ga.cx,ga.cy,_l,atan2$6(ga.y11,ga.x11),atan2$6(ga.y01,ga.x01),!H))):p.arc(0,0,L,le,De,H)}if(p.closePath(),k)return p=null,k+""||null}return _.centroid=function(){var k=(+n.apply(this,arguments)+ +t.apply(this,arguments))/2,P=(+o.apply(this,arguments)+ +f.apply(this,arguments))/2-pi$6/2;return[cos$9(P)*k,sin$8(P)*k]},_.innerRadius=function(k){return arguments.length?(n=typeof k=="function"?k:constant$4(+k),_):n},_.outerRadius=function(k){return arguments.length?(t=typeof k=="function"?k:constant$4(+k),_):t},_.cornerRadius=function(k){return arguments.length?(i=typeof k=="function"?k:constant$4(+k),_):i},_.padRadius=function(k){return arguments.length?(s=k==null?null:typeof k=="function"?k:constant$4(+k),_):s},_.startAngle=function(k){return arguments.length?(o=typeof k=="function"?k:constant$4(+k),_):o},_.endAngle=function(k){return arguments.length?(f=typeof k=="function"?k:constant$4(+k),_):f},_.padAngle=function(k){return arguments.length?(d=typeof k=="function"?k:constant$4(+k),_):d},_.context=function(k){return arguments.length?(p=k??null,_):p},_}function array$4(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Linear$1(n){this._context=n}Linear$1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;default:this._context.lineTo(n,t);break}}};function curveLinear(n){return new Linear$1(n)}function x$3(n){return n[0]}function y$3(n){return n[1]}function line$2$1(n,t){var i=constant$4(!0),s=null,o=curveLinear,f=null,d=withPath(p);n=typeof n=="function"?n:n===void 0?x$3:constant$4(n),t=typeof t=="function"?t:t===void 0?y$3:constant$4(t);function p(v){var _,k=(v=array$4(v)).length,P,L=!1,G;for(s==null&&(f=o(G=d())),_=0;_<=k;++_)!(_<k&&i(P=v[_],_,v))===L&&((L=!L)?f.lineStart():f.lineEnd()),L&&f.point(+n(P,_,v),+t(P,_,v));if(G)return f=null,G+""||null}return p.x=function(v){return arguments.length?(n=typeof v=="function"?v:constant$4(+v),p):n},p.y=function(v){return arguments.length?(t=typeof v=="function"?v:constant$4(+v),p):t},p.defined=function(v){return arguments.length?(i=typeof v=="function"?v:constant$4(!!v),p):i},p.curve=function(v){return arguments.length?(o=v,s!=null&&(f=o(s)),p):o},p.context=function(v){return arguments.length?(v==null?s=f=null:f=o(s=v),p):s},p}function area$2$1(n,t,i){var s=null,o=constant$4(!0),f=null,d=curveLinear,p=null,v=withPath(_);n=typeof n=="function"?n:n===void 0?x$3:constant$4(+n),t=typeof t=="function"?t:constant$4(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?y$3:constant$4(+i);function _(P){var L,G,Z,W=(P=array$4(P)).length,j,H=!1,me,$e=new Array(W),De=new Array(W);for(f==null&&(p=d(me=v())),L=0;L<=W;++L){if(!(L<W&&o(j=P[L],L,P))===H)if(H=!H)G=L,p.areaStart(),p.lineStart();else{for(p.lineEnd(),p.lineStart(),Z=L-1;Z>=G;--Z)p.point($e[Z],De[Z]);p.lineEnd(),p.areaEnd()}H&&($e[L]=+n(j,L,P),De[L]=+t(j,L,P),p.point(s?+s(j,L,P):$e[L],i?+i(j,L,P):De[L]))}if(me)return p=null,me+""||null}function k(){return line$2$1().defined(o).curve(d).context(f)}return _.x=function(P){return arguments.length?(n=typeof P=="function"?P:constant$4(+P),s=null,_):n},_.x0=function(P){return arguments.length?(n=typeof P=="function"?P:constant$4(+P),_):n},_.x1=function(P){return arguments.length?(s=P==null?null:typeof P=="function"?P:constant$4(+P),_):s},_.y=function(P){return arguments.length?(t=typeof P=="function"?P:constant$4(+P),i=null,_):t},_.y0=function(P){return arguments.length?(t=typeof P=="function"?P:constant$4(+P),_):t},_.y1=function(P){return arguments.length?(i=P==null?null:typeof P=="function"?P:constant$4(+P),_):i},_.lineX0=_.lineY0=function(){return k().x(n).y(t)},_.lineY1=function(){return k().x(n).y(i)},_.lineX1=function(){return k().x(s).y(t)},_.defined=function(P){return arguments.length?(o=typeof P=="function"?P:constant$4(!!P),_):o},_.curve=function(P){return arguments.length?(d=P,f!=null&&(p=d(f)),_):d},_.context=function(P){return arguments.length?(P==null?f=p=null:p=d(f=P),_):f},_}const circle$1={draw(n,t){const i=sqrt$a(t/pi$6);n.moveTo(i,0),n.arc(0,0,i,0,tau$5)}};function Symbol$1(n,t){let i=null,s=withPath(o);n=typeof n=="function"?n:constant$4(n||circle$1),t=typeof t=="function"?t:constant$4(t===void 0?64:+t);function o(){let f;if(i||(i=f=s()),n.apply(this,arguments).draw(i,+t.apply(this,arguments)),f)return i=null,f+""||null}return o.type=function(f){return arguments.length?(n=typeof f=="function"?f:constant$4(f),o):n},o.size=function(f){return arguments.length?(t=typeof f=="function"?f:constant$4(+f),o):t},o.context=function(f){return arguments.length?(i=f??null,o):i},o}function noop$5(){}function point$7(n,t,i){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+t)/6,(n._y0+4*n._y1+i)/6)}function Basis(n){this._context=n}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$7(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$7(this,n,t);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=t}};function curveBasis(n){return new Basis(n)}function BasisClosed(n){this._context=n}BasisClosed.prototype={areaStart:noop$5,areaEnd:noop$5,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._x2=n,this._y2=t;break;case 1:this._point=2,this._x3=n,this._y3=t;break;case 2:this._point=3,this._x4=n,this._y4=t,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+t)/6);break;default:point$7(this,n,t);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=t}};function curveBasisClosed(n){return new BasisClosed(n)}function BasisOpen(n){this._context=n}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+n)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 3:this._point=4;default:point$7(this,n,t);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=t}};function curveBasisOpen(n){return new BasisOpen(n)}function Bundle(n,t){this._basis=new Basis(n),this._beta=t}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,t=this._y,i=n.length-1;if(i>0)for(var s=n[0],o=t[0],f=n[i]-s,d=t[i]-o,p=-1,v;++p<=i;)v=p/i,this._basis.point(this._beta*n[p]+(1-this._beta)*(s+v*f),this._beta*t[p]+(1-this._beta)*(o+v*d));this._x=this._y=null,this._basis.lineEnd()},point:function(n,t){this._x.push(+n),this._y.push(+t)}};const curveBundle=function n(t){function i(s){return t===1?new Basis(s):new Bundle(s,t)}return i.beta=function(s){return n(+s)},i}(.85);function point$6(n,t,i){n._context.bezierCurveTo(n._x1+n._k*(n._x2-n._x0),n._y1+n._k*(n._y2-n._y0),n._x2+n._k*(n._x1-t),n._y2+n._k*(n._y1-i),n._x2,n._y2)}function Cardinal(n,t){this._context=n,this._k=(1-t)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2,this._x1=n,this._y1=t;break;case 2:this._point=3;default:point$6(this,n,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const curveCardinal=function n(t){function i(s){return new Cardinal(s,t)}return i.tension=function(s){return n(+s)},i}(0);function CardinalClosed(n,t){this._context=n,this._k=(1-t)/6}CardinalClosed.prototype={areaStart:noop$5,areaEnd:noop$5,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._x3=n,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=t);break;case 2:this._point=3,this._x5=n,this._y5=t;break;default:point$6(this,n,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const curveCardinalClosed=function n(t){function i(s){return new CardinalClosed(s,t)}return i.tension=function(s){return n(+s)},i}(0);function CardinalOpen(n,t){this._context=n,this._k=(1-t)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$6(this,n,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const curveCardinalOpen=function n(t){function i(s){return new CardinalOpen(s,t)}return i.tension=function(s){return n(+s)},i}(0);function point$5(n,t,i){var s=n._x1,o=n._y1,f=n._x2,d=n._y2;if(n._l01_a>epsilon$8){var p=2*n._l01_2a+3*n._l01_a*n._l12_a+n._l12_2a,v=3*n._l01_a*(n._l01_a+n._l12_a);s=(s*p-n._x0*n._l12_2a+n._x2*n._l01_2a)/v,o=(o*p-n._y0*n._l12_2a+n._y2*n._l01_2a)/v}if(n._l23_a>epsilon$8){var _=2*n._l23_2a+3*n._l23_a*n._l12_a+n._l12_2a,k=3*n._l23_a*(n._l23_a+n._l12_a);f=(f*_+n._x1*n._l23_2a-t*n._l12_2a)/k,d=(d*_+n._y1*n._l23_2a-i*n._l12_2a)/k}n._context.bezierCurveTo(s,o,f,d,n._x2,n._y2)}function CatmullRom(n,t){this._context=n,this._alpha=t}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){if(n=+n,t=+t,this._point){var i=this._x2-n,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;break;case 2:this._point=3;default:point$5(this,n,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const curveCatmullRom=function n(t){function i(s){return t?new CatmullRom(s,t):new Cardinal(s,0)}return i.alpha=function(s){return n(+s)},i}(.5);function CatmullRomClosed(n,t){this._context=n,this._alpha=t}CatmullRomClosed.prototype={areaStart:noop$5,areaEnd:noop$5,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(n,t){if(n=+n,t=+t,this._point){var i=this._x2-n,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=n,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=t);break;case 2:this._point=3,this._x5=n,this._y5=t;break;default:point$5(this,n,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const curveCatmullRomClosed=function n(t){function i(s){return t?new CatmullRomClosed(s,t):new CardinalClosed(s,0)}return i.alpha=function(s){return n(+s)},i}(.5);function CatmullRomOpen(n,t){this._context=n,this._alpha=t}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){if(n=+n,t=+t,this._point){var i=this._x2-n,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+s*s,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$5(this,n,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const curveCatmullRomOpen=function n(t){function i(s){return t?new CatmullRomOpen(s,t):new CardinalOpen(s,0)}return i.alpha=function(s){return n(+s)},i}(.5);function LinearClosed(n){this._context=n}LinearClosed.prototype={areaStart:noop$5,areaEnd:noop$5,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,t){n=+n,t=+t,this._point?this._context.lineTo(n,t):(this._point=1,this._context.moveTo(n,t))}};function curveLinearClosed(n){return new LinearClosed(n)}function sign$2(n){return n<0?-1:1}function slope3(n,t,i){var s=n._x1-n._x0,o=t-n._x1,f=(n._y1-n._y0)/(s||o<0&&-0),d=(i-n._y1)/(o||s<0&&-0),p=(f*o+d*s)/(s+o);return(sign$2(f)+sign$2(d))*Math.min(Math.abs(f),Math.abs(d),.5*Math.abs(p))||0}function slope2(n,t){var i=n._x1-n._x0;return i?(3*(n._y1-n._y0)/i-t)/2:t}function point$4(n,t,i){var s=n._x0,o=n._y0,f=n._x1,d=n._y1,p=(f-s)/3;n._context.bezierCurveTo(s+p,o+p*t,f-p,d-p*i,f,d)}function MonotoneX(n){this._context=n}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$4(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){var i=NaN;if(n=+n,t=+t,!(n===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;break;case 2:this._point=3,point$4(this,slope2(this,i=slope3(this,n,t)),i);break;default:point$4(this,this._t0,i=slope3(this,n,t));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=t,this._t0=i}}};function MonotoneY(n){this._context=new ReflectContext(n)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(n,t){MonotoneX.prototype.point.call(this,t,n)};function ReflectContext(n){this._context=n}ReflectContext.prototype={moveTo:function(n,t){this._context.moveTo(t,n)},closePath:function(){this._context.closePath()},lineTo:function(n,t){this._context.lineTo(t,n)},bezierCurveTo:function(n,t,i,s,o,f){this._context.bezierCurveTo(t,n,s,i,f,o)}};function monotoneX(n){return new MonotoneX(n)}function monotoneY(n){return new MonotoneY(n)}function Natural(n){this._context=n}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,t=this._y,i=n.length;if(i)if(this._line?this._context.lineTo(n[0],t[0]):this._context.moveTo(n[0],t[0]),i===2)this._context.lineTo(n[1],t[1]);else for(var s=controlPoints(n),o=controlPoints(t),f=0,d=1;d<i;++f,++d)this._context.bezierCurveTo(s[0][f],o[0][f],s[1][f],o[1][f],n[d],t[d]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,t){this._x.push(+n),this._y.push(+t)}};function controlPoints(n){var t,i=n.length-1,s,o=new Array(i),f=new Array(i),d=new Array(i);for(o[0]=0,f[0]=2,d[0]=n[0]+2*n[1],t=1;t<i-1;++t)o[t]=1,f[t]=4,d[t]=4*n[t]+2*n[t+1];for(o[i-1]=2,f[i-1]=7,d[i-1]=8*n[i-1]+n[i],t=1;t<i;++t)s=o[t]/f[t-1],f[t]-=s,d[t]-=s*d[t-1];for(o[i-1]=d[i-1]/f[i-1],t=i-2;t>=0;--t)o[t]=(d[t]-o[t+1])/f[t];for(f[i-1]=(n[i]+o[i-1])/2,t=0;t<i-1;++t)f[t]=2*n[t+1]-o[t+1];return[o,f]}function curveNatural(n){return new Natural(n)}function Step(n,t){this._context=n,this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(n,t);else{var i=this._x*(1-this._t)+n*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=n,this._y=t}};function curveStep(n){return new Step(n,.5)}function stepBefore(n){return new Step(n,0)}function stepAfter(n){return new Step(n,1)}function domCanvas(n,t){if(typeof document<"u"&&document.createElement){const i=document.createElement("canvas");if(i&&i.getContext)return i.width=n,i.height=t,i}return null}const domImage=()=>typeof Image<"u"?Image:null;function ascending$3(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function descending$3(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function bisector$2(n){let t,i,s;n.length!==2?(t=ascending$3,i=(p,v)=>ascending$3(n(p),v),s=(p,v)=>n(p)-v):(t=n===ascending$3||n===descending$3?n:zero$6,i=n,s=n);function o(p,v,_=0,k=p.length){if(_<k){if(t(v,v)!==0)return k;do{const P=_+k>>>1;i(p[P],v)<0?_=P+1:k=P}while(_<k)}return _}function f(p,v,_=0,k=p.length){if(_<k){if(t(v,v)!==0)return k;do{const P=_+k>>>1;i(p[P],v)<=0?_=P+1:k=P}while(_<k)}return _}function d(p,v,_=0,k=p.length){const P=o(p,v,_,k-1);return P>_&&s(p[P-1],v)>-s(p[P],v)?P-1:P}return{left:o,center:d,right:f}}function zero$6(){return 0}function number$8(n){return n===null?NaN:+n}const ascendingBisect$1=bisector$2(ascending$3),bisectRight$2=ascendingBisect$1.right;bisector$2(number$8).center;const e10$2=Math.sqrt(50),e5$3=Math.sqrt(10),e2$3=Math.sqrt(2);function tickSpec$2(n,t,i){const s=(t-n)/Math.max(0,i),o=Math.floor(Math.log10(s)),f=s/Math.pow(10,o),d=f>=e10$2?10:f>=e5$3?5:f>=e2$3?2:1;let p,v,_;return o<0?(_=Math.pow(10,-o)/d,p=Math.round(n*_),v=Math.round(t*_),p/_<n&&++p,v/_>t&&--v,_=-_):(_=Math.pow(10,o)*d,p=Math.round(n/_),v=Math.round(t/_),p*_<n&&++p,v*_>t&&--v),v<p&&.5<=i&&i<2?tickSpec$2(n,t,i*2):[p,v,_]}function ticks(n,t,i){if(t=+t,n=+n,i=+i,!(i>0))return[];if(n===t)return[n];const s=t<n,[o,f,d]=s?tickSpec$2(t,n,i):tickSpec$2(n,t,i);if(!(f>=o))return[];const p=f-o+1,v=new Array(p);if(s)if(d<0)for(let _=0;_<p;++_)v[_]=(f-_)/-d;else for(let _=0;_<p;++_)v[_]=(f-_)*d;else if(d<0)for(let _=0;_<p;++_)v[_]=(o+_)/-d;else for(let _=0;_<p;++_)v[_]=(o+_)*d;return v}function tickIncrement$2(n,t,i){return t=+t,n=+n,i=+i,tickSpec$2(n,t,i)[2]}function tickStep$2(n,t,i){t=+t,n=+n,i=+i;const s=t<n,o=s?tickIncrement$2(t,n,i):tickIncrement$2(n,t,i);return(s?-1:1)*(o<0?1/-o:o)}function quantileSorted(n,t,i=number$8){if(!(!(s=n.length)||isNaN(t=+t))){if(t<=0||s<2)return+i(n[0],0,n);if(t>=1)return+i(n[s-1],s-1,n);var s,o=(s-1)*t,f=Math.floor(o),d=+i(n[f],f,n),p=+i(n[f+1],f+1,n);return d+(p-d)*(o-f)}}function range$8(n,t,i){n=+n,t=+t,i=(o=arguments.length)<2?(t=n,n=0,1):o<3?1:+i;for(var s=-1,o=Math.max(0,Math.ceil((t-n)/i))|0,f=new Array(o);++s<o;)f[s]=n+s*i;return f}function initRange(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function initInterpolator(n,t){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const implicit=Symbol("implicit");function ordinal(){var n=new InternMap,t=[],i=[],s=implicit;function o(f){let d=n.get(f);if(d===void 0){if(s!==implicit)return s;n.set(f,d=t.push(f)-1)}return i[d%i.length]}return o.domain=function(f){if(!arguments.length)return t.slice();t=[],n=new InternMap;for(const d of f)n.has(d)||n.set(d,t.push(d)-1);return o},o.range=function(f){return arguments.length?(i=Array.from(f),o):i.slice()},o.unknown=function(f){return arguments.length?(s=f,o):s},o.copy=function(){return ordinal(t,i).unknown(s)},initRange.apply(o,arguments),o}function define$2(n,t,i){n.prototype=t.prototype=i,i.constructor=n}function extend$2(n,t){var i=Object.create(n.prototype);for(var s in t)i[s]=t[s];return i}function Color$3(){}var darker$2=.7,brighter$2=1/darker$2,reI$2="\\s*([+-]?\\d+)\\s*",reN$2="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP$2="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex$2=/^#([0-9a-f]{3,8})$/,reRgbInteger$2=new RegExp("^rgb\\("+[reI$2,reI$2,reI$2]+"\\)$"),reRgbPercent$2=new RegExp("^rgb\\("+[reP$2,reP$2,reP$2]+"\\)$"),reRgbaInteger$2=new RegExp("^rgba\\("+[reI$2,reI$2,reI$2,reN$2]+"\\)$"),reRgbaPercent$2=new RegExp("^rgba\\("+[reP$2,reP$2,reP$2,reN$2]+"\\)$"),reHslPercent$2=new RegExp("^hsl\\("+[reN$2,reP$2,reP$2]+"\\)$"),reHslaPercent$2=new RegExp("^hsla\\("+[reN$2,reP$2,reP$2,reN$2]+"\\)$"),named$2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define$2(Color$3,color$5,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex$2,formatHex:color_formatHex$2,formatHsl:color_formatHsl$2,formatRgb:color_formatRgb$2,toString:color_formatRgb$2});function color_formatHex$2(){return this.rgb().formatHex()}function color_formatHsl$2(){return hslConvert$2(this).formatHsl()}function color_formatRgb$2(){return this.rgb().formatRgb()}function color$5(n){var t,i;return n=(n+"").trim().toLowerCase(),(t=reHex$2.exec(n))?(i=t[1].length,t=parseInt(t[1],16),i===6?rgbn$2(t):i===3?new Rgb$2(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?rgba$2(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?rgba$2(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger$2.exec(n))?new Rgb$2(t[1],t[2],t[3],1):(t=reRgbPercent$2.exec(n))?new Rgb$2(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger$2.exec(n))?rgba$2(t[1],t[2],t[3],t[4]):(t=reRgbaPercent$2.exec(n))?rgba$2(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent$2.exec(n))?hsla$2(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent$2.exec(n))?hsla$2(t[1],t[2]/100,t[3]/100,t[4]):named$2.hasOwnProperty(n)?rgbn$2(named$2[n]):n==="transparent"?new Rgb$2(NaN,NaN,NaN,0):null}function rgbn$2(n){return new Rgb$2(n>>16&255,n>>8&255,n&255,1)}function rgba$2(n,t,i,s){return s<=0&&(n=t=i=NaN),new Rgb$2(n,t,i,s)}function rgbConvert$2(n){return n instanceof Color$3||(n=color$5(n)),n?(n=n.rgb(),new Rgb$2(n.r,n.g,n.b,n.opacity)):new Rgb$2}function rgb$6(n,t,i,s){return arguments.length===1?rgbConvert$2(n):new Rgb$2(n,t,i,s??1)}function Rgb$2(n,t,i,s){this.r=+n,this.g=+t,this.b=+i,this.opacity=+s}define$2(Rgb$2,rgb$6,extend$2(Color$3,{brighter:function(n){return n=n==null?brighter$2:Math.pow(brighter$2,n),new Rgb$2(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=n==null?darker$2:Math.pow(darker$2,n),new Rgb$2(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex$2,formatHex:rgb_formatHex$2,formatRgb:rgb_formatRgb$2,toString:rgb_formatRgb$2}));function rgb_formatHex$2(){return"#"+hex$3(this.r)+hex$3(this.g)+hex$3(this.b)}function rgb_formatRgb$2(){var n=this.opacity;return n=isNaN(n)?1:Math.max(0,Math.min(1,n)),(n===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(n===1?")":", "+n+")")}function hex$3(n){return n=Math.max(0,Math.min(255,Math.round(n)||0)),(n<16?"0":"")+n.toString(16)}function hsla$2(n,t,i,s){return s<=0?n=t=i=NaN:i<=0||i>=1?n=t=NaN:t<=0&&(n=NaN),new Hsl$2(n,t,i,s)}function hslConvert$2(n){if(n instanceof Hsl$2)return new Hsl$2(n.h,n.s,n.l,n.opacity);if(n instanceof Color$3||(n=color$5(n)),!n)return new Hsl$2;if(n instanceof Hsl$2)return n;n=n.rgb();var t=n.r/255,i=n.g/255,s=n.b/255,o=Math.min(t,i,s),f=Math.max(t,i,s),d=NaN,p=f-o,v=(f+o)/2;return p?(t===f?d=(i-s)/p+(i<s)*6:i===f?d=(s-t)/p+2:d=(t-i)/p+4,p/=v<.5?f+o:2-f-o,d*=60):p=v>0&&v<1?0:d,new Hsl$2(d,p,v,n.opacity)}function hsl$6(n,t,i,s){return arguments.length===1?hslConvert$2(n):new Hsl$2(n,t,i,s??1)}function Hsl$2(n,t,i,s){this.h=+n,this.s=+t,this.l=+i,this.opacity=+s}define$2(Hsl$2,hsl$6,extend$2(Color$3,{brighter:function(n){return n=n==null?brighter$2:Math.pow(brighter$2,n),new Hsl$2(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=n==null?darker$2:Math.pow(darker$2,n),new Hsl$2(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,i=this.l,s=i+(i<.5?i:1-i)*t,o=2*i-s;return new Rgb$2(hsl2rgb$3(n>=240?n-240:n+120,o,s),hsl2rgb$3(n,o,s),hsl2rgb$3(n<120?n+240:n-120,o,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return n=isNaN(n)?1:Math.max(0,Math.min(1,n)),(n===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(n===1?")":", "+n+")")}}));function hsl2rgb$3(n,t,i){return(n<60?t+(i-t)*n/60:n<180?i:n<240?t+(i-t)*(240-n)/60:t)*255}const radians$4=Math.PI/180,degrees$5=180/Math.PI,K$2=18,Xn$2=.96422,Yn$2=1,Zn$2=.82521,t0$2=4/29,t1$2=6/29,t2$2=3*t1$2*t1$2,t3$2=t1$2*t1$2*t1$2;function labConvert$1(n){if(n instanceof Lab$1)return new Lab$1(n.l,n.a,n.b,n.opacity);if(n instanceof Hcl$1)return hcl2lab$1(n);n instanceof Rgb$2||(n=rgbConvert$2(n));var t=rgb2lrgb$1(n.r),i=rgb2lrgb$1(n.g),s=rgb2lrgb$1(n.b),o=xyz2lab$2((.2225045*t+.7168786*i+.0606169*s)/Yn$2),f,d;return t===i&&i===s?f=d=o:(f=xyz2lab$2((.4360747*t+.3850649*i+.1430804*s)/Xn$2),d=xyz2lab$2((.0139322*t+.0971045*i+.7141733*s)/Zn$2)),new Lab$1(116*o-16,500*(f-o),200*(o-d),n.opacity)}function lab$4(n,t,i,s){return arguments.length===1?labConvert$1(n):new Lab$1(n,t,i,s??1)}function Lab$1(n,t,i,s){this.l=+n,this.a=+t,this.b=+i,this.opacity=+s}define$2(Lab$1,lab$4,extend$2(Color$3,{brighter:function(n){return new Lab$1(this.l+K$2*(n??1),this.a,this.b,this.opacity)},darker:function(n){return new Lab$1(this.l-K$2*(n??1),this.a,this.b,this.opacity)},rgb:function(){var n=(this.l+16)/116,t=isNaN(this.a)?n:n+this.a/500,i=isNaN(this.b)?n:n-this.b/200;return t=Xn$2*lab2xyz$2(t),n=Yn$2*lab2xyz$2(n),i=Zn$2*lab2xyz$2(i),new Rgb$2(lrgb2rgb$1(3.1338561*t-1.6168667*n-.4906146*i),lrgb2rgb$1(-.9787684*t+1.9161415*n+.033454*i),lrgb2rgb$1(.0719453*t-.2289914*n+1.4052427*i),this.opacity)}}));function xyz2lab$2(n){return n>t3$2?Math.pow(n,1/3):n/t2$2+t0$2}function lab2xyz$2(n){return n>t1$2?n*n*n:t2$2*(n-t0$2)}function lrgb2rgb$1(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function rgb2lrgb$1(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function hclConvert$1(n){if(n instanceof Hcl$1)return new Hcl$1(n.h,n.c,n.l,n.opacity);if(n instanceof Lab$1||(n=labConvert$1(n)),n.a===0&&n.b===0)return new Hcl$1(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var t=Math.atan2(n.b,n.a)*degrees$5;return new Hcl$1(t<0?t+360:t,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function hcl$4(n,t,i,s){return arguments.length===1?hclConvert$1(n):new Hcl$1(n,t,i,s??1)}function Hcl$1(n,t,i,s){this.h=+n,this.c=+t,this.l=+i,this.opacity=+s}function hcl2lab$1(n){if(isNaN(n.h))return new Lab$1(n.l,0,0,n.opacity);var t=n.h*radians$4;return new Lab$1(n.l,Math.cos(t)*n.c,Math.sin(t)*n.c,n.opacity)}define$2(Hcl$1,hcl$4,extend$2(Color$3,{brighter:function(n){return new Hcl$1(this.h,this.c,this.l+K$2*(n??1),this.opacity)},darker:function(n){return new Hcl$1(this.h,this.c,this.l-K$2*(n??1),this.opacity)},rgb:function(){return hcl2lab$1(this).rgb()}}));var A=-.14861,B$1=1.78277,C$2=-.29227,D$2=-.90649,E$1=1.97294,ED$1=E$1*D$2,EB$1=E$1*B$1,BC_DA=B$1*C$2-D$2*A;function cubehelixConvert(n){if(n instanceof Cubehelix)return new Cubehelix(n.h,n.s,n.l,n.opacity);n instanceof Rgb$2||(n=rgbConvert$2(n));var t=n.r/255,i=n.g/255,s=n.b/255,o=(BC_DA*s+ED$1*t-EB$1*i)/(BC_DA+ED$1-EB$1),f=s-o,d=(E$1*(i-o)-C$2*f)/D$2,p=Math.sqrt(d*d+f*f)/(E$1*o*(1-o)),v=p?Math.atan2(d,f)*degrees$5-120:NaN;return new Cubehelix(v<0?v+360:v,p,o,n.opacity)}function cubehelix$3(n,t,i,s){return arguments.length===1?cubehelixConvert(n):new Cubehelix(n,t,i,s??1)}function Cubehelix(n,t,i,s){this.h=+n,this.s=+t,this.l=+i,this.opacity=+s}define$2(Cubehelix,cubehelix$3,extend$2(Color$3,{brighter:function(n){return n=n==null?brighter$2:Math.pow(brighter$2,n),new Cubehelix(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=n==null?darker$2:Math.pow(darker$2,n),new Cubehelix(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=isNaN(this.h)?0:(this.h+120)*radians$4,t=+this.l,i=isNaN(this.s)?0:this.s*t*(1-t),s=Math.cos(n),o=Math.sin(n);return new Rgb$2(255*(t+i*(A*s+B$1*o)),255*(t+i*(C$2*s+D$2*o)),255*(t+i*(E$1*s)),this.opacity)}}));function basis(n,t,i,s,o){var f=n*n,d=f*n;return((1-3*n+3*f-d)*t+(4-6*f+3*d)*i+(1+3*n+3*f-3*d)*s+d*o)/6}function basis$1(n){var t=n.length-1;return function(i){var s=i<=0?i=0:i>=1?(i=1,t-1):Math.floor(i*t),o=n[s],f=n[s+1],d=s>0?n[s-1]:2*o-f,p=s<t-1?n[s+2]:2*f-o;return basis((i-s/t)*t,d,o,f,p)}}function basisClosed(n){var t=n.length;return function(i){var s=Math.floor(((i%=1)<0?++i:i)*t),o=n[(s+t-1)%t],f=n[s%t],d=n[(s+1)%t],p=n[(s+2)%t];return basis((i-s/t)*t,o,f,d,p)}}const constant$3=n=>()=>n;function linear$2(n,t){return function(i){return n+i*t}}function exponential$1(n,t,i){return n=Math.pow(n,i),t=Math.pow(t,i)-n,i=1/i,function(s){return Math.pow(n+s*t,i)}}function hue$1(n,t){var i=t-n;return i?linear$2(n,i>180||i<-180?i-360*Math.round(i/360):i):constant$3(isNaN(n)?t:n)}function gamma$1(n){return(n=+n)==1?nogamma$1:function(t,i){return i-t?exponential$1(t,i,n):constant$3(isNaN(t)?i:t)}}function nogamma$1(n,t){var i=t-n;return i?linear$2(n,i):constant$3(isNaN(n)?t:n)}const rgb$5=function n(t){var i=gamma$1(t);function s(o,f){var d=i((o=rgb$6(o)).r,(f=rgb$6(f)).r),p=i(o.g,f.g),v=i(o.b,f.b),_=nogamma$1(o.opacity,f.opacity);return function(k){return o.r=d(k),o.g=p(k),o.b=v(k),o.opacity=_(k),o+""}}return s.gamma=n,s}(1);function rgbSpline(n){return function(t){var i=t.length,s=new Array(i),o=new Array(i),f=new Array(i),d,p;for(d=0;d<i;++d)p=rgb$6(t[d]),s[d]=p.r||0,o[d]=p.g||0,f[d]=p.b||0;return s=n(s),o=n(o),f=n(f),p.opacity=1,function(v){return p.r=s(v),p.g=o(v),p.b=f(v),p+""}}}var rgbBasis=rgbSpline(basis$1),rgbBasisClosed=rgbSpline(basisClosed);function numberArray$1(n,t){t||(t=[]);var i=n?Math.min(t.length,n.length):0,s=t.slice(),o;return function(f){for(o=0;o<i;++o)s[o]=n[o]*(1-f)+t[o]*f;return s}}function isNumberArray$1(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function array$3(n,t){return(isNumberArray$1(t)?numberArray$1:genericArray$1)(n,t)}function genericArray$1(n,t){var i=t?t.length:0,s=n?Math.min(i,n.length):0,o=new Array(s),f=new Array(i),d;for(d=0;d<s;++d)o[d]=interpolate$3(n[d],t[d]);for(;d<i;++d)f[d]=t[d];return function(p){for(d=0;d<s;++d)f[d]=o[d](p);return f}}function date$2(n,t){var i=new Date;return n=+n,t=+t,function(s){return i.setTime(n*(1-s)+t*s),i}}function interpolateNumber(n,t){return n=+n,t=+t,function(i){return n*(1-i)+t*i}}function object$1(n,t){var i={},s={},o;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in n?i[o]=interpolate$3(n[o],t[o]):s[o]=t[o];return function(f){for(o in i)s[o]=i[o](f);return s}}var reA$1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB$1=new RegExp(reA$1.source,"g");function zero$5(n){return function(){return n}}function one$2(n){return function(t){return n(t)+""}}function string$1(n,t){var i=reA$1.lastIndex=reB$1.lastIndex=0,s,o,f,d=-1,p=[],v=[];for(n=n+"",t=t+"";(s=reA$1.exec(n))&&(o=reB$1.exec(t));)(f=o.index)>i&&(f=t.slice(i,f),p[d]?p[d]+=f:p[++d]=f),(s=s[0])===(o=o[0])?p[d]?p[d]+=o:p[++d]=o:(p[++d]=null,v.push({i:d,x:interpolateNumber(s,o)})),i=reB$1.lastIndex;return i<t.length&&(f=t.slice(i),p[d]?p[d]+=f:p[++d]=f),p.length<2?v[0]?one$2(v[0].x):zero$5(t):(t=v.length,function(_){for(var k=0,P;k<t;++k)p[(P=v[k]).i]=P.x(_);return p.join("")})}function interpolate$3(n,t){var i=typeof t,s;return t==null||i==="boolean"?constant$3(t):(i==="number"?interpolateNumber:i==="string"?(s=color$5(t))?(t=s,rgb$5):string$1:t instanceof color$5?rgb$5:t instanceof Date?date$2:isNumberArray$1(t)?numberArray$1:Array.isArray(t)?genericArray$1:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object$1:interpolateNumber)(n,t)}function discrete$1(n){var t=n.length;return function(i){return n[Math.max(0,Math.min(t-1,Math.floor(i*t)))]}}function hue(n,t){var i=hue$1(+n,+t);return function(s){var o=i(s);return o-360*Math.floor(o/360)}}function interpolateRound$1(n,t){return n=+n,t=+t,function(i){return Math.round(n*(1-i)+t*i)}}var degrees$4=180/Math.PI,identity$4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(n,t,i,s,o,f){var d,p,v;return(d=Math.sqrt(n*n+t*t))&&(n/=d,t/=d),(v=n*i+t*s)&&(i-=n*v,s-=t*v),(p=Math.sqrt(i*i+s*s))&&(i/=p,s/=p,v/=p),n*s<t*i&&(n=-n,t=-t,v=-v,d=-d),{translateX:o,translateY:f,rotate:Math.atan2(t,n)*degrees$4,skewX:Math.atan(v)*degrees$4,scaleX:d,scaleY:p}}var svgNode;function parseCss(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?identity$4:decompose(t.a,t.b,t.c,t.d,t.e,t.f)}function parseSvg(n){return n==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",n),!(n=svgNode.transform.baseVal.consolidate()))?identity$4:(n=n.matrix,decompose(n.a,n.b,n.c,n.d,n.e,n.f))}function interpolateTransform(n,t,i,s){function o(_){return _.length?_.pop()+" ":""}function f(_,k,P,L,G,Z){if(_!==P||k!==L){var W=G.push("translate(",null,t,null,i);Z.push({i:W-4,x:interpolateNumber(_,P)},{i:W-2,x:interpolateNumber(k,L)})}else(P||L)&&G.push("translate("+P+t+L+i)}function d(_,k,P,L){_!==k?(_-k>180?k+=360:k-_>180&&(_+=360),L.push({i:P.push(o(P)+"rotate(",null,s)-2,x:interpolateNumber(_,k)})):k&&P.push(o(P)+"rotate("+k+s)}function p(_,k,P,L){_!==k?L.push({i:P.push(o(P)+"skewX(",null,s)-2,x:interpolateNumber(_,k)}):k&&P.push(o(P)+"skewX("+k+s)}function v(_,k,P,L,G,Z){if(_!==P||k!==L){var W=G.push(o(G)+"scale(",null,",",null,")");Z.push({i:W-4,x:interpolateNumber(_,P)},{i:W-2,x:interpolateNumber(k,L)})}else(P!==1||L!==1)&&G.push(o(G)+"scale("+P+","+L+")")}return function(_,k){var P=[],L=[];return _=n(_),k=n(k),f(_.translateX,_.translateY,k.translateX,k.translateY,P,L),d(_.rotate,k.rotate,P,L),p(_.skewX,k.skewX,P,L),v(_.scaleX,_.scaleY,k.scaleX,k.scaleY,P,L),_=k=null,function(G){for(var Z=-1,W=L.length,j;++Z<W;)P[(j=L[Z]).i]=j.x(G);return P.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2$2=1e-12;function cosh(n){return((n=Math.exp(n))+1/n)/2}function sinh(n){return((n=Math.exp(n))-1/n)/2}function tanh(n){return((n=Math.exp(2*n))-1)/(n+1)}const zoom$1=function n(t,i,s){function o(f,d){var p=f[0],v=f[1],_=f[2],k=d[0],P=d[1],L=d[2],G=k-p,Z=P-v,W=G*G+Z*Z,j,H;if(W<epsilon2$2)H=Math.log(L/_)/t,j=function(Me){return[p+Me*G,v+Me*Z,_*Math.exp(t*Me*H)]};else{var me=Math.sqrt(W),$e=(L*L-_*_+s*W)/(2*_*i*me),De=(L*L-_*_-s*W)/(2*L*i*me),le=Math.log(Math.sqrt($e*$e+1)-$e),Ce=Math.log(Math.sqrt(De*De+1)-De);H=(Ce-le)/t,j=function(Me){var _n=Me*H,_i=cosh(le),ll=_/(i*me)*(_i*tanh(t*_n+le)-sinh(le));return[p+ll*G,v+ll*Z,_*_i/cosh(t*_n+le)]}}return j.duration=H*1e3*t/Math.SQRT2,j}return o.rho=function(f){var d=Math.max(.001,+f),p=d*d,v=p*p;return n(d,p,v)},o}(Math.SQRT2,2,4);function hsl$4(n){return function(t,i){var s=n((t=hsl$6(t)).h,(i=hsl$6(i)).h),o=nogamma$1(t.s,i.s),f=nogamma$1(t.l,i.l),d=nogamma$1(t.opacity,i.opacity);return function(p){return t.h=s(p),t.s=o(p),t.l=f(p),t.opacity=d(p),t+""}}}const hsl$5=hsl$4(hue$1);var hslLong=hsl$4(nogamma$1);function lab$3(n,t){var i=nogamma$1((n=lab$4(n)).l,(t=lab$4(t)).l),s=nogamma$1(n.a,t.a),o=nogamma$1(n.b,t.b),f=nogamma$1(n.opacity,t.opacity);return function(d){return n.l=i(d),n.a=s(d),n.b=o(d),n.opacity=f(d),n+""}}function hcl$2(n){return function(t,i){var s=n((t=hcl$4(t)).h,(i=hcl$4(i)).h),o=nogamma$1(t.c,i.c),f=nogamma$1(t.l,i.l),d=nogamma$1(t.opacity,i.opacity);return function(p){return t.h=s(p),t.c=o(p),t.l=f(p),t.opacity=d(p),t+""}}}const hcl$3=hcl$2(hue$1);var hclLong=hcl$2(nogamma$1);function cubehelix$1(n){return function t(i){i=+i;function s(o,f){var d=n((o=cubehelix$3(o)).h,(f=cubehelix$3(f)).h),p=nogamma$1(o.s,f.s),v=nogamma$1(o.l,f.l),_=nogamma$1(o.opacity,f.opacity);return function(k){return o.h=d(k),o.s=p(k),o.l=v(Math.pow(k,i)),o.opacity=_(k),o+""}}return s.gamma=t,s}(1)}const cubehelix$2=cubehelix$1(hue$1);var cubehelixLong=cubehelix$1(nogamma$1);function piecewise(n,t){t===void 0&&(t=n,n=interpolate$3);for(var i=0,s=t.length-1,o=t[0],f=new Array(s<0?0:s);i<s;)f[i]=n(o,o=t[++i]);return function(d){var p=Math.max(0,Math.min(s-1,Math.floor(d*=s)));return f[p](d-p)}}function quantize$2(n,t){for(var i=new Array(t),s=0;s<t;++s)i[s]=n(s/(t-1));return i}const $$1=Object.freeze(Object.defineProperty({__proto__:null,interpolate:interpolate$3,interpolateArray:array$3,interpolateBasis:basis$1,interpolateBasisClosed:basisClosed,interpolateCubehelix:cubehelix$2,interpolateCubehelixLong:cubehelixLong,interpolateDate:date$2,interpolateDiscrete:discrete$1,interpolateHcl:hcl$3,interpolateHclLong:hclLong,interpolateHsl:hsl$5,interpolateHslLong:hslLong,interpolateHue:hue,interpolateLab:lab$3,interpolateNumber,interpolateNumberArray:numberArray$1,interpolateObject:object$1,interpolateRgb:rgb$5,interpolateRgbBasis:rgbBasis,interpolateRgbBasisClosed:rgbBasisClosed,interpolateRound:interpolateRound$1,interpolateString:string$1,interpolateTransformCss,interpolateTransformSvg,interpolateZoom:zoom$1,piecewise,quantize:quantize$2},Symbol.toStringTag,{value:"Module"}));function constants$1(n){return function(){return n}}function number$7(n){return+n}var unit=[0,1];function identity$3(n){return n}function normalize$2(n,t){return(t-=n=+n)?function(i){return(i-n)/t}:constants$1(isNaN(t)?NaN:.5)}function clamper(n,t){var i;return n>t&&(i=n,n=t,t=i),function(s){return Math.max(n,Math.min(t,s))}}function bimap(n,t,i){var s=n[0],o=n[1],f=t[0],d=t[1];return o<s?(s=normalize$2(o,s),f=i(d,f)):(s=normalize$2(s,o),f=i(f,d)),function(p){return f(s(p))}}function polymap(n,t,i){var s=Math.min(n.length,t.length)-1,o=new Array(s),f=new Array(s),d=-1;for(n[s]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++d<s;)o[d]=normalize$2(n[d],n[d+1]),f[d]=i(t[d],t[d+1]);return function(p){var v=bisectRight$2(n,p,1,s)-1;return f[v](o[v](p))}}function copy$2(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function transformer$4(){var n=unit,t=unit,i=interpolate$3,s,o,f,d=identity$3,p,v,_;function k(){var L=Math.min(n.length,t.length);return d!==identity$3&&(d=clamper(n[0],n[L-1])),p=L>2?polymap:bimap,v=_=null,P}function P(L){return L==null||isNaN(L=+L)?f:(v||(v=p(n.map(s),t,i)))(s(d(L)))}return P.invert=function(L){return d(o((_||(_=p(t,n.map(s),interpolateNumber)))(L)))},P.domain=function(L){return arguments.length?(n=Array.from(L,number$7),k()):n.slice()},P.range=function(L){return arguments.length?(t=Array.from(L),k()):t.slice()},P.rangeRound=function(L){return t=Array.from(L),i=interpolateRound$1,k()},P.clamp=function(L){return arguments.length?(d=L?!0:identity$3,k()):d!==identity$3},P.interpolate=function(L){return arguments.length?(i=L,k()):i},P.unknown=function(L){return arguments.length?(f=L,P):f},function(L,G){return s=L,o=G,k()}}function continuous$1(){return transformer$4()(identity$3,identity$3)}function tickFormat$1(n,t,i,s){var o=tickStep$2(n,t,i),f;switch(s=formatSpecifier(s??",f"),s.type){case"s":{var d=Math.max(Math.abs(n),Math.abs(t));return s.precision==null&&!isNaN(f=precisionPrefix(o,d))&&(s.precision=f),formatPrefix(s,d)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(f=precisionRound(o,Math.max(Math.abs(n),Math.abs(t))))&&(s.precision=f-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(f=precisionFixed(o))&&(s.precision=f-(s.type==="%")*2);break}}return format$3(s)}function linearish(n){var t=n.domain;return n.ticks=function(i){var s=t();return ticks(s[0],s[s.length-1],i??10)},n.tickFormat=function(i,s){var o=t();return tickFormat$1(o[0],o[o.length-1],i??10,s)},n.nice=function(i){i==null&&(i=10);var s=t(),o=0,f=s.length-1,d=s[o],p=s[f],v,_,k=10;for(p<d&&(_=d,d=p,p=_,_=o,o=f,f=_);k-- >0;){if(_=tickIncrement$2(d,p,i),_===v)return s[o]=d,s[f]=p,t(s);if(_>0)d=Math.floor(d/_)*_,p=Math.ceil(p/_)*_;else if(_<0)d=Math.ceil(d*_)/_,p=Math.floor(p*_)/_;else break;v=_}return n},n}function linear$1(){var n=continuous$1();return n.copy=function(){return copy$2(n,linear$1())},initRange.apply(n,arguments),linearish(n)}function identity$2(n){var t;function i(s){return s==null||isNaN(s=+s)?t:s}return i.invert=i,i.domain=i.range=function(s){return arguments.length?(n=Array.from(s,number$7),i):n.slice()},i.unknown=function(s){return arguments.length?(t=s,i):t},i.copy=function(){return identity$2(n).unknown(t)},n=arguments.length?Array.from(n,number$7):[0,1],linearish(i)}function nice$1(n,t){n=n.slice();var i=0,s=n.length-1,o=n[i],f=n[s],d;return f<o&&(d=i,i=s,s=d,d=o,o=f,f=d),n[i]=t.floor(o),n[s]=t.ceil(f),n}function transformLog(n){return Math.log(n)}function transformExp(n){return Math.exp(n)}function transformLogn(n){return-Math.log(-n)}function transformExpn(n){return-Math.exp(-n)}function pow10(n){return isFinite(n)?+("1e"+n):n<0?0:n}function powp(n){return n===10?pow10:n===Math.E?Math.exp:t=>Math.pow(n,t)}function logp(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),t=>Math.log(t)/n)}function reflect(n){return(t,i)=>-n(-t,i)}function loggish(n){const t=n(transformLog,transformExp),i=t.domain;let s=10,o,f;function d(){return o=logp(s),f=powp(s),i()[0]<0?(o=reflect(o),f=reflect(f),n(transformLogn,transformExpn)):n(transformLog,transformExp),t}return t.base=function(p){return arguments.length?(s=+p,d()):s},t.domain=function(p){return arguments.length?(i(p),d()):i()},t.ticks=p=>{const v=i();let _=v[0],k=v[v.length-1];const P=k<_;P&&([_,k]=[k,_]);let L=o(_),G=o(k),Z,W;const j=p==null?10:+p;let H=[];if(!(s%1)&&G-L<j){if(L=Math.floor(L),G=Math.ceil(G),_>0){for(;L<=G;++L)for(Z=1;Z<s;++Z)if(W=L<0?Z/f(-L):Z*f(L),!(W<_)){if(W>k)break;H.push(W)}}else for(;L<=G;++L)for(Z=s-1;Z>=1;--Z)if(W=L>0?Z/f(-L):Z*f(L),!(W<_)){if(W>k)break;H.push(W)}H.length*2<j&&(H=ticks(_,k,j))}else H=ticks(L,G,Math.min(G-L,j)).map(f);return P?H.reverse():H},t.tickFormat=(p,v)=>{if(p==null&&(p=10),v==null&&(v=s===10?"s":","),typeof v!="function"&&(!(s%1)&&(v=formatSpecifier(v)).precision==null&&(v.trim=!0),v=format$3(v)),p===1/0)return v;const _=Math.max(1,s*p/t.ticks().length);return k=>{let P=k/f(Math.round(o(k)));return P*s<s-.5&&(P*=s),P<=_?v(k):""}},t.nice=()=>i(nice$1(i(),{floor:p=>f(Math.floor(o(p))),ceil:p=>f(Math.ceil(o(p)))})),t}function log$4(){const n=loggish(transformer$4()).domain([1,10]);return n.copy=()=>copy$2(n,log$4()).base(n.base()),initRange.apply(n,arguments),n}function transformSymlog(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function transformSymexp(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function symlogish(n){var t=1,i=n(transformSymlog(t),transformSymexp(t));return i.constant=function(s){return arguments.length?n(transformSymlog(t=+s),transformSymexp(t)):t},linearish(i)}function symlog(){var n=symlogish(transformer$4());return n.copy=function(){return copy$2(n,symlog()).constant(n.constant())},initRange.apply(n,arguments)}function transformPow(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function transformSqrt(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function transformSquare(n){return n<0?-n*n:n*n}function powish(n){var t=n(identity$3,identity$3),i=1;function s(){return i===1?n(identity$3,identity$3):i===.5?n(transformSqrt,transformSquare):n(transformPow(i),transformPow(1/i))}return t.exponent=function(o){return arguments.length?(i=+o,s()):i},linearish(t)}function pow$9(){var n=powish(transformer$4());return n.copy=function(){return copy$2(n,pow$9()).exponent(n.exponent())},initRange.apply(n,arguments),n}function sqrt$9(){return pow$9.apply(null,arguments).exponent(.5)}function quantile(){var n=[],t=[],i=[],s;function o(){var d=0,p=Math.max(1,t.length);for(i=new Array(p-1);++d<p;)i[d-1]=quantileSorted(n,d/p);return f}function f(d){return d==null||isNaN(d=+d)?s:t[bisectRight$2(i,d)]}return f.invertExtent=function(d){var p=t.indexOf(d);return p<0?[NaN,NaN]:[p>0?i[p-1]:n[0],p<i.length?i[p]:n[n.length-1]]},f.domain=function(d){if(!arguments.length)return n.slice();n=[];for(let p of d)p!=null&&!isNaN(p=+p)&&n.push(p);return n.sort(ascending$3),o()},f.range=function(d){return arguments.length?(t=Array.from(d),o()):t.slice()},f.unknown=function(d){return arguments.length?(s=d,f):s},f.quantiles=function(){return i.slice()},f.copy=function(){return quantile().domain(n).range(t).unknown(s)},initRange.apply(f,arguments)}function quantize$1(){var n=0,t=1,i=1,s=[.5],o=[0,1],f;function d(v){return v!=null&&v<=v?o[bisectRight$2(s,v,0,i)]:f}function p(){var v=-1;for(s=new Array(i);++v<i;)s[v]=((v+1)*t-(v-i)*n)/(i+1);return d}return d.domain=function(v){return arguments.length?([n,t]=v,n=+n,t=+t,p()):[n,t]},d.range=function(v){return arguments.length?(i=(o=Array.from(v)).length-1,p()):o.slice()},d.invertExtent=function(v){var _=o.indexOf(v);return _<0?[NaN,NaN]:_<1?[n,s[0]]:_>=i?[s[i-1],t]:[s[_-1],s[_]]},d.unknown=function(v){return arguments.length&&(f=v),d},d.thresholds=function(){return s.slice()},d.copy=function(){return quantize$1().domain([n,t]).range(o).unknown(f)},initRange.apply(linearish(d),arguments)}function threshold(){var n=[.5],t=[0,1],i,s=1;function o(f){return f!=null&&f<=f?t[bisectRight$2(n,f,0,s)]:i}return o.domain=function(f){return arguments.length?(n=Array.from(f),s=Math.min(n.length,t.length-1),o):n.slice()},o.range=function(f){return arguments.length?(t=Array.from(f),s=Math.min(n.length,t.length-1),o):t.slice()},o.invertExtent=function(f){var d=t.indexOf(f);return[n[d-1],n[d]]},o.unknown=function(f){return arguments.length?(i=f,o):i},o.copy=function(){return threshold().domain(n).range(t).unknown(i)},initRange.apply(o,arguments)}function localDate(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function utcDate(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function newDate(n,t,i){return{y:n,m:t,d:i,H:0,M:0,S:0,L:0}}function formatLocale(n){var t=n.dateTime,i=n.date,s=n.time,o=n.periods,f=n.days,d=n.shortDays,p=n.months,v=n.shortMonths,_=formatRe(o),k=formatLookup(o),P=formatRe(f),L=formatLookup(f),G=formatRe(d),Z=formatLookup(d),W=formatRe(p),j=formatLookup(p),H=formatRe(v),me=formatLookup(v),$e={a:Ra,A:Da,b:Fa,B:Na,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:_a,q:Pa,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},De={a:qc,A:uf,b:_h,B:Uh,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Kd,q:ud,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},le={a:ll,A:_l,b:oa,B:Ru,c:ga,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:_i,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:_s,X:Sa,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};$e.x=Ce(i,$e),$e.X=Ce(s,$e),$e.c=Ce(t,$e),De.x=Ce(i,De),De.X=Ce(s,De),De.c=Ce(t,De);function Ce(sc,Yd){return function(wg){var Pf=[],ac=-1,fc=0,nd=sc.length,a0,_1,_$;for(wg instanceof Date||(wg=new Date(+wg));++ac<nd;)sc.charCodeAt(ac)===37&&(Pf.push(sc.slice(fc,ac)),(_1=pads[a0=sc.charAt(++ac)])!=null?a0=sc.charAt(++ac):_1=a0==="e"?" ":"0",(_$=Yd[a0])&&(a0=_$(wg,_1)),Pf.push(a0),fc=ac+1);return Pf.push(sc.slice(fc,ac)),Pf.join("")}}function Me(sc,Yd){return function(wg){var Pf=newDate(1900,void 0,1),ac=_n(Pf,sc,wg+="",0),fc,nd;if(ac!=wg.length)return null;if("Q"in Pf)return new Date(Pf.Q);if("s"in Pf)return new Date(Pf.s*1e3+("L"in Pf?Pf.L:0));if(Yd&&!("Z"in Pf)&&(Pf.Z=0),"p"in Pf&&(Pf.H=Pf.H%12+Pf.p*12),Pf.m===void 0&&(Pf.m="q"in Pf?Pf.q:0),"V"in Pf){if(Pf.V<1||Pf.V>53)return null;"w"in Pf||(Pf.w=1),"Z"in Pf?(fc=utcDate(newDate(Pf.y,0,1)),nd=fc.getUTCDay(),fc=nd>4||nd===0?utcMonday.ceil(fc):utcMonday(fc),fc=utcDay.offset(fc,(Pf.V-1)*7),Pf.y=fc.getUTCFullYear(),Pf.m=fc.getUTCMonth(),Pf.d=fc.getUTCDate()+(Pf.w+6)%7):(fc=localDate(newDate(Pf.y,0,1)),nd=fc.getDay(),fc=nd>4||nd===0?monday.ceil(fc):monday(fc),fc=day.offset(fc,(Pf.V-1)*7),Pf.y=fc.getFullYear(),Pf.m=fc.getMonth(),Pf.d=fc.getDate()+(Pf.w+6)%7)}else("W"in Pf||"U"in Pf)&&("w"in Pf||(Pf.w="u"in Pf?Pf.u%7:"W"in Pf?1:0),nd="Z"in Pf?utcDate(newDate(Pf.y,0,1)).getUTCDay():localDate(newDate(Pf.y,0,1)).getDay(),Pf.m=0,Pf.d="W"in Pf?(Pf.w+6)%7+Pf.W*7-(nd+5)%7:Pf.w+Pf.U*7-(nd+6)%7);return"Z"in Pf?(Pf.H+=Pf.Z/100|0,Pf.M+=Pf.Z%100,utcDate(Pf)):localDate(Pf)}}function _n(sc,Yd,wg,Pf){for(var ac=0,fc=Yd.length,nd=wg.length,a0,_1;ac<fc;){if(Pf>=nd)return-1;if(a0=Yd.charCodeAt(ac++),a0===37){if(a0=Yd.charAt(ac++),_1=le[a0 in pads?Yd.charAt(ac++):a0],!_1||(Pf=_1(sc,wg,Pf))<0)return-1}else if(a0!=wg.charCodeAt(Pf++))return-1}return Pf}function _i(sc,Yd,wg){var Pf=_.exec(Yd.slice(wg));return Pf?(sc.p=k.get(Pf[0].toLowerCase()),wg+Pf[0].length):-1}function ll(sc,Yd,wg){var Pf=G.exec(Yd.slice(wg));return Pf?(sc.w=Z.get(Pf[0].toLowerCase()),wg+Pf[0].length):-1}function _l(sc,Yd,wg){var Pf=P.exec(Yd.slice(wg));return Pf?(sc.w=L.get(Pf[0].toLowerCase()),wg+Pf[0].length):-1}function oa(sc,Yd,wg){var Pf=H.exec(Yd.slice(wg));return Pf?(sc.m=me.get(Pf[0].toLowerCase()),wg+Pf[0].length):-1}function Ru(sc,Yd,wg){var Pf=W.exec(Yd.slice(wg));return Pf?(sc.m=j.get(Pf[0].toLowerCase()),wg+Pf[0].length):-1}function ga(sc,Yd,wg){return _n(sc,t,Yd,wg)}function _s(sc,Yd,wg){return _n(sc,i,Yd,wg)}function Sa(sc,Yd,wg){return _n(sc,s,Yd,wg)}function Ra(sc){return d[sc.getDay()]}function Da(sc){return f[sc.getDay()]}function Fa(sc){return v[sc.getMonth()]}function Na(sc){return p[sc.getMonth()]}function _a(sc){return o[+(sc.getHours()>=12)]}function Pa(sc){return 1+~~(sc.getMonth()/3)}function qc(sc){return d[sc.getUTCDay()]}function uf(sc){return f[sc.getUTCDay()]}function _h(sc){return v[sc.getUTCMonth()]}function Uh(sc){return p[sc.getUTCMonth()]}function Kd(sc){return o[+(sc.getUTCHours()>=12)]}function ud(sc){return 1+~~(sc.getUTCMonth()/3)}return{format:function(sc){var Yd=Ce(sc+="",$e);return Yd.toString=function(){return sc},Yd},parse:function(sc){var Yd=Me(sc+="",!1);return Yd.toString=function(){return sc},Yd},utcFormat:function(sc){var Yd=Ce(sc+="",De);return Yd.toString=function(){return sc},Yd},utcParse:function(sc){var Yd=Me(sc+="",!0);return Yd.toString=function(){return sc},Yd}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(n,t,i){var s=n<0?"-":"",o=(s?-n:n)+"",f=o.length;return s+(f<i?new Array(i-f+1).join(t)+o:o)}function requote(n){return n.replace(requoteRe,"\\$&")}function formatRe(n){return new RegExp("^(?:"+n.map(requote).join("|")+")","i")}function formatLookup(n){return new Map(n.map((t,i)=>[t.toLowerCase(),i]))}function parseWeekdayNumberSunday(n,t,i){var s=numberRe.exec(t.slice(i,i+1));return s?(n.w=+s[0],i+s[0].length):-1}function parseWeekdayNumberMonday(n,t,i){var s=numberRe.exec(t.slice(i,i+1));return s?(n.u=+s[0],i+s[0].length):-1}function parseWeekNumberSunday(n,t,i){var s=numberRe.exec(t.slice(i,i+2));return s?(n.U=+s[0],i+s[0].length):-1}function parseWeekNumberISO(n,t,i){var s=numberRe.exec(t.slice(i,i+2));return s?(n.V=+s[0],i+s[0].length):-1}function parseWeekNumberMonday(n,t,i){var s=numberRe.exec(t.slice(i,i+2));return s?(n.W=+s[0],i+s[0].length):-1}function parseFullYear(n,t,i){var s=numberRe.exec(t.slice(i,i+4));return s?(n.y=+s[0],i+s[0].length):-1}function parseYear(n,t,i){var s=numberRe.exec(t.slice(i,i+2));return s?(n.y=+s[0]+(+s[0]>68?1900:2e3),i+s[0].length):-1}function parseZone(n,t,i){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return s?(n.Z=s[1]?0:-(s[2]+(s[3]||"00")),i+s[0].length):-1}function parseQuarter(n,t,i){var s=numberRe.exec(t.slice(i,i+1));return s?(n.q=s[0]*3-3,i+s[0].length):-1}function parseMonthNumber(n,t,i){var s=numberRe.exec(t.slice(i,i+2));return s?(n.m=s[0]-1,i+s[0].length):-1}function parseDayOfMonth(n,t,i){var s=numberRe.exec(t.slice(i,i+2));return s?(n.d=+s[0],i+s[0].length):-1}function parseDayOfYear(n,t,i){var s=numberRe.exec(t.slice(i,i+3));return s?(n.m=0,n.d=+s[0],i+s[0].length):-1}function parseHour24(n,t,i){var s=numberRe.exec(t.slice(i,i+2));return s?(n.H=+s[0],i+s[0].length):-1}function parseMinutes(n,t,i){var s=numberRe.exec(t.slice(i,i+2));return s?(n.M=+s[0],i+s[0].length):-1}function parseSeconds(n,t,i){var s=numberRe.exec(t.slice(i,i+2));return s?(n.S=+s[0],i+s[0].length):-1}function parseMilliseconds(n,t,i){var s=numberRe.exec(t.slice(i,i+3));return s?(n.L=+s[0],i+s[0].length):-1}function parseMicroseconds(n,t,i){var s=numberRe.exec(t.slice(i,i+6));return s?(n.L=Math.floor(s[0]/1e3),i+s[0].length):-1}function parseLiteralPercent(n,t,i){var s=percentRe.exec(t.slice(i,i+1));return s?i+s[0].length:-1}function parseUnixTimestamp(n,t,i){var s=numberRe.exec(t.slice(i));return s?(n.Q=+s[0],i+s[0].length):-1}function parseUnixTimestampSeconds(n,t,i){var s=numberRe.exec(t.slice(i));return s?(n.s=+s[0],i+s[0].length):-1}function formatDayOfMonth(n,t){return pad(n.getDate(),t,2)}function formatHour24(n,t){return pad(n.getHours(),t,2)}function formatHour12(n,t){return pad(n.getHours()%12||12,t,2)}function formatDayOfYear(n,t){return pad(1+day.count(year(n),n),t,3)}function formatMilliseconds(n,t){return pad(n.getMilliseconds(),t,3)}function formatMicroseconds(n,t){return formatMilliseconds(n,t)+"000"}function formatMonthNumber(n,t){return pad(n.getMonth()+1,t,2)}function formatMinutes(n,t){return pad(n.getMinutes(),t,2)}function formatSeconds(n,t){return pad(n.getSeconds(),t,2)}function formatWeekdayNumberMonday(n){var t=n.getDay();return t===0?7:t}function formatWeekNumberSunday(n,t){return pad(sunday.count(year(n)-1,n),t,2)}function dISO(n){var t=n.getDay();return t>=4||t===0?thursday(n):thursday.ceil(n)}function formatWeekNumberISO(n,t){return n=dISO(n),pad(thursday.count(year(n),n)+(year(n).getDay()===4),t,2)}function formatWeekdayNumberSunday(n){return n.getDay()}function formatWeekNumberMonday(n,t){return pad(monday.count(year(n)-1,n),t,2)}function formatYear(n,t){return pad(n.getFullYear()%100,t,2)}function formatYearISO(n,t){return n=dISO(n),pad(n.getFullYear()%100,t,2)}function formatFullYear(n,t){return pad(n.getFullYear()%1e4,t,4)}function formatFullYearISO(n,t){var i=n.getDay();return n=i>=4||i===0?thursday(n):thursday.ceil(n),pad(n.getFullYear()%1e4,t,4)}function formatZone(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(n,t){return pad(n.getUTCDate(),t,2)}function formatUTCHour24(n,t){return pad(n.getUTCHours(),t,2)}function formatUTCHour12(n,t){return pad(n.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(n,t){return pad(1+utcDay.count(utcYear(n),n),t,3)}function formatUTCMilliseconds(n,t){return pad(n.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(n,t){return formatUTCMilliseconds(n,t)+"000"}function formatUTCMonthNumber(n,t){return pad(n.getUTCMonth()+1,t,2)}function formatUTCMinutes(n,t){return pad(n.getUTCMinutes(),t,2)}function formatUTCSeconds(n,t){return pad(n.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(n){var t=n.getUTCDay();return t===0?7:t}function formatUTCWeekNumberSunday(n,t){return pad(utcSunday.count(utcYear(n)-1,n),t,2)}function UTCdISO(n){var t=n.getUTCDay();return t>=4||t===0?utcThursday(n):utcThursday.ceil(n)}function formatUTCWeekNumberISO(n,t){return n=UTCdISO(n),pad(utcThursday.count(utcYear(n),n)+(utcYear(n).getUTCDay()===4),t,2)}function formatUTCWeekdayNumberSunday(n){return n.getUTCDay()}function formatUTCWeekNumberMonday(n,t){return pad(utcMonday.count(utcYear(n)-1,n),t,2)}function formatUTCYear(n,t){return pad(n.getUTCFullYear()%100,t,2)}function formatUTCYearISO(n,t){return n=UTCdISO(n),pad(n.getUTCFullYear()%100,t,2)}function formatUTCFullYear(n,t){return pad(n.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(n,t){var i=n.getUTCDay();return n=i>=4||i===0?utcThursday(n):utcThursday.ceil(n),pad(n.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(n){return+n}function formatUnixTimestampSeconds(n){return Math.floor(+n/1e3)}var locale,timeFormat$2,utcFormat$1;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(n){return locale=formatLocale(n),timeFormat$2=locale.format,locale.parse,utcFormat$1=locale.utcFormat,locale.utcParse,locale}function date$1(n){return new Date(n)}function number$6(n){return n instanceof Date?+n:+new Date(+n)}function calendar(n,t,i,s,o,f,d,p,v,_){var k=continuous$1(),P=k.invert,L=k.domain,G=_(".%L"),Z=_(":%S"),W=_("%I:%M"),j=_("%I %p"),H=_("%a %d"),me=_("%b %d"),$e=_("%B"),De=_("%Y");function le(Ce){return(v(Ce)<Ce?G:p(Ce)<Ce?Z:d(Ce)<Ce?W:f(Ce)<Ce?j:s(Ce)<Ce?o(Ce)<Ce?H:me:i(Ce)<Ce?$e:De)(Ce)}return k.invert=function(Ce){return new Date(P(Ce))},k.domain=function(Ce){return arguments.length?L(Array.from(Ce,number$6)):L().map(date$1)},k.ticks=function(Ce){var Me=L();return n(Me[0],Me[Me.length-1],Ce??10)},k.tickFormat=function(Ce,Me){return Me==null?le:_(Me)},k.nice=function(Ce){var Me=L();return(!Ce||typeof Ce.range!="function")&&(Ce=t(Me[0],Me[Me.length-1],Ce??10)),Ce?L(nice$1(Me,Ce)):k},k.copy=function(){return copy$2(k,calendar(n,t,i,s,o,f,d,p,v,_))},k}function time$1(){return initRange.apply(calendar(timeTicks,timeTickInterval,year,month,sunday,day,hour,minute,second,timeFormat$2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat$1).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$3(){var n=0,t=1,i,s,o,f,d=identity$3,p=!1,v;function _(P){return P==null||isNaN(P=+P)?v:d(o===0?.5:(P=(f(P)-i)*o,p?Math.max(0,Math.min(1,P)):P))}_.domain=function(P){return arguments.length?([n,t]=P,i=f(n=+n),s=f(t=+t),o=i===s?0:1/(s-i),_):[n,t]},_.clamp=function(P){return arguments.length?(p=!!P,_):p},_.interpolator=function(P){return arguments.length?(d=P,_):d};function k(P){return function(L){var G,Z;return arguments.length?([G,Z]=L,d=P(G,Z),_):[d(0),d(1)]}}return _.range=k(interpolate$3),_.rangeRound=k(interpolateRound$1),_.unknown=function(P){return arguments.length?(v=P,_):v},function(P){return f=P,i=P(n),s=P(t),o=i===s?0:1/(s-i),_}}function copy$1(n,t){return t.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function sequential(){var n=linearish(transformer$3()(identity$3));return n.copy=function(){return copy$1(n,sequential())},initInterpolator.apply(n,arguments)}function sequentialLog(){var n=loggish(transformer$3()).domain([1,10]);return n.copy=function(){return copy$1(n,sequentialLog()).base(n.base())},initInterpolator.apply(n,arguments)}function sequentialSymlog(){var n=symlogish(transformer$3());return n.copy=function(){return copy$1(n,sequentialSymlog()).constant(n.constant())},initInterpolator.apply(n,arguments)}function sequentialPow(){var n=powish(transformer$3());return n.copy=function(){return copy$1(n,sequentialPow()).exponent(n.exponent())},initInterpolator.apply(n,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function transformer$2(){var n=0,t=.5,i=1,s=1,o,f,d,p,v,_=identity$3,k,P=!1,L;function G(W){return isNaN(W=+W)?L:(W=.5+((W=+k(W))-f)*(s*W<s*f?p:v),_(P?Math.max(0,Math.min(1,W)):W))}G.domain=function(W){return arguments.length?([n,t,i]=W,o=k(n=+n),f=k(t=+t),d=k(i=+i),p=o===f?0:.5/(f-o),v=f===d?0:.5/(d-f),s=f<o?-1:1,G):[n,t,i]},G.clamp=function(W){return arguments.length?(P=!!W,G):P},G.interpolator=function(W){return arguments.length?(_=W,G):_};function Z(W){return function(j){var H,me,$e;return arguments.length?([H,me,$e]=j,_=piecewise(W,[H,me,$e]),G):[_(0),_(.5),_(1)]}}return G.range=Z(interpolate$3),G.rangeRound=Z(interpolateRound$1),G.unknown=function(W){return arguments.length?(L=W,G):L},function(W){return k=W,o=W(n),f=W(t),d=W(i),p=o===f?0:.5/(f-o),v=f===d?0:.5/(d-f),s=f<o?-1:1,G}}function diverging(){var n=linearish(transformer$2()(identity$3));return n.copy=function(){return copy$1(n,diverging())},initInterpolator.apply(n,arguments)}function divergingLog(){var n=loggish(transformer$2()).domain([.1,1,10]);return n.copy=function(){return copy$1(n,divergingLog()).base(n.base())},initInterpolator.apply(n,arguments)}function divergingSymlog(){var n=symlogish(transformer$2());return n.copy=function(){return copy$1(n,divergingSymlog()).constant(n.constant())},initInterpolator.apply(n,arguments)}function divergingPow(){var n=powish(transformer$2());return n.copy=function(){return copy$1(n,divergingPow()).exponent(n.exponent())},initInterpolator.apply(n,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}function colors$1(n){for(var t=n.length/6|0,i=new Array(t),s=0;s<t;)i[s]="#"+n.slice(s*6,++s*6);return i}const schemeCategory10=colors$1("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),schemeAccent=colors$1("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),schemeDark2=colors$1("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),schemeObservable10=colors$1("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),schemePaired=colors$1("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),schemePastel1=colors$1("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),schemePastel2=colors$1("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),schemeSet1=colors$1("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),schemeSet2=colors$1("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),schemeSet3=colors$1("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function bandSpace(n,t,i){const s=n-t+i*2;return n?s>0?s:1:0}const Identity="identity",Linear="linear",Log="log",Pow="pow",Sqrt="sqrt",Symlog="symlog",Time="time",UTC="utc",Sequential="sequential",Diverging="diverging",Quantile="quantile",Quantize="quantize",Threshold="threshold",Ordinal="ordinal",Point="point",Band="band",BinOrdinal="bin-ordinal",Continuous="continuous",Discrete$1="discrete",Discretizing="discretizing",Interpolating="interpolating",Temporal="temporal";function invertRange(n){return function(t){let i=t[0],s=t[1],o;return s<i&&(o=i,i=s,s=o),[n.invert(i),n.invert(s)]}}function invertRangeExtent(n){return function(t){const i=n.range();let s=t[0],o=t[1],f=-1,d,p,v,_;for(o<s&&(p=s,s=o,o=p),v=0,_=i.length;v<_;++v)i[v]>=s&&i[v]<=o&&(f<0&&(f=v),d=v);if(!(f<0))return s=n.invertExtent(i[f]),o=n.invertExtent(i[d]),[s[0]===void 0?s[1]:s[0],o[1]===void 0?o[0]:o[1]]}}function band(){const n=ordinal().unknown(void 0),t=n.domain,i=n.range;let s=[0,1],o,f,d=!1,p=0,v=0,_=.5;delete n.unknown;function k(){const P=t().length,L=s[1]<s[0],G=s[1-L],Z=bandSpace(P,p,v);let W=s[L-0];o=(G-W)/(Z||1),d&&(o=Math.floor(o)),W+=(G-W-o*(P-p))*_,f=o*(1-p),d&&(W=Math.round(W),f=Math.round(f));const j=range$8(P).map(H=>W+o*H);return i(L?j.reverse():j)}return n.domain=function(P){return arguments.length?(t(P),k()):t()},n.range=function(P){return arguments.length?(s=[+P[0],+P[1]],k()):s.slice()},n.rangeRound=function(P){return s=[+P[0],+P[1]],d=!0,k()},n.bandwidth=function(){return f},n.step=function(){return o},n.round=function(P){return arguments.length?(d=!!P,k()):d},n.padding=function(P){return arguments.length?(v=Math.max(0,Math.min(1,P)),p=v,k()):p},n.paddingInner=function(P){return arguments.length?(p=Math.max(0,Math.min(1,P)),k()):p},n.paddingOuter=function(P){return arguments.length?(v=Math.max(0,Math.min(1,P)),k()):v},n.align=function(P){return arguments.length?(_=Math.max(0,Math.min(1,P)),k()):_},n.invertRange=function(P){if(P[0]==null||P[1]==null)return;const L=s[1]<s[0],G=L?i().reverse():i(),Z=G.length-1;let W=+P[0],j=+P[1],H,me,$e;if(!(W!==W||j!==j)&&(j<W&&($e=W,W=j,j=$e),!(j<G[0]||W>s[1-L])))return H=Math.max(0,bisectRight$2(G,W)-1),me=W===j?H:bisectRight$2(G,j)-1,W-G[H]>f+1e-10&&++H,L&&($e=H,H=Z-me,me=Z-$e),H>me?void 0:t().slice(H,me+1)},n.invert=function(P){const L=n.invertRange([P,P]);return L&&L[0]},n.copy=function(){return band().domain(t()).range(s).round(d).paddingInner(p).paddingOuter(v).align(_)},k()}function pointish(n){const t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,n.copy=function(){return pointish(t())},n}function point$3(){return pointish(band().paddingInner(1))}var map=Array.prototype.map;function numbers(n){return map.call(n,toNumber)}const slice$2=Array.prototype.slice;function scaleBinOrdinal(){let n=[],t=[];function i(s){return s==null||s!==s?void 0:t[(bisectRight$2(n,s)-1)%t.length]}return i.domain=function(s){return arguments.length?(n=numbers(s),i):n.slice()},i.range=function(s){return arguments.length?(t=slice$2.call(s),i):t.slice()},i.tickFormat=function(s,o){return tickFormat$1(n[0],peek$2(n),s??10,o)},i.copy=function(){return scaleBinOrdinal().domain(i.domain()).range(i.range())},i}const scales$1=new Map,VEGA_SCALE=Symbol("vega_scale");function registerScale(n){return n[VEGA_SCALE]=!0,n}function isRegisteredScale(n){return n&&n[VEGA_SCALE]===!0}function create$2(n,t,i){const s=function(){const f=t();return f.invertRange||(f.invertRange=f.invert?invertRange(f):f.invertExtent?invertRangeExtent(f):void 0),f.type=n,registerScale(f)};return s.metadata=toSet(array$5(i)),s}function scale$5(n,t,i){return arguments.length>1?(scales$1.set(n,create$2(n,t,i)),this):isValidScaleType(n)?scales$1.get(n):void 0}scale$5(Identity,identity$2);scale$5(Linear,linear$1,Continuous);scale$5(Log,log$4,[Continuous,Log]);scale$5(Pow,pow$9,Continuous);scale$5(Sqrt,sqrt$9,Continuous);scale$5(Symlog,symlog,Continuous);scale$5(Time,time$1,[Continuous,Temporal]);scale$5(UTC,utcTime,[Continuous,Temporal]);scale$5(Sequential,sequential,[Continuous,Interpolating]);scale$5(`${Sequential}-${Linear}`,sequential,[Continuous,Interpolating]);scale$5(`${Sequential}-${Log}`,sequentialLog,[Continuous,Interpolating,Log]);scale$5(`${Sequential}-${Pow}`,sequentialPow,[Continuous,Interpolating]);scale$5(`${Sequential}-${Sqrt}`,sequentialSqrt,[Continuous,Interpolating]);scale$5(`${Sequential}-${Symlog}`,sequentialSymlog,[Continuous,Interpolating]);scale$5(`${Diverging}-${Linear}`,diverging,[Continuous,Interpolating]);scale$5(`${Diverging}-${Log}`,divergingLog,[Continuous,Interpolating,Log]);scale$5(`${Diverging}-${Pow}`,divergingPow,[Continuous,Interpolating]);scale$5(`${Diverging}-${Sqrt}`,divergingSqrt,[Continuous,Interpolating]);scale$5(`${Diverging}-${Symlog}`,divergingSymlog,[Continuous,Interpolating]);scale$5(Quantile,quantile,[Discretizing,Quantile]);scale$5(Quantize,quantize$1,Discretizing);scale$5(Threshold,threshold,Discretizing);scale$5(BinOrdinal,scaleBinOrdinal,[Discrete$1,Discretizing]);scale$5(Ordinal,ordinal,Discrete$1);scale$5(Band,band,Discrete$1);scale$5(Point,point$3,Discrete$1);function isValidScaleType(n){return scales$1.has(n)}function hasType(n,t){const i=scales$1.get(n);return i&&i.metadata[t]}function isContinuous$1(n){return hasType(n,Continuous)}function isDiscrete$2(n){return hasType(n,Discrete$1)}function isDiscretizing$1(n){return hasType(n,Discretizing)}function isLogarithmic(n){return hasType(n,Log)}function isTemporal(n){return hasType(n,Temporal)}function isInterpolating(n){return hasType(n,Interpolating)}function isQuantile$1(n){return hasType(n,Quantile)}const scaleProps=["clamp","base","constant","exponent"];function interpolateRange$1(n,t){const i=t[0],s=peek$2(t)-i;return function(o){return n(i+o*s)}}function interpolateColors(n,t,i){return piecewise(interpolate$2(t||"rgb",i),n)}function quantizeInterpolator(n,t){const i=new Array(t),s=t+1;for(let o=0;o<t;)i[o]=n(++o/s);return i}function scaleFraction(n,t,i){const s=i-t;let o,f,d;return!s||!Number.isFinite(s)?constant$6(.5):(o=(f=n.type).indexOf("-"),f=o<0?f:f.slice(o+1),d=scale$5(f)().domain([t,i]).range([0,1]),scaleProps.forEach(p=>n[p]?d[p](n[p]()):0),d)}function interpolate$2(n,t){const i=$$1[method(n)];return t!=null&&i&&i.gamma?i.gamma(t):i}function method(n){return"interpolate"+n.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const continuous={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},discrete={accent:schemeAccent,category10:schemeCategory10,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:schemeDark2,observable10:schemeObservable10,paired:schemePaired,pastel1:schemePastel1,pastel2:schemePastel2,set1:schemeSet1,set2:schemeSet2,set3:schemeSet3,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function colors(n){if(isArray(n))return n;const t=n.length/6|0,i=new Array(t);for(let s=0;s<t;)i[s]="#"+n.slice(s*6,++s*6);return i}function apply$1(n,t){for(const i in n)scheme$1(i,t(n[i]))}const schemes={};apply$1(discrete,colors);apply$1(continuous,n=>interpolateColors(colors(n)));function scheme$1(n,t){return n=n&&n.toLowerCase(),arguments.length>1?(schemes[n]=t,this):schemes[n]}const SymbolLegend="symbol",DiscreteLegend="discrete",GradientLegend="gradient",defaultFormatter=n=>isArray(n)?n.map(t=>String(t)):String(n),ascending$2=(n,t)=>n[1]-t[1],descending$2=(n,t)=>t[1]-n[1];function tickCount(n,t,i){let s;return isNumber$1(t)&&(n.bins&&(t=Math.max(t,n.bins.length)),i!=null&&(t=Math.min(t,Math.floor(span(n.domain())/i||1)+1))),isObject(t)&&(s=t.step,t=t.interval),isString(t)&&(t=n.type===Time?timeInterval(t):n.type==UTC?utcInterval(t):error$1("Only time and utc scales accept interval strings."),s&&(t=t.every(s))),t}function validTicks(n,t,i){let s=n.range(),o=s[0],f=peek$2(s),d=ascending$2;if(o>f&&(s=f,f=o,o=s,d=descending$2),o=Math.floor(o),f=Math.ceil(f),t=t.map(p=>[p,n(p)]).filter(p=>o<=p[1]&&p[1]<=f).sort(d).map(p=>p[0]),i>0&&t.length>1){const p=[t[0],peek$2(t)];for(;t.length>i&&t.length>=3;)t=t.filter((v,_)=>!(_%2));t.length<3&&(t=p)}return t}function tickValues(n,t){return n.bins?validTicks(n,n.bins,t):n.ticks?n.ticks(t):n.domain()}function tickFormat(n,t,i,s,o,f){const d=t.type;let p=defaultFormatter;if(d===Time||o===Time)p=n.timeFormat(s);else if(d===UTC||o===UTC)p=n.utcFormat(s);else if(isLogarithmic(d)){const v=n.formatFloat(s);if(f||t.bins)p=v;else{const _=tickLog(t,i,!1);p=k=>_(k)?v(k):""}}else if(t.tickFormat){const v=t.domain();p=n.formatSpan(v[0],v[v.length-1],i,s)}else s&&(p=n.format(s));return p}function tickLog(n,t,i){const s=tickValues(n,t),o=n.base(),f=Math.log(o),d=Math.max(1,o*t/s.length),p=v=>{let _=v/Math.pow(o,Math.round(Math.log(v)/f));return _*o<o-.5&&(_*=o),_<=d};return i?s.filter(p):p}const symbols$2={[Quantile]:"quantiles",[Quantize]:"thresholds",[Threshold]:"domain"},formats={[Quantile]:"quantiles",[Quantize]:"domain"};function labelValues(n,t){return n.bins?binValues(n.bins):n.type===Log?tickLog(n,t,!0):symbols$2[n.type]?thresholdValues(n[symbols$2[n.type]]()):tickValues(n,t)}function thresholdFormat(n,t,i){const s=t[formats[t.type]](),o=s.length;let f=o>1?s[1]-s[0]:s[0],d;for(d=1;d<o;++d)f=Math.min(f,s[d]-s[d-1]);return n.formatSpan(0,f,3*10,i)}function thresholdValues(n){const t=[-1/0].concat(n);return t.max=1/0,t}function binValues(n){const t=n.slice(0,-1);return t.max=peek$2(n),t}const isDiscreteRange=n=>symbols$2[n.type]||n.bins;function labelFormat(n,t,i,s,o,f,d){const p=formats[t.type]&&f!==Time&&f!==UTC?thresholdFormat(n,t,o):tickFormat(n,t,i,o,f,d);return s===SymbolLegend&&isDiscreteRange(t)?formatRange(p):s===DiscreteLegend?formatDiscrete(p):formatPoint(p)}const formatRange=n=>(t,i,s)=>{const o=get$3(s[i+1],get$3(s.max,1/0)),f=formatValue$1(t,n),d=formatValue$1(o,n);return f&&d?f+" â€“ "+d:d?"< "+d:"â‰¥ "+f},get$3=(n,t)=>n??t,formatDiscrete=n=>(t,i)=>i?n(t):null,formatPoint=n=>t=>n(t),formatValue$1=(n,t)=>Number.isFinite(n)?t(n):null;function labelFraction(n){const t=n.domain(),i=t.length-1;let s=+t[0],o=+peek$2(t),f=o-s;if(n.type===Threshold){const d=i?f/i:.1;s-=d,o+=d,f=o-s}return d=>(d-s)/f}function format$1(n,t,i,s){const o=s||t.type;return isString(i)&&isTemporal(o)&&(i=i.replace(/%a/g,"%A").replace(/%b/g,"%B")),!i&&o===Time?n.timeFormat("%A, %d %B %Y, %X"):!i&&o===UTC?n.utcFormat("%A, %d %B %Y, %X UTC"):labelFormat(n,t,5,null,i,s,!0)}function domainCaption(n,t,i){i=i||{};const s=Math.max(3,i.maxlen||7),o=format$1(n,t,i.format,i.formatType);if(isDiscretizing$1(t.type)){const f=labelValues(t).slice(1).map(o),d=f.length;return`${d} boundar${d===1?"y":"ies"}: ${f.join(", ")}`}else if(isDiscrete$2(t.type)){const f=t.domain(),d=f.length,p=d>s?f.slice(0,s-2).map(o).join(", ")+", ending with "+f.slice(-1).map(o):f.map(o).join(", ");return`${d} value${d===1?"":"s"}: ${p}`}else{const f=t.domain();return`values from ${o(f[0])} to ${o(peek$2(f))}`}}let gradient_id=0;function resetSVGGradientId(){gradient_id=0}const patternPrefix="p_";function isGradient(n){return n&&n.gradient}function gradientRef(n,t,i){const s=n.gradient;let o=n.id,f=s==="radial"?patternPrefix:"";return o||(o=n.id="gradient_"+gradient_id++,s==="radial"?(n.x1=get$2(n.x1,.5),n.y1=get$2(n.y1,.5),n.r1=get$2(n.r1,0),n.x2=get$2(n.x2,.5),n.y2=get$2(n.y2,.5),n.r2=get$2(n.r2,.5),f=patternPrefix):(n.x1=get$2(n.x1,0),n.y1=get$2(n.y1,0),n.x2=get$2(n.x2,1),n.y2=get$2(n.y2,0))),t[o]=n,"url("+(i||"")+"#"+f+o+")"}function get$2(n,t){return n??t}function Gradient$1(n,t){var i=[],s;return s={gradient:"linear",x1:n?n[0]:0,y1:n?n[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:i,stop:function(o,f){return i.push({offset:o,color:f}),s}}}const lookup$4={basis:{curve:curveBasis},"basis-closed":{curve:curveBasisClosed},"basis-open":{curve:curveBasisOpen},bundle:{curve:curveBundle,tension:"beta",value:.85},cardinal:{curve:curveCardinal,tension:"tension",value:0},"cardinal-open":{curve:curveCardinalOpen,tension:"tension",value:0},"cardinal-closed":{curve:curveCardinalClosed,tension:"tension",value:0},"catmull-rom":{curve:curveCatmullRom,tension:"alpha",value:.5},"catmull-rom-closed":{curve:curveCatmullRomClosed,tension:"alpha",value:.5},"catmull-rom-open":{curve:curveCatmullRomOpen,tension:"alpha",value:.5},linear:{curve:curveLinear},"linear-closed":{curve:curveLinearClosed},monotone:{horizontal:monotoneY,vertical:monotoneX},natural:{curve:curveNatural},step:{curve:curveStep},"step-after":{curve:stepAfter},"step-before":{curve:stepBefore}};function curves(n,t,i){var s=has$1(lookup$4,n)&&lookup$4[n],o=null;return s&&(o=s.curve||s[t||"vertical"],s.tension&&i!=null&&(o=o[s.tension](i))),o}const paramCounts={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},commandPattern=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,numberPattern=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,spacePattern=/^((\s+,?\s*)|(,\s*))/,flagPattern=/^[01]/;function parse$3(n){const t=[];return(n.match(commandPattern)||[]).forEach(s=>{let o=s[0];const f=o.toLowerCase(),d=paramCounts[f],p=parseParams(f,d,s.slice(1).trim()),v=p.length;if(v<d||v&&v%d!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([o,...p.slice(0,d)]),v!==d){f==="m"&&(o=o==="M"?"L":"l");for(let _=d;_<v;_+=d)t.push([o,...p.slice(_,_+d)])}}),t}function parseParams(n,t,i){const s=[];for(let o=0;t&&o<i.length;)for(let f=0;f<t;++f){const d=n==="a"&&(f===3||f===4)?flagPattern:numberPattern,p=i.slice(o).match(d);if(p===null)throw Error("Invalid SVG path, incorrect parameter type");o+=p[0].length,s.push(+p[0]);const v=i.slice(o).match(spacePattern);v!==null&&(o+=v[0].length)}return s}const DegToRad=Math.PI/180,Epsilon=1e-14,HalfPi=Math.PI/2,Tau=Math.PI*2,HalfSqrt3=Math.sqrt(3)/2;var segmentCache={},bezierCache={},join$1=[].join;function segments(n,t,i,s,o,f,d,p,v){const _=join$1.call(arguments);if(segmentCache[_])return segmentCache[_];const k=d*DegToRad,P=Math.sin(k),L=Math.cos(k);i=Math.abs(i),s=Math.abs(s);const G=L*(p-n)*.5+P*(v-t)*.5,Z=L*(v-t)*.5-P*(p-n)*.5;let W=G*G/(i*i)+Z*Z/(s*s);W>1&&(W=Math.sqrt(W),i*=W,s*=W);const j=L/i,H=P/i,me=-P/s,$e=L/s,De=j*p+H*v,le=me*p+$e*v,Ce=j*n+H*t,Me=me*n+$e*t;let _i=1/((Ce-De)*(Ce-De)+(Me-le)*(Me-le))-.25;_i<0&&(_i=0);let ll=Math.sqrt(_i);f==o&&(ll=-ll);const _l=.5*(De+Ce)-ll*(Me-le),oa=.5*(le+Me)+ll*(Ce-De),Ru=Math.atan2(le-oa,De-_l);let _s=Math.atan2(Me-oa,Ce-_l)-Ru;_s<0&&f===1?_s+=Tau:_s>0&&f===0&&(_s-=Tau);const Sa=Math.ceil(Math.abs(_s/(HalfPi+.001))),Ra=[];for(let Da=0;Da<Sa;++Da){const Fa=Ru+Da*_s/Sa,Na=Ru+(Da+1)*_s/Sa;Ra[Da]=[_l,oa,Fa,Na,i,s,P,L]}return segmentCache[_]=Ra}function bezier$2(n){const t=join$1.call(n);if(bezierCache[t])return bezierCache[t];var i=n[0],s=n[1],o=n[2],f=n[3],d=n[4],p=n[5],v=n[6],_=n[7];const k=_*d,P=-v*p,L=v*d,G=_*p,Z=Math.cos(o),W=Math.sin(o),j=Math.cos(f),H=Math.sin(f),me=.5*(f-o),$e=Math.sin(me*.5),De=8/3*$e*$e/Math.sin(me),le=i+Z-De*W,Ce=s+W+De*Z,Me=i+j,_n=s+H,_i=Me+De*H,ll=_n-De*j;return bezierCache[t]=[k*le+P*Ce,L*le+G*Ce,k*_i+P*ll,L*_i+G*ll,k*Me+P*_n,L*Me+G*_n]}const temp$1=["l",0,0,0,0,0,0,0];function scale$1$1(n,t,i){const s=temp$1[0]=n[0];if(s==="a"||s==="A")temp$1[1]=t*n[1],temp$1[2]=i*n[2],temp$1[3]=n[3],temp$1[4]=n[4],temp$1[5]=n[5],temp$1[6]=t*n[6],temp$1[7]=i*n[7];else if(s==="h"||s==="H")temp$1[1]=t*n[1];else if(s==="v"||s==="V")temp$1[1]=i*n[1];else for(var o=1,f=n.length;o<f;++o)temp$1[o]=(o%2==1?t:i)*n[o];return temp$1}function pathRender(n,t,i,s,o,f){var d,p=null,v=0,_=0,k=0,P=0,L,G,Z,W,j=0,H=0;i==null&&(i=0),s==null&&(s=0),o==null&&(o=1),f==null&&(f=o),n.beginPath&&n.beginPath();for(var me=0,$e=t.length;me<$e;++me){switch(d=t[me],(o!==1||f!==1)&&(d=scale$1$1(d,o,f)),d[0]){case"l":v+=d[1],_+=d[2],n.lineTo(v+i,_+s);break;case"L":v=d[1],_=d[2],n.lineTo(v+i,_+s);break;case"h":v+=d[1],n.lineTo(v+i,_+s);break;case"H":v=d[1],n.lineTo(v+i,_+s);break;case"v":_+=d[1],n.lineTo(v+i,_+s);break;case"V":_=d[1],n.lineTo(v+i,_+s);break;case"m":v+=d[1],_+=d[2],j=v,H=_,n.moveTo(v+i,_+s);break;case"M":v=d[1],_=d[2],j=v,H=_,n.moveTo(v+i,_+s);break;case"c":L=v+d[5],G=_+d[6],k=v+d[3],P=_+d[4],n.bezierCurveTo(v+d[1]+i,_+d[2]+s,k+i,P+s,L+i,G+s),v=L,_=G;break;case"C":v=d[5],_=d[6],k=d[3],P=d[4],n.bezierCurveTo(d[1]+i,d[2]+s,k+i,P+s,v+i,_+s);break;case"s":L=v+d[3],G=_+d[4],k=2*v-k,P=2*_-P,n.bezierCurveTo(k+i,P+s,v+d[1]+i,_+d[2]+s,L+i,G+s),k=v+d[1],P=_+d[2],v=L,_=G;break;case"S":L=d[3],G=d[4],k=2*v-k,P=2*_-P,n.bezierCurveTo(k+i,P+s,d[1]+i,d[2]+s,L+i,G+s),v=L,_=G,k=d[1],P=d[2];break;case"q":L=v+d[3],G=_+d[4],k=v+d[1],P=_+d[2],n.quadraticCurveTo(k+i,P+s,L+i,G+s),v=L,_=G;break;case"Q":L=d[3],G=d[4],n.quadraticCurveTo(d[1]+i,d[2]+s,L+i,G+s),v=L,_=G,k=d[1],P=d[2];break;case"t":L=v+d[1],G=_+d[2],p[0].match(/[QqTt]/)===null?(k=v,P=_):p[0]==="t"?(k=2*v-Z,P=2*_-W):p[0]==="q"&&(k=2*v-k,P=2*_-P),Z=k,W=P,n.quadraticCurveTo(k+i,P+s,L+i,G+s),v=L,_=G,k=v+d[1],P=_+d[2];break;case"T":L=d[1],G=d[2],k=2*v-k,P=2*_-P,n.quadraticCurveTo(k+i,P+s,L+i,G+s),v=L,_=G;break;case"a":drawArc(n,v+i,_+s,[d[1],d[2],d[3],d[4],d[5],d[6]+v+i,d[7]+_+s]),v+=d[6],_+=d[7];break;case"A":drawArc(n,v+i,_+s,[d[1],d[2],d[3],d[4],d[5],d[6]+i,d[7]+s]),v=d[6],_=d[7];break;case"z":case"Z":v=j,_=H,n.closePath();break}p=d}}function drawArc(n,t,i,s){const o=segments(s[5],s[6],s[0],s[1],s[3],s[4],s[2],t,i);for(let f=0;f<o.length;++f){const d=bezier$2(o[f]);n.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5])}}const Tan30=.5773502691896257,builtins={circle:{draw:function(n,t){const i=Math.sqrt(t)/2;n.moveTo(i,0),n.arc(0,0,i,0,Tau)}},cross:{draw:function(n,t){var i=Math.sqrt(t)/2,s=i/2.5;n.moveTo(-i,-s),n.lineTo(-i,s),n.lineTo(-s,s),n.lineTo(-s,i),n.lineTo(s,i),n.lineTo(s,s),n.lineTo(i,s),n.lineTo(i,-s),n.lineTo(s,-s),n.lineTo(s,-i),n.lineTo(-s,-i),n.lineTo(-s,-s),n.closePath()}},diamond:{draw:function(n,t){const i=Math.sqrt(t)/2;n.moveTo(-i,0),n.lineTo(0,-i),n.lineTo(i,0),n.lineTo(0,i),n.closePath()}},square:{draw:function(n,t){var i=Math.sqrt(t),s=-i/2;n.rect(s,s,i,i)}},arrow:{draw:function(n,t){var i=Math.sqrt(t)/2,s=i/7,o=i/2.5,f=i/8;n.moveTo(-s,i),n.lineTo(s,i),n.lineTo(s,-f),n.lineTo(o,-f),n.lineTo(0,-i),n.lineTo(-o,-f),n.lineTo(-s,-f),n.closePath()}},wedge:{draw:function(n,t){var i=Math.sqrt(t)/2,s=HalfSqrt3*i,o=s-i*Tan30,f=i/4;n.moveTo(0,-s-o),n.lineTo(-f,s-o),n.lineTo(f,s-o),n.closePath()}},triangle:{draw:function(n,t){var i=Math.sqrt(t)/2,s=HalfSqrt3*i,o=s-i*Tan30;n.moveTo(0,-s-o),n.lineTo(-i,s-o),n.lineTo(i,s-o),n.closePath()}},"triangle-up":{draw:function(n,t){var i=Math.sqrt(t)/2,s=HalfSqrt3*i;n.moveTo(0,-s),n.lineTo(-i,s),n.lineTo(i,s),n.closePath()}},"triangle-down":{draw:function(n,t){var i=Math.sqrt(t)/2,s=HalfSqrt3*i;n.moveTo(0,s),n.lineTo(-i,-s),n.lineTo(i,-s),n.closePath()}},"triangle-right":{draw:function(n,t){var i=Math.sqrt(t)/2,s=HalfSqrt3*i;n.moveTo(s,0),n.lineTo(-s,-i),n.lineTo(-s,i),n.closePath()}},"triangle-left":{draw:function(n,t){var i=Math.sqrt(t)/2,s=HalfSqrt3*i;n.moveTo(-s,0),n.lineTo(s,-i),n.lineTo(s,i),n.closePath()}},stroke:{draw:function(n,t){const i=Math.sqrt(t)/2;n.moveTo(-i,0),n.lineTo(i,0)}}};function symbols$1(n){return has$1(builtins,n)?builtins[n]:customSymbol(n)}var custom={};function customSymbol(n){if(!has$1(custom,n)){const t=parse$3(n);custom[n]={draw:function(i,s){pathRender(i,t,0,0,Math.sqrt(s)/2)}}}return custom[n]}const C$1=.448084975506;function rectangleX(n){return n.x}function rectangleY(n){return n.y}function rectangleWidth(n){return n.width}function rectangleHeight(n){return n.height}function number$5(n){return typeof n=="function"?n:()=>+n}function clamp(n,t,i){return Math.max(t,Math.min(n,i))}function vg_rect(){var n=rectangleX,t=rectangleY,i=rectangleWidth,s=rectangleHeight,o=number$5(0),f=o,d=o,p=o,v=null;function _(k,P,L){var G,Z=P??+n.call(this,k),W=L??+t.call(this,k),j=+i.call(this,k),H=+s.call(this,k),me=Math.min(j,H)/2,$e=clamp(+o.call(this,k),0,me),De=clamp(+f.call(this,k),0,me),le=clamp(+d.call(this,k),0,me),Ce=clamp(+p.call(this,k),0,me);if(v||(v=G=path$3()),$e<=0&&De<=0&&le<=0&&Ce<=0)v.rect(Z,W,j,H);else{var Me=Z+j,_n=W+H;v.moveTo(Z+$e,W),v.lineTo(Me-De,W),v.bezierCurveTo(Me-C$1*De,W,Me,W+C$1*De,Me,W+De),v.lineTo(Me,_n-Ce),v.bezierCurveTo(Me,_n-C$1*Ce,Me-C$1*Ce,_n,Me-Ce,_n),v.lineTo(Z+le,_n),v.bezierCurveTo(Z+C$1*le,_n,Z,_n-C$1*le,Z,_n-le),v.lineTo(Z,W+$e),v.bezierCurveTo(Z,W+C$1*$e,Z+C$1*$e,W,Z+$e,W),v.closePath()}if(G)return v=null,G+""||null}return _.x=function(k){return arguments.length?(n=number$5(k),_):n},_.y=function(k){return arguments.length?(t=number$5(k),_):t},_.width=function(k){return arguments.length?(i=number$5(k),_):i},_.height=function(k){return arguments.length?(s=number$5(k),_):s},_.cornerRadius=function(k,P,L,G){return arguments.length?(o=number$5(k),f=P!=null?number$5(P):o,p=L!=null?number$5(L):o,d=G!=null?number$5(G):f,_):o},_.context=function(k){return arguments.length?(v=k??null,_):v},_}function vg_trail(){var n,t,i,s,o=null,f,d,p,v;function _(P,L,G){const Z=G/2;if(f){var W=p-L,j=P-d;if(W||j){var H=Math.hypot(W,j),me=(W/=H)*v,$e=(j/=H)*v,De=Math.atan2(j,W);o.moveTo(d-me,p-$e),o.lineTo(P-W*Z,L-j*Z),o.arc(P,L,Z,De-Math.PI,De),o.lineTo(d+me,p+$e),o.arc(d,p,v,De,De+Math.PI)}else o.arc(P,L,Z,0,Tau);o.closePath()}else f=1;d=P,p=L,v=Z}function k(P){var L,G=P.length,Z,W=!1,j;for(o==null&&(o=j=path$3()),L=0;L<=G;++L)!(L<G&&s(Z=P[L],L,P))===W&&(W=!W)&&(f=0),W&&_(+n(Z,L,P),+t(Z,L,P),+i(Z,L,P));if(j)return o=null,j+""||null}return k.x=function(P){return arguments.length?(n=P,k):n},k.y=function(P){return arguments.length?(t=P,k):t},k.size=function(P){return arguments.length?(i=P,k):i},k.defined=function(P){return arguments.length?(s=P,k):s},k.context=function(P){return arguments.length?(P==null?o=null:o=P,k):o},k}function value$1(n,t){return n??t}const x$2=n=>n.x||0,y$2=n=>n.y||0,w$2=n=>n.width||0,h$1=n=>n.height||0,xw$1=n=>(n.x||0)+(n.width||0),yh$1=n=>(n.y||0)+(n.height||0),sa=n=>n.startAngle||0,ea$1=n=>n.endAngle||0,pa=n=>n.padAngle||0,ir$1=n=>n.innerRadius||0,or$1=n=>n.outerRadius||0,cr$1=n=>n.cornerRadius||0,tl$1=n=>value$1(n.cornerRadiusTopLeft,n.cornerRadius)||0,tr$1=n=>value$1(n.cornerRadiusTopRight,n.cornerRadius)||0,br$1=n=>value$1(n.cornerRadiusBottomRight,n.cornerRadius)||0,bl$1=n=>value$1(n.cornerRadiusBottomLeft,n.cornerRadius)||0,sz$1=n=>value$1(n.size,64),ts$1=n=>n.size||1,def=n=>n.defined!==!1,type$2=n=>symbols$1(n.shape||"circle"),arcShape=arc$2$1().startAngle(sa).endAngle(ea$1).padAngle(pa).innerRadius(ir$1).outerRadius(or$1).cornerRadius(cr$1),areavShape=area$2$1().x(x$2).y1(y$2).y0(yh$1).defined(def),areahShape=area$2$1().y(y$2).x1(x$2).x0(xw$1).defined(def),lineShape=line$2$1().x(x$2).y(y$2).defined(def),rectShape=vg_rect().x(x$2).y(y$2).width(w$2).height(h$1).cornerRadius(tl$1,tr$1,br$1,bl$1),symbolShape=Symbol$1().type(type$2).size(sz$1),trailShape=vg_trail().x(x$2).y(y$2).defined(def).size(ts$1);function hasCornerRadius(n){return n.cornerRadius||n.cornerRadiusTopLeft||n.cornerRadiusTopRight||n.cornerRadiusBottomRight||n.cornerRadiusBottomLeft}function arc$1$1(n,t){return arcShape.context(n)(t)}function area$1$1(n,t){const i=t[0],s=i.interpolate||"linear";return(i.orient==="horizontal"?areahShape:areavShape).curve(curves(s,i.orient,i.tension)).context(n)(t)}function line$1$1(n,t){const i=t[0],s=i.interpolate||"linear";return lineShape.curve(curves(s,i.orient,i.tension)).context(n)(t)}function rectangle(n,t,i,s){return rectShape.context(n)(t,i,s)}function shape$1(n,t){return(t.mark.shape||t.shape).context(n)(t)}function symbol$1(n,t){return symbolShape.context(n)(t)}function trail$1(n,t){return trailShape.context(n)(t)}var clip_id=1;function resetSVGClipId(){clip_id=1}function clip$1$1(n,t,i){var s=t.clip,o=n._defs,f=t.clip_id||(t.clip_id="clip"+clip_id++),d=o.clipping[f]||(o.clipping[f]={id:f});return isFunction$1(s)?d.path=s(null):hasCornerRadius(i)?d.path=rectangle(null,i,0,0):(d.width=i.width||0,d.height=i.height||0),"url(#"+f+")"}function Bounds(n){this.clear(),n&&this.union(n)}Bounds.prototype={clone(){return new Bounds(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(n){return this.x1===n.x1&&this.y1===n.y1&&this.x2===n.x2&&this.y2===n.y2},set(n,t,i,s){return i<n?(this.x2=n,this.x1=i):(this.x1=n,this.x2=i),s<t?(this.y2=t,this.y1=s):(this.y1=t,this.y2=s),this},add(n,t){return n<this.x1&&(this.x1=n),t<this.y1&&(this.y1=t),n>this.x2&&(this.x2=n),t>this.y2&&(this.y2=t),this},expand(n){return this.x1-=n,this.y1-=n,this.x2+=n,this.y2+=n,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(n){return this.x1*=n,this.y1*=n,this.x2*=n,this.y2*=n,this},translate(n,t){return this.x1+=n,this.x2+=n,this.y1+=t,this.y2+=t,this},rotate(n,t,i){const s=this.rotatedPoints(n,t,i);return this.clear().add(s[0],s[1]).add(s[2],s[3]).add(s[4],s[5]).add(s[6],s[7])},rotatedPoints(n,t,i){var{x1:s,y1:o,x2:f,y2:d}=this,p=Math.cos(n),v=Math.sin(n),_=t-t*p+i*v,k=i-t*v-i*p;return[p*s-v*o+_,v*s+p*o+k,p*s-v*d+_,v*s+p*d+k,p*f-v*o+_,v*f+p*o+k,p*f-v*d+_,v*f+p*d+k]},union(n){return n.x1<this.x1&&(this.x1=n.x1),n.y1<this.y1&&(this.y1=n.y1),n.x2>this.x2&&(this.x2=n.x2),n.y2>this.y2&&(this.y2=n.y2),this},intersect(n){return n.x1>this.x1&&(this.x1=n.x1),n.y1>this.y1&&(this.y1=n.y1),n.x2<this.x2&&(this.x2=n.x2),n.y2<this.y2&&(this.y2=n.y2),this},encloses(n){return n&&this.x1<=n.x1&&this.x2>=n.x2&&this.y1<=n.y1&&this.y2>=n.y2},alignsWith(n){return n&&(this.x1==n.x1||this.x2==n.x2||this.y1==n.y1||this.y2==n.y2)},intersects(n){return n&&!(this.x2<n.x1||this.x1>n.x2||this.y2<n.y1||this.y1>n.y2)},contains(n,t){return!(n<this.x1||n>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Item(n){this.mark=n,this.bounds=this.bounds||new Bounds}function GroupItem(n){Item.call(this,n),this.items=this.items||[]}inherits(GroupItem,Item);class ResourceLoader{constructor(t){this._pending=0,this._loader=t||loader()}pending(){return this._pending}sanitizeURL(t){const i=this;return increment(i),i._loader.sanitize(t,{context:"href"}).then(s=>(decrement(i),s)).catch(()=>(decrement(i),null))}loadImage(t){const i=this,s=domImage();return increment(i),i._loader.sanitize(t,{context:"image"}).then(o=>{const f=o.href;if(!f||!s)throw{url:f};const d=new s,p=has$1(o,"crossOrigin")?o.crossOrigin:"anonymous";return p!=null&&(d.crossOrigin=p),d.onload=()=>decrement(i),d.onerror=()=>decrement(i),d.src=f,d}).catch(o=>(decrement(i),{complete:!1,width:0,height:0,src:o&&o.url||""}))}ready(){const t=this;return new Promise(i=>{function s(o){t.pending()?setTimeout(()=>{s(!0)},10):i(o)}s(!1)})}}function increment(n){n._pending+=1}function decrement(n){n._pending-=1}function boundStroke(n,t,i){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const s=t.strokeWidth!=null?+t.strokeWidth:1;n.expand(s+(i?miterAdjustment(t,s):0))}return n}function miterAdjustment(n,t){return n.strokeJoin&&n.strokeJoin!=="miter"?0:t}const circleThreshold=Tau-1e-8;let bounds,lx$1,ly$1,rot,ma,mb$1,mc$1,md;const add$2=(n,t)=>bounds.add(n,t),addL=(n,t)=>add$2(lx$1=n,ly$1=t),addX=n=>add$2(n,bounds.y1),addY=n=>add$2(bounds.x1,n),px$1=(n,t)=>ma*n+mc$1*t,py$1=(n,t)=>mb$1*n+md*t,addp=(n,t)=>add$2(px$1(n,t),py$1(n,t)),addpL=(n,t)=>addL(px$1(n,t),py$1(n,t));function boundContext(n,t){return bounds=n,t?(rot=t*DegToRad,ma=md=Math.cos(rot),mb$1=Math.sin(rot),mc$1=-mb$1):(ma=md=1,rot=mb$1=mc$1=0),context$1}const context$1={beginPath(){},closePath(){},moveTo:addpL,lineTo:addpL,rect(n,t,i,s){rot?(addp(n+i,t),addp(n+i,t+s),addp(n,t+s),addpL(n,t)):(add$2(n+i,t+s),addL(n,t))},quadraticCurveTo(n,t,i,s){const o=px$1(n,t),f=py$1(n,t),d=px$1(i,s),p=py$1(i,s);quadExtrema(lx$1,o,d,addX),quadExtrema(ly$1,f,p,addY),addL(d,p)},bezierCurveTo(n,t,i,s,o,f){const d=px$1(n,t),p=py$1(n,t),v=px$1(i,s),_=py$1(i,s),k=px$1(o,f),P=py$1(o,f);cubicExtrema(lx$1,d,v,k,addX),cubicExtrema(ly$1,p,_,P,addY),addL(k,P)},arc(n,t,i,s,o,f){if(s+=rot,o+=rot,lx$1=i*Math.cos(o)+n,ly$1=i*Math.sin(o)+t,Math.abs(o-s)>circleThreshold)add$2(n-i,t-i),add$2(n+i,t+i);else{const d=_=>add$2(i*Math.cos(_)+n,i*Math.sin(_)+t);let p,v;if(d(s),d(o),o!==s)if(s=s%Tau,s<0&&(s+=Tau),o=o%Tau,o<0&&(o+=Tau),o<s&&(f=!f,p=s,s=o,o=p),f)for(o-=Tau,p=s-s%HalfPi,v=0;v<4&&p>o;++v,p-=HalfPi)d(p);else for(p=s-s%HalfPi+HalfPi,v=0;v<4&&p<o;++v,p=p+HalfPi)d(p)}}};function quadExtrema(n,t,i,s){const o=(n-t)/(n+i-2*t);0<o&&o<1&&s(n+(t-n)*o)}function cubicExtrema(n,t,i,s,o){const f=s-n+3*t-3*i,d=n+i-2*t,p=n-t;let v=0,_=0,k;Math.abs(f)>Epsilon?(k=d*d+p*f,k>=0&&(k=Math.sqrt(k),v=(-d+k)/f,_=(-d-k)/f)):v=.5*p/d,0<v&&v<1&&o(cubic(v,n,t,i,s)),0<_&&_<1&&o(cubic(_,n,t,i,s))}function cubic(n,t,i,s,o){const f=1-n,d=f*f,p=n*n;return d*f*t+3*d*n*i+3*f*p*s+p*n*o}var context$2=(context$2=domCanvas(1,1))?context$2.getContext("2d"):null;const b=new Bounds;function intersectPath(n){return function(t,i){if(!context$2)return!0;n(context$2,t),b.clear().union(t.bounds).intersect(i).round();const{x1:s,y1:o,x2:f,y2:d}=b;for(let p=o;p<=d;++p)for(let v=s;v<=f;++v)if(context$2.isPointInPath(v,p))return!0;return!1}}function intersectPoint(n,t){return t.contains(n.x||0,n.y||0)}function intersectRect(n,t){const i=n.x||0,s=n.y||0,o=n.width||0,f=n.height||0;return t.intersects(b.set(i,s,i+o,s+f))}function intersectRule(n,t){const i=n.x||0,s=n.y||0,o=n.x2!=null?n.x2:i,f=n.y2!=null?n.y2:s;return intersectBoxLine(t,i,s,o,f)}function intersectBoxLine(n,t,i,s,o){const{x1:f,y1:d,x2:p,y2:v}=n,_=s-t,k=o-i;let P=0,L=1,G,Z,W,j;for(j=0;j<4;++j){if(j===0&&(G=-_,Z=-(f-t)),j===1&&(G=_,Z=p-t),j===2&&(G=-k,Z=-(d-i)),j===3&&(G=k,Z=v-i),Math.abs(G)<1e-10&&Z<0)return!1;if(W=Z/G,G<0){if(W>L)return!1;W>P&&(P=W)}else if(G>0){if(W<P)return!1;W<L&&(L=W)}}return!0}function blend$1(n,t){n.globalCompositeOperation=t.blend||"source-over"}function value$2(n,t){return n??t}function addStops(n,t){const i=t.length;for(let s=0;s<i;++s)n.addColorStop(t[s].offset,t[s].color);return n}function gradient$2(n,t,i){const s=i.width(),o=i.height();let f;if(t.gradient==="radial")f=n.createRadialGradient(i.x1+value$2(t.x1,.5)*s,i.y1+value$2(t.y1,.5)*o,Math.max(s,o)*value$2(t.r1,0),i.x1+value$2(t.x2,.5)*s,i.y1+value$2(t.y2,.5)*o,Math.max(s,o)*value$2(t.r2,.5));else{const d=value$2(t.x1,0),p=value$2(t.y1,0),v=value$2(t.x2,1),_=value$2(t.y2,0);if(d===v||p===_||s===o)f=n.createLinearGradient(i.x1+d*s,i.y1+p*o,i.x1+v*s,i.y1+_*o);else{const k=domCanvas(Math.ceil(s),Math.ceil(o)),P=k.getContext("2d");return P.scale(s,o),P.fillStyle=addStops(P.createLinearGradient(d,p,v,_),t.stops),P.fillRect(0,0,s,o),n.createPattern(k,"no-repeat")}}return addStops(f,t.stops)}function color$4(n,t,i){return isGradient(i)?gradient$2(n,i,t.bounds):i}function fill(n,t,i){return i*=t.fillOpacity==null?1:t.fillOpacity,i>0?(n.globalAlpha=i,n.fillStyle=color$4(n,t,t.fill),!0):!1}var Empty=[];function stroke(n,t,i){var s=(s=t.strokeWidth)!=null?s:1;return s<=0?!1:(i*=t.strokeOpacity==null?1:t.strokeOpacity,i>0?(n.globalAlpha=i,n.strokeStyle=color$4(n,t,t.stroke),n.lineWidth=s,n.lineCap=t.strokeCap||"butt",n.lineJoin=t.strokeJoin||"miter",n.miterLimit=t.strokeMiterLimit||10,n.setLineDash&&(n.setLineDash(t.strokeDash||Empty),n.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function compare$1(n,t){return n.zindex-t.zindex||n.index-t.index}function zorder(n){if(!n.zdirty)return n.zitems;var t=n.items,i=[],s,o,f;for(o=0,f=t.length;o<f;++o)s=t[o],s.index=o,s.zindex&&i.push(s);return n.zdirty=!1,n.zitems=i.sort(compare$1)}function visit(n,t){var i=n.items,s,o;if(!i||!i.length)return;const f=zorder(n);if(f&&f.length){for(s=0,o=i.length;s<o;++s)i[s].zindex||t(i[s]);i=f}for(s=0,o=i.length;s<o;++s)t(i[s])}function pickVisit(n,t){var i=n.items,s,o;if(!i||!i.length)return null;const f=zorder(n);for(f&&f.length&&(i=f),o=i.length;--o>=0;)if(s=t(i[o]))return s;if(i===f){for(i=n.items,o=i.length;--o>=0;)if(!i[o].zindex&&(s=t(i[o])))return s}return null}function drawAll(n){return function(t,i,s){visit(i,o=>{(!s||s.intersects(o.bounds))&&drawPath(n,t,o,o)})}}function drawOne(n){return function(t,i,s){i.items.length&&(!s||s.intersects(i.bounds))&&drawPath(n,t,i.items[0],i.items)}}function drawPath(n,t,i,s){var o=i.opacity==null?1:i.opacity;o!==0&&(n(t,s)||(blend$1(t,i),i.fill&&fill(t,i,o)&&t.fill(),i.stroke&&stroke(t,i,o)&&t.stroke()))}function pick$1(n){return n=n||truthy,function(t,i,s,o,f,d){return s*=t.pixelRatio,o*=t.pixelRatio,pickVisit(i,p=>{const v=p.bounds;if(!(v&&!v.contains(f,d)||!v)&&n(t,p,s,o,f,d))return p})}}function hitPath(n,t){return function(i,s,o,f){var d=Array.isArray(s)?s[0]:s,p=t??d.fill,v=d.stroke&&i.isPointInStroke,_,k;return v&&(_=d.strokeWidth,k=d.strokeCap,i.lineWidth=_??1,i.lineCap=k??"butt"),n(i,s)?!1:p&&i.isPointInPath(o,f)||v&&i.isPointInStroke(o,f)}}function pickPath(n){return pick$1(hitPath(n))}function translate$2(n,t){return"translate("+n+","+t+")"}function rotate(n){return"rotate("+n+")"}function scale$4(n,t){return"scale("+n+","+t+")"}function translateItem(n){return translate$2(n.x||0,n.y||0)}function rotateItem(n){return translate$2(n.x||0,n.y||0)+(n.angle?" "+rotate(n.angle):"")}function transformItem(n){return translate$2(n.x||0,n.y||0)+(n.angle?" "+rotate(n.angle):"")+(n.scaleX||n.scaleY?" "+scale$4(n.scaleX||1,n.scaleY||1):"")}function markItemPath(n,t,i){function s(d,p){d("transform",rotateItem(p)),d("d",t(null,p))}function o(d,p){return t(boundContext(d,p.angle),p),boundStroke(d,p).translate(p.x||0,p.y||0)}function f(d,p){var v=p.x||0,_=p.y||0,k=p.angle||0;d.translate(v,_),k&&d.rotate(k*=DegToRad),d.beginPath(),t(d,p),k&&d.rotate(-k),d.translate(-v,-_)}return{type:n,tag:"path",nested:!1,attr:s,bound:o,draw:drawAll(f),pick:pickPath(f),isect:i||intersectPath(f)}}var arc$2=markItemPath("arc",arc$1$1);function pickArea(n,t){for(var i=n[0].orient==="horizontal"?t[1]:t[0],s=n[0].orient==="horizontal"?"y":"x",o=n.length,f=1/0,d,p;--o>=0;)n[o].defined!==!1&&(p=Math.abs(n[o][s]-i),p<f&&(f=p,d=n[o]));return d}function pickLine(n,t){for(var i=Math.pow(n[0].strokeWidth||1,2),s=n.length,o,f,d;--s>=0;)if(n[s].defined!==!1&&(o=n[s].x-t[0],f=n[s].y-t[1],d=o*o+f*f,d<i))return n[s];return null}function pickTrail(n,t){for(var i=n.length,s,o,f;--i>=0;)if(n[i].defined!==!1&&(s=n[i].x-t[0],o=n[i].y-t[1],f=s*s+o*o,s=n[i].size||1,f<s*s))return n[i];return null}function markMultiItemPath(n,t,i){function s(v,_){var k=_.mark.items;k.length&&v("d",t(null,k))}function o(v,_){var k=_.items;return k.length===0?v:(t(boundContext(v),k),boundStroke(v,k[0]))}function f(v,_){v.beginPath(),t(v,_)}const d=hitPath(f);function p(v,_,k,P,L,G){var Z=_.items,W=_.bounds;return!Z||!Z.length||W&&!W.contains(L,G)?null:(k*=v.pixelRatio,P*=v.pixelRatio,d(v,Z,k,P)?Z[0]:null)}return{type:n,tag:"path",nested:!0,attr:s,bound:o,draw:drawOne(f),pick:p,isect:intersectPoint,tip:i}}var area$2=markMultiItemPath("area",area$1$1,pickArea);function clip$3(n,t){var i=t.clip;n.save(),isFunction$1(i)?(n.beginPath(),i(n),n.clip()):clipGroup(n,t.group)}function clipGroup(n,t){n.beginPath(),hasCornerRadius(t)?rectangle(n,t,0,0):n.rect(0,0,t.width||0,t.height||0),n.clip()}function offset$1(n){const t=value$2(n.strokeWidth,1);return n.strokeOffset!=null?n.strokeOffset:n.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function attr$5(n,t){n("transform",translateItem(t))}function emitRectangle(n,t){const i=offset$1(t);n("d",rectangle(null,t,i,i))}function background$1(n,t){n("class","background"),n("aria-hidden",!0),emitRectangle(n,t)}function foreground(n,t){n("class","foreground"),n("aria-hidden",!0),t.strokeForeground?emitRectangle(n,t):n("d","")}function content(n,t,i){const s=t.clip?clip$1$1(i,t,t):null;n("clip-path",s)}function bound$5(n,t){if(!t.clip&&t.items){const i=t.items,s=i.length;for(let o=0;o<s;++o)n.union(i[o].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&n.add(0,0).add(t.width||0,t.height||0),boundStroke(n,t),n.translate(t.x||0,t.y||0)}function rectanglePath(n,t,i,s){const o=offset$1(t);n.beginPath(),rectangle(n,t,(i||0)+o,(s||0)+o)}const hitBackground=hitPath(rectanglePath),hitForeground=hitPath(rectanglePath,!1),hitCorner=hitPath(rectanglePath,!0);function draw$4(n,t,i,s){visit(t,o=>{const f=o.x||0,d=o.y||0,p=o.strokeForeground,v=o.opacity==null?1:o.opacity;(o.stroke||o.fill)&&v&&(rectanglePath(n,o,f,d),blend$1(n,o),o.fill&&fill(n,o,v)&&n.fill(),o.stroke&&!p&&stroke(n,o,v)&&n.stroke()),n.save(),n.translate(f,d),o.clip&&clipGroup(n,o),i&&i.translate(-f,-d),visit(o,_=>{(_.marktype==="group"||s==null||s.includes(_.marktype))&&this.draw(n,_,i,s)}),i&&i.translate(f,d),n.restore(),p&&o.stroke&&v&&(rectanglePath(n,o,f,d),blend$1(n,o),stroke(n,o,v)&&n.stroke())})}function pick$2(n,t,i,s,o,f){if(t.bounds&&!t.bounds.contains(o,f)||!t.items)return null;const d=i*n.pixelRatio,p=s*n.pixelRatio;return pickVisit(t,v=>{let _,k,P;const L=v.bounds;if(L&&!L.contains(o,f))return;k=v.x||0,P=v.y||0;const G=k+(v.width||0),Z=P+(v.height||0),W=v.clip;if(W&&(o<k||o>G||f<P||f>Z))return;if(n.save(),n.translate(k,P),k=o-k,P=f-P,W&&hasCornerRadius(v)&&!hitCorner(n,v,d,p))return n.restore(),null;const j=v.strokeForeground,H=t.interactive!==!1;return H&&j&&v.stroke&&hitForeground(n,v,d,p)?(n.restore(),v):(_=pickVisit(v,me=>pickMark(me,k,P)?this.pick(me,i,s,k,P):null),!_&&H&&(v.fill||!j&&v.stroke)&&hitBackground(n,v,d,p)&&(_=v),n.restore(),_||null)})}function pickMark(n,t,i){return(n.interactive!==!1||n.marktype==="group")&&n.bounds&&n.bounds.contains(t,i)}var group={type:"group",tag:"g",nested:!1,attr:attr$5,bound:bound$5,draw:draw$4,pick:pick$2,isect:intersectRect,content,background:background$1,foreground},metadata={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function getImage(n,t){var i=n.image;return(!i||n.url&&n.url!==i.url)&&(i={complete:!1,width:0,height:0},t.loadImage(n.url).then(s=>{n.image=s,n.image.url=n.url})),i}function imageWidth(n,t){return n.width!=null?n.width:!t||!t.width?0:n.aspect!==!1&&n.height?n.height*t.width/t.height:t.width}function imageHeight(n,t){return n.height!=null?n.height:!t||!t.height?0:n.aspect!==!1&&n.width?n.width*t.height/t.width:t.height}function imageXOffset(n,t){return n==="center"?t/2:n==="right"?t:0}function imageYOffset(n,t){return n==="middle"?t/2:n==="bottom"?t:0}function attr$4(n,t,i){const s=getImage(t,i),o=imageWidth(t,s),f=imageHeight(t,s),d=(t.x||0)-imageXOffset(t.align,o),p=(t.y||0)-imageYOffset(t.baseline,f),v=!s.src&&s.toDataURL?s.toDataURL():s.src||"";n("href",v,metadata["xmlns:xlink"],"xlink:href"),n("transform",translate$2(d,p)),n("width",o),n("height",f),n("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function bound$4(n,t){const i=t.image,s=imageWidth(t,i),o=imageHeight(t,i),f=(t.x||0)-imageXOffset(t.align,s),d=(t.y||0)-imageYOffset(t.baseline,o);return n.set(f,d,f+s,d+o)}function draw$3(n,t,i){visit(t,s=>{if(i&&!i.intersects(s.bounds))return;const o=getImage(s,this);let f=imageWidth(s,o),d=imageHeight(s,o);if(f===0||d===0)return;let p=(s.x||0)-imageXOffset(s.align,f),v=(s.y||0)-imageYOffset(s.baseline,d),_,k,P,L;s.aspect!==!1&&(k=o.width/o.height,P=s.width/s.height,k===k&&P===P&&k!==P&&(P<k?(L=f/k,v+=(d-L)/2,d=L):(L=d*k,p+=(f-L)/2,f=L))),(o.complete||o.toDataURL)&&(blend$1(n,s),n.globalAlpha=(_=s.opacity)!=null?_:1,n.imageSmoothingEnabled=s.smooth!==!1,n.drawImage(o,p,v,f,d))})}var image$1={type:"image",tag:"image",nested:!1,attr:attr$4,bound:bound$4,draw:draw$3,pick:pick$1(),isect:truthy,get:getImage,xOffset:imageXOffset,yOffset:imageYOffset},line$2=markMultiItemPath("line",line$1$1,pickLine);function attr$3(n,t){var i=t.scaleX||1,s=t.scaleY||1;(i!==1||s!==1)&&n("vector-effect","non-scaling-stroke"),n("transform",transformItem(t)),n("d",t.path)}function path$1(n,t){var i=t.path;if(i==null)return!0;var s=t.x||0,o=t.y||0,f=t.scaleX||1,d=t.scaleY||1,p=(t.angle||0)*DegToRad,v=t.pathCache;(!v||v.path!==i)&&((t.pathCache=v=parse$3(i)).path=i),p&&n.rotate&&n.translate?(n.translate(s,o),n.rotate(p),pathRender(n,v,0,0,f,d),n.rotate(-p),n.translate(-s,-o)):pathRender(n,v,s,o,f,d)}function bound$3(n,t){return path$1(boundContext(n,t.angle),t)?n.set(0,0,0,0):boundStroke(n,t,!0)}var path$2={type:"path",tag:"path",nested:!1,attr:attr$3,bound:bound$3,draw:drawAll(path$1),pick:pickPath(path$1),isect:intersectPath(path$1)};function attr$2(n,t){n("d",rectangle(null,t))}function bound$2(n,t){var i,s;return boundStroke(n.set(i=t.x||0,s=t.y||0,i+t.width||0,s+t.height||0),t)}function draw$2(n,t){n.beginPath(),rectangle(n,t)}var rect$1={type:"rect",tag:"path",nested:!1,attr:attr$2,bound:bound$2,draw:drawAll(draw$2),pick:pickPath(draw$2),isect:intersectRect};function attr$1(n,t){n("transform",translateItem(t)),n("x2",t.x2!=null?t.x2-(t.x||0):0),n("y2",t.y2!=null?t.y2-(t.y||0):0)}function bound$1(n,t){var i,s;return boundStroke(n.set(i=t.x||0,s=t.y||0,t.x2!=null?t.x2:i,t.y2!=null?t.y2:s),t)}function path(n,t,i){var s,o,f,d;return t.stroke&&stroke(n,t,i)?(s=t.x||0,o=t.y||0,f=t.x2!=null?t.x2:s,d=t.y2!=null?t.y2:o,n.beginPath(),n.moveTo(s,o),n.lineTo(f,d),!0):!1}function draw$1(n,t,i){visit(t,s=>{if(!(i&&!i.intersects(s.bounds))){var o=s.opacity==null?1:s.opacity;o&&path(n,s,o)&&(blend$1(n,s),n.stroke())}})}function hit$1(n,t,i,s){return n.isPointInStroke?path(n,t,1)&&n.isPointInStroke(i,s):!1}var rule$2={type:"rule",tag:"line",nested:!1,attr:attr$1,bound:bound$1,draw:draw$1,pick:pick$1(hit$1),isect:intersectRule},shape=markItemPath("shape",shape$1),symbol=markItemPath("symbol",symbol$1,intersectPoint);const widthCache=lruCache();var textMetrics={height:fontSize,measureWidth,estimateWidth,width:estimateWidth,canvas:useCanvas};useCanvas(!0);function useCanvas(n){textMetrics.width=n&&context$2?measureWidth:estimateWidth}function estimateWidth(n,t){return _estimateWidth(textValue(n,t),fontSize(n))}function _estimateWidth(n,t){return~~(.8*n.length*t)}function measureWidth(n,t){return fontSize(n)<=0||!(t=textValue(n,t))?0:_measureWidth(t,font$1(n))}function _measureWidth(n,t){const i=`(${t}) ${n}`;let s=widthCache.get(i);return s===void 0&&(context$2.font=t,s=context$2.measureText(n).width,widthCache.set(i,s)),s}function fontSize(n){return n.fontSize!=null?+n.fontSize||0:11}function lineHeight(n){return n.lineHeight!=null?n.lineHeight:fontSize(n)+2}function lineArray(n){return isArray(n)?n.length>1?n:n[0]:n}function textLines(n){return lineArray(n.lineBreak&&n.text&&!isArray(n.text)?n.text.split(n.lineBreak):n.text)}function multiLineOffset(n){const t=textLines(n);return(isArray(t)?t.length-1:0)*lineHeight(n)}function textValue(n,t){const i=t==null?"":(t+"").trim();return n.limit>0&&i.length?truncate(n,i):i}function widthGetter(n){if(textMetrics.width===measureWidth){const t=font$1(n);return i=>_measureWidth(i,t)}else if(textMetrics.width===estimateWidth){const t=fontSize(n);return i=>_estimateWidth(i,t)}else return t=>textMetrics.width(n,t)}function truncate(n,t){var i=+n.limit,s=widthGetter(n);if(s(t)<i)return t;var o=n.ellipsis||"â€¦",f=n.dir==="rtl",d=0,p=t.length,v;if(i-=s(o),f){for(;d<p;)v=d+p>>>1,s(t.slice(v))>i?d=v+1:p=v;return o+t.slice(d)}else{for(;d<p;)v=1+(d+p>>>1),s(t.slice(0,v))<i?d=v:p=v-1;return t.slice(0,d)+o}}function fontFamily(n,t){var i=n.font;return(t&&i?String(i).replace(/"/g,"'"):i)||"sans-serif"}function font$1(n,t){return(n.fontStyle?n.fontStyle+" ":"")+(n.fontVariant?n.fontVariant+" ":"")+(n.fontWeight?n.fontWeight+" ":"")+fontSize(n)+"px "+fontFamily(n,t)}function offset$2(n){var t=n.baseline,i=fontSize(n);return Math.round(t==="top"?.79*i:t==="middle"?.3*i:t==="bottom"?-.21*i:t==="line-top"?.29*i+.5*lineHeight(n):t==="line-bottom"?.29*i-.5*lineHeight(n):0)}const textAlign={left:"start",center:"middle",right:"end"},tempBounds$1=new Bounds;function anchorPoint(n){var t=n.x||0,i=n.y||0,s=n.radius||0,o;return s&&(o=(n.theta||0)-HalfPi,t+=s*Math.cos(o),i+=s*Math.sin(o)),tempBounds$1.x1=t,tempBounds$1.y1=i,tempBounds$1}function attr(n,t){var i=t.dx||0,s=(t.dy||0)+offset$2(t),o=anchorPoint(t),f=o.x1,d=o.y1,p=t.angle||0,v;n("text-anchor",textAlign[t.align]||"start"),p?(v=translate$2(f,d)+" "+rotate(p),(i||s)&&(v+=" "+translate$2(i,s))):v=translate$2(f+i,d+s),n("transform",v)}function bound(n,t,i){var s=textMetrics.height(t),o=t.align,f=anchorPoint(t),d=f.x1,p=f.y1,v=t.dx||0,_=(t.dy||0)+offset$2(t)-Math.round(.8*s),k=textLines(t),P;if(isArray(k)?(s+=lineHeight(t)*(k.length-1),P=k.reduce((L,G)=>Math.max(L,textMetrics.width(t,G)),0)):P=textMetrics.width(t,k),o==="center"?v-=P/2:o==="right"&&(v-=P),n.set(v+=d,_+=p,v+P,_+s),t.angle&&!i)n.rotate(t.angle*DegToRad,d,p);else if(i===2)return n.rotatedPoints(t.angle*DegToRad,d,p);return n}function draw$5(n,t,i){visit(t,s=>{var o=s.opacity==null?1:s.opacity,f,d,p,v,_,k,P;if(!(i&&!i.intersects(s.bounds)||o===0||s.fontSize<=0||s.text==null||s.text.length===0)){if(n.font=font$1(s),n.textAlign=s.align||"left",f=anchorPoint(s),d=f.x1,p=f.y1,s.angle&&(n.save(),n.translate(d,p),n.rotate(s.angle*DegToRad),d=p=0),d+=s.dx||0,p+=(s.dy||0)+offset$2(s),k=textLines(s),blend$1(n,s),isArray(k))for(_=lineHeight(s),v=0;v<k.length;++v)P=textValue(s,k[v]),s.fill&&fill(n,s,o)&&n.fillText(P,d,p),s.stroke&&stroke(n,s,o)&&n.strokeText(P,d,p),p+=_;else P=textValue(s,k),s.fill&&fill(n,s,o)&&n.fillText(P,d,p),s.stroke&&stroke(n,s,o)&&n.strokeText(P,d,p);s.angle&&n.restore()}})}function hit(n,t,i,s,o,f){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var d=anchorPoint(t),p=d.x1,v=d.y1,_=bound(tempBounds$1,t,1),k=-t.angle*DegToRad,P=Math.cos(k),L=Math.sin(k),G=P*o-L*f+(p-P*p+L*v),Z=L*o+P*f+(v-L*p-P*v);return _.contains(G,Z)}function intersectText(n,t){const i=bound(tempBounds$1,n,2);return intersectBoxLine(t,i[0],i[1],i[2],i[3])||intersectBoxLine(t,i[0],i[1],i[4],i[5])||intersectBoxLine(t,i[4],i[5],i[6],i[7])||intersectBoxLine(t,i[2],i[3],i[6],i[7])}var text$2={type:"text",tag:"text",nested:!1,attr,bound,draw:draw$5,pick:pick$1(hit),isect:intersectText},trail$2=markMultiItemPath("trail",trail$1,pickTrail),Marks={arc:arc$2,area:area$2,group,image:image$1,line:line$2,path:path$2,rect:rect$1,rule:rule$2,shape,symbol,text:text$2,trail:trail$2};function boundItem$1(n,t,i){var s=Marks[n.mark.marktype],o=t||s.bound;return s.nested&&(n=n.mark),o(n.bounds||(n.bounds=new Bounds),n,i)}var DUMMY={mark:null};function boundMark(n,t,i){var s=Marks[n.marktype],o=s.bound,f=n.items,d=f&&f.length,p,v,_,k;if(s.nested)return d?_=f[0]:(DUMMY.mark=n,_=DUMMY),k=boundItem$1(_,o,i),t=t&&t.union(k)||k,t;if(t=t||n.bounds&&n.bounds.clear()||new Bounds,d)for(p=0,v=f.length;p<v;++p)t.union(boundItem$1(f[p],o,i));return n.bounds=t}const keys$2=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function sceneToJSON(n,t){return JSON.stringify(n,keys$2,t)}function sceneFromJSON(n){const t=typeof n=="string"?JSON.parse(n):n;return initialize$1(t)}function initialize$1(n){var t=n.marktype,i=n.items,s,o,f;if(i)for(o=0,f=i.length;o<f;++o)s=t?"mark":"group",i[o][s]=n,i[o].zindex&&(i[o][s].zdirty=!0),(t||s)==="group"&&initialize$1(i[o]);return t&&boundMark(n),n}class Scenegraph{constructor(t){arguments.length?this.root=sceneFromJSON(t):(this.root=createMark({marktype:"group",name:"root",role:"frame"}),this.root.items=[new GroupItem(this.root)])}toJSON(t){return sceneToJSON(this.root,t||0)}mark(t,i,s){i=i||this.root.items[0];const o=createMark(t,i);return i.items[s]=o,o.zindex&&(o.group.zdirty=!0),o}}function createMark(n,t){const i={bounds:new Bounds,clip:!!n.clip,group:t,interactive:n.interactive!==!1,items:[],marktype:n.marktype,name:n.name||void 0,role:n.role||void 0,zindex:n.zindex||0};return n.aria!=null&&(i.aria=n.aria),n.description&&(i.description=n.description),i}function domCreate(n,t,i){return!n&&typeof document<"u"&&document.createElement&&(n=document),n?i?n.createElementNS(i,t):n.createElement(t):null}function domFind(n,t){t=t.toLowerCase();for(var i=n.childNodes,s=0,o=i.length;s<o;++s)if(i[s].tagName.toLowerCase()===t)return i[s]}function domChild(n,t,i,s){var o=n.childNodes[t],f;return(!o||o.tagName.toLowerCase()!==i.toLowerCase())&&(f=o||null,o=domCreate(n.ownerDocument,i,s),n.insertBefore(o,f)),o}function domClear(n,t){for(var i=n.childNodes,s=i.length;s>t;)n.removeChild(i[--s]);return n}function cssClass(n){return"mark-"+n.marktype+(n.role?" role-"+n.role:"")+(n.name?" "+n.name:"")}function point$2(n,t){const i=t.getBoundingClientRect();return[n.clientX-i.left-(t.clientLeft||0),n.clientY-i.top-(t.clientTop||0)]}function resolveItem(n,t,i,s){var o=n&&n.mark,f,d;if(o&&(f=Marks[o.marktype]).tip){for(d=point$2(t,i),d[0]-=s[0],d[1]-=s[1];n=n.mark.group;)d[0]-=n.x||0,d[1]-=n.y||0;n=f.tip(o.items,d)}return n}class Handler{constructor(t,i){this._active=null,this._handlers={},this._loader=t||loader(),this._tooltip=i||defaultTooltip$1}initialize(t,i,s){return this._el=t,this._obj=s||null,this.origin(i)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,i,s){for(let o=t?t.length:0;--o>=0;)if(t[o].type===i&&(!s||t[o].handler===s))return o;return-1}handlers(t){const i=this._handlers,s=[];if(t)s.push(...i[this.eventName(t)]);else for(const o in i)s.push(...i[o]);return s}eventName(t){const i=t.indexOf(".");return i<0?t:t.slice(0,i)}handleHref(t,i,s){this._loader.sanitize(s,{context:"href"}).then(o=>{const f=new MouseEvent(t.type,t),d=domCreate(null,"a");for(const p in o)d.setAttribute(p,o[p]);d.dispatchEvent(f)}).catch(()=>{})}handleTooltip(t,i,s){if(i&&i.tooltip!=null){i=resolveItem(i,t,this.canvas(),this._origin);const o=s&&i&&i.tooltip||null;this._tooltip.call(this._obj,this,t,i,o)}}getItemBoundingClientRect(t){const i=this.canvas();if(!i)return;const s=i.getBoundingClientRect(),o=this._origin,f=t.bounds,d=f.width(),p=f.height();let v=f.x1+o[0]+s.left,_=f.y1+o[1]+s.top;for(;t.mark&&(t=t.mark.group);)v+=t.x||0,_+=t.y||0;return{x:v,y:_,width:d,height:p,left:v,top:_,right:v+d,bottom:_+p}}}function defaultTooltip$1(n,t,i,s){n.element().setAttribute("title",s||"")}class Renderer{constructor(t){this._el=null,this._bgcolor=null,this._loader=new ResourceLoader(t)}initialize(t,i,s,o,f){return this._el=t,this.resize(i,s,o,f)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,i,s,o){return this._width=t,this._height=i,this._origin=s||[0,0],this._scale=o||1,this}dirty(){}render(t,i){const s=this;return s._call=function(){s._render(t,i)},s._call(),s._call=null,s}_render(){}renderAsync(t,i){const s=this.render(t,i);return this._ready?this._ready.then(()=>s):Promise.resolve(s)}_load(t,i){var s=this,o=s._loader[t](i);if(!s._ready){const f=s._call;s._ready=s._loader.ready().then(d=>{d&&f(),s._ready=null})}return o}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const KeyDownEvent="keydown",KeyPressEvent="keypress",KeyUpEvent="keyup",DragEnterEvent="dragenter",DragLeaveEvent="dragleave",DragOverEvent="dragover",PointerDownEvent="pointerdown",PointerUpEvent="pointerup",PointerMoveEvent="pointermove",PointerOutEvent="pointerout",PointerOverEvent="pointerover",MouseDownEvent="mousedown",MouseUpEvent="mouseup",MouseMoveEvent="mousemove",MouseOutEvent="mouseout",MouseOverEvent="mouseover",ClickEvent="click",DoubleClickEvent="dblclick",WheelEvent="wheel",MouseWheelEvent="mousewheel",TouchStartEvent="touchstart",TouchMoveEvent="touchmove",TouchEndEvent="touchend",Events=[KeyDownEvent,KeyPressEvent,KeyUpEvent,DragEnterEvent,DragLeaveEvent,DragOverEvent,PointerDownEvent,PointerUpEvent,PointerMoveEvent,PointerOutEvent,PointerOverEvent,MouseDownEvent,MouseUpEvent,MouseMoveEvent,MouseOutEvent,MouseOverEvent,ClickEvent,DoubleClickEvent,WheelEvent,MouseWheelEvent,TouchStartEvent,TouchMoveEvent,TouchEndEvent],TooltipShowEvent=PointerMoveEvent,TooltipHideEvent=MouseOutEvent,HrefEvent=ClickEvent;class CanvasHandler extends Handler{constructor(t,i){super(t,i),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Events,this.pointermove=move([PointerMoveEvent,MouseMoveEvent],[PointerOverEvent,MouseOverEvent],[PointerOutEvent,MouseOutEvent]),this.dragover=move([DragOverEvent],[DragEnterEvent],[DragLeaveEvent]),this.pointerout=inactive([PointerOutEvent,MouseOutEvent]),this.dragleave=inactive([DragLeaveEvent])}initialize(t,i,s){return this._canvas=t&&domFind(t,"canvas"),[ClickEvent,MouseDownEvent,PointerDownEvent,PointerMoveEvent,PointerOutEvent,DragLeaveEvent].forEach(o=>eventListenerCheck(this,o)),super.initialize(t,i,s)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(MouseWheelEvent,t)}pointerdown(t){this._down=this._active,this.fire(PointerDownEvent,t)}mousedown(t){this._down=this._active,this.fire(MouseDownEvent,t)}click(t){this._down===this._active&&(this.fire(ClickEvent,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(TouchStartEvent,t,!0)}touchmove(t){this.fire(TouchMoveEvent,t,!0)}touchend(t){this.fire(TouchEndEvent,t,!0),this._touch=null}fire(t,i,s){const o=s?this._touch:this._active,f=this._handlers[t];if(i.vegaType=t,t===HrefEvent&&o&&o.href?this.handleHref(i,o,o.href):(t===TooltipShowEvent||t===TooltipHideEvent)&&this.handleTooltip(i,o,t!==TooltipHideEvent),f)for(let d=0,p=f.length;d<p;++d)f[d].handler.call(this._obj,i,o)}on(t,i){const s=this.eventName(t),o=this._handlers;return this._handlerIndex(o[s],t,i)<0&&(eventListenerCheck(this,t),(o[s]||(o[s]=[])).push({type:t,handler:i})),this}off(t,i){const s=this.eventName(t),o=this._handlers[s],f=this._handlerIndex(o,t,i);return f>=0&&o.splice(f,1),this}pickEvent(t){const i=point$2(t,this._canvas),s=this._origin;return this.pick(this._scene,i[0],i[1],i[0]-s[0],i[1]-s[1])}pick(t,i,s,o,f){const d=this.context();return Marks[t.marktype].pick.call(this,d,t,i,s,o,f)}}const eventBundle=n=>n===TouchStartEvent||n===TouchMoveEvent||n===TouchEndEvent?[TouchStartEvent,TouchMoveEvent,TouchEndEvent]:[n];function eventListenerCheck(n,t){eventBundle(t).forEach(i=>addEventListener(n,i))}function addEventListener(n,t){const i=n.canvas();i&&!n._events[t]&&(n._events[t]=1,i.addEventListener(t,n[t]?s=>n[t](s):s=>n.fire(t,s)))}function fireAll(n,t,i){t.forEach(s=>n.fire(s,i))}function move(n,t,i){return function(s){const o=this._active,f=this.pickEvent(s);f===o?fireAll(this,n,s):((!o||!o.exit)&&fireAll(this,i,s),this._active=f,fireAll(this,t,s),fireAll(this,n,s))}}function inactive(n){return function(t){fireAll(this,n,t),this._active=null}}function devicePixelRatio(){return typeof window<"u"&&window.devicePixelRatio||1}function resize(n,t,i,s,o,f){const d=typeof HTMLElement<"u"&&n instanceof HTMLElement&&n.parentNode!=null,p=n.getContext("2d"),v=d?devicePixelRatio():o;n.width=t*v,n.height=i*v;for(const _ in f)p[_]=f[_];return d&&v!==1&&(n.style.width=t+"px",n.style.height=i+"px"),p.pixelRatio=v,p.setTransform(v,0,0,v,v*s[0],v*s[1]),n}class CanvasRenderer extends Renderer{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Bounds,this._tempb=new Bounds}initialize(t,i,s,o,f,d){return this._options=d||{},this._canvas=this._options.externalContext?null:domCanvas(1,1,this._options.type),t&&this._canvas&&(domClear(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,i,s,o,f)}resize(t,i,s,o){if(super.resize(t,i,s,o),this._canvas)resize(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const f=this._options.externalContext;f||error$1("CanvasRenderer is missing a valid canvas or context"),f.scale(this._scale,this._scale),f.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const i=this._tempb.clear().union(t.bounds);let s=t.mark.group;for(;s;)i.translate(s.x||0,s.y||0),s=s.mark.group;this._dirty.union(i)}_render(t,i){const s=this.context(),o=this._origin,f=this._width,d=this._height,p=this._dirty,v=viewBounds(o,f,d);s.save();const _=this._redraw||p.empty()?(this._redraw=!1,v.expand(1)):clipToBounds(s,v.intersect(p),o);return this.clear(-o[0],-o[1],f,d),this.draw(s,t,_,i),s.restore(),p.clear(),this}draw(t,i,s,o){if(i.marktype!=="group"&&o!=null&&!o.includes(i.marktype))return;const f=Marks[i.marktype];i.clip&&clip$3(t,i),f.draw.call(this,t,i,s,o),i.clip&&t.restore()}clear(t,i,s,o){const f=this._options,d=this.context();f.type!=="pdf"&&!f.externalContext&&d.clearRect(t,i,s,o),this._bgcolor!=null&&(d.fillStyle=this._bgcolor,d.fillRect(t,i,s,o))}}const viewBounds=(n,t,i)=>new Bounds().set(0,0,t,i).translate(-n[0],-n[1]);function clipToBounds(n,t,i){return t.expand(1).round(),n.pixelRatio%1&&t.scale(n.pixelRatio).round().scale(1/n.pixelRatio),t.translate(-(i[0]%1),-(i[1]%1)),n.beginPath(),n.rect(t.x1,t.y1,t.width(),t.height()),n.clip(),t}class SVGHandler extends Handler{constructor(t,i){super(t,i);const s=this;s._hrefHandler=listener(s,(o,f)=>{f&&f.href&&s.handleHref(o,f,f.href)}),s._tooltipHandler=listener(s,(o,f)=>{s.handleTooltip(o,f,o.type!==TooltipHideEvent)})}initialize(t,i,s){let o=this._svg;return o&&(o.removeEventListener(HrefEvent,this._hrefHandler),o.removeEventListener(TooltipShowEvent,this._tooltipHandler),o.removeEventListener(TooltipHideEvent,this._tooltipHandler)),this._svg=o=t&&domFind(t,"svg"),o&&(o.addEventListener(HrefEvent,this._hrefHandler),o.addEventListener(TooltipShowEvent,this._tooltipHandler),o.addEventListener(TooltipHideEvent,this._tooltipHandler)),super.initialize(t,i,s)}canvas(){return this._svg}on(t,i){const s=this.eventName(t),o=this._handlers;if(this._handlerIndex(o[s],t,i)<0){const d={type:t,handler:i,listener:listener(this,i)};(o[s]||(o[s]=[])).push(d),this._svg&&this._svg.addEventListener(s,d.listener)}return this}off(t,i){const s=this.eventName(t),o=this._handlers[s],f=this._handlerIndex(o,t,i);return f>=0&&(this._svg&&this._svg.removeEventListener(s,o[f].listener),o.splice(f,1)),this}}const listener=(n,t)=>i=>{let s=i.target.__data__;s=Array.isArray(s)?s[0]:s,i.vegaType=i.type,t.call(n._obj,i,s)},ARIA_HIDDEN="aria-hidden",ARIA_LABEL="aria-label",ARIA_ROLE="role",ARIA_ROLEDESCRIPTION="aria-roledescription",GRAPHICS_OBJECT="graphics-object",GRAPHICS_SYMBOL="graphics-symbol",bundle=(n,t,i)=>({[ARIA_ROLE]:n,[ARIA_ROLEDESCRIPTION]:t,[ARIA_LABEL]:i||void 0}),AriaIgnore=toSet(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),AriaGuides={axis:{desc:"axis",caption:axisCaption},legend:{desc:"legend",caption:legendCaption},"title-text":{desc:"title",caption:n=>`Title text '${titleCaption(n)}'`},"title-subtitle":{desc:"subtitle",caption:n=>`Subtitle text '${titleCaption(n)}'`}},AriaEncode={ariaRole:ARIA_ROLE,ariaRoleDescription:ARIA_ROLEDESCRIPTION,description:ARIA_LABEL};function ariaItemAttributes(n,t){const i=t.aria===!1;if(n(ARIA_HIDDEN,i||void 0),i||t.description==null)for(const s in AriaEncode)n(AriaEncode[s],void 0);else{const s=t.mark.marktype;n(ARIA_LABEL,t.description),n(ARIA_ROLE,t.ariaRole||(s==="group"?GRAPHICS_OBJECT:GRAPHICS_SYMBOL)),n(ARIA_ROLEDESCRIPTION,t.ariaRoleDescription||`${s} mark`)}}function ariaMarkAttributes(n){return n.aria===!1?{[ARIA_HIDDEN]:!0}:AriaIgnore[n.role]?null:AriaGuides[n.role]?ariaGuide(n,AriaGuides[n.role]):ariaMark(n)}function ariaMark(n){const t=n.marktype,i=t==="group"||t==="text"||n.items.some(s=>s.description!=null&&s.aria!==!1);return bundle(i?GRAPHICS_OBJECT:GRAPHICS_SYMBOL,`${t} mark container`,n.description)}function ariaGuide(n,t){try{const i=n.items[0],s=t.caption||(()=>"");return bundle(t.role||GRAPHICS_SYMBOL,t.desc,i.description||s(i))}catch{return null}}function titleCaption(n){return array$5(n.text).join(" ")}function axisCaption(n){const t=n.datum,i=n.orient,s=t.title?extractTitle(n):null,o=n.context,f=o.scales[t.scale].value,d=o.dataflow.locale(),p=f.type;return`${i==="left"||i==="right"?"Y":"X"}-axis`+(s?` titled '${s}'`:"")+` for a ${isDiscrete$2(p)?"discrete":p} scale with ${domainCaption(d,f,n)}`}function legendCaption(n){const t=n.datum,i=t.title?extractTitle(n):null,s=`${t.type||""} legend`.trim(),o=t.scales,f=Object.keys(o),d=n.context,p=d.scales[o[f[0]]].value,v=d.dataflow.locale();return capitalize(s)+(i?` titled '${i}'`:"")+` for ${channelCaption(f)} with ${domainCaption(v,p,n)}`}function extractTitle(n){try{return array$5(peek$2(n.items).items[0].text).join(" ")}catch{return null}}function channelCaption(n){return n=n.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),n.length<2?n[0]:n.slice(0,-1).join(", ")+" and "+peek$2(n)}function capitalize(n){return n.length?n[0].toUpperCase()+n.slice(1):n}const innerText=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),attrText=n=>innerText(n).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function markup(){let n="",t="",i="";const s=[],o=()=>t=i="",f=v=>{t&&(n+=`${t}>${i}`,o()),s.push(v)},d=(v,_)=>(_!=null&&(t+=` ${v}="${attrText(_)}"`),p),p={open(v){f(v),t="<"+v;for(var _=arguments.length,k=new Array(_>1?_-1:0),P=1;P<_;P++)k[P-1]=arguments[P];for(const L of k)for(const G in L)d(G,L[G]);return p},close(){const v=s.pop();return t?n+=t+(i?`>${i}</${v}>`:"/>"):n+=`</${v}>`,o(),p},attr:d,text:v=>(i+=innerText(v),p),toString:()=>n};return p}const serializeXML=n=>_serialize(markup(),n)+"";function _serialize(n,t){if(n.open(t.tagName),t.hasAttributes()){const i=t.attributes,s=i.length;for(let o=0;o<s;++o)n.attr(i[o].name,i[o].value)}if(t.hasChildNodes()){const i=t.childNodes;for(const s of i)s.nodeType===3?n.text(s.nodeValue):_serialize(n,s)}return n.close()}const stylesAttr={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},stylesCss={blend:"mix-blend-mode"},rootAttributes={fill:"none","stroke-miterlimit":10},RootIndex=0,xmlns="http://www.w3.org/2000/xmlns/",svgns=metadata.xmlns;class SVGRenderer extends Renderer{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,i,s,o,f){return this._defs={},this._clearDefs(),t&&(this._svg=domChild(t,0,"svg",svgns),this._svg.setAttributeNS(xmlns,"xmlns",svgns),this._svg.setAttributeNS(xmlns,"xmlns:xlink",metadata["xmlns:xlink"]),this._svg.setAttribute("version",metadata.version),this._svg.setAttribute("class","marks"),domClear(t,1),this._root=domChild(this._svg,RootIndex,"g",svgns),setAttributes(this._root,rootAttributes),domClear(this._svg,RootIndex+1)),this.background(this._bgcolor),super.initialize(t,i,s,o,f)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,i,s,o){return super.resize(t,i,s,o),this._svg&&(setAttributes(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,i=this._bgcolor;if(!t)return null;let s;i&&(t.removeAttribute("style"),s=domChild(t,RootIndex,"rect",svgns),setAttributes(s,{width:this._width,height:this._height,fill:i}));const o=serializeXML(t);return i&&(t.removeChild(s),this._svg.style.setProperty("background-color",i)),o}_render(t,i){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,i),domClear(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const i=++this._dirtyID;let s,o,f,d,p,v,_;for(p=0,v=t.length;p<v;++p)if(s=t[p],o=s.mark,o.marktype!==f&&(f=o.marktype,d=Marks[f]),o.zdirty&&o.dirty!==i&&(this._dirtyAll=!1,dirtyParents(s,i),o.items.forEach(k=>{k.dirty=i})),!o.zdirty){if(s.exit){d.nested&&o.items.length?(_=o.items[0],_._svg&&this._update(d,_._svg,_)):s._svg&&(_=s._svg.parentNode,_&&_.removeChild(s._svg)),s._svg=null;continue}s=d.nested?o.items[0]:s,s._update!==i&&(!s._svg||!s._svg.ownerSVGElement?(this._dirtyAll=!1,dirtyParents(s,i)):this._update(d,s._svg,s),s._update=i)}return!this._dirtyAll}mark(t,i,s,o){if(!this.isDirty(i))return i._svg;const f=this._svg,d=i.marktype,p=Marks[d],v=i.interactive===!1?"none":null,_=p.tag==="g",k=bind$1(i,t,s,"g",f);if(d!=="group"&&o!=null&&!o.includes(d))return domClear(k,0),i._svg;k.setAttribute("class",cssClass(i));const P=ariaMarkAttributes(i);for(const W in P)setAttribute(k,W,P[W]);_||setAttribute(k,"pointer-events",v),setAttribute(k,"clip-path",i.clip?clip$1$1(this,i,i.group):null);let L=null,G=0;const Z=W=>{const j=this.isDirty(W),H=bind$1(W,k,L,p.tag,f);j&&(this._update(p,H,W),_&&recurse(this,H,W,o)),L=H,++G};return p.nested?i.items.length&&Z(i.items[0]):visit(i,Z),domClear(k,G),k}_update(t,i,s){element$1=i,values$2=i.__values__,ariaItemAttributes(emit,s),t.attr(emit,s,this);const o=mark_extras[t.type];o&&o.call(this,t,i,s),element$1&&this.style(element$1,s)}style(t,i){if(i!=null){for(const s in stylesAttr){let o=s==="font"?fontFamily(i):i[s];if(o===values$2[s])continue;const f=stylesAttr[s];o==null?t.removeAttribute(f):(isGradient(o)&&(o=gradientRef(o,this._defs.gradient,href())),t.setAttribute(f,o+"")),values$2[s]=o}for(const s in stylesCss)setStyle(t,stylesCss[s],i[s])}}defs(){const t=this._svg,i=this._defs;let s=i.el,o=0;for(const f in i.gradient)s||(i.el=s=domChild(t,RootIndex+1,"defs",svgns)),o=updateGradient(s,i.gradient[f],o);for(const f in i.clipping)s||(i.el=s=domChild(t,RootIndex+1,"defs",svgns)),o=updateClipping(s,i.clipping[f],o);s&&(o===0?(t.removeChild(s),i.el=null):domClear(s,o))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function dirtyParents(n,t){for(;n&&n.dirty!==t;n=n.mark.group)if(n.dirty=t,n.mark&&n.mark.dirty!==t)n.mark.dirty=t;else return}function updateGradient(n,t,i){let s,o,f;if(t.gradient==="radial"){let d=domChild(n,i++,"pattern",svgns);setAttributes(d,{id:patternPrefix+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),d=domChild(d,0,"rect",svgns),setAttributes(d,{width:1,height:1,fill:`url(${href()}#${t.id})`}),n=domChild(n,i++,"radialGradient",svgns),setAttributes(n,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else n=domChild(n,i++,"linearGradient",svgns),setAttributes(n,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(s=0,o=t.stops.length;s<o;++s)f=domChild(n,s,"stop",svgns),f.setAttribute("offset",t.stops[s].offset),f.setAttribute("stop-color",t.stops[s].color);return domClear(n,s),i}function updateClipping(n,t,i){let s;return n=domChild(n,i,"clipPath",svgns),n.setAttribute("id",t.id),t.path?(s=domChild(n,0,"path",svgns),s.setAttribute("d",t.path)):(s=domChild(n,0,"rect",svgns),setAttributes(s,{x:0,y:0,width:t.width,height:t.height})),domClear(n,1),i+1}function recurse(n,t,i,s){t=t.lastChild.previousSibling;let o,f=0;visit(i,d=>{o=n.mark(t,d,o,s),++f}),domClear(t,1+f)}function bind$1(n,t,i,s,o){let f=n._svg,d;if(!f&&(d=t.ownerDocument,f=domCreate(d,s,svgns),n._svg=f,n.mark&&(f.__data__=n,f.__values__={fill:"default"},s==="g"))){const p=domCreate(d,"path",svgns);f.appendChild(p),p.__data__=n;const v=domCreate(d,"g",svgns);f.appendChild(v),v.__data__=n;const _=domCreate(d,"path",svgns);f.appendChild(_),_.__data__=n,_.__values__={fill:"default"}}return(f.ownerSVGElement!==o||siblingCheck(f,i))&&t.insertBefore(f,i?i.nextSibling:t.firstChild),f}function siblingCheck(n,t){return n.parentNode&&n.parentNode.childNodes.length>1&&n.previousSibling!=t}let element$1=null,values$2=null;const mark_extras={group(n,t,i){const s=element$1=t.childNodes[2];values$2=s.__values__,n.foreground(emit,i,this),values$2=t.__values__,element$1=t.childNodes[1],n.content(emit,i,this);const o=element$1=t.childNodes[0];n.background(emit,i,this);const f=i.mark.interactive===!1?"none":null;if(f!==values$2.events&&(setAttribute(s,"pointer-events",f),setAttribute(o,"pointer-events",f),values$2.events=f),i.strokeForeground&&i.stroke){const d=i.fill;setAttribute(s,"display",null),this.style(o,i),setAttribute(o,"stroke",null),d&&(i.fill=null),values$2=s.__values__,this.style(s,i),d&&(i.fill=d),element$1=null}else setAttribute(s,"display","none")},image(n,t,i){i.smooth===!1?(setStyle(t,"image-rendering","optimizeSpeed"),setStyle(t,"image-rendering","pixelated")):setStyle(t,"image-rendering",null)},text(n,t,i){const s=textLines(i);let o,f,d,p;isArray(s)?(f=s.map(v=>textValue(i,v)),o=f.join(`
`),o!==values$2.text&&(domClear(t,0),d=t.ownerDocument,p=lineHeight(i),f.forEach((v,_)=>{const k=domCreate(d,"tspan",svgns);k.__data__=i,k.textContent=v,_&&(k.setAttribute("x",0),k.setAttribute("dy",p)),t.appendChild(k)}),values$2.text=o)):(f=textValue(i,s),f!==values$2.text&&(t.textContent=f,values$2.text=f)),setAttribute(t,"font-family",fontFamily(i)),setAttribute(t,"font-size",fontSize(i)+"px"),setAttribute(t,"font-style",i.fontStyle),setAttribute(t,"font-variant",i.fontVariant),setAttribute(t,"font-weight",i.fontWeight)}};function emit(n,t,i){t!==values$2[n]&&(i?setAttributeNS(element$1,n,t,i):setAttribute(element$1,n,t),values$2[n]=t)}function setStyle(n,t,i){i!==values$2[t]&&(i==null?n.style.removeProperty(t):n.style.setProperty(t,i+""),values$2[t]=i)}function setAttributes(n,t){for(const i in t)setAttribute(n,i,t[i])}function setAttribute(n,t,i){i!=null?n.setAttribute(t,i):n.removeAttribute(t)}function setAttributeNS(n,t,i,s){i!=null?n.setAttributeNS(s,t,i):n.removeAttributeNS(s,t)}function href(){let n;return typeof window>"u"?"":(n=window.location).hash?n.href.slice(0,-n.hash.length):n.href}class SVGStringRenderer extends Renderer{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const i=markup();i.open("svg",extend$3({},metadata,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const s=this._bgcolor;return s&&s!=="transparent"&&s!=="none"&&i.open("rect",{width:this._width,height:this._height,fill:s}).close(),i.open("g",rootAttributes,{transform:"translate("+this._origin+")"}),this.mark(i,t),i.close(),this.defs(i),this._text=i.close()+"",this}mark(t,i){const s=Marks[i.marktype],o=s.tag,f=[ariaItemAttributes,s.attr];t.open("g",{class:cssClass(i),"clip-path":i.clip?clip$1$1(this,i,i.group):null},ariaMarkAttributes(i),{"pointer-events":o!=="g"&&i.interactive===!1?"none":null});const d=p=>{const v=this.href(p);if(v&&t.open("a",v),t.open(o,this.attr(i,p,f,o!=="g"?o:null)),o==="text"){const _=textLines(p);if(isArray(_)){const k={x:0,dy:lineHeight(p)};for(let P=0;P<_.length;++P)t.open("tspan",P?k:null).text(textValue(p,_[P])).close()}else t.text(textValue(p,_))}else if(o==="g"){const _=p.strokeForeground,k=p.fill,P=p.stroke;_&&P&&(p.stroke=null),t.open("path",this.attr(i,p,s.background,"bgrect")).close(),t.open("g",this.attr(i,p,s.content)),visit(p,L=>this.mark(t,L)),t.close(),_&&P?(k&&(p.fill=null),p.stroke=P,t.open("path",this.attr(i,p,s.foreground,"bgrect")).close(),k&&(p.fill=k)):t.open("path",this.attr(i,p,s.foreground,"bgfore")).close()}t.close(),v&&t.close()};return s.nested?i.items&&i.items.length&&d(i.items[0]):visit(i,d),t.close()}href(t){const i=t.href;let s;if(i){if(s=this._hrefs&&this._hrefs[i])return s;this.sanitizeURL(i).then(o=>{o["xlink:href"]=o.href,o.href=null,(this._hrefs||(this._hrefs={}))[i]=o})}return null}attr(t,i,s,o){const f={},d=(p,v,_,k)=>{f[k||p]=v};return Array.isArray(s)?s.forEach(p=>p(d,i,this)):s(d,i,this),o&&style(f,i,t,o,this._defs),f}defs(t){const i=this._defs.gradient,s=this._defs.clipping;if(Object.keys(i).length+Object.keys(s).length!==0){t.open("defs");for(const f in i){const d=i[f],p=d.stops;d.gradient==="radial"?(t.open("pattern",{id:patternPrefix+f,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+f+")"}).close(),t.close(),t.open("radialGradient",{id:f,fx:d.x1,fy:d.y1,fr:d.r1,cx:d.x2,cy:d.y2,r:d.r2})):t.open("linearGradient",{id:f,x1:d.x1,x2:d.x2,y1:d.y1,y2:d.y2});for(let v=0;v<p.length;++v)t.open("stop",{offset:p[v].offset,"stop-color":p[v].color}).close();t.close()}for(const f in s){const d=s[f];t.open("clipPath",{id:f}),d.path?t.open("path",{d:d.path}).close():t.open("rect",{x:0,y:0,width:d.width,height:d.height}).close(),t.close()}t.close()}}}function style(n,t,i,s,o){let f;if(t==null||(s==="bgrect"&&i.interactive===!1&&(n["pointer-events"]="none"),s==="bgfore"&&(i.interactive===!1&&(n["pointer-events"]="none"),n.display="none",t.fill!==null)))return n;s==="image"&&t.smooth===!1&&(f=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),s==="text"&&(n["font-family"]=fontFamily(t),n["font-size"]=fontSize(t)+"px",n["font-style"]=t.fontStyle,n["font-variant"]=t.fontVariant,n["font-weight"]=t.fontWeight);for(const d in stylesAttr){let p=t[d];const v=stylesAttr[d];p==="transparent"&&(v==="fill"||v==="stroke")||p!=null&&(isGradient(p)&&(p=gradientRef(p,o.gradient,"")),n[v]=p)}for(const d in stylesCss){const p=t[d];p!=null&&(f=f||[],f.push(`${stylesCss[d]}: ${p};`))}return f&&(n.style=f.join(" ")),n}const OPTS={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function setHybridRendererOptions(n){OPTS.svgMarkTypes=n.svgMarkTypes??["text"],OPTS.svgOnTop=n.svgOnTop??!0,OPTS.debug=n.debug??!1}class HybridRenderer extends Renderer{constructor(t){super(t),this._svgRenderer=new SVGRenderer(t),this._canvasRenderer=new CanvasRenderer(t)}initialize(t,i,s,o,f){this._root_el=domChild(t,0,"div");const d=domChild(this._root_el,0,"div"),p=domChild(this._root_el,1,"div");return this._root_el.style.position="relative",OPTS.debug||(d.style.height="100%",p.style.position="absolute",p.style.top="0",p.style.left="0",p.style.height="100%",p.style.width="100%"),this._svgEl=OPTS.svgOnTop?p:d,this._canvasEl=OPTS.svgOnTop?d:p,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,i,s,o,f),this._svgRenderer.initialize(this._svgEl,i,s,o,f),super.initialize(t,i,s,o,f)}dirty(t){return OPTS.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,i){const o=(i??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(f=>!OPTS.svgMarkTypes.includes(f));this._svgRenderer.render(t,OPTS.svgMarkTypes),this._canvasRenderer.render(t,o)}resize(t,i,s,o){return super.resize(t,i,s,o),this._svgRenderer.resize(t,i,s,o),this._canvasRenderer.resize(t,i,s,o),this}background(t){return OPTS.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class HybridHandler extends CanvasHandler{constructor(t,i){super(t,i)}initialize(t,i,s){const o=domChild(domChild(t,0,"div"),OPTS.svgOnTop?0:1,"div");return super.initialize(o,i,s)}}const Canvas="canvas",Hybrid="hybrid",PNG="png",SVG="svg",None$1="none",RenderType={Canvas,PNG,SVG,Hybrid,None:None$1},modules={};modules[Canvas]=modules[PNG]={renderer:CanvasRenderer,headless:CanvasRenderer,handler:CanvasHandler};modules[SVG]={renderer:SVGRenderer,headless:SVGStringRenderer,handler:SVGHandler};modules[Hybrid]={renderer:HybridRenderer,headless:HybridRenderer,handler:HybridHandler};modules[None$1]={};function renderModule(n,t){return n=String(n||"").toLowerCase(),arguments.length>1?(modules[n]=t,this):modules[n]}function intersect$2(n,t,i){const s=[],o=new Bounds().union(t),f=n.marktype;return f?intersectMark(n,o,i,s):f==="group"?intersectGroup(n,o,i,s):error$1("Intersect scene must be mark node or group item.")}function intersectMark(n,t,i,s){if(visitMark(n,t,i)){const o=n.items,f=n.marktype,d=o.length;let p=0;if(f==="group")for(;p<d;++p)intersectGroup(o[p],t,i,s);else for(const v=Marks[f].isect;p<d;++p){const _=o[p];intersectItem(_,t,v)&&s.push(_)}}return s}function visitMark(n,t,i){return n.bounds&&t.intersects(n.bounds)&&(n.marktype==="group"||n.interactive!==!1&&(!i||i(n)))}function intersectGroup(n,t,i,s){i&&i(n.mark)&&intersectItem(n,t,Marks.group.isect)&&s.push(n);const o=n.items,f=o&&o.length;if(f){const d=n.x||0,p=n.y||0;t.translate(-d,-p);for(let v=0;v<f;++v)intersectMark(o[v],t,i,s);t.translate(d,p)}return s}function intersectItem(n,t,i){const s=n.bounds;return t.encloses(s)||t.intersects(s)&&i(n,t)}const clipBounds=new Bounds;function boundClip(n){const t=n.clip;if(isFunction$1(t))t(boundContext(clipBounds.clear()));else if(t)clipBounds.set(0,0,n.group.width,n.group.height);else return;n.bounds.intersect(clipBounds)}const TOLERANCE=1e-9;function sceneEqual(n,t,i){return n===t?!0:i==="path"?pathEqual(n,t):n instanceof Date&&t instanceof Date?+n==+t:isNumber$1(n)&&isNumber$1(t)?Math.abs(n-t)<=TOLERANCE:!n||!t||!isObject(n)&&!isObject(t)?n==t:objectEqual(n,t)}function pathEqual(n,t){return sceneEqual(parse$3(n),parse$3(t))}function objectEqual(n,t){var i=Object.keys(n),s=Object.keys(t),o,f;if(i.length!==s.length)return!1;for(i.sort(),s.sort(),f=i.length-1;f>=0;f--)if(i[f]!=s[f])return!1;for(f=i.length-1;f>=0;f--)if(o=i[f],!sceneEqual(n[o],t[o],o))return!1;return typeof n==typeof t}function resetSVGDefIds(){resetSVGClipId(),resetSVGGradientId()}const Top$1="top",Left$1="left",Right$1="right",Bottom$1="bottom",TopLeft="top-left",TopRight="top-right",BottomLeft="bottom-left",BottomRight="bottom-right",Start$1="start",Middle$1="middle",End$1="end",X$2="x",Y$2="y",Group="group",AxisRole$1="axis",TitleRole$1="title",FrameRole$1="frame",ScopeRole$1="scope",LegendRole$1="legend",RowHeader="row-header",RowFooter="row-footer",RowTitle="row-title",ColHeader="column-header",ColFooter="column-footer",ColTitle="column-title",Padding$1="padding",Symbols$1="symbol",Fit="fit",FitX="fit-x",FitY="fit-y",Pad="pad",None="none",All="all",Each="each",Flush="flush",Column="column",Row="row";function Bound$1(n){Transform.call(this,null,n)}inherits(Bound$1,Transform,{transform(n,t){const i=t.dataflow,s=n.mark,o=s.marktype,f=Marks[o],d=f.bound;let p=s.bounds,v;if(f.nested)s.items.length&&i.dirty(s.items[0]),p=boundItem(s,d),s.items.forEach(_=>{_.bounds.clear().union(p)});else if(o===Group||n.modified())switch(t.visit(t.MOD,_=>i.dirty(_)),p.clear(),s.items.forEach(_=>p.union(boundItem(_,d))),s.role){case AxisRole$1:case LegendRole$1:case TitleRole$1:t.reflow()}else v=t.changed(t.REM),t.visit(t.ADD,_=>{p.union(boundItem(_,d))}),t.visit(t.MOD,_=>{v=v||p.alignsWith(_.bounds),i.dirty(_),p.union(boundItem(_,d))}),v&&(p.clear(),s.items.forEach(_=>p.union(_.bounds)));return boundClip(s),t.modifies("bounds")}});function boundItem(n,t,i){return t(n.bounds.clear(),n,i)}const COUNTER_NAME=":vega_identifier:";function Identifier$2(n){Transform.call(this,0,n)}Identifier$2.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};inherits(Identifier$2,Transform,{transform(n,t){const i=getCounter(t.dataflow),s=n.as;let o=i.value;return t.visit(t.ADD,f=>f[s]=f[s]||++o),i.set(this.value=o),t}});function getCounter(n){return n._signals[COUNTER_NAME]||(n._signals[COUNTER_NAME]=n.add(0))}function Mark$2(n){Transform.call(this,null,n)}inherits(Mark$2,Transform,{transform(n,t){let i=this.value;i||(i=t.dataflow.scenegraph().mark(n.markdef,lookup$1$1(n),n.index),i.group.context=n.context,n.context.group||(n.context.group=i.group),i.source=this.source,i.clip=n.clip,i.interactive=n.interactive,this.value=i);const s=i.marktype===Group?GroupItem:Item;return t.visit(t.ADD,o=>s.call(o,i)),(n.modified("clip")||n.modified("interactive"))&&(i.clip=n.clip,i.interactive=!!n.interactive,i.zdirty=!0,t.reflow()),i.items=t.source,t}});function lookup$1$1(n){const t=n.groups,i=n.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&i?t.lookup(i):null}function Overlap$1(n){Transform.call(this,null,n)}const methods={parity:n=>n.filter((t,i)=>i%2?t.opacity=0:1),greedy:(n,t)=>{let i;return n.filter((s,o)=>!o||!intersect$1(i.bounds,s.bounds,t)?(i=s,1):s.opacity=0)}},intersect$1=(n,t,i)=>i>Math.max(t.x1-n.x2,n.x1-t.x2,t.y1-n.y2,n.y1-t.y2),hasOverlap=(n,t)=>{for(var i=1,s=n.length,o=n[0].bounds,f;i<s;o=f,++i)if(intersect$1(o,f=n[i].bounds,t))return!0},hasBounds=n=>{const t=n.bounds;return t.width()>1&&t.height()>1},boundTest=(n,t,i)=>{var s=n.range(),o=new Bounds;return t===Top$1||t===Bottom$1?o.set(s[0],-1/0,s[1],1/0):o.set(-1/0,s[0],1/0,s[1]),o.expand(i||1),f=>o.encloses(f.bounds)},reset$1=n=>(n.forEach(t=>t.opacity=1),n),reflow=(n,t)=>n.reflow(t.modified()).modifies("opacity");inherits(Overlap$1,Transform,{transform(n,t){const i=methods[n.method]||methods.parity,s=n.separation||0;let o=t.materialize(t.SOURCE).source,f,d;if(!o||!o.length)return;if(!n.method)return n.modified("method")&&(reset$1(o),t=reflow(t,n)),t;if(o=o.filter(hasBounds),!o.length)return;if(n.sort&&(o=o.slice().sort(n.sort)),f=reset$1(o),t=reflow(t,n),f.length>=3&&hasOverlap(f,s)){do f=i(f,s);while(f.length>=3&&hasOverlap(f,s));f.length<3&&!peek$2(o).opacity&&(f.length>1&&(peek$2(f).opacity=0),peek$2(o).opacity=1)}n.boundScale&&n.boundTolerance>=0&&(d=boundTest(n.boundScale,n.boundOrient,+n.boundTolerance),o.forEach(v=>{d(v)||(v.opacity=0)}));const p=f[0].mark.bounds.clear();return o.forEach(v=>{v.opacity&&p.union(v.bounds)}),t}});function Render$1(n){Transform.call(this,null,n)}inherits(Render$1,Transform,{transform(n,t){const i=t.dataflow;if(t.visit(t.ALL,s=>i.dirty(s)),t.fields&&t.fields.zindex){const s=t.source&&t.source[0];s&&(s.mark.zdirty=!0)}}});const tempBounds=new Bounds;function set$4(n,t,i){return n[t]===i?0:(n[t]=i,1)}function isYAxis(n){var t=n.items[0].orient;return t===Left$1||t===Right$1}function axisIndices(n){let t=+n.grid;return[n.ticks?t++:-1,n.labels?t++:-1,t+ +n.domain]}function axisLayout(n,t,i,s){var o=t.items[0],f=o.datum,d=o.translate!=null?o.translate:.5,p=o.orient,v=axisIndices(f),_=o.range,k=o.offset,P=o.position,L=o.minExtent,G=o.maxExtent,Z=f.title&&o.items[v[2]].items[0],W=o.titlePadding,j=o.bounds,H=Z&&multiLineOffset(Z),me=0,$e=0,De,le;switch(tempBounds.clear().union(j),j.clear(),(De=v[0])>-1&&j.union(o.items[De].bounds),(De=v[1])>-1&&j.union(o.items[De].bounds),p){case Top$1:me=P||0,$e=-k,le=Math.max(L,Math.min(G,-j.y1)),j.add(0,-le).add(_,0),Z&&axisTitleLayout(n,Z,le,W,H,0,-1,j);break;case Left$1:me=-k,$e=P||0,le=Math.max(L,Math.min(G,-j.x1)),j.add(-le,0).add(0,_),Z&&axisTitleLayout(n,Z,le,W,H,1,-1,j);break;case Right$1:me=i+k,$e=P||0,le=Math.max(L,Math.min(G,j.x2)),j.add(0,0).add(le,_),Z&&axisTitleLayout(n,Z,le,W,H,1,1,j);break;case Bottom$1:me=P||0,$e=s+k,le=Math.max(L,Math.min(G,j.y2)),j.add(0,0).add(_,le),Z&&axisTitleLayout(n,Z,le,W,0,0,1,j);break;default:me=o.x,$e=o.y}return boundStroke(j.translate(me,$e),o),set$4(o,"x",me+d)|set$4(o,"y",$e+d)&&(o.bounds=tempBounds,n.dirty(o),o.bounds=j,n.dirty(o)),o.mark.bounds.clear().union(j)}function axisTitleLayout(n,t,i,s,o,f,d,p){const v=t.bounds;if(t.auto){const _=d*(i+o+s);let k=0,P=0;n.dirty(t),f?k=(t.x||0)-(t.x=_):P=(t.y||0)-(t.y=_),t.mark.bounds.clear().union(v.translate(-k,-P)),n.dirty(t)}p.union(v)}const min$5=(n,t)=>Math.floor(Math.min(n,t)),max$6=(n,t)=>Math.ceil(Math.max(n,t));function gridLayoutGroups(n){var t=n.items,i=t.length,s=0,o,f;const d={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;s<i;++s)if(o=t[s],f=o.items,o.marktype===Group)switch(o.role){case AxisRole$1:case LegendRole$1:case TitleRole$1:break;case RowHeader:d.rowheaders.push(...f);break;case RowFooter:d.rowfooters.push(...f);break;case ColHeader:d.colheaders.push(...f);break;case ColFooter:d.colfooters.push(...f);break;case RowTitle:d.rowtitle=f[0];break;case ColTitle:d.coltitle=f[0];break;default:d.marks.push(...f)}return d}function bboxFlush(n){return new Bounds().set(0,0,n.width||0,n.height||0)}function bboxFull(n){const t=n.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(n.x||0),-(n.y||0))}function get$1(n,t,i){const s=isObject(n)?n[t]:n;return s??(i!==void 0?i:0)}function offsetValue$1(n){return n<0?Math.ceil(-n):0}function gridLayout(n,t,i){var s=!i.nodirty,o=i.bounds===Flush?bboxFlush:bboxFull,f=tempBounds.set(0,0,0,0),d=get$1(i.align,Column),p=get$1(i.align,Row),v=get$1(i.padding,Column),_=get$1(i.padding,Row),k=i.columns||t.length,P=k<=0?1:Math.ceil(t.length/k),L=t.length,G=Array(L),Z=Array(k),W=0,j=Array(L),H=Array(P),me=0,$e=Array(L),De=Array(L),le=Array(L),Ce,Me,_n,_i,ll,_l,oa,Ru,ga,_s,Sa;for(Me=0;Me<k;++Me)Z[Me]=0;for(Me=0;Me<P;++Me)H[Me]=0;for(Me=0;Me<L;++Me)_l=t[Me],ll=le[Me]=o(_l),_l.x=_l.x||0,$e[Me]=0,_l.y=_l.y||0,De[Me]=0,_n=Me%k,_i=~~(Me/k),W=Math.max(W,oa=Math.ceil(ll.x2)),me=Math.max(me,Ru=Math.ceil(ll.y2)),Z[_n]=Math.max(Z[_n],oa),H[_i]=Math.max(H[_i],Ru),G[Me]=v+offsetValue$1(ll.x1),j[Me]=_+offsetValue$1(ll.y1),s&&n.dirty(t[Me]);for(Me=0;Me<L;++Me)Me%k===0&&(G[Me]=0),Me<k&&(j[Me]=0);if(d===Each)for(_n=1;_n<k;++_n){for(Sa=0,Me=_n;Me<L;Me+=k)Sa<G[Me]&&(Sa=G[Me]);for(Me=_n;Me<L;Me+=k)G[Me]=Sa+Z[_n-1]}else if(d===All){for(Sa=0,Me=0;Me<L;++Me)Me%k&&Sa<G[Me]&&(Sa=G[Me]);for(Me=0;Me<L;++Me)Me%k&&(G[Me]=Sa+W)}else for(d=!1,_n=1;_n<k;++_n)for(Me=_n;Me<L;Me+=k)G[Me]+=Z[_n-1];if(p===Each)for(_i=1;_i<P;++_i){for(Sa=0,Me=_i*k,Ce=Me+k;Me<Ce;++Me)Sa<j[Me]&&(Sa=j[Me]);for(Me=_i*k;Me<Ce;++Me)j[Me]=Sa+H[_i-1]}else if(p===All){for(Sa=0,Me=k;Me<L;++Me)Sa<j[Me]&&(Sa=j[Me]);for(Me=k;Me<L;++Me)j[Me]=Sa+me}else for(p=!1,_i=1;_i<P;++_i)for(Me=_i*k,Ce=Me+k;Me<Ce;++Me)j[Me]+=H[_i-1];for(ga=0,Me=0;Me<L;++Me)ga=G[Me]+(Me%k?ga:0),$e[Me]+=ga-t[Me].x;for(_n=0;_n<k;++_n)for(_s=0,Me=_n;Me<L;Me+=k)_s+=j[Me],De[Me]+=_s-t[Me].y;if(d&&get$1(i.center,Column)&&P>1)for(Me=0;Me<L;++Me)ll=d===All?W:Z[Me%k],ga=ll-le[Me].x2-t[Me].x-$e[Me],ga>0&&($e[Me]+=ga/2);if(p&&get$1(i.center,Row)&&k!==1)for(Me=0;Me<L;++Me)ll=p===All?me:H[~~(Me/k)],_s=ll-le[Me].y2-t[Me].y-De[Me],_s>0&&(De[Me]+=_s/2);for(Me=0;Me<L;++Me)f.union(le[Me].translate($e[Me],De[Me]));switch(ga=get$1(i.anchor,X$2),_s=get$1(i.anchor,Y$2),get$1(i.anchor,Column)){case End$1:ga-=f.width();break;case Middle$1:ga-=f.width()/2}switch(get$1(i.anchor,Row)){case End$1:_s-=f.height();break;case Middle$1:_s-=f.height()/2}for(ga=Math.round(ga),_s=Math.round(_s),f.clear(),Me=0;Me<L;++Me)t[Me].mark.bounds.clear();for(Me=0;Me<L;++Me)_l=t[Me],_l.x+=$e[Me]+=ga,_l.y+=De[Me]+=_s,f.union(_l.mark.bounds.union(_l.bounds.translate($e[Me],De[Me]))),s&&n.dirty(_l);return f}function trellisLayout(n,t,i){var s=gridLayoutGroups(t),o=s.marks,f=i.bounds===Flush?boundFlush:boundFull,d=i.offset,p=i.columns||o.length,v=p<=0?1:Math.ceil(o.length/p),_=v*p,k,P,L,G,Z,W,j;const H=gridLayout(n,o,i);H.empty()&&H.set(0,0,0,0),s.rowheaders&&(W=get$1(i.headerBand,Row,null),k=layoutHeaders(n,s.rowheaders,o,p,v,-get$1(d,"rowHeader"),min$5,0,f,"x1",0,p,1,W)),s.colheaders&&(W=get$1(i.headerBand,Column,null),P=layoutHeaders(n,s.colheaders,o,p,p,-get$1(d,"columnHeader"),min$5,1,f,"y1",0,1,p,W)),s.rowfooters&&(W=get$1(i.footerBand,Row,null),L=layoutHeaders(n,s.rowfooters,o,p,v,get$1(d,"rowFooter"),max$6,0,f,"x2",p-1,p,1,W)),s.colfooters&&(W=get$1(i.footerBand,Column,null),G=layoutHeaders(n,s.colfooters,o,p,p,get$1(d,"columnFooter"),max$6,1,f,"y2",_-p,1,p,W)),s.rowtitle&&(Z=get$1(i.titleAnchor,Row),j=get$1(d,"rowTitle"),j=Z===End$1?L+j:k-j,W=get$1(i.titleBand,Row,.5),layoutTitle(n,s.rowtitle,j,0,H,W)),s.coltitle&&(Z=get$1(i.titleAnchor,Column),j=get$1(d,"columnTitle"),j=Z===End$1?G+j:P-j,W=get$1(i.titleBand,Column,.5),layoutTitle(n,s.coltitle,j,1,H,W))}function boundFlush(n,t){return t==="x1"?n.x||0:t==="y1"?n.y||0:t==="x2"?(n.x||0)+(n.width||0):t==="y2"?(n.y||0)+(n.height||0):void 0}function boundFull(n,t){return n.bounds[t]}function layoutHeaders(n,t,i,s,o,f,d,p,v,_,k,P,L,G){var Z=i.length,W=0,j=0,H,me,$e,De,le,Ce,Me,_n,_i;if(!Z)return W;for(H=k;H<Z;H+=P)i[H]&&(W=d(W,v(i[H],_)));if(!t.length)return W;for(t.length>o&&(n.warn("Grid headers exceed limit: "+o),t=t.slice(0,o)),W+=f,me=0,De=t.length;me<De;++me)n.dirty(t[me]),t[me].mark.bounds.clear();for(H=k,me=0,De=t.length;me<De;++me,H+=P){for(Ce=t[me],le=Ce.mark.bounds,$e=H;$e>=0&&(Me=i[$e])==null;$e-=L);p?(_n=G==null?Me.x:Math.round(Me.bounds.x1+G*Me.bounds.width()),_i=W):(_n=W,_i=G==null?Me.y:Math.round(Me.bounds.y1+G*Me.bounds.height())),le.union(Ce.bounds.translate(_n-(Ce.x||0),_i-(Ce.y||0))),Ce.x=_n,Ce.y=_i,n.dirty(Ce),j=d(j,le[_])}return j}function layoutTitle(n,t,i,s,o,f){if(t){n.dirty(t);var d=i,p=i;s?d=Math.round(o.x1+f*o.width()):p=Math.round(o.y1+f*o.height()),t.bounds.translate(d-(t.x||0),p-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=d,t.y=p,n.dirty(t)}}function lookup$3(n,t){const i=n[t]||{};return(s,o)=>i[s]!=null?i[s]:n[s]!=null?n[s]:o}function offsets(n,t){let i=-1/0;return n.forEach(s=>{s.offset!=null&&(i=Math.max(i,s.offset))}),i>-1/0?i:t}function legendParams(n,t,i,s,o,f,d){const p=lookup$3(i,t),v=offsets(n,p("offset",0)),_=p("anchor",Start$1),k=_===End$1?1:_===Middle$1?.5:0,P={align:Each,bounds:p("bounds",Flush),columns:p("direction")==="vertical"?1:n.length,padding:p("margin",8),center:p("center"),nodirty:!0};switch(t){case Left$1:P.anchor={x:Math.floor(s.x1)-v,column:End$1,y:k*(d||s.height()+2*s.y1),row:_};break;case Right$1:P.anchor={x:Math.ceil(s.x2)+v,y:k*(d||s.height()+2*s.y1),row:_};break;case Top$1:P.anchor={y:Math.floor(o.y1)-v,row:End$1,x:k*(f||o.width()+2*o.x1),column:_};break;case Bottom$1:P.anchor={y:Math.ceil(o.y2)+v,x:k*(f||o.width()+2*o.x1),column:_};break;case TopLeft:P.anchor={x:v,y:v};break;case TopRight:P.anchor={x:f-v,y:v,column:End$1};break;case BottomLeft:P.anchor={x:v,y:d-v,row:End$1};break;case BottomRight:P.anchor={x:f-v,y:d-v,column:End$1,row:End$1};break}return P}function legendLayout(n,t){var i=t.items[0],s=i.datum,o=i.orient,f=i.bounds,d=i.x,p=i.y,v,_;return i._bounds?i._bounds.clear().union(f):i._bounds=f.clone(),f.clear(),legendGroupLayout(n,i,i.items[0].items[0]),f=legendBounds(i,f),v=2*i.padding,_=2*i.padding,f.empty()||(v=Math.ceil(f.width()+v),_=Math.ceil(f.height()+_)),s.type===Symbols$1&&legendEntryLayout(i.items[0].items[0].items[0].items),o!==None&&(i.x=d=0,i.y=p=0),i.width=v,i.height=_,boundStroke(f.set(d,p,d+v,p+_),i),i.mark.bounds.clear().union(f),i}function legendBounds(n,t){return n.items.forEach(i=>t.union(i.bounds)),t.x1=n.padding,t.y1=n.padding,t}function legendGroupLayout(n,t,i){var s=t.padding,o=s-i.x,f=s-i.y;if(!t.datum.title)(o||f)&&translate$1(n,i,o,f);else{var d=t.items[1].items[0],p=d.anchor,v=t.titlePadding||0,_=s-d.x,k=s-d.y;switch(d.orient){case Left$1:o+=Math.ceil(d.bounds.width())+v;break;case Right$1:case Bottom$1:break;default:f+=d.bounds.height()+v}switch((o||f)&&translate$1(n,i,o,f),d.orient){case Left$1:k+=legendTitleOffset(t,i,d,p,1,1);break;case Right$1:_+=legendTitleOffset(t,i,d,End$1,0,0)+v,k+=legendTitleOffset(t,i,d,p,1,1);break;case Bottom$1:_+=legendTitleOffset(t,i,d,p,0,0),k+=legendTitleOffset(t,i,d,End$1,-1,0,1)+v;break;default:_+=legendTitleOffset(t,i,d,p,0,0)}(_||k)&&translate$1(n,d,_,k),(_=Math.round(d.bounds.x1-s))<0&&(translate$1(n,i,-_,0),translate$1(n,d,-_,0))}}function legendTitleOffset(n,t,i,s,o,f,d){const p=n.datum.type!=="symbol",v=i.datum.vgrad,_=p&&(f||!v)&&!d?t.items[0]:t,k=_.bounds[o?"y2":"x2"]-n.padding,P=v&&f?k:0,L=v&&f?0:k,G=o<=0?0:multiLineOffset(i);return Math.round(s===Start$1?P:s===End$1?L-G:.5*(k-G))}function translate$1(n,t,i,s){t.x+=i,t.y+=s,t.bounds.translate(i,s),t.mark.bounds.translate(i,s),n.dirty(t)}function legendEntryLayout(n){const t=n.reduce((i,s)=>(i[s.column]=Math.max(s.bounds.x2-s.x,i[s.column]||0),i),{});n.forEach(i=>{i.width=t[i.column],i.height=i.bounds.y2-i.y})}function titleLayout(n,t,i,s,o){var f=t.items[0],d=f.frame,p=f.orient,v=f.anchor,_=f.offset,k=f.padding,P=f.items[0].items[0],L=f.items[1]&&f.items[1].items[0],G=p===Left$1||p===Right$1?s:i,Z=0,W=0,j=0,H=0,me=0,$e;if(d!==Group?p===Left$1?(Z=o.y2,G=o.y1):p===Right$1?(Z=o.y1,G=o.y2):(Z=o.x1,G=o.x2):p===Left$1&&(Z=s,G=0),$e=v===Start$1?Z:v===End$1?G:(Z+G)/2,L&&L.text){switch(p){case Top$1:case Bottom$1:me=P.bounds.height()+k;break;case Left$1:H=P.bounds.width()+k;break;case Right$1:H=-P.bounds.width()-k;break}tempBounds.clear().union(L.bounds),tempBounds.translate(H-(L.x||0),me-(L.y||0)),set$4(L,"x",H)|set$4(L,"y",me)&&(n.dirty(L),L.bounds.clear().union(tempBounds),L.mark.bounds.clear().union(tempBounds),n.dirty(L)),tempBounds.clear().union(L.bounds)}else tempBounds.clear();switch(tempBounds.union(P.bounds),p){case Top$1:W=$e,j=o.y1-tempBounds.height()-_;break;case Left$1:W=o.x1-tempBounds.width()-_,j=$e;break;case Right$1:W=o.x2+tempBounds.width()+_,j=$e;break;case Bottom$1:W=$e,j=o.y2+_;break;default:W=f.x,j=f.y}return set$4(f,"x",W)|set$4(f,"y",j)&&(tempBounds.translate(W,j),n.dirty(f),f.bounds.clear().union(tempBounds),t.bounds.clear().union(tempBounds),n.dirty(f)),f.bounds}function ViewLayout$1(n){Transform.call(this,null,n)}inherits(ViewLayout$1,Transform,{transform(n,t){const i=t.dataflow;return n.mark.items.forEach(s=>{n.layout&&trellisLayout(i,s,n.layout),layoutGroup(i,s,n)}),shouldReflow(n.mark.group)?t.reflow():t}});function shouldReflow(n){return n&&n.mark.role!=="legend-entry"}function layoutGroup(n,t,i){var s=t.items,o=Math.max(0,t.width||0),f=Math.max(0,t.height||0),d=new Bounds().set(0,0,o,f),p=d.clone(),v=d.clone(),_=[],k,P,L,G,Z,W;for(Z=0,W=s.length;Z<W;++Z)switch(P=s[Z],P.role){case AxisRole$1:G=isYAxis(P)?p:v,G.union(axisLayout(n,P,o,f));break;case TitleRole$1:k=P;break;case LegendRole$1:_.push(legendLayout(n,P));break;case FrameRole$1:case ScopeRole$1:case RowHeader:case RowFooter:case RowTitle:case ColHeader:case ColFooter:case ColTitle:p.union(P.bounds),v.union(P.bounds);break;default:d.union(P.bounds)}if(_.length){const j={};_.forEach(H=>{L=H.orient||Right$1,L!==None&&(j[L]||(j[L]=[])).push(H)});for(const H in j){const me=j[H];gridLayout(n,me,legendParams(me,H,i.legends,p,v,o,f))}_.forEach(H=>{const me=H.bounds;if(me.equals(H._bounds)||(H.bounds=H._bounds,n.dirty(H),H.bounds=me,n.dirty(H)),i.autosize&&(i.autosize.type===Fit||i.autosize.type===FitX||i.autosize.type===FitY))switch(H.orient){case Left$1:case Right$1:d.add(me.x1,0).add(me.x2,0);break;case Top$1:case Bottom$1:d.add(0,me.y1).add(0,me.y2)}else d.union(me)})}d.union(p).union(v),k&&d.union(titleLayout(n,k,o,f,d)),t.clip&&d.set(0,0,t.width||0,t.height||0),viewSizeLayout(n,t,d,i)}function viewSizeLayout(n,t,i,s){const o=s.autosize||{},f=o.type;if(n._autosize<1||!f)return;let d=n._width,p=n._height,v=Math.max(0,t.width||0),_=Math.max(0,Math.ceil(-i.x1)),k=Math.max(0,t.height||0),P=Math.max(0,Math.ceil(-i.y1));const L=Math.max(0,Math.ceil(i.x2-v)),G=Math.max(0,Math.ceil(i.y2-k));if(o.contains===Padding$1){const Z=n.padding();d-=Z.left+Z.right,p-=Z.top+Z.bottom}f===None?(_=0,P=0,v=d,k=p):f===Fit?(v=Math.max(0,d-_-L),k=Math.max(0,p-P-G)):f===FitX?(v=Math.max(0,d-_-L),p=k+P+G):f===FitY?(d=v+_+L,k=Math.max(0,p-P-G)):f===Pad&&(d=v+_+L,p=k+P+G),n._resizeView(d,p,v,k,[_,P],o.resize)}const vtx=Object.freeze(Object.defineProperty({__proto__:null,bound:Bound$1,identifier:Identifier$2,mark:Mark$2,overlap:Overlap$1,render:Render$1,viewlayout:ViewLayout$1},Symbol.toStringTag,{value:"Module"}));function range$7(n,t,i){n=+n,t=+t,i=(o=arguments.length)<2?(t=n,n=0,1):o<3?1:+i;for(var s=-1,o=Math.max(0,Math.ceil((t-n)/i))|0,f=new Array(o);++s<o;)f[s]=n+s*i;return f}function sum$2(n,t){let i=0;for(let s of n)(s=+s)&&(i+=s);return i}const constant$2=n=>()=>n;function linear(n,t){return function(i){return n+i*t}}function exponential(n,t,i){return n=Math.pow(n,i),t=Math.pow(t,i)-n,i=1/i,function(s){return Math.pow(n+s*t,i)}}function gamma(n){return(n=+n)==1?nogamma:function(t,i){return i-t?exponential(t,i,n):constant$2(isNaN(t)?i:t)}}function nogamma(n,t){var i=t-n;return i?linear(n,i):constant$2(isNaN(n)?t:n)}const rgb$4=function n(t){var i=gamma(t);function s(o,f){var d=i((o=rgb$6(o)).r,(f=rgb$6(f)).r),p=i(o.g,f.g),v=i(o.b,f.b),_=nogamma(o.opacity,f.opacity);return function(k){return o.r=d(k),o.g=p(k),o.b=v(k),o.opacity=_(k),o+""}}return s.gamma=n,s}(1);function numberArray(n,t){t||(t=[]);var i=n?Math.min(t.length,n.length):0,s=t.slice(),o;return function(f){for(o=0;o<i;++o)s[o]=n[o]*(1-f)+t[o]*f;return s}}function isNumberArray(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function genericArray(n,t){var i=t?t.length:0,s=n?Math.min(i,n.length):0,o=new Array(s),f=new Array(i),d;for(d=0;d<s;++d)o[d]=interpolate$1(n[d],t[d]);for(;d<i;++d)f[d]=t[d];return function(p){for(d=0;d<s;++d)f[d]=o[d](p);return f}}function date(n,t){var i=new Date;return n=+n,t=+t,function(s){return i.setTime(n*(1-s)+t*s),i}}function number$4(n,t){return n=+n,t=+t,function(i){return n*(1-i)+t*i}}function object(n,t){var i={},s={},o;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in n?i[o]=interpolate$1(n[o],t[o]):s[o]=t[o];return function(f){for(o in i)s[o]=i[o](f);return s}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero$4(n){return function(){return n}}function one$1(n){return function(t){return n(t)+""}}function string(n,t){var i=reA.lastIndex=reB.lastIndex=0,s,o,f,d=-1,p=[],v=[];for(n=n+"",t=t+"";(s=reA.exec(n))&&(o=reB.exec(t));)(f=o.index)>i&&(f=t.slice(i,f),p[d]?p[d]+=f:p[++d]=f),(s=s[0])===(o=o[0])?p[d]?p[d]+=o:p[++d]=o:(p[++d]=null,v.push({i:d,x:number$4(s,o)})),i=reB.lastIndex;return i<t.length&&(f=t.slice(i),p[d]?p[d]+=f:p[++d]=f),p.length<2?v[0]?one$1(v[0].x):zero$4(t):(t=v.length,function(_){for(var k=0,P;k<t;++k)p[(P=v[k]).i]=P.x(_);return p.join("")})}function interpolate$1(n,t){var i=typeof t,s;return t==null||i==="boolean"?constant$2(t):(i==="number"?number$4:i==="string"?(s=color$5(t))?(t=s,rgb$4):string:t instanceof color$5?rgb$4:t instanceof Date?date:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object:number$4)(n,t)}function interpolateRound(n,t){return n=+n,t=+t,function(i){return Math.round(n*(1-i)+t*i)}}function AxisTicks$1(n){Transform.call(this,null,n)}inherits(AxisTicks$1,Transform,{transform(n,t){if(this.value&&!n.modified())return t.StopPropagation;var i=t.dataflow.locale(),s=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=this.value,f=n.scale,d=n.count==null?n.values?n.values.length:10:n.count,p=tickCount(f,d,n.minstep),v=n.format||tickFormat(i,f,p,n.formatSpecifier,n.formatType,!!n.values),_=n.values?validTicks(f,n.values,p):tickValues(f,p);return o&&(s.rem=o),o=_.map((k,P)=>ingest$1({index:P/(_.length-1||1),value:k,label:v(k)})),n.extra&&o.length&&o.push(ingest$1({index:-1,extra:{value:o[0].value},label:""})),s.source=o,s.add=o,this.value=o,s}});function DataJoin$1(n){Transform.call(this,null,n)}function defaultItemCreate(){return ingest$1({})}function newMap(n){const t=fastmap().test(i=>i.exit);return t.lookup=i=>t.get(n(i)),t}inherits(DataJoin$1,Transform,{transform(n,t){var i=t.dataflow,s=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=n.item||defaultItemCreate,f=n.key||tupleid,d=this.value;return isArray(s.encode)&&(s.encode=null),d&&(n.modified("key")||t.modified(f))&&error$1("DataJoin does not support modified key function or fields."),d||(t=t.addAll(),this.value=d=newMap(f)),t.visit(t.ADD,p=>{const v=f(p);let _=d.get(v);_?_.exit?(d.empty--,s.add.push(_)):s.mod.push(_):(_=o(p),d.set(v,_),s.add.push(_)),_.datum=p,_.exit=!1}),t.visit(t.MOD,p=>{const v=f(p),_=d.get(v);_&&(_.datum=p,s.mod.push(_))}),t.visit(t.REM,p=>{const v=f(p),_=d.get(v);p===_.datum&&!_.exit&&(s.rem.push(_),_.exit=!0,++d.empty)}),t.changed(t.ADD_MOD)&&s.modifies("datum"),(t.clean()||n.clean&&d.empty>i.cleanThreshold)&&i.runAfter(d.clean),s}});function Encode$1(n){Transform.call(this,null,n)}inherits(Encode$1,Transform,{transform(n,t){var i=t.fork(t.ADD_REM),s=n.mod||!1,o=n.encoders,f=t.encode;if(isArray(f))if(i.changed()||f.every(P=>o[P]))f=f[0],i.encode=null;else return t.StopPropagation;var d=f==="enter",p=o.update||falsy,v=o.enter||falsy,_=o.exit||falsy,k=(f&&!d?o[f]:p)||falsy;if(t.changed(t.ADD)&&(t.visit(t.ADD,P=>{v(P,n),p(P,n)}),i.modifies(v.output),i.modifies(p.output),k!==falsy&&k!==p&&(t.visit(t.ADD,P=>{k(P,n)}),i.modifies(k.output))),t.changed(t.REM)&&_!==falsy&&(t.visit(t.REM,P=>{_(P,n)}),i.modifies(_.output)),d||k!==falsy){const P=t.MOD|(n.modified()?t.REFLOW:0);d?(t.visit(P,L=>{const G=v(L,n)||s;(k(L,n)||G)&&i.mod.push(L)}),i.mod.length&&i.modifies(v.output)):t.visit(P,L=>{(k(L,n)||s)&&i.mod.push(L)}),i.mod.length&&i.modifies(k.output)}return i.changed()?i:t.StopPropagation}});function LegendEntries$1(n){Transform.call(this,[],n)}inherits(LegendEntries$1,Transform,{transform(n,t){if(this.value!=null&&!n.modified())return t.StopPropagation;var i=t.dataflow.locale(),s=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=this.value,f=n.type||SymbolLegend,d=n.scale,p=+n.limit,v=tickCount(d,n.count==null?5:n.count,n.minstep),_=!!n.values||f===SymbolLegend,k=n.format||labelFormat(i,d,v,f,n.formatSpecifier,n.formatType,_),P=n.values||labelValues(d,v),L,G,Z,W,j;return o&&(s.rem=o),f===SymbolLegend?(p&&P.length>p?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),o=P.slice(0,p-1),j=!0):o=P,isFunction$1(Z=n.size)?(!n.values&&d(o[0])===0&&(o=o.slice(1)),W=o.reduce((H,me)=>Math.max(H,Z(me,n)),0)):Z=constant$6(W=Z||8),o=o.map((H,me)=>ingest$1({index:me,label:k(H,me,o),value:H,offset:W,size:Z(H,n)})),j&&(j=P[o.length],o.push(ingest$1({index:o.length,label:`â€¦${P.length-o.length} entries`,value:j,offset:W,size:Z(j,n)})))):f===GradientLegend?(L=d.domain(),G=scaleFraction(d,L[0],peek$2(L)),P.length<3&&!n.values&&L[0]!==peek$2(L)&&(P=[L[0],peek$2(L)]),o=P.map((H,me)=>ingest$1({index:me,label:k(H,me,P),value:H,perc:G(H)}))):(Z=P.length-1,G=labelFraction(d),o=P.map((H,me)=>ingest$1({index:me,label:k(H,me,P),value:H,perc:me?G(H):0,perc2:me===Z?1:G(P[me+1])}))),s.source=o,s.add=o,this.value=o,s}});const sourceX=n=>n.source.x,sourceY=n=>n.source.y,targetX=n=>n.target.x,targetY=n=>n.target.y;function LinkPath(n){Transform.call(this,{},n)}LinkPath.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};inherits(LinkPath,Transform,{transform(n,t){var i=n.sourceX||sourceX,s=n.sourceY||sourceY,o=n.targetX||targetX,f=n.targetY||targetY,d=n.as||"path",p=n.orient||"vertical",v=n.shape||"line",_=Paths.get(v+"-"+p)||Paths.get(v);return _||error$1("LinkPath unsupported type: "+n.shape+(n.orient?"-"+n.orient:"")),t.visit(t.SOURCE,k=>{k[d]=_(i(k),s(k),o(k),f(k))}),t.reflow(n.modified()).modifies(d)}});const line$1=(n,t,i,s)=>"M"+n+","+t+"L"+i+","+s,lineR=(n,t,i,s)=>line$1(t*Math.cos(n),t*Math.sin(n),s*Math.cos(i),s*Math.sin(i)),arc$1=(n,t,i,s)=>{var o=i-n,f=s-t,d=Math.hypot(o,f)/2,p=180*Math.atan2(f,o)/Math.PI;return"M"+n+","+t+"A"+d+","+d+" "+p+" 0 1 "+i+","+s},arcR=(n,t,i,s)=>arc$1(t*Math.cos(n),t*Math.sin(n),s*Math.cos(i),s*Math.sin(i)),curve=(n,t,i,s)=>{const o=i-n,f=s-t,d=.2*(o+f),p=.2*(f-o);return"M"+n+","+t+"C"+(n+d)+","+(t+p)+" "+(i+p)+","+(s-d)+" "+i+","+s},curveR=(n,t,i,s)=>curve(t*Math.cos(n),t*Math.sin(n),s*Math.cos(i),s*Math.sin(i)),orthoX=(n,t,i,s)=>"M"+n+","+t+"V"+s+"H"+i,orthoY=(n,t,i,s)=>"M"+n+","+t+"H"+i+"V"+s,orthoR=(n,t,i,s)=>{const o=Math.cos(n),f=Math.sin(n),d=Math.cos(i),p=Math.sin(i),v=Math.abs(i-n)>Math.PI?i<=n:i>n;return"M"+t*o+","+t*f+"A"+t+","+t+" 0 0,"+(v?1:0)+" "+t*d+","+t*p+"L"+s*d+","+s*p},diagonalX=(n,t,i,s)=>{const o=(n+i)/2;return"M"+n+","+t+"C"+o+","+t+" "+o+","+s+" "+i+","+s},diagonalY=(n,t,i,s)=>{const o=(t+s)/2;return"M"+n+","+t+"C"+n+","+o+" "+i+","+o+" "+i+","+s},diagonalR=(n,t,i,s)=>{const o=Math.cos(n),f=Math.sin(n),d=Math.cos(i),p=Math.sin(i),v=(t+s)/2;return"M"+t*o+","+t*f+"C"+v*o+","+v*f+" "+v*d+","+v*p+" "+s*d+","+s*p},Paths=fastmap({line:line$1,"line-radial":lineR,arc:arc$1,"arc-radial":arcR,curve,"curve-radial":curveR,"orthogonal-horizontal":orthoX,"orthogonal-vertical":orthoY,"orthogonal-radial":orthoR,"diagonal-horizontal":diagonalX,"diagonal-vertical":diagonalY,"diagonal-radial":diagonalR});function Pie(n){Transform.call(this,null,n)}Pie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};inherits(Pie,Transform,{transform(n,t){var i=n.as||["startAngle","endAngle"],s=i[0],o=i[1],f=n.field||one$3,d=n.startAngle||0,p=n.endAngle!=null?n.endAngle:2*Math.PI,v=t.source,_=v.map(f),k=_.length,P=d,L=(p-d)/sum$2(_),G=range$7(k),Z,W,j;for(n.sort&&G.sort((H,me)=>_[H]-_[me]),Z=0;Z<k;++Z)j=_[G[Z]],W=v[G[Z]],W[s]=P,W[o]=P+=j*L;return this.value=_,t.reflow(n.modified()).modifies(i)}});const DEFAULT_COUNT=5;function includeZero(n){const t=n.type;return!n.bins&&(t===Linear||t===Pow||t===Sqrt)}function includePad(n){return isContinuous$1(n)&&n!==Sequential}const SKIP$1=toSet(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Scale$1(n){Transform.call(this,null,n),this.modified(!0)}inherits(Scale$1,Transform,{transform(n,t){var i=t.dataflow,s=this.value,o=scaleKey(n);(!s||o!==s.type)&&(this.value=s=scale$5(o)());for(o in n)if(!SKIP$1[o]){if(o==="padding"&&includePad(s.type))continue;isFunction$1(s[o])?s[o](n[o]):i.warn("Unsupported scale property: "+o)}return configureRange(s,n,configureBins(s,n,configureDomain(s,n,i))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function scaleKey(n){var t=n.type,i="",s;return t===Sequential?Sequential+"-"+Linear:(isContinuousColor(n)&&(s=n.rawDomain?n.rawDomain.length:n.domain?n.domain.length+ +(n.domainMid!=null):0,i=s===2?Sequential+"-":s===3?Diverging+"-":""),(i+t||Linear).toLowerCase())}function isContinuousColor(n){const t=n.type;return isContinuous$1(t)&&t!==Time&&t!==UTC&&(n.scheme||n.range&&n.range.length&&n.range.every(isString))}function configureDomain(n,t,i){const s=rawDomain(n,t.domainRaw,i);if(s>-1)return s;var o=t.domain,f=n.type,d=t.zero||t.zero===void 0&&includeZero(n),p,v;if(!o)return 0;if((d||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(p=(o=o.slice()).length-1||1,d&&(o[0]>0&&(o[0]=0),o[p]<0&&(o[p]=0)),t.domainMin!=null&&(o[0]=t.domainMin),t.domainMax!=null&&(o[p]=t.domainMax),t.domainMid!=null)){v=t.domainMid;const _=v>o[p]?p+1:v<o[0]?0:p;_!==p&&i.warn("Scale domainMid exceeds domain min or max.",v),o.splice(_,0,v)}return includePad(f)&&t.padding&&o[0]!==peek$2(o)&&(o=padDomain(f,o,t.range,t.padding,t.exponent,t.constant)),n.domain(domainCheck(f,o,i)),f===Ordinal&&n.unknown(t.domainImplicit?implicit:void 0),t.nice&&n.nice&&n.nice(t.nice!==!0&&tickCount(n,t.nice)||null),o.length}function rawDomain(n,t,i){return t?(n.domain(domainCheck(n.type,t,i)),t.length):-1}function padDomain(n,t,i,s,o,f){var d=Math.abs(peek$2(i)-i[0]),p=d/(d-2*s),v=n===Log?zoomLog(t,null,p):n===Sqrt?zoomPow(t,null,p,.5):n===Pow?zoomPow(t,null,p,o||1):n===Symlog?zoomSymlog(t,null,p,f||1):zoomLinear(t,null,p);return t=t.slice(),t[0]=v[0],t[t.length-1]=v[1],t}function domainCheck(n,t,i){if(isLogarithmic(n)){var s=Math.abs(t.reduce((o,f)=>o+(f<0?-1:f>0?1:0),0));s!==t.length&&i.warn("Log scale domain includes zero: "+$(t))}return t}function configureBins(n,t,i){let s=t.bins;if(s&&!isArray(s)){const o=n.domain(),f=o[0],d=peek$2(o),p=s.step;let v=s.start==null?f:s.start,_=s.stop==null?d:s.stop;p||error$1("Scale bins parameter missing step property."),v<f&&(v=p*Math.ceil(f/p)),_>d&&(_=p*Math.floor(d/p)),s=range$7(v,_+p/2,p)}return s?n.bins=s:n.bins&&delete n.bins,n.type===BinOrdinal&&(s?!t.domain&&!t.domainRaw&&(n.domain(s),i=s.length):n.bins=n.domain()),i}function configureRange(n,t,i){var s=n.type,o=t.round||!1,f=t.range;if(t.rangeStep!=null)f=configureRangeStep(s,t,i);else if(t.scheme&&(f=configureScheme(s,t,i),isFunction$1(f))){if(n.interpolator)return n.interpolator(f);error$1(`Scale type ${s} does not support interpolating color schemes.`)}if(f&&isInterpolating(s))return n.interpolator(interpolateColors(flip(f,t.reverse),t.interpolate,t.interpolateGamma));f&&t.interpolate&&n.interpolate?n.interpolate(interpolate$2(t.interpolate,t.interpolateGamma)):isFunction$1(n.round)?n.round(o):isFunction$1(n.rangeRound)&&n.interpolate(o?interpolateRound:interpolate$1),f&&n.range(flip(f,t.reverse))}function configureRangeStep(n,t,i){n!==Band&&n!==Point&&error$1("Only band and point scales support rangeStep.");var s=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,o=n===Point?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*bandSpace(i,o,s)]}function configureScheme(n,t,i){var s=t.schemeExtent,o,f;return isArray(t.scheme)?f=interpolateColors(t.scheme,t.interpolate,t.interpolateGamma):(o=t.scheme.toLowerCase(),f=scheme$1(o),f||error$1(`Unrecognized scheme name: ${t.scheme}`)),i=n===Threshold?i+1:n===BinOrdinal?i-1:n===Quantile||n===Quantize?+t.schemeCount||DEFAULT_COUNT:i,isInterpolating(n)?adjustScheme(f,s,t.reverse):isFunction$1(f)?quantizeInterpolator(adjustScheme(f,s),i):n===Ordinal?f:f.slice(0,i)}function adjustScheme(n,t,i){return isFunction$1(n)&&(t||i)?interpolateRange$1(n,flip(t||[0,1],i)):n}function flip(n,t){return t?n.slice().reverse():n}function SortItems$1(n){Transform.call(this,null,n)}inherits(SortItems$1,Transform,{transform(n,t){const i=n.modified("sort")||t.changed(t.ADD)||t.modified(n.sort.fields)||t.modified("datum");return i&&t.source.sort(stableCompare(n.sort)),this.modified(i),t}});const Zero="zero",Center$1="center",Normalize="normalize",DefOutput=["y0","y1"];function Stack(n){Transform.call(this,null,n)}Stack.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Zero,values:[Zero,Center$1,Normalize]},{name:"as",type:"string",array:!0,length:2,default:DefOutput}]};inherits(Stack,Transform,{transform(n,t){var i=n.as||DefOutput,s=i[0],o=i[1],f=stableCompare(n.sort),d=n.field||one$3,p=n.offset===Center$1?stackCenter:n.offset===Normalize?stackNormalize:stackZero,v,_,k,P;for(v=partition$3(t.source,n.groupby,f,d),_=0,k=v.length,P=v.max;_<k;++_)p(v[_],P,d,s,o);return t.reflow(n.modified()).modifies(i)}});function stackCenter(n,t,i,s,o){for(var f=(t-n.sum)/2,d=n.length,p=0,v;p<d;++p)v=n[p],v[s]=f,v[o]=f+=Math.abs(i(v))}function stackNormalize(n,t,i,s,o){for(var f=1/n.sum,d=0,p=n.length,v=0,_=0,k;v<p;++v)k=n[v],k[s]=d,k[o]=d=f*(_+=Math.abs(i(k)))}function stackZero(n,t,i,s,o){for(var f=0,d=0,p=n.length,v=0,_,k;v<p;++v)k=n[v],_=+i(k),_<0?(k[s]=d,k[o]=d+=_):(k[s]=f,k[o]=f+=_)}function partition$3(n,t,i,s){var o=[],f=W=>W(k),d,p,v,_,k,P,L,G,Z;if(t==null)o.push(n.slice());else for(d={},p=0,v=n.length;p<v;++p)k=n[p],P=t.map(f),L=d[P],L||(d[P]=L=[],o.push(L)),L.push(k);for(P=0,Z=0,_=o.length;P<_;++P){for(L=o[P],p=0,G=0,v=L.length;p<v;++p)G+=Math.abs(s(L[p]));L.sum=G,G>Z&&(Z=G),i&&L.sort(i)}return o.max=Z,o}const encode$1=Object.freeze(Object.defineProperty({__proto__:null,axisticks:AxisTicks$1,datajoin:DataJoin$1,encode:Encode$1,legendentries:LegendEntries$1,linkpath:LinkPath,pie:Pie,scale:Scale$1,sortitems:SortItems$1,stack:Stack},Symbol.toStringTag,{value:"Module"})),e10$1=Math.sqrt(50),e5$2=Math.sqrt(10),e2$2=Math.sqrt(2);function tickSpec$1(n,t,i){const s=(t-n)/Math.max(0,i),o=Math.floor(Math.log10(s)),f=s/Math.pow(10,o),d=f>=e10$1?10:f>=e5$2?5:f>=e2$2?2:1;let p,v,_;return o<0?(_=Math.pow(10,-o)/d,p=Math.round(n*_),v=Math.round(t*_),p/_<n&&++p,v/_>t&&--v,_=-_):(_=Math.pow(10,o)*d,p=Math.round(n/_),v=Math.round(t/_),p*_<n&&++p,v*_>t&&--v),v<p&&.5<=i&&i<2?tickSpec$1(n,t,i*2):[p,v,_]}function tickIncrement$1(n,t,i){return t=+t,n=+n,i=+i,tickSpec$1(n,t,i)[2]}function tickStep$1(n,t,i){t=+t,n=+n,i=+i;const s=t<n,o=s?tickIncrement$1(t,n,i):tickIncrement$1(n,t,i);return(s?-1:1)*(o<0?1/-o:o)}function max$5(n,t){let i;for(const s of n)s!=null&&(i<s||i===void 0&&s>=s)&&(i=s);return i}function range$6(n,t,i){n=+n,t=+t,i=(o=arguments.length)<2?(t=n,n=0,1):o<3?1:+i;for(var s=-1,o=Math.max(0,Math.ceil((t-n)/i))|0,f=new Array(o);++s<o;)f[s]=n+s*i;return f}function sum$1(n,t){let i=0;for(let s of n)(s=+s)&&(i+=s);return i}var epsilon$6=1e-6,epsilon2$1=1e-12,pi$4=Math.PI,halfPi$3=pi$4/2,quarterPi$2=pi$4/4,tau$3=pi$4*2,degrees$3=180/pi$4,radians$3=pi$4/180,abs$6=Math.abs,atan$1=Math.atan,atan2$5=Math.atan2,cos$8=Math.cos,exp$1=Math.exp,log$3=Math.log,pow$8=Math.pow,sin$7=Math.sin,sign$1=Math.sign||function(n){return n>0?1:n<0?-1:0},sqrt$8=Math.sqrt,tan=Math.tan;function acos$2(n){return n>1?0:n<-1?pi$4:Math.acos(n)}function asin$3(n){return n>1?halfPi$3:n<-1?-halfPi$3:Math.asin(n)}function noop$4(){}function streamGeometry$2(n,t){n&&streamGeometryType$2.hasOwnProperty(n.type)&&streamGeometryType$2[n.type](n,t)}var streamObjectType$2={Feature:function(n,t){streamGeometry$2(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,s=-1,o=i.length;++s<o;)streamGeometry$2(i[s].geometry,t)}},streamGeometryType$2={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,s=-1,o=i.length;++s<o;)n=i[s],t.point(n[0],n[1],n[2])},LineString:function(n,t){streamLine$2(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,s=-1,o=i.length;++s<o;)streamLine$2(i[s],t,0)},Polygon:function(n,t){streamPolygon$2(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,s=-1,o=i.length;++s<o;)streamPolygon$2(i[s],t)},GeometryCollection:function(n,t){for(var i=n.geometries,s=-1,o=i.length;++s<o;)streamGeometry$2(i[s],t)}};function streamLine$2(n,t,i){var s=-1,o=n.length-i,f;for(t.lineStart();++s<o;)f=n[s],t.point(f[0],f[1],f[2]);t.lineEnd()}function streamPolygon$2(n,t){var i=-1,s=n.length;for(t.polygonStart();++i<s;)streamLine$2(n[i],t,1);t.polygonEnd()}function geoStream$2(n,t){n&&streamObjectType$2.hasOwnProperty(n.type)?streamObjectType$2[n.type](n,t):streamGeometry$2(n,t)}function spherical$2(n){return[atan2$5(n[1],n[0]),asin$3(n[2])]}function cartesian$2(n){var t=n[0],i=n[1],s=cos$8(i);return[s*cos$8(t),s*sin$7(t),sin$7(i)]}function cartesianDot$1(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function cartesianCross$2(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function cartesianAddInPlace$1(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function cartesianScale$1(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function cartesianNormalizeInPlace$2(n){var t=sqrt$8(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function compose$1(n,t){function i(s,o){return s=n(s,o),t(s[0],s[1])}return n.invert&&t.invert&&(i.invert=function(s,o){return s=t.invert(s,o),s&&n.invert(s[0],s[1])}),i}function rotationIdentity$1(n,t){return abs$6(n)>pi$4&&(n-=Math.round(n/tau$3)*tau$3),[n,t]}rotationIdentity$1.invert=rotationIdentity$1;function rotateRadians$1(n,t,i){return(n%=tau$3)?t||i?compose$1(rotationLambda$1(n),rotationPhiGamma$1(t,i)):rotationLambda$1(n):t||i?rotationPhiGamma$1(t,i):rotationIdentity$1}function forwardRotationLambda$1(n){return function(t,i){return t+=n,abs$6(t)>pi$4&&(t-=Math.round(t/tau$3)*tau$3),[t,i]}}function rotationLambda$1(n){var t=forwardRotationLambda$1(n);return t.invert=forwardRotationLambda$1(-n),t}function rotationPhiGamma$1(n,t){var i=cos$8(n),s=sin$7(n),o=cos$8(t),f=sin$7(t);function d(p,v){var _=cos$8(v),k=cos$8(p)*_,P=sin$7(p)*_,L=sin$7(v),G=L*i+k*s;return[atan2$5(P*o-G*f,k*i-L*s),asin$3(G*o+P*f)]}return d.invert=function(p,v){var _=cos$8(v),k=cos$8(p)*_,P=sin$7(p)*_,L=sin$7(v),G=L*o-P*f;return[atan2$5(P*o+L*f,k*i+G*s),asin$3(G*i-k*s)]},d}function rotation(n){n=rotateRadians$1(n[0]*radians$3,n[1]*radians$3,n.length>2?n[2]*radians$3:0);function t(i){return i=n(i[0]*radians$3,i[1]*radians$3),i[0]*=degrees$3,i[1]*=degrees$3,i}return t.invert=function(i){return i=n.invert(i[0]*radians$3,i[1]*radians$3),i[0]*=degrees$3,i[1]*=degrees$3,i},t}function circleStream$1(n,t,i,s,o,f){if(i){var d=cos$8(t),p=sin$7(t),v=s*i;o==null?(o=t+s*tau$3,f=t-v/2):(o=circleRadius$1(d,o),f=circleRadius$1(d,f),(s>0?o<f:o>f)&&(o+=s*tau$3));for(var _,k=o;s>0?k>f:k<f;k-=v)_=spherical$2([d,-p*cos$8(k),-p*sin$7(k)]),n.point(_[0],_[1])}}function circleRadius$1(n,t){t=cartesian$2(t),t[0]-=n,cartesianNormalizeInPlace$2(t);var i=acos$2(-t[1]);return((-t[2]<0?-i:i)+tau$3-epsilon$6)%tau$3}function clipBuffer$1(){var n=[],t;return{point:function(i,s,o){t.push([i,s,o])},lineStart:function(){n.push(t=[])},lineEnd:noop$4,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function pointEqual$1(n,t){return abs$6(n[0]-t[0])<epsilon$6&&abs$6(n[1]-t[1])<epsilon$6}function Intersection$1(n,t,i,s){this.x=n,this.z=t,this.o=i,this.e=s,this.v=!1,this.n=this.p=null}function clipRejoin$1(n,t,i,s,o){var f=[],d=[],p,v;if(n.forEach(function(Z){if(!((W=Z.length-1)<=0)){var W,j=Z[0],H=Z[W],me;if(pointEqual$1(j,H)){if(!j[2]&&!H[2]){for(o.lineStart(),p=0;p<W;++p)o.point((j=Z[p])[0],j[1]);o.lineEnd();return}H[0]+=2*epsilon$6}f.push(me=new Intersection$1(j,Z,null,!0)),d.push(me.o=new Intersection$1(j,null,me,!1)),f.push(me=new Intersection$1(H,Z,null,!1)),d.push(me.o=new Intersection$1(H,null,me,!0))}}),!!f.length){for(d.sort(t),link$1(f),link$1(d),p=0,v=d.length;p<v;++p)d[p].e=i=!i;for(var _=f[0],k,P;;){for(var L=_,G=!0;L.v;)if((L=L.n)===_)return;k=L.z,o.lineStart();do{if(L.v=L.o.v=!0,L.e){if(G)for(p=0,v=k.length;p<v;++p)o.point((P=k[p])[0],P[1]);else s(L.x,L.n.x,1,o);L=L.n}else{if(G)for(k=L.p.z,p=k.length-1;p>=0;--p)o.point((P=k[p])[0],P[1]);else s(L.x,L.p.x,-1,o);L=L.p}L=L.o,k=L.z,G=!G}while(!L.v);o.lineEnd()}}}function link$1(n){if(t=n.length){for(var t,i=0,s=n[0],o;++i<t;)s.n=o=n[i],o.p=s,s=o;s.n=o=n[0],o.p=s}}function longitude$1(n){return abs$6(n[0])<=pi$4?n[0]:sign$1(n[0])*((abs$6(n[0])+pi$4)%tau$3-pi$4)}function polygonContains$1(n,t){var i=longitude$1(t),s=t[1],o=sin$7(s),f=[sin$7(i),-cos$8(i),0],d=0,p=0,v=new Adder$1;o===1?s=halfPi$3+epsilon$6:o===-1&&(s=-halfPi$3-epsilon$6);for(var _=0,k=n.length;_<k;++_)if(L=(P=n[_]).length)for(var P,L,G=P[L-1],Z=longitude$1(G),W=G[1]/2+quarterPi$2,j=sin$7(W),H=cos$8(W),me=0;me<L;++me,Z=De,j=Ce,H=Me,G=$e){var $e=P[me],De=longitude$1($e),le=$e[1]/2+quarterPi$2,Ce=sin$7(le),Me=cos$8(le),_n=De-Z,_i=_n>=0?1:-1,ll=_i*_n,_l=ll>pi$4,oa=j*Ce;if(v.add(atan2$5(oa*_i*sin$7(ll),H*Me+oa*cos$8(ll))),d+=_l?_n+_i*tau$3:_n,_l^Z>=i^De>=i){var Ru=cartesianCross$2(cartesian$2(G),cartesian$2($e));cartesianNormalizeInPlace$2(Ru);var ga=cartesianCross$2(f,Ru);cartesianNormalizeInPlace$2(ga);var _s=(_l^_n>=0?-1:1)*asin$3(ga[2]);(s>_s||s===_s&&(Ru[0]||Ru[1]))&&(p+=_l^_n>=0?1:-1)}}return(d<-1e-6||d<epsilon$6&&v<-1e-12)^p&1}function clip$2(n,t,i,s){return function(o){var f=t(o),d=clipBuffer$1(),p=t(d),v=!1,_,k,P,L={point:G,lineStart:W,lineEnd:j,polygonStart:function(){L.point=H,L.lineStart=me,L.lineEnd=$e,k=[],_=[]},polygonEnd:function(){L.point=G,L.lineStart=W,L.lineEnd=j,k=merge$2(k);var De=polygonContains$1(_,s);k.length?(v||(o.polygonStart(),v=!0),clipRejoin$1(k,compareIntersection$1,De,i,o)):De&&(v||(o.polygonStart(),v=!0),o.lineStart(),i(null,null,1,o),o.lineEnd()),v&&(o.polygonEnd(),v=!1),k=_=null},sphere:function(){o.polygonStart(),o.lineStart(),i(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function G(De,le){n(De,le)&&o.point(De,le)}function Z(De,le){f.point(De,le)}function W(){L.point=Z,f.lineStart()}function j(){L.point=G,f.lineEnd()}function H(De,le){P.push([De,le]),p.point(De,le)}function me(){p.lineStart(),P=[]}function $e(){H(P[0][0],P[0][1]),p.lineEnd();var De=p.clean(),le=d.result(),Ce,Me=le.length,_n,_i,ll;if(P.pop(),_.push(P),P=null,!!Me){if(De&1){if(_i=le[0],(_n=_i.length-1)>0){for(v||(o.polygonStart(),v=!0),o.lineStart(),Ce=0;Ce<_n;++Ce)o.point((ll=_i[Ce])[0],ll[1]);o.lineEnd()}return}Me>1&&De&2&&le.push(le.pop().concat(le.shift())),k.push(le.filter(validSegment$1))}}return L}}function validSegment$1(n){return n.length>1}function compareIntersection$1(n,t){return((n=n.x)[0]<0?n[1]-halfPi$3-epsilon$6:halfPi$3-n[1])-((t=t.x)[0]<0?t[1]-halfPi$3-epsilon$6:halfPi$3-t[1])}const clipAntimeridian$1=clip$2(function(){return!0},clipAntimeridianLine$1,clipAntimeridianInterpolate$1,[-pi$4,-halfPi$3]);function clipAntimeridianLine$1(n){var t=NaN,i=NaN,s=NaN,o;return{lineStart:function(){n.lineStart(),o=1},point:function(f,d){var p=f>0?pi$4:-pi$4,v=abs$6(f-t);abs$6(v-pi$4)<epsilon$6?(n.point(t,i=(i+d)/2>0?halfPi$3:-halfPi$3),n.point(s,i),n.lineEnd(),n.lineStart(),n.point(p,i),n.point(f,i),o=0):s!==p&&v>=pi$4&&(abs$6(t-s)<epsilon$6&&(t-=s*epsilon$6),abs$6(f-p)<epsilon$6&&(f-=p*epsilon$6),i=clipAntimeridianIntersect$1(t,i,f,d),n.point(s,i),n.lineEnd(),n.lineStart(),n.point(p,i),o=0),n.point(t=f,i=d),s=p},lineEnd:function(){n.lineEnd(),t=i=NaN},clean:function(){return 2-o}}}function clipAntimeridianIntersect$1(n,t,i,s){var o,f,d=sin$7(n-i);return abs$6(d)>epsilon$6?atan$1((sin$7(t)*(f=cos$8(s))*sin$7(i)-sin$7(s)*(o=cos$8(t))*sin$7(n))/(o*f*d)):(t+s)/2}function clipAntimeridianInterpolate$1(n,t,i,s){var o;if(n==null)o=i*halfPi$3,s.point(-pi$4,o),s.point(0,o),s.point(pi$4,o),s.point(pi$4,0),s.point(pi$4,-o),s.point(0,-o),s.point(-pi$4,-o),s.point(-pi$4,0),s.point(-pi$4,o);else if(abs$6(n[0]-t[0])>epsilon$6){var f=n[0]<t[0]?pi$4:-pi$4;o=i*f/2,s.point(-f,o),s.point(0,o),s.point(f,o)}else s.point(t[0],t[1])}function clipCircle$1(n){var t=cos$8(n),i=2*radians$3,s=t>0,o=abs$6(t)>epsilon$6;function f(k,P,L,G){circleStream$1(G,n,i,L,k,P)}function d(k,P){return cos$8(k)*cos$8(P)>t}function p(k){var P,L,G,Z,W;return{lineStart:function(){Z=G=!1,W=1},point:function(j,H){var me=[j,H],$e,De=d(j,H),le=s?De?0:_(j,H):De?_(j+(j<0?pi$4:-pi$4),H):0;if(!P&&(Z=G=De)&&k.lineStart(),De!==G&&($e=v(P,me),(!$e||pointEqual$1(P,$e)||pointEqual$1(me,$e))&&(me[2]=1)),De!==G)W=0,De?(k.lineStart(),$e=v(me,P),k.point($e[0],$e[1])):($e=v(P,me),k.point($e[0],$e[1],2),k.lineEnd()),P=$e;else if(o&&P&&s^De){var Ce;!(le&L)&&(Ce=v(me,P,!0))&&(W=0,s?(k.lineStart(),k.point(Ce[0][0],Ce[0][1]),k.point(Ce[1][0],Ce[1][1]),k.lineEnd()):(k.point(Ce[1][0],Ce[1][1]),k.lineEnd(),k.lineStart(),k.point(Ce[0][0],Ce[0][1],3)))}De&&(!P||!pointEqual$1(P,me))&&k.point(me[0],me[1]),P=me,G=De,L=le},lineEnd:function(){G&&k.lineEnd(),P=null},clean:function(){return W|(Z&&G)<<1}}}function v(k,P,L){var G=cartesian$2(k),Z=cartesian$2(P),W=[1,0,0],j=cartesianCross$2(G,Z),H=cartesianDot$1(j,j),me=j[0],$e=H-me*me;if(!$e)return!L&&k;var De=t*H/$e,le=-t*me/$e,Ce=cartesianCross$2(W,j),Me=cartesianScale$1(W,De),_n=cartesianScale$1(j,le);cartesianAddInPlace$1(Me,_n);var _i=Ce,ll=cartesianDot$1(Me,_i),_l=cartesianDot$1(_i,_i),oa=ll*ll-_l*(cartesianDot$1(Me,Me)-1);if(!(oa<0)){var Ru=sqrt$8(oa),ga=cartesianScale$1(_i,(-ll-Ru)/_l);if(cartesianAddInPlace$1(ga,Me),ga=spherical$2(ga),!L)return ga;var _s=k[0],Sa=P[0],Ra=k[1],Da=P[1],Fa;Sa<_s&&(Fa=_s,_s=Sa,Sa=Fa);var Na=Sa-_s,_a=abs$6(Na-pi$4)<epsilon$6,Pa=_a||Na<epsilon$6;if(!_a&&Da<Ra&&(Fa=Ra,Ra=Da,Da=Fa),Pa?_a?Ra+Da>0^ga[1]<(abs$6(ga[0]-_s)<epsilon$6?Ra:Da):Ra<=ga[1]&&ga[1]<=Da:Na>pi$4^(_s<=ga[0]&&ga[0]<=Sa)){var qc=cartesianScale$1(_i,(-ll+Ru)/_l);return cartesianAddInPlace$1(qc,Me),[ga,spherical$2(qc)]}}}function _(k,P){var L=s?n:pi$4-n,G=0;return k<-L?G|=1:k>L&&(G|=2),P<-L?G|=4:P>L&&(G|=8),G}return clip$2(d,p,f,s?[0,-n]:[-pi$4,n-pi$4])}function clipLine$1(n,t,i,s,o,f){var d=n[0],p=n[1],v=t[0],_=t[1],k=0,P=1,L=v-d,G=_-p,Z;if(Z=i-d,!(!L&&Z>0)){if(Z/=L,L<0){if(Z<k)return;Z<P&&(P=Z)}else if(L>0){if(Z>P)return;Z>k&&(k=Z)}if(Z=o-d,!(!L&&Z<0)){if(Z/=L,L<0){if(Z>P)return;Z>k&&(k=Z)}else if(L>0){if(Z<k)return;Z<P&&(P=Z)}if(Z=s-p,!(!G&&Z>0)){if(Z/=G,G<0){if(Z<k)return;Z<P&&(P=Z)}else if(G>0){if(Z>P)return;Z>k&&(k=Z)}if(Z=f-p,!(!G&&Z<0)){if(Z/=G,G<0){if(Z>P)return;Z>k&&(k=Z)}else if(G>0){if(Z<k)return;Z<P&&(P=Z)}return k>0&&(n[0]=d+k*L,n[1]=p+k*G),P<1&&(t[0]=d+P*L,t[1]=p+P*G),!0}}}}}var clipMax$1=1e9,clipMin$1=-1e9;function clipRectangle$1(n,t,i,s){function o(_,k){return n<=_&&_<=i&&t<=k&&k<=s}function f(_,k,P,L){var G=0,Z=0;if(_==null||(G=d(_,P))!==(Z=d(k,P))||v(_,k)<0^P>0)do L.point(G===0||G===3?n:i,G>1?s:t);while((G=(G+P+4)%4)!==Z);else L.point(k[0],k[1])}function d(_,k){return abs$6(_[0]-n)<epsilon$6?k>0?0:3:abs$6(_[0]-i)<epsilon$6?k>0?2:1:abs$6(_[1]-t)<epsilon$6?k>0?1:0:k>0?3:2}function p(_,k){return v(_.x,k.x)}function v(_,k){var P=d(_,1),L=d(k,1);return P!==L?P-L:P===0?k[1]-_[1]:P===1?_[0]-k[0]:P===2?_[1]-k[1]:k[0]-_[0]}return function(_){var k=_,P=clipBuffer$1(),L,G,Z,W,j,H,me,$e,De,le,Ce,Me={point:_n,lineStart:oa,lineEnd:Ru,polygonStart:ll,polygonEnd:_l};function _n(_s,Sa){o(_s,Sa)&&k.point(_s,Sa)}function _i(){for(var _s=0,Sa=0,Ra=G.length;Sa<Ra;++Sa)for(var Da=G[Sa],Fa=1,Na=Da.length,_a=Da[0],Pa,qc,uf=_a[0],_h=_a[1];Fa<Na;++Fa)Pa=uf,qc=_h,_a=Da[Fa],uf=_a[0],_h=_a[1],qc<=s?_h>s&&(uf-Pa)*(s-qc)>(_h-qc)*(n-Pa)&&++_s:_h<=s&&(uf-Pa)*(s-qc)<(_h-qc)*(n-Pa)&&--_s;return _s}function ll(){k=P,L=[],G=[],Ce=!0}function _l(){var _s=_i(),Sa=Ce&&_s,Ra=(L=merge$2(L)).length;(Sa||Ra)&&(_.polygonStart(),Sa&&(_.lineStart(),f(null,null,1,_),_.lineEnd()),Ra&&clipRejoin$1(L,p,_s,f,_),_.polygonEnd()),k=_,L=G=Z=null}function oa(){Me.point=ga,G&&G.push(Z=[]),le=!0,De=!1,me=$e=NaN}function Ru(){L&&(ga(W,j),H&&De&&P.rejoin(),L.push(P.result())),Me.point=_n,De&&k.lineEnd()}function ga(_s,Sa){var Ra=o(_s,Sa);if(G&&Z.push([_s,Sa]),le)W=_s,j=Sa,H=Ra,le=!1,Ra&&(k.lineStart(),k.point(_s,Sa));else if(Ra&&De)k.point(_s,Sa);else{var Da=[me=Math.max(clipMin$1,Math.min(clipMax$1,me)),$e=Math.max(clipMin$1,Math.min(clipMax$1,$e))],Fa=[_s=Math.max(clipMin$1,Math.min(clipMax$1,_s)),Sa=Math.max(clipMin$1,Math.min(clipMax$1,Sa))];clipLine$1(Da,Fa,n,t,i,s)?(De||(k.lineStart(),k.point(Da[0],Da[1])),k.point(Fa[0],Fa[1]),Ra||k.lineEnd(),Ce=!1):Ra&&(k.lineStart(),k.point(_s,Sa),Ce=!1)}me=_s,$e=Sa,De=Ra}return Me}}const identity$1=n=>n;var areaSum$1=new Adder$1,areaRingSum$1=new Adder$1,x00$2,y00$2,x0$6,y0$6,areaStream$1={point:noop$4,lineStart:noop$4,lineEnd:noop$4,polygonStart:function(){areaStream$1.lineStart=areaRingStart$1,areaStream$1.lineEnd=areaRingEnd$1},polygonEnd:function(){areaStream$1.lineStart=areaStream$1.lineEnd=areaStream$1.point=noop$4,areaSum$1.add(abs$6(areaRingSum$1)),areaRingSum$1=new Adder$1},result:function(){var n=areaSum$1/2;return areaSum$1=new Adder$1,n}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1}function areaPointFirst$1(n,t){areaStream$1.point=areaPoint$1,x00$2=x0$6=n,y00$2=y0$6=t}function areaPoint$1(n,t){areaRingSum$1.add(y0$6*n-x0$6*t),x0$6=n,y0$6=t}function areaRingEnd$1(){areaPoint$1(x00$2,y00$2)}var x0$5=1/0,y0$5=x0$5,x1$2=-x0$5,y1$2=x1$2,boundsStream$2={point:boundsPoint$2,lineStart:noop$4,lineEnd:noop$4,polygonStart:noop$4,polygonEnd:noop$4,result:function(){var n=[[x0$5,y0$5],[x1$2,y1$2]];return x1$2=y1$2=-(y0$5=x0$5=1/0),n}};function boundsPoint$2(n,t){n<x0$5&&(x0$5=n),n>x1$2&&(x1$2=n),t<y0$5&&(y0$5=t),t>y1$2&&(y1$2=t)}var X0$2=0,Y0$2=0,Z0$2=0,X1$2=0,Y1$2=0,Z1$2=0,X2$3=0,Y2$3=0,Z2$2=0,x00$1,y00$1,x0$4,y0$4,centroidStream$1={point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.point=centroidPoint$1,centroidStream$1.lineStart=centroidLineStart$1,centroidStream$1.lineEnd=centroidLineEnd$1},result:function(){var n=Z2$2?[X2$3/Z2$2,Y2$3/Z2$2]:Z1$2?[X1$2/Z1$2,Y1$2/Z1$2]:Z0$2?[X0$2/Z0$2,Y0$2/Z0$2]:[NaN,NaN];return X0$2=Y0$2=Z0$2=X1$2=Y1$2=Z1$2=X2$3=Y2$3=Z2$2=0,n}};function centroidPoint$1(n,t){X0$2+=n,Y0$2+=t,++Z0$2}function centroidLineStart$1(){centroidStream$1.point=centroidPointFirstLine}function centroidPointFirstLine(n,t){centroidStream$1.point=centroidPointLine,centroidPoint$1(x0$4=n,y0$4=t)}function centroidPointLine(n,t){var i=n-x0$4,s=t-y0$4,o=sqrt$8(i*i+s*s);X1$2+=o*(x0$4+n)/2,Y1$2+=o*(y0$4+t)/2,Z1$2+=o,centroidPoint$1(x0$4=n,y0$4=t)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidPointFirstRing}function centroidRingEnd$1(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(n,t){centroidStream$1.point=centroidPointRing,centroidPoint$1(x00$1=x0$4=n,y00$1=y0$4=t)}function centroidPointRing(n,t){var i=n-x0$4,s=t-y0$4,o=sqrt$8(i*i+s*s);X1$2+=o*(x0$4+n)/2,Y1$2+=o*(y0$4+t)/2,Z1$2+=o,o=y0$4*n-x0$4*t,X2$3+=o*(x0$4+n),Y2$3+=o*(y0$4+t),Z2$2+=o*3,centroidPoint$1(x0$4=n,y0$4=t)}function PathContext(n){this._context=n}PathContext.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,tau$3);break}}},result:noop$4};var lengthSum=new Adder$1,lengthRing,x00,y00,x0$3,y0$3,lengthStream={point:noop$4,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$4},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var n=+lengthSum;return lengthSum=new Adder$1,n}};function lengthPointFirst(n,t){lengthStream.point=lengthPoint,x00=x0$3=n,y00=y0$3=t}function lengthPoint(n,t){x0$3-=n,y0$3-=t,lengthSum.add(sqrt$8(x0$3*x0$3+y0$3*y0$3)),x0$3=n,y0$3=t}let cacheDigits,cacheAppend,cacheRadius,cacheCircle;class PathString{constructor(t){this._append=t==null?append:appendRound(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,i){switch(this._point){case 0:{this._append`M${t},${i}`,this._point=1;break}case 1:{this._append`L${t},${i}`;break}default:{if(this._append`M${t},${i}`,this._radius!==cacheRadius||this._append!==cacheAppend){const s=this._radius,o=this._;this._="",this._append`m0,${s}a${s},${s} 0 1,1 0,${-2*s}a${s},${s} 0 1,1 0,${2*s}z`,cacheRadius=s,cacheAppend=this._append,cacheCircle=this._,this._=o}this._+=cacheCircle;break}}}result(){const t=this._;return this._="",t.length?t:null}}function append(n){let t=1;this._+=n[0];for(const i=n.length;t<i;++t)this._+=arguments[t]+n[t]}function appendRound(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return append;if(t!==cacheDigits){const i=10**t;cacheDigits=t,cacheAppend=function(o){let f=1;this._+=o[0];for(const d=o.length;f<d;++f)this._+=Math.round(arguments[f]*i)/i+o[f]}}return cacheAppend}function geoPath(n,t){let i=3,s=4.5,o,f;function d(p){return p&&(typeof s=="function"&&f.pointRadius(+s.apply(this,arguments)),geoStream$2(p,o(f))),f.result()}return d.area=function(p){return geoStream$2(p,o(areaStream$1)),areaStream$1.result()},d.measure=function(p){return geoStream$2(p,o(lengthStream)),lengthStream.result()},d.bounds=function(p){return geoStream$2(p,o(boundsStream$2)),boundsStream$2.result()},d.centroid=function(p){return geoStream$2(p,o(centroidStream$1)),centroidStream$1.result()},d.projection=function(p){return arguments.length?(o=p==null?(n=null,identity$1):(n=p).stream,d):n},d.context=function(p){return arguments.length?(f=p==null?(t=null,new PathString(i)):new PathContext(t=p),typeof s!="function"&&f.pointRadius(s),d):t},d.pointRadius=function(p){return arguments.length?(s=typeof p=="function"?p:(f.pointRadius(+p),+p),d):s},d.digits=function(p){if(!arguments.length)return i;if(p==null)i=null;else{const v=Math.floor(p);if(!(v>=0))throw new RangeError(`invalid digits: ${p}`);i=v}return t===null&&(f=new PathString(i)),d},d.projection(n).digits(i).context(t)}function transformer$1(n){return function(t){var i=new TransformStream$1;for(var s in n)i[s]=n[s];return i.stream=t,i}}function TransformStream$1(){}TransformStream$1.prototype={constructor:TransformStream$1,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fit$2(n,t,i){var s=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),s!=null&&n.clipExtent(null),geoStream$2(i,n.stream(boundsStream$2)),t(boundsStream$2.result()),s!=null&&n.clipExtent(s),n}function fitExtent$1(n,t,i){return fit$2(n,function(s){var o=t[1][0]-t[0][0],f=t[1][1]-t[0][1],d=Math.min(o/(s[1][0]-s[0][0]),f/(s[1][1]-s[0][1])),p=+t[0][0]+(o-d*(s[1][0]+s[0][0]))/2,v=+t[0][1]+(f-d*(s[1][1]+s[0][1]))/2;n.scale(150*d).translate([p,v])},i)}function fitSize$1(n,t,i){return fitExtent$1(n,[[0,0],t],i)}function fitWidth$1(n,t,i){return fit$2(n,function(s){var o=+t,f=o/(s[1][0]-s[0][0]),d=(o-f*(s[1][0]+s[0][0]))/2,p=-f*s[0][1];n.scale(150*f).translate([d,p])},i)}function fitHeight$1(n,t,i){return fit$2(n,function(s){var o=+t,f=o/(s[1][1]-s[0][1]),d=-f*s[0][0],p=(o-f*(s[1][1]+s[0][1]))/2;n.scale(150*f).translate([d,p])},i)}var maxDepth$1=16,cosMinDistance$1=cos$8(30*radians$3);function resample$2(n,t){return+t?resample$3(n,t):resampleNone$1(n)}function resampleNone$1(n){return transformer$1({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function resample$3(n,t){function i(s,o,f,d,p,v,_,k,P,L,G,Z,W,j){var H=_-s,me=k-o,$e=H*H+me*me;if($e>4*t&&W--){var De=d+L,le=p+G,Ce=v+Z,Me=sqrt$8(De*De+le*le+Ce*Ce),_n=asin$3(Ce/=Me),_i=abs$6(abs$6(Ce)-1)<epsilon$6||abs$6(f-P)<epsilon$6?(f+P)/2:atan2$5(le,De),ll=n(_i,_n),_l=ll[0],oa=ll[1],Ru=_l-s,ga=oa-o,_s=me*Ru-H*ga;(_s*_s/$e>t||abs$6((H*Ru+me*ga)/$e-.5)>.3||d*L+p*G+v*Z<cosMinDistance$1)&&(i(s,o,f,d,p,v,_l,oa,_i,De/=Me,le/=Me,Ce,W,j),j.point(_l,oa),i(_l,oa,_i,De,le,Ce,_,k,P,L,G,Z,W,j))}}return function(s){var o,f,d,p,v,_,k,P,L,G,Z,W,j={point:H,lineStart:me,lineEnd:De,polygonStart:function(){s.polygonStart(),j.lineStart=le},polygonEnd:function(){s.polygonEnd(),j.lineStart=me}};function H(_n,_i){_n=n(_n,_i),s.point(_n[0],_n[1])}function me(){P=NaN,j.point=$e,s.lineStart()}function $e(_n,_i){var ll=cartesian$2([_n,_i]),_l=n(_n,_i);i(P,L,k,G,Z,W,P=_l[0],L=_l[1],k=_n,G=ll[0],Z=ll[1],W=ll[2],maxDepth$1,s),s.point(P,L)}function De(){j.point=H,s.lineEnd()}function le(){me(),j.point=Ce,j.lineEnd=Me}function Ce(_n,_i){$e(o=_n,_i),f=P,d=L,p=G,v=Z,_=W,j.point=$e}function Me(){i(P,L,k,G,Z,W,f,d,o,p,v,_,maxDepth$1,s),j.lineEnd=De,De()}return j}}var transformRadians$1=transformer$1({point:function(n,t){this.stream.point(n*radians$3,t*radians$3)}});function transformRotate$1(n){return transformer$1({point:function(t,i){var s=n(t,i);return this.stream.point(s[0],s[1])}})}function scaleTranslate$1(n,t,i,s,o){function f(d,p){return d*=s,p*=o,[t+n*d,i-n*p]}return f.invert=function(d,p){return[(d-t)/n*s,(i-p)/n*o]},f}function scaleTranslateRotate$1(n,t,i,s,o,f){if(!f)return scaleTranslate$1(n,t,i,s,o);var d=cos$8(f),p=sin$7(f),v=d*n,_=p*n,k=d/n,P=p/n,L=(p*i-d*t)/n,G=(p*t+d*i)/n;function Z(W,j){return W*=s,j*=o,[v*W-_*j+t,i-_*W-v*j]}return Z.invert=function(W,j){return[s*(k*W-P*j+L),o*(G-P*W-k*j)]},Z}function projection$2(n){return projectionMutator$1(function(){return n})()}function projectionMutator$1(n){var t,i=150,s=480,o=250,f=0,d=0,p=0,v=0,_=0,k,P=0,L=1,G=1,Z=null,W=clipAntimeridian$1,j=null,H,me,$e,De=identity$1,le=.5,Ce,Me,_n,_i,ll;function _l(_s){return _n(_s[0]*radians$3,_s[1]*radians$3)}function oa(_s){return _s=_n.invert(_s[0],_s[1]),_s&&[_s[0]*degrees$3,_s[1]*degrees$3]}_l.stream=function(_s){return _i&&ll===_s?_i:_i=transformRadians$1(transformRotate$1(k)(W(Ce(De(ll=_s)))))},_l.preclip=function(_s){return arguments.length?(W=_s,Z=void 0,ga()):W},_l.postclip=function(_s){return arguments.length?(De=_s,j=H=me=$e=null,ga()):De},_l.clipAngle=function(_s){return arguments.length?(W=+_s?clipCircle$1(Z=_s*radians$3):(Z=null,clipAntimeridian$1),ga()):Z*degrees$3},_l.clipExtent=function(_s){return arguments.length?(De=_s==null?(j=H=me=$e=null,identity$1):clipRectangle$1(j=+_s[0][0],H=+_s[0][1],me=+_s[1][0],$e=+_s[1][1]),ga()):j==null?null:[[j,H],[me,$e]]},_l.scale=function(_s){return arguments.length?(i=+_s,Ru()):i},_l.translate=function(_s){return arguments.length?(s=+_s[0],o=+_s[1],Ru()):[s,o]},_l.center=function(_s){return arguments.length?(f=_s[0]%360*radians$3,d=_s[1]%360*radians$3,Ru()):[f*degrees$3,d*degrees$3]},_l.rotate=function(_s){return arguments.length?(p=_s[0]%360*radians$3,v=_s[1]%360*radians$3,_=_s.length>2?_s[2]%360*radians$3:0,Ru()):[p*degrees$3,v*degrees$3,_*degrees$3]},_l.angle=function(_s){return arguments.length?(P=_s%360*radians$3,Ru()):P*degrees$3},_l.reflectX=function(_s){return arguments.length?(L=_s?-1:1,Ru()):L<0},_l.reflectY=function(_s){return arguments.length?(G=_s?-1:1,Ru()):G<0},_l.precision=function(_s){return arguments.length?(Ce=resample$2(Me,le=_s*_s),ga()):sqrt$8(le)},_l.fitExtent=function(_s,Sa){return fitExtent$1(_l,_s,Sa)},_l.fitSize=function(_s,Sa){return fitSize$1(_l,_s,Sa)},_l.fitWidth=function(_s,Sa){return fitWidth$1(_l,_s,Sa)},_l.fitHeight=function(_s,Sa){return fitHeight$1(_l,_s,Sa)};function Ru(){var _s=scaleTranslateRotate$1(i,0,0,L,G,P).apply(null,t(f,d)),Sa=scaleTranslateRotate$1(i,s-_s[0],o-_s[1],L,G,P);return k=rotateRadians$1(p,v,_),Me=compose$1(t,Sa),_n=compose$1(k,Me),Ce=resample$2(Me,le),ga()}function ga(){return _i=ll=null,_l}return function(){return t=n.apply(this,arguments),_l.invert=t.invert&&oa,Ru()}}function conicProjection(n){var t=0,i=pi$4/3,s=projectionMutator$1(n),o=s(t,i);return o.parallels=function(f){return arguments.length?s(t=f[0]*radians$3,i=f[1]*radians$3):[t*degrees$3,i*degrees$3]},o}function cylindricalEqualAreaRaw(n){var t=cos$8(n);function i(s,o){return[s*t,sin$7(o)/t]}return i.invert=function(s,o){return[s/t,asin$3(o*t)]},i}function conicEqualAreaRaw(n,t){var i=sin$7(n),s=(i+sin$7(t))/2;if(abs$6(s)<epsilon$6)return cylindricalEqualAreaRaw(n);var o=1+i*(2*s-i),f=sqrt$8(o)/s;function d(p,v){var _=sqrt$8(o-2*s*sin$7(v))/s;return[_*sin$7(p*=s),f-_*cos$8(p)]}return d.invert=function(p,v){var _=f-v,k=atan2$5(p,abs$6(_))*sign$1(_);return _*s<0&&(k-=pi$4*sign$1(p)*sign$1(_)),[k/s,asin$3((o-(p*p+_*_)*s*s)/(2*s))]},d}function geoConicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function geoAlbers(){return geoConicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(n){var t=n.length;return{point:function(i,s){for(var o=-1;++o<t;)n[o].point(i,s)},sphere:function(){for(var i=-1;++i<t;)n[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)n[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)n[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)n[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)n[i].polygonEnd()}}}function geoAlbersUsa(){var n,t,i=geoAlbers(),s,o=geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f,d=geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),p,v,_={point:function(L,G){v=[L,G]}};function k(L){var G=L[0],Z=L[1];return v=null,s.point(G,Z),v||(f.point(G,Z),v)||(p.point(G,Z),v)}k.invert=function(L){var G=i.scale(),Z=i.translate(),W=(L[0]-Z[0])/G,j=(L[1]-Z[1])/G;return(j>=.12&&j<.234&&W>=-.425&&W<-.214?o:j>=.166&&j<.234&&W>=-.214&&W<-.115?d:i).invert(L)},k.stream=function(L){return n&&t===L?n:n=multiplex([i.stream(t=L),o.stream(L),d.stream(L)])},k.precision=function(L){return arguments.length?(i.precision(L),o.precision(L),d.precision(L),P()):i.precision()},k.scale=function(L){return arguments.length?(i.scale(L),o.scale(L*.35),d.scale(L),k.translate(i.translate())):i.scale()},k.translate=function(L){if(!arguments.length)return i.translate();var G=i.scale(),Z=+L[0],W=+L[1];return s=i.translate(L).clipExtent([[Z-.455*G,W-.238*G],[Z+.455*G,W+.238*G]]).stream(_),f=o.translate([Z-.307*G,W+.201*G]).clipExtent([[Z-.425*G+epsilon$6,W+.12*G+epsilon$6],[Z-.214*G-epsilon$6,W+.234*G-epsilon$6]]).stream(_),p=d.translate([Z-.205*G,W+.212*G]).clipExtent([[Z-.214*G+epsilon$6,W+.166*G+epsilon$6],[Z-.115*G-epsilon$6,W+.234*G-epsilon$6]]).stream(_),P()},k.fitExtent=function(L,G){return fitExtent$1(k,L,G)},k.fitSize=function(L,G){return fitSize$1(k,L,G)},k.fitWidth=function(L,G){return fitWidth$1(k,L,G)},k.fitHeight=function(L,G){return fitHeight$1(k,L,G)};function P(){return n=t=null,k}return k.scale(1070)}function azimuthalRaw(n){return function(t,i){var s=cos$8(t),o=cos$8(i),f=n(s*o);return f===1/0?[2,0]:[f*o*sin$7(t),f*sin$7(i)]}}function azimuthalInvert(n){return function(t,i){var s=sqrt$8(t*t+i*i),o=n(s),f=sin$7(o),d=cos$8(o);return[atan2$5(t*f,s*d),asin$3(s&&i*f/s)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(n){return sqrt$8(2/(1+n))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(n){return 2*asin$3(n/2)});function geoAzimuthalEqualArea(){return projection$2(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180-.001)}var azimuthalEquidistantRaw=azimuthalRaw(function(n){return(n=acos$2(n))&&n/sin$7(n)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(n){return n});function geoAzimuthalEquidistant(){return projection$2(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function mercatorRaw(n,t){return[n,log$3(tan((halfPi$3+t)/2))]}mercatorRaw.invert=function(n,t){return[n,2*atan$1(exp$1(t))-halfPi$3]};function geoMercator(){return mercatorProjection(mercatorRaw).scale(961/tau$3)}function mercatorProjection(n){var t=projection$2(n),i=t.center,s=t.scale,o=t.translate,f=t.clipExtent,d=null,p,v,_;t.scale=function(P){return arguments.length?(s(P),k()):s()},t.translate=function(P){return arguments.length?(o(P),k()):o()},t.center=function(P){return arguments.length?(i(P),k()):i()},t.clipExtent=function(P){return arguments.length?(P==null?d=p=v=_=null:(d=+P[0][0],p=+P[0][1],v=+P[1][0],_=+P[1][1]),k()):d==null?null:[[d,p],[v,_]]};function k(){var P=pi$4*s(),L=t(rotation(t.rotate()).invert([0,0]));return f(d==null?[[L[0]-P,L[1]-P],[L[0]+P,L[1]+P]]:n===mercatorRaw?[[Math.max(L[0]-P,d),p],[Math.min(L[0]+P,v),_]]:[[d,Math.max(L[1]-P,p)],[v,Math.min(L[1]+P,_)]])}return k()}function tany(n){return tan((halfPi$3+n)/2)}function conicConformalRaw(n,t){var i=cos$8(n),s=n===t?sin$7(n):log$3(i/cos$8(t))/log$3(tany(t)/tany(n)),o=i*pow$8(tany(n),s)/s;if(!s)return mercatorRaw;function f(d,p){o>0?p<-halfPi$3+epsilon$6&&(p=-halfPi$3+epsilon$6):p>halfPi$3-epsilon$6&&(p=halfPi$3-epsilon$6);var v=o/pow$8(tany(p),s);return[v*sin$7(s*d),o-v*cos$8(s*d)]}return f.invert=function(d,p){var v=o-p,_=sign$1(s)*sqrt$8(d*d+v*v),k=atan2$5(d,abs$6(v))*sign$1(v);return v*s<0&&(k-=pi$4*sign$1(d)*sign$1(v)),[k/s,2*atan$1(pow$8(o/_,1/s))-halfPi$3]},f}function geoConicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(n,t){return[n,t]}equirectangularRaw.invert=equirectangularRaw;function geoEquirectangular(){return projection$2(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(n,t){var i=cos$8(n),s=n===t?sin$7(n):(i-cos$8(t))/(t-n),o=i/s+n;if(abs$6(s)<epsilon$6)return equirectangularRaw;function f(d,p){var v=o-p,_=s*d;return[v*sin$7(_),o-v*cos$8(_)]}return f.invert=function(d,p){var v=o-p,_=atan2$5(d,abs$6(v))*sign$1(v);return v*s<0&&(_-=pi$4*sign$1(d)*sign$1(v)),[_/s,o-sign$1(s)*sqrt$8(d*d+v*v)]},f}function geoConicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])}var A1$1=1.340264,A2$1=-.081106,A3$1=893e-6,A4$1=.003796,M$1=sqrt$8(3)/2,iterations=12;function equalEarthRaw(n,t){var i=asin$3(M$1*sin$7(t)),s=i*i,o=s*s*s;return[n*cos$8(i)/(M$1*(A1$1+3*A2$1*s+o*(7*A3$1+9*A4$1*s))),i*(A1$1+A2$1*s+o*(A3$1+A4$1*s))]}equalEarthRaw.invert=function(n,t){for(var i=t,s=i*i,o=s*s*s,f=0,d,p,v;f<iterations&&(p=i*(A1$1+A2$1*s+o*(A3$1+A4$1*s))-t,v=A1$1+3*A2$1*s+o*(7*A3$1+9*A4$1*s),i-=d=p/v,s=i*i,o=s*s*s,!(abs$6(d)<epsilon2$1));++f);return[M$1*n*(A1$1+3*A2$1*s+o*(7*A3$1+9*A4$1*s))/cos$8(i),asin$3(sin$7(i)/M$1)]};function geoEqualEarth(){return projection$2(equalEarthRaw).scale(177.158)}function gnomonicRaw(n,t){var i=cos$8(t),s=cos$8(n)*i;return[i*sin$7(n)/s,sin$7(t)/s]}gnomonicRaw.invert=azimuthalInvert(atan$1);function geoGnomonic(){return projection$2(gnomonicRaw).scale(144.049).clipAngle(60)}function geoIdentity(){var n=1,t=0,i=0,s=1,o=1,f=0,d,p,v=null,_,k,P,L=1,G=1,Z=transformer$1({point:function(De,le){var Ce=$e([De,le]);this.stream.point(Ce[0],Ce[1])}}),W=identity$1,j,H;function me(){return L=n*s,G=n*o,j=H=null,$e}function $e(De){var le=De[0]*L,Ce=De[1]*G;if(f){var Me=Ce*d-le*p;le=le*d+Ce*p,Ce=Me}return[le+t,Ce+i]}return $e.invert=function(De){var le=De[0]-t,Ce=De[1]-i;if(f){var Me=Ce*d+le*p;le=le*d-Ce*p,Ce=Me}return[le/L,Ce/G]},$e.stream=function(De){return j&&H===De?j:j=Z(W(H=De))},$e.postclip=function(De){return arguments.length?(W=De,v=_=k=P=null,me()):W},$e.clipExtent=function(De){return arguments.length?(W=De==null?(v=_=k=P=null,identity$1):clipRectangle$1(v=+De[0][0],_=+De[0][1],k=+De[1][0],P=+De[1][1]),me()):v==null?null:[[v,_],[k,P]]},$e.scale=function(De){return arguments.length?(n=+De,me()):n},$e.translate=function(De){return arguments.length?(t=+De[0],i=+De[1],me()):[t,i]},$e.angle=function(De){return arguments.length?(f=De%360*radians$3,p=sin$7(f),d=cos$8(f),me()):f*degrees$3},$e.reflectX=function(De){return arguments.length?(s=De?-1:1,me()):s<0},$e.reflectY=function(De){return arguments.length?(o=De?-1:1,me()):o<0},$e.fitExtent=function(De,le){return fitExtent$1($e,De,le)},$e.fitSize=function(De,le){return fitSize$1($e,De,le)},$e.fitWidth=function(De,le){return fitWidth$1($e,De,le)},$e.fitHeight=function(De,le){return fitHeight$1($e,De,le)},$e}function naturalEarth1Raw(n,t){var i=t*t,s=i*i;return[n*(.8707-.131979*i+s*(-.013791+s*(.003971*i-.001529*s))),t*(1.007226+i*(.015085+s*(-.044475+.028874*i-.005916*s)))]}naturalEarth1Raw.invert=function(n,t){var i=t,s=25,o;do{var f=i*i,d=f*f;i-=o=(i*(1.007226+f*(.015085+d*(-.044475+.028874*f-.005916*d)))-t)/(1.007226+f*(.015085*3+d*(-.044475*7+.028874*9*f-.005916*11*d)))}while(abs$6(o)>epsilon$6&&--s>0);return[n/(.8707+(f=i*i)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),i]};function geoNaturalEarth1(){return projection$2(naturalEarth1Raw).scale(175.295)}function orthographicRaw(n,t){return[cos$8(t)*sin$7(n),sin$7(t)]}orthographicRaw.invert=azimuthalInvert(asin$3);function geoOrthographic(){return projection$2(orthographicRaw).scale(249.5).clipAngle(90+epsilon$6)}function stereographicRaw(n,t){var i=cos$8(t),s=1+cos$8(n)*i;return[i*sin$7(n)/s,sin$7(t)/s]}stereographicRaw.invert=azimuthalInvert(function(n){return 2*atan$1(n)});function geoStereographic(){return projection$2(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(n,t){return[log$3(tan((halfPi$3+t)/2)),-n]}transverseMercatorRaw.invert=function(n,t){return[-t,2*atan$1(exp$1(n))-halfPi$3]};function geoTransverseMercator(){var n=mercatorProjection(transverseMercatorRaw),t=n.center,i=n.rotate;return n.center=function(s){return arguments.length?t([-s[1],s[0]]):(s=t(),[s[1],-s[0]])},n.rotate=function(s){return arguments.length?i([s[0],s[1],s.length>2?s[2]+90:90]):(s=i(),[s[0],s[1],s[2]-90])},i([0,0,90]).scale(159.155)}var epsilon$5=1e-6,pi$3=Math.PI,halfPi$2=pi$3/2,quarterPi$1=pi$3/4,tau$2=pi$3*2,degrees$2=180/pi$3,radians$2=pi$3/180,abs$5=Math.abs,atan=Math.atan,atan2$4=Math.atan2,cos$7=Math.cos,sin$6=Math.sin,sign=Math.sign||function(n){return n>0?1:n<0?-1:0},sqrt$7=Math.sqrt;function acos$1(n){return n>1?0:n<-1?pi$3:Math.acos(n)}function asin$2(n){return n>1?halfPi$2:n<-1?-halfPi$2:Math.asin(n)}function noop$3(){}function streamGeometry$1(n,t){n&&streamGeometryType$1.hasOwnProperty(n.type)&&streamGeometryType$1[n.type](n,t)}var streamObjectType$1={Feature:function(n,t){streamGeometry$1(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,s=-1,o=i.length;++s<o;)streamGeometry$1(i[s].geometry,t)}},streamGeometryType$1={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,s=-1,o=i.length;++s<o;)n=i[s],t.point(n[0],n[1],n[2])},LineString:function(n,t){streamLine$1(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,s=-1,o=i.length;++s<o;)streamLine$1(i[s],t,0)},Polygon:function(n,t){streamPolygon$1(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,s=-1,o=i.length;++s<o;)streamPolygon$1(i[s],t)},GeometryCollection:function(n,t){for(var i=n.geometries,s=-1,o=i.length;++s<o;)streamGeometry$1(i[s],t)}};function streamLine$1(n,t,i){var s=-1,o=n.length-i,f;for(t.lineStart();++s<o;)f=n[s],t.point(f[0],f[1],f[2]);t.lineEnd()}function streamPolygon$1(n,t){var i=-1,s=n.length;for(t.polygonStart();++i<s;)streamLine$1(n[i],t,1);t.polygonEnd()}function geoStream$1(n,t){n&&streamObjectType$1.hasOwnProperty(n.type)?streamObjectType$1[n.type](n,t):streamGeometry$1(n,t)}function spherical$1(n){return[atan2$4(n[1],n[0]),asin$2(n[2])]}function cartesian$1(n){var t=n[0],i=n[1],s=cos$7(i);return[s*cos$7(t),s*sin$6(t),sin$6(i)]}function cartesianDot(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function cartesianCross$1(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function cartesianAddInPlace(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function cartesianScale(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function cartesianNormalizeInPlace$1(n){var t=sqrt$7(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function compose(n,t){function i(s,o){return s=n(s,o),t(s[0],s[1])}return n.invert&&t.invert&&(i.invert=function(s,o){return s=t.invert(s,o),s&&n.invert(s[0],s[1])}),i}function rotationIdentity(n,t){return[abs$5(n)>pi$3?n+Math.round(-n/tau$2)*tau$2:n,t]}rotationIdentity.invert=rotationIdentity;function rotateRadians(n,t,i){return(n%=tau$2)?t||i?compose(rotationLambda(n),rotationPhiGamma(t,i)):rotationLambda(n):t||i?rotationPhiGamma(t,i):rotationIdentity}function forwardRotationLambda(n){return function(t,i){return t+=n,[t>pi$3?t-tau$2:t<-pi$3?t+tau$2:t,i]}}function rotationLambda(n){var t=forwardRotationLambda(n);return t.invert=forwardRotationLambda(-n),t}function rotationPhiGamma(n,t){var i=cos$7(n),s=sin$6(n),o=cos$7(t),f=sin$6(t);function d(p,v){var _=cos$7(v),k=cos$7(p)*_,P=sin$6(p)*_,L=sin$6(v),G=L*i+k*s;return[atan2$4(P*o-G*f,k*i-L*s),asin$2(G*o+P*f)]}return d.invert=function(p,v){var _=cos$7(v),k=cos$7(p)*_,P=sin$6(p)*_,L=sin$6(v),G=L*o-P*f;return[atan2$4(P*o+L*f,k*i+G*s),asin$2(G*i-k*s)]},d}function circleStream(n,t,i,s,o,f){if(i){var d=cos$7(t),p=sin$6(t),v=s*i;o==null?(o=t+s*tau$2,f=t-v/2):(o=circleRadius(d,o),f=circleRadius(d,f),(s>0?o<f:o>f)&&(o+=s*tau$2));for(var _,k=o;s>0?k>f:k<f;k-=v)_=spherical$1([d,-p*cos$7(k),-p*sin$6(k)]),n.point(_[0],_[1])}}function circleRadius(n,t){t=cartesian$1(t),t[0]-=n,cartesianNormalizeInPlace$1(t);var i=acos$1(-t[1]);return((-t[2]<0?-i:i)+tau$2-epsilon$5)%tau$2}function clipBuffer(){var n=[],t;return{point:function(i,s,o){t.push([i,s,o])},lineStart:function(){n.push(t=[])},lineEnd:noop$3,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function pointEqual(n,t){return abs$5(n[0]-t[0])<epsilon$5&&abs$5(n[1]-t[1])<epsilon$5}function Intersection(n,t,i,s){this.x=n,this.z=t,this.o=i,this.e=s,this.v=!1,this.n=this.p=null}function clipRejoin(n,t,i,s,o){var f=[],d=[],p,v;if(n.forEach(function(Z){if(!((W=Z.length-1)<=0)){var W,j=Z[0],H=Z[W],me;if(pointEqual(j,H)){if(!j[2]&&!H[2]){for(o.lineStart(),p=0;p<W;++p)o.point((j=Z[p])[0],j[1]);o.lineEnd();return}H[0]+=2*epsilon$5}f.push(me=new Intersection(j,Z,null,!0)),d.push(me.o=new Intersection(j,null,me,!1)),f.push(me=new Intersection(H,Z,null,!1)),d.push(me.o=new Intersection(H,null,me,!0))}}),!!f.length){for(d.sort(t),link(f),link(d),p=0,v=d.length;p<v;++p)d[p].e=i=!i;for(var _=f[0],k,P;;){for(var L=_,G=!0;L.v;)if((L=L.n)===_)return;k=L.z,o.lineStart();do{if(L.v=L.o.v=!0,L.e){if(G)for(p=0,v=k.length;p<v;++p)o.point((P=k[p])[0],P[1]);else s(L.x,L.n.x,1,o);L=L.n}else{if(G)for(k=L.p.z,p=k.length-1;p>=0;--p)o.point((P=k[p])[0],P[1]);else s(L.x,L.p.x,-1,o);L=L.p}L=L.o,k=L.z,G=!G}while(!L.v);o.lineEnd()}}}function link(n){if(t=n.length){for(var t,i=0,s=n[0],o;++i<t;)s.n=o=n[i],o.p=s,s=o;s.n=o=n[0],o.p=s}}function longitude(n){return abs$5(n[0])<=pi$3?n[0]:sign(n[0])*((abs$5(n[0])+pi$3)%tau$2-pi$3)}function polygonContains(n,t){var i=longitude(t),s=t[1],o=sin$6(s),f=[sin$6(i),-cos$7(i),0],d=0,p=0,v=new Adder$1;o===1?s=halfPi$2+epsilon$5:o===-1&&(s=-halfPi$2-epsilon$5);for(var _=0,k=n.length;_<k;++_)if(L=(P=n[_]).length)for(var P,L,G=P[L-1],Z=longitude(G),W=G[1]/2+quarterPi$1,j=sin$6(W),H=cos$7(W),me=0;me<L;++me,Z=De,j=Ce,H=Me,G=$e){var $e=P[me],De=longitude($e),le=$e[1]/2+quarterPi$1,Ce=sin$6(le),Me=cos$7(le),_n=De-Z,_i=_n>=0?1:-1,ll=_i*_n,_l=ll>pi$3,oa=j*Ce;if(v.add(atan2$4(oa*_i*sin$6(ll),H*Me+oa*cos$7(ll))),d+=_l?_n+_i*tau$2:_n,_l^Z>=i^De>=i){var Ru=cartesianCross$1(cartesian$1(G),cartesian$1($e));cartesianNormalizeInPlace$1(Ru);var ga=cartesianCross$1(f,Ru);cartesianNormalizeInPlace$1(ga);var _s=(_l^_n>=0?-1:1)*asin$2(ga[2]);(s>_s||s===_s&&(Ru[0]||Ru[1]))&&(p+=_l^_n>=0?1:-1)}}return(d<-1e-6||d<epsilon$5&&v<-1e-12)^p&1}function clip$1(n,t,i,s){return function(o){var f=t(o),d=clipBuffer(),p=t(d),v=!1,_,k,P,L={point:G,lineStart:W,lineEnd:j,polygonStart:function(){L.point=H,L.lineStart=me,L.lineEnd=$e,k=[],_=[]},polygonEnd:function(){L.point=G,L.lineStart=W,L.lineEnd=j,k=merge$2(k);var De=polygonContains(_,s);k.length?(v||(o.polygonStart(),v=!0),clipRejoin(k,compareIntersection,De,i,o)):De&&(v||(o.polygonStart(),v=!0),o.lineStart(),i(null,null,1,o),o.lineEnd()),v&&(o.polygonEnd(),v=!1),k=_=null},sphere:function(){o.polygonStart(),o.lineStart(),i(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function G(De,le){n(De,le)&&o.point(De,le)}function Z(De,le){f.point(De,le)}function W(){L.point=Z,f.lineStart()}function j(){L.point=G,f.lineEnd()}function H(De,le){P.push([De,le]),p.point(De,le)}function me(){p.lineStart(),P=[]}function $e(){H(P[0][0],P[0][1]),p.lineEnd();var De=p.clean(),le=d.result(),Ce,Me=le.length,_n,_i,ll;if(P.pop(),_.push(P),P=null,!!Me){if(De&1){if(_i=le[0],(_n=_i.length-1)>0){for(v||(o.polygonStart(),v=!0),o.lineStart(),Ce=0;Ce<_n;++Ce)o.point((ll=_i[Ce])[0],ll[1]);o.lineEnd()}return}Me>1&&De&2&&le.push(le.pop().concat(le.shift())),k.push(le.filter(validSegment))}}return L}}function validSegment(n){return n.length>1}function compareIntersection(n,t){return((n=n.x)[0]<0?n[1]-halfPi$2-epsilon$5:halfPi$2-n[1])-((t=t.x)[0]<0?t[1]-halfPi$2-epsilon$5:halfPi$2-t[1])}const clipAntimeridian=clip$1(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$3,-halfPi$2]);function clipAntimeridianLine(n){var t=NaN,i=NaN,s=NaN,o;return{lineStart:function(){n.lineStart(),o=1},point:function(f,d){var p=f>0?pi$3:-pi$3,v=abs$5(f-t);abs$5(v-pi$3)<epsilon$5?(n.point(t,i=(i+d)/2>0?halfPi$2:-halfPi$2),n.point(s,i),n.lineEnd(),n.lineStart(),n.point(p,i),n.point(f,i),o=0):s!==p&&v>=pi$3&&(abs$5(t-s)<epsilon$5&&(t-=s*epsilon$5),abs$5(f-p)<epsilon$5&&(f-=p*epsilon$5),i=clipAntimeridianIntersect(t,i,f,d),n.point(s,i),n.lineEnd(),n.lineStart(),n.point(p,i),o=0),n.point(t=f,i=d),s=p},lineEnd:function(){n.lineEnd(),t=i=NaN},clean:function(){return 2-o}}}function clipAntimeridianIntersect(n,t,i,s){var o,f,d=sin$6(n-i);return abs$5(d)>epsilon$5?atan((sin$6(t)*(f=cos$7(s))*sin$6(i)-sin$6(s)*(o=cos$7(t))*sin$6(n))/(o*f*d)):(t+s)/2}function clipAntimeridianInterpolate(n,t,i,s){var o;if(n==null)o=i*halfPi$2,s.point(-pi$3,o),s.point(0,o),s.point(pi$3,o),s.point(pi$3,0),s.point(pi$3,-o),s.point(0,-o),s.point(-pi$3,-o),s.point(-pi$3,0),s.point(-pi$3,o);else if(abs$5(n[0]-t[0])>epsilon$5){var f=n[0]<t[0]?pi$3:-pi$3;o=i*f/2,s.point(-f,o),s.point(0,o),s.point(f,o)}else s.point(t[0],t[1])}function clipCircle(n){var t=cos$7(n),i=6*radians$2,s=t>0,o=abs$5(t)>epsilon$5;function f(k,P,L,G){circleStream(G,n,i,L,k,P)}function d(k,P){return cos$7(k)*cos$7(P)>t}function p(k){var P,L,G,Z,W;return{lineStart:function(){Z=G=!1,W=1},point:function(j,H){var me=[j,H],$e,De=d(j,H),le=s?De?0:_(j,H):De?_(j+(j<0?pi$3:-pi$3),H):0;if(!P&&(Z=G=De)&&k.lineStart(),De!==G&&($e=v(P,me),(!$e||pointEqual(P,$e)||pointEqual(me,$e))&&(me[2]=1)),De!==G)W=0,De?(k.lineStart(),$e=v(me,P),k.point($e[0],$e[1])):($e=v(P,me),k.point($e[0],$e[1],2),k.lineEnd()),P=$e;else if(o&&P&&s^De){var Ce;!(le&L)&&(Ce=v(me,P,!0))&&(W=0,s?(k.lineStart(),k.point(Ce[0][0],Ce[0][1]),k.point(Ce[1][0],Ce[1][1]),k.lineEnd()):(k.point(Ce[1][0],Ce[1][1]),k.lineEnd(),k.lineStart(),k.point(Ce[0][0],Ce[0][1],3)))}De&&(!P||!pointEqual(P,me))&&k.point(me[0],me[1]),P=me,G=De,L=le},lineEnd:function(){G&&k.lineEnd(),P=null},clean:function(){return W|(Z&&G)<<1}}}function v(k,P,L){var G=cartesian$1(k),Z=cartesian$1(P),W=[1,0,0],j=cartesianCross$1(G,Z),H=cartesianDot(j,j),me=j[0],$e=H-me*me;if(!$e)return!L&&k;var De=t*H/$e,le=-t*me/$e,Ce=cartesianCross$1(W,j),Me=cartesianScale(W,De),_n=cartesianScale(j,le);cartesianAddInPlace(Me,_n);var _i=Ce,ll=cartesianDot(Me,_i),_l=cartesianDot(_i,_i),oa=ll*ll-_l*(cartesianDot(Me,Me)-1);if(!(oa<0)){var Ru=sqrt$7(oa),ga=cartesianScale(_i,(-ll-Ru)/_l);if(cartesianAddInPlace(ga,Me),ga=spherical$1(ga),!L)return ga;var _s=k[0],Sa=P[0],Ra=k[1],Da=P[1],Fa;Sa<_s&&(Fa=_s,_s=Sa,Sa=Fa);var Na=Sa-_s,_a=abs$5(Na-pi$3)<epsilon$5,Pa=_a||Na<epsilon$5;if(!_a&&Da<Ra&&(Fa=Ra,Ra=Da,Da=Fa),Pa?_a?Ra+Da>0^ga[1]<(abs$5(ga[0]-_s)<epsilon$5?Ra:Da):Ra<=ga[1]&&ga[1]<=Da:Na>pi$3^(_s<=ga[0]&&ga[0]<=Sa)){var qc=cartesianScale(_i,(-ll+Ru)/_l);return cartesianAddInPlace(qc,Me),[ga,spherical$1(qc)]}}}function _(k,P){var L=s?n:pi$3-n,G=0;return k<-L?G|=1:k>L&&(G|=2),P<-L?G|=4:P>L&&(G|=8),G}return clip$1(d,p,f,s?[0,-n]:[-pi$3,n-pi$3])}function clipLine(n,t,i,s,o,f){var d=n[0],p=n[1],v=t[0],_=t[1],k=0,P=1,L=v-d,G=_-p,Z;if(Z=i-d,!(!L&&Z>0)){if(Z/=L,L<0){if(Z<k)return;Z<P&&(P=Z)}else if(L>0){if(Z>P)return;Z>k&&(k=Z)}if(Z=o-d,!(!L&&Z<0)){if(Z/=L,L<0){if(Z>P)return;Z>k&&(k=Z)}else if(L>0){if(Z<k)return;Z<P&&(P=Z)}if(Z=s-p,!(!G&&Z>0)){if(Z/=G,G<0){if(Z<k)return;Z<P&&(P=Z)}else if(G>0){if(Z>P)return;Z>k&&(k=Z)}if(Z=f-p,!(!G&&Z<0)){if(Z/=G,G<0){if(Z>P)return;Z>k&&(k=Z)}else if(G>0){if(Z<k)return;Z<P&&(P=Z)}return k>0&&(n[0]=d+k*L,n[1]=p+k*G),P<1&&(t[0]=d+P*L,t[1]=p+P*G),!0}}}}}var clipMax=1e9,clipMin=-1e9;function clipRectangle(n,t,i,s){function o(_,k){return n<=_&&_<=i&&t<=k&&k<=s}function f(_,k,P,L){var G=0,Z=0;if(_==null||(G=d(_,P))!==(Z=d(k,P))||v(_,k)<0^P>0)do L.point(G===0||G===3?n:i,G>1?s:t);while((G=(G+P+4)%4)!==Z);else L.point(k[0],k[1])}function d(_,k){return abs$5(_[0]-n)<epsilon$5?k>0?0:3:abs$5(_[0]-i)<epsilon$5?k>0?2:1:abs$5(_[1]-t)<epsilon$5?k>0?1:0:k>0?3:2}function p(_,k){return v(_.x,k.x)}function v(_,k){var P=d(_,1),L=d(k,1);return P!==L?P-L:P===0?k[1]-_[1]:P===1?_[0]-k[0]:P===2?_[1]-k[1]:k[0]-_[0]}return function(_){var k=_,P=clipBuffer(),L,G,Z,W,j,H,me,$e,De,le,Ce,Me={point:_n,lineStart:oa,lineEnd:Ru,polygonStart:ll,polygonEnd:_l};function _n(_s,Sa){o(_s,Sa)&&k.point(_s,Sa)}function _i(){for(var _s=0,Sa=0,Ra=G.length;Sa<Ra;++Sa)for(var Da=G[Sa],Fa=1,Na=Da.length,_a=Da[0],Pa,qc,uf=_a[0],_h=_a[1];Fa<Na;++Fa)Pa=uf,qc=_h,_a=Da[Fa],uf=_a[0],_h=_a[1],qc<=s?_h>s&&(uf-Pa)*(s-qc)>(_h-qc)*(n-Pa)&&++_s:_h<=s&&(uf-Pa)*(s-qc)<(_h-qc)*(n-Pa)&&--_s;return _s}function ll(){k=P,L=[],G=[],Ce=!0}function _l(){var _s=_i(),Sa=Ce&&_s,Ra=(L=merge$2(L)).length;(Sa||Ra)&&(_.polygonStart(),Sa&&(_.lineStart(),f(null,null,1,_),_.lineEnd()),Ra&&clipRejoin(L,p,_s,f,_),_.polygonEnd()),k=_,L=G=Z=null}function oa(){Me.point=ga,G&&G.push(Z=[]),le=!0,De=!1,me=$e=NaN}function Ru(){L&&(ga(W,j),H&&De&&P.rejoin(),L.push(P.result())),Me.point=_n,De&&k.lineEnd()}function ga(_s,Sa){var Ra=o(_s,Sa);if(G&&Z.push([_s,Sa]),le)W=_s,j=Sa,H=Ra,le=!1,Ra&&(k.lineStart(),k.point(_s,Sa));else if(Ra&&De)k.point(_s,Sa);else{var Da=[me=Math.max(clipMin,Math.min(clipMax,me)),$e=Math.max(clipMin,Math.min(clipMax,$e))],Fa=[_s=Math.max(clipMin,Math.min(clipMax,_s)),Sa=Math.max(clipMin,Math.min(clipMax,Sa))];clipLine(Da,Fa,n,t,i,s)?(De||(k.lineStart(),k.point(Da[0],Da[1])),k.point(Fa[0],Fa[1]),Ra||k.lineEnd(),Ce=!1):Ra&&(k.lineStart(),k.point(_s,Sa),Ce=!1)}me=_s,$e=Sa,De=Ra}return Me}}const identity=n=>n;var x0$2=1/0,y0$2=x0$2,x1$1=-x0$2,y1$1=x1$1,boundsStream$1={point:boundsPoint$1,lineStart:noop$3,lineEnd:noop$3,polygonStart:noop$3,polygonEnd:noop$3,result:function(){var n=[[x0$2,y0$2],[x1$1,y1$1]];return x1$1=y1$1=-(y0$2=x0$2=1/0),n}};function boundsPoint$1(n,t){n<x0$2&&(x0$2=n),n>x1$1&&(x1$1=n),t<y0$2&&(y0$2=t),t>y1$1&&(y1$1=t)}function transformer(n){return function(t){var i=new TransformStream;for(var s in n)i[s]=n[s];return i.stream=t,i}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fit$1(n,t,i){var s=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),s!=null&&n.clipExtent(null),geoStream$1(i,n.stream(boundsStream$1)),t(boundsStream$1.result()),s!=null&&n.clipExtent(s),n}function fitExtent(n,t,i){return fit$1(n,function(s){var o=t[1][0]-t[0][0],f=t[1][1]-t[0][1],d=Math.min(o/(s[1][0]-s[0][0]),f/(s[1][1]-s[0][1])),p=+t[0][0]+(o-d*(s[1][0]+s[0][0]))/2,v=+t[0][1]+(f-d*(s[1][1]+s[0][1]))/2;n.scale(150*d).translate([p,v])},i)}function fitSize(n,t,i){return fitExtent(n,[[0,0],t],i)}function fitWidth(n,t,i){return fit$1(n,function(s){var o=+t,f=o/(s[1][0]-s[0][0]),d=(o-f*(s[1][0]+s[0][0]))/2,p=-f*s[0][1];n.scale(150*f).translate([d,p])},i)}function fitHeight(n,t,i){return fit$1(n,function(s){var o=+t,f=o/(s[1][1]-s[0][1]),d=-f*s[0][0],p=(o-f*(s[1][1]+s[0][1]))/2;n.scale(150*f).translate([d,p])},i)}var maxDepth=16,cosMinDistance=cos$7(30*radians$2);function resample(n,t){return+t?resample$1(n,t):resampleNone(n)}function resampleNone(n){return transformer({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function resample$1(n,t){function i(s,o,f,d,p,v,_,k,P,L,G,Z,W,j){var H=_-s,me=k-o,$e=H*H+me*me;if($e>4*t&&W--){var De=d+L,le=p+G,Ce=v+Z,Me=sqrt$7(De*De+le*le+Ce*Ce),_n=asin$2(Ce/=Me),_i=abs$5(abs$5(Ce)-1)<epsilon$5||abs$5(f-P)<epsilon$5?(f+P)/2:atan2$4(le,De),ll=n(_i,_n),_l=ll[0],oa=ll[1],Ru=_l-s,ga=oa-o,_s=me*Ru-H*ga;(_s*_s/$e>t||abs$5((H*Ru+me*ga)/$e-.5)>.3||d*L+p*G+v*Z<cosMinDistance)&&(i(s,o,f,d,p,v,_l,oa,_i,De/=Me,le/=Me,Ce,W,j),j.point(_l,oa),i(_l,oa,_i,De,le,Ce,_,k,P,L,G,Z,W,j))}}return function(s){var o,f,d,p,v,_,k,P,L,G,Z,W,j={point:H,lineStart:me,lineEnd:De,polygonStart:function(){s.polygonStart(),j.lineStart=le},polygonEnd:function(){s.polygonEnd(),j.lineStart=me}};function H(_n,_i){_n=n(_n,_i),s.point(_n[0],_n[1])}function me(){P=NaN,j.point=$e,s.lineStart()}function $e(_n,_i){var ll=cartesian$1([_n,_i]),_l=n(_n,_i);i(P,L,k,G,Z,W,P=_l[0],L=_l[1],k=_n,G=ll[0],Z=ll[1],W=ll[2],maxDepth,s),s.point(P,L)}function De(){j.point=H,s.lineEnd()}function le(){me(),j.point=Ce,j.lineEnd=Me}function Ce(_n,_i){$e(o=_n,_i),f=P,d=L,p=G,v=Z,_=W,j.point=$e}function Me(){i(P,L,k,G,Z,W,f,d,o,p,v,_,maxDepth,s),j.lineEnd=De,De()}return j}}var transformRadians=transformer({point:function(n,t){this.stream.point(n*radians$2,t*radians$2)}});function transformRotate(n){return transformer({point:function(t,i){var s=n(t,i);return this.stream.point(s[0],s[1])}})}function scaleTranslate(n,t,i,s,o){function f(d,p){return d*=s,p*=o,[t+n*d,i-n*p]}return f.invert=function(d,p){return[(d-t)/n*s,(i-p)/n*o]},f}function scaleTranslateRotate(n,t,i,s,o,f){if(!f)return scaleTranslate(n,t,i,s,o);var d=cos$7(f),p=sin$6(f),v=d*n,_=p*n,k=d/n,P=p/n,L=(p*i-d*t)/n,G=(p*t+d*i)/n;function Z(W,j){return W*=s,j*=o,[v*W-_*j+t,i-_*W-v*j]}return Z.invert=function(W,j){return[s*(k*W-P*j+L),o*(G-P*W-k*j)]},Z}function projection$1(n){return projectionMutator(function(){return n})()}function projectionMutator(n){var t,i=150,s=480,o=250,f=0,d=0,p=0,v=0,_=0,k,P=0,L=1,G=1,Z=null,W=clipAntimeridian,j=null,H,me,$e,De=identity,le=.5,Ce,Me,_n,_i,ll;function _l(_s){return _n(_s[0]*radians$2,_s[1]*radians$2)}function oa(_s){return _s=_n.invert(_s[0],_s[1]),_s&&[_s[0]*degrees$2,_s[1]*degrees$2]}_l.stream=function(_s){return _i&&ll===_s?_i:_i=transformRadians(transformRotate(k)(W(Ce(De(ll=_s)))))},_l.preclip=function(_s){return arguments.length?(W=_s,Z=void 0,ga()):W},_l.postclip=function(_s){return arguments.length?(De=_s,j=H=me=$e=null,ga()):De},_l.clipAngle=function(_s){return arguments.length?(W=+_s?clipCircle(Z=_s*radians$2):(Z=null,clipAntimeridian),ga()):Z*degrees$2},_l.clipExtent=function(_s){return arguments.length?(De=_s==null?(j=H=me=$e=null,identity):clipRectangle(j=+_s[0][0],H=+_s[0][1],me=+_s[1][0],$e=+_s[1][1]),ga()):j==null?null:[[j,H],[me,$e]]},_l.scale=function(_s){return arguments.length?(i=+_s,Ru()):i},_l.translate=function(_s){return arguments.length?(s=+_s[0],o=+_s[1],Ru()):[s,o]},_l.center=function(_s){return arguments.length?(f=_s[0]%360*radians$2,d=_s[1]%360*radians$2,Ru()):[f*degrees$2,d*degrees$2]},_l.rotate=function(_s){return arguments.length?(p=_s[0]%360*radians$2,v=_s[1]%360*radians$2,_=_s.length>2?_s[2]%360*radians$2:0,Ru()):[p*degrees$2,v*degrees$2,_*degrees$2]},_l.angle=function(_s){return arguments.length?(P=_s%360*radians$2,Ru()):P*degrees$2},_l.reflectX=function(_s){return arguments.length?(L=_s?-1:1,Ru()):L<0},_l.reflectY=function(_s){return arguments.length?(G=_s?-1:1,Ru()):G<0},_l.precision=function(_s){return arguments.length?(Ce=resample(Me,le=_s*_s),ga()):sqrt$7(le)},_l.fitExtent=function(_s,Sa){return fitExtent(_l,_s,Sa)},_l.fitSize=function(_s,Sa){return fitSize(_l,_s,Sa)},_l.fitWidth=function(_s,Sa){return fitWidth(_l,_s,Sa)},_l.fitHeight=function(_s,Sa){return fitHeight(_l,_s,Sa)};function Ru(){var _s=scaleTranslateRotate(i,0,0,L,G,P).apply(null,t(f,d)),Sa=scaleTranslateRotate(i,s-_s[0],o-_s[1],L,G,P);return k=rotateRadians(p,v,_),Me=compose(t,Sa),_n=compose(k,Me),Ce=resample(Me,le),ga()}function ga(){return _i=ll=null,_l}return function(){return t=n.apply(this,arguments),_l.invert=t.invert&&oa,Ru()}}var abs$4=Math.abs,cos$6=Math.cos,sin$5=Math.sin,epsilon$4=1e-6,pi$2=Math.PI,halfPi$1=pi$2/2,sqrt2=sqrt$6(2);function asin$1(n){return n>1?halfPi$1:n<-1?-halfPi$1:Math.asin(n)}function sqrt$6(n){return n>0?Math.sqrt(n):0}function mollweideBromleyTheta(n,t){var i=n*sin$5(t),s=30,o;do t-=o=(t+sin$5(t)-i)/(1+cos$6(t));while(abs$4(o)>epsilon$4&&--s>0);return t/2}function mollweideBromleyRaw(n,t,i){function s(o,f){return[n*o*cos$6(f=mollweideBromleyTheta(i,f)),t*sin$5(f)]}return s.invert=function(o,f){return f=asin$1(f/t),[o/(n*cos$6(f)),asin$1((2*f+sin$5(2*f))/i)]},s}var mollweideRaw=mollweideBromleyRaw(sqrt2/halfPi$1,sqrt2,pi$2);function geoMollweide(){return projection$1(mollweideRaw).scale(169.529)}const defaultPath=geoPath(),projectionProperties=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function create$1(n,t){return function i(){const s=t();return s.type=n,s.path=geoPath().projection(s),s.copy=s.copy||function(){const o=i();return projectionProperties.forEach(f=>{s[f]&&o[f](s[f]())}),o.path.pointRadius(s.path.pointRadius()),o},registerScale(s)}}function projection(n,t){if(!n||typeof n!="string")throw new Error("Projection type must be a name string.");return n=n.toLowerCase(),arguments.length>1?(projections[n]=create$1(n,t),this):projections[n]||null}function getProjectionPath(n){return n&&n.path||defaultPath}const projections={albers:geoAlbers,albersusa:geoAlbersUsa,azimuthalequalarea:geoAzimuthalEqualArea,azimuthalequidistant:geoAzimuthalEquidistant,conicconformal:geoConicConformal,conicequalarea:geoConicEqualArea,conicequidistant:geoConicEquidistant,equalEarth:geoEqualEarth,equirectangular:geoEquirectangular,gnomonic:geoGnomonic,identity:geoIdentity,mercator:geoMercator,mollweide:geoMollweide,naturalEarth1:geoNaturalEarth1,orthographic:geoOrthographic,stereographic:geoStereographic,transversemercator:geoTransverseMercator};for(const n in projections)projection(n,projections[n]);var epsilon$3=1e-6,abs$3=Math.abs,ceil=Math.ceil;function graticuleX(n,t,i){var s=range$6(n,t-epsilon$3,i).concat(t);return function(o){return s.map(function(f){return[o,f]})}}function graticuleY(n,t,i){var s=range$6(n,t-epsilon$3,i).concat(t);return function(o){return s.map(function(f){return[f,o]})}}function graticule(){var n,t,i,s,o,f,d,p,v=10,_=v,k=90,P=360,L,G,Z,W,j=2.5;function H(){return{type:"MultiLineString",coordinates:me()}}function me(){return range$6(ceil(s/k)*k,i,k).map(Z).concat(range$6(ceil(p/P)*P,d,P).map(W)).concat(range$6(ceil(t/v)*v,n,v).filter(function($e){return abs$3($e%k)>epsilon$3}).map(L)).concat(range$6(ceil(f/_)*_,o,_).filter(function($e){return abs$3($e%P)>epsilon$3}).map(G))}return H.lines=function(){return me().map(function($e){return{type:"LineString",coordinates:$e}})},H.outline=function(){return{type:"Polygon",coordinates:[Z(s).concat(W(d).slice(1),Z(i).reverse().slice(1),W(p).reverse().slice(1))]}},H.extent=function($e){return arguments.length?H.extentMajor($e).extentMinor($e):H.extentMinor()},H.extentMajor=function($e){return arguments.length?(s=+$e[0][0],i=+$e[1][0],p=+$e[0][1],d=+$e[1][1],s>i&&($e=s,s=i,i=$e),p>d&&($e=p,p=d,d=$e),H.precision(j)):[[s,p],[i,d]]},H.extentMinor=function($e){return arguments.length?(t=+$e[0][0],n=+$e[1][0],f=+$e[0][1],o=+$e[1][1],t>n&&($e=t,t=n,n=$e),f>o&&($e=f,f=o,o=$e),H.precision(j)):[[t,f],[n,o]]},H.step=function($e){return arguments.length?H.stepMajor($e).stepMinor($e):H.stepMinor()},H.stepMajor=function($e){return arguments.length?(k=+$e[0],P=+$e[1],H):[k,P]},H.stepMinor=function($e){return arguments.length?(v=+$e[0],_=+$e[1],H):[v,_]},H.precision=function($e){return arguments.length?(j=+$e,L=graticuleX(f,o,90),G=graticuleY(t,n,j),Z=graticuleX(p,d,90),W=graticuleY(s,i,j),H):j},H.extentMajor([[-180,-90+epsilon$3],[180,90-epsilon$3]]).extentMinor([[-180,-80-epsilon$3],[180,80+epsilon$3]])}function define$1(n,t,i){n.prototype=t.prototype=i,i.constructor=n}function extend$1(n,t){var i=Object.create(n.prototype);for(var s in t)i[s]=t[s];return i}function Color$2(){}var darker$1=.7,brighter$1=1/darker$1,reI$1="\\s*([+-]?\\d+)\\s*",reN$1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP$1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex$1=/^#([0-9a-f]{3,8})$/,reRgbInteger$1=new RegExp(`^rgb\\(${reI$1},${reI$1},${reI$1}\\)$`),reRgbPercent$1=new RegExp(`^rgb\\(${reP$1},${reP$1},${reP$1}\\)$`),reRgbaInteger$1=new RegExp(`^rgba\\(${reI$1},${reI$1},${reI$1},${reN$1}\\)$`),reRgbaPercent$1=new RegExp(`^rgba\\(${reP$1},${reP$1},${reP$1},${reN$1}\\)$`),reHslPercent$1=new RegExp(`^hsl\\(${reN$1},${reP$1},${reP$1}\\)$`),reHslaPercent$1=new RegExp(`^hsla\\(${reN$1},${reP$1},${reP$1},${reN$1}\\)$`),named$1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define$1(Color$2,color$3,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:color_formatHex$1,formatHex:color_formatHex$1,formatHex8:color_formatHex8$1,formatHsl:color_formatHsl$1,formatRgb:color_formatRgb$1,toString:color_formatRgb$1});function color_formatHex$1(){return this.rgb().formatHex()}function color_formatHex8$1(){return this.rgb().formatHex8()}function color_formatHsl$1(){return hslConvert$1(this).formatHsl()}function color_formatRgb$1(){return this.rgb().formatRgb()}function color$3(n){var t,i;return n=(n+"").trim().toLowerCase(),(t=reHex$1.exec(n))?(i=t[1].length,t=parseInt(t[1],16),i===6?rgbn$1(t):i===3?new Rgb$1(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?rgba$1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?rgba$1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger$1.exec(n))?new Rgb$1(t[1],t[2],t[3],1):(t=reRgbPercent$1.exec(n))?new Rgb$1(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger$1.exec(n))?rgba$1(t[1],t[2],t[3],t[4]):(t=reRgbaPercent$1.exec(n))?rgba$1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent$1.exec(n))?hsla$1(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent$1.exec(n))?hsla$1(t[1],t[2]/100,t[3]/100,t[4]):named$1.hasOwnProperty(n)?rgbn$1(named$1[n]):n==="transparent"?new Rgb$1(NaN,NaN,NaN,0):null}function rgbn$1(n){return new Rgb$1(n>>16&255,n>>8&255,n&255,1)}function rgba$1(n,t,i,s){return s<=0&&(n=t=i=NaN),new Rgb$1(n,t,i,s)}function rgbConvert$1(n){return n instanceof Color$2||(n=color$3(n)),n?(n=n.rgb(),new Rgb$1(n.r,n.g,n.b,n.opacity)):new Rgb$1}function rgb$3(n,t,i,s){return arguments.length===1?rgbConvert$1(n):new Rgb$1(n,t,i,s??1)}function Rgb$1(n,t,i,s){this.r=+n,this.g=+t,this.b=+i,this.opacity=+s}define$1(Rgb$1,rgb$3,extend$1(Color$2,{brighter(n){return n=n==null?brighter$1:Math.pow(brighter$1,n),new Rgb$1(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?darker$1:Math.pow(darker$1,n),new Rgb$1(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Rgb$1(clampi$1(this.r),clampi$1(this.g),clampi$1(this.b),clampa$1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex$1,formatHex:rgb_formatHex$1,formatHex8:rgb_formatHex8$1,formatRgb:rgb_formatRgb$1,toString:rgb_formatRgb$1}));function rgb_formatHex$1(){return`#${hex$2(this.r)}${hex$2(this.g)}${hex$2(this.b)}`}function rgb_formatHex8$1(){return`#${hex$2(this.r)}${hex$2(this.g)}${hex$2(this.b)}${hex$2((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb$1(){const n=clampa$1(this.opacity);return`${n===1?"rgb(":"rgba("}${clampi$1(this.r)}, ${clampi$1(this.g)}, ${clampi$1(this.b)}${n===1?")":`, ${n})`}`}function clampa$1(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function clampi$1(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function hex$2(n){return n=clampi$1(n),(n<16?"0":"")+n.toString(16)}function hsla$1(n,t,i,s){return s<=0?n=t=i=NaN:i<=0||i>=1?n=t=NaN:t<=0&&(n=NaN),new Hsl$1(n,t,i,s)}function hslConvert$1(n){if(n instanceof Hsl$1)return new Hsl$1(n.h,n.s,n.l,n.opacity);if(n instanceof Color$2||(n=color$3(n)),!n)return new Hsl$1;if(n instanceof Hsl$1)return n;n=n.rgb();var t=n.r/255,i=n.g/255,s=n.b/255,o=Math.min(t,i,s),f=Math.max(t,i,s),d=NaN,p=f-o,v=(f+o)/2;return p?(t===f?d=(i-s)/p+(i<s)*6:i===f?d=(s-t)/p+2:d=(t-i)/p+4,p/=v<.5?f+o:2-f-o,d*=60):p=v>0&&v<1?0:d,new Hsl$1(d,p,v,n.opacity)}function hsl$3(n,t,i,s){return arguments.length===1?hslConvert$1(n):new Hsl$1(n,t,i,s??1)}function Hsl$1(n,t,i,s){this.h=+n,this.s=+t,this.l=+i,this.opacity=+s}define$1(Hsl$1,hsl$3,extend$1(Color$2,{brighter(n){return n=n==null?brighter$1:Math.pow(brighter$1,n),new Hsl$1(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?darker$1:Math.pow(darker$1,n),new Hsl$1(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,i=this.l,s=i+(i<.5?i:1-i)*t,o=2*i-s;return new Rgb$1(hsl2rgb$2(n>=240?n-240:n+120,o,s),hsl2rgb$2(n,o,s),hsl2rgb$2(n<120?n+240:n-120,o,s),this.opacity)},clamp(){return new Hsl$1(clamph$1(this.h),clampt$1(this.s),clampt$1(this.l),clampa$1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=clampa$1(this.opacity);return`${n===1?"hsl(":"hsla("}${clamph$1(this.h)}, ${clampt$1(this.s)*100}%, ${clampt$1(this.l)*100}%${n===1?")":`, ${n})`}`}}));function clamph$1(n){return n=(n||0)%360,n<0?n+360:n}function clampt$1(n){return Math.max(0,Math.min(1,n||0))}function hsl2rgb$2(n,t,i){return(n<60?t+(i-t)*n/60:n<180?i:n<240?t+(i-t)*(240-n)/60:t)*255}function noop$2(){}const cases=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function contours(){var n=1,t=1,i=p;function s(v,_){return _.map(k=>o(v,k))}function o(v,_){var k=[],P=[];return f(v,_,L=>{i(L,v,_),area$1(L)>0?k.push([L]):P.push(L)}),P.forEach(L=>{for(var G=0,Z=k.length,W;G<Z;++G)if(contains$1((W=k[G])[0],L)!==-1){W.push(L);return}}),{type:"MultiPolygon",value:_,coordinates:k}}function f(v,_,k){var P=[],L=[],G,Z,W,j,H,me;for(G=Z=-1,j=v[0]>=_,cases[j<<1].forEach($e);++G<n-1;)W=j,j=v[G+1]>=_,cases[W|j<<1].forEach($e);for(cases[j<<0].forEach($e);++Z<t-1;){for(G=-1,j=v[Z*n+n]>=_,H=v[Z*n]>=_,cases[j<<1|H<<2].forEach($e);++G<n-1;)W=j,j=v[Z*n+n+G+1]>=_,me=H,H=v[Z*n+G+1]>=_,cases[W|j<<1|H<<2|me<<3].forEach($e);cases[j|H<<3].forEach($e)}for(G=-1,H=v[Z*n]>=_,cases[H<<2].forEach($e);++G<n-1;)me=H,H=v[Z*n+G+1]>=_,cases[H<<2|me<<3].forEach($e);cases[H<<3].forEach($e);function $e(De){var le=[De[0][0]+G,De[0][1]+Z],Ce=[De[1][0]+G,De[1][1]+Z],Me=d(le),_n=d(Ce),_i,ll;(_i=L[Me])?(ll=P[_n])?(delete L[_i.end],delete P[ll.start],_i===ll?(_i.ring.push(Ce),k(_i.ring)):P[_i.start]=L[ll.end]={start:_i.start,end:ll.end,ring:_i.ring.concat(ll.ring)}):(delete L[_i.end],_i.ring.push(Ce),L[_i.end=_n]=_i):(_i=P[_n])?(ll=L[Me])?(delete P[_i.start],delete L[ll.end],_i===ll?(_i.ring.push(Ce),k(_i.ring)):P[ll.start]=L[_i.end]={start:ll.start,end:_i.end,ring:ll.ring.concat(_i.ring)}):(delete P[_i.start],_i.ring.unshift(le),P[_i.start=Me]=_i):P[Me]=L[_n]={start:Me,end:_n,ring:[le,Ce]}}}function d(v){return v[0]*2+v[1]*(n+1)*4}function p(v,_,k){v.forEach(P=>{var L=P[0],G=P[1],Z=L|0,W=G|0,j,H=_[W*n+Z];L>0&&L<n&&Z===L&&(j=_[W*n+Z-1],P[0]=L+(k-j)/(H-j)-.5),G>0&&G<t&&W===G&&(j=_[(W-1)*n+Z],P[1]=G+(k-j)/(H-j)-.5)})}return s.contour=o,s.size=function(v){if(!arguments.length)return[n,t];var _=Math.floor(v[0]),k=Math.floor(v[1]);return _>=0&&k>=0||error$1("invalid size"),n=_,t=k,s},s.smooth=function(v){return arguments.length?(i=v?p:noop$2,s):i===p},s}function area$1(n){for(var t=0,i=n.length,s=n[i-1][1]*n[0][0]-n[i-1][0]*n[0][1];++t<i;)s+=n[t-1][1]*n[t][0]-n[t-1][0]*n[t][1];return s}function contains$1(n,t){for(var i=-1,s=t.length,o;++i<s;)if(o=ringContains(n,t[i]))return o;return 0}function ringContains(n,t){for(var i=t[0],s=t[1],o=-1,f=0,d=n.length,p=d-1;f<d;p=f++){var v=n[f],_=v[0],k=v[1],P=n[p],L=P[0],G=P[1];if(segmentContains(v,P,t))return 0;k>s!=G>s&&i<(L-_)*(s-k)/(G-k)+_&&(o=-o)}return o}function segmentContains(n,t,i){var s;return collinear$1(n,t,i)&&within(n[s=+(n[0]===t[0])],i[s],t[s])}function collinear$1(n,t,i){return(t[0]-n[0])*(i[1]-n[1])===(i[0]-n[0])*(t[1]-n[1])}function within(n,t,i){return n<=t&&t<=i||i<=t&&t<=n}function quantize(n,t,i){return function(s){var o=extent(s),f=i?Math.min(o[0],0):o[0],d=o[1],p=d-f,v=t?tickStep$1(f,d,n):p/(n+1);return range$6(f+v,d,v)}}function Isocontour(n){Transform.call(this,null,n)}Isocontour.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};inherits(Isocontour,Transform,{transform(n,t){if(this.value&&!t.changed()&&!n.modified())return t.StopPropagation;var i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=t.materialize(t.SOURCE).source,o=n.field||identity$7,f=contours().smooth(n.smooth!==!1),d=n.thresholds||levels(s,o,n),p=n.as===null?null:n.as||"contour",v=[];return s.forEach(_=>{const k=o(_),P=f.size([k.width,k.height])(k.values,isArray(d)?d:d(k.values));transformPaths(P,k,_,n),P.forEach(L=>{v.push(rederive(_,ingest$1(p!=null?{[p]:L}:L)))})}),this.value&&(i.rem=this.value),this.value=i.source=i.add=v,i}});function levels(n,t,i){const s=quantize(i.levels||10,i.nice,i.zero!==!1);return i.resolve!=="shared"?s:s(n.map(o=>max$5(t(o).values)))}function transformPaths(n,t,i,s){let o=s.scale||t.scale,f=s.translate||t.translate;if(isFunction$1(o)&&(o=o(i,s)),isFunction$1(f)&&(f=f(i,s)),(o===1||o==null)&&!f)return;const d=(isNumber$1(o)?o:o[0])||1,p=(isNumber$1(o)?o:o[1])||1,v=f&&f[0]||0,_=f&&f[1]||0;n.forEach(transform$1(t,d,p,v,_))}function transform$1(n,t,i,s,o){const f=n.x1||0,d=n.y1||0,p=t*i<0;function v(P){P.forEach(_)}function _(P){p&&P.reverse(),P.forEach(k)}function k(P){P[0]=(P[0]-f)*t+s,P[1]=(P[1]-d)*i+o}return function(P){return P.coordinates.forEach(v),P}}function radius(n,t,i){const s=n>=0?n:estimateBandwidth(t,i);return Math.round((Math.sqrt(4*s*s+1)-1)/2)}function number$3(n){return isFunction$1(n)?n:constant$6(+n)}function density2D(){var n=v=>v[0],t=v=>v[1],i=one$3,s=[-1,-1],o=960,f=500,d=2;function p(v,_){const k=radius(s[0],v,n)>>d,P=radius(s[1],v,t)>>d,L=k?k+2:0,G=P?P+2:0,Z=2*L+(o>>d),W=2*G+(f>>d),j=new Float32Array(Z*W),H=new Float32Array(Z*W);let me=j;v.forEach(De=>{const le=L+(+n(De)>>d),Ce=G+(+t(De)>>d);le>=0&&le<Z&&Ce>=0&&Ce<W&&(j[le+Ce*Z]+=+i(De))}),k>0&&P>0?(blurX(Z,W,j,H,k),blurY(Z,W,H,j,P),blurX(Z,W,j,H,k),blurY(Z,W,H,j,P),blurX(Z,W,j,H,k),blurY(Z,W,H,j,P)):k>0?(blurX(Z,W,j,H,k),blurX(Z,W,H,j,k),blurX(Z,W,j,H,k),me=H):P>0&&(blurY(Z,W,j,H,P),blurY(Z,W,H,j,P),blurY(Z,W,j,H,P),me=H);const $e=_?Math.pow(2,-2*d):1/sum$1(me);for(let De=0,le=Z*W;De<le;++De)me[De]*=$e;return{values:me,scale:1<<d,width:Z,height:W,x1:L,y1:G,x2:L+(o>>d),y2:G+(f>>d)}}return p.x=function(v){return arguments.length?(n=number$3(v),p):n},p.y=function(v){return arguments.length?(t=number$3(v),p):t},p.weight=function(v){return arguments.length?(i=number$3(v),p):i},p.size=function(v){if(!arguments.length)return[o,f];var _=+v[0],k=+v[1];return _>=0&&k>=0||error$1("invalid size"),o=_,f=k,p},p.cellSize=function(v){return arguments.length?((v=+v)>=1||error$1("invalid cell size"),d=Math.floor(Math.log(v)/Math.LN2),p):1<<d},p.bandwidth=function(v){return arguments.length?(v=array$5(v),v.length===1&&(v=[+v[0],+v[0]]),v.length!==2&&error$1("invalid bandwidth"),s=v,p):s},p}function blurX(n,t,i,s,o){const f=(o<<1)+1;for(let d=0;d<t;++d)for(let p=0,v=0;p<n+o;++p)p<n&&(v+=i[p+d*n]),p>=o&&(p>=f&&(v-=i[p-f+d*n]),s[p-o+d*n]=v/Math.min(p+1,n-1+f-p,f))}function blurY(n,t,i,s,o){const f=(o<<1)+1;for(let d=0;d<n;++d)for(let p=0,v=0;p<t+o;++p)p<t&&(v+=i[d+p*n]),p>=o&&(p>=f&&(v-=i[d+(p-f)*n]),s[d+(p-o)*n]=v/Math.min(p+1,t-1+f-p,f))}function KDE2D(n){Transform.call(this,null,n)}KDE2D.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const PARAMS=["x","y","weight","size","cellSize","bandwidth"];function params(n,t){return PARAMS.forEach(i=>t[i]!=null?n[i](t[i]):0),n}inherits(KDE2D,Transform,{transform(n,t){if(this.value&&!t.changed()&&!n.modified())return t.StopPropagation;var i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=t.materialize(t.SOURCE).source,o=partition$2(s,n.groupby),f=(n.groupby||[]).map(accessorName),d=params(density2D(),n),p=n.as||"grid",v=[];function _(k,P){for(let L=0;L<f.length;++L)k[f[L]]=P[L];return k}return v=o.map(k=>ingest$1(_({[p]:d(k,n.counts)},k.dims))),this.value&&(i.rem=this.value),this.value=i.source=i.add=v,i}});function partition$2(n,t){var i=[],s=k=>k(p),o,f,d,p,v,_;if(t==null)i.push(n);else for(o={},f=0,d=n.length;f<d;++f)p=n[f],v=t.map(s),_=o[v],_||(o[v]=_=[],_.dims=v,i.push(_)),_.push(p);return i}function Contour(n){Transform.call(this,null,n)}Contour.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};inherits(Contour,Transform,{transform(n,t){if(this.value&&!t.changed()&&!n.modified())return t.StopPropagation;var i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=contours().smooth(n.smooth!==!1),o=n.values,f=n.thresholds||quantize(n.count||10,n.nice,!!o),d=n.size,p,v;return o||(o=t.materialize(t.SOURCE).source,p=params(density2D(),n)(o,!0),v=transform$1(p,p.scale||1,p.scale||1,0,0),d=[p.width,p.height],o=p.values),f=isArray(f)?f:f(o),o=s.size(d)(o,f),v&&o.forEach(v),this.value&&(i.rem=this.value),this.value=i.source=i.add=(o||[]).map(ingest$1),i}});const Feature="Feature",FeatureCollection="FeatureCollection",MultiPoint="MultiPoint";function GeoJSON(n){Transform.call(this,null,n)}GeoJSON.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};inherits(GeoJSON,Transform,{transform(n,t){var i=this._features,s=this._points,o=n.fields,f=o&&o[0],d=o&&o[1],p=n.geojson||!o&&identity$7,v=t.ADD,_;_=n.modified()||t.changed(t.REM)||t.modified(accessorFields(p))||f&&t.modified(accessorFields(f))||d&&t.modified(accessorFields(d)),(!this.value||_)&&(v=t.SOURCE,this._features=i=[],this._points=s=[]),p&&t.visit(v,k=>i.push(p(k))),f&&d&&(t.visit(v,k=>{var P=f(k),L=d(k);P!=null&&L!=null&&(P=+P)===P&&(L=+L)===L&&s.push([P,L])}),i=i.concat({type:Feature,geometry:{type:MultiPoint,coordinates:s}})),this.value={type:FeatureCollection,features:i}}});function GeoPath(n){Transform.call(this,null,n)}GeoPath.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};inherits(GeoPath,Transform,{transform(n,t){var i=t.fork(t.ALL),s=this.value,o=n.field||identity$7,f=n.as||"path",d=i.SOURCE;!s||n.modified()?(this.value=s=getProjectionPath(n.projection),i.materialize().reflow()):d=o===identity$7||t.modified(o.fields)?i.ADD_MOD:i.ADD;const p=initPath(s,n.pointRadius);return i.visit(d,v=>v[f]=s(o(v))),s.pointRadius(p),i.modifies(f)}});function initPath(n,t){const i=n.pointRadius();return n.context(null),t!=null&&n.pointRadius(t),i}function GeoPoint(n){Transform.call(this,null,n)}GeoPoint.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};inherits(GeoPoint,Transform,{transform(n,t){var i=n.projection,s=n.fields[0],o=n.fields[1],f=n.as||["x","y"],d=f[0],p=f[1],v;function _(k){const P=i([s(k),o(k)]);P?(k[d]=P[0],k[p]=P[1]):(k[d]=void 0,k[p]=void 0)}return n.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,_):(v=t.modified(s.fields)||t.modified(o.fields),t.visit(v?t.ADD_MOD:t.ADD,_)),t.modifies(f)}});function GeoShape(n){Transform.call(this,null,n)}GeoShape.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};inherits(GeoShape,Transform,{transform(n,t){var i=t.fork(t.ALL),s=this.value,o=n.as||"shape",f=i.ADD;return(!s||n.modified())&&(this.value=s=shapeGenerator(getProjectionPath(n.projection),n.field||field$1("datum"),n.pointRadius),i.materialize().reflow(),f=i.SOURCE),i.visit(f,d=>d[o]=s),i.modifies(o)}});function shapeGenerator(n,t,i){const s=i==null?o=>n(t(o)):o=>{var f=n.pointRadius(),d=n.pointRadius(i)(t(o));return n.pointRadius(f),d};return s.context=o=>(n.context(o),s),s}function Graticule(n){Transform.call(this,[],n),this.generator=graticule()}Graticule.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};inherits(Graticule,Transform,{transform(n,t){var i=this.value,s=this.generator,o;if(!i.length||n.modified())for(const f in n)isFunction$1(s[f])&&s[f](n[f]);return o=s(),i.length?t.mod.push(replace$1(i[0],o)):t.add.push(ingest$1(o)),i[0]=o,t}});function Heatmap(n){Transform.call(this,null,n)}Heatmap.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};inherits(Heatmap,Transform,{transform(n,t){if(!t.changed()&&!n.modified())return t.StopPropagation;var i=t.materialize(t.SOURCE).source,s=n.resolve==="shared",o=n.field||identity$7,f=opacity_(n.opacity,n),d=color_(n.color,n),p=n.as||"image",v={$x:0,$y:0,$value:0,$max:s?max$5(i.map(_=>max$5(o(_).values))):0};return i.forEach(_=>{const k=o(_),P=extend$3({},_,v);s||(P.$max=max$5(k.values||[])),_[p]=toCanvas(k,P,d.dep?d:constant$6(d(P)),f.dep?f:constant$6(f(P)))}),t.reflow(!0).modifies(p)}});function color_(n,t){let i;return isFunction$1(n)?(i=s=>rgb$3(n(s,t)),i.dep=dependency(n)):i=constant$6(rgb$3(n||"#888")),i}function opacity_(n,t){let i;return isFunction$1(n)?(i=s=>n(s,t),i.dep=dependency(n)):n?i=constant$6(n):(i=s=>s.$value/s.$max||0,i.dep=!0),i}function dependency(n){if(!isFunction$1(n))return!1;const t=toSet(accessorFields(n));return t.$x||t.$y||t.$value||t.$max}function toCanvas(n,t,i,s){const o=n.width,f=n.height,d=n.x1||0,p=n.y1||0,v=n.x2||o,_=n.y2||f,k=n.values,P=k?j=>k[j]:zero$9,L=domCanvas(v-d,_-p),G=L.getContext("2d"),Z=G.getImageData(0,0,v-d,_-p),W=Z.data;for(let j=p,H=0;j<_;++j){t.$y=j-p;for(let me=d,$e=j*o;me<v;++me,H+=4){t.$x=me-d,t.$value=P(me+$e);const De=i(t);W[H+0]=De.r,W[H+1]=De.g,W[H+2]=De.b,W[H+3]=~~(255*s(t))}}return G.putImageData(Z,0,0),L}function Projection$1(n){Transform.call(this,null,n),this.modified(!0)}inherits(Projection$1,Transform,{transform(n,t){let i=this.value;return!i||n.modified("type")?(this.value=i=create(n.type),projectionProperties.forEach(s=>{n[s]!=null&&set$3(i,s,n[s])})):projectionProperties.forEach(s=>{n.modified(s)&&set$3(i,s,n[s])}),n.pointRadius!=null&&i.path.pointRadius(n.pointRadius),n.fit&&fit(i,n),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function fit(n,t){const i=collectGeoJSON(t.fit);t.extent?n.fitExtent(t.extent,i):t.size&&n.fitSize(t.size,i)}function create(n){const t=projection((n||"mercator").toLowerCase());return t||error$1("Unrecognized projection type: "+n),t()}function set$3(n,t,i){isFunction$1(n[t])&&n[t](i)}function collectGeoJSON(n){return n=array$5(n),n.length===1?n[0]:{type:FeatureCollection,features:n.reduce((t,i)=>t.concat(featurize(i)),[])}}function featurize(n){return n.type===FeatureCollection?n.features:array$5(n).filter(t=>t!=null).map(t=>t.type===Feature?t:{type:Feature,geometry:t})}const geo=Object.freeze(Object.defineProperty({__proto__:null,contour:Contour,geojson:GeoJSON,geopath:GeoPath,geopoint:GeoPoint,geoshape:GeoShape,graticule:Graticule,heatmap:Heatmap,isocontour:Isocontour,kde2d:KDE2D,projection:Projection$1},Symbol.toStringTag,{value:"Module"}));function forceCenter(n,t){var i,s=1;n==null&&(n=0),t==null&&(t=0);function o(){var f,d=i.length,p,v=0,_=0;for(f=0;f<d;++f)p=i[f],v+=p.x,_+=p.y;for(v=(v/d-n)*s,_=(_/d-t)*s,f=0;f<d;++f)p=i[f],p.x-=v,p.y-=_}return o.initialize=function(f){i=f},o.x=function(f){return arguments.length?(n=+f,o):n},o.y=function(f){return arguments.length?(t=+f,o):t},o.strength=function(f){return arguments.length?(s=+f,o):s},o}function tree_add(n){const t=+this._x.call(null,n),i=+this._y.call(null,n);return add$1(this.cover(t,i),t,i,n)}function add$1(n,t,i,s){if(isNaN(t)||isNaN(i))return n;var o,f=n._root,d={data:s},p=n._x0,v=n._y0,_=n._x1,k=n._y1,P,L,G,Z,W,j,H,me;if(!f)return n._root=d,n;for(;f.length;)if((W=t>=(P=(p+_)/2))?p=P:_=P,(j=i>=(L=(v+k)/2))?v=L:k=L,o=f,!(f=f[H=j<<1|W]))return o[H]=d,n;if(G=+n._x.call(null,f.data),Z=+n._y.call(null,f.data),t===G&&i===Z)return d.next=f,o?o[H]=d:n._root=d,n;do o=o?o[H]=new Array(4):n._root=new Array(4),(W=t>=(P=(p+_)/2))?p=P:_=P,(j=i>=(L=(v+k)/2))?v=L:k=L;while((H=j<<1|W)===(me=(Z>=L)<<1|G>=P));return o[me]=f,o[H]=d,n}function addAll(n){var t,i,s=n.length,o,f,d=new Array(s),p=new Array(s),v=1/0,_=1/0,k=-1/0,P=-1/0;for(i=0;i<s;++i)isNaN(o=+this._x.call(null,t=n[i]))||isNaN(f=+this._y.call(null,t))||(d[i]=o,p[i]=f,o<v&&(v=o),o>k&&(k=o),f<_&&(_=f),f>P&&(P=f));if(v>k||_>P)return this;for(this.cover(v,_).cover(k,P),i=0;i<s;++i)add$1(this,d[i],p[i],n[i]);return this}function tree_cover(n,t){if(isNaN(n=+n)||isNaN(t=+t))return this;var i=this._x0,s=this._y0,o=this._x1,f=this._y1;if(isNaN(i))o=(i=Math.floor(n))+1,f=(s=Math.floor(t))+1;else{for(var d=o-i||1,p=this._root,v,_;i>n||n>=o||s>t||t>=f;)switch(_=(t<s)<<1|n<i,v=new Array(4),v[_]=p,p=v,d*=2,_){case 0:o=i+d,f=s+d;break;case 1:i=o-d,f=s+d;break;case 2:o=i+d,s=f-d;break;case 3:i=o-d,s=f-d;break}this._root&&this._root.length&&(this._root=p)}return this._x0=i,this._y0=s,this._x1=o,this._y1=f,this}function tree_data(){var n=[];return this.visit(function(t){if(!t.length)do n.push(t.data);while(t=t.next)}),n}function tree_extent(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(n,t,i,s,o){this.node=n,this.x0=t,this.y0=i,this.x1=s,this.y1=o}function tree_find(n,t,i){var s,o=this._x0,f=this._y0,d,p,v,_,k=this._x1,P=this._y1,L=[],G=this._root,Z,W;for(G&&L.push(new Quad(G,o,f,k,P)),i==null?i=1/0:(o=n-i,f=t-i,k=n+i,P=t+i,i*=i);Z=L.pop();)if(!(!(G=Z.node)||(d=Z.x0)>k||(p=Z.y0)>P||(v=Z.x1)<o||(_=Z.y1)<f))if(G.length){var j=(d+v)/2,H=(p+_)/2;L.push(new Quad(G[3],j,H,v,_),new Quad(G[2],d,H,j,_),new Quad(G[1],j,p,v,H),new Quad(G[0],d,p,j,H)),(W=(t>=H)<<1|n>=j)&&(Z=L[L.length-1],L[L.length-1]=L[L.length-1-W],L[L.length-1-W]=Z)}else{var me=n-+this._x.call(null,G.data),$e=t-+this._y.call(null,G.data),De=me*me+$e*$e;if(De<i){var le=Math.sqrt(i=De);o=n-le,f=t-le,k=n+le,P=t+le,s=G.data}}return s}function tree_remove(n){if(isNaN(k=+this._x.call(null,n))||isNaN(P=+this._y.call(null,n)))return this;var t,i=this._root,s,o,f,d=this._x0,p=this._y0,v=this._x1,_=this._y1,k,P,L,G,Z,W,j,H;if(!i)return this;if(i.length)for(;;){if((Z=k>=(L=(d+v)/2))?d=L:v=L,(W=P>=(G=(p+_)/2))?p=G:_=G,t=i,!(i=i[j=W<<1|Z]))return this;if(!i.length)break;(t[j+1&3]||t[j+2&3]||t[j+3&3])&&(s=t,H=j)}for(;i.data!==n;)if(o=i,!(i=i.next))return this;return(f=i.next)&&delete i.next,o?(f?o.next=f:delete o.next,this):t?(f?t[j]=f:delete t[j],(i=t[0]||t[1]||t[2]||t[3])&&i===(t[3]||t[2]||t[1]||t[0])&&!i.length&&(s?s[H]=i:this._root=i),this):(this._root=f,this)}function removeAll(n){for(var t=0,i=n.length;t<i;++t)this.remove(n[t]);return this}function tree_root(){return this._root}function tree_size(){var n=0;return this.visit(function(t){if(!t.length)do++n;while(t=t.next)}),n}function tree_visit(n){var t=[],i,s=this._root,o,f,d,p,v;for(s&&t.push(new Quad(s,this._x0,this._y0,this._x1,this._y1));i=t.pop();)if(!n(s=i.node,f=i.x0,d=i.y0,p=i.x1,v=i.y1)&&s.length){var _=(f+p)/2,k=(d+v)/2;(o=s[3])&&t.push(new Quad(o,_,k,p,v)),(o=s[2])&&t.push(new Quad(o,f,k,_,v)),(o=s[1])&&t.push(new Quad(o,_,d,p,k)),(o=s[0])&&t.push(new Quad(o,f,d,_,k))}return this}function tree_visitAfter(n){var t=[],i=[],s;for(this._root&&t.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));s=t.pop();){var o=s.node;if(o.length){var f,d=s.x0,p=s.y0,v=s.x1,_=s.y1,k=(d+v)/2,P=(p+_)/2;(f=o[0])&&t.push(new Quad(f,d,p,k,P)),(f=o[1])&&t.push(new Quad(f,k,p,v,P)),(f=o[2])&&t.push(new Quad(f,d,P,k,_)),(f=o[3])&&t.push(new Quad(f,k,P,v,_))}i.push(s)}for(;s=i.pop();)n(s.node,s.x0,s.y0,s.x1,s.y1);return this}function defaultX(n){return n[0]}function tree_x(n){return arguments.length?(this._x=n,this):this._x}function defaultY(n){return n[1]}function tree_y(n){return arguments.length?(this._y=n,this):this._y}function quadtree(n,t,i){var s=new Quadtree(t??defaultX,i??defaultY,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function Quadtree(n,t,i,s,o,f){this._x=n,this._y=t,this._x0=i,this._y0=s,this._x1=o,this._y1=f,this._root=void 0}function leaf_copy(n){for(var t={data:n.data},i=t;n=n.next;)i=i.next={data:n.data};return t}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var n=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,i,s;if(!t)return n;if(!t.length)return n._root=leaf_copy(t),n;for(i=[{source:t,target:n._root=new Array(4)}];t=i.pop();)for(var o=0;o<4;++o)(s=t.source[o])&&(s.length?i.push({source:s,target:t.target[o]=new Array(4)}):t.target[o]=leaf_copy(s));return n};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant$1(n){return function(){return n}}function jiggle(n){return(n()-.5)*1e-6}function x$1(n){return n.x+n.vx}function y$1(n){return n.y+n.vy}function forceCollide(n){var t,i,s,o=1,f=1;typeof n!="function"&&(n=constant$1(n==null?1:+n));function d(){for(var _,k=t.length,P,L,G,Z,W,j,H=0;H<f;++H)for(P=quadtree(t,x$1,y$1).visitAfter(p),_=0;_<k;++_)L=t[_],W=i[L.index],j=W*W,G=L.x+L.vx,Z=L.y+L.vy,P.visit(me);function me($e,De,le,Ce,Me){var _n=$e.data,_i=$e.r,ll=W+_i;if(_n){if(_n.index>L.index){var _l=G-_n.x-_n.vx,oa=Z-_n.y-_n.vy,Ru=_l*_l+oa*oa;Ru<ll*ll&&(_l===0&&(_l=jiggle(s),Ru+=_l*_l),oa===0&&(oa=jiggle(s),Ru+=oa*oa),Ru=(ll-(Ru=Math.sqrt(Ru)))/Ru*o,L.vx+=(_l*=Ru)*(ll=(_i*=_i)/(j+_i)),L.vy+=(oa*=Ru)*ll,_n.vx-=_l*(ll=1-ll),_n.vy-=oa*ll)}return}return De>G+ll||Ce<G-ll||le>Z+ll||Me<Z-ll}}function p(_){if(_.data)return _.r=i[_.data.index];for(var k=_.r=0;k<4;++k)_[k]&&_[k].r>_.r&&(_.r=_[k].r)}function v(){if(t){var _,k=t.length,P;for(i=new Array(k),_=0;_<k;++_)P=t[_],i[P.index]=+n(P,_,t)}}return d.initialize=function(_,k){t=_,s=k,v()},d.iterations=function(_){return arguments.length?(f=+_,d):f},d.strength=function(_){return arguments.length?(o=+_,d):o},d.radius=function(_){return arguments.length?(n=typeof _=="function"?_:constant$1(+_),v(),d):n},d}function index$3(n){return n.index}function find$1(n,t){var i=n.get(t);if(!i)throw new Error("node not found: "+t);return i}function forceLink(n){var t=index$3,i=P,s,o=constant$1(30),f,d,p,v,_,k=1;n==null&&(n=[]);function P(j){return 1/Math.min(p[j.source.index],p[j.target.index])}function L(j){for(var H=0,me=n.length;H<k;++H)for(var $e=0,De,le,Ce,Me,_n,_i,ll;$e<me;++$e)De=n[$e],le=De.source,Ce=De.target,Me=Ce.x+Ce.vx-le.x-le.vx||jiggle(_),_n=Ce.y+Ce.vy-le.y-le.vy||jiggle(_),_i=Math.sqrt(Me*Me+_n*_n),_i=(_i-f[$e])/_i*j*s[$e],Me*=_i,_n*=_i,Ce.vx-=Me*(ll=v[$e]),Ce.vy-=_n*ll,le.vx+=Me*(ll=1-ll),le.vy+=_n*ll}function G(){if(d){var j,H=d.length,me=n.length,$e=new Map(d.map((le,Ce)=>[t(le,Ce,d),le])),De;for(j=0,p=new Array(H);j<me;++j)De=n[j],De.index=j,typeof De.source!="object"&&(De.source=find$1($e,De.source)),typeof De.target!="object"&&(De.target=find$1($e,De.target)),p[De.source.index]=(p[De.source.index]||0)+1,p[De.target.index]=(p[De.target.index]||0)+1;for(j=0,v=new Array(me);j<me;++j)De=n[j],v[j]=p[De.source.index]/(p[De.source.index]+p[De.target.index]);s=new Array(me),Z(),f=new Array(me),W()}}function Z(){if(d)for(var j=0,H=n.length;j<H;++j)s[j]=+i(n[j],j,n)}function W(){if(d)for(var j=0,H=n.length;j<H;++j)f[j]=+o(n[j],j,n)}return L.initialize=function(j,H){d=j,_=H,G()},L.links=function(j){return arguments.length?(n=j,G(),L):n},L.id=function(j){return arguments.length?(t=j,L):t},L.iterations=function(j){return arguments.length?(k=+j,L):k},L.strength=function(j){return arguments.length?(i=typeof j=="function"?j:constant$1(+j),Z(),L):i},L.distance=function(j){return arguments.length?(o=typeof j=="function"?j:constant$1(+j),W(),L):o},L}var noop$1={value:()=>{}};function dispatch(){for(var n=0,t=arguments.length,i={},s;n<t;++n){if(!(s=arguments[n]+"")||s in i||/[\s.]/.test(s))throw new Error("illegal type: "+s);i[s]=[]}return new Dispatch(i)}function Dispatch(n){this._=n}function parseTypenames(n,t){return n.trim().split(/^|\s+/).map(function(i){var s="",o=i.indexOf(".");if(o>=0&&(s=i.slice(o+1),i=i.slice(0,o)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:s}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(n,t){var i=this._,s=parseTypenames(n+"",i),o,f=-1,d=s.length;if(arguments.length<2){for(;++f<d;)if((o=(n=s[f]).type)&&(o=get(i[o],n.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++f<d;)if(o=(n=s[f]).type)i[o]=set$2(i[o],n.name,t);else if(t==null)for(o in i)i[o]=set$2(i[o],n.name,null);return this},copy:function(){var n={},t=this._;for(var i in t)n[i]=t[i].slice();return new Dispatch(n)},call:function(n,t){if((o=arguments.length-2)>0)for(var i=new Array(o),s=0,o,f;s<o;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],s=0,o=f.length;s<o;++s)f[s].value.apply(t,i)},apply:function(n,t,i){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var s=this._[n],o=0,f=s.length;o<f;++o)s[o].value.apply(t,i)}};function get(n,t){for(var i=0,s=n.length,o;i<s;++i)if((o=n[i]).name===t)return o.value}function set$2(n,t,i){for(var s=0,o=n.length;s<o;++s)if(n[s].name===t){n[s]=noop$1,n=n.slice(0,s).concat(n.slice(s+1));break}return i!=null&&n.push({name:t,value:i}),n}var frame=0,timeout=0,interval$2=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer$1(){this._call=this._time=this._next=null}Timer$1.prototype=timer$1.prototype={constructor:Timer$1,restart:function(n,t,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?now():+i)+(t==null?0:+t),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=n,this._time=i,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer$1(n,t,i){var s=new Timer$1;return s.restart(n,t,i),s}function timerFlush(){now(),++frame;for(var n=taskHead,t;n;)(t=clockNow-n._time)>=0&&n._call.call(void 0,t),n=n._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var n=clock.now(),t=n-clockLast;t>pokeDelay&&(clockSkew-=t,clockLast=n)}function nap(){for(var n,t=taskHead,i,s=1/0;t;)t._call?(s>t._time&&(s=t._time),n=t,t=t._next):(i=t._next,t._next=null,t=n?n._next=i:taskHead=i);taskTail=n,sleep(s)}function sleep(n){if(!frame){timeout&&(timeout=clearTimeout(timeout));var t=n-clockNow;t>24?(n<1/0&&(timeout=setTimeout(wake,n-clock.now()-clockSkew)),interval$2&&(interval$2=clearInterval(interval$2))):(interval$2||(clockLast=clock.now(),interval$2=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function interval$1(n,t,i){var s=new Timer$1,o=t;return t==null?(s.restart(n,t,i),s):(s._restart=s.restart,s.restart=function(f,d,p){d=+d,p=p==null?now():+p,s._restart(function v(_){_+=o,s._restart(v,o+=d,p),f(_)},d,p)},s.restart(n,t,i),s)}const a$1=1664525,c$1=1013904223,m$2=4294967296;function lcg$1(){let n=1;return()=>(n=(a$1*n+c$1)%m$2)/m$2}function x(n){return n.x}function y(n){return n.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function forceSimulation(n){var t,i=1,s=.001,o=1-Math.pow(s,1/300),f=0,d=.6,p=new Map,v=timer$1(P),_=dispatch("tick","end"),k=lcg$1();n==null&&(n=[]);function P(){L(),_.call("tick",t),i<s&&(v.stop(),_.call("end",t))}function L(W){var j,H=n.length,me;W===void 0&&(W=1);for(var $e=0;$e<W;++$e)for(i+=(f-i)*o,p.forEach(function(De){De(i)}),j=0;j<H;++j)me=n[j],me.fx==null?me.x+=me.vx*=d:(me.x=me.fx,me.vx=0),me.fy==null?me.y+=me.vy*=d:(me.y=me.fy,me.vy=0);return t}function G(){for(var W=0,j=n.length,H;W<j;++W){if(H=n[W],H.index=W,H.fx!=null&&(H.x=H.fx),H.fy!=null&&(H.y=H.fy),isNaN(H.x)||isNaN(H.y)){var me=initialRadius*Math.sqrt(.5+W),$e=W*initialAngle;H.x=me*Math.cos($e),H.y=me*Math.sin($e)}(isNaN(H.vx)||isNaN(H.vy))&&(H.vx=H.vy=0)}}function Z(W){return W.initialize&&W.initialize(n,k),W}return G(),t={tick:L,restart:function(){return v.restart(P),t},stop:function(){return v.stop(),t},nodes:function(W){return arguments.length?(n=W,G(),p.forEach(Z),t):n},alpha:function(W){return arguments.length?(i=+W,t):i},alphaMin:function(W){return arguments.length?(s=+W,t):s},alphaDecay:function(W){return arguments.length?(o=+W,t):+o},alphaTarget:function(W){return arguments.length?(f=+W,t):f},velocityDecay:function(W){return arguments.length?(d=1-W,t):1-d},randomSource:function(W){return arguments.length?(k=W,p.forEach(Z),t):k},force:function(W,j){return arguments.length>1?(j==null?p.delete(W):p.set(W,Z(j)),t):p.get(W)},find:function(W,j,H){var me=0,$e=n.length,De,le,Ce,Me,_n;for(H==null?H=1/0:H*=H,me=0;me<$e;++me)Me=n[me],De=W-Me.x,le=j-Me.y,Ce=De*De+le*le,Ce<H&&(_n=Me,H=Ce);return _n},on:function(W,j){return arguments.length>1?(_.on(W,j),t):_.on(W)}}}function forceManyBody(){var n,t,i,s,o=constant$1(-30),f,d=1,p=1/0,v=.81;function _(G){var Z,W=n.length,j=quadtree(n,x,y).visitAfter(P);for(s=G,Z=0;Z<W;++Z)t=n[Z],j.visit(L)}function k(){if(n){var G,Z=n.length,W;for(f=new Array(Z),G=0;G<Z;++G)W=n[G],f[W.index]=+o(W,G,n)}}function P(G){var Z=0,W,j,H=0,me,$e,De;if(G.length){for(me=$e=De=0;De<4;++De)(W=G[De])&&(j=Math.abs(W.value))&&(Z+=W.value,H+=j,me+=j*W.x,$e+=j*W.y);G.x=me/H,G.y=$e/H}else{W=G,W.x=W.data.x,W.y=W.data.y;do Z+=f[W.data.index];while(W=W.next)}G.value=Z}function L(G,Z,W,j){if(!G.value)return!0;var H=G.x-t.x,me=G.y-t.y,$e=j-Z,De=H*H+me*me;if($e*$e/v<De)return De<p&&(H===0&&(H=jiggle(i),De+=H*H),me===0&&(me=jiggle(i),De+=me*me),De<d&&(De=Math.sqrt(d*De)),t.vx+=H*G.value*s/De,t.vy+=me*G.value*s/De),!0;if(G.length||De>=p)return;(G.data!==t||G.next)&&(H===0&&(H=jiggle(i),De+=H*H),me===0&&(me=jiggle(i),De+=me*me),De<d&&(De=Math.sqrt(d*De)));do G.data!==t&&($e=f[G.data.index]*s/De,t.vx+=H*$e,t.vy+=me*$e);while(G=G.next)}return _.initialize=function(G,Z){n=G,i=Z,k()},_.strength=function(G){return arguments.length?(o=typeof G=="function"?G:constant$1(+G),k(),_):o},_.distanceMin=function(G){return arguments.length?(d=G*G,_):Math.sqrt(d)},_.distanceMax=function(G){return arguments.length?(p=G*G,_):Math.sqrt(p)},_.theta=function(G){return arguments.length?(v=G*G,_):Math.sqrt(v)},_}function forceX(n){var t=constant$1(.1),i,s,o;typeof n!="function"&&(n=constant$1(n==null?0:+n));function f(p){for(var v=0,_=i.length,k;v<_;++v)k=i[v],k.vx+=(o[v]-k.x)*s[v]*p}function d(){if(i){var p,v=i.length;for(s=new Array(v),o=new Array(v),p=0;p<v;++p)s[p]=isNaN(o[p]=+n(i[p],p,i))?0:+t(i[p],p,i)}}return f.initialize=function(p){i=p,d()},f.strength=function(p){return arguments.length?(t=typeof p=="function"?p:constant$1(+p),d(),f):t},f.x=function(p){return arguments.length?(n=typeof p=="function"?p:constant$1(+p),d(),f):n},f}function forceY(n){var t=constant$1(.1),i,s,o;typeof n!="function"&&(n=constant$1(n==null?0:+n));function f(p){for(var v=0,_=i.length,k;v<_;++v)k=i[v],k.vy+=(o[v]-k.y)*s[v]*p}function d(){if(i){var p,v=i.length;for(s=new Array(v),o=new Array(v),p=0;p<v;++p)s[p]=isNaN(o[p]=+n(i[p],p,i))?0:+t(i[p],p,i)}}return f.initialize=function(p){i=p,d()},f.strength=function(p){return arguments.length?(t=typeof p=="function"?p:constant$1(+p),d(),f):t},f.y=function(p){return arguments.length?(n=typeof p=="function"?p:constant$1(+p),d(),f):n},f}const ForceMap={center:forceCenter,collide:forceCollide,nbody:forceManyBody,link:forceLink,x:forceX,y:forceY},Forces="forces",ForceParams=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],ForceConfig=["static","iterations"],ForceOutput=["x","y","vx","vy"];function Force(n){Transform.call(this,null,n)}Force.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:ForceOutput}]};inherits(Force,Transform,{transform(n,t){var i=this.value,s=t.changed(t.ADD_REM),o=n.modified(ForceParams),f=n.iterations||300;if(i?(s&&(t.modifies("index"),i.nodes(t.source)),(o||t.changed(t.MOD))&&setup(i,n,0,t)):(this.value=i=simulation(t.source,n),i.on("tick",rerun(t.dataflow,this)),n.static||(s=!0,i.tick()),t.modifies("index")),o||s||n.modified(ForceConfig)||t.changed()&&n.restart){if(i.alpha(Math.max(i.alpha(),n.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/f)),n.static)for(i.stop();--f>=0;)i.tick();else if(i.stopped()&&i.restart(),!s)return t.StopPropagation}return this.finish(n,t)},finish(n,t){const i=t.dataflow;for(let p=this._argops,v=0,_=p.length,k;v<_;++v)if(k=p[v],!(k.name!==Forces||k.op._argval.force!=="link")){for(var s=k.op._argops,o=0,f=s.length,d;o<f;++o)if(s[o].name==="links"&&(d=s[o].op.source)){i.pulse(d,i.changeset().reflow());break}}return t.reflow(n.modified()).modifies(ForceOutput)}});function rerun(n,t){return()=>n.touch(t).run()}function simulation(n,t){const i=forceSimulation(n),s=i.stop,o=i.restart;let f=!1;return i.stopped=()=>f,i.restart=()=>(f=!1,o()),i.stop=()=>(f=!0,s()),setup(i,t,!0).on("end",()=>f=!0)}function setup(n,t,i,s){var o=array$5(t.forces),f,d,p,v;for(f=0,d=ForceParams.length;f<d;++f)p=ForceParams[f],p!==Forces&&t.modified(p)&&n[p](t[p]);for(f=0,d=o.length;f<d;++f)v=Forces+f,p=i||t.modified(Forces,f)?getForce(o[f]):s&&modified(o[f],s)?n.force(v):null,p&&n.force(v,p);for(d=n.numForces||0;f<d;++f)n.force(Forces+f,null);return n.numForces=o.length,n}function modified(n,t){var i,s;for(i in n)if(isFunction$1(s=n[i])&&t.modified(accessorFields(s)))return 1;return 0}function getForce(n){var t,i;has$1(ForceMap,n.force)||error$1("Unrecognized force: "+n.force),t=ForceMap[n.force]();for(i in n)isFunction$1(t[i])&&setForceParam(t[i],n[i],n);return t}function setForceParam(n,t,i){n(isFunction$1(t)?s=>t(s,i):t)}const force=Object.freeze(Object.defineProperty({__proto__:null,force:Force},Symbol.toStringTag,{value:"Module"}));function defaultSeparation$2(n,t){return n.parent===t.parent?1:2}function meanX(n){return n.reduce(meanXReduce,0)/n.length}function meanXReduce(n,t){return n+t.x}function maxY(n){return 1+n.reduce(maxYReduce,0)}function maxYReduce(n,t){return Math.max(n,t.y)}function leafLeft(n){for(var t;t=n.children;)n=t[0];return n}function leafRight(n){for(var t;t=n.children;)n=t[t.length-1];return n}function cluster(){var n=defaultSeparation$2,t=1,i=1,s=!1;function o(f){var d,p=0;f.eachAfter(function(L){var G=L.children;G?(L.x=meanX(G),L.y=maxY(G)):(L.x=d?p+=n(L,d):0,L.y=0,d=L)});var v=leafLeft(f),_=leafRight(f),k=v.x-n(v,_)/2,P=_.x+n(_,v)/2;return f.eachAfter(s?function(L){L.x=(L.x-f.x)*t,L.y=(f.y-L.y)*i}:function(L){L.x=(L.x-k)/(P-k)*t,L.y=(1-(f.y?L.y/f.y:1))*i})}return o.separation=function(f){return arguments.length?(n=f,o):n},o.size=function(f){return arguments.length?(s=!1,t=+f[0],i=+f[1],o):s?null:[t,i]},o.nodeSize=function(f){return arguments.length?(s=!0,t=+f[0],i=+f[1],o):s?[t,i]:null},o}function count(n){var t=0,i=n.children,s=i&&i.length;if(!s)t=1;else for(;--s>=0;)t+=i[s].value;n.value=t}function node_count(){return this.eachAfter(count)}function node_each(n,t){let i=-1;for(const s of this)n.call(t,s,++i,this);return this}function node_eachBefore(n,t){for(var i=this,s=[i],o,f,d=-1;i=s.pop();)if(n.call(t,i,++d,this),o=i.children)for(f=o.length-1;f>=0;--f)s.push(o[f]);return this}function node_eachAfter(n,t){for(var i=this,s=[i],o=[],f,d,p,v=-1;i=s.pop();)if(o.push(i),f=i.children)for(d=0,p=f.length;d<p;++d)s.push(f[d]);for(;i=o.pop();)n.call(t,i,++v,this);return this}function node_find(n,t){let i=-1;for(const s of this)if(n.call(t,s,++i,this))return s}function node_sum(n){return this.eachAfter(function(t){for(var i=+n(t.data)||0,s=t.children,o=s&&s.length;--o>=0;)i+=s[o].value;t.value=i})}function node_sort(n){return this.eachBefore(function(t){t.children&&t.children.sort(n)})}function node_path(n){for(var t=this,i=leastCommonAncestor(t,n),s=[t];t!==i;)t=t.parent,s.push(t);for(var o=s.length;n!==i;)s.splice(o,0,n),n=n.parent;return s}function leastCommonAncestor(n,t){if(n===t)return n;var i=n.ancestors(),s=t.ancestors(),o=null;for(n=i.pop(),t=s.pop();n===t;)o=n,n=i.pop(),t=s.pop();return o}function node_ancestors(){for(var n=this,t=[n];n=n.parent;)t.push(n);return t}function node_descendants(){return Array.from(this)}function node_leaves(){var n=[];return this.eachBefore(function(t){t.children||n.push(t)}),n}function node_links(){var n=this,t=[];return n.each(function(i){i!==n&&t.push({source:i.parent,target:i})}),t}function*node_iterator(){var n=this,t,i=[n],s,o,f;do for(t=i.reverse(),i=[];n=t.pop();)if(yield n,s=n.children)for(o=0,f=s.length;o<f;++o)i.push(s[o]);while(i.length)}function hierarchy(n,t){n instanceof Map?(n=[void 0,n],t===void 0&&(t=mapChildren)):t===void 0&&(t=objectChildren);for(var i=new Node$1(n),s,o=[i],f,d,p,v;s=o.pop();)if((d=t(s.data))&&(v=(d=Array.from(d)).length))for(s.children=d,p=v-1;p>=0;--p)o.push(f=d[p]=new Node$1(d[p])),f.parent=s,f.depth=s.depth+1;return i.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(n){return n.children}function mapChildren(n){return Array.isArray(n)?n[1]:null}function copyData(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function computeHeight(n){var t=0;do n.height=t;while((n=n.parent)&&n.height<++t)}function Node$1(n){this.data=n,this.depth=this.height=0,this.parent=null}Node$1.prototype=hierarchy.prototype={constructor:Node$1,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,find:node_find,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy,[Symbol.iterator]:node_iterator};function optional(n){return n==null?null:required(n)}function required(n){if(typeof n!="function")throw new Error;return n}function constantZero(){return 0}function constant(n){return function(){return n}}const a=1664525,c=1013904223,m$1=4294967296;function lcg(){let n=1;return()=>(n=(a*n+c)%m$1)/m$1}function array$2(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function shuffle(n,t){let i=n.length,s,o;for(;i;)o=t()*i--|0,s=n[i],n[i]=n[o],n[o]=s;return n}function packEncloseRandom(n,t){for(var i=0,s=(n=shuffle(Array.from(n),t)).length,o=[],f,d;i<s;)f=n[i],d&&enclosesWeak(d,f)?++i:(d=encloseBasis(o=extendBasis(o,f)),i=0);return d}function extendBasis(n,t){var i,s;if(enclosesWeakAll(t,n))return[t];for(i=0;i<n.length;++i)if(enclosesNot(t,n[i])&&enclosesWeakAll(encloseBasis2(n[i],t),n))return[n[i],t];for(i=0;i<n.length-1;++i)for(s=i+1;s<n.length;++s)if(enclosesNot(encloseBasis2(n[i],n[s]),t)&&enclosesNot(encloseBasis2(n[i],t),n[s])&&enclosesNot(encloseBasis2(n[s],t),n[i])&&enclosesWeakAll(encloseBasis3(n[i],n[s],t),n))return[n[i],n[s],t];throw new Error}function enclosesNot(n,t){var i=n.r-t.r,s=t.x-n.x,o=t.y-n.y;return i<0||i*i<s*s+o*o}function enclosesWeak(n,t){var i=n.r-t.r+Math.max(n.r,t.r,1)*1e-9,s=t.x-n.x,o=t.y-n.y;return i>0&&i*i>s*s+o*o}function enclosesWeakAll(n,t){for(var i=0;i<t.length;++i)if(!enclosesWeak(n,t[i]))return!1;return!0}function encloseBasis(n){switch(n.length){case 1:return encloseBasis1(n[0]);case 2:return encloseBasis2(n[0],n[1]);case 3:return encloseBasis3(n[0],n[1],n[2])}}function encloseBasis1(n){return{x:n.x,y:n.y,r:n.r}}function encloseBasis2(n,t){var i=n.x,s=n.y,o=n.r,f=t.x,d=t.y,p=t.r,v=f-i,_=d-s,k=p-o,P=Math.sqrt(v*v+_*_);return{x:(i+f+v/P*k)/2,y:(s+d+_/P*k)/2,r:(P+o+p)/2}}function encloseBasis3(n,t,i){var s=n.x,o=n.y,f=n.r,d=t.x,p=t.y,v=t.r,_=i.x,k=i.y,P=i.r,L=s-d,G=s-_,Z=o-p,W=o-k,j=v-f,H=P-f,me=s*s+o*o-f*f,$e=me-d*d-p*p+v*v,De=me-_*_-k*k+P*P,le=G*Z-L*W,Ce=(Z*De-W*$e)/(le*2)-s,Me=(W*j-Z*H)/le,_n=(G*$e-L*De)/(le*2)-o,_i=(L*H-G*j)/le,ll=Me*Me+_i*_i-1,_l=2*(f+Ce*Me+_n*_i),oa=Ce*Ce+_n*_n-f*f,Ru=-(Math.abs(ll)>1e-6?(_l+Math.sqrt(_l*_l-4*ll*oa))/(2*ll):oa/_l);return{x:s+Ce+Me*Ru,y:o+_n+_i*Ru,r:Ru}}function place(n,t,i){var s=n.x-t.x,o,f,d=n.y-t.y,p,v,_=s*s+d*d;_?(f=t.r+i.r,f*=f,v=n.r+i.r,v*=v,f>v?(o=(_+v-f)/(2*_),p=Math.sqrt(Math.max(0,v/_-o*o)),i.x=n.x-o*s-p*d,i.y=n.y-o*d+p*s):(o=(_+f-v)/(2*_),p=Math.sqrt(Math.max(0,f/_-o*o)),i.x=t.x+o*s-p*d,i.y=t.y+o*d+p*s)):(i.x=t.x+i.r,i.y=t.y)}function intersects(n,t){var i=n.r+t.r-1e-6,s=t.x-n.x,o=t.y-n.y;return i>0&&i*i>s*s+o*o}function score(n){var t=n._,i=n.next._,s=t.r+i.r,o=(t.x*i.r+i.x*t.r)/s,f=(t.y*i.r+i.y*t.r)/s;return o*o+f*f}function Node(n){this._=n,this.next=null,this.previous=null}function packSiblingsRandom(n,t){if(!(f=(n=array$2(n)).length))return 0;var i,s,o,f,d,p,v,_,k,P,L;if(i=n[0],i.x=0,i.y=0,!(f>1))return i.r;if(s=n[1],i.x=-s.r,s.x=i.r,s.y=0,!(f>2))return i.r+s.r;place(s,i,o=n[2]),i=new Node(i),s=new Node(s),o=new Node(o),i.next=o.previous=s,s.next=i.previous=o,o.next=s.previous=i;e:for(v=3;v<f;++v){place(i._,s._,o=n[v]),o=new Node(o),_=s.next,k=i.previous,P=s._.r,L=i._.r;do if(P<=L){if(intersects(_._,o._)){s=_,i.next=s,s.previous=i,--v;continue e}P+=_._.r,_=_.next}else{if(intersects(k._,o._)){i=k,i.next=s,s.previous=i,--v;continue e}L+=k._.r,k=k.previous}while(_!==k.next);for(o.previous=i,o.next=s,i.next=s.previous=s=o,d=score(i);(o=o.next)!==s;)(p=score(o))<d&&(i=o,d=p);s=i.next}for(i=[s._],o=s;(o=o.next)!==s;)i.push(o._);for(o=packEncloseRandom(i,t),v=0;v<f;++v)i=n[v],i.x-=o.x,i.y-=o.y;return o.r}function defaultRadius(n){return Math.sqrt(n.value)}function pack(){var n=null,t=1,i=1,s=constantZero;function o(f){const d=lcg();return f.x=t/2,f.y=i/2,n?f.eachBefore(radiusLeaf(n)).eachAfter(packChildrenRandom(s,.5,d)).eachBefore(translateChild(1)):f.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildrenRandom(constantZero,1,d)).eachAfter(packChildrenRandom(s,f.r/Math.min(t,i),d)).eachBefore(translateChild(Math.min(t,i)/(2*f.r))),f}return o.radius=function(f){return arguments.length?(n=optional(f),o):n},o.size=function(f){return arguments.length?(t=+f[0],i=+f[1],o):[t,i]},o.padding=function(f){return arguments.length?(s=typeof f=="function"?f:constant(+f),o):s},o}function radiusLeaf(n){return function(t){t.children||(t.r=Math.max(0,+n(t)||0))}}function packChildrenRandom(n,t,i){return function(s){if(o=s.children){var o,f,d=o.length,p=n(s)*t||0,v;if(p)for(f=0;f<d;++f)o[f].r+=p;if(v=packSiblingsRandom(o,i),p)for(f=0;f<d;++f)o[f].r-=p;s.r=v+p}}}function translateChild(n){return function(t){var i=t.parent;t.r*=n,i&&(t.x=i.x+n*t.x,t.y=i.y+n*t.y)}}function roundNode(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function treemapDice(n,t,i,s,o){for(var f=n.children,d,p=-1,v=f.length,_=n.value&&(s-t)/n.value;++p<v;)d=f[p],d.y0=i,d.y1=o,d.x0=t,d.x1=t+=d.value*_}function partition$1(){var n=1,t=1,i=0,s=!1;function o(d){var p=d.height+1;return d.x0=d.y0=i,d.x1=n,d.y1=t/p,d.eachBefore(f(t,p)),s&&d.eachBefore(roundNode),d}function f(d,p){return function(v){v.children&&treemapDice(v,v.x0,d*(v.depth+1)/p,v.x1,d*(v.depth+2)/p);var _=v.x0,k=v.y0,P=v.x1-i,L=v.y1-i;P<_&&(_=P=(_+P)/2),L<k&&(k=L=(k+L)/2),v.x0=_,v.y0=k,v.x1=P,v.y1=L}}return o.round=function(d){return arguments.length?(s=!!d,o):s},o.size=function(d){return arguments.length?(n=+d[0],t=+d[1],o):[n,t]},o.padding=function(d){return arguments.length?(i=+d,o):i},o}var preroot={depth:-1},ambiguous={},imputed={};function defaultId(n){return n.id}function defaultParentId(n){return n.parentId}function stratify(){var n=defaultId,t=defaultParentId,i;function s(o){var f=Array.from(o),d=n,p=t,v,_,k,P,L,G,Z,W,j=new Map;if(i!=null){const H=f.map((De,le)=>normalize$1(i(De,le,o))),me=H.map(parentof),$e=new Set(H).add("");for(const De of me)$e.has(De)||($e.add(De),H.push(De),me.push(parentof(De)),f.push(imputed));d=(De,le)=>H[le],p=(De,le)=>me[le]}for(k=0,v=f.length;k<v;++k)_=f[k],G=f[k]=new Node$1(_),(Z=d(_,k,o))!=null&&(Z+="")&&(W=G.id=Z,j.set(W,j.has(W)?ambiguous:G)),(Z=p(_,k,o))!=null&&(Z+="")&&(G.parent=Z);for(k=0;k<v;++k)if(G=f[k],Z=G.parent){if(L=j.get(Z),!L)throw new Error("missing: "+Z);if(L===ambiguous)throw new Error("ambiguous: "+Z);L.children?L.children.push(G):L.children=[G],G.parent=L}else{if(P)throw new Error("multiple roots");P=G}if(!P)throw new Error("no root");if(i!=null){for(;P.data===imputed&&P.children.length===1;)P=P.children[0],--v;for(let H=f.length-1;H>=0&&(G=f[H],G.data===imputed);--H)G.data=null}if(P.parent=preroot,P.eachBefore(function(H){H.depth=H.parent.depth+1,--v}).eachBefore(computeHeight),P.parent=null,v>0)throw new Error("cycle");return P}return s.id=function(o){return arguments.length?(n=optional(o),s):n},s.parentId=function(o){return arguments.length?(t=optional(o),s):t},s.path=function(o){return arguments.length?(i=optional(o),s):i},s}function normalize$1(n){n=`${n}`;let t=n.length;return slash(n,t-1)&&!slash(n,t-2)&&(n=n.slice(0,-1)),n[0]==="/"?n:`/${n}`}function parentof(n){let t=n.length;if(t<2)return"";for(;--t>1&&!slash(n,t););return n.slice(0,t)}function slash(n,t){if(n[t]==="/"){let i=0;for(;t>0&&n[--t]==="\\";)++i;if((i&1)===0)return!0}return!1}function defaultSeparation$1(n,t){return n.parent===t.parent?1:2}function nextLeft(n){var t=n.children;return t?t[0]:n.t}function nextRight(n){var t=n.children;return t?t[t.length-1]:n.t}function moveSubtree(n,t,i){var s=i/(t.i-n.i);t.c-=s,t.s+=i,n.c+=s,t.z+=i,t.m+=i}function executeShifts(n){for(var t=0,i=0,s=n.children,o=s.length,f;--o>=0;)f=s[o],f.z+=t,f.m+=t,t+=f.s+(i+=f.c)}function nextAncestor(n,t,i){return n.a.parent===t.parent?n.a:i}function TreeNode(n,t){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}TreeNode.prototype=Object.create(Node$1.prototype);function treeRoot(n){for(var t=new TreeNode(n,0),i,s=[t],o,f,d,p;i=s.pop();)if(f=i._.children)for(i.children=new Array(p=f.length),d=p-1;d>=0;--d)s.push(o=i.children[d]=new TreeNode(f[d],d)),o.parent=i;return(t.parent=new TreeNode(null,0)).children=[t],t}function tree$1(){var n=defaultSeparation$1,t=1,i=1,s=null;function o(_){var k=treeRoot(_);if(k.eachAfter(f),k.parent.m=-k.z,k.eachBefore(d),s)_.eachBefore(v);else{var P=_,L=_,G=_;_.eachBefore(function(me){me.x<P.x&&(P=me),me.x>L.x&&(L=me),me.depth>G.depth&&(G=me)});var Z=P===L?1:n(P,L)/2,W=Z-P.x,j=t/(L.x+Z+W),H=i/(G.depth||1);_.eachBefore(function(me){me.x=(me.x+W)*j,me.y=me.depth*H})}return _}function f(_){var k=_.children,P=_.parent.children,L=_.i?P[_.i-1]:null;if(k){executeShifts(_);var G=(k[0].z+k[k.length-1].z)/2;L?(_.z=L.z+n(_._,L._),_.m=_.z-G):_.z=G}else L&&(_.z=L.z+n(_._,L._));_.parent.A=p(_,L,_.parent.A||P[0])}function d(_){_._.x=_.z+_.parent.m,_.m+=_.parent.m}function p(_,k,P){if(k){for(var L=_,G=_,Z=k,W=L.parent.children[0],j=L.m,H=G.m,me=Z.m,$e=W.m,De;Z=nextRight(Z),L=nextLeft(L),Z&&L;)W=nextLeft(W),G=nextRight(G),G.a=_,De=Z.z+me-L.z-j+n(Z._,L._),De>0&&(moveSubtree(nextAncestor(Z,_,P),_,De),j+=De,H+=De),me+=Z.m,j+=L.m,$e+=W.m,H+=G.m;Z&&!nextRight(G)&&(G.t=Z,G.m+=me-H),L&&!nextLeft(W)&&(W.t=L,W.m+=j-$e,P=_)}return P}function v(_){_.x*=t,_.y=_.depth*i}return o.separation=function(_){return arguments.length?(n=_,o):n},o.size=function(_){return arguments.length?(s=!1,t=+_[0],i=+_[1],o):s?null:[t,i]},o.nodeSize=function(_){return arguments.length?(s=!0,t=+_[0],i=+_[1],o):s?[t,i]:null},o}function treemapSlice(n,t,i,s,o){for(var f=n.children,d,p=-1,v=f.length,_=n.value&&(o-i)/n.value;++p<v;)d=f[p],d.x0=t,d.x1=s,d.y0=i,d.y1=i+=d.value*_}var phi=(1+Math.sqrt(5))/2;function squarifyRatio(n,t,i,s,o,f){for(var d=[],p=t.children,v,_,k=0,P=0,L=p.length,G,Z,W=t.value,j,H,me,$e,De,le,Ce;k<L;){G=o-i,Z=f-s;do j=p[P++].value;while(!j&&P<L);for(H=me=j,le=Math.max(Z/G,G/Z)/(W*n),Ce=j*j*le,De=Math.max(me/Ce,Ce/H);P<L;++P){if(j+=_=p[P].value,_<H&&(H=_),_>me&&(me=_),Ce=j*j*le,$e=Math.max(me/Ce,Ce/H),$e>De){j-=_;break}De=$e}d.push(v={value:j,dice:G<Z,children:p.slice(k,P)}),v.dice?treemapDice(v,i,s,o,W?s+=Z*j/W:f):treemapSlice(v,i,s,W?i+=G*j/W:o,f),W-=j,k=P}return d}const treemapSquarify=function n(t){function i(s,o,f,d,p){squarifyRatio(t,s,o,f,d,p)}return i.ratio=function(s){return n((s=+s)>1?s:1)},i}(phi);function treemap(){var n=treemapSquarify,t=!1,i=1,s=1,o=[0],f=constantZero,d=constantZero,p=constantZero,v=constantZero,_=constantZero;function k(L){return L.x0=L.y0=0,L.x1=i,L.y1=s,L.eachBefore(P),o=[0],t&&L.eachBefore(roundNode),L}function P(L){var G=o[L.depth],Z=L.x0+G,W=L.y0+G,j=L.x1-G,H=L.y1-G;j<Z&&(Z=j=(Z+j)/2),H<W&&(W=H=(W+H)/2),L.x0=Z,L.y0=W,L.x1=j,L.y1=H,L.children&&(G=o[L.depth+1]=f(L)/2,Z+=_(L)-G,W+=d(L)-G,j-=p(L)-G,H-=v(L)-G,j<Z&&(Z=j=(Z+j)/2),H<W&&(W=H=(W+H)/2),n(L,Z,W,j,H))}return k.round=function(L){return arguments.length?(t=!!L,k):t},k.size=function(L){return arguments.length?(i=+L[0],s=+L[1],k):[i,s]},k.tile=function(L){return arguments.length?(n=required(L),k):n},k.padding=function(L){return arguments.length?k.paddingInner(L).paddingOuter(L):k.paddingInner()},k.paddingInner=function(L){return arguments.length?(f=typeof L=="function"?L:constant(+L),k):f},k.paddingOuter=function(L){return arguments.length?k.paddingTop(L).paddingRight(L).paddingBottom(L).paddingLeft(L):k.paddingTop()},k.paddingTop=function(L){return arguments.length?(d=typeof L=="function"?L:constant(+L),k):d},k.paddingRight=function(L){return arguments.length?(p=typeof L=="function"?L:constant(+L),k):p},k.paddingBottom=function(L){return arguments.length?(v=typeof L=="function"?L:constant(+L),k):v},k.paddingLeft=function(L){return arguments.length?(_=typeof L=="function"?L:constant(+L),k):_},k}function treemapBinary(n,t,i,s,o){var f=n.children,d,p=f.length,v,_=new Array(p+1);for(_[0]=v=d=0;d<p;++d)_[d+1]=v+=f[d].value;k(0,p,n.value,t,i,s,o);function k(P,L,G,Z,W,j,H){if(P>=L-1){var me=f[P];me.x0=Z,me.y0=W,me.x1=j,me.y1=H;return}for(var $e=_[P],De=G/2+$e,le=P+1,Ce=L-1;le<Ce;){var Me=le+Ce>>>1;_[Me]<De?le=Me+1:Ce=Me}De-_[le-1]<_[le]-De&&P+1<le&&--le;var _n=_[le]-$e,_i=G-_n;if(j-Z>H-W){var ll=G?(Z*_i+j*_n)/G:j;k(P,le,_n,Z,W,ll,H),k(le,L,_i,ll,W,j,H)}else{var _l=G?(W*_i+H*_n)/G:H;k(P,le,_n,Z,W,j,_l),k(le,L,_i,Z,_l,j,H)}}}function treemapSliceDice(n,t,i,s,o){(n.depth&1?treemapSlice:treemapDice)(n,t,i,s,o)}const treemapResquarify=function n(t){function i(s,o,f,d,p){if((v=s._squarify)&&v.ratio===t)for(var v,_,k,P,L=-1,G,Z=v.length,W=s.value;++L<Z;){for(_=v[L],k=_.children,P=_.value=0,G=k.length;P<G;++P)_.value+=k[P].value;_.dice?treemapDice(_,o,f,d,W?f+=(p-f)*_.value/W:p):treemapSlice(_,o,f,W?o+=(d-o)*_.value/W:d,p),W-=_.value}else s._squarify=v=squarifyRatio(t,s,o,f,d,p),v.ratio=t}return i.ratio=function(s){return n((s=+s)>1?s:1)},i}(phi);function lookup$2(n,t,i){const s={};return n.each(o=>{const f=o.data;i(f)&&(s[t(f)]=o)}),n.lookup=s,n}function Nest(n){Transform.call(this,null,n)}Nest.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const children$2=n=>n.values;inherits(Nest,Transform,{transform(n,t){t.source||error$1("Nest transform requires an upstream data source.");var i=n.generate,s=n.modified(),o=t.clone(),f=this.value;return(!f||s||t.changed())&&(f&&f.each(d=>{d.children&&isTuple(d.data)&&o.rem.push(d.data)}),this.value=f=hierarchy({values:array$5(n.keys).reduce((d,p)=>(d.key(p),d),nest()).entries(o.source)},children$2),i&&f.each(d=>{d.children&&(d=ingest$1(d.data),o.add.push(d),o.source.push(d))}),lookup$2(f,tupleid,tupleid)),o.source.root=f,o}});function nest(){const n=[],t={entries:o=>s(i(o,0),0),key:o=>(n.push(o),t)};function i(o,f){if(f>=n.length)return o;const d=o.length,p=n[f++],v={},_={};let k=-1,P,L,G;for(;++k<d;)P=p(L=o[k])+"",(G=v[P])?G.push(L):v[P]=[L];for(P in v)_[P]=i(v[P],f);return _}function s(o,f){if(++f>n.length)return o;const d=[];for(const p in o)d.push({key:p,values:s(o[p],f)});return d}return t}function HierarchyLayout(n){Transform.call(this,null,n)}const defaultSeparation=(n,t)=>n.parent===t.parent?1:2;inherits(HierarchyLayout,Transform,{transform(n,t){(!t.source||!t.source.root)&&error$1(this.constructor.name+" transform requires a backing tree data source.");const i=this.layout(n.method),s=this.fields,o=t.source.root,f=n.as||s;n.field?o.sum(n.field):o.count(),n.sort&&o.sort(stableCompare(n.sort,d=>d.data)),setParams(i,this.params,n),i.separation&&i.separation(n.separation!==!1?defaultSeparation:one$3);try{this.value=i(o)}catch(d){error$1(d)}return o.each(d=>setFields(d,s,f)),t.reflow(n.modified()).modifies(f).modifies("leaf")}});function setParams(n,t,i){for(let s,o=0,f=t.length;o<f;++o)s=t[o],s in i&&n[s](i[s])}function setFields(n,t,i){const s=n.data,o=t.length-1;for(let f=0;f<o;++f)s[i[f]]=n[t[f]];s[i[o]]=n.children?n.children.length:0}const Output$3=["x","y","r","depth","children"];function Pack(n){HierarchyLayout.call(this,n)}Pack.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Output$3.length,default:Output$3}]};inherits(Pack,HierarchyLayout,{layout:pack,params:["radius","size","padding"],fields:Output$3});const Output$2=["x0","y0","x1","y1","depth","children"];function Partition(n){HierarchyLayout.call(this,n)}Partition.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Output$2.length,default:Output$2}]};inherits(Partition,HierarchyLayout,{layout:partition$1,params:["size","round","padding"],fields:Output$2});function Stratify(n){Transform.call(this,null,n)}Stratify.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};inherits(Stratify,Transform,{transform(n,t){t.source||error$1("Stratify transform requires an upstream data source.");let i=this.value;const s=n.modified(),o=t.fork(t.ALL).materialize(t.SOURCE),f=!i||s||t.changed(t.ADD_REM)||t.modified(n.key.fields)||t.modified(n.parentKey.fields);return o.source=o.source.slice(),f&&(i=o.source.length?lookup$2(stratify().id(n.key).parentId(n.parentKey)(o.source),n.key,truthy):lookup$2(stratify()([{}]),n.key,n.key)),o.source.root=this.value=i,o}});const Layouts={tidy:tree$1,cluster},Output$1$1=["x","y","depth","children"];function Tree(n){HierarchyLayout.call(this,n)}Tree.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Output$1$1.length,default:Output$1$1}]};inherits(Tree,HierarchyLayout,{layout(n){const t=n||"tidy";if(has$1(Layouts,t))return Layouts[t]();error$1("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Output$1$1});function TreeLinks(n){Transform.call(this,[],n)}TreeLinks.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};inherits(TreeLinks,Transform,{transform(n,t){const i=this.value,s=t.source&&t.source.root,o=t.fork(t.NO_SOURCE),f={};return s||error$1("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(o.rem=i,t.visit(t.SOURCE,d=>f[tupleid(d)]=1),s.each(d=>{const p=d.data,v=d.parent&&d.parent.data;v&&f[tupleid(p)]&&f[tupleid(v)]&&o.add.push(ingest$1({source:v,target:p}))}),this.value=o.add):t.changed(t.MOD)&&(t.visit(t.MOD,d=>f[tupleid(d)]=1),i.forEach(d=>{(f[tupleid(d.source)]||f[tupleid(d.target)])&&o.mod.push(d)})),o}});const Tiles={binary:treemapBinary,dice:treemapDice,slice:treemapSlice,slicedice:treemapSliceDice,squarify:treemapSquarify,resquarify:treemapResquarify},Output$4=["x0","y0","x1","y1","depth","children"];function Treemap(n){HierarchyLayout.call(this,n)}Treemap.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Output$4.length,default:Output$4}]};inherits(Treemap,HierarchyLayout,{layout(){const n=treemap();return n.ratio=t=>{const i=n.tile();i.ratio&&n.tile(i.ratio(t))},n.method=t=>{has$1(Tiles,t)?n.tile(Tiles[t]):error$1("Unrecognized Treemap layout method: "+t)},n},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Output$4});const tree=Object.freeze(Object.defineProperty({__proto__:null,nest:Nest,pack:Pack,partition:Partition,stratify:Stratify,tree:Tree,treelinks:TreeLinks,treemap:Treemap},Symbol.toStringTag,{value:"Module"})),ALPHA_MASK=4278190080;function baseBitmaps(n,t){const i=n.bitmap();return(t||[]).forEach(s=>i.set(n(s.boundary[0]),n(s.boundary[3]))),[i,void 0]}function markBitmaps(n,t,i,s,o){const f=n.width,d=n.height,p=s||o,v=domCanvas(f,d).getContext("2d"),_=domCanvas(f,d).getContext("2d"),k=p&&domCanvas(f,d).getContext("2d");i.forEach(_n=>draw(v,_n,!1)),draw(_,t,!1),p&&draw(k,t,!0);const P=getBuffer(v,f,d),L=getBuffer(_,f,d),G=p&&getBuffer(k,f,d),Z=n.bitmap(),W=p&&n.bitmap();let j,H,me,$e,De,le,Ce,Me;for(H=0;H<d;++H)for(j=0;j<f;++j)De=H*f+j,le=P[De]&ALPHA_MASK,Me=L[De]&ALPHA_MASK,Ce=p&&G[De]&ALPHA_MASK,(le||Ce||Me)&&(me=n(j),$e=n(H),!o&&(le||Me)&&Z.set(me,$e),p&&(le||Ce)&&W.set(me,$e));return[Z,W]}function getBuffer(n,t,i){return new Uint32Array(n.getImageData(0,0,t,i).data.buffer)}function draw(n,t,i){if(!t.length)return;const s=t[0].mark.marktype;s==="group"?t.forEach(o=>{o.items.forEach(f=>draw(n,f.items,i))}):Marks[s].draw(n,{items:i?t.map(prepare):t})}function prepare(n){const t=rederive(n,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const DIV=5,MOD=31,SIZE$1=32,RIGHT0=new Uint32Array(SIZE$1+1),RIGHT1=new Uint32Array(SIZE$1+1);RIGHT1[0]=0;RIGHT0[0]=~RIGHT1[0];for(let n=1;n<=SIZE$1;++n)RIGHT1[n]=RIGHT1[n-1]<<1|1,RIGHT0[n]=~RIGHT1[n];function Bitmap(n,t){const i=new Uint32Array(~~((n*t+SIZE$1)/SIZE$1));function s(f,d){i[f]|=d}function o(f,d){i[f]&=d}return{array:i,get:(f,d)=>{const p=d*n+f;return i[p>>>DIV]&1<<(p&MOD)},set:(f,d)=>{const p=d*n+f;s(p>>>DIV,1<<(p&MOD))},clear:(f,d)=>{const p=d*n+f;o(p>>>DIV,~(1<<(p&MOD)))},getRange:(f,d,p,v)=>{let _=v,k,P,L,G;for(;_>=d;--_)if(k=_*n+f,P=_*n+p,L=k>>>DIV,G=P>>>DIV,L===G){if(i[L]&RIGHT0[k&MOD]&RIGHT1[(P&MOD)+1])return!0}else{if(i[L]&RIGHT0[k&MOD]||i[G]&RIGHT1[(P&MOD)+1])return!0;for(let Z=L+1;Z<G;++Z)if(i[Z])return!0}return!1},setRange:(f,d,p,v)=>{let _,k,P,L,G;for(;d<=v;++d)if(_=d*n+f,k=d*n+p,P=_>>>DIV,L=k>>>DIV,P===L)s(P,RIGHT0[_&MOD]&RIGHT1[(k&MOD)+1]);else for(s(P,RIGHT0[_&MOD]),s(L,RIGHT1[(k&MOD)+1]),G=P+1;G<L;++G)s(G,4294967295)},clearRange:(f,d,p,v)=>{let _,k,P,L,G;for(;d<=v;++d)if(_=d*n+f,k=d*n+p,P=_>>>DIV,L=k>>>DIV,P===L)o(P,RIGHT1[_&MOD]|RIGHT0[(k&MOD)+1]);else for(o(P,RIGHT1[_&MOD]),o(L,RIGHT0[(k&MOD)+1]),G=P+1;G<L;++G)o(G,0)},outOfBounds:(f,d,p,v)=>f<0||d<0||v>=t||p>=n}}function scaler(n,t,i){const s=Math.max(1,Math.sqrt(n*t/1e6)),o=~~((n+2*i+s)/s),f=~~((t+2*i+s)/s),d=p=>~~((p+i)/s);return d.invert=p=>p*s-i,d.bitmap=()=>Bitmap(o,f),d.ratio=s,d.padding=i,d.width=n,d.height=t,d}function placeAreaLabelNaive(n,t,i,s){const o=n.width,f=n.height;return function(d){const p=d.datum.datum.items[s].items,v=p.length,_=d.datum.fontSize,k=textMetrics.width(d.datum,d.datum.text);let P=0,L,G,Z,W,j,H,me;for(let $e=0;$e<v;++$e)L=p[$e].x,Z=p[$e].y,G=p[$e].x2===void 0?L:p[$e].x2,W=p[$e].y2===void 0?Z:p[$e].y2,j=(L+G)/2,H=(Z+W)/2,me=Math.abs(G-L+W-Z),me>=P&&(P=me,d.x=j,d.y=H);return j=k/2,H=_/2,L=d.x-j,G=d.x+j,Z=d.y-H,W=d.y+H,d.align="center",L<0&&G<=o?d.align="left":0<=L&&o<G&&(d.align="right"),d.baseline="middle",Z<0&&W<=f?d.baseline="top":0<=Z&&f<W&&(d.baseline="bottom"),!0}}function outOfBounds(n,t,i,s,o,f){let d=i/2;return n-d<0||n+d>o||t-(d=s/2)<0||t+d>f}function collision(n,t,i,s,o,f,d,p){const v=o*f/(s*2),_=n(t-v),k=n(t+v),P=n(i-(f=f/2)),L=n(i+f);return d.outOfBounds(_,P,k,L)||d.getRange(_,P,k,L)||p&&p.getRange(_,P,k,L)}function placeAreaLabelReducedSearch(n,t,i,s){const o=n.width,f=n.height,d=t[0],p=t[1];function v(_,k,P,L,G){const Z=n.invert(_),W=n.invert(k);let j=P,H=f,me;if(!outOfBounds(Z,W,L,G,o,f)&&!collision(n,Z,W,G,L,j,d,p)&&!collision(n,Z,W,G,L,G,d,null)){for(;H-j>=1;)me=(j+H)/2,collision(n,Z,W,G,L,me,d,p)?H=me:j=me;if(j>P)return[Z,W,j,!0]}}return function(_){const k=_.datum.datum.items[s].items,P=k.length,L=_.datum.fontSize,G=textMetrics.width(_.datum,_.datum.text);let Z=i?L:0,W=!1,j=!1,H=0,me,$e,De,le,Ce,Me,_n,_i,ll,_l,oa,Ru,ga,_s,Sa,Ra,Da;for(let Fa=0;Fa<P;++Fa){for(me=k[Fa].x,De=k[Fa].y,$e=k[Fa].x2===void 0?me:k[Fa].x2,le=k[Fa].y2===void 0?De:k[Fa].y2,me>$e&&(Da=me,me=$e,$e=Da),De>le&&(Da=De,De=le,le=Da),ll=n(me),oa=n($e),_l=~~((ll+oa)/2),Ru=n(De),_s=n(le),ga=~~((Ru+_s)/2),_n=_l;_n>=ll;--_n)for(_i=ga;_i>=Ru;--_i)Ra=v(_n,_i,Z,G,L),Ra&&([_.x,_.y,Z,W]=Ra);for(_n=_l;_n<=oa;++_n)for(_i=ga;_i<=_s;++_i)Ra=v(_n,_i,Z,G,L),Ra&&([_.x,_.y,Z,W]=Ra);!W&&!i&&(Sa=Math.abs($e-me+le-De),Ce=(me+$e)/2,Me=(De+le)/2,Sa>=H&&!outOfBounds(Ce,Me,G,L,o,f)&&!collision(n,Ce,Me,L,G,L,d,null)&&(H=Sa,_.x=Ce,_.y=Me,j=!0))}return W||j?(Ce=G/2,Me=L/2,d.setRange(n(_.x-Ce),n(_.y-Me),n(_.x+Ce),n(_.y+Me)),_.align="center",_.baseline="middle",!0):!1}}const X_DIR=[-1,-1,1,1],Y_DIR=[-1,1,-1,1];function placeAreaLabelFloodFill(n,t,i,s){const o=n.width,f=n.height,d=t[0],p=t[1],v=n.bitmap();return function(_){const k=_.datum.datum.items[s].items,P=k.length,L=_.datum.fontSize,G=textMetrics.width(_.datum,_.datum.text),Z=[];let W=i?L:0,j=!1,H=!1,me=0,$e,De,le,Ce,Me,_n,_i,ll,_l,oa,Ru,ga;for(let _s=0;_s<P;++_s){for($e=k[_s].x,le=k[_s].y,De=k[_s].x2===void 0?$e:k[_s].x2,Ce=k[_s].y2===void 0?le:k[_s].y2,Z.push([n(($e+De)/2),n((le+Ce)/2)]);Z.length;)if([_i,ll]=Z.pop(),!(d.get(_i,ll)||p.get(_i,ll)||v.get(_i,ll))){v.set(_i,ll);for(let Sa=0;Sa<4;++Sa)Me=_i+X_DIR[Sa],_n=ll+Y_DIR[Sa],v.outOfBounds(Me,_n,Me,_n)||Z.push([Me,_n]);if(Me=n.invert(_i),_n=n.invert(ll),_l=W,oa=f,!outOfBounds(Me,_n,G,L,o,f)&&!collision(n,Me,_n,L,G,_l,d,p)&&!collision(n,Me,_n,L,G,L,d,null)){for(;oa-_l>=1;)Ru=(_l+oa)/2,collision(n,Me,_n,L,G,Ru,d,p)?oa=Ru:_l=Ru;_l>W&&(_.x=Me,_.y=_n,W=_l,j=!0)}}!j&&!i&&(ga=Math.abs(De-$e+Ce-le),Me=($e+De)/2,_n=(le+Ce)/2,ga>=me&&!outOfBounds(Me,_n,G,L,o,f)&&!collision(n,Me,_n,L,G,L,d,null)&&(me=ga,_.x=Me,_.y=_n,H=!0))}return j||H?(Me=G/2,_n=L/2,d.setRange(n(_.x-Me),n(_.y-_n),n(_.x+Me),n(_.y+_n)),_.align="center",_.baseline="middle",!0):!1}}const Aligns=["right","center","left"],Baselines=["bottom","middle","top"];function placeMarkLabel(n,t,i,s){const o=n.width,f=n.height,d=t[0],p=t[1],v=s.length;return function(_){const k=_.boundary,P=_.datum.fontSize;if(k[2]<0||k[5]<0||k[0]>o||k[3]>f)return!1;let L=_.textWidth??0,G,Z,W,j,H,me,$e,De,le,Ce,Me,_n,_i,ll,_l;for(let oa=0;oa<v;++oa){if(G=(i[oa]&3)-1,Z=(i[oa]>>>2&3)-1,W=G===0&&Z===0||s[oa]<0,j=G&&Z?Math.SQRT1_2:1,H=s[oa]<0?-1:1,me=k[1+G]+s[oa]*G*j,Me=k[4+Z]+H*P*Z/2+s[oa]*Z*j,De=Me-P/2,le=Me+P/2,_n=n(me),ll=n(De),_l=n(le),!L)if(test(_n,_n,ll,_l,d,p,me,me,De,le,k,W))L=textMetrics.width(_.datum,_.datum.text);else continue;if(Ce=me+H*L*G/2,me=Ce-L/2,$e=Ce+L/2,_n=n(me),_i=n($e),test(_n,_i,ll,_l,d,p,me,$e,De,le,k,W))return _.x=G?G*H<0?$e:me:Ce,_.y=Z?Z*H<0?le:De:Me,_.align=Aligns[G*H+1],_.baseline=Baselines[Z*H+1],d.setRange(_n,ll,_i,_l),!0}return!1}}function test(n,t,i,s,o,f,d,p,v,_,k,P){return!(o.outOfBounds(n,i,t,s)||(P&&f||o).getRange(n,i,t,s))}const TOP=0,MIDDLE=4,BOTTOM=8,LEFT=0,CENTER$1=1,RIGHT=2,anchorCode={"top-left":TOP+LEFT,top:TOP+CENTER$1,"top-right":TOP+RIGHT,left:MIDDLE+LEFT,middle:MIDDLE+CENTER$1,right:MIDDLE+RIGHT,"bottom-left":BOTTOM+LEFT,bottom:BOTTOM+CENTER$1,"bottom-right":BOTTOM+RIGHT},placeAreaLabel={naive:placeAreaLabelNaive,"reduced-search":placeAreaLabelReducedSearch,floodfill:placeAreaLabelFloodFill};function labelLayout(n,t,i,s,o,f,d,p,v,_,k){if(!n.length)return n;const P=Math.max(s.length,o.length),L=getOffsets(s,P),G=getAnchors(o,P),Z=markType(n[0].datum),W=Z==="group"&&n[0].datum.items[v].marktype,j=W==="area",H=markBoundary(Z,W,p,v),me=_===null||_===1/0,$e=j&&k==="naive";let De=-1,le=-1;const Ce=n.map(ll=>{const _l=me?textMetrics.width(ll,ll.text):void 0;return De=Math.max(De,_l),le=Math.max(le,ll.fontSize),{datum:ll,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:H(ll),textWidth:_l}});_=_===null||_===1/0?Math.max(De,le)+Math.max(...s):_;const Me=scaler(t[0],t[1],_);let _n;if(!$e){i&&Ce.sort((oa,Ru)=>i(oa.datum,Ru.datum));let ll=!1;for(let oa=0;oa<G.length&&!ll;++oa)ll=G[oa]===5||L[oa]<0;const _l=(Z&&d||j)&&n.map(oa=>oa.datum);_n=f.length||_l?markBitmaps(Me,_l||[],f,ll,j):baseBitmaps(Me,d&&Ce)}const _i=j?placeAreaLabel[k](Me,_n,d,v):placeMarkLabel(Me,_n,G,L);return Ce.forEach(ll=>ll.opacity=+_i(ll)),Ce}function getOffsets(n,t){const i=new Float64Array(t),s=n.length;for(let o=0;o<s;++o)i[o]=n[o]||0;for(let o=s;o<t;++o)i[o]=i[s-1];return i}function getAnchors(n,t){const i=new Int8Array(t),s=n.length;for(let o=0;o<s;++o)i[o]|=anchorCode[n[o]];for(let o=s;o<t;++o)i[o]=i[s-1];return i}function markType(n){return n&&n.mark&&n.mark.marktype}function markBoundary(n,t,i,s){const o=f=>[f.x,f.x,f.x,f.y,f.y,f.y];return n?n==="line"||n==="area"?f=>o(f.datum):t==="line"?f=>{const d=f.datum.items[s].items;return o(d.length?d[i==="start"?0:d.length-1]:{x:NaN,y:NaN})}:f=>{const d=f.datum.bounds;return[d.x1,(d.x1+d.x2)/2,d.x2,d.y1,(d.y1+d.y2)/2,d.y2]}:o}const Output$1=["x","y","opacity","align","baseline"],Anchors=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Label$1(n){Transform.call(this,null,n)}Label$1.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Anchors},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Output$1.length,default:Output$1}]};inherits(Label$1,Transform,{transform(n,t){function i(f){const d=n[f];return isFunction$1(d)&&t.modified(d.fields)}const s=n.modified();if(!(s||t.changed(t.ADD_REM)||i("sort")))return;(!n.size||n.size.length!==2)&&error$1("Size parameter should be specified as a [width, height] array.");const o=n.as||Output$1;return labelLayout(t.materialize(t.SOURCE).source||[],n.size,n.sort,array$5(n.offset==null?1:n.offset),array$5(n.anchor||Anchors),n.avoidMarks||[],n.avoidBaseMark!==!1,n.lineAnchor||"end",n.markIndex||0,n.padding===void 0?0:n.padding,n.method||"naive").forEach(f=>{const d=f.datum;d[o[0]]=f.x,d[o[1]]=f.y,d[o[2]]=f.opacity,d[o[3]]=f.align,d[o[4]]=f.baseline}),t.reflow(s).modifies(o)}});const label=Object.freeze(Object.defineProperty({__proto__:null,label:Label$1},Symbol.toStringTag,{value:"Module"}));function partition(n,t){var i=[],s=function(k){return k(p)},o,f,d,p,v,_;if(t==null)i.push(n);else for(o={},f=0,d=n.length;f<d;++f)p=n[f],v=t.map(s),_=o[v],_||(o[v]=_=[],_.dims=v,i.push(_)),_.push(p);return i}function Loess(n){Transform.call(this,null,n)}Loess.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};inherits(Loess,Transform,{transform(n,t){const i=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||n.modified()){const s=t.materialize(t.SOURCE).source,o=partition(s,n.groupby),f=(n.groupby||[]).map(accessorName),d=f.length,p=n.as||[accessorName(n.x),accessorName(n.y)],v=[];o.forEach(_=>{loess(_,n.x,n.y,n.bandwidth||.3).forEach(k=>{const P={};for(let L=0;L<d;++L)P[f[L]]=_.dims[L];P[p[0]]=k[0],P[p[1]]=k[1],v.push(ingest$1(P))})}),this.value&&(i.rem=this.value),this.value=i.add=i.source=v}return i}});const Methods={constant:constant$5,linear:linear$3,log:log$5,exp:exp$2,pow:pow$a,quad,poly},degreesOfFreedom=(n,t)=>n==="poly"?t:n==="quad"?2:1;function Regression(n){Transform.call(this,null,n)}Regression.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Methods)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};inherits(Regression,Transform,{transform(n,t){const i=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||n.modified()){const s=t.materialize(t.SOURCE).source,o=partition(s,n.groupby),f=(n.groupby||[]).map(accessorName),d=n.method||"linear",p=n.order==null?3:n.order,v=degreesOfFreedom(d,p),_=n.as||[accessorName(n.x),accessorName(n.y)],k=Methods[d],P=[];let L=n.extent;has$1(Methods,d)||error$1("Invalid regression method: "+d),L!=null&&d==="log"&&L[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),L=null),o.forEach(G=>{if(G.length<=v){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const W=k(G,n.x,n.y,p);if(n.params){P.push(ingest$1({keys:G.dims,coef:W.coef,rSquared:W.rSquared}));return}const j=L||extent(G,n.x),H=me=>{const $e={};for(let De=0;De<f.length;++De)$e[f[De]]=G.dims[De];$e[_[0]]=me[0],$e[_[1]]=me[1],P.push(ingest$1($e))};d==="linear"||d==="constant"?j.forEach(me=>H([me,W.predict(me)])):sampleCurve(W.predict,j,25,200).forEach(H)}),this.value&&(i.rem=this.value),this.value=i.add=i.source=P}return i}});const reg=Object.freeze(Object.defineProperty({__proto__:null,loess:Loess,regression:Regression},Symbol.toStringTag,{value:"Module"})),epsilon$2=11102230246251565e-32,splitter=134217729,resulterrbound=(3+8*epsilon$2)*epsilon$2;function sum(n,t,i,s,o){let f,d,p,v,_=t[0],k=s[0],P=0,L=0;k>_==k>-_?(f=_,_=t[++P]):(f=k,k=s[++L]);let G=0;if(P<n&&L<i)for(k>_==k>-_?(d=_+f,p=f-(d-_),_=t[++P]):(d=k+f,p=f-(d-k),k=s[++L]),f=d,p!==0&&(o[G++]=p);P<n&&L<i;)k>_==k>-_?(d=f+_,v=d-f,p=f-(d-v)+(_-v),_=t[++P]):(d=f+k,v=d-f,p=f-(d-v)+(k-v),k=s[++L]),f=d,p!==0&&(o[G++]=p);for(;P<n;)d=f+_,v=d-f,p=f-(d-v)+(_-v),_=t[++P],f=d,p!==0&&(o[G++]=p);for(;L<i;)d=f+k,v=d-f,p=f-(d-v)+(k-v),k=s[++L],f=d,p!==0&&(o[G++]=p);return(f!==0||G===0)&&(o[G++]=f),G}function estimate(n,t){let i=t[0];for(let s=1;s<n;s++)i+=t[s];return i}function vec(n){return new Float64Array(n)}const ccwerrboundA=(3+16*epsilon$2)*epsilon$2,ccwerrboundB=(2+12*epsilon$2)*epsilon$2,ccwerrboundC=(9+64*epsilon$2)*epsilon$2*epsilon$2,B=vec(4),C1$1=vec(8),C2$1=vec(12),D$1=vec(16),u$1=vec(4);function orient2dadapt(n,t,i,s,o,f,d){let p,v,_,k,P,L,G,Z,W,j,H,me,$e,De,le,Ce,Me,_n;const _i=n-o,ll=i-o,_l=t-f,oa=s-f;De=_i*oa,L=splitter*_i,G=L-(L-_i),Z=_i-G,L=splitter*oa,W=L-(L-oa),j=oa-W,le=Z*j-(De-G*W-Z*W-G*j),Ce=_l*ll,L=splitter*_l,G=L-(L-_l),Z=_l-G,L=splitter*ll,W=L-(L-ll),j=ll-W,Me=Z*j-(Ce-G*W-Z*W-G*j),H=le-Me,P=le-H,B[0]=le-(H+P)+(P-Me),me=De+H,P=me-De,$e=De-(me-P)+(H-P),H=$e-Ce,P=$e-H,B[1]=$e-(H+P)+(P-Ce),_n=me+H,P=_n-me,B[2]=me-(_n-P)+(H-P),B[3]=_n;let Ru=estimate(4,B),ga=ccwerrboundB*d;if(Ru>=ga||-Ru>=ga||(P=n-_i,p=n-(_i+P)+(P-o),P=i-ll,_=i-(ll+P)+(P-o),P=t-_l,v=t-(_l+P)+(P-f),P=s-oa,k=s-(oa+P)+(P-f),p===0&&v===0&&_===0&&k===0)||(ga=ccwerrboundC*d+resulterrbound*Math.abs(Ru),Ru+=_i*k+oa*p-(_l*_+ll*v),Ru>=ga||-Ru>=ga))return Ru;De=p*oa,L=splitter*p,G=L-(L-p),Z=p-G,L=splitter*oa,W=L-(L-oa),j=oa-W,le=Z*j-(De-G*W-Z*W-G*j),Ce=v*ll,L=splitter*v,G=L-(L-v),Z=v-G,L=splitter*ll,W=L-(L-ll),j=ll-W,Me=Z*j-(Ce-G*W-Z*W-G*j),H=le-Me,P=le-H,u$1[0]=le-(H+P)+(P-Me),me=De+H,P=me-De,$e=De-(me-P)+(H-P),H=$e-Ce,P=$e-H,u$1[1]=$e-(H+P)+(P-Ce),_n=me+H,P=_n-me,u$1[2]=me-(_n-P)+(H-P),u$1[3]=_n;const _s=sum(4,B,4,u$1,C1$1);De=_i*k,L=splitter*_i,G=L-(L-_i),Z=_i-G,L=splitter*k,W=L-(L-k),j=k-W,le=Z*j-(De-G*W-Z*W-G*j),Ce=_l*_,L=splitter*_l,G=L-(L-_l),Z=_l-G,L=splitter*_,W=L-(L-_),j=_-W,Me=Z*j-(Ce-G*W-Z*W-G*j),H=le-Me,P=le-H,u$1[0]=le-(H+P)+(P-Me),me=De+H,P=me-De,$e=De-(me-P)+(H-P),H=$e-Ce,P=$e-H,u$1[1]=$e-(H+P)+(P-Ce),_n=me+H,P=_n-me,u$1[2]=me-(_n-P)+(H-P),u$1[3]=_n;const Sa=sum(_s,C1$1,4,u$1,C2$1);De=p*k,L=splitter*p,G=L-(L-p),Z=p-G,L=splitter*k,W=L-(L-k),j=k-W,le=Z*j-(De-G*W-Z*W-G*j),Ce=v*_,L=splitter*v,G=L-(L-v),Z=v-G,L=splitter*_,W=L-(L-_),j=_-W,Me=Z*j-(Ce-G*W-Z*W-G*j),H=le-Me,P=le-H,u$1[0]=le-(H+P)+(P-Me),me=De+H,P=me-De,$e=De-(me-P)+(H-P),H=$e-Ce,P=$e-H,u$1[1]=$e-(H+P)+(P-Ce),_n=me+H,P=_n-me,u$1[2]=me-(_n-P)+(H-P),u$1[3]=_n;const Ra=sum(Sa,C2$1,4,u$1,D$1);return D$1[Ra-1]}function orient2d(n,t,i,s,o,f){const d=(t-f)*(i-o),p=(n-o)*(s-f),v=d-p,_=Math.abs(d+p);return Math.abs(v)>=ccwerrboundA*_?v:-orient2dadapt(n,t,i,s,o,f,_)}const EPSILON=Math.pow(2,-52),EDGE_STACK=new Uint32Array(512);class Delaunator{static from(t,i=defaultGetX,s=defaultGetY){const o=t.length,f=new Float64Array(o*2);for(let d=0;d<o;d++){const p=t[d];f[2*d]=i(p),f[2*d+1]=s(p)}return new Delaunator(f)}constructor(t){const i=t.length>>1;if(i>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const s=Math.max(2*i-5,0);this._triangles=new Uint32Array(s*3),this._halfedges=new Int32Array(s*3),this._hashSize=Math.ceil(Math.sqrt(i)),this._hullPrev=new Uint32Array(i),this._hullNext=new Uint32Array(i),this._hullTri=new Uint32Array(i),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(i),this._dists=new Float64Array(i),this.update()}update(){const{coords:t,_hullPrev:i,_hullNext:s,_hullTri:o,_hullHash:f}=this,d=t.length>>1;let p=1/0,v=1/0,_=-1/0,k=-1/0;for(let _i=0;_i<d;_i++){const ll=t[2*_i],_l=t[2*_i+1];ll<p&&(p=ll),_l<v&&(v=_l),ll>_&&(_=ll),_l>k&&(k=_l),this._ids[_i]=_i}const P=(p+_)/2,L=(v+k)/2;let G,Z,W;for(let _i=0,ll=1/0;_i<d;_i++){const _l=dist(P,L,t[2*_i],t[2*_i+1]);_l<ll&&(G=_i,ll=_l)}const j=t[2*G],H=t[2*G+1];for(let _i=0,ll=1/0;_i<d;_i++){if(_i===G)continue;const _l=dist(j,H,t[2*_i],t[2*_i+1]);_l<ll&&_l>0&&(Z=_i,ll=_l)}let me=t[2*Z],$e=t[2*Z+1],De=1/0;for(let _i=0;_i<d;_i++){if(_i===G||_i===Z)continue;const ll=circumradius(j,H,me,$e,t[2*_i],t[2*_i+1]);ll<De&&(W=_i,De=ll)}let le=t[2*W],Ce=t[2*W+1];if(De===1/0){for(let _l=0;_l<d;_l++)this._dists[_l]=t[2*_l]-t[0]||t[2*_l+1]-t[1];quicksort(this._ids,this._dists,0,d-1);const _i=new Uint32Array(d);let ll=0;for(let _l=0,oa=-1/0;_l<d;_l++){const Ru=this._ids[_l],ga=this._dists[Ru];ga>oa&&(_i[ll++]=Ru,oa=ga)}this.hull=_i.subarray(0,ll),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(orient2d(j,H,me,$e,le,Ce)<0){const _i=Z,ll=me,_l=$e;Z=W,me=le,$e=Ce,W=_i,le=ll,Ce=_l}const Me=circumcenter(j,H,me,$e,le,Ce);this._cx=Me.x,this._cy=Me.y;for(let _i=0;_i<d;_i++)this._dists[_i]=dist(t[2*_i],t[2*_i+1],Me.x,Me.y);quicksort(this._ids,this._dists,0,d-1),this._hullStart=G;let _n=3;s[G]=i[W]=Z,s[Z]=i[G]=W,s[W]=i[Z]=G,o[G]=0,o[Z]=1,o[W]=2,f.fill(-1),f[this._hashKey(j,H)]=G,f[this._hashKey(me,$e)]=Z,f[this._hashKey(le,Ce)]=W,this.trianglesLen=0,this._addTriangle(G,Z,W,-1,-1,-1);for(let _i=0,ll,_l;_i<this._ids.length;_i++){const oa=this._ids[_i],Ru=t[2*oa],ga=t[2*oa+1];if(_i>0&&Math.abs(Ru-ll)<=EPSILON&&Math.abs(ga-_l)<=EPSILON||(ll=Ru,_l=ga,oa===G||oa===Z||oa===W))continue;let _s=0;for(let Na=0,_a=this._hashKey(Ru,ga);Na<this._hashSize&&(_s=f[(_a+Na)%this._hashSize],!(_s!==-1&&_s!==s[_s]));Na++);_s=i[_s];let Sa=_s,Ra;for(;Ra=s[Sa],orient2d(Ru,ga,t[2*Sa],t[2*Sa+1],t[2*Ra],t[2*Ra+1])>=0;)if(Sa=Ra,Sa===_s){Sa=-1;break}if(Sa===-1)continue;let Da=this._addTriangle(Sa,oa,s[Sa],-1,-1,o[Sa]);o[oa]=this._legalize(Da+2),o[Sa]=Da,_n++;let Fa=s[Sa];for(;Ra=s[Fa],orient2d(Ru,ga,t[2*Fa],t[2*Fa+1],t[2*Ra],t[2*Ra+1])<0;)Da=this._addTriangle(Fa,oa,Ra,o[oa],-1,o[Fa]),o[oa]=this._legalize(Da+2),s[Fa]=Fa,_n--,Fa=Ra;if(Sa===_s)for(;Ra=i[Sa],orient2d(Ru,ga,t[2*Ra],t[2*Ra+1],t[2*Sa],t[2*Sa+1])<0;)Da=this._addTriangle(Ra,oa,Sa,-1,o[Sa],o[Ra]),this._legalize(Da+2),o[Ra]=Da,s[Sa]=Sa,_n--,Sa=Ra;this._hullStart=i[oa]=Sa,s[Sa]=i[Fa]=oa,s[oa]=Fa,f[this._hashKey(Ru,ga)]=oa,f[this._hashKey(t[2*Sa],t[2*Sa+1])]=Sa}this.hull=new Uint32Array(_n);for(let _i=0,ll=this._hullStart;_i<_n;_i++)this.hull[_i]=ll,ll=s[ll];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,i){return Math.floor(pseudoAngle(t-this._cx,i-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:i,_halfedges:s,coords:o}=this;let f=0,d=0;for(;;){const p=s[t],v=t-t%3;if(d=v+(t+2)%3,p===-1){if(f===0)break;t=EDGE_STACK[--f];continue}const _=p-p%3,k=v+(t+1)%3,P=_+(p+2)%3,L=i[d],G=i[t],Z=i[k],W=i[P];if(inCircle(o[2*L],o[2*L+1],o[2*G],o[2*G+1],o[2*Z],o[2*Z+1],o[2*W],o[2*W+1])){i[t]=W,i[p]=L;const H=s[P];if(H===-1){let $e=this._hullStart;do{if(this._hullTri[$e]===P){this._hullTri[$e]=t;break}$e=this._hullPrev[$e]}while($e!==this._hullStart)}this._link(t,H),this._link(p,s[d]),this._link(d,P);const me=_+(p+1)%3;f<EDGE_STACK.length&&(EDGE_STACK[f++]=me)}else{if(f===0)break;t=EDGE_STACK[--f]}}return d}_link(t,i){this._halfedges[t]=i,i!==-1&&(this._halfedges[i]=t)}_addTriangle(t,i,s,o,f,d){const p=this.trianglesLen;return this._triangles[p]=t,this._triangles[p+1]=i,this._triangles[p+2]=s,this._link(p,o),this._link(p+1,f),this._link(p+2,d),this.trianglesLen+=3,p}}function pseudoAngle(n,t){const i=n/(Math.abs(n)+Math.abs(t));return(t>0?3-i:1+i)/4}function dist(n,t,i,s){const o=n-i,f=t-s;return o*o+f*f}function inCircle(n,t,i,s,o,f,d,p){const v=n-d,_=t-p,k=i-d,P=s-p,L=o-d,G=f-p,Z=v*v+_*_,W=k*k+P*P,j=L*L+G*G;return v*(P*j-W*G)-_*(k*j-W*L)+Z*(k*G-P*L)<0}function circumradius(n,t,i,s,o,f){const d=i-n,p=s-t,v=o-n,_=f-t,k=d*d+p*p,P=v*v+_*_,L=.5/(d*_-p*v),G=(_*k-p*P)*L,Z=(d*P-v*k)*L;return G*G+Z*Z}function circumcenter(n,t,i,s,o,f){const d=i-n,p=s-t,v=o-n,_=f-t,k=d*d+p*p,P=v*v+_*_,L=.5/(d*_-p*v),G=n+(_*k-p*P)*L,Z=t+(d*P-v*k)*L;return{x:G,y:Z}}function quicksort(n,t,i,s){if(s-i<=20)for(let o=i+1;o<=s;o++){const f=n[o],d=t[f];let p=o-1;for(;p>=i&&t[n[p]]>d;)n[p+1]=n[p--];n[p+1]=f}else{const o=i+s>>1;let f=i+1,d=s;swap(n,o,f),t[n[i]]>t[n[s]]&&swap(n,i,s),t[n[f]]>t[n[s]]&&swap(n,f,s),t[n[i]]>t[n[f]]&&swap(n,i,f);const p=n[f],v=t[p];for(;;){do f++;while(t[n[f]]<v);do d--;while(t[n[d]]>v);if(d<f)break;swap(n,f,d)}n[i+1]=n[d],n[d]=p,s-f+1>=d-i?(quicksort(n,t,f,s),quicksort(n,t,i,d-1)):(quicksort(n,t,i,d-1),quicksort(n,t,f,s))}}function swap(n,t,i){const s=n[t];n[t]=n[i],n[i]=s}function defaultGetX(n){return n[0]}function defaultGetY(n){return n[1]}const epsilon$1=1e-6;class Path{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,i){this._+=`L${this._x1=+t},${this._y1=+i}`}arc(t,i,s){t=+t,i=+i,s=+s;const o=t+s,f=i;if(s<0)throw new Error("negative radius");this._x1===null?this._+=`M${o},${f}`:(Math.abs(this._x1-o)>epsilon$1||Math.abs(this._y1-f)>epsilon$1)&&(this._+="L"+o+","+f),s&&(this._+=`A${s},${s},0,1,1,${t-s},${i}A${s},${s},0,1,1,${this._x1=o},${this._y1=f}`)}rect(t,i,s,o){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${+s}v${+o}h${-s}Z`}value(){return this._||null}}class Polygon{constructor(){this._=[]}moveTo(t,i){this._.push([t,i])}closePath(){this._.push(this._[0].slice())}lineTo(t,i){this._.push([t,i])}value(){return this._.length?this._:null}}let Voronoi$1=class{constructor(t,[i,s,o,f]=[0,0,960,500]){if(!((o=+o)>=(i=+i))||!((f=+f)>=(s=+s)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=o,this.xmin=i,this.ymax=f,this.ymin=s,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:i,triangles:s},vectors:o}=this;let f,d;const p=this.circumcenters=this._circumcenters.subarray(0,s.length/3*2);for(let W=0,j=0,H=s.length,me,$e;W<H;W+=3,j+=2){const De=s[W]*2,le=s[W+1]*2,Ce=s[W+2]*2,Me=t[De],_n=t[De+1],_i=t[le],ll=t[le+1],_l=t[Ce],oa=t[Ce+1],Ru=_i-Me,ga=ll-_n,_s=_l-Me,Sa=oa-_n,Ra=(Ru*Sa-ga*_s)*2;if(Math.abs(Ra)<1e-9){if(f===void 0){f=d=0;for(const Fa of i)f+=t[Fa*2],d+=t[Fa*2+1];f/=i.length,d/=i.length}const Da=1e9*Math.sign((f-Me)*Sa-(d-_n)*_s);me=(Me+_l)/2-Da*Sa,$e=(_n+oa)/2+Da*_s}else{const Da=1/Ra,Fa=Ru*Ru+ga*ga,Na=_s*_s+Sa*Sa;me=Me+(Sa*Fa-ga*Na)*Da,$e=_n+(Ru*Na-_s*Fa)*Da}p[j]=me,p[j+1]=$e}let v=i[i.length-1],_,k=v*4,P,L=t[2*v],G,Z=t[2*v+1];o.fill(0);for(let W=0;W<i.length;++W)v=i[W],_=k,P=L,G=Z,k=v*4,L=t[2*v],Z=t[2*v+1],o[_+2]=o[k]=G-Z,o[_+3]=o[k+1]=L-P}render(t){const i=t==null?t=new Path:void 0,{delaunay:{halfedges:s,inedges:o,hull:f},circumcenters:d,vectors:p}=this;if(f.length<=1)return null;for(let k=0,P=s.length;k<P;++k){const L=s[k];if(L<k)continue;const G=Math.floor(k/3)*2,Z=Math.floor(L/3)*2,W=d[G],j=d[G+1],H=d[Z],me=d[Z+1];this._renderSegment(W,j,H,me,t)}let v,_=f[f.length-1];for(let k=0;k<f.length;++k){v=_,_=f[k];const P=Math.floor(o[_]/3)*2,L=d[P],G=d[P+1],Z=v*4,W=this._project(L,G,p[Z+2],p[Z+3]);W&&this._renderSegment(L,G,W[0],W[1],t)}return i&&i.value()}renderBounds(t){const i=t==null?t=new Path:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),i&&i.value()}renderCell(t,i){const s=i==null?i=new Path:void 0,o=this._clip(t);if(o===null||!o.length)return;i.moveTo(o[0],o[1]);let f=o.length;for(;o[0]===o[f-2]&&o[1]===o[f-1]&&f>1;)f-=2;for(let d=2;d<f;d+=2)(o[d]!==o[d-2]||o[d+1]!==o[d-1])&&i.lineTo(o[d],o[d+1]);return i.closePath(),s&&s.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let i=0,s=t.length/2;i<s;++i){const o=this.cellPolygon(i);o&&(o.index=i,yield o)}}cellPolygon(t){const i=new Polygon;return this.renderCell(t,i),i.value()}_renderSegment(t,i,s,o,f){let d;const p=this._regioncode(t,i),v=this._regioncode(s,o);p===0&&v===0?(f.moveTo(t,i),f.lineTo(s,o)):(d=this._clipSegment(t,i,s,o,p,v))&&(f.moveTo(d[0],d[1]),f.lineTo(d[2],d[3]))}contains(t,i,s){return i=+i,i!==i||(s=+s,s!==s)?!1:this.delaunay._step(t,i,s)===t}*neighbors(t){const i=this._clip(t);if(i)for(const s of this.delaunay.neighbors(t)){const o=this._clip(s);if(o){e:for(let f=0,d=i.length;f<d;f+=2)for(let p=0,v=o.length;p<v;p+=2)if(i[f]===o[p]&&i[f+1]===o[p+1]&&i[(f+2)%d]===o[(p+v-2)%v]&&i[(f+3)%d]===o[(p+v-1)%v]){yield s;break e}}}}_cell(t){const{circumcenters:i,delaunay:{inedges:s,halfedges:o,triangles:f}}=this,d=s[t];if(d===-1)return null;const p=[];let v=d;do{const _=Math.floor(v/3);if(p.push(i[_*2],i[_*2+1]),v=v%3===2?v-2:v+1,f[v]!==t)break;v=o[v]}while(v!==d&&v!==-1);return p}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const i=this._cell(t);if(i===null)return null;const{vectors:s}=this,o=t*4;return this._simplify(s[o]||s[o+1]?this._clipInfinite(t,i,s[o],s[o+1],s[o+2],s[o+3]):this._clipFinite(t,i))}_clipFinite(t,i){const s=i.length;let o=null,f,d,p=i[s-2],v=i[s-1],_,k=this._regioncode(p,v),P,L=0;for(let G=0;G<s;G+=2)if(f=p,d=v,p=i[G],v=i[G+1],_=k,k=this._regioncode(p,v),_===0&&k===0)P=L,L=0,o?o.push(p,v):o=[p,v];else{let Z,W,j,H,me;if(_===0){if((Z=this._clipSegment(f,d,p,v,_,k))===null)continue;[W,j,H,me]=Z}else{if((Z=this._clipSegment(p,v,f,d,k,_))===null)continue;[H,me,W,j]=Z,P=L,L=this._edgecode(W,j),P&&L&&this._edge(t,P,L,o,o.length),o?o.push(W,j):o=[W,j]}P=L,L=this._edgecode(H,me),P&&L&&this._edge(t,P,L,o,o.length),o?o.push(H,me):o=[H,me]}if(o)P=L,L=this._edgecode(o[0],o[1]),P&&L&&this._edge(t,P,L,o,o.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return o}_clipSegment(t,i,s,o,f,d){const p=f<d;for(p&&([t,i,s,o,f,d]=[s,o,t,i,d,f]);;){if(f===0&&d===0)return p?[s,o,t,i]:[t,i,s,o];if(f&d)return null;let v,_,k=f||d;k&8?(v=t+(s-t)*(this.ymax-i)/(o-i),_=this.ymax):k&4?(v=t+(s-t)*(this.ymin-i)/(o-i),_=this.ymin):k&2?(_=i+(o-i)*(this.xmax-t)/(s-t),v=this.xmax):(_=i+(o-i)*(this.xmin-t)/(s-t),v=this.xmin),f?(t=v,i=_,f=this._regioncode(t,i)):(s=v,o=_,d=this._regioncode(s,o))}}_clipInfinite(t,i,s,o,f,d){let p=Array.from(i),v;if((v=this._project(p[0],p[1],s,o))&&p.unshift(v[0],v[1]),(v=this._project(p[p.length-2],p[p.length-1],f,d))&&p.push(v[0],v[1]),p=this._clipFinite(t,p))for(let _=0,k=p.length,P,L=this._edgecode(p[k-2],p[k-1]);_<k;_+=2)P=L,L=this._edgecode(p[_],p[_+1]),P&&L&&(_=this._edge(t,P,L,p,_),k=p.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(p=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return p}_edge(t,i,s,o,f){for(;i!==s;){let d,p;switch(i){case 5:i=4;continue;case 4:i=6,d=this.xmax,p=this.ymin;break;case 6:i=2;continue;case 2:i=10,d=this.xmax,p=this.ymax;break;case 10:i=8;continue;case 8:i=9,d=this.xmin,p=this.ymax;break;case 9:i=1;continue;case 1:i=5,d=this.xmin,p=this.ymin;break}(o[f]!==d||o[f+1]!==p)&&this.contains(t,d,p)&&(o.splice(f,0,d,p),f+=2)}return f}_project(t,i,s,o){let f=1/0,d,p,v;if(o<0){if(i<=this.ymin)return null;(d=(this.ymin-i)/o)<f&&(v=this.ymin,p=t+(f=d)*s)}else if(o>0){if(i>=this.ymax)return null;(d=(this.ymax-i)/o)<f&&(v=this.ymax,p=t+(f=d)*s)}if(s>0){if(t>=this.xmax)return null;(d=(this.xmax-t)/s)<f&&(p=this.xmax,v=i+(f=d)*o)}else if(s<0){if(t<=this.xmin)return null;(d=(this.xmin-t)/s)<f&&(p=this.xmin,v=i+(f=d)*o)}return[p,v]}_edgecode(t,i){return(t===this.xmin?1:t===this.xmax?2:0)|(i===this.ymin?4:i===this.ymax?8:0)}_regioncode(t,i){return(t<this.xmin?1:t>this.xmax?2:0)|(i<this.ymin?4:i>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let i=0;i<t.length;i+=2){const s=(i+2)%t.length,o=(i+4)%t.length;(t[i]===t[s]&&t[s]===t[o]||t[i+1]===t[s+1]&&t[s+1]===t[o+1])&&(t.splice(s,2),i-=2)}t.length||(t=null)}return t}};const tau$1=2*Math.PI,pow$7=Math.pow;function pointX(n){return n[0]}function pointY(n){return n[1]}function collinear(n){const{triangles:t,coords:i}=n;for(let s=0;s<t.length;s+=3){const o=2*t[s],f=2*t[s+1],d=2*t[s+2];if((i[d]-i[o])*(i[f+1]-i[o+1])-(i[f]-i[o])*(i[d+1]-i[o+1])>1e-10)return!1}return!0}function jitter(n,t,i){return[n+Math.sin(n+t)*i,t+Math.cos(n-t)*i]}class Delaunay{static from(t,i=pointX,s=pointY,o){return new Delaunay("length"in t?flatArray(t,i,s,o):Float64Array.from(flatIterable(t,i,s,o)))}constructor(t){this._delaunator=new Delaunator(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,i=this.points;if(t.hull&&t.hull.length>2&&collinear(t)){this.collinear=Int32Array.from({length:i.length/2},(L,G)=>G).sort((L,G)=>i[2*L]-i[2*G]||i[2*L+1]-i[2*G+1]);const v=this.collinear[0],_=this.collinear[this.collinear.length-1],k=[i[2*v],i[2*v+1],i[2*_],i[2*_+1]],P=1e-8*Math.hypot(k[3]-k[1],k[2]-k[0]);for(let L=0,G=i.length/2;L<G;++L){const Z=jitter(i[2*L],i[2*L+1],P);i[2*L]=Z[0],i[2*L+1]=Z[1]}this._delaunator=new Delaunator(i)}else delete this.collinear;const s=this.halfedges=this._delaunator.halfedges,o=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,d=this.inedges.fill(-1),p=this._hullIndex.fill(-1);for(let v=0,_=s.length;v<_;++v){const k=f[v%3===2?v-2:v+1];(s[v]===-1||d[k]===-1)&&(d[k]=v)}for(let v=0,_=o.length;v<_;++v)p[o[v]]=v;o.length<=2&&o.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=o[0],d[o[0]]=1,o.length===2&&(d[o[1]]=0,this.triangles[1]=o[1],this.triangles[2]=o[1]))}voronoi(t){return new Voronoi$1(this,t)}*neighbors(t){const{inedges:i,hull:s,_hullIndex:o,halfedges:f,triangles:d,collinear:p}=this;if(p){const P=p.indexOf(t);P>0&&(yield p[P-1]),P<p.length-1&&(yield p[P+1]);return}const v=i[t];if(v===-1)return;let _=v,k=-1;do{if(yield k=d[_],_=_%3===2?_-2:_+1,d[_]!==t)return;if(_=f[_],_===-1){const P=s[(o[t]+1)%s.length];P!==k&&(yield P);return}}while(_!==v)}find(t,i,s=0){if(t=+t,t!==t||(i=+i,i!==i))return-1;const o=s;let f;for(;(f=this._step(s,t,i))>=0&&f!==s&&f!==o;)s=f;return f}_step(t,i,s){const{inedges:o,hull:f,_hullIndex:d,halfedges:p,triangles:v,points:_}=this;if(o[t]===-1||!_.length)return(t+1)%(_.length>>1);let k=t,P=pow$7(i-_[t*2],2)+pow$7(s-_[t*2+1],2);const L=o[t];let G=L;do{let Z=v[G];const W=pow$7(i-_[Z*2],2)+pow$7(s-_[Z*2+1],2);if(W<P&&(P=W,k=Z),G=G%3===2?G-2:G+1,v[G]!==t)break;if(G=p[G],G===-1){if(G=f[(d[t]+1)%f.length],G!==Z&&pow$7(i-_[G*2],2)+pow$7(s-_[G*2+1],2)<P)return G;break}}while(G!==L);return k}render(t){const i=t==null?t=new Path:void 0,{points:s,halfedges:o,triangles:f}=this;for(let d=0,p=o.length;d<p;++d){const v=o[d];if(v<d)continue;const _=f[d]*2,k=f[v]*2;t.moveTo(s[_],s[_+1]),t.lineTo(s[k],s[k+1])}return this.renderHull(t),i&&i.value()}renderPoints(t,i){i===void 0&&(!t||typeof t.moveTo!="function")&&(i=t,t=null),i=i==null?2:+i;const s=t==null?t=new Path:void 0,{points:o}=this;for(let f=0,d=o.length;f<d;f+=2){const p=o[f],v=o[f+1];t.moveTo(p+i,v),t.arc(p,v,i,0,tau$1)}return s&&s.value()}renderHull(t){const i=t==null?t=new Path:void 0,{hull:s,points:o}=this,f=s[0]*2,d=s.length;t.moveTo(o[f],o[f+1]);for(let p=1;p<d;++p){const v=2*s[p];t.lineTo(o[v],o[v+1])}return t.closePath(),i&&i.value()}hullPolygon(){const t=new Polygon;return this.renderHull(t),t.value()}renderTriangle(t,i){const s=i==null?i=new Path:void 0,{points:o,triangles:f}=this,d=f[t*=3]*2,p=f[t+1]*2,v=f[t+2]*2;return i.moveTo(o[d],o[d+1]),i.lineTo(o[p],o[p+1]),i.lineTo(o[v],o[v+1]),i.closePath(),s&&s.value()}*trianglePolygons(){const{triangles:t}=this;for(let i=0,s=t.length/3;i<s;++i)yield this.trianglePolygon(i)}trianglePolygon(t){const i=new Polygon;return this.renderTriangle(t,i),i.value()}}function flatArray(n,t,i,s){const o=n.length,f=new Float64Array(o*2);for(let d=0;d<o;++d){const p=n[d];f[d*2]=t.call(s,p,d,n),f[d*2+1]=i.call(s,p,d,n)}return f}function*flatIterable(n,t,i,s){let o=0;for(const f of n)yield t.call(s,f,o,n),yield i.call(s,f,o,n),++o}function Voronoi(n){Transform.call(this,null,n)}Voronoi.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const defaultExtent=[-1e5,-1e5,1e5,1e5];inherits(Voronoi,Transform,{transform(n,t){const i=n.as||"path",s=t.source;if(!s||!s.length)return t;let o=n.size;o=o?[0,0,o[0],o[1]]:(o=n.extent)?[o[0][0],o[0][1],o[1][0],o[1][1]]:defaultExtent;const f=this.value=Delaunay.from(s,n.x,n.y).voronoi(o);for(let d=0,p=s.length;d<p;++d){const v=f.cellPolygon(d);s[d][i]=v&&!isPoint(v)?toPathString(v):null}return t.reflow(n.modified()).modifies(i)}});function toPathString(n){const t=n[0][0],i=n[0][1];let s=n.length-1;for(;n[s][0]===t&&n[s][1]===i;--s);return"M"+n.slice(0,s+1).join("L")+"Z"}function isPoint(n){return n.length===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]}const voronoi=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Voronoi},Symbol.toStringTag,{value:"Module"}));var cloudRadians=Math.PI/180,cw$1=64,ch$1=2048;function cloud(){var n=[256,256],t,i,s,o,f,d,p,v=archimedeanSpiral,_=[],k=Math.random,P={};P.layout=function(){for(var Z=L(domCanvas()),W=zeroArray((n[0]>>5)*n[1]),j=null,H=_.length,me=-1,$e=[],De=_.map(Ce=>({text:t(Ce),font:i(Ce),style:o(Ce),weight:f(Ce),rotate:d(Ce),size:~~(s(Ce)+1e-14),padding:p(Ce),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:Ce})).sort((Ce,Me)=>Me.size-Ce.size);++me<H;){var le=De[me];le.x=n[0]*(k()+.5)>>1,le.y=n[1]*(k()+.5)>>1,cloudSprite(Z,le,De,me),le.hasText&&G(W,le,j)&&($e.push(le),j?cloudBounds(j,le):j=[{x:le.x+le.x0,y:le.y+le.y0},{x:le.x+le.x1,y:le.y+le.y1}],le.x-=n[0]>>1,le.y-=n[1]>>1)}return $e};function L(Z){Z.width=Z.height=1;var W=Math.sqrt(Z.getContext("2d").getImageData(0,0,1,1).data.length>>2);Z.width=(cw$1<<5)/W,Z.height=ch$1/W;var j=Z.getContext("2d");return j.fillStyle=j.strokeStyle="red",j.textAlign="center",{context:j,ratio:W}}function G(Z,W,j){for(var H=W.x,me=W.y,$e=Math.hypot(n[0],n[1]),De=v(n),le=k()<.5?1:-1,Ce=-le,Me,_n,_i;(Me=De(Ce+=le))&&(_n=~~Me[0],_i=~~Me[1],!(Math.min(Math.abs(_n),Math.abs(_i))>=$e));)if(W.x=H+_n,W.y=me+_i,!(W.x+W.x0<0||W.y+W.y0<0||W.x+W.x1>n[0]||W.y+W.y1>n[1])&&(!j||!cloudCollide(W,Z,n[0]))&&(!j||collideRects(W,j))){for(var ll=W.sprite,_l=W.width>>5,oa=n[0]>>5,Ru=W.x-(_l<<4),ga=Ru&127,_s=32-ga,Sa=W.y1-W.y0,Ra=(W.y+W.y0)*oa+(Ru>>5),Da,Fa=0;Fa<Sa;Fa++){Da=0;for(var Na=0;Na<=_l;Na++)Z[Ra+Na]|=Da<<_s|(Na<_l?(Da=ll[Fa*_l+Na])>>>ga:0);Ra+=oa}return W.sprite=null,!0}return!1}return P.words=function(Z){return arguments.length?(_=Z,P):_},P.size=function(Z){return arguments.length?(n=[+Z[0],+Z[1]],P):n},P.font=function(Z){return arguments.length?(i=functor(Z),P):i},P.fontStyle=function(Z){return arguments.length?(o=functor(Z),P):o},P.fontWeight=function(Z){return arguments.length?(f=functor(Z),P):f},P.rotate=function(Z){return arguments.length?(d=functor(Z),P):d},P.text=function(Z){return arguments.length?(t=functor(Z),P):t},P.spiral=function(Z){return arguments.length?(v=spirals[Z]||Z,P):v},P.fontSize=function(Z){return arguments.length?(s=functor(Z),P):s},P.padding=function(Z){return arguments.length?(p=functor(Z),P):p},P.random=function(Z){return arguments.length?(k=Z,P):k},P}function cloudSprite(n,t,i,s){if(!t.sprite){var o=n.context,f=n.ratio;o.clearRect(0,0,(cw$1<<5)/f,ch$1/f);var d=0,p=0,v=0,_=i.length,k,P,L,G,Z;for(--s;++s<_;){if(t=i[s],o.save(),o.font=t.style+" "+t.weight+" "+~~((t.size+1)/f)+"px "+t.font,k=o.measureText(t.text+"m").width*f,L=t.size<<1,t.rotate){var W=Math.sin(t.rotate*cloudRadians),j=Math.cos(t.rotate*cloudRadians),H=k*j,me=k*W,$e=L*j,De=L*W;k=Math.max(Math.abs(H+De),Math.abs(H-De))+31>>5<<5,L=~~Math.max(Math.abs(me+$e),Math.abs(me-$e))}else k=k+31>>5<<5;if(L>v&&(v=L),d+k>=cw$1<<5&&(d=0,p+=v,v=0),p+L>=ch$1)break;o.translate((d+(k>>1))/f,(p+(L>>1))/f),t.rotate&&o.rotate(t.rotate*cloudRadians),o.fillText(t.text,0,0),t.padding&&(o.lineWidth=2*t.padding,o.strokeText(t.text,0,0)),o.restore(),t.width=k,t.height=L,t.xoff=d,t.yoff=p,t.x1=k>>1,t.y1=L>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,d+=k}for(var le=o.getImageData(0,0,(cw$1<<5)/f,ch$1/f).data,Ce=[];--s>=0;)if(t=i[s],!!t.hasText){for(k=t.width,P=k>>5,L=t.y1-t.y0,G=0;G<L*P;G++)Ce[G]=0;if(d=t.xoff,d==null)return;p=t.yoff;var Me=0,_n=-1;for(Z=0;Z<L;Z++){for(G=0;G<k;G++){var _i=P*Z+(G>>5),ll=le[(p+Z)*(cw$1<<5)+(d+G)<<2]?1<<31-G%32:0;Ce[_i]|=ll,Me|=ll}Me?_n=Z:(t.y0++,L--,Z--,p++)}t.y1=t.y0+_n,t.sprite=Ce.slice(0,(t.y1-t.y0)*P)}}}function cloudCollide(n,t,i){i>>=5;for(var s=n.sprite,o=n.width>>5,f=n.x-(o<<4),d=f&127,p=32-d,v=n.y1-n.y0,_=(n.y+n.y0)*i+(f>>5),k,P=0;P<v;P++){k=0;for(var L=0;L<=o;L++)if((k<<p|(L<o?(k=s[P*o+L])>>>d:0))&t[_+L])return!0;_+=i}return!1}function cloudBounds(n,t){var i=n[0],s=n[1];t.x+t.x0<i.x&&(i.x=t.x+t.x0),t.y+t.y0<i.y&&(i.y=t.y+t.y0),t.x+t.x1>s.x&&(s.x=t.x+t.x1),t.y+t.y1>s.y&&(s.y=t.y+t.y1)}function collideRects(n,t){return n.x+n.x1>t[0].x&&n.x+n.x0<t[1].x&&n.y+n.y1>t[0].y&&n.y+n.y0<t[1].y}function archimedeanSpiral(n){var t=n[0]/n[1];return function(i){return[t*(i*=.1)*Math.cos(i),i*Math.sin(i)]}}function rectangularSpiral(n){var t=4,i=t*n[0]/n[1],s=0,o=0;return function(f){var d=f<0?-1:1;switch(Math.sqrt(1+4*d*f)-d&3){case 0:s+=i;break;case 1:o+=t;break;case 2:s-=i;break;default:o-=t;break}return[s,o]}}function zeroArray(n){for(var t=[],i=-1;++i<n;)t[i]=0;return t}function functor(n){return typeof n=="function"?n:function(){return n}}var spirals={archimedean:archimedeanSpiral,rectangular:rectangularSpiral};const Output=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Params$1=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Wordcloud(n){Transform.call(this,cloud(),n)}Wordcloud.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Output}]};inherits(Wordcloud,Transform,{transform(n,t){n.size&&!(n.size[0]&&n.size[1])&&error$1("Wordcloud size dimensions must be non-zero.");function i(Z){const W=n[Z];return isFunction$1(W)&&t.modified(W.fields)}const s=n.modified();if(!(s||t.changed(t.ADD_REM)||Params$1.some(i)))return;const o=t.materialize(t.SOURCE).source,f=this.value,d=n.as||Output;let p=n.fontSize||14,v;if(isFunction$1(p)?v=n.fontSizeRange:p=constant$6(p),v){const Z=p,W=scale$5("sqrt")().domain(extent(o,Z)).range(v);p=j=>W(Z(j))}o.forEach(Z=>{Z[d[0]]=NaN,Z[d[1]]=NaN,Z[d[3]]=0});const _=f.words(o).text(n.text).size(n.size||[500,500]).padding(n.padding||1).spiral(n.spiral||"archimedean").rotate(n.rotate||0).font(n.font||"sans-serif").fontStyle(n.fontStyle||"normal").fontWeight(n.fontWeight||"normal").fontSize(p).random(random$2).layout(),k=f.size(),P=k[0]>>1,L=k[1]>>1,G=_.length;for(let Z=0,W,j;Z<G;++Z)W=_[Z],j=W.datum,j[d[0]]=W.x+P,j[d[1]]=W.y+L,j[d[2]]=W.font,j[d[3]]=W.size,j[d[4]]=W.style,j[d[5]]=W.weight,j[d[6]]=W.rotate;return t.reflow(s).modifies(d)}});const wordcloud=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Wordcloud},Symbol.toStringTag,{value:"Module"}));function ascending$1(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function descending$1(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function bisector$1(n){let t,i,s;n.length!==2?(t=ascending$1,i=(p,v)=>ascending$1(n(p),v),s=(p,v)=>n(p)-v):(t=n===ascending$1||n===descending$1?n:zero$3,i=n,s=n);function o(p,v,_=0,k=p.length){if(_<k){if(t(v,v)!==0)return k;do{const P=_+k>>>1;i(p[P],v)<0?_=P+1:k=P}while(_<k)}return _}function f(p,v,_=0,k=p.length){if(_<k){if(t(v,v)!==0)return k;do{const P=_+k>>>1;i(p[P],v)<=0?_=P+1:k=P}while(_<k)}return _}function d(p,v,_=0,k=p.length){const P=o(p,v,_,k-1);return P>_&&s(p[P-1],v)>-s(p[P],v)?P-1:P}return{left:o,center:d,right:f}}function zero$3(){return 0}function number$2(n){return n===null?NaN:+n}const ascendingBisect=bisector$1(ascending$1),bisectRight$1=ascendingBisect.right,bisectLeft$1=ascendingBisect.left;bisector$1(number$2).center;function permute(n,t){return Array.from(t,i=>n[i])}const array8=n=>new Uint8Array(n),array16=n=>new Uint16Array(n),array32=n=>new Uint32Array(n);function Bitmaps(){let n=8,t=[],i=array32(0),s=array$1(0,n),o=array$1(0,n);return{data:()=>t,seen:()=>i=lengthen(i,t.length),add(f){for(let d=0,p=t.length,v=f.length,_;d<v;++d)_=f[d],_._index=p++,t.push(_)},remove(f,d){const p=t.length,v=Array(p-f),_=t;let k,P,L;for(P=0;!d[P]&&P<p;++P)v[P]=t[P],_[P]=P;for(L=P;P<p;++P)k=t[P],d[P]?_[P]=-1:(_[P]=L,s[L]=s[P],o[L]=o[P],v[L]=k,k._index=L++),s[P]=0;return t=v,_},size:()=>t.length,curr:()=>s,prev:()=>o,reset:f=>o[f]=s[f],all:()=>n<257?255:n<65537?65535:4294967295,set(f,d){s[f]|=d},clear(f,d){s[f]&=~d},resize(f,d){const p=s.length;(f>p||d>n)&&(n=Math.max(d,n),s=array$1(f,n,s),o=array$1(f,n))}}}function lengthen(n,t,i){return n.length>=t?n:(i=i||new n.constructor(t),i.set(n),i)}function array$1(n,t,i){const s=(t<257?array8:t<65537?array16:array32)(n);return i&&s.set(i),s}function Dimension(n,t,i){const s=1<<t;return{one:s,zero:~s,range:i.slice(),bisect:n.bisect,index:n.index,size:n.size,onAdd(o,f){const d=this,p=d.bisect(d.range,o.value),v=o.index,_=p[0],k=p[1],P=v.length;let L;for(L=0;L<_;++L)f[v[L]]|=s;for(L=k;L<P;++L)f[v[L]]|=s;return d}}}function SortedIndex(){let n=array32(0),t=[],i=0;function s(p,v,_){if(!v.length)return[];const k=i,P=v.length,L=array32(P);let G=Array(P),Z,W,j;for(j=0;j<P;++j)G[j]=p(v[j]),L[j]=j;if(G=sort$1(G,L),k)Z=t,W=n,t=Array(k+P),n=array32(k+P),merge$1(_,Z,W,k,G,L,P,t,n);else{if(_>0)for(j=0;j<P;++j)L[j]+=_;t=G,n=L}return i=k+P,{index:L,value:G}}function o(p,v){const _=i;let k,P,L;for(P=0;!v[n[P]]&&P<_;++P);for(L=P;P<_;++P)v[k=n[P]]||(n[L]=k,t[L]=t[P],++L);i=_-p}function f(p){for(let v=0,_=i;v<_;++v)n[v]=p[n[v]]}function d(p,v){let _;return v?_=v.length:(v=t,_=i),[bisectLeft$1(v,p[0],0,_),bisectRight$1(v,p[1],0,_)]}return{insert:s,remove:o,bisect:d,reindex:f,index:()=>n,size:()=>i}}function sort$1(n,t){return n.sort.call(t,(i,s)=>{const o=n[i],f=n[s];return o<f?-1:o>f?1:0}),permute(n,t)}function merge$1(n,t,i,s,o,f,d,p,v){let _=0,k=0,P;for(P=0;_<s&&k<d;++P)t[_]<o[k]?(p[P]=t[_],v[P]=i[_++]):(p[P]=o[k],v[P]=f[k++]+n);for(;_<s;++_,++P)p[P]=t[_],v[P]=i[_];for(;k<d;++k,++P)p[P]=o[k],v[P]=f[k]+n}function CrossFilter(n){Transform.call(this,Bitmaps(),n),this._indices=null,this._dims=null}CrossFilter.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};inherits(CrossFilter,Transform,{transform(n,t){if(this._dims){var i=n.modified("fields")||n.fields.some(s=>t.modified(s.fields));return i?this.reinit(n,t):this.eval(n,t)}else return this.init(n,t)},init(n,t){const i=n.fields,s=n.query,o=this._indices={},f=this._dims=[],d=s.length;let p=0,v,_;for(;p<d;++p)v=i[p].fname,_=o[v]||(o[v]=SortedIndex()),f.push(Dimension(_,p,s[p]));return this.eval(n,t)},reinit(n,t){const i=t.materialize().fork(),s=n.fields,o=n.query,f=this._indices,d=this._dims,p=this.value,v=p.curr(),_=p.prev(),k=p.all(),P=i.rem=i.add,L=i.mod,G=o.length,Z={};let W,j,H,me,$e,De,le,Ce,Me;if(_.set(v),t.rem.length&&($e=this.remove(n,t,i)),t.add.length&&p.add(t.add),t.mod.length)for(De={},me=t.mod,le=0,Ce=me.length;le<Ce;++le)De[me[le]._index]=1;for(le=0;le<G;++le)Me=s[le],(!d[le]||n.modified("fields",le)||t.modified(Me.fields))&&(H=Me.fname,(W=Z[H])||(f[H]=j=SortedIndex(),Z[H]=W=j.insert(Me,t.source,0)),d[le]=Dimension(j,le,o[le]).onAdd(W,v));for(le=0,Ce=p.data().length;le<Ce;++le)$e[le]||(_[le]!==v[le]?P.push(le):De[le]&&v[le]!==k&&L.push(le));return p.mask=(1<<G)-1,i},eval(n,t){const i=t.materialize().fork(),s=this._dims.length;let o=0;return t.rem.length&&(this.remove(n,t,i),o|=(1<<s)-1),n.modified("query")&&!n.modified("fields")&&(o|=this.update(n,t,i)),t.add.length&&(this.insert(n,t,i),o|=(1<<s)-1),t.mod.length&&(this.modify(t,i),o|=(1<<s)-1),this.value.mask=o,i},insert(n,t,i){const s=t.add,o=this.value,f=this._dims,d=this._indices,p=n.fields,v={},_=i.add,k=o.size()+s.length,P=f.length;let L=o.size(),G,Z,W;o.resize(k,P),o.add(s);const j=o.curr(),H=o.prev(),me=o.all();for(G=0;G<P;++G)Z=p[G].fname,W=v[Z]||(v[Z]=d[Z].insert(p[G],s,L)),f[G].onAdd(W,j);for(;L<k;++L)H[L]=me,j[L]!==me&&_.push(L)},modify(n,t){const i=t.mod,s=this.value,o=s.curr(),f=s.all(),d=n.mod;let p,v,_;for(p=0,v=d.length;p<v;++p)_=d[p]._index,o[_]!==f&&i.push(_)},remove(n,t,i){const s=this._indices,o=this.value,f=o.curr(),d=o.prev(),p=o.all(),v={},_=i.rem,k=t.rem;let P,L,G,Z;for(P=0,L=k.length;P<L;++P)G=k[P]._index,v[G]=1,d[G]=Z=f[G],f[G]=p,Z!==p&&_.push(G);for(G in s)s[G].remove(L,v);return this.reindex(t,L,v),v},reindex(n,t,i){const s=this._indices,o=this.value;n.runAfter(()=>{const f=o.remove(t,i);for(const d in s)s[d].reindex(f)})},update(n,t,i){const s=this._dims,o=n.query,f=t.stamp,d=s.length;let p=0,v,_;for(i.filters=0,_=0;_<d;++_)n.modified("query",_)&&(v=_,++p);if(p===1)p=s[v].one,this.incrementOne(s[v],o[v],i.add,i.rem);else for(_=0,p=0;_<d;++_)n.modified("query",_)&&(p|=s[_].one,this.incrementAll(s[_],o[_],f,i.add),i.rem=i.add);return p},incrementAll(n,t,i,s){const o=this.value,f=o.seen(),d=o.curr(),p=o.prev(),v=n.index(),_=n.bisect(n.range),k=n.bisect(t),P=k[0],L=k[1],G=_[0],Z=_[1],W=n.one;let j,H,me;if(P<G)for(j=P,H=Math.min(G,L);j<H;++j)me=v[j],f[me]!==i&&(p[me]=d[me],f[me]=i,s.push(me)),d[me]^=W;else if(P>G)for(j=G,H=Math.min(P,Z);j<H;++j)me=v[j],f[me]!==i&&(p[me]=d[me],f[me]=i,s.push(me)),d[me]^=W;if(L>Z)for(j=Math.max(P,Z),H=L;j<H;++j)me=v[j],f[me]!==i&&(p[me]=d[me],f[me]=i,s.push(me)),d[me]^=W;else if(L<Z)for(j=Math.max(G,L),H=Z;j<H;++j)me=v[j],f[me]!==i&&(p[me]=d[me],f[me]=i,s.push(me)),d[me]^=W;n.range=t.slice()},incrementOne(n,t,i,s){const o=this.value,f=o.curr(),d=n.index(),p=n.bisect(n.range),v=n.bisect(t),_=v[0],k=v[1],P=p[0],L=p[1],G=n.one;let Z,W,j;if(_<P)for(Z=_,W=Math.min(P,k);Z<W;++Z)j=d[Z],f[j]^=G,i.push(j);else if(_>P)for(Z=P,W=Math.min(_,L);Z<W;++Z)j=d[Z],f[j]^=G,s.push(j);if(k>L)for(Z=Math.max(_,L),W=k;Z<W;++Z)j=d[Z],f[j]^=G,i.push(j);else if(k<L)for(Z=Math.max(P,k),W=L;Z<W;++Z)j=d[Z],f[j]^=G,s.push(j);n.range=t.slice()}});function ResolveFilter(n){Transform.call(this,null,n)}ResolveFilter.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};inherits(ResolveFilter,Transform,{transform(n,t){const i=~(n.ignore||0),s=n.filter,o=s.mask;if((o&i)===0)return t.StopPropagation;const f=t.fork(t.ALL),d=s.data(),p=s.curr(),v=s.prev(),_=k=>p[k]&i?null:d[k];return f.filter(f.MOD,_),o&o-1?(f.filter(f.ADD,k=>{const P=p[k]&i;return!P&&P^v[k]&i?d[k]:null}),f.filter(f.REM,k=>{const P=p[k]&i;return P&&!(P^(P^v[k]&i))?d[k]:null})):(f.filter(f.ADD,_),f.filter(f.REM,k=>(p[k]&i)===o?d[k]:null)),f.filter(f.SOURCE,k=>_(k._index))}});const xf$1=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:CrossFilter,resolvefilter:ResolveFilter},Symbol.toStringTag,{value:"Module"})),e10=Math.sqrt(50),e5$1=Math.sqrt(10),e2$1=Math.sqrt(2);function tickSpec(n,t,i){const s=(t-n)/Math.max(0,i),o=Math.floor(Math.log10(s)),f=s/Math.pow(10,o),d=f>=e10?10:f>=e5$1?5:f>=e2$1?2:1;let p,v,_;return o<0?(_=Math.pow(10,-o)/d,p=Math.round(n*_),v=Math.round(t*_),p/_<n&&++p,v/_>t&&--v,_=-_):(_=Math.pow(10,o)*d,p=Math.round(n/_),v=Math.round(t/_),p*_<n&&++p,v*_>t&&--v),v<p&&.5<=i&&i<2?tickSpec(n,t,i*2):[p,v,_]}function tickIncrement(n,t,i){return t=+t,n=+n,i=+i,tickSpec(n,t,i)[2]}function tickStep(n,t,i){t=+t,n=+n,i=+i;const s=t<n,o=s?tickIncrement(t,n,i):tickIncrement(n,t,i);return(s?-1:1)*(o<0?1/-o:o)}const RawCode$1="RawCode",Literal$1="Literal",Property$1="Property",Identifier$1="Identifier",ArrayExpression$1="ArrayExpression",BinaryExpression$1="BinaryExpression",CallExpression$1="CallExpression",ConditionalExpression$1="ConditionalExpression",LogicalExpression$1="LogicalExpression",MemberExpression$1="MemberExpression",ObjectExpression$1="ObjectExpression",UnaryExpression$1="UnaryExpression";function ASTNode$1(n){this.type=n}ASTNode$1.prototype.visit=function(n){let t,i,s;if(n(this))return 1;for(t=children$1(this),i=0,s=t.length;i<s;++i)if(t[i].visit(n))return 1};function children$1(n){switch(n.type){case ArrayExpression$1:return n.elements;case BinaryExpression$1:case LogicalExpression$1:return[n.left,n.right];case CallExpression$1:return[n.callee].concat(n.arguments);case ConditionalExpression$1:return[n.test,n.consequent,n.alternate];case MemberExpression$1:return[n.object,n.property];case ObjectExpression$1:return n.properties;case Property$1:return[n.key,n.value];case UnaryExpression$1:return[n.argument];case Identifier$1:case Literal$1:case RawCode$1:default:return[]}}var TokenName$1,source$1,index$2,length$1,lookahead$1,TokenBooleanLiteral$1=1,TokenEOF$1=2,TokenIdentifier$1=3,TokenKeyword$1=4,TokenNullLiteral$1=5,TokenNumericLiteral$1=6,TokenPunctuator$1=7,TokenStringLiteral$1=8,TokenRegularExpression$1=9;TokenName$1={};TokenName$1[TokenBooleanLiteral$1]="Boolean";TokenName$1[TokenEOF$1]="<end>";TokenName$1[TokenIdentifier$1]="Identifier";TokenName$1[TokenKeyword$1]="Keyword";TokenName$1[TokenNullLiteral$1]="Null";TokenName$1[TokenNumericLiteral$1]="Numeric";TokenName$1[TokenPunctuator$1]="Punctuator";TokenName$1[TokenStringLiteral$1]="String";TokenName$1[TokenRegularExpression$1]="RegularExpression";var SyntaxArrayExpression$1="ArrayExpression",SyntaxBinaryExpression$1="BinaryExpression",SyntaxCallExpression$1="CallExpression",SyntaxConditionalExpression$1="ConditionalExpression",SyntaxIdentifier$1="Identifier",SyntaxLiteral$1="Literal",SyntaxLogicalExpression$1="LogicalExpression",SyntaxMemberExpression$1="MemberExpression",SyntaxObjectExpression$1="ObjectExpression",SyntaxProperty$1="Property",SyntaxUnaryExpression$1="UnaryExpression",MessageUnexpectedToken$1="Unexpected token %0",MessageUnexpectedNumber$1="Unexpected number",MessageUnexpectedString$1="Unexpected string",MessageUnexpectedIdentifier$1="Unexpected identifier",MessageUnexpectedReserved$1="Unexpected reserved word",MessageUnexpectedEOS$1="Unexpected end of input",MessageInvalidRegExp$1="Invalid regular expression",MessageUnterminatedRegExp$1="Invalid regular expression: missing /",MessageStrictOctalLiteral$1="Octal literals are not allowed in strict mode.",MessageStrictDuplicateProperty$1="Duplicate data property in object literal not allowed in strict mode",ILLEGAL$2="ILLEGAL",DISABLED$1="Disabled.",RegexNonAsciiIdentifierStart$1=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),RegexNonAsciiIdentifierPart$1=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function assert$1(n,t){if(!n)throw new Error("ASSERT: "+t)}function isDecimalDigit$1(n){return n>=48&&n<=57}function isHexDigit$1(n){return"0123456789abcdefABCDEF".includes(n)}function isOctalDigit$1(n){return"01234567".includes(n)}function isWhiteSpace$1(n){return n===32||n===9||n===11||n===12||n===160||n>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(n)}function isLineTerminator$1(n){return n===10||n===13||n===8232||n===8233}function isIdentifierStart$1(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n===92||n>=128&&RegexNonAsciiIdentifierStart$1.test(String.fromCharCode(n))}function isIdentifierPart$1(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||n===92||n>=128&&RegexNonAsciiIdentifierPart$1.test(String.fromCharCode(n))}const keywords$1={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function skipComment$1(){for(;index$2<length$1;){const n=source$1.charCodeAt(index$2);if(isWhiteSpace$1(n)||isLineTerminator$1(n))++index$2;else break}}function scanHexEscape$1(n){var t,i,s,o=0;for(i=n==="u"?4:2,t=0;t<i;++t)index$2<length$1&&isHexDigit$1(source$1[index$2])?(s=source$1[index$2++],o=o*16+"0123456789abcdef".indexOf(s.toLowerCase())):throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2);return String.fromCharCode(o)}function scanUnicodeCodePointEscape$1(){var n,t,i,s;for(n=source$1[index$2],t=0,n==="}"&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2);index$2<length$1&&(n=source$1[index$2++],!!isHexDigit$1(n));)t=t*16+"0123456789abcdef".indexOf(n.toLowerCase());return(t>1114111||n!=="}")&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2),t<=65535?String.fromCharCode(t):(i=(t-65536>>10)+55296,s=(t-65536&1023)+56320,String.fromCharCode(i,s))}function getEscapedIdentifier$1(){var n,t;for(n=source$1.charCodeAt(index$2++),t=String.fromCharCode(n),n===92&&(source$1.charCodeAt(index$2)!==117&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2),++index$2,n=scanHexEscape$1("u"),(!n||n==="\\"||!isIdentifierStart$1(n.charCodeAt(0)))&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2),t=n);index$2<length$1&&(n=source$1.charCodeAt(index$2),!!isIdentifierPart$1(n));)++index$2,t+=String.fromCharCode(n),n===92&&(t=t.substr(0,t.length-1),source$1.charCodeAt(index$2)!==117&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2),++index$2,n=scanHexEscape$1("u"),(!n||n==="\\"||!isIdentifierPart$1(n.charCodeAt(0)))&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2),t+=n);return t}function getIdentifier$1(){var n,t;for(n=index$2++;index$2<length$1;){if(t=source$1.charCodeAt(index$2),t===92)return index$2=n,getEscapedIdentifier$1();if(isIdentifierPart$1(t))++index$2;else break}return source$1.slice(n,index$2)}function scanIdentifier$1(){var n,t,i;return n=index$2,t=source$1.charCodeAt(index$2)===92?getEscapedIdentifier$1():getIdentifier$1(),t.length===1?i=TokenIdentifier$1:keywords$1.hasOwnProperty(t)?i=TokenKeyword$1:t==="null"?i=TokenNullLiteral$1:t==="true"||t==="false"?i=TokenBooleanLiteral$1:i=TokenIdentifier$1,{type:i,value:t,start:n,end:index$2}}function scanPunctuator$1(){var n=index$2,t=source$1.charCodeAt(index$2),i,s=source$1[index$2],o,f,d;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++index$2,{type:TokenPunctuator$1,value:String.fromCharCode(t),start:n,end:index$2};default:if(i=source$1.charCodeAt(index$2+1),i===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return index$2+=2,{type:TokenPunctuator$1,value:String.fromCharCode(t)+String.fromCharCode(i),start:n,end:index$2};case 33:case 61:return index$2+=2,source$1.charCodeAt(index$2)===61&&++index$2,{type:TokenPunctuator$1,value:source$1.slice(n,index$2),start:n,end:index$2}}}if(d=source$1.substr(index$2,4),d===">>>=")return index$2+=4,{type:TokenPunctuator$1,value:d,start:n,end:index$2};if(f=d.substr(0,3),f===">>>"||f==="<<="||f===">>=")return index$2+=3,{type:TokenPunctuator$1,value:f,start:n,end:index$2};if(o=f.substr(0,2),s===o[1]&&"+-<>&|".includes(s)||o==="=>")return index$2+=2,{type:TokenPunctuator$1,value:o,start:n,end:index$2};if(o==="//"&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2),"<>=!+-*%&|^/".includes(s))return++index$2,{type:TokenPunctuator$1,value:s,start:n,end:index$2};throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2)}function scanHexLiteral$1(n){let t="";for(;index$2<length$1&&isHexDigit$1(source$1[index$2]);)t+=source$1[index$2++];return t.length===0&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2),isIdentifierStart$1(source$1.charCodeAt(index$2))&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2),{type:TokenNumericLiteral$1,value:parseInt("0x"+t,16),start:n,end:index$2}}function scanOctalLiteral$1(n){let t="0"+source$1[index$2++];for(;index$2<length$1&&isOctalDigit$1(source$1[index$2]);)t+=source$1[index$2++];return(isIdentifierStart$1(source$1.charCodeAt(index$2))||isDecimalDigit$1(source$1.charCodeAt(index$2)))&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2),{type:TokenNumericLiteral$1,value:parseInt(t,8),octal:!0,start:n,end:index$2}}function scanNumericLiteral$1(){var n,t,i;if(i=source$1[index$2],assert$1(isDecimalDigit$1(i.charCodeAt(0))||i===".","Numeric literal must start with a decimal digit or a decimal point"),t=index$2,n="",i!=="."){if(n=source$1[index$2++],i=source$1[index$2],n==="0"){if(i==="x"||i==="X")return++index$2,scanHexLiteral$1(t);if(isOctalDigit$1(i))return scanOctalLiteral$1(t);i&&isDecimalDigit$1(i.charCodeAt(0))&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2)}for(;isDecimalDigit$1(source$1.charCodeAt(index$2));)n+=source$1[index$2++];i=source$1[index$2]}if(i==="."){for(n+=source$1[index$2++];isDecimalDigit$1(source$1.charCodeAt(index$2));)n+=source$1[index$2++];i=source$1[index$2]}if(i==="e"||i==="E")if(n+=source$1[index$2++],i=source$1[index$2],(i==="+"||i==="-")&&(n+=source$1[index$2++]),isDecimalDigit$1(source$1.charCodeAt(index$2)))for(;isDecimalDigit$1(source$1.charCodeAt(index$2));)n+=source$1[index$2++];else throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2);return isIdentifierStart$1(source$1.charCodeAt(index$2))&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2),{type:TokenNumericLiteral$1,value:parseFloat(n),start:t,end:index$2}}function scanStringLiteral$1(){var n="",t,i,s,o,f=!1;for(t=source$1[index$2],assert$1(t==="'"||t==='"',"String literal must starts with a quote"),i=index$2,++index$2;index$2<length$1;)if(s=source$1[index$2++],s===t){t="";break}else if(s==="\\")if(s=source$1[index$2++],!s||!isLineTerminator$1(s.charCodeAt(0)))switch(s){case"u":case"x":source$1[index$2]==="{"?(++index$2,n+=scanUnicodeCodePointEscape$1()):n+=scanHexEscape$1(s);break;case"n":n+=`
`;break;case"r":n+="\r";break;case"t":n+="	";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;default:isOctalDigit$1(s)?(o="01234567".indexOf(s),o!==0&&(f=!0),index$2<length$1&&isOctalDigit$1(source$1[index$2])&&(f=!0,o=o*8+"01234567".indexOf(source$1[index$2++]),"0123".includes(s)&&index$2<length$1&&isOctalDigit$1(source$1[index$2])&&(o=o*8+"01234567".indexOf(source$1[index$2++]))),n+=String.fromCharCode(o)):n+=s;break}else s==="\r"&&source$1[index$2]===`
`&&++index$2;else{if(isLineTerminator$1(s.charCodeAt(0)))break;n+=s}return t!==""&&throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2),{type:TokenStringLiteral$1,value:n,octal:f,start:i,end:index$2}}function testRegExp$1(n,t){let i=n;t.includes("u")&&(i=i.replace(/\\u\{([0-9a-fA-F]+)\}/g,(s,o)=>{if(parseInt(o,16)<=1114111)return"x";throwError$1({},MessageInvalidRegExp$1)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(i)}catch{throwError$1({},MessageInvalidRegExp$1)}try{return new RegExp(n,t)}catch{return null}}function scanRegExpBody$1(){var n,t,i,s,o;for(n=source$1[index$2],assert$1(n==="/","Regular expression literal must start with a slash"),t=source$1[index$2++],i=!1,s=!1;index$2<length$1;)if(n=source$1[index$2++],t+=n,n==="\\")n=source$1[index$2++],isLineTerminator$1(n.charCodeAt(0))&&throwError$1({},MessageUnterminatedRegExp$1),t+=n;else if(isLineTerminator$1(n.charCodeAt(0)))throwError$1({},MessageUnterminatedRegExp$1);else if(i)n==="]"&&(i=!1);else if(n==="/"){s=!0;break}else n==="["&&(i=!0);return s||throwError$1({},MessageUnterminatedRegExp$1),o=t.substr(1,t.length-2),{value:o,literal:t}}function scanRegExpFlags$1(){var n,t,i;for(t="",i="";index$2<length$1&&(n=source$1[index$2],!!isIdentifierPart$1(n.charCodeAt(0)));)++index$2,n==="\\"&&index$2<length$1?throwError$1({},MessageUnexpectedToken$1,ILLEGAL$2):(i+=n,t+=n);return i.search(/[^gimuy]/g)>=0&&throwError$1({},MessageInvalidRegExp$1,i),{value:i,literal:t}}function scanRegExp$1(){var n,t,i,s;return lookahead$1=null,skipComment$1(),n=index$2,t=scanRegExpBody$1(),i=scanRegExpFlags$1(),s=testRegExp$1(t.value,i.value),{literal:t.literal+i.literal,value:s,regex:{pattern:t.value,flags:i.value},start:n,end:index$2}}function isIdentifierName$1(n){return n.type===TokenIdentifier$1||n.type===TokenKeyword$1||n.type===TokenBooleanLiteral$1||n.type===TokenNullLiteral$1}function advance$1(){if(skipComment$1(),index$2>=length$1)return{type:TokenEOF$1,start:index$2,end:index$2};const n=source$1.charCodeAt(index$2);return isIdentifierStart$1(n)?scanIdentifier$1():n===40||n===41||n===59?scanPunctuator$1():n===39||n===34?scanStringLiteral$1():n===46?isDecimalDigit$1(source$1.charCodeAt(index$2+1))?scanNumericLiteral$1():scanPunctuator$1():isDecimalDigit$1(n)?scanNumericLiteral$1():scanPunctuator$1()}function lex$1(){const n=lookahead$1;return index$2=n.end,lookahead$1=advance$1(),index$2=n.end,n}function peek$1(){const n=index$2;lookahead$1=advance$1(),index$2=n}function finishArrayExpression$1(n){const t=new ASTNode$1(SyntaxArrayExpression$1);return t.elements=n,t}function finishBinaryExpression$1(n,t,i){const s=new ASTNode$1(n==="||"||n==="&&"?SyntaxLogicalExpression$1:SyntaxBinaryExpression$1);return s.operator=n,s.left=t,s.right=i,s}function finishCallExpression$1(n,t){const i=new ASTNode$1(SyntaxCallExpression$1);return i.callee=n,i.arguments=t,i}function finishConditionalExpression$1(n,t,i){const s=new ASTNode$1(SyntaxConditionalExpression$1);return s.test=n,s.consequent=t,s.alternate=i,s}function finishIdentifier$1(n){const t=new ASTNode$1(SyntaxIdentifier$1);return t.name=n,t}function finishLiteral$1(n){const t=new ASTNode$1(SyntaxLiteral$1);return t.value=n.value,t.raw=source$1.slice(n.start,n.end),n.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=n.regex),t}function finishMemberExpression$1(n,t,i){const s=new ASTNode$1(SyntaxMemberExpression$1);return s.computed=n==="[",s.object=t,s.property=i,s.computed||(i.member=!0),s}function finishObjectExpression$1(n){const t=new ASTNode$1(SyntaxObjectExpression$1);return t.properties=n,t}function finishProperty$1(n,t,i){const s=new ASTNode$1(SyntaxProperty$1);return s.key=t,s.value=i,s.kind=n,s}function finishUnaryExpression$1(n,t){const i=new ASTNode$1(SyntaxUnaryExpression$1);return i.operator=n,i.argument=t,i.prefix=!0,i}function throwError$1(n,t){var i,s=Array.prototype.slice.call(arguments,2),o=t.replace(/%(\d)/g,(f,d)=>(assert$1(d<s.length,"Message reference must be in range"),s[d]));throw i=new Error(o),i.index=index$2,i.description=o,i}function throwUnexpected$1(n){n.type===TokenEOF$1&&throwError$1(n,MessageUnexpectedEOS$1),n.type===TokenNumericLiteral$1&&throwError$1(n,MessageUnexpectedNumber$1),n.type===TokenStringLiteral$1&&throwError$1(n,MessageUnexpectedString$1),n.type===TokenIdentifier$1&&throwError$1(n,MessageUnexpectedIdentifier$1),n.type===TokenKeyword$1&&throwError$1(n,MessageUnexpectedReserved$1),throwError$1(n,MessageUnexpectedToken$1,n.value)}function expect$1(n){const t=lex$1();(t.type!==TokenPunctuator$1||t.value!==n)&&throwUnexpected$1(t)}function match$1(n){return lookahead$1.type===TokenPunctuator$1&&lookahead$1.value===n}function matchKeyword$1(n){return lookahead$1.type===TokenKeyword$1&&lookahead$1.value===n}function parseArrayInitialiser$1(){const n=[];for(index$2=lookahead$1.start,expect$1("[");!match$1("]");)match$1(",")?(lex$1(),n.push(null)):(n.push(parseConditionalExpression$1()),match$1("]")||expect$1(","));return lex$1(),finishArrayExpression$1(n)}function parseObjectPropertyKey$1(){index$2=lookahead$1.start;const n=lex$1();return n.type===TokenStringLiteral$1||n.type===TokenNumericLiteral$1?(n.octal&&throwError$1(n,MessageStrictOctalLiteral$1),finishLiteral$1(n)):finishIdentifier$1(n.value)}function parseObjectProperty$1(){var n,t,i,s;if(index$2=lookahead$1.start,n=lookahead$1,n.type===TokenIdentifier$1)return i=parseObjectPropertyKey$1(),expect$1(":"),s=parseConditionalExpression$1(),finishProperty$1("init",i,s);if(n.type===TokenEOF$1||n.type===TokenPunctuator$1)throwUnexpected$1(n);else return t=parseObjectPropertyKey$1(),expect$1(":"),s=parseConditionalExpression$1(),finishProperty$1("init",t,s)}function parseObjectInitialiser$1(){var n=[],t,i,s,o={},f=String;for(index$2=lookahead$1.start,expect$1("{");!match$1("}");)t=parseObjectProperty$1(),t.key.type===SyntaxIdentifier$1?i=t.key.name:i=f(t.key.value),s="$"+i,Object.prototype.hasOwnProperty.call(o,s)?throwError$1({},MessageStrictDuplicateProperty$1):o[s]=!0,n.push(t),match$1("}")||expect$1(",");return expect$1("}"),finishObjectExpression$1(n)}function parseGroupExpression$1(){expect$1("(");const n=parseExpression$2();return expect$1(")"),n}const legalKeywords$1={if:1};function parsePrimaryExpression$1(){var n,t,i;if(match$1("("))return parseGroupExpression$1();if(match$1("["))return parseArrayInitialiser$1();if(match$1("{"))return parseObjectInitialiser$1();if(n=lookahead$1.type,index$2=lookahead$1.start,n===TokenIdentifier$1||legalKeywords$1[lookahead$1.value])i=finishIdentifier$1(lex$1().value);else if(n===TokenStringLiteral$1||n===TokenNumericLiteral$1)lookahead$1.octal&&throwError$1(lookahead$1,MessageStrictOctalLiteral$1),i=finishLiteral$1(lex$1());else{if(n===TokenKeyword$1)throw new Error(DISABLED$1);n===TokenBooleanLiteral$1?(t=lex$1(),t.value=t.value==="true",i=finishLiteral$1(t)):n===TokenNullLiteral$1?(t=lex$1(),t.value=null,i=finishLiteral$1(t)):match$1("/")||match$1("/=")?(i=finishLiteral$1(scanRegExp$1()),peek$1()):throwUnexpected$1(lex$1())}return i}function parseArguments$1(){const n=[];if(expect$1("("),!match$1(")"))for(;index$2<length$1&&(n.push(parseConditionalExpression$1()),!match$1(")"));)expect$1(",");return expect$1(")"),n}function parseNonComputedProperty$1(){index$2=lookahead$1.start;const n=lex$1();return isIdentifierName$1(n)||throwUnexpected$1(n),finishIdentifier$1(n.value)}function parseNonComputedMember$1(){return expect$1("."),parseNonComputedProperty$1()}function parseComputedMember$1(){expect$1("[");const n=parseExpression$2();return expect$1("]"),n}function parseLeftHandSideExpressionAllowCall$1(){var n,t,i;for(n=parsePrimaryExpression$1();;)if(match$1("."))i=parseNonComputedMember$1(),n=finishMemberExpression$1(".",n,i);else if(match$1("("))t=parseArguments$1(),n=finishCallExpression$1(n,t);else if(match$1("["))i=parseComputedMember$1(),n=finishMemberExpression$1("[",n,i);else break;return n}function parsePostfixExpression$1(){const n=parseLeftHandSideExpressionAllowCall$1();if(lookahead$1.type===TokenPunctuator$1&&(match$1("++")||match$1("--")))throw new Error(DISABLED$1);return n}function parseUnaryExpression$1(){var n,t;if(lookahead$1.type!==TokenPunctuator$1&&lookahead$1.type!==TokenKeyword$1)t=parsePostfixExpression$1();else{if(match$1("++")||match$1("--"))throw new Error(DISABLED$1);if(match$1("+")||match$1("-")||match$1("~")||match$1("!"))n=lex$1(),t=parseUnaryExpression$1(),t=finishUnaryExpression$1(n.value,t);else{if(matchKeyword$1("delete")||matchKeyword$1("void")||matchKeyword$1("typeof"))throw new Error(DISABLED$1);t=parsePostfixExpression$1()}}return t}function binaryPrecedence$1(n){let t=0;if(n.type!==TokenPunctuator$1&&n.type!==TokenKeyword$1)return 0;switch(n.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function parseBinaryExpression$1(){var n,t,i,s,o,f,d,p,v,_;if(n=lookahead$1,v=parseUnaryExpression$1(),s=lookahead$1,o=binaryPrecedence$1(s),o===0)return v;for(s.prec=o,lex$1(),t=[n,lookahead$1],d=parseUnaryExpression$1(),f=[v,s,d];(o=binaryPrecedence$1(lookahead$1))>0;){for(;f.length>2&&o<=f[f.length-2].prec;)d=f.pop(),p=f.pop().value,v=f.pop(),t.pop(),i=finishBinaryExpression$1(p,v,d),f.push(i);s=lex$1(),s.prec=o,f.push(s),t.push(lookahead$1),i=parseUnaryExpression$1(),f.push(i)}for(_=f.length-1,i=f[_],t.pop();_>1;)t.pop(),i=finishBinaryExpression$1(f[_-1].value,f[_-2],i),_-=2;return i}function parseConditionalExpression$1(){var n,t,i;return n=parseBinaryExpression$1(),match$1("?")&&(lex$1(),t=parseConditionalExpression$1(),expect$1(":"),i=parseConditionalExpression$1(),n=finishConditionalExpression$1(n,t,i)),n}function parseExpression$2(){const n=parseConditionalExpression$1();if(match$1(","))throw new Error(DISABLED$1);return n}function parser$2(n){source$1=n,index$2=0,length$1=source$1.length,lookahead$1=null,peek$1();const t=parseExpression$2();if(lookahead$1.type!==TokenEOF$1)throw new Error("Unexpect token after expression.");return t}var Constants$1={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Functions$1(n){function t(d,p,v,_){let k=n(p[0]);return v&&(k=v+"("+k+")",v.lastIndexOf("new ",0)===0&&(k="("+k+")")),k+"."+d+(_<0?"":_===0?"()":"("+p.slice(1).map(n).join(",")+")")}function i(d,p,v){return _=>t(d,_,p,v)}const s="new Date",o="String",f="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(d){d.length<3&&error$1("Missing arguments to clamp function."),d.length>3&&error$1("Too many arguments to clamp function.");const p=d.map(n);return"Math.max("+p[1]+", Math.min("+p[2]+","+p[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:s,date:i("getDate",s,0),day:i("getDay",s,0),year:i("getFullYear",s,0),month:i("getMonth",s,0),hours:i("getHours",s,0),minutes:i("getMinutes",s,0),seconds:i("getSeconds",s,0),milliseconds:i("getMilliseconds",s,0),time:i("getTime",s,0),timezoneoffset:i("getTimezoneOffset",s,0),utcdate:i("getUTCDate",s,0),utcday:i("getUTCDay",s,0),utcyear:i("getUTCFullYear",s,0),utcmonth:i("getUTCMonth",s,0),utchours:i("getUTCHours",s,0),utcminutes:i("getUTCMinutes",s,0),utcseconds:i("getUTCSeconds",s,0),utcmilliseconds:i("getUTCMilliseconds",s,0),length:i("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:i("toUpperCase",o,0),lower:i("toLowerCase",o,0),substring:i("substring",o),split:i("split",o),trim:i("trim",o,0),btoa:"btoa",atob:"atob",regexp:f,test:i("test",f),if:function(d){d.length<3&&error$1("Missing arguments to if function."),d.length>3&&error$1("Too many arguments to if function.");const p=d.map(n);return"("+p[0]+"?"+p[1]+":"+p[2]+")"}}}function stripQuotes(n){const t=n&&n.length-1;return t&&(n[0]==='"'&&n[t]==='"'||n[0]==="'"&&n[t]==="'")?n.slice(1,-1):n}function codegen(n){n=n||{};const t=n.allowed?toSet(n.allowed):{},i=n.forbidden?toSet(n.forbidden):{},s=n.constants||Constants$1,o=(n.functions||Functions$1)(P),f=n.globalvar,d=n.fieldvar,p=isFunction$1(f)?f:Z=>`${f}["${Z}"]`;let v={},_={},k=0;function P(Z){if(isString(Z))return Z;const W=L[Z.type];return W==null&&error$1("Unsupported type: "+Z.type),W(Z)}const L={Literal:Z=>Z.raw,Identifier:Z=>{const W=Z.name;return k>0?W:has$1(i,W)?error$1("Illegal identifier: "+W):has$1(s,W)?s[W]:has$1(t,W)?W:(v[W]=1,p(W))},MemberExpression:Z=>{const W=!Z.computed,j=P(Z.object);W&&(k+=1);const H=P(Z.property);return j===d&&(_[stripQuotes(H)]=1),W&&(k-=1),j+(W?"."+H:"["+H+"]")},CallExpression:Z=>{Z.callee.type!=="Identifier"&&error$1("Illegal callee type: "+Z.callee.type);const W=Z.callee.name,j=Z.arguments,H=has$1(o,W)&&o[W];return H||error$1("Unrecognized function: "+W),isFunction$1(H)?H(j):H+"("+j.map(P).join(",")+")"},ArrayExpression:Z=>"["+Z.elements.map(P).join(",")+"]",BinaryExpression:Z=>"("+P(Z.left)+" "+Z.operator+" "+P(Z.right)+")",UnaryExpression:Z=>"("+Z.operator+P(Z.argument)+")",ConditionalExpression:Z=>"("+P(Z.test)+"?"+P(Z.consequent)+":"+P(Z.alternate)+")",LogicalExpression:Z=>"("+P(Z.left)+Z.operator+P(Z.right)+")",ObjectExpression:Z=>"{"+Z.properties.map(P).join(",")+"}",Property:Z=>{k+=1;const W=P(Z.key);return k-=1,W+":"+P(Z.value)}};function G(Z){const W={code:P(Z),globals:Object.keys(v),fields:Object.keys(_)};return v={},_={},W}return G.functions=o,G.constants=s,G}class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let s=0;for(let o=0;o<this._n&&o<32;o++){const f=i[o],d=t+f,p=Math.abs(t)<Math.abs(f)?t-(d-f):f-(d-t);p&&(i[s++]=p),t=d}return i[s]=t,this._n=s+1,this}valueOf(){const t=this._partials;let i=this._n,s,o,f,d=0;if(i>0){for(d=t[--i];i>0&&(s=d,o=t[--i],d=s+o,f=o-(d-s),!f););i>0&&(f<0&&t[i-1]<0||f>0&&t[i-1]>0)&&(o=f*2,s=d+o,o==s-d&&(d=s))}return d}}function range$5(n,t,i){n=+n,t=+t,i=(o=arguments.length)<2?(t=n,n=0,1):o<3?1:+i;for(var s=-1,o=Math.max(0,Math.ceil((t-n)/i))|0,f=new Array(o);++s<o;)f[s]=n+s*i;return f}var epsilon=1e-6,epsilon2=1e-12,pi$1=Math.PI,halfPi=pi$1/2,quarterPi=pi$1/4,tau=pi$1*2,degrees$1=180/pi$1,radians$1=pi$1/180,abs$2=Math.abs,atan2$3=Math.atan2,cos$5=Math.cos,hypot=Math.hypot,sin$4=Math.sin,sqrt$5=Math.sqrt;function asin(n){return n>1?halfPi:n<-1?-halfPi:Math.asin(n)}function noop(){}function streamGeometry(n,t){n&&streamGeometryType.hasOwnProperty(n.type)&&streamGeometryType[n.type](n,t)}var streamObjectType={Feature:function(n,t){streamGeometry(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,s=-1,o=i.length;++s<o;)streamGeometry(i[s].geometry,t)}},streamGeometryType={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,s=-1,o=i.length;++s<o;)n=i[s],t.point(n[0],n[1],n[2])},LineString:function(n,t){streamLine(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,s=-1,o=i.length;++s<o;)streamLine(i[s],t,0)},Polygon:function(n,t){streamPolygon(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,s=-1,o=i.length;++s<o;)streamPolygon(i[s],t)},GeometryCollection:function(n,t){for(var i=n.geometries,s=-1,o=i.length;++s<o;)streamGeometry(i[s],t)}};function streamLine(n,t,i){var s=-1,o=n.length-i,f;for(t.lineStart();++s<o;)f=n[s],t.point(f[0],f[1],f[2]);t.lineEnd()}function streamPolygon(n,t){var i=-1,s=n.length;for(t.polygonStart();++i<s;)streamLine(n[i],t,1);t.polygonEnd()}function geoStream(n,t){n&&streamObjectType.hasOwnProperty(n.type)?streamObjectType[n.type](n,t):streamGeometry(n,t)}var areaRingSum=new Adder,areaSum=new Adder,lambda00$2,phi00$2,lambda0$1,cosPhi0,sinPhi0,areaStream={point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaRingSum=new Adder,areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){var n=+areaRingSum;areaSum.add(n<0?tau+n:n),this.lineStart=this.lineEnd=this.point=noop},sphere:function(){areaSum.add(tau)}};function areaRingStart(){areaStream.point=areaPointFirst}function areaRingEnd(){areaPoint(lambda00$2,phi00$2)}function areaPointFirst(n,t){areaStream.point=areaPoint,lambda00$2=n,phi00$2=t,n*=radians$1,t*=radians$1,lambda0$1=n,cosPhi0=cos$5(t=t/2+quarterPi),sinPhi0=sin$4(t)}function areaPoint(n,t){n*=radians$1,t*=radians$1,t=t/2+quarterPi;var i=n-lambda0$1,s=i>=0?1:-1,o=s*i,f=cos$5(t),d=sin$4(t),p=sinPhi0*d,v=cosPhi0*f+p*cos$5(o),_=p*s*sin$4(o);areaRingSum.add(atan2$3(_,v)),lambda0$1=n,cosPhi0=f,sinPhi0=d}function geoArea$1(n){return areaSum=new Adder,geoStream(n,areaStream),areaSum*2}function spherical(n){return[atan2$3(n[1],n[0]),asin(n[2])]}function cartesian(n){var t=n[0],i=n[1],s=cos$5(i);return[s*cos$5(t),s*sin$4(t),sin$4(i)]}function cartesianCross(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function cartesianNormalizeInPlace(n){var t=sqrt$5(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}var lambda0,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0$1,deltaSum,ranges,range$4,boundsStream={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream.point=boundsRingPoint,boundsStream.lineStart=boundsRingStart,boundsStream.lineEnd=boundsRingEnd,deltaSum=new Adder,areaStream.polygonStart()},polygonEnd:function(){areaStream.polygonEnd(),boundsStream.point=boundsPoint,boundsStream.lineStart=boundsLineStart,boundsStream.lineEnd=boundsLineEnd,areaRingSum<0?(lambda0=-(lambda1=180),phi0=-(phi1=90)):deltaSum>epsilon?phi1=90:deltaSum<-1e-6&&(phi0=-90),range$4[0]=lambda0,range$4[1]=lambda1},sphere:function(){lambda0=-(lambda1=180),phi0=-(phi1=90)}};function boundsPoint(n,t){ranges.push(range$4=[lambda0=n,lambda1=n]),t<phi0&&(phi0=t),t>phi1&&(phi1=t)}function linePoint(n,t){var i=cartesian([n*radians$1,t*radians$1]);if(p0$1){var s=cartesianCross(p0$1,i),o=[s[1],-s[0],0],f=cartesianCross(o,s);cartesianNormalizeInPlace(f),f=spherical(f);var d=n-lambda2,p=d>0?1:-1,v=f[0]*degrees$1*p,_,k=abs$2(d)>180;k^(p*lambda2<v&&v<p*n)?(_=f[1]*degrees$1,_>phi1&&(phi1=_)):(v=(v+360)%360-180,k^(p*lambda2<v&&v<p*n)?(_=-f[1]*degrees$1,_<phi0&&(phi0=_)):(t<phi0&&(phi0=t),t>phi1&&(phi1=t))),k?n<lambda2?angle(lambda0,n)>angle(lambda0,lambda1)&&(lambda1=n):angle(n,lambda1)>angle(lambda0,lambda1)&&(lambda0=n):lambda1>=lambda0?(n<lambda0&&(lambda0=n),n>lambda1&&(lambda1=n)):n>lambda2?angle(lambda0,n)>angle(lambda0,lambda1)&&(lambda1=n):angle(n,lambda1)>angle(lambda0,lambda1)&&(lambda0=n)}else ranges.push(range$4=[lambda0=n,lambda1=n]);t<phi0&&(phi0=t),t>phi1&&(phi1=t),p0$1=i,lambda2=n}function boundsLineStart(){boundsStream.point=linePoint}function boundsLineEnd(){range$4[0]=lambda0,range$4[1]=lambda1,boundsStream.point=boundsPoint,p0$1=null}function boundsRingPoint(n,t){if(p0$1){var i=n-lambda2;deltaSum.add(abs$2(i)>180?i+(i>0?360:-360):i)}else lambda00$1=n,phi00$1=t;areaStream.point(n,t),linePoint(n,t)}function boundsRingStart(){areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1),areaStream.lineEnd(),abs$2(deltaSum)>epsilon&&(lambda0=-(lambda1=180)),range$4[0]=lambda0,range$4[1]=lambda1,p0$1=null}function angle(n,t){return(t-=n)<0?t+360:t}function rangeCompare(n,t){return n[0]-t[0]}function rangeContains(n,t){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}function geoBounds$1(n){var t,i,s,o,f,d,p;if(phi1=lambda1=-(lambda0=phi0=1/0),ranges=[],geoStream(n,boundsStream),i=ranges.length){for(ranges.sort(rangeCompare),t=1,s=ranges[0],f=[s];t<i;++t)o=ranges[t],rangeContains(s,o[0])||rangeContains(s,o[1])?(angle(s[0],o[1])>angle(s[0],s[1])&&(s[1]=o[1]),angle(o[0],s[1])>angle(s[0],s[1])&&(s[0]=o[0])):f.push(s=o);for(d=-1/0,i=f.length-1,t=0,s=f[i];t<=i;s=o,++t)o=f[t],(p=angle(s[1],o[0]))>d&&(d=p,lambda0=o[0],lambda1=s[1])}return ranges=range$4=null,lambda0===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[lambda0,phi0],[lambda1,phi1]]}var W0$1,W1$1,X0$1,Y0$1,Z0$1,X1$1,Y1$1,Z1$1,X2$2,Y2$2,Z2$1,lambda00,phi00,x0$1,y0$1,z0$1,centroidStream={sphere:noop,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd}};function centroidPoint(n,t){n*=radians$1,t*=radians$1;var i=cos$5(t);centroidPointCartesian(i*cos$5(n),i*sin$4(n),sin$4(t))}function centroidPointCartesian(n,t,i){++W0$1,X0$1+=(n-X0$1)/W0$1,Y0$1+=(t-Y0$1)/W0$1,Z0$1+=(i-Z0$1)/W0$1}function centroidLineStart(){centroidStream.point=centroidLinePointFirst}function centroidLinePointFirst(n,t){n*=radians$1,t*=radians$1;var i=cos$5(t);x0$1=i*cos$5(n),y0$1=i*sin$4(n),z0$1=sin$4(t),centroidStream.point=centroidLinePoint,centroidPointCartesian(x0$1,y0$1,z0$1)}function centroidLinePoint(n,t){n*=radians$1,t*=radians$1;var i=cos$5(t),s=i*cos$5(n),o=i*sin$4(n),f=sin$4(t),d=atan2$3(sqrt$5((d=y0$1*f-z0$1*o)*d+(d=z0$1*s-x0$1*f)*d+(d=x0$1*o-y0$1*s)*d),x0$1*s+y0$1*o+z0$1*f);W1$1+=d,X1$1+=d*(x0$1+(x0$1=s)),Y1$1+=d*(y0$1+(y0$1=o)),Z1$1+=d*(z0$1+(z0$1=f)),centroidPointCartesian(x0$1,y0$1,z0$1)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(lambda00,phi00),centroidStream.point=centroidPoint}function centroidRingPointFirst(n,t){lambda00=n,phi00=t,n*=radians$1,t*=radians$1,centroidStream.point=centroidRingPoint;var i=cos$5(t);x0$1=i*cos$5(n),y0$1=i*sin$4(n),z0$1=sin$4(t),centroidPointCartesian(x0$1,y0$1,z0$1)}function centroidRingPoint(n,t){n*=radians$1,t*=radians$1;var i=cos$5(t),s=i*cos$5(n),o=i*sin$4(n),f=sin$4(t),d=y0$1*f-z0$1*o,p=z0$1*s-x0$1*f,v=x0$1*o-y0$1*s,_=hypot(d,p,v),k=asin(_),P=_&&-k/_;X2$2.add(P*d),Y2$2.add(P*p),Z2$1.add(P*v),W1$1+=k,X1$1+=k*(x0$1+(x0$1=s)),Y1$1+=k*(y0$1+(y0$1=o)),Z1$1+=k*(z0$1+(z0$1=f)),centroidPointCartesian(x0$1,y0$1,z0$1)}function geoCentroid$1(n){W0$1=W1$1=X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=0,X2$2=new Adder,Y2$2=new Adder,Z2$1=new Adder,geoStream(n,centroidStream);var t=+X2$2,i=+Y2$2,s=+Z2$1,o=hypot(t,i,s);return o<epsilon2&&(t=X1$1,i=Y1$1,s=Z1$1,W1$1<epsilon&&(t=X0$1,i=Y0$1,s=Z0$1),o=hypot(t,i,s),o<epsilon2)?[NaN,NaN]:[atan2$3(i,t)*degrees$1,asin(s/o)*degrees$1]}function define(n,t,i){n.prototype=t.prototype=i,i.constructor=n}function extend(n,t){var i=Object.create(n.prototype);for(var s in t)i[s]=t[s];return i}function Color$1(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color$1,color$2,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$2(n){var t,i;return n=(n+"").trim().toLowerCase(),(t=reHex.exec(n))?(i=t[1].length,t=parseInt(t[1],16),i===6?rgbn(t):i===3?new Rgb(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?rgba(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger.exec(n))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(n))?new Rgb(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger.exec(n))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(n))?rgba(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent.exec(n))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(n))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(n)?rgbn(named[n]):n==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,n&255,1)}function rgba(n,t,i,s){return s<=0&&(n=t=i=NaN),new Rgb(n,t,i,s)}function rgbConvert(n){return n instanceof Color$1||(n=color$2(n)),n?(n=n.rgb(),new Rgb(n.r,n.g,n.b,n.opacity)):new Rgb}function rgb$2(n,t,i,s){return arguments.length===1?rgbConvert(n):new Rgb(n,t,i,s??1)}function Rgb(n,t,i,s){this.r=+n,this.g=+t,this.b=+i,this.opacity=+s}define(Rgb,rgb$2,extend(Color$1,{brighter(n){return n=n==null?brighter:Math.pow(brighter,n),new Rgb(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?darker:Math.pow(darker,n),new Rgb(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}`}function rgb_formatHex8(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}${hex$1((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const n=clampa(this.opacity);return`${n===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${n===1?")":`, ${n})`}`}function clampa(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function clampi(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function hex$1(n){return n=clampi(n),(n<16?"0":"")+n.toString(16)}function hsla(n,t,i,s){return s<=0?n=t=i=NaN:i<=0||i>=1?n=t=NaN:t<=0&&(n=NaN),new Hsl(n,t,i,s)}function hslConvert(n){if(n instanceof Hsl)return new Hsl(n.h,n.s,n.l,n.opacity);if(n instanceof Color$1||(n=color$2(n)),!n)return new Hsl;if(n instanceof Hsl)return n;n=n.rgb();var t=n.r/255,i=n.g/255,s=n.b/255,o=Math.min(t,i,s),f=Math.max(t,i,s),d=NaN,p=f-o,v=(f+o)/2;return p?(t===f?d=(i-s)/p+(i<s)*6:i===f?d=(s-t)/p+2:d=(t-i)/p+4,p/=v<.5?f+o:2-f-o,d*=60):p=v>0&&v<1?0:d,new Hsl(d,p,v,n.opacity)}function hsl$2(n,t,i,s){return arguments.length===1?hslConvert(n):new Hsl(n,t,i,s??1)}function Hsl(n,t,i,s){this.h=+n,this.s=+t,this.l=+i,this.opacity=+s}define(Hsl,hsl$2,extend(Color$1,{brighter(n){return n=n==null?brighter:Math.pow(brighter,n),new Hsl(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?darker:Math.pow(darker,n),new Hsl(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,i=this.l,s=i+(i<.5?i:1-i)*t,o=2*i-s;return new Rgb(hsl2rgb$1(n>=240?n-240:n+120,o,s),hsl2rgb$1(n,o,s),hsl2rgb$1(n<120?n+240:n-120,o,s),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=clampa(this.opacity);return`${n===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${n===1?")":`, ${n})`}`}}));function clamph(n){return n=(n||0)%360,n<0?n+360:n}function clampt(n){return Math.max(0,Math.min(1,n||0))}function hsl2rgb$1(n,t,i){return(n<60?t+(i-t)*n/60:n<180?i:n<240?t+(i-t)*(240-n)/60:t)*255}const radians=Math.PI/180,degrees=180/Math.PI,K$1=18,Xn$1=.96422,Yn$1=1,Zn$1=.82521,t0$1=4/29,t1$1=6/29,t2$1=3*t1$1*t1$1,t3$1=t1$1*t1$1*t1$1;function labConvert(n){if(n instanceof Lab)return new Lab(n.l,n.a,n.b,n.opacity);if(n instanceof Hcl)return hcl2lab(n);n instanceof Rgb||(n=rgbConvert(n));var t=rgb2lrgb(n.r),i=rgb2lrgb(n.g),s=rgb2lrgb(n.b),o=xyz2lab$1((.2225045*t+.7168786*i+.0606169*s)/Yn$1),f,d;return t===i&&i===s?f=d=o:(f=xyz2lab$1((.4360747*t+.3850649*i+.1430804*s)/Xn$1),d=xyz2lab$1((.0139322*t+.0971045*i+.7141733*s)/Zn$1)),new Lab(116*o-16,500*(f-o),200*(o-d),n.opacity)}function lab$2(n,t,i,s){return arguments.length===1?labConvert(n):new Lab(n,t,i,s??1)}function Lab(n,t,i,s){this.l=+n,this.a=+t,this.b=+i,this.opacity=+s}define(Lab,lab$2,extend(Color$1,{brighter(n){return new Lab(this.l+K$1*(n??1),this.a,this.b,this.opacity)},darker(n){return new Lab(this.l-K$1*(n??1),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,t=isNaN(this.a)?n:n+this.a/500,i=isNaN(this.b)?n:n-this.b/200;return t=Xn$1*lab2xyz$1(t),n=Yn$1*lab2xyz$1(n),i=Zn$1*lab2xyz$1(i),new Rgb(lrgb2rgb(3.1338561*t-1.6168667*n-.4906146*i),lrgb2rgb(-.9787684*t+1.9161415*n+.033454*i),lrgb2rgb(.0719453*t-.2289914*n+1.4052427*i),this.opacity)}}));function xyz2lab$1(n){return n>t3$1?Math.pow(n,1/3):n/t2$1+t0$1}function lab2xyz$1(n){return n>t1$1?n*n*n:t2$1*(n-t0$1)}function lrgb2rgb(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function rgb2lrgb(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function hclConvert(n){if(n instanceof Hcl)return new Hcl(n.h,n.c,n.l,n.opacity);if(n instanceof Lab||(n=labConvert(n)),n.a===0&&n.b===0)return new Hcl(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var t=Math.atan2(n.b,n.a)*degrees;return new Hcl(t<0?t+360:t,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function hcl$1(n,t,i,s){return arguments.length===1?hclConvert(n):new Hcl(n,t,i,s??1)}function Hcl(n,t,i,s){this.h=+n,this.c=+t,this.l=+i,this.opacity=+s}function hcl2lab(n){if(isNaN(n.h))return new Lab(n.l,0,0,n.opacity);var t=n.h*radians;return new Lab(n.l,Math.cos(t)*n.c,Math.sin(t)*n.c,n.opacity)}define(Hcl,hcl$1,extend(Color$1,{brighter(n){return new Hcl(this.h,this.c,this.l+K$1*(n??1),this.opacity)},darker(n){return new Hcl(this.h,this.c,this.l-K$1*(n??1),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));function ascending(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function descending(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function bisector(n){let t,i,s;n.length!==2?(t=ascending,i=(p,v)=>ascending(n(p),v),s=(p,v)=>n(p)-v):(t=n===ascending||n===descending?n:zero$2,i=n,s=n);function o(p,v,_=0,k=p.length){if(_<k){if(t(v,v)!==0)return k;do{const P=_+k>>>1;i(p[P],v)<0?_=P+1:k=P}while(_<k)}return _}function f(p,v,_=0,k=p.length){if(_<k){if(t(v,v)!==0)return k;do{const P=_+k>>>1;i(p[P],v)<=0?_=P+1:k=P}while(_<k)}return _}function d(p,v,_=0,k=p.length){const P=o(p,v,_,k-1);return P>_&&s(p[P-1],v)>-s(p[P],v)?P-1:P}return{left:o,center:d,right:f}}function zero$2(){return 0}function intersection(n,...t){n=new InternSet(n),t=t.map(set$1);e:for(const i of n)for(const s of t)if(!s.has(i)){n.delete(i);continue e}return n}function set$1(n){return n instanceof InternSet?n:new InternSet(n)}function union(...n){const t=new InternSet;for(const i of n)for(const s of i)t.add(s);return t}const SELECTION_GETTER=Symbol("vega_selection_getter");function getter(n){return(!n.getter||!n.getter[SELECTION_GETTER])&&(n.getter=field$1(n.field),n.getter[SELECTION_GETTER]=!0),n.getter}const Intersect="intersect",Union="union",VlMulti="vlMulti",VlPoint="vlPoint",Or$1="or",And="and",SelectionId="_vgsid_",$selectionId=field$1(SelectionId),TYPE_ENUM="E",TYPE_RANGE_INC="R",TYPE_RANGE_EXC="R-E",TYPE_RANGE_LE="R-LE",TYPE_RANGE_RE="R-RE",TYPE_PRED_LT="E-LT",TYPE_PRED_LTE="E-LTE",TYPE_PRED_GT="E-GT",TYPE_PRED_GTE="E-GTE",TYPE_PRED_VALID="E-VALID",TYPE_PRED_ONE_OF="E-ONE",UNIT_INDEX="index:unit";function testPoint(n,t){for(var i=t.fields,s=t.values,o=i.length,f=0,d,p;f<o;++f)if(p=i[f],d=getter(p)(n),isDate$1(d)&&(d=toNumber(d)),isDate$1(s[f])&&(s[f]=toNumber(s[f])),isArray(s[f])&&isDate$1(s[f][0])&&(s[f]=s[f].map(toNumber)),p.type===TYPE_ENUM){if(isArray(s[f])?!s[f].includes(d):d!==s[f])return!1}else if(p.type===TYPE_RANGE_INC){if(!inrange(d,s[f]))return!1}else if(p.type===TYPE_RANGE_RE){if(!inrange(d,s[f],!0,!1))return!1}else if(p.type===TYPE_RANGE_EXC){if(!inrange(d,s[f],!1,!1))return!1}else if(p.type===TYPE_RANGE_LE){if(!inrange(d,s[f],!1,!0))return!1}else if(p.type===TYPE_PRED_LT){if(d>=s[f])return!1}else if(p.type===TYPE_PRED_LTE){if(d>s[f])return!1}else if(p.type===TYPE_PRED_GT){if(d<=s[f])return!1}else if(p.type===TYPE_PRED_GTE){if(d<s[f])return!1}else if(p.type===TYPE_PRED_VALID){if(d===null||isNaN(d))return!1}else if(p.type===TYPE_PRED_ONE_OF&&s[f].indexOf(d)===-1)return!1;return!0}function selectionTest(n,t,i){for(var s=this.context.data[n],o=s?s.values.value:[],f=s?s[UNIT_INDEX]&&s[UNIT_INDEX].value:void 0,d=i===Intersect,p=o.length,v=0,_,k,P,L,G;v<p;++v)if(_=o[v],f&&d){if(k=k||{},P=k[L=_.unit]||0,P===-1)continue;if(G=testPoint(t,_),k[L]=G?-1:++P,G&&f.size===1)return!0;if(!G&&P===f.get(L).count)return!1}else if(G=testPoint(t,_),d^G)return G;return p&&d}const bisect=bisector($selectionId),bisectLeft=bisect.left,bisectRight=bisect.right;function selectionIdTest(n,t,i){const s=this.context.data[n],o=s?s.values.value:[],f=s?s[UNIT_INDEX]&&s[UNIT_INDEX].value:void 0,d=i===Intersect,p=$selectionId(t),v=bisectLeft(o,p);if(v===o.length||$selectionId(o[v])!==p)return!1;if(f&&d){if(f.size===1)return!0;if(bisectRight(o,p)-v<f.size)return!1}return!0}function selectionTuples(n,t){return n.map(i=>extend$3(t.fields?{values:t.fields.map(s=>getter(s)(i.datum))}:{[SelectionId]:$selectionId(i.datum)},t))}function selectionResolve(n,t,i,s){for(var o=this.context.data[n],f=o?o.values.value:[],d={},p={},v={},_,k,P,L,G,Z,W,j,H,me,$e=f.length,De=0,le,Ce;De<$e;++De)if(_=f[De],L=_.unit,k=_.fields,P=_.values,k&&P){for(le=0,Ce=k.length;le<Ce;++le)G=k[le],W=d[G.field]||(d[G.field]={}),j=W[L]||(W[L]=[]),v[G.field]=H=G.type.charAt(0),me=ops[`${H}_union`],W[L]=me(j,array$5(P[le]));i&&(j=p[L]||(p[L]=[]),j.push(array$5(P).reduce((Me,_n,_i)=>(Me[k[_i].field]=_n,Me),{})))}else G=SelectionId,Z=$selectionId(_),W=d[G]||(d[G]={}),j=W[L]||(W[L]=[]),j.push(Z),i&&(j=p[L]||(p[L]=[]),j.push({[SelectionId]:Z}));if(t=t||Union,d[SelectionId]?d[SelectionId]=ops[`${SelectionId}_${t}`](...Object.values(d[SelectionId])):Object.keys(d).forEach(Me=>{d[Me]=Object.keys(d[Me]).map(_n=>d[Me][_n]).reduce((_n,_i)=>_n===void 0?_i:ops[`${v[Me]}_${t}`](_n,_i))}),f=Object.keys(p),i&&f.length){const Me=s?VlPoint:VlMulti;d[Me]=t===Union?{[Or$1]:f.reduce((_n,_i)=>(_n.push(...p[_i]),_n),[])}:{[And]:f.map(_n=>({[Or$1]:p[_n]}))}}return d}var ops={[`${SelectionId}_union`]:union,[`${SelectionId}_intersect`]:intersection,E_union:function(n,t){if(!n.length)return t;for(var i=0,s=t.length;i<s;++i)n.includes(t[i])||n.push(t[i]);return n},E_intersect:function(n,t){return n.length?n.filter(i=>t.includes(i)):t},R_union:function(n,t){var i=toNumber(t[0]),s=toNumber(t[1]);return i>s&&(i=t[1],s=t[0]),n.length?(n[0]>i&&(n[0]=i),n[1]<s&&(n[1]=s),n):[i,s]},R_intersect:function(n,t){var i=toNumber(t[0]),s=toNumber(t[1]);return i>s&&(i=t[1],s=t[0]),n.length?s<n[0]||n[1]<i?[]:(n[0]<i&&(n[0]=i),n[1]>s&&(n[1]=s),n):[i,s]}};const DataPrefix$1=":",IndexPrefix$1="@";function selectionVisitor(n,t,i,s){t[0].type!==Literal$1&&error$1("First argument to selection functions must be a string literal.");const o=t[0].value,f=t.length>=2&&peek$2(t).value,d="unit",p=IndexPrefix$1+d,v=DataPrefix$1+o;f===Intersect&&!has$1(s,p)&&(s[p]=i.getData(o).indataRef(i,d)),has$1(s,v)||(s[v]=i.getData(o).tuplesRef())}function data$1(n){const t=this.context.data[n];return t?t.values.value:[]}function indata(n,t,i){const s=this.context.data[n]["index:"+t],o=s?s.value.get(i):void 0;return o&&o.count}function setdata(n,t){const i=this.context.dataflow,s=this.context.data[n],o=s.input;return i.pulse(o,i.changeset().remove(truthy).insert(t)),1}function encode(n,t,i){if(n){const s=this.context.dataflow,o=n.mark.source;s.pulse(o,s.changeset().encode(n,t))}return i!==void 0?i:n}const wrap=n=>function(t,i){const s=this.context.dataflow.locale();return t===null?"null":s[n](i)(t)},format=wrap("format"),timeFormat$1=wrap("timeFormat"),utcFormat=wrap("utcFormat"),timeParse=wrap("timeParse"),utcParse=wrap("utcParse"),dateObj=new Date(2e3,0,1);function time(n,t,i){return!Number.isInteger(n)||!Number.isInteger(t)?"":(dateObj.setYear(2e3),dateObj.setMonth(n),dateObj.setDate(t),timeFormat$1.call(this,dateObj,i))}function monthFormat(n){return time.call(this,n,1,"%B")}function monthAbbrevFormat(n){return time.call(this,n,1,"%b")}function dayFormat(n){return time.call(this,0,2+n,"%A")}function dayAbbrevFormat(n){return time.call(this,0,2+n,"%a")}const DataPrefix=":",IndexPrefix="@",ScalePrefix="%",SignalPrefix="$";function dataVisitor(n,t,i,s){t[0].type!==Literal$1&&error$1("First argument to data functions must be a string literal.");const o=t[0].value,f=DataPrefix+o;if(!has$1(f,s))try{s[f]=i.getData(o).tuplesRef()}catch{}}function indataVisitor(n,t,i,s){t[0].type!==Literal$1&&error$1("First argument to indata must be a string literal."),t[1].type!==Literal$1&&error$1("Second argument to indata must be a string literal.");const o=t[0].value,f=t[1].value,d=IndexPrefix+f;has$1(d,s)||(s[d]=i.getData(o).indataRef(i,f))}function scaleVisitor(n,t,i,s){if(t[0].type===Literal$1)addScaleDependency(i,s,t[0].value);else for(n in i.scales)addScaleDependency(i,s,n)}function addScaleDependency(n,t,i){const s=ScalePrefix+i;if(!has$1(t,s))try{t[s]=n.scaleRef(i)}catch{}}function getScale(n,t){if(isString(n)){const i=t.scales[n];return i&&isRegisteredScale(i.value)?i.value:void 0}else if(isFunction$1(n))return isRegisteredScale(n)?n:void 0}function internalScaleFunctions(n,t,i){t.__bandwidth=o=>o&&o.bandwidth?o.bandwidth():0,i._bandwidth=scaleVisitor,i._range=scaleVisitor,i._scale=scaleVisitor;const s=o=>"_["+(o.type===Literal$1?$(ScalePrefix+o.value):$(ScalePrefix)+"+"+n(o))+"]";return{_bandwidth:o=>`this.__bandwidth(${s(o[0])})`,_range:o=>`${s(o[0])}.range()`,_scale:o=>`${s(o[0])}(${n(o[1])})`}}function geoMethod(n,t){return function(i,s,o){if(i){const f=getScale(i,(o||this).context);return f&&f.path[n](s)}else return t(s)}}const geoArea=geoMethod("area",geoArea$1),geoBounds=geoMethod("bounds",geoBounds$1),geoCentroid=geoMethod("centroid",geoCentroid$1);function geoScale(n,t){const i=getScale(n,(t||this).context);return i&&i.scale()}function inScope(n){const t=this.context.group;let i=!1;if(t)for(;n;){if(n===t){i=!0;break}n=n.mark.group}return i}function log$2(n,t,i){try{n[t].apply(n,["EXPRESSION"].concat([].slice.call(i)))}catch(s){n.warn(s)}return i[i.length-1]}function warn$1(){return log$2(this.context.dataflow,"warn",arguments)}function info(){return log$2(this.context.dataflow,"info",arguments)}function debug$1(){return log$2(this.context.dataflow,"debug",arguments)}function channel_luminance_value(n){const t=n/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function luminance(n){const t=rgb$2(n),i=channel_luminance_value(t.r),s=channel_luminance_value(t.g),o=channel_luminance_value(t.b);return .2126*i+.7152*s+.0722*o}function contrast$1(n,t){const i=luminance(n),s=luminance(t),o=Math.max(i,s),f=Math.min(i,s);return(o+.05)/(f+.05)}function merge(){const n=[].slice.call(arguments);return n.unshift({}),extend$3(...n)}function equal$1(n,t){return n===t||n!==n&&t!==t?!0:isArray(n)?isArray(t)&&n.length===t.length?equalArray(n,t):!1:isObject(n)&&isObject(t)?equalObject(n,t):!1}function equalArray(n,t){for(let i=0,s=n.length;i<s;++i)if(!equal$1(n[i],t[i]))return!1;return!0}function equalObject(n,t){for(const i in n)if(!equal$1(n[i],t[i]))return!1;return!0}function removePredicate(n){return t=>equalObject(n,t)}function modify(n,t,i,s,o,f){const d=this.context.dataflow,p=this.context.data[n],v=p.input,_=d.stamp();let k=p.changes,P,L;if(d._trigger===!1||!(v.value.length||t||s))return 0;if((!k||k.stamp<_)&&(p.changes=k=d.changeset(),k.stamp=_,d.runAfter(()=>{p.modified=!0,d.pulse(v,k).run()},!0,1)),i&&(P=i===!0?truthy:isArray(i)||isTuple(i)?i:removePredicate(i),k.remove(P)),t&&k.insert(t),s&&(P=removePredicate(s),v.value.some(P)?k.remove(P):k.insert(s)),o)for(L in f)k.modify(o,L,f[L]);return 1}function pinchDistance(n){const t=n.touches,i=t[0].clientX-t[1].clientX,s=t[0].clientY-t[1].clientY;return Math.hypot(i,s)}function pinchAngle(n){const t=n.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const accessors={};function pluck(n,t){const i=accessors[t]||(accessors[t]=field$1(t));return isArray(n)?n.map(i):i(n)}function array(n){return isArray(n)||ArrayBuffer.isView(n)?n:null}function sequence(n){return array(n)||(isString(n)?n:null)}function join(n){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return array(n).join(...i)}function indexof(n){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return sequence(n).indexOf(...i)}function lastindexof(n){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return sequence(n).lastIndexOf(...i)}function slice$1(n){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return sequence(n).slice(...i)}function replace(n,t,i){return isFunction$1(i)&&error$1("Function argument passed to replace."),!isString(t)&&!isRegExp(t)&&error$1("Please pass a string or RegExp argument to replace."),String(n).replace(t,i)}function reverse$1(n){return array(n).slice().reverse()}function sort(n){return array(n).slice().sort(ascending$8)}function bandspace(n,t,i){return bandSpace(n||0,t||0,i||0)}function bandwidth(n,t){const i=getScale(n,(t||this).context);return i&&i.bandwidth?i.bandwidth():0}function copy(n,t){const i=getScale(n,(t||this).context);return i?i.copy():void 0}function domain$2(n,t){const i=getScale(n,(t||this).context);return i?i.domain():[]}function invert(n,t,i){const s=getScale(n,(i||this).context);return s?isArray(t)?(s.invertRange||s.invert)(t):(s.invert||s.invertExtent)(t):void 0}function range$3(n,t){const i=getScale(n,(t||this).context);return i&&i.range?i.range():[]}function scale$3(n,t,i){const s=getScale(n,(i||this).context);return s?s(t):void 0}function scaleGradient(n,t,i,s,o){n=getScale(n,(o||this).context);const f=Gradient$1(t,i);let d=n.domain(),p=d[0],v=peek$2(d),_=identity$7;return v-p?_=scaleFraction(n,p,v):n=(n.interpolator?scale$5("sequential")().interpolator(n.interpolator()):scale$5("linear")().interpolate(n.interpolate()).range(n.range())).domain([p=0,v=1]),n.ticks&&(d=n.ticks(+s||15),p!==d[0]&&d.unshift(p),v!==peek$2(d)&&d.push(v)),d.forEach(k=>f.stop(_(k),n(k))),f}function geoShape(n,t,i){const s=getScale(n,(i||this).context);return function(o){return s?s.path.context(o)(t):""}}function pathShape(n){let t=null;return function(i){return i?pathRender(i,t=t||parse$3(n)):n}}const datum=n=>n.data;function treeNodes(n,t){const i=data$1.call(t,n);return i.root&&i.root.lookup||{}}function treePath(n,t,i){const s=treeNodes(n,this),o=s[t],f=s[i];return o&&f?o.path(f).map(datum):void 0}function treeAncestors(n,t){const i=treeNodes(n,this)[t];return i?i.ancestors().map(datum):void 0}const _window=()=>typeof window<"u"&&window||null;function screen$1(){const n=_window();return n?n.screen:{}}function windowSize(){const n=_window();return n?[n.innerWidth,n.innerHeight]:[void 0,void 0]}function containerSize(){const n=this.context.dataflow,t=n.container&&n.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function intersect(n,t,i){if(!n)return[];const[s,o]=n,f=new Bounds().set(s[0],s[1],o[0],o[1]),d=i||this.context.dataflow.scenegraph().root;return intersect$2(d,f,filter(t))}function filter(n){let t=null;if(n){const i=array$5(n.marktype),s=array$5(n.markname);t=o=>(!i.length||i.some(f=>o.marktype===f))&&(!s.length||s.some(f=>o.name===f))}return t}function lassoAppend(n,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;n=array$5(n);const o=n[n.length-1];return o===void 0||Math.hypot(o[0]-t,o[1]-i)>s?[...n,[t,i]]:n}function lassoPath(n){return array$5(n).reduce((t,i,s)=>{let[o,f]=i;return t+=s==0?`M ${o},${f} `:s===n.length-1?" Z":`L ${o},${f} `},"")}function intersectLasso(n,t,i){const{x:s,y:o,mark:f}=i,d=new Bounds().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[v,_]of t)v<d.x1&&(d.x1=v),v>d.x2&&(d.x2=v),_<d.y1&&(d.y1=_),_>d.y2&&(d.y2=_);return d.translate(s,o),intersect([[d.x1,d.y1],[d.x2,d.y2]],n,f).filter(v=>pointInPolygon(v.x,v.y,t))}function pointInPolygon(n,t,i){let s=0;for(let o=0,f=i.length-1;o<i.length;f=o++){const[d,p]=i[f],[v,_]=i[o];_>t!=p>t&&n<(d-v)*(t-_)/(p-_)+v&&s++}return s&1}const functionContext={random(){return random$2()},cumulativeNormal,cumulativeLogNormal,cumulativeUniform,densityNormal,densityLogNormal,densityUniform,quantileNormal,quantileLogNormal,quantileUniform,sampleNormal,sampleLogNormal,sampleUniform,isArray,isBoolean:isBoolean$2,isDate:isDate$1,isDefined(n){return n!==void 0},isNumber:isNumber$1,isObject,isRegExp,isString,isTuple,isValid(n){return n!=null&&n===n},toBoolean,toDate(n){return toDate(n)},toNumber,toString,indexof,join,lastindexof,replace,reverse:reverse$1,sort,slice:slice$1,flush,lerp,merge,pad:pad$3,peek:peek$2,pluck,span,inrange,truncate:truncate$1,rgb:rgb$2,lab:lab$2,hcl:hcl$1,hsl:hsl$2,luminance,contrast:contrast$1,sequence:range$5,format,utcFormat,utcParse,utcOffset,utcSequence,timeFormat:timeFormat$1,timeParse,timeOffset,timeSequence,timeUnitSpecifier,monthFormat,monthAbbrevFormat,dayFormat,dayAbbrevFormat,quarter,utcquarter,week,utcweek,dayofyear,utcdayofyear,warn:warn$1,info,debug:debug$1,extent(n){return extent(n)},inScope,intersect,clampRange,pinchDistance,pinchAngle,screen:screen$1,containerSize,windowSize,bandspace,setdata,pathShape,panLinear,panLog,panPow,panSymlog,zoomLinear,zoomLog,zoomPow,zoomSymlog,encode,modify,lassoAppend,lassoPath,intersectLasso},eventFunctions=["view","item","group","xy","x","y"],eventPrefix="event.vega.",thisPrefix="this.",astVisitors={},codegenParams={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:n=>`_[${$(SignalPrefix+n)}]`,functions:buildFunctions,constants:Constants$1,visitors:astVisitors},codeGenerator=codegen(codegenParams);function buildFunctions(n){const t=Functions$1(n);eventFunctions.forEach(i=>t[i]=eventPrefix+i);for(const i in functionContext)t[i]=thisPrefix+i;return extend$3(t,internalScaleFunctions(n,functionContext,astVisitors)),t}function expressionFunction(n,t,i){return arguments.length===1?functionContext[n]:(functionContext[n]=t,i&&(astVisitors[n]=i),codeGenerator&&(codeGenerator.functions[n]=thisPrefix+n),this)}expressionFunction("bandwidth",bandwidth,scaleVisitor);expressionFunction("copy",copy,scaleVisitor);expressionFunction("domain",domain$2,scaleVisitor);expressionFunction("range",range$3,scaleVisitor);expressionFunction("invert",invert,scaleVisitor);expressionFunction("scale",scale$3,scaleVisitor);expressionFunction("gradient",scaleGradient,scaleVisitor);expressionFunction("geoArea",geoArea,scaleVisitor);expressionFunction("geoBounds",geoBounds,scaleVisitor);expressionFunction("geoCentroid",geoCentroid,scaleVisitor);expressionFunction("geoShape",geoShape,scaleVisitor);expressionFunction("geoScale",geoScale,scaleVisitor);expressionFunction("indata",indata,indataVisitor);expressionFunction("data",data$1,dataVisitor);expressionFunction("treePath",treePath,dataVisitor);expressionFunction("treeAncestors",treeAncestors,dataVisitor);expressionFunction("vlSelectionTest",selectionTest,selectionVisitor);expressionFunction("vlSelectionIdTest",selectionIdTest,selectionVisitor);expressionFunction("vlSelectionResolve",selectionResolve,selectionVisitor);expressionFunction("vlSelectionTuples",selectionTuples);function parser$1(n,t){const i={};let s;try{n=isString(n)?n:$(n)+"",s=parser$2(n)}catch{error$1("Expression parse error: "+n)}s.visit(f=>{if(f.type!==CallExpression$1)return;const d=f.callee.name,p=codegenParams.visitors[d];p&&p(d,f.arguments,t,i)});const o=codeGenerator(s);return o.globals.forEach(f=>{const d=SignalPrefix+f;!has$1(i,d)&&t.getSignal(f)&&(i[d]=t.signalRef(f))}),{$expr:extend$3({code:o.code},t.options.ast?{ast:s}:null),$fields:o.fields,$params:i}}function parse$2(n){const t=this,i=n.operators||[];return n.background&&(t.background=n.background),n.eventConfig&&(t.eventConfig=n.eventConfig),n.locale&&(t.locale=n.locale),i.forEach(s=>t.parseOperator(s)),i.forEach(s=>t.parseOperatorParameters(s)),(n.streams||[]).forEach(s=>t.parseStream(s)),(n.updates||[]).forEach(s=>t.parseUpdate(s)),t.resolve()}const Skip$2=toSet(["rule"]),Swap=toSet(["group","image","rect"]);function adjustSpatial$1(n,t){let i="";return Skip$2[t]||(n.x2&&(n.x?(Swap[t]&&(i+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),i+="o.width=o.x2-o.x;"):i+="o.x=o.x2-(o.width||0);"),n.xc&&(i+="o.x=o.xc-(o.width||0)/2;"),n.y2&&(n.y?(Swap[t]&&(i+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),i+="o.height=o.y2-o.y;"):i+="o.y=o.y2-(o.height||0);"),n.yc&&(i+="o.y=o.yc-(o.height||0)/2;")),i}function canonicalType(n){return(n+"").toLowerCase()}function isOperator(n){return canonicalType(n)==="operator"}function isCollect(n){return canonicalType(n)==="collect"}function expression$2(n,t,i){i.endsWith(";")||(i="return("+i+");");const s=Function(...t.concat(i));return n&&n.functions?s.bind(n.functions):s}function _compare(n,t,i,s){return`((u = ${n}) < (v = ${t}) || u == null) && v != null ? ${i}
  : (u > v || v == null) && u != null ? ${s}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${i}
  : v !== v && u === u ? ${s} : `}var expressionCodegen={operator:(n,t)=>expression$2(n,["_"],t.code),parameter:(n,t)=>expression$2(n,["datum","_"],t.code),event:(n,t)=>expression$2(n,["event"],t.code),handler:(n,t)=>{const i=`var datum=event.item&&event.item.datum;return ${t.code};`;return expression$2(n,["_","event"],i)},encode:(n,t)=>{const{marktype:i,channels:s}=t;let o="var o=item,datum=o.datum,m=0,$;";for(const f in s){const d="o["+$(f)+"]";o+=`$=${s[f].code};if(${d}!==$)${d}=$,m=1;`}return o+=adjustSpatial$1(s,i),o+="return m;",expression$2(n,["item","_"],o)},codegen:{get(n){const t=`[${n.map($).join("][")}]`,i=Function("_",`return _${t};`);return i.path=t,i},comparator(n,t){let i;const s=(f,d)=>{const p=t[d];let v,_;return f.path?(v=`a${f.path}`,_=`b${f.path}`):((i=i||{})["f"+d]=f,v=`this.f${d}(a)`,_=`this.f${d}(b)`),_compare(v,_,-p,p)},o=Function("a","b","var u, v; return "+n.map(s).join("")+"0;");return i?o.bind(i):o}}};function parseOperator(n){const t=this;isOperator(n.type)||!n.type?t.operator(n,n.update?t.operatorExpression(n.update):null):t.transform(n,n.type)}function parseOperatorParameters(n){const t=this;if(n.params){const i=t.get(n.id);i||error$1("Invalid operator id: "+n.id),t.dataflow.connect(i,i.parameters(t.parseParameters(n.params),n.react,n.initonly))}}function parseParameters$1(n,t){t=t||{};const i=this;for(const s in n){const o=n[s];t[s]=isArray(o)?o.map(f=>parseParameter$2(f,i,t)):parseParameter$2(o,i,t)}return t}function parseParameter$2(n,t,i){if(!n||!isObject(n))return n;for(let s=0,o=PARSERS.length,f;s<o;++s)if(f=PARSERS[s],has$1(n,f.key))return f.parse(n,t,i);return n}var PARSERS=[{key:"$ref",parse:getOperator},{key:"$key",parse:getKey},{key:"$expr",parse:getExpression},{key:"$field",parse:getField},{key:"$encode",parse:getEncode},{key:"$compare",parse:getCompare},{key:"$context",parse:getContext},{key:"$subflow",parse:getSubflow},{key:"$tupleid",parse:getTupleId}];function getOperator(n,t){return t.get(n.$ref)||error$1("Operator not defined: "+n.$ref)}function getExpression(n,t,i){n.$params&&t.parseParameters(n.$params,i);const s="e:"+n.$expr.code;return t.fn[s]||(t.fn[s]=accessor(t.parameterExpression(n.$expr),n.$fields))}function getKey(n,t){const i="k:"+n.$key+"_"+!!n.$flat;return t.fn[i]||(t.fn[i]=key(n.$key,n.$flat,t.expr.codegen))}function getField(n,t){if(!n.$field)return null;const i="f:"+n.$field+"_"+n.$name;return t.fn[i]||(t.fn[i]=field$1(n.$field,n.$name,t.expr.codegen))}function getCompare(n,t){const i="c:"+n.$compare+"_"+n.$order,s=array$5(n.$compare).map(o=>o&&o.$tupleid?tupleid:o);return t.fn[i]||(t.fn[i]=compare$2(s,n.$order,t.expr.codegen))}function getEncode(n,t){const i=n.$encode,s={};for(const o in i){const f=i[o];s[o]=accessor(t.encodeExpression(f.$expr),f.$fields),s[o].output=f.$output}return s}function getContext(n,t){return t}function getSubflow(n,t){const i=n.$subflow;return function(s,o,f){const d=t.fork().parse(i),p=d.get(i.operators[0].id),v=d.signals.parent;return v&&v.set(f),p.detachSubflow=()=>t.detach(d),p}}function getTupleId(){return tupleid}function parseStream$2(n){var t=this,i=n.filter!=null?t.eventExpression(n.filter):void 0,s=n.stream!=null?t.get(n.stream):void 0,o;n.source?s=t.events(n.source,n.type,i):n.merge&&(o=n.merge.map(f=>t.get(f)),s=o[0].merge.apply(o[0],o.slice(1))),n.between&&(o=n.between.map(f=>t.get(f)),s=s.between(o[0],o[1])),n.filter&&(s=s.filter(i)),n.throttle!=null&&(s=s.throttle(+n.throttle)),n.debounce!=null&&(s=s.debounce(+n.debounce)),s==null&&error$1("Invalid stream definition: "+JSON.stringify(n)),n.consume&&s.consume(!0),t.stream(n,s)}function parseUpdate$1(n){var t=this,i=isObject(i=n.source)?i.$ref:i,s=t.get(i),o=null,f=n.update,d=void 0;s||error$1("Source not defined: "+n.source),o=n.target&&n.target.$expr?t.eventExpression(n.target.$expr):t.get(n.target),f&&f.$expr&&(f.$params&&(d=t.parseParameters(f.$params)),f=t.handlerExpression(f.$expr)),t.update(n,s,o,f,d)}const SKIP={skip:!0};function getState$1(n){var t=this,i={};if(n.signals){var s=i.signals={};Object.keys(t.signals).forEach(f=>{const d=t.signals[f];n.signals(f,d)&&(s[f]=d.value)})}if(n.data){var o=i.data={};Object.keys(t.data).forEach(f=>{const d=t.data[f];n.data(f,d)&&(o[f]=d.input.value)})}return t.subcontext&&n.recurse!==!1&&(i.subcontext=t.subcontext.map(f=>f.getState(n))),i}function setState$1(n){var t=this,i=t.dataflow,s=n.data,o=n.signals;Object.keys(o||{}).forEach(f=>{i.update(t.signals[f],o[f],SKIP)}),Object.keys(s||{}).forEach(f=>{i.pulse(t.data[f].input,i.changeset().remove(truthy).insert(s[f]))}),(n.subcontext||[]).forEach((f,d)=>{const p=t.subcontext[d];p&&p.setState(f)})}function context(n,t,i,s){return new Context(n,t,i,s)}function Context(n,t,i,s){this.dataflow=n,this.transforms=t,this.events=n.events.bind(n),this.expr=s||expressionCodegen,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},i&&(this.functions=Object.create(i),this.functions.context=this)}function Subcontext(n){this.dataflow=n.dataflow,this.transforms=n.transforms,this.events=n.events,this.expr=n.expr,this.signals=Object.create(n.signals),this.scales=Object.create(n.scales),this.nodes=Object.create(n.nodes),this.data=Object.create(n.data),this.fn=Object.create(n.fn),n.functions&&(this.functions=Object.create(n.functions),this.functions.context=this)}Context.prototype=Subcontext.prototype={fork(){const n=new Subcontext(this);return(this.subcontext||(this.subcontext=[])).push(n),n},detach(n){this.subcontext=this.subcontext.filter(i=>i!==n);const t=Object.keys(n.nodes);for(const i of t)n.nodes[i]._targets=null;for(const i of t)n.nodes[i].detach();n.nodes=null},get(n){return this.nodes[n]},set(n,t){return this.nodes[n]=t},add(n,t){const i=this,s=i.dataflow,o=n.value;if(i.set(n.id,t),isCollect(n.type)&&o&&(o.$ingest?s.ingest(t,o.$ingest,o.$format):o.$request?s.preload(t,o.$request,o.$format):s.pulse(t,s.changeset().insert(o))),n.root&&(i.root=t),n.parent){let f=i.get(n.parent.$ref);f?(s.connect(f,[t]),t.targets().add(f)):(i.unresolved=i.unresolved||[]).push(()=>{f=i.get(n.parent.$ref),s.connect(f,[t]),t.targets().add(f)})}if(n.signal&&(i.signals[n.signal]=t),n.scale&&(i.scales[n.scale]=t),n.data)for(const f in n.data){const d=i.data[f]||(i.data[f]={});n.data[f].forEach(p=>d[p]=t)}},resolve(){return(this.unresolved||[]).forEach(n=>n()),delete this.unresolved,this},operator(n,t){this.add(n,this.dataflow.add(n.value,t))},transform(n,t){this.add(n,this.dataflow.add(this.transforms[canonicalType(t)]))},stream(n,t){this.set(n.id,t)},update(n,t,i,s,o){this.dataflow.on(t,i,s,o,n.options)},operatorExpression(n){return this.expr.operator(this,n)},parameterExpression(n){return this.expr.parameter(this,n)},eventExpression(n){return this.expr.event(this,n)},handlerExpression(n){return this.expr.handler(this,n)},encodeExpression(n){return this.expr.encode(this,n)},parse:parse$2,parseOperator,parseOperatorParameters,parseParameters:parseParameters$1,parseStream:parseStream$2,parseUpdate:parseUpdate$1,getState:getState$1,setState:setState$1};function initializeAria(n){const t=n.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),ariaLabel(t,n.description()))}function ariaLabel(n,t){n&&(t==null?n.removeAttribute("aria-label"):n.setAttribute("aria-label",t))}function background(n){n.add(null,t=>(n._background=t.bg,n._resize=1,t.bg),{bg:n._signals.background})}const Default="default";function cursor$1(n){const t=n._signals.cursor||(n._signals.cursor=n.add({user:Default,item:null}));n.on(n.events("view","pointermove"),t,(i,s)=>{const o=t.value,f=o?isString(o)?o:o.user:Default,d=s.item&&s.item.cursor||null;return o&&f===o.user&&d==o.item?o:{user:f,item:d}}),n.add(null,function(i){let s=i.cursor,o=this.value;return isString(s)||(o=s.item,s=s.user),setCursor(n,s&&s!==Default?s:o||s),o},{cursor:t})}function setCursor(n,t){const i=n.globalCursor()?typeof document<"u"&&document.body:n.container();if(i)return t==null?i.style.removeProperty("cursor"):i.style.cursor=t}function dataref(n,t){var i=n._runtime.data;return has$1(i,t)||error$1("Unrecognized data set: "+t),i[t]}function data(n,t){return arguments.length<2?dataref(this,n).values.value:change.call(this,n,changeset().remove(truthy).insert(t))}function change(n,t){isChangeSet(t)||error$1("Second argument to changes must be a changeset.");const i=dataref(this,n);return i.modified=!0,this.pulse(i.input,t)}function insert(n,t){return change.call(this,n,changeset().insert(t))}function remove(n,t){return change.call(this,n,changeset().remove(t))}function width(n){var t=n.padding();return Math.max(0,n._viewWidth+t.left+t.right)}function height(n){var t=n.padding();return Math.max(0,n._viewHeight+t.top+t.bottom)}function offset(n){var t=n.padding(),i=n._origin;return[t.left+i[0],t.top+i[1]]}function resizeRenderer(n){var t=offset(n),i=width(n),s=height(n);n._renderer.background(n.background()),n._renderer.resize(i,s,t),n._handler.origin(t),n._resizeListeners.forEach(o=>{try{o(i,s)}catch(f){n.error(f)}})}function eventExtend(n,t,i){var s=n._renderer,o=s&&s.canvas(),f,d,p;return o&&(p=offset(n),d=t.changedTouches?t.changedTouches[0]:t,f=point$2(d,o),f[0]-=p[0],f[1]-=p[1]),t.dataflow=n,t.item=i,t.vega=extension(n,i,f),t}function extension(n,t,i){const s=t?t.mark.marktype==="group"?t:t.mark.group:null;function o(d){var p=s,v;if(d){for(v=t;v;v=v.mark.group)if(v.mark.name===d){p=v;break}}return p&&p.mark&&p.mark.interactive?p:{}}function f(d){if(!d)return i;isString(d)&&(d=o(d));const p=i.slice();for(;d;)p[0]-=d.x||0,p[1]-=d.y||0,d=d.mark&&d.mark.group;return p}return{view:constant$6(n),item:constant$6(t||{}),group:o,xy:f,x:d=>f(d)[0],y:d=>f(d)[1]}}const VIEW$1="view",TIMER="timer",WINDOW="window",NO_TRAP={trap:!1};function initializeEventConfig(n){const t=extend$3({defaults:{}},n),i=(s,o)=>{o.forEach(f=>{isArray(s[f])&&(s[f]=toSet(s[f]))})};return i(t.defaults,["prevent","allow"]),i(t,["view","window","selector"]),t}function trackEventListener(n,t,i,s){n._eventListeners.push({type:i,sources:array$5(t),handler:s})}function prevent(n,t){var i=n._eventConfig.defaults,s=i.prevent,o=i.allow;return s===!1||o===!0?!1:s===!0||o===!1?!0:s?s[t]:o?!o[t]:n.preventDefault()}function permit(n,t,i){const s=n._eventConfig&&n._eventConfig[t];return s===!1||isObject(s)&&!s[i]?(n.warn(`Blocked ${t} ${i} event listener.`),!1):!0}function events(n,t,i){var s=this,o=new EventStream(i),f=function(_,k){s.runAsync(null,()=>{n===VIEW$1&&prevent(s,t)&&_.preventDefault(),o.receive(eventExtend(s,_,k))})},d;if(n===TIMER)permit(s,"timer",t)&&s.timer(f,t);else if(n===VIEW$1)permit(s,"view",t)&&s.addEventListener(t,f,NO_TRAP);else if(n===WINDOW?permit(s,"window",t)&&typeof window<"u"&&(d=[window]):typeof document<"u"&&permit(s,"selector",t)&&(d=Array.from(document.querySelectorAll(n))),!d)s.warn("Can not resolve event source: "+n);else{for(var p=0,v=d.length;p<v;++p)d[p].addEventListener(t,f);trackEventListener(s,d,t,f)}return o}function itemFilter(n){return n.item}function markTarget(n){return n.item.mark.source}function invoke(n){return function(t,i){return i.vega.view().changeset().encode(i.item,n)}}function hover(n,t){return n=[n||"hover"],t=[t||"update",n[0]],this.on(this.events("view","pointerover",itemFilter),markTarget,invoke(n)),this.on(this.events("view","pointerout",itemFilter),markTarget,invoke(t)),this}function finalize(){var n=this._tooltip,t=this._timers,i=this._handler.handlers(),s=this._eventListeners,o,f,d,p,v;for(o=t.length;--o>=0;)t[o].stop();for(o=s.length;--o>=0;)for(d=s[o],f=d.sources.length;--f>=0;)d.sources[f].removeEventListener(d.type,d.handler);for(n&&n.call(this,this._handler,null,null,null),o=i.length;--o>=0;)v=i[o].type,p=i[o].handler,this._handler.off(v,p);return this}function element(n,t,i){const s=document.createElement(n);for(const o in t)s.setAttribute(o,t[o]);return i!=null&&(s.textContent=i),s}const BindClass="vega-bind",NameClass="vega-bind-name",RadioClass="vega-bind-radio";function bind(n,t,i){if(!t)return;const s=i.param;let o=i.state;return o||(o=i.state={elements:null,active:!1,set:null,update:d=>{d!=n.signal(s.signal)&&n.runAsync(null,()=>{o.source=!0,n.signal(s.signal,d)})}},s.debounce&&(o.update=debounce(s.debounce,o.update))),(s.input==null&&s.element?target:generate$1)(o,t,s,n),o.active||(n.on(n._signals[s.signal],null,()=>{o.source?o.source=!1:o.set(n.signal(s.signal))}),o.active=!0),o}function target(n,t,i,s){const o=i.event||"input",f=()=>n.update(t.value);s.signal(i.signal,t.value),t.addEventListener(o,f),trackEventListener(s,t,o,f),n.set=d=>{t.value=d,t.dispatchEvent(event(o))}}function event(n){return typeof Event<"u"?new Event(n):{type:n}}function generate$1(n,t,i,s){const o=s.signal(i.signal),f=element("div",{class:BindClass}),d=i.input==="radio"?f:f.appendChild(element("label"));d.appendChild(element("span",{class:NameClass},i.name||i.signal)),t.appendChild(f);let p=form;switch(i.input){case"checkbox":p=checkbox;break;case"select":p=select;break;case"radio":p=radio;break;case"range":p=range$2;break}p(n,d,i,o)}function form(n,t,i,s){const o=element("input");for(const f in i)f!=="signal"&&f!=="element"&&o.setAttribute(f==="input"?"type":f,i[f]);o.setAttribute("name",i.signal),o.value=s,t.appendChild(o),o.addEventListener("input",()=>n.update(o.value)),n.elements=[o],n.set=f=>o.value=f}function checkbox(n,t,i,s){const o={type:"checkbox",name:i.signal};s&&(o.checked=!0);const f=element("input",o);t.appendChild(f),f.addEventListener("change",()=>n.update(f.checked)),n.elements=[f],n.set=d=>f.checked=!!d||null}function select(n,t,i,s){const o=element("select",{name:i.signal}),f=i.labels||[];i.options.forEach((d,p)=>{const v={value:d};valuesEqual(d,s)&&(v.selected=!0),o.appendChild(element("option",v,(f[p]||d)+""))}),t.appendChild(o),o.addEventListener("change",()=>{n.update(i.options[o.selectedIndex])}),n.elements=[o],n.set=d=>{for(let p=0,v=i.options.length;p<v;++p)if(valuesEqual(i.options[p],d)){o.selectedIndex=p;return}}}function radio(n,t,i,s){const o=element("span",{class:RadioClass}),f=i.labels||[];t.appendChild(o),n.elements=i.options.map((d,p)=>{const v={type:"radio",name:i.signal,value:d};valuesEqual(d,s)&&(v.checked=!0);const _=element("input",v);_.addEventListener("change",()=>n.update(d));const k=element("label",{},(f[p]||d)+"");return k.prepend(_),o.appendChild(k),_}),n.set=d=>{const p=n.elements,v=p.length;for(let _=0;_<v;++_)valuesEqual(p[_].value,d)&&(p[_].checked=!0)}}function range$2(n,t,i,s){s=s!==void 0?s:(+i.max+ +i.min)/2;const o=i.max!=null?i.max:Math.max(100,+s)||100,f=i.min||Math.min(0,o,+s)||0,d=i.step||tickStep(f,o,100),p=element("input",{type:"range",name:i.signal,min:f,max:o,step:d});p.value=s;const v=element("span",{},+s);t.appendChild(p),t.appendChild(v);const _=()=>{v.textContent=p.value,n.update(+p.value)};p.addEventListener("input",_),p.addEventListener("change",_),n.elements=[p],n.set=k=>{p.value=k,v.textContent=k}}function valuesEqual(n,t){return n===t||n+""==t+""}function initializeRenderer(n,t,i,s,o,f){return t=t||new s(n.loader()),t.initialize(i,width(n),height(n),offset(n),o,f).background(n.background())}function trap(n,t){return t?function(){try{t.apply(this,arguments)}catch(i){n.error(i)}}:null}function initializeHandler(n,t,i,s){const o=new s(n.loader(),trap(n,n.tooltip())).scene(n.scenegraph().root).initialize(i,offset(n),n);return t&&t.handlers().forEach(f=>{o.on(f.type,f.handler)}),o}function initialize(n,t){const i=this,s=i._renderType,o=i._eventConfig.bind,f=renderModule(s);n=i._el=n?lookup$1(i,n,!0):null,initializeAria(i),f||i.error("Unrecognized renderer type: "+s);const d=f.handler||CanvasHandler,p=n?f.renderer:f.headless;return i._renderer=p?initializeRenderer(i,i._renderer,n,p):null,i._handler=initializeHandler(i,i._handler,n,d),i._redraw=!0,n&&o!=="none"&&(t=t?i._elBind=lookup$1(i,t,!0):n.appendChild(element("form",{class:"vega-bindings"})),i._bind.forEach(v=>{v.param.element&&o!=="container"&&(v.element=lookup$1(i,v.param.element,!!v.param.input))}),i._bind.forEach(v=>{bind(i,v.element||t,v)})),i}function lookup$1(n,t,i){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return n.error("Signal bind element not found: "+t),null}else return n.error("DOM document instance not found."),null;if(t&&i)try{t.textContent=""}catch(s){t=null,n.error(s)}return t}const number$1=n=>+n||0,paddingObject$1=n=>({top:n,bottom:n,left:n,right:n});function padding$1(n){return isObject(n)?{top:number$1(n.top),bottom:number$1(n.bottom),left:number$1(n.left),right:number$1(n.right)}:paddingObject$1(number$1(n))}async function renderHeadless(n,t,i,s){const o=renderModule(t),f=o&&o.headless;return f||error$1("Unrecognized renderer type: "+t),await n.runAsync(),initializeRenderer(n,null,null,f,i,s).renderAsync(n._scenegraph.root)}async function renderToImageURL(n,t){n!==RenderType.Canvas&&n!==RenderType.SVG&&n!==RenderType.PNG&&error$1("Unrecognized image type: "+n);const i=await renderHeadless(this,n,t);return n===RenderType.SVG?toBlobURL(i.svg(),"image/svg+xml"):i.canvas().toDataURL("image/png")}function toBlobURL(n,t){const i=new Blob([n],{type:t});return window.URL.createObjectURL(i)}async function renderToCanvas(n,t){return(await renderHeadless(this,RenderType.Canvas,n,t)).canvas()}async function renderToSVG(n){return(await renderHeadless(this,RenderType.SVG,n)).svg()}function runtime(n,t,i){return context(n,transforms,functionContext,i).parse(t)}function scale$2(n){var t=this._runtime.scales;return has$1(t,n)||error$1("Unrecognized scale or projection: "+n),t[n].value}var Width="width",Height="height",Padding="padding",Skip$1={skip:!0};function viewWidth(n,t){var i=n.autosize(),s=n.padding();return t-(i&&i.contains===Padding?s.left+s.right:0)}function viewHeight(n,t){var i=n.autosize(),s=n.padding();return t-(i&&i.contains===Padding?s.top+s.bottom:0)}function initializeResize(n){var t=n._signals,i=t[Width],s=t[Height],o=t[Padding];function f(){n._autosize=n._resize=1}n._resizeWidth=n.add(null,p=>{n._width=p.size,n._viewWidth=viewWidth(n,p.size),f()},{size:i}),n._resizeHeight=n.add(null,p=>{n._height=p.size,n._viewHeight=viewHeight(n,p.size),f()},{size:s});const d=n.add(null,f,{pad:o});n._resizeWidth.rank=i.rank+1,n._resizeHeight.rank=s.rank+1,d.rank=o.rank+1}function resizeView(n,t,i,s,o,f){this.runAfter(d=>{let p=0;d._autosize=0,d.width()!==i&&(p=1,d.signal(Width,i,Skip$1),d._resizeWidth.skip(!0)),d.height()!==s&&(p=1,d.signal(Height,s,Skip$1),d._resizeHeight.skip(!0)),d._viewWidth!==n&&(d._resize=1,d._viewWidth=n),d._viewHeight!==t&&(d._resize=1,d._viewHeight=t),(d._origin[0]!==o[0]||d._origin[1]!==o[1])&&(d._resize=1,d._origin=o),p&&d.run("enter"),f&&d.runAfter(v=>v.resize())},!1,1)}function getState(n){return this._runtime.getState(n||{data:dataTest,signals:signalTest,recurse:!0})}function dataTest(n,t){return t.modified&&isArray(t.input.value)&&!n.startsWith("_:vega:_")}function signalTest(n,t){return!(n==="parent"||t instanceof transforms.proxy)}function setState(n){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(n)},t=>{t._trigger=!0}),this}function timer(n,t){function i(s){n({timestamp:Date.now(),elapsed:s})}this._timers.push(interval$1(i,t))}function defaultTooltip(n,t,i,s){const o=n.element();o&&o.setAttribute("title",formatTooltip(s))}function formatTooltip(n){return n==null?"":isArray(n)?formatArray(n):isObject(n)&&!isDate$1(n)?formatObject(n):n+""}function formatObject(n){return Object.keys(n).map(t=>{const i=n[t];return t+": "+(isArray(i)?formatArray(i):formatValue(i))}).join(`
`)}function formatArray(n){return"["+n.map(formatValue).join(", ")+"]"}function formatValue(n){return isArray(n)?"[â€¦]":isObject(n)&&!isDate$1(n)?"{â€¦}":n}function watchPixelRatio(){if(this.renderer()==="canvas"&&this._renderer._canvas){let n=null;const t=()=>{n!=null&&n();const i=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);i.addEventListener("change",t),n=()=>{i.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function View$1(n,t){const i=this;if(t=t||{},Dataflow.call(i),t.loader&&i.loader(t.loader),t.logger&&i.logger(t.logger),t.logLevel!=null&&i.logLevel(t.logLevel),t.locale||n.locale){const f=extend$3({},n.locale,t.locale);i.locale(locale$1(f.number,f.time))}i._el=null,i._elBind=null,i._renderType=t.renderer||RenderType.Canvas,i._scenegraph=new Scenegraph;const s=i._scenegraph.root;i._renderer=null,i._tooltip=t.tooltip||defaultTooltip,i._redraw=!0,i._handler=new CanvasHandler().scene(s),i._globalCursor=!1,i._preventDefault=!1,i._timers=[],i._eventListeners=[],i._resizeListeners=[],i._eventConfig=initializeEventConfig(n.eventConfig),i.globalCursor(i._eventConfig.globalCursor);const o=runtime(i,n,t.expr);i._runtime=o,i._signals=o.signals,i._bind=(n.bindings||[]).map(f=>({state:null,param:extend$3({},f)})),o.root&&o.root.set(s),s.source=o.data.root.input,i.pulse(o.data.root.input,i.changeset().insert(s.items)),i._width=i.width(),i._height=i.height(),i._viewWidth=viewWidth(i,i._width),i._viewHeight=viewHeight(i,i._height),i._origin=[0,0],i._resize=0,i._autosize=1,initializeResize(i),background(i),cursor$1(i),i.description(n.description),t.hover&&i.hover(),t.container&&i.initialize(t.container,t.bind),t.watchPixelRatio&&i._watchPixelRatio()}function lookupSignal(n,t){return has$1(n._signals,t)?n._signals[t]:error$1("Unrecognized signal name: "+$(t))}function findOperatorHandler(n,t){const i=(n._targets||[]).filter(s=>s._update&&s._update.handler===t);return i.length?i[0]:null}function addOperatorListener(n,t,i,s){let o=findOperatorHandler(i,s);return o||(o=trap(n,()=>s(t,i.value)),o.handler=s,n.on(i,null,o)),n}function removeOperatorListener(n,t,i){const s=findOperatorHandler(t,i);return s&&t._targets.remove(s),n}inherits(View$1,Dataflow,{async evaluate(n,t,i){if(await Dataflow.prototype.evaluate.call(this,n,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,resizeRenderer(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(s){this.error(s)}return i&&asyncCallback(this,i),this},dirty(n){this._redraw=!0,this._renderer&&this._renderer.dirty(n)},description(n){if(arguments.length){const t=n!=null?n+"":null;return t!==this._desc&&ariaLabel(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(n,t,i){const s=lookupSignal(this,n);return arguments.length===1?s.value:this.update(s,t,i)},width(n){return arguments.length?this.signal("width",n):this.signal("width")},height(n){return arguments.length?this.signal("height",n):this.signal("height")},padding(n){return arguments.length?this.signal("padding",padding$1(n)):padding$1(this.signal("padding"))},autosize(n){return arguments.length?this.signal("autosize",n):this.signal("autosize")},background(n){return arguments.length?this.signal("background",n):this.signal("background")},renderer(n){return arguments.length?(renderModule(n)||error$1("Unrecognized renderer type: "+n),n!==this._renderType&&(this._renderType=n,this._resetRenderer()),this):this._renderType},tooltip(n){return arguments.length?(n!==this._tooltip&&(this._tooltip=n,this._resetRenderer()),this):this._tooltip},loader(n){return arguments.length?(n!==this._loader&&(Dataflow.prototype.loader.call(this,n),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(lookupSignal(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:resizeView,addEventListener(n,t,i){let s=t;return i&&i.trap===!1||(s=trap(this,t),s.raw=t),this._handler.on(n,s),this},removeEventListener(n,t){for(var i=this._handler.handlers(n),s=i.length,o,f;--s>=0;)if(f=i[s].type,o=i[s].handler,n===f&&(t===o||t===o.raw)){this._handler.off(f,o);break}return this},addResizeListener(n){const t=this._resizeListeners;return t.includes(n)||t.push(n),this},removeResizeListener(n){var t=this._resizeListeners,i=t.indexOf(n);return i>=0&&t.splice(i,1),this},addSignalListener(n,t){return addOperatorListener(this,n,lookupSignal(this,n),t)},removeSignalListener(n,t){return removeOperatorListener(this,lookupSignal(this,n),t)},addDataListener(n,t){return addOperatorListener(this,n,dataref(this,n).values,t)},removeDataListener(n,t){return removeOperatorListener(this,dataref(this,n).values,t)},globalCursor(n){if(arguments.length){if(this._globalCursor!==!!n){const t=setCursor(this,null);this._globalCursor=!!n,t&&setCursor(this,t)}return this}else return this._globalCursor},preventDefault(n){return arguments.length?(this._preventDefault=n,this):this._preventDefault},timer,events,finalize,hover,data,change,insert,remove,scale:scale$2,initialize,toImageURL:renderToImageURL,toCanvas:renderToCanvas,toSVG:renderToSVG,getState,setState,_watchPixelRatio:watchPixelRatio});const VIEW="view",LBRACK="[",RBRACK="]",LBRACE="{",RBRACE="}",COLON=":",COMMA$1=",",NAME="@",GT$1=">",ILLEGAL$1=/[[\]{}]/,DEFAULT_MARKS={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let DEFAULT_SOURCE,MARKS;function eventSelector(n,t,i){return DEFAULT_SOURCE=t||VIEW,MARKS=i||DEFAULT_MARKS,parseMerge(n.trim()).map(parseSelector)}function isMarkType(n){return MARKS[n]}function find(n,t,i,s,o){const f=n.length;let d=0,p;for(;t<f;++t){if(p=n[t],!d&&p===i)return t;o&&o.indexOf(p)>=0?--d:s&&s.indexOf(p)>=0&&++d}return t}function parseMerge(n){const t=[],i=n.length;let s=0,o=0;for(;o<i;)o=find(n,o,COMMA$1,LBRACK+LBRACE,RBRACK+RBRACE),t.push(n.substring(s,o).trim()),s=++o;if(t.length===0)throw"Empty event selector: "+n;return t}function parseSelector(n){return n[0]==="["?parseBetween(n):parseStream$1(n)}function parseBetween(n){const t=n.length;let i=1,s;if(i=find(n,i,RBRACK,LBRACK,RBRACK),i===t)throw"Empty between selector: "+n;if(s=parseMerge(n.substring(1,i)),s.length!==2)throw"Between selector must have two elements: "+n;if(n=n.slice(i+1).trim(),n[0]!==GT$1)throw"Expected '>' after between selector: "+n;s=s.map(parseSelector);const o=parseSelector(n.slice(1).trim());return o.between?{between:s,stream:o}:(o.between=s,o)}function parseStream$1(n){const t={source:DEFAULT_SOURCE},i=[];let s=[0,0],o=0,f=0,d=n.length,p=0,v,_;if(n[d-1]===RBRACE){if(p=n.lastIndexOf(LBRACE),p>=0){try{s=parseThrottle(n.substring(p+1,d-1))}catch{throw"Invalid throttle specification: "+n}n=n.slice(0,p).trim(),d=n.length}else throw"Unmatched right brace: "+n;p=0}if(!d)throw n;if(n[0]===NAME&&(o=++p),v=find(n,p,COLON),v<d&&(i.push(n.substring(f,v).trim()),f=p=++v),p=find(n,p,LBRACK),p===d)i.push(n.substring(f,d).trim());else if(i.push(n.substring(f,p).trim()),_=[],f=++p,f===d)throw"Unmatched left bracket: "+n;for(;p<d;){if(p=find(n,p,RBRACK),p===d)throw"Unmatched left bracket: "+n;if(_.push(n.substring(f,p).trim()),p<d-1&&n[++p]!==LBRACK)throw"Expected left bracket: "+n;f=++p}if(!(d=i.length)||ILLEGAL$1.test(i[d-1]))throw"Invalid event selector: "+n;return d>1?(t.type=i[1],o?t.markname=i[0].slice(1):isMarkType(i[0])?t.marktype=i[0]:t.source=i[0]):t.type=i[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),_!=null&&(t.filter=_),s[0]&&(t.throttle=s[0]),s[1]&&(t.debounce=s[1]),t}function parseThrottle(n){const t=n.split(COMMA$1);if(!n.length||t.length>2)throw n;return t.map(i=>{const s=+i;if(s!==s)throw n;return s})}function parseAutosize(n){return isObject(n)?n:{type:n||"pad"}}const number=n=>+n||0,paddingObject=n=>({top:n,bottom:n,left:n,right:n});function parsePadding(n){return isObject(n)?n.signal?n:{top:number(n.top),bottom:number(n.bottom),left:number(n.left),right:number(n.right)}:paddingObject(number(n))}const encoder=n=>isObject(n)&&!isArray(n)?extend$3({},n):{value:n};function addEncode(n,t,i,s){return i!=null?(isObject(i)&&!isArray(i)||isArray(i)&&i.length&&isObject(i[0])?n.update[t]=i:n[s||"enter"][t]={value:i},1):0}function addEncoders(n,t,i){for(const s in t)addEncode(n,s,t[s]);for(const s in i)addEncode(n,s,i[s],"update")}function extendEncode(n,t,i){for(const s in t)i&&has$1(i,s)||(n[s]=extend$3(n[s]||{},t[s]));return n}function has(n,t){return t&&(t.enter&&t.enter[n]||t.update&&t.update[n])}const MarkRole="mark",FrameRole="frame",ScopeRole="scope",AxisRole="axis",AxisDomainRole="axis-domain",AxisGridRole="axis-grid",AxisLabelRole="axis-label",AxisTickRole="axis-tick",AxisTitleRole="axis-title",LegendRole="legend",LegendBandRole="legend-band",LegendEntryRole="legend-entry",LegendGradientRole="legend-gradient",LegendLabelRole="legend-label",LegendSymbolRole="legend-symbol",LegendTitleRole="legend-title",TitleRole="title",TitleTextRole="title-text",TitleSubtitleRole="title-subtitle";function applyDefaults(n,t,i,s,o){const f={},d={};let p,v,_,k;v="lineBreak",t==="text"&&o[v]!=null&&!has(v,n)&&applyDefault(f,v,o[v]),(i=="legend"||String(i).startsWith("axis"))&&(i=null),k=i===FrameRole?o.group:i===MarkRole?extend$3({},o.mark,o[t]):null;for(v in k)_=has(v,n)||(v==="fill"||v==="stroke")&&(has("fill",n)||has("stroke",n)),_||applyDefault(f,v,k[v]);array$5(s).forEach(P=>{const L=o.style&&o.style[P];for(const G in L)has(G,n)||applyDefault(f,G,L[G])}),n=extend$3({},n);for(v in f)k=f[v],k.signal?(p=p||{})[v]=k:d[v]=k;return n.enter=extend$3(d,n.enter),p&&(n.update=extend$3(p,n.update)),n}function applyDefault(n,t,i){n[t]=i&&i.signal?{signal:i.signal}:{value:i}}const scaleRef=n=>isString(n)?$(n):n.signal?`(${n.signal})`:field(n);function entry$1(n){if(n.gradient!=null)return gradient$1(n);let t=n.signal?`(${n.signal})`:n.color?color$1(n.color):n.field!=null?field(n.field):n.value!==void 0?$(n.value):void 0;return n.scale!=null&&(t=scale$1(n,t)),t===void 0&&(t=null),n.exponent!=null&&(t=`pow(${t},${property(n.exponent)})`),n.mult!=null&&(t+=`*${property(n.mult)}`),n.offset!=null&&(t+=`+${property(n.offset)}`),n.round&&(t=`round(${t})`),t}const _color=(n,t,i,s)=>`(${n}(${[t,i,s].map(entry$1).join(",")})+'')`;function color$1(n){return n.c?_color("hcl",n.h,n.c,n.l):n.h||n.s?_color("hsl",n.h,n.s,n.l):n.l||n.a?_color("lab",n.l,n.a,n.b):n.r||n.g||n.b?_color("rgb",n.r,n.g,n.b):null}function gradient$1(n){const t=[n.start,n.stop,n.count].map(i=>i==null?null:$(i));for(;t.length&&peek$2(t)==null;)t.pop();return t.unshift(scaleRef(n.gradient)),`gradient(${t.join(",")})`}function property(n){return isObject(n)?"("+entry$1(n)+")":n}function field(n){return resolveField(isObject(n)?n:{datum:n})}function resolveField(n){let t,i,s;if(n.signal)t="datum",s=n.signal;else if(n.group||n.parent){for(i=Math.max(1,n.level||1),t="item";i-- >0;)t+=".mark.group";n.parent?(s=n.parent,t+=".datum"):s=n.group}else n.datum?(t="datum",s=n.datum):error$1("Invalid field reference: "+$(n));return n.signal||(s=isString(s)?splitAccessPath(s).map($).join("]["):resolveField(s)),t+"["+s+"]"}function scale$1(n,t){const i=scaleRef(n.scale);return n.range!=null?t=`lerp(_range(${i}), ${+n.range})`:(t!==void 0&&(t=`_scale(${i}, ${t})`),n.band&&(t=(t?t+"+":"")+`_bandwidth(${i})`+(+n.band==1?"":"*"+property(n.band)),n.extra&&(t=`(datum.extra ? _scale(${i}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function rule$1(n){let t="";return n.forEach(i=>{const s=entry$1(i);t+=i.test?`(${i.test})?${s}:`:s}),peek$2(t)===":"&&(t+="null"),t}function parseEncode(n,t,i,s,o,f){const d={};f=f||{},f.encoders={$encode:d},n=applyDefaults(n,t,i,s,o.config);for(const p in n)d[p]=parseBlock(n[p],t,f,o);return f}function parseBlock(n,t,i,s){const o={},f={};for(const d in n)n[d]!=null&&(o[d]=parse$1(expr(n[d]),s,i,f));return{$expr:{marktype:t,channels:o},$fields:Object.keys(f),$output:Object.keys(n)}}function expr(n){return isArray(n)?rule$1(n):entry$1(n)}function parse$1(n,t,i,s){const o=parser$1(n,t);return o.$fields.forEach(f=>s[f]=1),extend$3(i,o.$params),o.$expr}const OUTER="outer",OUTER_INVALID=["value","update","init","react","bind"];function outerError(n,t){error$1(n+' for "outer" push: '+$(t))}function parseSignal(n,t){const i=n.name;if(n.push===OUTER)t.signals[i]||outerError("No prior signal definition",i),OUTER_INVALID.forEach(s=>{n[s]!==void 0&&outerError("Invalid property ",s)});else{const s=t.addSignal(i,n.value);n.react===!1&&(s.react=!1),n.bind&&t.addBinding(i,n.bind)}}function Entry(n,t,i,s){this.id=-1,this.type=n,this.value=t,this.params=i,s&&(this.parent=s)}function entry(n,t,i,s){return new Entry(n,t,i,s)}function operator(n,t){return entry("operator",n,t)}function ref(n){const t={$ref:n.id};return n.id<0&&(n.refs=n.refs||[]).push(t),t}function fieldRef$1(n,t){return t?{$field:n,$name:t}:{$field:n}}const keyFieldRef=fieldRef$1("key");function compareRef(n,t){return{$compare:n,$order:t}}function keyRef(n,t){const i={$key:n};return t&&(i.$flat=!0),i}const Ascending="ascending",Descending="descending";function sortKey(n){return isObject(n)?(n.order===Descending?"-":"+")+aggrField(n.op,n.field):""}function aggrField(n,t){return(n&&n.signal?"$"+n.signal:n||"")+(n&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Scope$1="scope",View="view";function isSignal(n){return n&&n.signal}function isExpr$1(n){return n&&n.expr}function hasSignal(n){if(isSignal(n))return!0;if(isObject(n)){for(const t in n)if(hasSignal(n[t]))return!0}return!1}function value(n,t){return n??t}function deref(n){return n&&n.signal||n}const Timer="timer";function parseStream(n,t){return(n.merge?mergeStream:n.stream?nestedStream:n.type?eventStream:error$1("Invalid stream specification: "+$(n)))(n,t)}function eventSource(n){return n===Scope$1?View:n||View}function mergeStream(n,t){const i=n.merge.map(o=>parseStream(o,t)),s=streamParameters({merge:i},n,t);return t.addStream(s).id}function nestedStream(n,t){const i=parseStream(n.stream,t),s=streamParameters({stream:i},n,t);return t.addStream(s).id}function eventStream(n,t){let i;n.type===Timer?(i=t.event(Timer,n.throttle),n={between:n.between,filter:n.filter}):i=t.event(eventSource(n.source),n.type);const s=streamParameters({stream:i},n,t);return Object.keys(s).length===1?i:t.addStream(s).id}function streamParameters(n,t,i){let s=t.between;return s&&(s.length!==2&&error$1('Stream "between" parameter must have 2 entries: '+$(t)),n.between=[parseStream(s[0],i),parseStream(s[1],i)]),s=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&s.push(filterMark(t.marktype,t.markname,t.markrole)),t.source===Scope$1&&s.push("inScope(event.item)"),s.length&&(n.filter=parser$1("("+s.join(")&&(")+")",i).$expr),(s=t.throttle)!=null&&(n.throttle=+s),(s=t.debounce)!=null&&(n.debounce=+s),t.consume&&(n.consume=!0),n}function filterMark(n,t,i){const s="event.item";return s+(n&&n!=="*"?"&&"+s+".mark.marktype==='"+n+"'":"")+(i?"&&"+s+".mark.role==='"+i+"'":"")+(t?"&&"+s+".mark.name==='"+t+"'":"")}const OP_VALUE_EXPR={code:"_.$value",ast:{type:"Identifier",value:"value"}};function parseUpdate(n,t,i){const s=n.encode,o={target:i};let f=n.events,d=n.update,p=[];f||error$1("Signal update missing events specification."),isString(f)&&(f=eventSelector(f,t.isSubscope()?Scope$1:View)),f=array$5(f).filter(v=>v.signal||v.scale?(p.push(v),0):1),p.length>1&&(p=[mergeSources(p)]),f.length&&p.push(f.length>1?{merge:f}:f[0]),s!=null&&(d&&error$1("Signal encode and update are mutually exclusive."),d="encode(item(),"+$(s)+")"),o.update=isString(d)?parser$1(d,t):d.expr!=null?parser$1(d.expr,t):d.value!=null?d.value:d.signal!=null?{$expr:OP_VALUE_EXPR,$params:{$value:t.signalRef(d.signal)}}:error$1("Invalid signal update specification."),n.force&&(o.options={force:!0}),p.forEach(v=>t.addUpdate(extend$3(streamSource(v,t),o)))}function streamSource(n,t){return{source:n.signal?t.signalRef(n.signal):n.scale?t.scaleRef(n.scale):parseStream(n,t)}}function mergeSources(n){return{signal:"["+n.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function parseSignalUpdates(n,t){const i=t.getSignal(n.name);let s=n.update;n.init&&(s?error$1("Signals can not include both init and update expressions."):(s=n.init,i.initonly=!0)),s&&(s=parser$1(s,t),i.update=s.$expr,i.params=s.$params),n.on&&n.on.forEach(o=>parseUpdate(o,t,i.id))}const transform=n=>(t,i,s)=>entry(n,i,t||void 0,s),Aggregate=transform("aggregate"),AxisTicks=transform("axisticks"),Bound=transform("bound"),Collect=transform("collect"),Compare=transform("compare"),DataJoin=transform("datajoin"),Encode=transform("encode"),Expression=transform("expression"),Facet=transform("facet"),Field=transform("field"),Key=transform("key"),LegendEntries=transform("legendentries"),Load=transform("load"),Mark$1=transform("mark"),MultiExtent=transform("multiextent"),MultiValues=transform("multivalues"),Overlap=transform("overlap"),Params=transform("params"),PreFacet=transform("prefacet"),Projection=transform("projection"),Proxy$1=transform("proxy"),Relay=transform("relay"),Render=transform("render"),Scale=transform("scale"),Sieve=transform("sieve"),SortItems=transform("sortitems"),ViewLayout=transform("viewlayout"),Values=transform("values");let FIELD_REF_ID=0;const MULTIDOMAIN_SORT_OPS={min:"min",max:"max",count:"sum"};function initScale(n,t){const i=n.type||"linear";isValidScaleType(i)||error$1("Unrecognized scale type: "+$(i)),t.addScale(n.name,{type:i,domain:void 0})}function parseScale(n,t){const i=t.getScale(n.name).params;let s;i.domain=parseScaleDomain$1(n.domain,n,t),n.range!=null&&(i.range=parseScaleRange$1(n,t,i)),n.interpolate!=null&&parseScaleInterpolate(n.interpolate,i),n.nice!=null&&(i.nice=parseScaleNice(n.nice,t)),n.bins!=null&&(i.bins=parseScaleBins(n.bins,t));for(s in n)has$1(i,s)||s==="name"||(i[s]=parseLiteral(n[s],t))}function parseLiteral(n,t){return isObject(n)?n.signal?t.signalRef(n.signal):error$1("Unsupported object: "+$(n)):n}function parseArray(n,t){return n.signal?t.signalRef(n.signal):n.map(i=>parseLiteral(i,t))}function dataLookupError(n){error$1("Can not find data set: "+$(n))}function parseScaleDomain$1(n,t,i){if(!n){(t.domainMin!=null||t.domainMax!=null)&&error$1("No scale domain defined for domainMin/domainMax to override.");return}return n.signal?i.signalRef(n.signal):(isArray(n)?explicitDomain:n.fields?multipleDomain:singularDomain)(n,t,i)}function explicitDomain(n,t,i){return n.map(s=>parseLiteral(s,i))}function singularDomain(n,t,i){const s=i.getData(n.data);return s||dataLookupError(n.data),isDiscrete$2(t.type)?s.valuesRef(i,n.field,parseSort(n.sort,!1)):isQuantile$1(t.type)?s.domainRef(i,n.field):s.extentRef(i,n.field)}function multipleDomain(n,t,i){const s=n.data,o=n.fields.reduce((f,d)=>(d=isString(d)?{data:s,field:d}:isArray(d)||d.signal?fieldRef(d,i):d,f.push(d),f),[]);return(isDiscrete$2(t.type)?ordinalMultipleDomain:isQuantile$1(t.type)?quantileMultipleDomain:numericMultipleDomain)(n,i,o)}function fieldRef(n,t){const i="_:vega:_"+FIELD_REF_ID++,s=Collect({});if(isArray(n))s.value={$ingest:n};else if(n.signal){const o="setdata("+$(i)+","+n.signal+")";s.params.input=t.signalRef(o)}return t.addDataPipeline(i,[s,Sieve({})]),{data:i,field:"data"}}function ordinalMultipleDomain(n,t,i){const s=parseSort(n.sort,!0);let o,f;const d=i.map(_=>{const k=t.getData(_.data);return k||dataLookupError(_.data),k.countsRef(t,_.field,s)}),p={groupby:keyFieldRef,pulse:d};s&&(o=s.op||"count",f=s.field?aggrField(o,s.field):"count",p.ops=[MULTIDOMAIN_SORT_OPS[o]],p.fields=[t.fieldRef(f)],p.as=[f]),o=t.add(Aggregate(p));const v=t.add(Collect({pulse:ref(o)}));return f=t.add(Values({field:keyFieldRef,sort:t.sortRef(s),pulse:ref(v)})),ref(f)}function parseSort(n,t){return n&&(!n.field&&!n.op?isObject(n)?n.field="key":n={field:"key"}:!n.field&&n.op!=="count"?error$1("No field provided for sort aggregate op: "+n.op):t&&n.field&&n.op&&!MULTIDOMAIN_SORT_OPS[n.op]&&error$1("Multiple domain scales can not be sorted using "+n.op)),n}function quantileMultipleDomain(n,t,i){const s=i.map(o=>{const f=t.getData(o.data);return f||dataLookupError(o.data),f.domainRef(t,o.field)});return ref(t.add(MultiValues({values:s})))}function numericMultipleDomain(n,t,i){const s=i.map(o=>{const f=t.getData(o.data);return f||dataLookupError(o.data),f.extentRef(t,o.field)});return ref(t.add(MultiExtent({extents:s})))}function parseScaleBins(n,t){return n.signal||isArray(n)?parseArray(n,t):t.objectProperty(n)}function parseScaleNice(n,t){return n.signal?t.signalRef(n.signal):isObject(n)?{interval:parseLiteral(n.interval),step:parseLiteral(n.step)}:parseLiteral(n)}function parseScaleInterpolate(n,t){t.interpolate=parseLiteral(n.type||n),n.gamma!=null&&(t.interpolateGamma=parseLiteral(n.gamma))}function parseScaleRange$1(n,t,i){const s=t.config.range;let o=n.range;if(o.signal)return t.signalRef(o.signal);if(isString(o)){if(s&&has$1(s,o))return n=extend$3({},n,{range:s[o]}),parseScaleRange$1(n,t,i);o==="width"?o=[0,{signal:"width"}]:o==="height"?o=isDiscrete$2(n.type)?[0,{signal:"height"}]:[{signal:"height"},0]:error$1("Unrecognized scale range value: "+$(o))}else if(o.scheme){i.scheme=isArray(o.scheme)?parseArray(o.scheme,t):parseLiteral(o.scheme,t),o.extent&&(i.schemeExtent=parseArray(o.extent,t)),o.count&&(i.schemeCount=parseLiteral(o.count,t));return}else if(o.step){i.rangeStep=parseLiteral(o.step,t);return}else{if(isDiscrete$2(n.type)&&!isArray(o))return parseScaleDomain$1(o,n,t);isArray(o)||error$1("Unsupported range type: "+$(o))}return o.map(f=>(isArray(f)?parseArray:parseLiteral)(f,t))}function parseProjection$1(n,t){const i=t.config.projection||{},s={};for(const o in n)o!=="name"&&(s[o]=parseParameter$1(n[o],o,t));for(const o in i)s[o]==null&&(s[o]=parseParameter$1(i[o],o,t));t.addProjection(n.name,s)}function parseParameter$1(n,t,i){return isArray(n)?n.map(s=>parseParameter$1(s,t,i)):isObject(n)?n.signal?i.signalRef(n.signal):t==="fit"?n:error$1("Unsupported parameter object: "+$(n)):n}const Top="top",Left="left",Right="right",Bottom="bottom",Center="center",Vertical="vertical",Start="start",Middle="middle",End="end",Index="index",Label="label",Offset="offset",Perc="perc",Perc2="perc2",Value="value",GuideLabelStyle="guide-label",GuideTitleStyle="guide-title",GroupTitleStyle="group-title",GroupSubtitleStyle="group-subtitle",Symbols="symbol",Gradient="gradient",Discrete="discrete",Size="size",Shape="shape",Fill="fill",Stroke="stroke",StrokeWidth="strokeWidth",StrokeDash="strokeDash",Opacity="opacity",LegendScales=[Size,Shape,Fill,Stroke,StrokeWidth,StrokeDash,Opacity],Skip={name:1,style:1,interactive:1},zero$1={value:0},one={value:1},GroupMark="group",RectMark="rect",RuleMark="rule",SymbolMark="symbol",TextMark="text";function guideGroup(n){return n.type=GroupMark,n.interactive=n.interactive||!1,n}function lookup(n,t){const i=(s,o)=>value(n[s],value(t[s],o));return i.isVertical=s=>Vertical===value(n.direction,t.direction||(s?t.symbolDirection:t.gradientDirection)),i.gradientLength=()=>value(n.gradientLength,t.gradientLength||t.gradientWidth),i.gradientThickness=()=>value(n.gradientThickness,t.gradientThickness||t.gradientHeight),i.entryColumns=()=>value(n.columns,value(t.columns,+i.isVertical(!0))),i}function getEncoding(n,t){const i=t&&(t.update&&t.update[n]||t.enter&&t.enter[n]);return i&&i.signal?i:i?i.value:null}function getStyle(n,t,i){const s=t.config.style[i];return s&&s[n]}function anchorExpr(n,t,i){return`item.anchor === '${Start}' ? ${n} : item.anchor === '${End}' ? ${t} : ${i}`}const alignExpr$1=anchorExpr($(Left),$(Right),$(Center));function tickBand(n){const t=n("tickBand");let i=n("tickOffset"),s,o;return t?t.signal?(s={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},o={signal:`(${t.signal}) === 'extent'`},isObject(i)||(i={signal:`(${t.signal}) === 'extent' ? 0 : ${i}`})):t==="extent"?(s=1,o=!0,i=0):(s=.5,o=!1):(s=n("bandPosition"),o=n("tickExtra")),{extra:o,band:s,offset:i}}function extendOffset(n,t){return t?n?isObject(n)?Object.assign({},n,{offset:extendOffset(n.offset,t)}):{value:n,offset:t}:t:n}function guideMark(n,t){return t?(n.name=t.name,n.style=t.style||n.style,n.interactive=!!t.interactive,n.encode=extendEncode(n.encode,t,Skip)):n.interactive=!1,n}function legendGradient(n,t,i,s){const o=lookup(n,i),f=o.isVertical(),d=o.gradientThickness(),p=o.gradientLength();let v,_,k,P,L;f?(_=[0,1],k=[0,0],P=d,L=p):(_=[0,0],k=[1,0],P=p,L=d);const G={enter:v={opacity:zero$1,x:zero$1,y:zero$1,width:encoder(P),height:encoder(L)},update:extend$3({},v,{opacity:one,fill:{gradient:t,start:_,stop:k}}),exit:{opacity:zero$1}};return addEncoders(G,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),guideMark({type:RectMark,role:LegendGradientRole,encode:G},s)}function legendGradientDiscrete(n,t,i,s,o){const f=lookup(n,i),d=f.isVertical(),p=f.gradientThickness(),v=f.gradientLength();let _,k,P,L,G="";d?(_="y",P="y2",k="x",L="width",G="1-"):(_="x",P="x2",k="y",L="height");const Z={opacity:zero$1,fill:{scale:t,field:Value}};Z[_]={signal:G+"datum."+Perc,mult:v},Z[k]=zero$1,Z[P]={signal:G+"datum."+Perc2,mult:v},Z[L]=encoder(p);const W={enter:Z,update:extend$3({},Z,{opacity:one}),exit:{opacity:zero$1}};return addEncoders(W,{stroke:f("gradientStrokeColor"),strokeWidth:f("gradientStrokeWidth")},{opacity:f("gradientOpacity")}),guideMark({type:RectMark,role:LegendBandRole,key:Value,from:o,encode:W},s)}const alignExpr=`datum.${Perc}<=0?"${Left}":datum.${Perc}>=1?"${Right}":"${Center}"`,baselineExpr=`datum.${Perc}<=0?"${Bottom}":datum.${Perc}>=1?"${Top}":"${Middle}"`;function legendGradientLabels(n,t,i,s){const o=lookup(n,t),f=o.isVertical(),d=encoder(o.gradientThickness()),p=o.gradientLength();let v=o("labelOverlap"),_,k,P,L,G="";const Z={enter:_={opacity:zero$1},update:k={opacity:one,text:{field:Label}},exit:{opacity:zero$1}};return addEncoders(Z,{fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:value(n.labelLimit,t.gradientLabelLimit)}),f?(_.align={value:"left"},_.baseline=k.baseline={signal:baselineExpr},P="y",L="x",G="1-"):(_.align=k.align={signal:alignExpr},_.baseline={value:"top"},P="x",L="y"),_[P]=k[P]={signal:G+"datum."+Perc,mult:p},_[L]=k[L]=d,d.offset=value(n.labelOffset,t.gradientLabelOffset)||0,v=v?{separation:o("labelSeparation"),method:v,order:"datum."+Index}:void 0,guideMark({type:TextMark,role:LegendLabelRole,style:GuideLabelStyle,key:Value,from:s,encode:Z,overlap:v},i)}function legendSymbolGroups(n,t,i,s,o){const f=lookup(n,t),d=i.entries,p=!!(d&&d.interactive),v=d?d.name:void 0,_=f("clipHeight"),k=f("symbolOffset"),P={data:"value"},L=`(${o}) ? datum.${Offset} : datum.${Size}`,G=_?encoder(_):{field:Size},Z=`datum.${Index}`,W=`max(1, ${o})`;let j,H,me,$e,De;G.mult=.5,j={enter:H={opacity:zero$1,x:{signal:L,mult:.5,offset:k},y:G},update:me={opacity:one,x:H.x,y:H.y},exit:{opacity:zero$1}};let le=null,Ce=null;n.fill||(le=t.symbolBaseFillColor,Ce=t.symbolBaseStrokeColor),addEncoders(j,{fill:f("symbolFillColor",le),shape:f("symbolType"),size:f("symbolSize"),stroke:f("symbolStrokeColor",Ce),strokeDash:f("symbolDash"),strokeDashOffset:f("symbolDashOffset"),strokeWidth:f("symbolStrokeWidth")},{opacity:f("symbolOpacity")}),LegendScales.forEach(ll=>{n[ll]&&(me[ll]=H[ll]={scale:n[ll],field:Value})});const Me=guideMark({type:SymbolMark,role:LegendSymbolRole,key:Value,from:P,clip:_?!0:void 0,encode:j},i.symbols),_n=encoder(k);_n.offset=f("labelOffset"),j={enter:H={opacity:zero$1,x:{signal:L,offset:_n},y:G},update:me={opacity:one,text:{field:Label},x:H.x,y:H.y},exit:{opacity:zero$1}},addEncoders(j,{align:f("labelAlign"),baseline:f("labelBaseline"),fill:f("labelColor"),fillOpacity:f("labelOpacity"),font:f("labelFont"),fontSize:f("labelFontSize"),fontStyle:f("labelFontStyle"),fontWeight:f("labelFontWeight"),limit:f("labelLimit")});const _i=guideMark({type:TextMark,role:LegendLabelRole,style:GuideLabelStyle,key:Value,from:P,encode:j},i.labels);return j={enter:{noBound:{value:!_},width:zero$1,height:_?encoder(_):zero$1,opacity:zero$1},exit:{opacity:zero$1},update:me={opacity:one,row:{signal:null},column:{signal:null}}},f.isVertical(!0)?($e=`ceil(item.mark.items.length / ${W})`,me.row.signal=`${Z}%${$e}`,me.column.signal=`floor(${Z} / ${$e})`,De={field:["row",Z]}):(me.row.signal=`floor(${Z} / ${W})`,me.column.signal=`${Z} % ${W}`,De={field:Z}),me.column.signal=`(${o})?${me.column.signal}:${Z}`,s={facet:{data:s,name:"value",groupby:Index}},guideGroup({role:ScopeRole,from:s,encode:extendEncode(j,d,Skip),marks:[Me,_i],name:v,interactive:p,sort:De})}function legendSymbolLayout(n,t){const i=lookup(n,t);return{align:i("gridAlign"),columns:i.entryColumns(),center:{row:!0,column:!1},padding:{row:i("rowPadding"),column:i("columnPadding")}}}const isL='item.orient === "left"',isR='item.orient === "right"',isLR=`(${isL} || ${isR})`,isVG=`datum.vgrad && ${isLR}`,baseline$1=anchorExpr('"top"','"bottom"','"middle"'),alignFlip=anchorExpr('"right"','"left"','"center"'),exprAlign=`datum.vgrad && ${isR} ? (${alignFlip}) : (${isLR} && !(datum.vgrad && ${isL})) ? "left" : ${alignExpr$1}`,exprAnchor=`item._anchor || (${isLR} ? "middle" : "start")`,exprAngle=`${isVG} ? (${isL} ? -90 : 90) : 0`,exprBaseline=`${isLR} ? (datum.vgrad ? (${isR} ? "bottom" : "top") : ${baseline$1}) : "top"`;function legendTitle(n,t,i,s){const o=lookup(n,t),f={enter:{opacity:zero$1},update:{opacity:one,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:zero$1}};return addEncoders(f,{orient:o("titleOrient"),_anchor:o("titleAnchor"),anchor:{signal:exprAnchor},angle:{signal:exprAngle},align:{signal:exprAlign},baseline:{signal:exprBaseline},text:n.title,fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit"),lineHeight:o("titleLineHeight")},{align:o("titleAlign"),baseline:o("titleBaseline")}),guideMark({type:TextMark,role:LegendTitleRole,style:GuideTitleStyle,from:s,encode:f},i)}function clip(n,t){let i;return isObject(n)&&(n.signal?i=n.signal:n.path?i="pathShape("+param(n.path)+")":n.sphere&&(i="geoShape("+param(n.sphere)+', {type: "Sphere"})')),i?t.signalRef(i):!!n}function param(n){return isObject(n)&&n.signal?n.signal:$(n)}function getRole(n){const t=n.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:n.type===GroupMark?ScopeRole:t||MarkRole}function definition(n){return{marktype:n.type,name:n.name||void 0,role:n.role||getRole(n),zindex:+n.zindex||void 0,aria:n.aria,description:n.description}}function interactive(n,t){return n&&n.signal?t.signalRef(n.signal):n!==!1}function parseTransform(n,t){const i=definition$1(n.type);i||error$1("Unrecognized transform type: "+$(n.type));const s=entry(i.type.toLowerCase(),null,parseParameters(i,n,t));return n.signal&&t.addSignal(n.signal,t.proxy(s)),s.metadata=i.metadata||{},s}function parseParameters(n,t,i){const s={},o=n.params.length;for(let f=0;f<o;++f){const d=n.params[f];s[d.name]=parseParameter(d,t,i)}return s}function parseParameter(n,t,i){const s=n.type,o=t[n.name];if(s==="index")return parseIndexParameter(n,t,i);if(o===void 0){n.required&&error$1("Missing required "+$(t.type)+" parameter: "+$(n.name));return}else{if(s==="param")return parseSubParameters(n,t,i);if(s==="projection")return i.projectionRef(t[n.name])}return n.array&&!isSignal(o)?o.map(f=>parameterValue(n,f,i)):parameterValue(n,o,i)}function parameterValue(n,t,i){const s=n.type;if(isSignal(t))return isExpr(s)?error$1("Expression references can not be signals."):isField(s)?i.fieldRef(t):isCompare(s)?i.compareRef(t):i.signalRef(t.signal);{const o=n.expr||isField(s);return o&&outerExpr(t)?i.exprRef(t.expr,t.as):o&&outerField(t)?fieldRef$1(t.field,t.as):isExpr(s)?parser$1(t,i):isData(s)?ref(i.getData(t).values):isField(s)?fieldRef$1(t):isCompare(s)?i.compareRef(t):t}}function parseIndexParameter(n,t,i){return isString(t.from)||error$1('Lookup "from" parameter must be a string literal.'),i.getData(t.from).lookupRef(i,t.key)}function parseSubParameters(n,t,i){const s=t[n.name];return n.array?(isArray(s)||error$1("Expected an array of sub-parameters. Instead: "+$(s)),s.map(o=>parseSubParameter(n,o,i))):parseSubParameter(n,s,i)}function parseSubParameter(n,t,i){const s=n.params.length;let o;for(let d=0;d<s;++d){o=n.params[d];for(const p in o.key)if(o.key[p]!==t[p]){o=null;break}if(o)break}o||error$1("Unsupported parameter: "+$(t));const f=extend$3(parseParameters(o,t,i),o.key);return ref(i.add(Params(f)))}const outerExpr=n=>n&&n.expr,outerField=n=>n&&n.field,isData=n=>n==="data",isExpr=n=>n==="expr",isField=n=>n==="field",isCompare=n=>n==="compare";function parseData$1(n,t,i){let s,o,f,d,p;return n?(s=n.facet)&&(t||error$1("Only group marks can be faceted."),s.field!=null?d=p=getDataRef(s,i):(n.data?p=ref(i.getData(n.data).aggregate):(f=parseTransform(extend$3({type:"aggregate",groupby:array$5(s.groupby)},s.aggregate),i),f.params.key=i.keyRef(s.groupby),f.params.pulse=getDataRef(s,i),d=p=ref(i.add(f))),o=i.keyRef(s.groupby,!0))):d=ref(i.add(Collect(null,[{}]))),d||(d=getDataRef(n,i)),{key:o,pulse:d,parent:p}}function getDataRef(n,t){return n.$ref?n:n.data&&n.data.$ref?n.data:ref(t.getData(n.data).output)}function DataScope(n,t,i,s,o){this.scope=n,this.input=t,this.output=i,this.values=s,this.aggregate=o,this.index={}}DataScope.fromEntries=function(n,t){const i=t.length,s=t[i-1],o=t[i-2];let f=t[0],d=null,p=1;for(f&&f.type==="load"&&(f=t[1]),n.add(t[0]);p<i;++p)t[p].params.pulse=ref(t[p-1]),n.add(t[p]),t[p].type==="aggregate"&&(d=t[p]);return new DataScope(n,f,o,s,d)};function fieldKey(n){return isString(n)?n:null}function addSortField(n,t,i){const s=aggrField(i.op,i.field);let o;if(t.ops){for(let f=0,d=t.as.length;f<d;++f)if(t.as[f]===s)return}else t.ops=["count"],t.fields=[null],t.as=["count"];i.op&&(t.ops.push((o=i.op.signal)?n.signalRef(o):i.op),t.fields.push(n.fieldRef(i.field)),t.as.push(s))}function cache(n,t,i,s,o,f,d){const p=t[i]||(t[i]={}),v=sortKey(f);let _=fieldKey(o),k,P;if(_!=null&&(n=t.scope,_=_+(v?"|"+v:""),k=p[_]),!k){const L=f?{field:keyFieldRef,pulse:t.countsRef(n,o,f)}:{field:n.fieldRef(o),pulse:ref(t.output)};v&&(L.sort=n.sortRef(f)),P=n.add(entry(s,void 0,L)),d&&(t.index[o]=P),k=ref(P),_!=null&&(p[_]=k)}return k}DataScope.prototype={countsRef(n,t,i){const s=this,o=s.counts||(s.counts={}),f=fieldKey(t);let d,p,v;return f!=null&&(n=s.scope,d=o[f]),d?i&&i.field&&addSortField(n,d.agg.params,i):(v={groupby:n.fieldRef(t,"key"),pulse:ref(s.output)},i&&i.field&&addSortField(n,v,i),p=n.add(Aggregate(v)),d=n.add(Collect({pulse:ref(p)})),d={agg:p,ref:ref(d)},f!=null&&(o[f]=d)),d.ref},tuplesRef(){return ref(this.values)},extentRef(n,t){return cache(n,this,"extent","extent",t,!1)},domainRef(n,t){return cache(n,this,"domain","values",t,!1)},valuesRef(n,t,i){return cache(n,this,"vals","values",t,i||!0)},lookupRef(n,t){return cache(n,this,"lookup","tupleindex",t,!1)},indataRef(n,t){return cache(n,this,"indata","tupleindex",t,!0,!0)}};function parseFacet(n,t,i){const s=n.from.facet,o=s.name,f=getDataRef(s,t);let d;s.name||error$1("Facet must have a name: "+$(s)),s.data||error$1("Facet must reference a data set: "+$(s)),s.field?d=t.add(PreFacet({field:t.fieldRef(s.field),pulse:f})):s.groupby?d=t.add(Facet({key:t.keyRef(s.groupby),group:ref(t.proxy(i.parent)),pulse:f})):error$1("Facet must specify groupby or field: "+$(s));const p=t.fork(),v=p.add(Collect()),_=p.add(Sieve({pulse:ref(v)}));p.addData(o,new DataScope(p,v,v,_)),p.addSignal("parent",null),d.params.subflow={$subflow:p.parse(n).toRuntime()}}function parseSubflow(n,t,i){const s=t.add(PreFacet({pulse:i.pulse})),o=t.fork();o.add(Sieve()),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(n).toRuntime()}}function parseTrigger(n,t,i){const s=n.remove,o=n.insert,f=n.toggle,d=n.modify,p=n.values,v=t.add(operator()),_="if("+n.trigger+',modify("'+i+'",'+[o,s,f,d,p].map(P=>P??"null").join(",")+"),0)",k=parser$1(_,t);v.update=k.$expr,v.params=k.$params}function parseMark(n,t){const i=getRole(n),s=n.type===GroupMark,o=n.from&&n.from.facet,f=n.overlap;let d=n.layout||i===ScopeRole||i===FrameRole,p,v,_,k,P,L,G;const Z=i===MarkRole||d||o,W=parseData$1(n.from,s,t);v=t.add(DataJoin({key:W.key||(n.key?fieldRef$1(n.key):void 0),pulse:W.pulse,clean:!s}));const j=ref(v);v=_=t.add(Collect({pulse:j})),v=t.add(Mark$1({markdef:definition(n),interactive:interactive(n.interactive,t),clip:clip(n.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ref(v)}));const H=ref(v);v=k=t.add(Encode(parseEncode(n.encode,n.type,i,n.style,t,{mod:!1,pulse:H}))),v.params.parent=t.encode(),n.transform&&n.transform.forEach(Ce=>{const Me=parseTransform(Ce,t),_n=Me.metadata;(_n.generates||_n.changes)&&error$1("Mark transforms should not generate new data."),_n.nomod||(k.params.mod=!0),Me.params.pulse=ref(v),t.add(v=Me)}),n.sort&&(v=t.add(SortItems({sort:t.compareRef(n.sort),pulse:ref(v)})));const me=ref(v);(o||d)&&(d=t.add(ViewLayout({layout:t.objectProperty(n.layout),legends:t.legends,mark:H,pulse:me})),L=ref(d));const $e=t.add(Bound({mark:H,pulse:L||me}));G=ref($e),s&&(Z&&(p=t.operators,p.pop(),d&&p.pop()),t.pushState(me,L||G,j),o?parseFacet(n,t,W):Z?parseSubflow(n,t,W):t.parse(n),t.popState(),Z&&(d&&p.push(d),p.push($e))),f&&(G=parseOverlap(f,G,t));const De=t.add(Render({pulse:G})),le=t.add(Sieve({pulse:ref(De)},void 0,t.parent()));n.name!=null&&(P=n.name,t.addData(P,new DataScope(t,_,De,le)),n.on&&n.on.forEach(Ce=>{(Ce.insert||Ce.remove||Ce.toggle)&&error$1("Marks only support modify triggers."),parseTrigger(Ce,t,P)}))}function parseOverlap(n,t,i){const s=n.method,o=n.bound,f=n.separation,d={separation:isSignal(f)?i.signalRef(f.signal):f,method:isSignal(s)?i.signalRef(s.signal):s,pulse:t};if(n.order&&(d.sort=i.compareRef({field:n.order})),o){const p=o.tolerance;d.boundTolerance=isSignal(p)?i.signalRef(p.signal):+p,d.boundScale=i.scaleRef(o.scale),d.boundOrient=o.orient}return ref(i.add(Overlap(d)))}function parseLegend$1(n,t){const i=t.config.legend,s=n.encode||{},o=lookup(n,i),f=s.legend||{},d=f.name||void 0,p=f.interactive,v=f.style,_={};let k=0,P,L,G;LegendScales.forEach($e=>n[$e]?(_[$e]=n[$e],k=k||n[$e]):0),k||error$1("Missing valid scale for legend.");const Z=legendType(n,t.scaleType(k)),W={title:n.title!=null,scales:_,type:Z,vgrad:Z!=="symbol"&&o.isVertical()},j=ref(t.add(Collect(null,[W]))),H={enter:{x:{value:0},y:{value:0}}},me=ref(t.add(LegendEntries(L={type:Z,scale:t.scaleRef(k),count:t.objectProperty(o("tickCount")),limit:t.property(o("symbolLimit")),values:t.objectProperty(n.values),minstep:t.property(n.tickMinStep),formatType:t.property(n.formatType),formatSpecifier:t.property(n.format)})));return Z===Gradient?(G=[legendGradient(n,k,i,s.gradient),legendGradientLabels(n,i,s.labels,me)],L.count=L.count||t.signalRef(`max(2,2*floor((${deref(o.gradientLength())})/100))`)):Z===Discrete?G=[legendGradientDiscrete(n,k,i,s.gradient,me),legendGradientLabels(n,i,s.labels,me)]:(P=legendSymbolLayout(n,i),G=[legendSymbolGroups(n,i,s,me,deref(P.columns))],L.size=sizeExpression(n,t,G[0].marks)),G=[guideGroup({role:LegendEntryRole,from:j,encode:H,marks:G,layout:P,interactive:p})],W.title&&G.push(legendTitle(n,i,s.title,j)),parseMark(guideGroup({role:LegendRole,from:j,encode:extendEncode(buildLegendEncode(o,n,i),f,Skip),marks:G,aria:o("aria"),description:o("description"),zindex:o("zindex"),name:d,interactive:p,style:v}),t)}function legendType(n,t){let i=n.type||Symbols;return!n.type&&scaleCount(n)===1&&(n.fill||n.stroke)&&(i=isContinuous$1(t)?Gradient:isDiscretizing$1(t)?Discrete:Symbols),i!==Gradient?i:isDiscretizing$1(t)?Discrete:Gradient}function scaleCount(n){return LegendScales.reduce((t,i)=>t+(n[i]?1:0),0)}function buildLegendEncode(n,t,i){const s={enter:{},update:{}};return addEncoders(s,{orient:n("orient"),offset:n("offset"),padding:n("padding"),titlePadding:n("titlePadding"),cornerRadius:n("cornerRadius"),fill:n("fillColor"),stroke:n("strokeColor"),strokeWidth:i.strokeWidth,strokeDash:i.strokeDash,x:n("legendX"),y:n("legendY"),format:t.format,formatType:t.formatType}),s}function sizeExpression(n,t,i){const s=deref(getChannel("size",n,i)),o=deref(getChannel("strokeWidth",n,i)),f=deref(getFontSize(i[1].encode,t,GuideLabelStyle));return parser$1(`max(ceil(sqrt(${s})+${o}),${f})`,t)}function getChannel(n,t,i){return t[n]?`scale("${t[n]}",datum)`:getEncoding(n,i[0].encode)}function getFontSize(n,t,i){return getEncoding("fontSize",n)||getStyle("fontSize",t,i)}const angleExpr=`item.orient==="${Left}"?-90:item.orient==="${Right}"?90:0`;function parseTitle(n,t){n=isString(n)?{text:n}:n;const i=lookup(n,t.config.title),s=n.encode||{},o=s.group||{},f=o.name||void 0,d=o.interactive,p=o.style,v=[],_={},k=ref(t.add(Collect(null,[_])));return v.push(buildTitle(n,i,titleEncode(n),k)),n.subtitle&&v.push(buildSubTitle(n,i,s.subtitle,k)),parseMark(guideGroup({role:TitleRole,from:k,encode:groupEncode(i,o),marks:v,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:f,interactive:d,style:p}),t)}function titleEncode(n){const t=n.encode;return t&&t.title||extend$3({name:n.name,interactive:n.interactive,style:n.style},t)}function groupEncode(n,t){const i={enter:{},update:{}};return addEncoders(i,{orient:n("orient"),anchor:n("anchor"),align:{signal:alignExpr$1},angle:{signal:angleExpr},limit:n("limit"),frame:n("frame"),offset:n("offset")||0,padding:n("subtitlePadding")}),extendEncode(i,t,Skip)}function buildTitle(n,t,i,s){const o={value:0},f=n.text,d={enter:{opacity:o},update:{opacity:{value:1}},exit:{opacity:o}};return addEncoders(d,{text:f,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),guideMark({type:TextMark,role:TitleTextRole,style:GroupTitleStyle,from:s,encode:d},i)}function buildSubTitle(n,t,i,s){const o={value:0},f=n.subtitle,d={enter:{opacity:o},update:{opacity:{value:1}},exit:{opacity:o}};return addEncoders(d,{text:f,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),guideMark({type:TextMark,role:TitleSubtitleRole,style:GroupSubtitleStyle,from:s,encode:d},i)}function parseData$2(n,t){const i=[];n.transform&&n.transform.forEach(s=>{i.push(parseTransform(s,t))}),n.on&&n.on.forEach(s=>{parseTrigger(s,t,n.name)}),t.addDataPipeline(n.name,analyze$1(n,t,i))}function analyze$1(n,t,i){const s=[];let o=null,f=!1,d=!1,p,v,_,k,P;for(n.values?isSignal(n.values)||hasSignal(n.format)?(s.push(load(t,n)),s.push(o=collect())):s.push(o=collect({$ingest:n.values,$format:n.format})):n.url?hasSignal(n.url)||hasSignal(n.format)?(s.push(load(t,n)),s.push(o=collect())):s.push(o=collect({$request:n.url,$format:n.format})):n.source&&(o=p=array$5(n.source).map(L=>ref(t.getData(L).output)),s.push(null)),v=0,_=i.length;v<_;++v)k=i[v],P=k.metadata,!o&&!P.source&&s.push(o=collect()),s.push(k),P.generates&&(d=!0),P.modifies&&!d&&(f=!0),P.source?o=k:P.changes&&(o=null);return p&&(_=p.length-1,s[0]=Relay({derive:f,pulse:_?p:p[0]}),(f||_)&&s.splice(1,0,collect())),o||s.push(collect()),s.push(Sieve({})),s}function collect(n){const t=Collect({},n);return t.metadata={source:!0},t}function load(n,t){return Load({url:t.url?n.property(t.url):void 0,async:t.async?n.property(t.async):void 0,values:t.values?n.property(t.values):void 0,format:n.objectProperty(t.format)})}const isX=n=>n===Bottom||n===Top,getSign=(n,t,i)=>isSignal(n)?ifLeftTopExpr(n.signal,t,i):n===Left||n===Top?t:i,ifX=(n,t,i)=>isSignal(n)?ifXEnc(n.signal,t,i):isX(n)?t:i,ifY=(n,t,i)=>isSignal(n)?ifYEnc(n.signal,t,i):isX(n)?i:t,ifTop=(n,t,i)=>isSignal(n)?ifTopExpr(n.signal,t,i):n===Top?{value:t}:{value:i},ifRight=(n,t,i)=>isSignal(n)?ifRightExpr(n.signal,t,i):n===Right?{value:t}:{value:i},ifXEnc=(n,t,i)=>ifEnc(`${n} === '${Top}' || ${n} === '${Bottom}'`,t,i),ifYEnc=(n,t,i)=>ifEnc(`${n} !== '${Top}' && ${n} !== '${Bottom}'`,t,i),ifLeftTopExpr=(n,t,i)=>ifExpr(`${n} === '${Left}' || ${n} === '${Top}'`,t,i),ifTopExpr=(n,t,i)=>ifExpr(`${n} === '${Top}'`,t,i),ifRightExpr=(n,t,i)=>ifExpr(`${n} === '${Right}'`,t,i),ifEnc=(n,t,i)=>(t=t!=null?encoder(t):t,i=i!=null?encoder(i):i,isSimple(t)&&isSimple(i)?(t=t?t.signal||$(t.value):null,i=i?i.signal||$(i.value):null,{signal:`${n} ? (${t}) : (${i})`}):[extend$3({test:n},t)].concat(i||[])),isSimple=n=>n==null||Object.keys(n).length===1,ifExpr=(n,t,i)=>({signal:`${n} ? (${toExpr(t)}) : (${toExpr(i)})`}),ifOrient=(n,t,i,s,o)=>({signal:(s!=null?`${n} === '${Left}' ? (${toExpr(s)}) : `:"")+(i!=null?`${n} === '${Bottom}' ? (${toExpr(i)}) : `:"")+(o!=null?`${n} === '${Right}' ? (${toExpr(o)}) : `:"")+(t!=null?`${n} === '${Top}' ? (${toExpr(t)}) : `:"")+"(null)"}),toExpr=n=>isSignal(n)?n.signal:n==null?null:$(n),mult=(n,t)=>t===0?0:isSignal(n)?{signal:`(${n.signal}) * ${t}`}:{value:n*t},patch=(n,t)=>{const i=n.signal;return i&&i.endsWith("(null)")?{signal:i.slice(0,-6)+t.signal}:n};function fallback(n,t,i,s){let o;if(t&&has$1(t,n))return t[n];if(has$1(i,n))return i[n];if(n.startsWith("title")){switch(n){case"titleColor":o="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":o=n[5].toLowerCase()+n.slice(6)}return s[GuideTitleStyle][o]}else if(n.startsWith("label")){switch(n){case"labelColor":o="fill";break;case"labelFont":case"labelFontSize":o=n[5].toLowerCase()+n.slice(6)}return s[GuideLabelStyle][o]}return null}function keys$1(n){const t={};for(const i of n)if(i)for(const s in i)t[s]=1;return Object.keys(t)}function axisConfig(n,t){var i=t.config,s=i.style,o=i.axis,f=t.scaleType(n.scale)==="band"&&i.axisBand,d=n.orient,p,v,_;if(isSignal(d)){const P=keys$1([i.axisX,i.axisY]),L=keys$1([i.axisTop,i.axisBottom,i.axisLeft,i.axisRight]);p={};for(_ of P)p[_]=ifX(d,fallback(_,i.axisX,o,s),fallback(_,i.axisY,o,s));v={};for(_ of L)v[_]=ifOrient(d.signal,fallback(_,i.axisTop,o,s),fallback(_,i.axisBottom,o,s),fallback(_,i.axisLeft,o,s),fallback(_,i.axisRight,o,s))}else p=d===Top||d===Bottom?i.axisX:i.axisY,v=i["axis"+d[0].toUpperCase()+d.slice(1)];return p||v||f?extend$3({},o,p,v,f):o}function axisDomain(n,t,i,s){const o=lookup(n,t),f=n.orient;let d,p;const v={enter:d={opacity:zero$1},update:p={opacity:one},exit:{opacity:zero$1}};addEncoders(v,{stroke:o("domainColor"),strokeCap:o("domainCap"),strokeDash:o("domainDash"),strokeDashOffset:o("domainDashOffset"),strokeWidth:o("domainWidth"),strokeOpacity:o("domainOpacity")});const _=position(n,0),k=position(n,1);return d.x=p.x=ifX(f,_,zero$1),d.x2=p.x2=ifX(f,k),d.y=p.y=ifY(f,_,zero$1),d.y2=p.y2=ifY(f,k),guideMark({type:RuleMark,role:AxisDomainRole,from:s,encode:v},i)}function position(n,t){return{scale:n.scale,range:t}}function axisGrid(n,t,i,s,o){const f=lookup(n,t),d=n.orient,p=n.gridScale,v=getSign(d,1,-1),_=offsetValue(n.offset,v);let k,P,L;const G={enter:k={opacity:zero$1},update:L={opacity:one},exit:P={opacity:zero$1}};addEncoders(G,{stroke:f("gridColor"),strokeCap:f("gridCap"),strokeDash:f("gridDash"),strokeDashOffset:f("gridDashOffset"),strokeOpacity:f("gridOpacity"),strokeWidth:f("gridWidth")});const Z={scale:n.scale,field:Value,band:o.band,extra:o.extra,offset:o.offset,round:f("tickRound")},W=ifX(d,{signal:"height"},{signal:"width"}),j=p?{scale:p,range:0,mult:v,offset:_}:{value:0,offset:_},H=p?{scale:p,range:1,mult:v,offset:_}:extend$3(W,{mult:v,offset:_});return k.x=L.x=ifX(d,Z,j),k.y=L.y=ifY(d,Z,j),k.x2=L.x2=ifY(d,H),k.y2=L.y2=ifX(d,H),P.x=ifX(d,Z),P.y=ifY(d,Z),guideMark({type:RuleMark,role:AxisGridRole,key:Value,from:s,encode:G},i)}function offsetValue(n,t){if(t!==1)if(!isObject(n))n=isSignal(t)?{signal:`(${t.signal}) * (${n||0})`}:t*(n||0);else{let i=n=extend$3({},n);for(;i.mult!=null;)if(isObject(i.mult))i=i.mult=extend$3({},i.mult);else return i.mult=isSignal(t)?{signal:`(${i.mult}) * (${t.signal})`}:i.mult*t,n;i.mult=t}return n}function axisTicks(n,t,i,s,o,f){const d=lookup(n,t),p=n.orient,v=getSign(p,-1,1);let _,k,P;const L={enter:_={opacity:zero$1},update:P={opacity:one},exit:k={opacity:zero$1}};addEncoders(L,{stroke:d("tickColor"),strokeCap:d("tickCap"),strokeDash:d("tickDash"),strokeDashOffset:d("tickDashOffset"),strokeOpacity:d("tickOpacity"),strokeWidth:d("tickWidth")});const G=encoder(o);G.mult=v;const Z={scale:n.scale,field:Value,band:f.band,extra:f.extra,offset:f.offset,round:d("tickRound")};return P.y=_.y=ifX(p,zero$1,Z),P.y2=_.y2=ifX(p,G),k.x=ifX(p,Z),P.x=_.x=ifY(p,zero$1,Z),P.x2=_.x2=ifY(p,G),k.y=ifY(p,Z),guideMark({type:RuleMark,role:AxisTickRole,key:Value,from:s,encode:L},i)}function flushExpr(n,t,i,s,o){return{signal:'flush(range("'+n+'"), scale("'+n+'", datum.value), '+t+","+i+","+s+","+o+")"}}function axisLabels(n,t,i,s,o,f){const d=lookup(n,t),p=n.orient,v=n.scale,_=getSign(p,-1,1),k=deref(d("labelFlush")),P=deref(d("labelFlushOffset")),L=d("labelAlign"),G=d("labelBaseline");let Z=k===0||!!k,W;const j=encoder(o);j.mult=_,j.offset=encoder(d("labelPadding")||0),j.offset.mult=_;const H={scale:v,field:Value,band:.5,offset:extendOffset(f.offset,d("labelOffset"))},me=ifX(p,Z?flushExpr(v,k,'"left"','"right"','"center"'):{value:"center"},ifRight(p,"left","right")),$e=ifX(p,ifTop(p,"bottom","top"),Z?flushExpr(v,k,'"top"','"bottom"','"middle"'):{value:"middle"}),De=flushExpr(v,k,`-(${P})`,P,0);Z=Z&&P;const le={opacity:zero$1,x:ifX(p,H,j),y:ifY(p,H,j)},Ce={enter:le,update:W={opacity:one,text:{field:Label},x:le.x,y:le.y,align:me,baseline:$e},exit:{opacity:zero$1,x:le.x,y:le.y}};addEncoders(Ce,{dx:!L&&Z?ifX(p,De):null,dy:!G&&Z?ifY(p,De):null}),addEncoders(Ce,{angle:d("labelAngle"),fill:d("labelColor"),fillOpacity:d("labelOpacity"),font:d("labelFont"),fontSize:d("labelFontSize"),fontWeight:d("labelFontWeight"),fontStyle:d("labelFontStyle"),limit:d("labelLimit"),lineHeight:d("labelLineHeight")},{align:L,baseline:G});const Me=d("labelBound");let _n=d("labelOverlap");return _n=_n||Me?{separation:d("labelSeparation"),method:_n,order:"datum.index",bound:Me?{scale:v,orient:p,tolerance:Me}:null}:void 0,W.align!==me&&(W.align=patch(W.align,me)),W.baseline!==$e&&(W.baseline=patch(W.baseline,$e)),guideMark({type:TextMark,role:AxisLabelRole,style:GuideLabelStyle,key:Value,from:s,encode:Ce,overlap:_n},i)}function axisTitle(n,t,i,s){const o=lookup(n,t),f=n.orient,d=getSign(f,-1,1);let p,v;const _={enter:p={opacity:zero$1,anchor:encoder(o("titleAnchor",null)),align:{signal:alignExpr$1}},update:v=extend$3({},p,{opacity:one,text:encoder(n.title)}),exit:{opacity:zero$1}},k={signal:`lerp(range("${n.scale}"), ${anchorExpr(0,1,.5)})`};return v.x=ifX(f,k),v.y=ifY(f,k),p.angle=ifX(f,zero$1,mult(d,90)),p.baseline=ifX(f,ifTop(f,Bottom,Top),{value:Bottom}),v.angle=p.angle,v.baseline=p.baseline,addEncoders(_,{fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit"),lineHeight:o("titleLineHeight")},{align:o("titleAlign"),angle:o("titleAngle"),baseline:o("titleBaseline")}),autoLayout(o,f,_,i),_.update.align=patch(_.update.align,p.align),_.update.angle=patch(_.update.angle,p.angle),_.update.baseline=patch(_.update.baseline,p.baseline),guideMark({type:TextMark,role:AxisTitleRole,style:GuideTitleStyle,from:s,encode:_},i)}function autoLayout(n,t,i,s){const o=(p,v)=>p!=null?(i.update[v]=patch(encoder(p),i.update[v]),!1):!has(v,s),f=o(n("titleX"),"x"),d=o(n("titleY"),"y");i.enter.auto=d===f?encoder(d):ifX(t,encoder(d),encoder(f))}function parseAxis$1(n,t){const i=axisConfig(n,t),s=n.encode||{},o=s.axis||{},f=o.name||void 0,d=o.interactive,p=o.style,v=lookup(n,i),_=tickBand(v),k={scale:n.scale,ticks:!!v("ticks"),labels:!!v("labels"),grid:!!v("grid"),domain:!!v("domain"),title:n.title!=null},P=ref(t.add(Collect({},[k]))),L=ref(t.add(AxisTicks({scale:t.scaleRef(n.scale),extra:t.property(_.extra),count:t.objectProperty(n.tickCount),values:t.objectProperty(n.values),minstep:t.property(n.tickMinStep),formatType:t.property(n.formatType),formatSpecifier:t.property(n.format)}))),G=[];let Z;return k.grid&&G.push(axisGrid(n,i,s.grid,L,_)),k.ticks&&(Z=v("tickSize"),G.push(axisTicks(n,i,s.ticks,L,Z,_))),k.labels&&(Z=k.ticks?Z:0,G.push(axisLabels(n,i,s.labels,L,Z,_))),k.domain&&G.push(axisDomain(n,i,s.domain,P)),k.title&&G.push(axisTitle(n,i,s.title,P)),parseMark(guideGroup({role:AxisRole,from:P,encode:extendEncode(buildAxisEncode(v,n),o,Skip),marks:G,aria:v("aria"),description:v("description"),zindex:v("zindex"),name:f,interactive:d,style:p}),t)}function buildAxisEncode(n,t){const i={enter:{},update:{}};return addEncoders(i,{orient:n("orient"),offset:n("offset")||0,position:value(t.position,0),titlePadding:n("titlePadding"),minExtent:n("minExtent"),maxExtent:n("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:n("translate"),format:t.format,formatType:t.formatType}),i}function parseScope(n,t,i){const s=array$5(n.signals),o=array$5(n.scales);return i||s.forEach(f=>parseSignal(f,t)),array$5(n.projections).forEach(f=>parseProjection$1(f,t)),o.forEach(f=>initScale(f,t)),array$5(n.data).forEach(f=>parseData$2(f,t)),o.forEach(f=>parseScale(f,t)),(i||s).forEach(f=>parseSignalUpdates(f,t)),array$5(n.axes).forEach(f=>parseAxis$1(f,t)),array$5(n.marks).forEach(f=>parseMark(f,t)),array$5(n.legends).forEach(f=>parseLegend$1(f,t)),n.title&&parseTitle(n.title,t),t.parseLambdas(),t}const rootEncode=n=>extendEncode({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},n);function parseView(n,t){const i=t.config,s=ref(t.root=t.add(operator())),o=collectSignals(n,i);o.forEach(_=>parseSignal(_,t)),t.description=n.description||i.description,t.eventConfig=i.events,t.legends=t.objectProperty(i.legend&&i.legend.layout),t.locale=i.locale;const f=t.add(Collect()),d=t.add(Encode(parseEncode(rootEncode(n.encode),GroupMark,FrameRole,n.style,t,{pulse:ref(f)}))),p=t.add(ViewLayout({layout:t.objectProperty(n.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:s,pulse:ref(d)}));t.operators.pop(),t.pushState(ref(d),ref(p),null),parseScope(n,t,o),t.operators.push(p);let v=t.add(Bound({mark:s,pulse:ref(p)}));return v=t.add(Render({pulse:ref(v)})),v=t.add(Sieve({pulse:ref(v)})),t.addData("root",new DataScope(t,f,f,v)),t}function signalObject(n,t){return t&&t.signal?{name:n,update:t.signal}:{name:n,value:t}}function collectSignals(n,t){const i=d=>value(n[d],t[d]),s=[signalObject("background",i("background")),signalObject("autosize",parseAutosize(i("autosize"))),signalObject("padding",parsePadding(i("padding"))),signalObject("width",i("width")||0),signalObject("height",i("height")||0)],o=s.reduce((d,p)=>(d[p.name]=p,d),{}),f={};return array$5(n.signals).forEach(d=>{has$1(o,d.name)?d=extend$3(o[d.name],d):s.push(d),f[d.name]=d}),array$5(t.signals).forEach(d=>{!has$1(f,d.name)&&!has$1(o,d.name)&&s.push(d)}),s}function Scope(n,t){this.config=n||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Subscope(n){this.config=n.config,this.options=n.options,this.legends=n.legends,this.field=Object.create(n.field),this.signals=Object.create(n.signals),this.lambdas=Object.create(n.lambdas),this.scales=Object.create(n.scales),this.events=Object.create(n.events),this.data=Object.create(n.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++n._nextsub[0],this._nextsub=n._nextsub,this._parent=n._parent.slice(),this._encode=n._encode.slice(),this._lookup=n._lookup.slice(),this._markpath=n._markpath}Scope.prototype=Subscope.prototype={parse(n){return parseScope(n,this)},fork(){return new Subscope(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(n){return this.operators.push(n),n.id=this.id(),n.refs&&(n.refs.forEach(t=>{t.$ref=n.id}),n.refs=null),n},proxy(n){const t=n instanceof Entry?ref(n):n;return this.add(Proxy$1({value:t}))},addStream(n){return this.streams.push(n),n.id=this.id(),n},addUpdate(n){return this.updates.push(n),n},finish(){let n,t;this.root&&(this.root.root=!0);for(n in this.signals)this.signals[n].signal=n;for(n in this.scales)this.scales[n].scale=n;function i(s,o,f){let d,p;s&&(d=s.data||(s.data={}),p=d[o]||(d[o]=[]),p.push(f))}for(n in this.data){t=this.data[n],i(t.input,n,"input"),i(t.output,n,"output"),i(t.values,n,"values");for(const s in t.index)i(t.index[s],n,"index:"+s)}return this},pushState(n,t,i){this._encode.push(ref(this.add(Sieve({pulse:n})))),this._parent.push(t),this._lookup.push(i?ref(this.proxy(i)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return peek$2(this._parent)},encode(){return peek$2(this._encode)},lookup(){return peek$2(this._lookup)},markpath(){const n=this._markpath;return++n[n.length-1]},fieldRef(n,t){if(isString(n))return fieldRef$1(n,t);n.signal||error$1("Unsupported field reference: "+$(n));const i=n.signal;let s=this.field[i];if(!s){const o={name:this.signalRef(i)};t&&(o.as=t),this.field[i]=s=ref(this.add(Field(o)))}return s},compareRef(n){let t=!1;const i=f=>isSignal(f)?(t=!0,this.signalRef(f.signal)):isExpr$1(f)?(t=!0,this.exprRef(f.expr)):f,s=array$5(n.field).map(i),o=array$5(n.order).map(i);return t?ref(this.add(Compare({fields:s,orders:o}))):compareRef(s,o)},keyRef(n,t){let i=!1;const s=f=>isSignal(f)?(i=!0,ref(o[f.signal])):f,o=this.signals;return n=array$5(n).map(s),i?ref(this.add(Key({fields:n,flat:t}))):keyRef(n,t)},sortRef(n){if(!n)return n;const t=aggrField(n.op,n.field),i=n.order||Ascending;return i.signal?ref(this.add(Compare({fields:t,orders:this.signalRef(i.signal)}))):compareRef(t,i)},event(n,t){const i=n+":"+t;if(!this.events[i]){const s=this.id();this.streams.push({id:s,source:n,type:t}),this.events[i]=s}return this.events[i]},hasOwnSignal(n){return has$1(this.signals,n)},addSignal(n,t){this.hasOwnSignal(n)&&error$1("Duplicate signal name: "+$(n));const i=t instanceof Entry?t:this.add(operator(t));return this.signals[n]=i},getSignal(n){return this.signals[n]||error$1("Unrecognized signal name: "+$(n)),this.signals[n]},signalRef(n){return this.signals[n]?ref(this.signals[n]):(has$1(this.lambdas,n)||(this.lambdas[n]=this.add(operator(null))),ref(this.lambdas[n]))},parseLambdas(){const n=Object.keys(this.lambdas);for(let t=0,i=n.length;t<i;++t){const s=n[t],o=parser$1(s,this),f=this.lambdas[s];f.params=o.$params,f.update=o.$expr}},property(n){return n&&n.signal?this.signalRef(n.signal):n},objectProperty(n){return!n||!isObject(n)?n:this.signalRef(n.signal||propertyLambda(n))},exprRef(n,t){const i={expr:parser$1(n,this)};return t&&(i.expr.$name=t),ref(this.add(Expression(i)))},addBinding(n,t){this.bindings||error$1("Nested signals do not support binding: "+$(n)),this.bindings.push(extend$3({signal:n},t))},addScaleProj(n,t){has$1(this.scales,n)&&error$1("Duplicate scale or projection name: "+$(n)),this.scales[n]=this.add(t)},addScale(n,t){this.addScaleProj(n,Scale(t))},addProjection(n,t){this.addScaleProj(n,Projection(t))},getScale(n){return this.scales[n]||error$1("Unrecognized scale name: "+$(n)),this.scales[n]},scaleRef(n){return ref(this.getScale(n))},scaleType(n){return this.getScale(n).params.type},projectionRef(n){return this.scaleRef(n)},projectionType(n){return this.scaleType(n)},addData(n,t){return has$1(this.data,n)&&error$1("Duplicate data set name: "+$(n)),this.data[n]=t},getData(n){return this.data[n]||error$1("Undefined data set name: "+$(n)),this.data[n]},addDataPipeline(n,t){return has$1(this.data,n)&&error$1("Duplicate data set name: "+$(n)),this.addData(n,DataScope.fromEntries(this,t))}};function propertyLambda(n){return(isArray(n)?arrayLambda:objectLambda)(n)}function arrayLambda(n){const t=n.length;let i="[";for(let s=0;s<t;++s){const o=n[s];i+=(s>0?",":"")+(isObject(o)?o.signal||propertyLambda(o):$(o))}return i+"]"}function objectLambda(n){let t="{",i=0,s,o;for(s in n)o=n[s],t+=(++i>1?",":"")+$(s)+":"+(isObject(o)?o.signal||propertyLambda(o):$(o));return t+"}"}function defaults(){const n="sans-serif",s="#4c78a8",o="#000",f="#888",d="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:s},area:{fill:s},image:null,line:{stroke:s,strokeWidth:2},path:{stroke:s},rect:{fill:s},rule:{stroke:o},shape:{stroke:s},symbol:{fill:s,size:64},text:{fill:o,font:n,fontSize:11},trail:{fill:s,size:2},style:{"guide-label":{fill:o,font:n,fontSize:10},"guide-title":{fill:o,font:n,fontSize:11,fontWeight:"bold"},"group-title":{fill:o,font:n,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:o,font:n,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:d},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:f,grid:!1,gridWidth:1,gridColor:d,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:f,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:d,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:f,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function parse(n,t,i){return isObject(n)||error$1("Input Vega specification must be an object."),t=mergeConfig(defaults(),t,n.config),parseView(n,new Scope(t,i)).toRuntime()}var version$5="5.33.0";extend$3(transforms,tx$1,vtx,encode$1,geo,force,label,tree,reg,voronoi,wordcloud,xf$1);const vegaImport=Object.freeze(Object.defineProperty({__proto__:null,Bounds,CanvasHandler,CanvasRenderer,DATE,DAY,DAYOFYEAR,Dataflow,Debug,Error:Error$1,EventStream,Gradient:Gradient$1,GroupItem,HOURS,Handler,HybridHandler,HybridRenderer,Info,Item,MILLISECONDS,MINUTES,MONTH,Marks,MultiPulse,None:None$2,Operator,Parameters,Pulse,QUARTER,RenderType,Renderer,ResourceLoader,SECONDS,SVGHandler,SVGRenderer,SVGStringRenderer,Scenegraph,TIME_UNITS,Transform,View:View$1,WEEK,Warn,YEAR,accessor,accessorFields,accessorName,array:array$5,ascending:ascending$8,bandwidthNRD:estimateBandwidth,bin,bootstrapCI,boundClip,boundContext,boundItem:boundItem$1,boundMark,boundStroke,changeset,clampRange,codegenExpression:codegen,compare:compare$2,constant:constant$6,cumulativeLogNormal,cumulativeNormal,cumulativeUniform,dayofyear,debounce,defaultLocale:defaultLocale$1,definition:definition$1,densityLogNormal,densityNormal,densityUniform,domChild,domClear,domCreate,domFind,dotbin,error:error$1,expressionFunction,extend:extend$3,extent,extentIndex,falsy,fastmap,field:field$1,flush,font:font$1,fontFamily,fontSize,format:format$2,formatLocale:numberFormatDefaultLocale,formats:formats$1,hasOwnProperty:has$1,id:id$1,identity:identity$7,inferType,inferTypes,ingest:ingest$1,inherits,inrange,interpolate:interpolate$2,interpolateColors,interpolateRange:interpolateRange$1,intersect:intersect$2,intersectBoxLine,intersectPath,intersectPoint,intersectRule,isArray,isBoolean:isBoolean$2,isDate:isDate$1,isFunction:isFunction$1,isIterable,isNumber:isNumber$1,isObject,isRegExp,isString,isTuple,key,lerp,lineHeight,loader,locale:locale$1,logger,lruCache,markup,merge:merge$3,mergeConfig,multiLineOffset,one:one$3,pad:pad$3,panLinear,panLog,panPow,panSymlog,parse,parseExpression:parser$2,parseSelector:eventSelector,path:path$3,pathCurves:curves,pathEqual,pathParse:parse$3,pathRectangle:vg_rect,pathRender,pathSymbols:symbols$1,pathTrail:vg_trail,peek:peek$2,point:point$2,projection,quantileLogNormal,quantileNormal,quantileUniform,quantiles,quantizeInterpolator,quarter,quartiles,get random(){return random$2},randomInteger:integer,randomKDE:kde,randomLCG:lcg$2,randomLogNormal:lognormal,randomMixture:mixture$1,randomNormal:gaussian,randomUniform:uniform,read,regressionConstant:constant$5,regressionExp:exp$2,regressionLinear:linear$3,regressionLoess:loess,regressionLog:log$5,regressionPoly:poly,regressionPow:pow$a,regressionQuad:quad,renderModule,repeat,resetDefaultLocale,resetSVGClipId,resetSVGDefIds,responseType,runtimeContext:context,sampleCurve,sampleLogNormal,sampleNormal,sampleUniform,scale:scale$5,sceneEqual,sceneFromJSON,scenePickVisit:pickVisit,sceneToJSON,sceneVisit:visit,sceneZOrder:zorder,scheme:scheme$1,serializeXML,setHybridRendererOptions,setRandom,span,splitAccessPath,stringValue:$,textMetrics,timeBin:bin$1,timeFloor,timeFormatLocale:timeFormatDefaultLocale,timeInterval,timeOffset,timeSequence,timeUnitSpecifier,timeUnits,toBoolean,toDate,toNumber,toSet,toString,transform:transform$2,transforms,truncate:truncate$1,truthy,tupleid,typeParsers,utcFloor,utcInterval,utcOffset,utcSequence,utcdayofyear,utcquarter,utcweek,version:version$5,visitArray,week,writeConfig,zero:zero$9,zoomLinear,zoomLog,zoomPow,zoomSymlog},Symbol.toStringTag,{value:"Module"}));function adjustSpatial(n,t,i){let s;t.x2&&(t.x?(i&&n.x>n.x2&&(s=n.x,n.x=n.x2,n.x2=s),n.width=n.x2-n.x):n.x=n.x2-(n.width||0)),t.xc&&(n.x=n.xc-(n.width||0)/2),t.y2&&(t.y?(i&&n.y>n.y2&&(s=n.y,n.y=n.y2,n.y2=s),n.height=n.y2-n.y):n.y=n.y2-(n.height||0)),t.yc&&(n.y=n.yc-(n.height||0)/2)}var Constants={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Ops={"*":(n,t)=>n*t,"+":(n,t)=>n+t,"-":(n,t)=>n-t,"/":(n,t)=>n/t,"%":(n,t)=>n%t,">":(n,t)=>n>t,"<":(n,t)=>n<t,"<=":(n,t)=>n<=t,">=":(n,t)=>n>=t,"==":(n,t)=>n==t,"!=":(n,t)=>n!=t,"===":(n,t)=>n===t,"!==":(n,t)=>n!==t,"&":(n,t)=>n&t,"|":(n,t)=>n|t,"^":(n,t)=>n^t,"<<":(n,t)=>n<<t,">>":(n,t)=>n>>t,">>>":(n,t)=>n>>>t},Unary={"+":n=>+n,"-":n=>-n,"~":n=>~n,"!":n=>!n};const slice=Array.prototype.slice,apply=(n,t,i)=>{const s=i?i(t[0]):t[0];return s[n].apply(s,slice.call(t,1))},datetime=(n,t,i,s,o,f,d)=>new Date(n,t||0,i??1,s||0,o||0,f||0,d||0);var Functions={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(n,t,i)=>Math.max(t,Math.min(i,n)),now:Date.now,utc:Date.UTC,datetime,date:n=>new Date(n).getDate(),day:n=>new Date(n).getDay(),year:n=>new Date(n).getFullYear(),month:n=>new Date(n).getMonth(),hours:n=>new Date(n).getHours(),minutes:n=>new Date(n).getMinutes(),seconds:n=>new Date(n).getSeconds(),milliseconds:n=>new Date(n).getMilliseconds(),time:n=>new Date(n).getTime(),timezoneoffset:n=>new Date(n).getTimezoneOffset(),utcdate:n=>new Date(n).getUTCDate(),utcday:n=>new Date(n).getUTCDay(),utcyear:n=>new Date(n).getUTCFullYear(),utcmonth:n=>new Date(n).getUTCMonth(),utchours:n=>new Date(n).getUTCHours(),utcminutes:n=>new Date(n).getUTCMinutes(),utcseconds:n=>new Date(n).getUTCSeconds(),utcmilliseconds:n=>new Date(n).getUTCMilliseconds(),length:n=>n.length,join:function(){return apply("join",arguments)},indexof:function(){return apply("indexOf",arguments)},lastindexof:function(){return apply("lastIndexOf",arguments)},slice:function(){return apply("slice",arguments)},reverse:n=>n.slice().reverse(),sort:n=>n.slice().sort(ascending$8),parseFloat,parseInt,upper:n=>String(n).toUpperCase(),lower:n=>String(n).toLowerCase(),substring:function(){return apply("substring",arguments,String)},split:function(){return apply("split",arguments,String)},replace:function(){return apply("replace",arguments,String)},trim:n=>String(n).trim(),btoa:n=>btoa(n),atob:n=>atob(n),regexp:RegExp,test:(n,t)=>RegExp(n).test(t)};const EventFunctions=["view","item","group","xy","x","y"],DisallowedMethods=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&DisallowedMethods.add(setImmediate);const Visitors={Literal:(n,t)=>t.value,Identifier:(n,t)=>{const i=t.name;return n.memberDepth>0?i:i==="datum"?n.datum:i==="event"?n.event:i==="item"?n.item:Constants[i]||n.params["$"+i]},MemberExpression:(n,t)=>{const i=!t.computed,s=n(t.object);i&&(n.memberDepth+=1);const o=n(t.property);if(i&&(n.memberDepth-=1),DisallowedMethods.has(s[o])){console.error(`Prevented interpretation of member "${o}" which could lead to insecure code execution`);return}return s[o]},CallExpression:(n,t)=>{const i=t.arguments;let s=t.callee.name;return s.startsWith("_")&&(s=s.slice(1)),s==="if"?n(i[0])?n(i[1]):n(i[2]):(n.fn[s]||Functions[s]).apply(n.fn,i.map(n))},ArrayExpression:(n,t)=>t.elements.map(n),BinaryExpression:(n,t)=>Ops[t.operator](n(t.left),n(t.right)),UnaryExpression:(n,t)=>Unary[t.operator](n(t.argument)),ConditionalExpression:(n,t)=>n(t.test)?n(t.consequent):n(t.alternate),LogicalExpression:(n,t)=>t.operator==="&&"?n(t.left)&&n(t.right):n(t.left)||n(t.right),ObjectExpression:(n,t)=>t.properties.reduce((i,s)=>{n.memberDepth+=1;const o=n(s.key);return n.memberDepth-=1,DisallowedMethods.has(n(s.value))?console.error(`Prevented interpretation of property "${o}" which could lead to insecure code execution`):i[o]=n(s.value),i},{})};function interpret(n,t,i,s,o,f){const d=p=>Visitors[p.type](d,p);return d.memberDepth=0,d.fn=Object.create(t),d.params=i,d.datum=s,d.event=o,d.item=f,EventFunctions.forEach(p=>d.fn[p]=function(){return o.vega[p](...arguments)}),d(n)}var expression$1={operator(n,t){const i=t.ast,s=n.functions;return o=>interpret(i,s,o)},parameter(n,t){const i=t.ast,s=n.functions;return(o,f)=>interpret(i,s,f,o)},event(n,t){const i=t.ast,s=n.functions;return o=>interpret(i,s,void 0,void 0,o)},handler(n,t){const i=t.ast,s=n.functions;return(o,f)=>{const d=f.item&&f.item.datum;return interpret(i,s,o,d,f)}},encode(n,t){const{marktype:i,channels:s}=t,o=n.functions,f=i==="group"||i==="image"||i==="rect";return(d,p)=>{const v=d.datum;let _=0,k;for(const P in s)k=interpret(s[P].ast,o,p,v,void 0,d),d[P]!==k&&(d[P]=k,_=1);return i!=="rule"&&adjustSpatial(d,s,f),_}}};const version$4="5.23.0",pkg$1={version:version$4};function isLogicalOr(n){return hasProperty(n,"or")}function isLogicalAnd(n){return hasProperty(n,"and")}function isLogicalNot(n){return hasProperty(n,"not")}function forEachLeaf(n,t){if(isLogicalNot(n))forEachLeaf(n.not,t);else if(isLogicalAnd(n))for(const i of n.and)forEachLeaf(i,t);else if(isLogicalOr(n))for(const i of n.or)forEachLeaf(i,t);else t(n)}function normalizeLogicalComposition(n,t){return isLogicalNot(n)?{not:normalizeLogicalComposition(n.not,t)}:isLogicalAnd(n)?{and:n.and.map(i=>normalizeLogicalComposition(i,t))}:isLogicalOr(n)?{or:n.or.map(i=>normalizeLogicalComposition(i,t))}:t(n)}const duplicate=structuredClone;function never(n){throw new Error(n)}function pick(n,t){const i={};for(const s of t)has$1(n,s)&&(i[s]=n[s]);return i}function omit(n,t){const i={...n};for(const s of t)delete i[s];return i}Set.prototype.toJSON=function(){return`Set(${[...this].map(n=>stringify(n)).join(",")})`};function hash(n){if(isNumber$1(n))return n;const t=isString(n)?n:stringify(n);if(t.length<250)return t;let i=0;for(let s=0;s<t.length;s++){const o=t.charCodeAt(s);i=(i<<5)-i+o,i=i&i}return i}function isNullOrFalse(n){return n===!1||n===null}function contains(n,t){return n.includes(t)}function some(n,t){let i=0;for(const[s,o]of n.entries())if(t(o,s,i++))return!0;return!1}function every(n,t){let i=0;for(const[s,o]of n.entries())if(!t(o,s,i++))return!1;return!0}function mergeDeep$1(n,...t){for(const i of t)deepMerge_$1(n,i??{});return n}function deepMerge_$1(n,t){for(const i of keys(t))writeConfig(n,i,t[i],!0)}function unique(n,t){const i=[],s={};let o;for(const f of n)o=t(f),!(o in s)&&(s[o]=1,i.push(f));return i}function isEqual(n,t){const i=keys(n),s=keys(t);if(i.length!==s.length)return!1;for(const o of i)if(n[o]!==t[o])return!1;return!0}function setEqual(n,t){if(n.size!==t.size)return!1;for(const i of n)if(!t.has(i))return!1;return!0}function hasIntersection(n,t){for(const i of n)if(t.has(i))return!0;return!1}function prefixGenerator(n){const t=new Set;for(const i of n){const o=splitAccessPath(i).map((d,p)=>p===0?d:`[${d}]`),f=o.map((d,p)=>o.slice(0,p+1).join(""));for(const d of f)t.add(d)}return t}function fieldIntersection(n,t){return n===void 0||t===void 0?!0:hasIntersection(prefixGenerator(n),prefixGenerator(t))}function isEmpty(n){return keys(n).length===0}const keys=Object.keys,vals=Object.values,entries$1=Object.entries;function isBoolean(n){return n===!0||n===!1}function varName(n){const t=n.replace(/\W/g,"_");return(n.match(/^\d+/)?"_":"")+t}function logicalExpr(n,t){return isLogicalNot(n)?`!(${logicalExpr(n.not,t)})`:isLogicalAnd(n)?`(${n.and.map(i=>logicalExpr(i,t)).join(") && (")})`:isLogicalOr(n)?`(${n.or.map(i=>logicalExpr(i,t)).join(") || (")})`:t(n)}function deleteNestedProperty(n,t){if(t.length===0)return!0;const i=t.shift();return i in n&&deleteNestedProperty(n[i],t)&&delete n[i],isEmpty(n)}function titleCase(n){return n.charAt(0).toUpperCase()+n.substr(1)}function accessPathWithDatum(n,t="datum"){const i=splitAccessPath(n),s=[];for(let o=1;o<=i.length;o++){const f=`[${i.slice(0,o).map($).join("][")}]`;s.push(`${t}${f}`)}return s.join(" && ")}function flatAccessWithDatum(n,t="datum"){return`${t}[${$(splitAccessPath(n).join("."))}]`}function accessWithDatumToUnescapedPath(n){return`datum['${n.replaceAll("'","\\'")}']`}function escapePathAccess(n){return n.replace(/(\[|\]|\.|'|")/g,"\\$1")}function replacePathInField(n){return`${splitAccessPath(n).map(escapePathAccess).join("\\.")}`}function replaceAll(n,t,i){return n.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),i)}function removePathFromField(n){return`${splitAccessPath(n).join(".")}`}function accessPathDepth(n){return n?splitAccessPath(n).length:0}function getFirstDefined(...n){return n.find(t=>t!==void 0)}let idCounter=42;function uniqueId(n){const t=++idCounter;return n?String(n)+t:t}function resetIdCounter(){idCounter=42}function internalField(n){return isInternalField(n)?n:`__${n}`}function isInternalField(n){return n.startsWith("__")}function normalizeAngle(n){if(n!==void 0)return(n%360+360)%360}function isNumeric(n){return isNumber$1(n)?!0:!isNaN(n)&&!isNaN(parseFloat(n))}const clonedProto=Object.getPrototypeOf(structuredClone({}));function deepEqual(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor.name!==t.constructor.name)return!1;let i,s;if(Array.isArray(n)){if(i=n.length,i!=t.length)return!1;for(s=i;s--!==0;)if(!deepEqual(n[s],t[s]))return!1;return!0}if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(const f of n.entries())if(!t.has(f[0]))return!1;for(const f of n.entries())if(!deepEqual(f[1],t.get(f[0])))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(const f of n.entries())if(!t.has(f[0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(t)){if(i=n.length,i!=t.length)return!1;for(s=i;s--!==0;)if(n[s]!==t[s])return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf&&n.valueOf!==clonedProto.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString&&n.toString!==clonedProto.toString)return n.toString()===t.toString();const o=Object.keys(n);if(i=o.length,i!==Object.keys(t).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[s]))return!1;for(s=i;s--!==0;){const f=o[s];if(!deepEqual(n[f],t[f]))return!1}return!0}return n!==n&&t!==t}function stringify(n){const t=[];return function i(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s===void 0)return;if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);let o,f;if(Array.isArray(s)){for(f="[",o=0;o<s.length;o++)o&&(f+=","),f+=i(s[o])||"null";return f+"]"}if(s===null)return"null";if(t.includes(s))throw new TypeError("Converting circular structure to JSON");const d=t.push(s)-1,p=Object.keys(s).sort();for(f="",o=0;o<p.length;o++){const v=p[o],_=i(s[v]);_&&(f&&(f+=","),f+=JSON.stringify(v)+":"+_)}return t.splice(d,1),`{${f}}`}(n)}function hasProperty(n,t){return isObject(n)&&has$1(n,t)&&n[t]!==void 0}const ROW="row",COLUMN="column",FACET="facet",X$1="x",Y$1="y",X2$1="x2",Y2$1="y2",XOFFSET="xOffset",YOFFSET="yOffset",RADIUS="radius",RADIUS2="radius2",THETA="theta",THETA2="theta2",LATITUDE="latitude",LONGITUDE="longitude",LATITUDE2="latitude2",LONGITUDE2="longitude2",TIME="time",COLOR="color",FILL="fill",STROKE="stroke",SHAPE="shape",SIZE="size",ANGLE="angle",OPACITY="opacity",FILLOPACITY="fillOpacity",STROKEOPACITY="strokeOpacity",STROKEWIDTH="strokeWidth",STROKEDASH="strokeDash",TEXT$1="text",ORDER="order",DETAIL="detail",KEY="key",TOOLTIP="tooltip",HREF="href",URL$1="url",DESCRIPTION="description",POSITION_CHANNEL_INDEX={x:1,y:1,x2:1,y2:1},POLAR_POSITION_CHANNEL_INDEX={theta:1,theta2:1,radius:1,radius2:1};function isPolarPositionChannel(n){return has$1(POLAR_POSITION_CHANNEL_INDEX,n)}const GEO_POSIITON_CHANNEL_INDEX={longitude:1,longitude2:1,latitude:1,latitude2:1};function getPositionChannelFromLatLong(n){switch(n){case LATITUDE:return"y";case LATITUDE2:return"y2";case LONGITUDE:return"x";case LONGITUDE2:return"x2"}}function isGeoPositionChannel(n){return has$1(GEO_POSIITON_CHANNEL_INDEX,n)}const GEOPOSITION_CHANNELS=keys(GEO_POSIITON_CHANNEL_INDEX),UNIT_CHANNEL_INDEX={...POSITION_CHANNEL_INDEX,...POLAR_POSITION_CHANNEL_INDEX,...GEO_POSIITON_CHANNEL_INDEX,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function isColorChannel(n){return n===COLOR||n===FILL||n===STROKE}const FACET_CHANNEL_INDEX={row:1,column:1,facet:1},FACET_CHANNELS=keys(FACET_CHANNEL_INDEX),CHANNEL_INDEX={...UNIT_CHANNEL_INDEX,...FACET_CHANNEL_INDEX},CHANNELS=keys(CHANNEL_INDEX),{order:_o,detail:_d,tooltip:_tt1,...SINGLE_DEF_CHANNEL_INDEX}=CHANNEL_INDEX,{row:_r,column:_c,facet:_f,...SINGLE_DEF_UNIT_CHANNEL_INDEX}=SINGLE_DEF_CHANNEL_INDEX;function isSingleDefUnitChannel(n){return has$1(SINGLE_DEF_UNIT_CHANNEL_INDEX,n)}function isChannel(n){return has$1(CHANNEL_INDEX,n)}const SECONDARY_RANGE_CHANNEL=[X2$1,Y2$1,LATITUDE2,LONGITUDE2,THETA2,RADIUS2];function isSecondaryRangeChannel(n){return getMainRangeChannel(n)!==n}function getMainRangeChannel(n){switch(n){case X2$1:return X$1;case Y2$1:return Y$1;case LATITUDE2:return LATITUDE;case LONGITUDE2:return LONGITUDE;case THETA2:return THETA;case RADIUS2:return RADIUS}return n}function getVgPositionChannel(n){if(isPolarPositionChannel(n))switch(n){case THETA:return"startAngle";case THETA2:return"endAngle";case RADIUS:return"outerRadius";case RADIUS2:return"innerRadius"}return n}function getSecondaryRangeChannel(n){switch(n){case X$1:return X2$1;case Y$1:return Y2$1;case LATITUDE:return LATITUDE2;case LONGITUDE:return LONGITUDE2;case THETA:return THETA2;case RADIUS:return RADIUS2}}function getSizeChannel(n){switch(n){case X$1:case X2$1:return"width";case Y$1:case Y2$1:return"height"}}function getOffsetChannel(n){switch(n){case X$1:return"xOffset";case Y$1:return"yOffset";case X2$1:return"x2Offset";case Y2$1:return"y2Offset";case THETA:return"thetaOffset";case RADIUS:return"radiusOffset";case THETA2:return"theta2Offset";case RADIUS2:return"radius2Offset"}}function getOffsetScaleChannel(n){switch(n){case X$1:return"xOffset";case Y$1:return"yOffset"}}function getMainChannelFromOffsetChannel(n){switch(n){case"xOffset":return"x";case"yOffset":return"y"}}const UNIT_CHANNELS=keys(UNIT_CHANNEL_INDEX),{x:_x,y:_y,x2:_x2,y2:_y2,xOffset:_xo,yOffset:_yo,latitude:_latitude,longitude:_longitude,latitude2:_latitude2,longitude2:_longitude2,theta:_theta,theta2:_theta2,radius:_radius,radius2:_radius2,...NONPOSITION_CHANNEL_INDEX}=UNIT_CHANNEL_INDEX,NONPOSITION_CHANNELS=keys(NONPOSITION_CHANNEL_INDEX),POSITION_SCALE_CHANNEL_INDEX={x:1,y:1},POSITION_SCALE_CHANNELS=keys(POSITION_SCALE_CHANNEL_INDEX);function isXorY(n){return has$1(POSITION_SCALE_CHANNEL_INDEX,n)}const POLAR_POSITION_SCALE_CHANNEL_INDEX={theta:1,radius:1},POLAR_POSITION_SCALE_CHANNELS=keys(POLAR_POSITION_SCALE_CHANNEL_INDEX);function getPositionScaleChannel(n){return n==="width"?X$1:Y$1}const OFFSET_SCALE_CHANNEL_INDEX={xOffset:1,yOffset:1};function isXorYOffset(n){return has$1(OFFSET_SCALE_CHANNEL_INDEX,n)}const TIME_SCALE_CHANNEL_INDEX={time:1};function isTime(n){return n in TIME_SCALE_CHANNEL_INDEX}const{text:_t,tooltip:_tt,href:_hr,url:_u,description:_al,detail:_dd,key:_k,order:_oo,...NONPOSITION_SCALE_CHANNEL_INDEX}=NONPOSITION_CHANNEL_INDEX,NONPOSITION_SCALE_CHANNELS=keys(NONPOSITION_SCALE_CHANNEL_INDEX);function isNonPositionScaleChannel(n){return has$1(NONPOSITION_CHANNEL_INDEX,n)}function supportLegend(n){switch(n){case COLOR:case FILL:case STROKE:case SIZE:case SHAPE:case OPACITY:case STROKEWIDTH:case STROKEDASH:return!0;case FILLOPACITY:case STROKEOPACITY:case ANGLE:case TIME:return!1}}const SCALE_CHANNEL_INDEX={...POSITION_SCALE_CHANNEL_INDEX,...POLAR_POSITION_SCALE_CHANNEL_INDEX,...OFFSET_SCALE_CHANNEL_INDEX,...NONPOSITION_SCALE_CHANNEL_INDEX},SCALE_CHANNELS=keys(SCALE_CHANNEL_INDEX);function isScaleChannel(n){return has$1(SCALE_CHANNEL_INDEX,n)}function supportMark(n,t){return getSupportedMark(n)[t]}const ALL_MARKS={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:_g,...ALL_MARKS_EXCEPT_GEOSHAPE}=ALL_MARKS;function getSupportedMark(n){switch(n){case COLOR:case FILL:case STROKE:case DESCRIPTION:case DETAIL:case KEY:case TOOLTIP:case HREF:case ORDER:case OPACITY:case FILLOPACITY:case STROKEOPACITY:case STROKEWIDTH:case FACET:case ROW:case COLUMN:return ALL_MARKS;case X$1:case Y$1:case XOFFSET:case YOFFSET:case LATITUDE:case LONGITUDE:case TIME:return ALL_MARKS_EXCEPT_GEOSHAPE;case X2$1:case Y2$1:case LATITUDE2:case LONGITUDE2:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case SIZE:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case STROKEDASH:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case SHAPE:return{point:"always",geoshape:"always"};case TEXT$1:return{text:"always"};case ANGLE:return{point:"always",square:"always",text:"always"};case URL$1:return{image:"always"};case THETA:return{text:"always",arc:"always"};case RADIUS:return{text:"always",arc:"always"};case THETA2:case RADIUS2:return{arc:"always"}}}function rangeType(n){switch(n){case X$1:case Y$1:case THETA:case RADIUS:case XOFFSET:case YOFFSET:case SIZE:case ANGLE:case STROKEWIDTH:case OPACITY:case FILLOPACITY:case STROKEOPACITY:case TIME:case X2$1:case Y2$1:case THETA2:case RADIUS2:return;case FACET:case ROW:case COLUMN:case SHAPE:case STROKEDASH:case TEXT$1:case TOOLTIP:case HREF:case URL$1:case DESCRIPTION:return"discrete";case COLOR:case FILL:case STROKE:return"flexible";case LATITUDE:case LONGITUDE:case LATITUDE2:case LONGITUDE2:case DETAIL:case KEY:case ORDER:return}}const AGGREGATE_OP_INDEX={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},MULTIDOMAIN_SORT_OP_INDEX={count:1,min:1,max:1};function isArgminDef(n){return hasProperty(n,"argmin")}function isArgmaxDef(n){return hasProperty(n,"argmax")}function isAggregateOp(n){return isString(n)&&has$1(AGGREGATE_OP_INDEX,n)}const COUNTING_OPS=new Set(["count","valid","missing","distinct"]);function isCountingAggregateOp(n){return isString(n)&&COUNTING_OPS.has(n)}function isMinMaxOp(n){return isString(n)&&contains(["min","max"],n)}const SUM_OPS=new Set(["count","sum","distinct","valid","missing"]),SHARED_DOMAIN_OPS=new Set(["mean","average","median","q1","q3","min","max"]);function binToString(n){return isBoolean$2(n)&&(n=normalizeBin(n,void 0)),"bin"+keys(n).map(t=>isParameterExtent(n[t])?varName(`_${t}_${entries$1(n[t])}`):varName(`_${t}_${n[t]}`)).join("")}function isBinning(n){return n===!0||isBinParams(n)&&!n.binned}function isBinned(n){return n==="binned"||isBinParams(n)&&n.binned===!0}function isBinParams(n){return isObject(n)}function isParameterExtent(n){return hasProperty(n,"param")}function autoMaxBins(n){switch(n){case ROW:case COLUMN:case SIZE:case COLOR:case FILL:case STROKE:case STROKEWIDTH:case OPACITY:case FILLOPACITY:case STROKEOPACITY:case SHAPE:return 6;case STROKEDASH:return 4;default:return 10}}function isExprRef(n){return hasProperty(n,"expr")}function replaceExprRef(n,{level:t}={level:0}){const i=keys(n||{}),s={};for(const o of i)s[o]=t===0?signalRefOrValue(n[o]):replaceExprRef(n[o],{level:t-1});return s}function extractTitleConfig(n){const{anchor:t,frame:i,offset:s,orient:o,angle:f,limit:d,color:p,subtitleColor:v,subtitleFont:_,subtitleFontSize:k,subtitleFontStyle:P,subtitleFontWeight:L,subtitleLineHeight:G,subtitlePadding:Z,...W}=n,j={...W,...p?{fill:p}:{}},H={...t?{anchor:t}:{},...i?{frame:i}:{},...s?{offset:s}:{},...o?{orient:o}:{},...f!==void 0?{angle:f}:{},...d!==void 0?{limit:d}:{}},me={...v?{subtitleColor:v}:{},..._?{subtitleFont:_}:{},...k?{subtitleFontSize:k}:{},...P?{subtitleFontStyle:P}:{},...L?{subtitleFontWeight:L}:{},...G?{subtitleLineHeight:G}:{},...Z?{subtitlePadding:Z}:{}},$e=pick(n,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:j,subtitleMarkConfig:$e,nonMarkTitleProperties:H,subtitle:me}}function isText(n){return isString(n)||isArray(n)&&isString(n[0])}function isSignalRef(n){return hasProperty(n,"signal")}function isVgRangeStep(n){return hasProperty(n,"step")}function isDataRefUnionedDomain(n){return isArray(n)?!1:hasProperty(n,"fields")&&!hasProperty(n,"data")}function isFieldRefUnionDomain(n){return isArray(n)?!1:hasProperty(n,"fields")&&hasProperty(n,"data")}function isDataRefDomain(n){return isArray(n)?!1:hasProperty(n,"field")&&hasProperty(n,"data")}const VG_MARK_CONFIG_INDEX={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},VG_MARK_CONFIGS=keys(VG_MARK_CONFIG_INDEX),VG_MARK_INDEX={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},VG_CORNERRADIUS_CHANNELS=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function signalOrValueRefWithCondition(n){const t=isArray(n.condition)?n.condition.map(conditionalSignalRefOrValue):conditionalSignalRefOrValue(n.condition);return{...signalRefOrValue(n),condition:t}}function signalRefOrValue(n){if(isExprRef(n)){const{expr:t,...i}=n;return{signal:t,...i}}return n}function conditionalSignalRefOrValue(n){if(isExprRef(n)){const{expr:t,...i}=n;return{signal:t,...i}}return n}function signalOrValueRef(n){if(isExprRef(n)){const{expr:t,...i}=n;return{signal:t,...i}}return isSignalRef(n)?n:n!==void 0?{value:n}:void 0}function exprFromSignalRefOrValue(n){return isSignalRef(n)?n.signal:$(n)}function exprFromValueRefOrSignalRef(n){return isSignalRef(n)?n.signal:$(n.value)}function signalOrStringValue(n){return isSignalRef(n)?n.signal:n==null?null:$(n)}function applyMarkConfig(n,t,i){for(const s of i){const o=getMarkConfig(s,t.markDef,t.config);o!==void 0&&(n[s]=signalOrValueRef(o))}return n}function getStyles(n){return[].concat(n.type,n.style??[])}function getMarkPropOrConfig(n,t,i,s={}){const{vgChannel:o,ignoreVgConfig:f}=s;return o&&hasProperty(t,o)?t[o]:t[n]!==void 0?t[n]:f&&(!o||o===n)?void 0:getMarkConfig(n,t,i,s)}function getMarkConfig(n,t,i,{vgChannel:s}={}){const o=getMarkStyleConfig(n,t,i.style);return getFirstDefined(s?o:void 0,o,s?i[t.type][s]:void 0,i[t.type][n],s?i.mark[s]:i.mark[n])}function getMarkStyleConfig(n,t,i){return getStyleConfig(n,getStyles(t),i)}function getStyleConfig(n,t,i){t=array$5(t);let s;for(const o of t){const f=i[o];hasProperty(f,n)&&(s=f[n])}return s}function sortParams(n,t){return array$5(n).reduce((i,s)=>(i.field.push(vgField(s,t)),i.order.push(s.sort??"ascending"),i),{field:[],order:[]})}function mergeTitleFieldDefs(n,t){const i=[...n];return t.forEach(s=>{for(const o of i)if(deepEqual(o,s))return;i.push(s)}),i}function mergeTitle(n,t){return deepEqual(n,t)||!t?n:n?[...array$5(n),...array$5(t)].join(", "):t}function mergeTitleComponent(n,t){const i=n.value,s=t.value;if(i==null||s===null)return{explicit:n.explicit,value:null};if((isText(i)||isSignalRef(i))&&(isText(s)||isSignalRef(s)))return{explicit:n.explicit,value:mergeTitle(i,s)};if(isText(i)||isSignalRef(i))return{explicit:n.explicit,value:i};if(isText(s)||isSignalRef(s))return{explicit:n.explicit,value:s};if(!isText(i)&&!isSignalRef(i)&&!isText(s)&&!isSignalRef(s))return{explicit:n.explicit,value:mergeTitleFieldDefs(i,s)};throw new Error("It should never reach here")}function invalidSpec(n){return`Invalid specification ${stringify(n)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const FIT_NON_SINGLE='Autosize "fit" only works for single views and layered views.';function containerSizeNonSingle(n){return`${n=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function containerSizeNotCompatibleWithAutosize(n){const t=n=="width"?"Width":"Height",i=n=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${i}".`}function droppingFit(n){return n?`Dropping "fit-${n}" because spec has discrete ${getSizeChannel(n)}.`:'Dropping "fit" because spec has discrete size.'}function unknownField(n){return`Unknown field for ${n}. Cannot calculate view size.`}function cannotProjectOnChannelWithoutField(n){return`Cannot project a selection on encoding channel "${n}", which has no field.`}function cannotProjectAggregate(n,t){return`Cannot project a selection on encoding channel "${n}" as it uses an aggregate function ("${t}").`}function nearestNotSupportForContinuous(n){return`The "nearest" transform is not supported for ${n} marks.`}function selectionNotSupported(n){return`Selection not supported for ${n} yet.`}function selectionNotFound(n){return`Cannot find a selection named "${n}".`}const SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.",SEQUENTIAL_SCALE_DEPRECATED="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",LEGEND_BINDINGS_MUST_HAVE_PROJECTION="Legend bindings are only supported for selections over an individual field or encoding channel.";function cannotLookupVariableParameter(n){return`Lookups can only be performed on selection parameters. "${n}" is a variable parameter.`}function noSameUnitLookup(n){return`Cannot define and lookup the "${n}" selection in the same view. Try moving the lookup into a second, layered view?`}const NEEDS_SAME_SELECTION="The same selection must be used to override scale domains in a layered view.",INTERVAL_INITIALIZED_WITH_POS='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function noSuchRepeatedValue(n){return`Unknown repeated value "${n}".`}function columnsNotSupportByRowCol(n){return`The "columns" property cannot be used when "${n}" has nested row/column.`}const MULTIPLE_TIMER_ANIMATION_SELECTION="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",MULTI_VIEW_ANIMATION_UNSUPPORTED="Animation involving facet, layer, or concat is currently unsupported.";function selectionAsScaleDomainWithoutField(n){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${$(n)}.`}function selectionAsScaleDomainWrongEncodings(n,t,i,s){return(n.length?"Multiple ":"No ")+`matching ${$(t)} encoding found for selection ${$(i.param)}. Using "field": ${$(s)}.`}const CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function unrecognizedParse(n){return`Unrecognized parse "${n}".`}function differentParse(n,t,i){return`An ancestor parsed field "${n}" as ${i} but a child wants to parse the field as ${t}.`}const ADD_SAME_CHILD_TWICE="Attempt to add the same child twice.";function invalidTransformIgnored(n){return`Ignoring an invalid transform: ${stringify(n)}.`}const NO_FIELDS_NEEDS_AS='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function customFormatTypeNotAllowed(n){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${n} are dropped.`}function projectionOverridden(n){const{parentProjection:t,projection:i}=n;return`Layer's shared projection ${stringify(t)} is overridden by a child projection ${stringify(i)}.`}const REPLACE_ANGLE_WITH_THETA="Arc marks uses theta channel rather than angle, replacing angle with theta.";function offsetNestedInsideContinuousPositionScaleDropped(n){return`${n}Offset dropped because ${n} is continuous`}function primitiveChannelDef(n,t,i){return`Channel ${n} is a ${t}. Converted to {value: ${stringify(i)}}.`}function invalidFieldType(n){return`Invalid field type "${n}".`}function invalidFieldTypeForCountAggregate(n,t){return`Invalid field type "${n}" for aggregate: "${t}", using "quantitative" instead.`}function invalidAggregate(n){return`Invalid aggregation operator "${n}".`}function droppingColor(n,t){const{fill:i,stroke:s}=t;return`Dropping color ${n} as the plot also has ${i&&s?"fill and stroke":i?"fill":"stroke"}.`}function relativeBandSizeNotSupported(n){return`Position range does not support relative band size for ${n}.`}function emptyFieldDef(n,t){return`Dropping ${stringify(n)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const LINE_WITH_VARYING_SIZE="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function incompatibleChannel(n,t,i){return`${n} dropped as it is incompatible with "${t}".`}function invalidEncodingChannel(n){return`${n}-encoding is dropped as ${n} is not a valid encoding channel.`}function channelShouldBeDiscrete(n){return`${n} encoding should be discrete (ordinal / nominal / binned).`}function channelShouldBeDiscreteOrDiscretizing(n){return`${n} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function facetChannelDropped(n){return`Facet encoding dropped as ${n.join(" and ")} ${n.length>1?"are":"is"} also specified.`}function discreteChannelCannotEncode(n,t){return`Using discrete channel "${n}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function rangeMarkAlignmentCannotBeExpression(n){return`The ${n} for range marks cannot be an expression`}function lineWithRange(n,t){return`Line mark is for continuous lines and thus cannot be used with ${n&&t?"x2 and y2":n?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function orientOverridden(n,t){return`Specified orient "${n}" overridden with "${t}".`}function cannotUseScalePropertyWithNonColor(n){return`Cannot use the scale property "${n}" with non-color channel.`}function cannotUseRelativeBandSizeWithNonBandScale(n){return`Cannot use the relative band size with ${n} scale.`}function unaggregateDomainHasNoEffectForRawField(n){return`Using unaggregated domain with raw field has no effect (${stringify(n)}).`}function unaggregateDomainWithNonSharedDomainOp(n){return`Unaggregated domain not applicable for "${n}" since it produces values outside the origin domain of the source data.`}function unaggregatedDomainWithLogScale(n){return`Unaggregated domain is currently unsupported for log scale (${stringify(n)}).`}function cannotApplySizeToNonOrientedMark(n){return`Cannot apply size to non-oriented mark "${n}".`}function scaleTypeNotWorkWithChannel(n,t,i){return`Channel "${n}" does not work with "${t}" scale. We are using "${i}" scale instead.`}function scaleTypeNotWorkWithFieldDef(n,t){return`FieldDef does not work with "${n}" scale. We are using "${t}" scale instead.`}function scalePropertyNotWorkWithScaleType(n,t,i){return`${i}-scale's "${t}" is dropped as it does not work with ${n} scale.`}function stepDropped(n){return`The step for "${n}" is dropped because the ${n==="width"?"x":"y"} is continuous.`}function mergeConflictingProperty(n,t,i,s){return`Conflicting ${t.toString()} property "${n.toString()}" (${stringify(i)} and ${stringify(s)}). Using ${stringify(i)}.`}function mergeConflictingDomainProperty(n,t,i,s){return`Conflicting ${t.toString()} property "${n.toString()}" (${stringify(i)} and ${stringify(s)}). Using the union of the two domains.`}function independentScaleMeansIndependentGuide(n){return`Setting the scale to be independent for "${n}" means we also have to set the guide (axis or legend) to be independent.`}function domainSortDropped(n){return`Dropping sort property ${stringify(n)} as unioned domains only support boolean or op "count", "min", and "max".`}const MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",FACETED_INDEPENDENT_DIFFERENT_SOURCES="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",FACETED_INDEPENDENT_SAME_SOURCE="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function cannotStackRangedMark(n){return`Cannot stack "${n}" if there is already "${n}2".`}function stackNonLinearScale(n){return`Stack is applied to a non-linear scale (${n}).`}function stackNonSummativeAggregate(n){return`Stacking is applied even though the aggregate function is non-summative ("${n}").`}function invalidTimeUnit(n,t){return`Invalid ${n}: ${stringify(t)}.`}function droppedDay(n){return`Dropping day from datetime ${stringify(n)} as day cannot be combined with other units.`}function errorBarCenterAndExtentAreNotNeeded(n,t){return`${t?"extent ":""}${t&&n?"and ":""}${n?"center ":""}${t&&n?"are ":"is "}not needed when data are aggregated.`}function errorBarCenterIsUsedWithWrongExtent(n,t,i){return`${n} is not usually used with ${t} for ${i}.`}function errorBarContinuousAxisHasCustomizedAggregate(n,t){return`Continuous axis should not have customized aggregation function ${n}; ${t} already agregates the axis.`}function errorBand1DNotSupport(n){return`1D error band does not support ${n}.`}function channelRequiredForBinned(n){return`Channel ${n} is required for "binned" bin.`}function channelShouldNotBeUsedForBinned(n){return`Channel ${n} should not be used with "binned" bin.`}function domainRequiredForThresholdScale(n){return`Domain for ${n} is required for threshold scale.`}const main=logger(Warn);let current=main;function set(n){return current=n,current}function reset(){return current=main,current}function error(...n){current.error(...n)}function warn(...n){current.warn(...n)}function debug(...n){current.debug(...n)}function isDateTime(n){if(n&&isObject(n)){for(const t of TIMEUNIT_PARTS)if(hasProperty(n,t))return!0}return!1}const MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],SHORT_MONTHS=MONTHS.map(n=>n.substr(0,3)),DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],SHORT_DAYS=DAYS.map(n=>n.substr(0,3));function normalizeQuarter(n){if(isNumeric(n)&&(n=+n),isNumber$1(n))return n>4&&warn(invalidTimeUnit("quarter",n)),n-1;throw new Error(invalidTimeUnit("quarter",n))}function normalizeMonth(n){if(isNumeric(n)&&(n=+n),isNumber$1(n))return n-1;{const t=n.toLowerCase(),i=MONTHS.indexOf(t);if(i!==-1)return i;const s=t.substr(0,3),o=SHORT_MONTHS.indexOf(s);if(o!==-1)return o;throw new Error(invalidTimeUnit("month",n))}}function normalizeDay(n){if(isNumeric(n)&&(n=+n),isNumber$1(n))return n%7;{const t=n.toLowerCase(),i=DAYS.indexOf(t);if(i!==-1)return i;const s=t.substr(0,3),o=SHORT_DAYS.indexOf(s);if(o!==-1)return o;throw new Error(invalidTimeUnit("day",n))}}function dateTimeParts(n,t){const i=[];if(t&&n.day!==void 0&&keys(n).length>1&&(warn(droppedDay(n)),n=duplicate(n),delete n.day),n.year!==void 0?i.push(n.year):i.push(2012),n.month!==void 0){const s=t?normalizeMonth(n.month):n.month;i.push(s)}else if(n.quarter!==void 0){const s=t?normalizeQuarter(n.quarter):n.quarter;i.push(isNumber$1(s)?s*3:`${s}*3`)}else i.push(0);if(n.date!==void 0)i.push(n.date);else if(n.day!==void 0){const s=t?normalizeDay(n.day):n.day;i.push(isNumber$1(s)?s+1:`${s}+1`)}else i.push(1);for(const s of["hours","minutes","seconds","milliseconds"]){const o=n[s];i.push(typeof o>"u"?0:o)}return i}function dateTimeToExpr(n){const i=dateTimeParts(n,!0).join(", ");return n.utc?`utc(${i})`:`datetime(${i})`}function dateTimeExprToExpr(n){const i=dateTimeParts(n,!1).join(", ");return n.utc?`utc(${i})`:`datetime(${i})`}function dateTimeToTimestamp(n){const t=dateTimeParts(n,!0);return n.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const LOCAL_SINGLE_TIMEUNIT_INDEX={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},TIMEUNIT_PARTS=keys(LOCAL_SINGLE_TIMEUNIT_INDEX);function isLocalSingleTimeUnit(n){return has$1(LOCAL_SINGLE_TIMEUNIT_INDEX,n)}function isBinnedTimeUnit(n){return isObject(n)?n.binned:isBinnedTimeUnitString(n)}function isBinnedTimeUnitString(n){return n&&n.startsWith("binned")}function isUTCTimeUnit(n){return n.startsWith("utc")}function getLocalTimeUnitFromUTCTimeUnit(n){return n.substring(3)}const VEGALITE_TIMEFORMAT={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function getTimeUnitParts(n){return TIMEUNIT_PARTS.filter(t=>containsTimeUnit(n,t))}function getSmallestTimeUnitPart(n){const t=getTimeUnitParts(n);return t[t.length-1]}function containsTimeUnit(n,t){const i=n.indexOf(t);return!(i<0||i>0&&t==="seconds"&&n.charAt(i-1)==="i"||n.length>i+3&&t==="day"&&n.charAt(i+3)==="o"||i>0&&t==="year"&&n.charAt(i-1)==="f")}function fieldExpr(n,t,{end:i}={end:!1}){const s=accessPathWithDatum(t),o=isUTCTimeUnit(n)?"utc":"";function f(v){return v==="quarter"?`(${o}quarter(${s})-1)`:`${o}${v}(${s})`}let d;const p={};for(const v of TIMEUNIT_PARTS)containsTimeUnit(n,v)&&(p[v]=f(v),d=v);return i&&(p[d]+="+1"),dateTimeExprToExpr(p)}function timeUnitSpecifierExpression(n){if(!n)return;const t=getTimeUnitParts(n);return`timeUnitSpecifier(${stringify(t)}, ${stringify(VEGALITE_TIMEFORMAT)})`}function formatExpression(n,t,i){if(!n)return;const s=timeUnitSpecifierExpression(n);return`${i||isUTCTimeUnit(n)?"utc":"time"}Format(${t}, ${s})`}function normalizeTimeUnit(n){if(!n)return;let t;return isString(n)?isBinnedTimeUnitString(n)?t={unit:n.substring(6),binned:!0}:t={unit:n}:isObject(n)&&(t={...n,...n.unit?{unit:n.unit}:{}}),isUTCTimeUnit(t.unit)&&(t.utc=!0,t.unit=getLocalTimeUnitFromUTCTimeUnit(t.unit)),t}function timeUnitToString(n){const{utc:t,...i}=normalizeTimeUnit(n);return i.unit?(t?"utc":"")+keys(i).map(s=>varName(`${s==="unit"?"":`_${s}_`}${i[s]}`)).join(""):(t?"utc":"")+"timeunit"+keys(i).map(s=>varName(`_${s}_${i[s]}`)).join("")}function durationExpr(n,t=i=>i){const i=normalizeTimeUnit(n),s=getSmallestTimeUnitPart(i.unit);if(s&&s!=="day"){const o={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:f,part:d}=getDateTimePartAndStep(s,i.step),p={...o,[d]:+o[d]+f};return`${t(dateTimeToExpr(p))} - ${t(dateTimeToExpr(o))}`}}const DATE_PARTS={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function isDatePart(n){return has$1(DATE_PARTS,n)}function getDateTimePartAndStep(n,t=1){if(isDatePart(n))return{part:n,step:t};switch(n){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function isSelectionPredicate(n){return hasProperty(n,"param")}function isFieldEqualPredicate(n){return!!(n!=null&&n.field)&&n.equal!==void 0}function isFieldLTPredicate(n){return!!(n!=null&&n.field)&&n.lt!==void 0}function isFieldLTEPredicate(n){return!!(n!=null&&n.field)&&n.lte!==void 0}function isFieldGTPredicate(n){return!!(n!=null&&n.field)&&n.gt!==void 0}function isFieldGTEPredicate(n){return!!(n!=null&&n.field)&&n.gte!==void 0}function isFieldRangePredicate(n){if(n!=null&&n.field){if(isArray(n.range)&&n.range.length===2)return!0;if(isSignalRef(n.range))return!0}return!1}function isFieldOneOfPredicate(n){return!!(n!=null&&n.field)&&(isArray(n.oneOf)||isArray(n.in))}function isFieldValidPredicate(n){return!!(n!=null&&n.field)&&n.valid!==void 0}function isFieldPredicate(n){return isFieldOneOfPredicate(n)||isFieldEqualPredicate(n)||isFieldRangePredicate(n)||isFieldLTPredicate(n)||isFieldGTPredicate(n)||isFieldLTEPredicate(n)||isFieldGTEPredicate(n)}function predicateValueExpr(n,t){return valueExpr(n,{timeUnit:t,wrapTime:!0})}function predicateValuesExpr(n,t){return n.map(i=>predicateValueExpr(i,t))}function fieldFilterExpression(n,t=!0){const{field:i}=n,s=normalizeTimeUnit(n.timeUnit),{unit:o,binned:f}=s||{},d=vgField(n,{expr:"datum"}),p=o?`time(${f?d:fieldExpr(o,i)})`:d;if(isFieldEqualPredicate(n))return`${p}===${predicateValueExpr(n.equal,o)}`;if(isFieldLTPredicate(n)){const v=n.lt;return`${p}<${predicateValueExpr(v,o)}`}else if(isFieldGTPredicate(n)){const v=n.gt;return`${p}>${predicateValueExpr(v,o)}`}else if(isFieldLTEPredicate(n)){const v=n.lte;return`${p}<=${predicateValueExpr(v,o)}`}else if(isFieldGTEPredicate(n)){const v=n.gte;return`${p}>=${predicateValueExpr(v,o)}`}else{if(isFieldOneOfPredicate(n))return`indexof([${predicateValuesExpr(n.oneOf,o).join(",")}], ${p}) !== -1`;if(isFieldValidPredicate(n))return fieldValidPredicate(p,n.valid);if(isFieldRangePredicate(n)){const{range:v}=replaceExprRef(n),_=isSignalRef(v)?{signal:`${v.signal}[0]`}:v[0],k=isSignalRef(v)?{signal:`${v.signal}[1]`}:v[1];if(_!==null&&k!==null&&t)return"inrange("+p+", ["+predicateValueExpr(_,o)+", "+predicateValueExpr(k,o)+"])";const P=[];return _!==null&&P.push(`${p} >= ${predicateValueExpr(_,o)}`),k!==null&&P.push(`${p} <= ${predicateValueExpr(k,o)}`),P.length>0?P.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${stringify(n)}`)}function fieldValidPredicate(n,t=!0){return t?`isValid(${n}) && isFinite(+${n})`:`!isValid(${n}) || !isFinite(+${n})`}function normalizePredicate$1(n){return isFieldPredicate(n)&&n.timeUnit?{...n,timeUnit:normalizeTimeUnit(n.timeUnit)}:n}const Type={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function isContinuous(n){return n==="quantitative"||n==="temporal"}function isDiscrete$1(n){return n==="ordinal"||n==="nominal"}const QUANTITATIVE=Type.quantitative,ORDINAL=Type.ordinal,TEMPORAL=Type.temporal,NOMINAL=Type.nominal,GEOJSON=Type.geojson;function getFullName(n){if(n)switch(n=n.toLowerCase(),n){case"q":case QUANTITATIVE:return"quantitative";case"t":case TEMPORAL:return"temporal";case"o":case ORDINAL:return"ordinal";case"n":case NOMINAL:return"nominal";case GEOJSON:return"geojson"}}const ScaleType={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},SCALE_CATEGORY_INDEX={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function scaleCompatible(n,t){const i=SCALE_CATEGORY_INDEX[n],s=SCALE_CATEGORY_INDEX[t];return i===s||i==="ordinal-position"&&s==="time"||s==="ordinal-position"&&i==="time"}const SCALE_PRECEDENCE_INDEX={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function scaleTypePrecedence(n){return SCALE_PRECEDENCE_INDEX[n]}const QUANTITATIVE_SCALES=new Set(["linear","log","pow","sqrt","symlog"]),CONTINUOUS_TO_CONTINUOUS_SCALES=new Set([...QUANTITATIVE_SCALES,"time","utc"]);function isQuantitative(n){return QUANTITATIVE_SCALES.has(n)}const CONTINUOUS_TO_DISCRETE_SCALES=new Set(["quantile","quantize","threshold"]),CONTINUOUS_DOMAIN_SCALES=new Set([...CONTINUOUS_TO_CONTINUOUS_SCALES,...CONTINUOUS_TO_DISCRETE_SCALES,"sequential","identity"]),DISCRETE_DOMAIN_SCALES=new Set(["ordinal","bin-ordinal","point","band"]);function hasDiscreteDomain(n){return DISCRETE_DOMAIN_SCALES.has(n)}function hasContinuousDomain(n){return CONTINUOUS_DOMAIN_SCALES.has(n)}function isContinuousToContinuous(n){return CONTINUOUS_TO_CONTINUOUS_SCALES.has(n)}function isContinuousToDiscrete(n){return CONTINUOUS_TO_DISCRETE_SCALES.has(n)}const defaultScaleConfig={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function isExtendedScheme(n){return!isString(n)&&hasProperty(n,"name")}function isParameterDomain(n){return hasProperty(n,"param")}function isDomainUnionWith(n){return hasProperty(n,"unionWith")}function isFieldRange(n){return isObject(n)&&"field"in n}const SCALE_PROPERTY_INDEX={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:type$1,domain:domain$1,range:range$1,rangeMax,rangeMin,scheme,...NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX}=SCALE_PROPERTY_INDEX,NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=keys(NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX);function scaleTypeSupportProperty(n,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(n);case"bins":return!["point","band","identity","ordinal"].includes(n);case"round":return isContinuousToContinuous(n)||n==="band"||n==="point";case"padding":case"rangeMin":case"rangeMax":return isContinuousToContinuous(n)||["point","band"].includes(n);case"paddingOuter":case"align":return["point","band"].includes(n);case"paddingInner":return n==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return isContinuousToContinuous(n);case"nice":return isContinuousToContinuous(n)||n==="quantize"||n==="threshold";case"exponent":return n==="pow";case"base":return n==="log";case"constant":return n==="symlog";case"zero":return hasContinuousDomain(n)&&!contains(["log","time","utc","threshold","quantile"],n)}}function channelScalePropertyIncompatability(n,t){switch(t){case"interpolate":case"scheme":case"domainMid":return isColorChannel(n)?void 0:cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function scaleTypeSupportDataType(n,t){return contains([ORDINAL,NOMINAL],t)?n===void 0||hasDiscreteDomain(n):t===TEMPORAL?contains([ScaleType.TIME,ScaleType.UTC,void 0],n):t===QUANTITATIVE?isQuantitative(n)||isContinuousToDiscrete(n)||n===void 0:!0}function channelSupportScaleType(n,t,i=!1){if(!isScaleChannel(n))return!1;switch(n){case X$1:case Y$1:case XOFFSET:case YOFFSET:case THETA:case RADIUS:return isContinuousToContinuous(t)||t==="band"?!0:t==="point"?!i:!1;case TIME:return contains(["linear","band"],t);case SIZE:case STROKEWIDTH:case OPACITY:case FILLOPACITY:case STROKEOPACITY:case ANGLE:return isContinuousToContinuous(t)||isContinuousToDiscrete(t)||contains(["band","point","ordinal"],t);case COLOR:case FILL:case STROKE:return t!=="band";case STROKEDASH:case SHAPE:return t==="ordinal"||isContinuousToDiscrete(t)}}function isScaleInvalidDataIncludeAsValue(n){return isObject(n)&&"value"in n}const Mark={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},ARC=Mark.arc,AREA=Mark.area,BAR=Mark.bar,IMAGE=Mark.image,LINE=Mark.line,POINT=Mark.point,RECT=Mark.rect,RULE=Mark.rule,TEXT=Mark.text,TICK=Mark.tick,TRAIL=Mark.trail,CIRCLE=Mark.circle,SQUARE=Mark.square,GEOSHAPE=Mark.geoshape;function isPathMark(n){return["line","area","trail"].includes(n)}function isRectBasedMark(n){return["rect","bar","image","arc","tick"].includes(n)}const PRIMITIVE_MARKS=new Set(keys(Mark));function isMarkDef(n){return hasProperty(n,"type")}const STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],FILL_CONFIG=["fill","fillOpacity"],FILL_STROKE_CONFIG=[...STROKE_CONFIG,...FILL_CONFIG],VL_ONLY_MARK_CONFIG_INDEX={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},VL_ONLY_MARK_CONFIG_PROPERTIES=keys(VL_ONLY_MARK_CONFIG_INDEX),VL_ONLY_RECT_CONFIG=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX={area:["line","point"],bar:VL_ONLY_RECT_CONFIG,rect:VL_ONLY_RECT_CONFIG,line:["point"],tick:["bandSize","thickness",...VL_ONLY_RECT_CONFIG]},defaultMarkConfig={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},MARK_CONFIG_INDEX={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},MARK_CONFIGS=keys(MARK_CONFIG_INDEX);function isRelativeBandSize(n){return hasProperty(n,"band")}const BAR_CORNER_RADIUS_INDEX={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},DEFAULT_RECT_BAND_SIZE=5,defaultRectConfig={binSpacing:0,continuousBandSize:DEFAULT_RECT_BAND_SIZE,minBandSize:.25,timeUnitBandPosition:.5},defaultBarConfig={...defaultRectConfig,binSpacing:1},defaultTickConfig={...defaultRectConfig,thickness:1};function getMarkType(n){return isMarkDef(n)?n.type:n}function normalizeInvalidDataMode(n,{isPath:t}){return n===void 0||n==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":n===null?"show":n}function getScaleInvalidDataMode({markDef:n,config:t,scaleChannel:i,scaleType:s,isCountAggregate:o}){var p,v;if(!s||!hasContinuousDomain(s)||o)return"always-valid";const f=normalizeInvalidDataMode(getMarkPropOrConfig("invalid",n,t),{isPath:isPathMark(n.type)});return((v=(p=t.scale)==null?void 0:p.invalid)==null?void 0:v[i])!==void 0?"show":f}function shouldBreakPath(n){return n==="break-paths-filter-domains"||n==="break-paths-show-domains"}function scaledZeroOrMinOrMax({scaleName:n,scale:t,mode:i}){const s=`domain('${n}')`;if(!t||!n)return;const o=`${s}[0]`,f=`peek(${s})`,d=t.domainHasZero();return d==="definitely"?{scale:n,value:0}:d==="maybe"?{signal:`scale('${n}', inrange(0, ${s}) ? 0 : ${i==="zeroOrMin"?o:f})`}:{signal:`scale('${n}', ${i==="zeroOrMin"?o:f})`}}function getConditionalValueRefForIncludingInvalidValue({scaleChannel:n,channelDef:t,scale:i,scaleName:s,markDef:o,config:f}){var k;const d=i==null?void 0:i.get("type"),p=getFieldDef(t),v=isCountingAggregateOp(p==null?void 0:p.aggregate),_=getScaleInvalidDataMode({scaleChannel:n,markDef:o,config:f,scaleType:d,isCountAggregate:v});if(p&&_==="show"){const P=((k=f.scale.invalid)==null?void 0:k[n])??"zero-or-min";return{test:fieldValidPredicate(vgField(p,{expr:"datum"}),!1),...refForInvalidValues(P,i,s)}}}function refForInvalidValues(n,t,i){if(isScaleInvalidDataIncludeAsValue(n)){const{value:s}=n;return isSignalRef(s)?{signal:s.signal}:{value:s}}return scaledZeroOrMinOrMax({scale:t,scaleName:i,mode:"zeroOrMin"})}function midPointRefWithPositionInvalidTest(n){const{channel:t,channelDef:i,markDef:s,scale:o,scaleName:f,config:d}=n,p=getMainRangeChannel(t),v=midPoint(n),_=getConditionalValueRefForIncludingInvalidValue({scaleChannel:p,channelDef:i,scale:o,scaleName:f,markDef:s,config:d});return _!==void 0?[_,v]:v}function datumDefToExpr(n){const{datum:t}=n;return isDateTime(t)?dateTimeToExpr(t):`${stringify(t)}`}function valueRefForFieldOrDatumDef(n,t,i,s){const o={};if(t&&(o.scale=t),isDatumDef(n)){const{datum:f}=n;isDateTime(f)?o.signal=dateTimeToExpr(f):isSignalRef(f)?o.signal=f.signal:isExprRef(f)?o.signal=f.expr:o.value=f}else o.field=vgField(n,i);if(s){const{offset:f,band:d}=s;f&&(o.offset=f),d&&(o.band=d)}return o}function interpolatedSignalRef({scaleName:n,fieldOrDatumDef:t,fieldOrDatumDef2:i,offset:s,startSuffix:o,endSuffix:f="end",bandPosition:d=.5}){const p=!isSignalRef(d)&&0<d&&d<1?"datum":void 0,v=vgField(t,{expr:p,suffix:o}),_=i!==void 0?vgField(i,{expr:p}):vgField(t,{suffix:f,expr:p}),k={};if(d===0||d===1){k.scale=n;const P=d===0?v:_;k.field=P}else{const P=isSignalRef(d)?`(1-${d.signal}) * ${v} + ${d.signal} * ${_}`:`${1-d} * ${v} + ${d} * ${_}`;k.signal=`scale("${n}", ${P})`}return s&&(k.offset=s),k}function binSizeExpr({scaleName:n,fieldDef:t}){const i=vgField(t,{expr:"datum"}),s=vgField(t,{expr:"datum",suffix:"end"});return`abs(scale("${n}", ${s}) - scale("${n}", ${i}))`}function midPoint({channel:n,channelDef:t,channel2Def:i,markDef:s,config:o,scaleName:f,scale:d,stack:p,offset:v,defaultRef:_,bandPosition:k}){if(t){if(isFieldOrDatumDef(t)){const P=d==null?void 0:d.get("type");if(isTypedFieldDef(t)){k??(k=getBandPosition({fieldDef:t,fieldDef2:i,markDef:s,config:o}));const{bin:L,timeUnit:G,type:Z}=t;if(isBinning(L)||k&&G&&Z===TEMPORAL)return p!=null&&p.impute?valueRefForFieldOrDatumDef(t,f,{binSuffix:"mid"},{offset:v}):k&&!hasDiscreteDomain(P)?interpolatedSignalRef({scaleName:f,fieldOrDatumDef:t,bandPosition:k,offset:v}):valueRefForFieldOrDatumDef(t,f,binRequiresRange(t,n)?{binSuffix:"range"}:{},{offset:v});if(isBinned(L)){if(isFieldDef(i))return interpolatedSignalRef({scaleName:f,fieldOrDatumDef:t,fieldOrDatumDef2:i,bandPosition:k,offset:v});warn(channelRequiredForBinned(n===X$1?X2$1:Y2$1))}}return valueRefForFieldOrDatumDef(t,f,hasDiscreteDomain(P)?{binSuffix:"range"}:{},{offset:v,band:P==="band"?k??t.bandPosition??.5:void 0})}else if(isValueDef(t)){const P=t.value,L=v?{offset:v}:{};return{...widthHeightValueOrSignalRef(n,P),...L}}}return isFunction$1(_)&&(_=_()),_&&{..._,...v?{offset:v}:{}}}function widthHeightValueOrSignalRef(n,t){return contains(["x","x2"],n)&&t==="width"?{field:{group:"width"}}:contains(["y","y2"],n)&&t==="height"?{field:{group:"height"}}:signalOrValueRef(t)}function isCustomFormatType(n){return n&&n!=="number"&&n!=="time"}function customFormatExpr(n,t,i){return`${n}(${t}${i?`, ${stringify(i)}`:""})`}const BIN_RANGE_DELIMITER=" â€“ ";function formatSignalRef({fieldOrDatumDef:n,format:t,formatType:i,expr:s,normalizeStack:o,config:f}){var v,_;if(isCustomFormatType(i))return formatCustomType({fieldOrDatumDef:n,format:t,formatType:i,expr:s,config:f});const d=fieldToFormat(n,s,o),p=channelDefType(n);if(t===void 0&&i===void 0&&f.customFormatTypes){if(p==="quantitative"){if(o&&f.normalizedNumberFormatType)return formatCustomType({fieldOrDatumDef:n,format:f.normalizedNumberFormat,formatType:f.normalizedNumberFormatType,expr:s,config:f});if(f.numberFormatType)return formatCustomType({fieldOrDatumDef:n,format:f.numberFormat,formatType:f.numberFormatType,expr:s,config:f})}if(p==="temporal"&&f.timeFormatType&&isFieldDef(n)&&n.timeUnit===void 0)return formatCustomType({fieldOrDatumDef:n,format:f.timeFormat,formatType:f.timeFormatType,expr:s,config:f})}if(isFieldOrDatumDefForTimeFormat(n)){const k=timeFormatExpression({field:d,timeUnit:isFieldDef(n)?(v=normalizeTimeUnit(n.timeUnit))==null?void 0:v.unit:void 0,format:t,formatType:f.timeFormatType,rawTimeFormat:f.timeFormat,isUTCScale:isScaleFieldDef(n)&&((_=n.scale)==null?void 0:_.type)===ScaleType.UTC});return k?{signal:k}:void 0}if(t=numberFormat({type:p,specifiedFormat:t,config:f,normalizeStack:o}),isFieldDef(n)&&isBinning(n.bin)){const k=vgField(n,{expr:s,binSuffix:"end"});return{signal:binFormatExpression(d,k,t,i,f)}}else return t||channelDefType(n)==="quantitative"?{signal:`${formatExpr(d,t)}`}:{signal:`isValid(${d}) ? ${d} : ""+${d}`}}function fieldToFormat(n,t,i){return isFieldDef(n)?i?`${vgField(n,{expr:t,suffix:"end"})}-${vgField(n,{expr:t,suffix:"start"})}`:vgField(n,{expr:t}):datumDefToExpr(n)}function formatCustomType({fieldOrDatumDef:n,format:t,formatType:i,expr:s,normalizeStack:o,config:f,field:d}){if(d??(d=fieldToFormat(n,s,o)),d!=="datum.value"&&isFieldDef(n)&&isBinning(n.bin)){const p=vgField(n,{expr:s,binSuffix:"end"});return{signal:binFormatExpression(d,p,t,i,f)}}return{signal:customFormatExpr(i,d,t)}}function guideFormat(n,t,i,s,o,f){var d;if(!(isString(s)&&isCustomFormatType(s))&&!(i===void 0&&s===void 0&&o.customFormatTypes&&channelDefType(n)==="quantitative"&&(o.normalizedNumberFormatType&&isPositionFieldOrDatumDef(n)&&n.stack==="normalize"||o.numberFormatType))){if(isPositionFieldOrDatumDef(n)&&n.stack==="normalize"&&o.normalizedNumberFormat)return numberFormat({type:"quantitative",config:o,normalizeStack:!0});if(isFieldOrDatumDefForTimeFormat(n)){const p=isFieldDef(n)?(d=normalizeTimeUnit(n.timeUnit))==null?void 0:d.unit:void 0;return p===void 0&&o.customFormatTypes&&o.timeFormatType?void 0:timeFormat({specifiedFormat:i,timeUnit:p,config:o,omitTimeFormatConfig:f})}return numberFormat({type:t,specifiedFormat:i,config:o})}}function guideFormatType(n,t,i){var s;if(n&&(isSignalRef(n)||n==="number"||n==="time"))return n;if(isFieldOrDatumDefForTimeFormat(t)&&i!=="time"&&i!=="utc")return isFieldDef(t)&&((s=normalizeTimeUnit(t==null?void 0:t.timeUnit))!=null&&s.utc)?"utc":"time"}function numberFormat({type:n,specifiedFormat:t,config:i,normalizeStack:s}){if(isString(t))return t;if(n===QUANTITATIVE)return s?i.normalizedNumberFormat:i.numberFormat}function timeFormat({specifiedFormat:n,timeUnit:t,config:i,omitTimeFormatConfig:s}){return n||(t?{signal:timeUnitSpecifierExpression(t)}:s?void 0:i.timeFormat)}function formatExpr(n,t){return`format(${n}, "${t||""}")`}function binNumberFormatExpr(n,t,i,s){return isCustomFormatType(i)?customFormatExpr(i,n,t):formatExpr(n,(isString(t)?t:void 0)??s.numberFormat)}function binFormatExpression(n,t,i,s,o){if(i===void 0&&s===void 0&&o.customFormatTypes&&o.numberFormatType)return binFormatExpression(n,t,o.numberFormat,o.numberFormatType,o);const f=binNumberFormatExpr(n,i,s,o),d=binNumberFormatExpr(t,i,s,o);return`${fieldValidPredicate(n,!1)} ? "null" : ${f} + "${BIN_RANGE_DELIMITER}" + ${d}`}function timeFormatExpression({field:n,timeUnit:t,format:i,formatType:s,rawTimeFormat:o,isUTCScale:f}){return!t||i?!t&&s?`${s}(${n}, '${i}')`:(i=isString(i)?i:o,`${f?"utc":"time"}Format(${n}, '${i}')`):formatExpression(t,n,f)}const DEFAULT_SORT_OP="min",SORT_BY_CHANNEL_INDEX={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function isSortByChannel(n){return has$1(SORT_BY_CHANNEL_INDEX,n)}function isSortByEncoding(n){return hasProperty(n,"encoding")}function isSortField(n){return n&&(n.op==="count"||hasProperty(n,"field"))}function isSortArray(n){return n&&isArray(n)}function isFacetMapping(n){return hasProperty(n,"row")||hasProperty(n,"column")}function isFacetFieldDef(n){return hasProperty(n,"header")}function isFacetSpec(n){return hasProperty(n,"facet")}function isConditionalParameter(n){return hasProperty(n,"param")}function isRepeatRef(n){return!isString(n)&&hasProperty(n,"repeat")}function toFieldDefBase(n){const{field:t,timeUnit:i,bin:s,aggregate:o}=n;return{...i?{timeUnit:i}:{},...s?{bin:s}:{},...o?{aggregate:o}:{},field:t}}function isSortableFieldDef(n){return hasProperty(n,"sort")}function getBandPosition({fieldDef:n,fieldDef2:t,markDef:i,config:s}){if(isFieldOrDatumDef(n)&&n.bandPosition!==void 0)return n.bandPosition;if(isFieldDef(n)){const{timeUnit:o,bin:f}=n;if(o&&!t)return getMarkConfig("timeUnitBandPosition",i,s);if(isBinning(f))return .5}}function getBandSize({channel:n,fieldDef:t,fieldDef2:i,markDef:s,config:o,scaleType:f,useVlSizeChannel:d}){var _,k,P;const p=getSizeChannel(n),v=getMarkPropOrConfig(d?"size":p,s,o,{vgChannel:p});if(v!==void 0)return v;if(isFieldDef(t)){const{timeUnit:L,bin:G}=t;if(L&&!i)return{band:getMarkConfig("timeUnitBandSize",s,o)};if(isBinning(G)&&!hasDiscreteDomain(f))return{band:1}}if(isRectBasedMark(s.type))return f?hasDiscreteDomain(f)?((_=o[s.type])==null?void 0:_.discreteBandSize)||{band:1}:(k=o[s.type])==null?void 0:k.continuousBandSize:(P=o[s.type])==null?void 0:P.discreteBandSize}function hasBandEnd(n,t,i,s){return isBinning(n.bin)||n.timeUnit&&isTypedFieldDef(n)&&n.type==="temporal"?getBandPosition({fieldDef:n,fieldDef2:t,markDef:i,config:s})!==void 0:!1}function isOrderOnlyDef(n){return hasProperty(n,"sort")&&!hasProperty(n,"field")}function isConditionalDef(n){return hasProperty(n,"condition")}function hasConditionalFieldDef(n){const t=n==null?void 0:n.condition;return!!t&&!isArray(t)&&isFieldDef(t)}function hasConditionalFieldOrDatumDef(n){const t=n==null?void 0:n.condition;return!!t&&!isArray(t)&&isFieldOrDatumDef(t)}function hasConditionalValueDef(n){const t=n==null?void 0:n.condition;return!!t&&(isArray(t)||isValueDef(t))}function isFieldDef(n){return hasProperty(n,"field")||(n==null?void 0:n.aggregate)==="count"}function channelDefType(n){return n==null?void 0:n.type}function isDatumDef(n){return hasProperty(n,"datum")}function isContinuousFieldOrDatumDef(n){return isTypedFieldDef(n)&&!isDiscrete(n)||isNumericDataDef(n)}function isUnbinnedQuantitativeFieldOrDatumDef(n){return isTypedFieldDef(n)&&n.type==="quantitative"&&!n.bin||isNumericDataDef(n)}function isNumericDataDef(n){return isDatumDef(n)&&isNumber$1(n.datum)}function isFieldOrDatumDef(n){return isFieldDef(n)||isDatumDef(n)}function isTypedFieldDef(n){return n&&(hasProperty(n,"field")||n.aggregate==="count")&&hasProperty(n,"type")}function isValueDef(n){return hasProperty(n,"value")}function isScaleFieldDef(n){return hasProperty(n,"scale")||hasProperty(n,"sort")}function isPositionFieldOrDatumDef(n){return hasProperty(n,"axis")||hasProperty(n,"stack")||hasProperty(n,"impute")}function isMarkPropFieldOrDatumDef(n){return hasProperty(n,"legend")}function isStringFieldOrDatumDef(n){return hasProperty(n,"format")||hasProperty(n,"formatType")}function toStringFieldDef(n){return omit(n,["legend","axis","header","scale"])}function isOpFieldDef(n){return hasProperty(n,"op")}function vgField(n,t={}){let i=n.field;const s=t.prefix;let o=t.suffix,f="";if(isCount(n))i=internalField("count");else{let d;if(!t.nofn)if(isOpFieldDef(n))d=n.op;else{const{bin:p,aggregate:v,timeUnit:_}=n;isBinning(p)?(d=binToString(p),o=(t.binSuffix??"")+(t.suffix??"")):v?isArgmaxDef(v)?(f=`["${i}"]`,i=`argmax_${v.argmax}`):isArgminDef(v)?(f=`["${i}"]`,i=`argmin_${v.argmin}`):d=String(v):_&&!isBinnedTimeUnit(_)&&(d=timeUnitToString(_),o=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}d&&(i=i?`${d}_${i}`:d)}return o&&(i=`${i}_${o}`),s&&(i=`${s}_${i}`),t.forAs?removePathFromField(i):t.expr?flatAccessWithDatum(i,t.expr)+f:replacePathInField(i)+f}function isDiscrete(n){switch(n.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return isFieldDef(n)&&!!n.bin;case"temporal":return!1}throw new Error(invalidFieldType(n.type))}function isDiscretizing(n){var t;return isScaleFieldDef(n)&&isContinuousToDiscrete((t=n.scale)==null?void 0:t.type)}function isCount(n){return n.aggregate==="count"}function verbalTitleFormatter(n,t){var d;const{field:i,bin:s,timeUnit:o,aggregate:f}=n;if(f==="count")return t.countTitle;if(isBinning(s))return`${i} (binned)`;if(o&&!isBinnedTimeUnit(o)){const p=(d=normalizeTimeUnit(o))==null?void 0:d.unit;if(p)return`${i} (${getTimeUnitParts(p).join("-")})`}else if(f)return isArgmaxDef(f)?`${i} for max ${f.argmax}`:isArgminDef(f)?`${i} for min ${f.argmin}`:`${titleCase(f)} of ${i}`;return i}function functionalTitleFormatter(n){const{aggregate:t,bin:i,timeUnit:s,field:o}=n;if(isArgmaxDef(t))return`${o} for argmax(${t.argmax})`;if(isArgminDef(t))return`${o} for argmin(${t.argmin})`;const f=s&&!isBinnedTimeUnit(s)?normalizeTimeUnit(s):void 0,d=t||(f==null?void 0:f.unit)||(f==null?void 0:f.maxbins)&&"timeunit"||isBinning(i)&&"bin";return d?`${d.toUpperCase()}(${o})`:o}const defaultTitleFormatter=(n,t)=>{switch(t.fieldTitle){case"plain":return n.field;case"functional":return functionalTitleFormatter(n);default:return verbalTitleFormatter(n,t)}};let titleFormatter=defaultTitleFormatter;function setTitleFormatter(n){titleFormatter=n}function resetTitleFormatter(){setTitleFormatter(defaultTitleFormatter)}function title(n,t,{allowDisabling:i,includeDefault:s=!0}){var p;const o=(p=getGuide(n))==null?void 0:p.title;if(!isFieldDef(n))return o??n.title;const f=n,d=s?defaultTitle(f,t):void 0;return i?getFirstDefined(o,f.title,d):o??f.title??d}function getGuide(n){if(isPositionFieldOrDatumDef(n)&&n.axis)return n.axis;if(isMarkPropFieldOrDatumDef(n)&&n.legend)return n.legend;if(isFacetFieldDef(n)&&n.header)return n.header}function defaultTitle(n,t){return titleFormatter(n,t)}function getFormatMixins(n){if(isStringFieldOrDatumDef(n)){const{format:t,formatType:i}=n;return{format:t,formatType:i}}else{const t=getGuide(n)??{},{format:i,formatType:s}=t;return{format:i,formatType:s}}}function defaultType$2(n,t){var f;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(isSortableFieldDef(n)&&isArray(n.sort))return"ordinal";const{aggregate:i,bin:s,timeUnit:o}=n;if(o)return"temporal";if(s||i&&!isArgmaxDef(i)&&!isArgminDef(i))return"quantitative";if(isScaleFieldDef(n)&&((f=n.scale)!=null&&f.type))switch(SCALE_CATEGORY_INDEX[n.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function getFieldDef(n){if(isFieldDef(n))return n;if(hasConditionalFieldDef(n))return n.condition}function getFieldOrDatumDef(n){if(isFieldOrDatumDef(n))return n;if(hasConditionalFieldOrDatumDef(n))return n.condition}function initChannelDef(n,t,i,s={}){if(isString(n)||isNumber$1(n)||isBoolean$2(n)){const o=isString(n)?"string":isNumber$1(n)?"number":"boolean";return warn(primitiveChannelDef(t,o,n)),{value:n}}return isFieldOrDatumDef(n)?initFieldOrDatumDef(n,t,i,s):hasConditionalFieldOrDatumDef(n)?{...n,condition:initFieldOrDatumDef(n.condition,t,i,s)}:n}function initFieldOrDatumDef(n,t,i,s){if(isStringFieldOrDatumDef(n)){const{format:o,formatType:f,...d}=n;if(isCustomFormatType(f)&&!i.customFormatTypes)return warn(customFormatTypeNotAllowed(t)),initFieldOrDatumDef(d,t,i,s)}else{const o=isPositionFieldOrDatumDef(n)?"axis":isMarkPropFieldOrDatumDef(n)?"legend":isFacetFieldDef(n)?"header":null;if(o&&n[o]){const{format:f,formatType:d,...p}=n[o];if(isCustomFormatType(d)&&!i.customFormatTypes)return warn(customFormatTypeNotAllowed(t)),initFieldOrDatumDef({...n,[o]:p},t,i,s)}}return isFieldDef(n)?initFieldDef(n,t,s):initDatumDef(n)}function initDatumDef(n){let t=n.type;if(t)return n;const{datum:i}=n;return t=isNumber$1(i)?"quantitative":isString(i)?"nominal":isDateTime(i)?"temporal":void 0,{...n,type:t}}function initFieldDef(n,t,{compositeMark:i=!1}={}){const{aggregate:s,timeUnit:o,bin:f,field:d}=n,p={...n};if(!i&&s&&!isAggregateOp(s)&&!isArgmaxDef(s)&&!isArgminDef(s)&&(warn(invalidAggregate(s)),delete p.aggregate),o&&(p.timeUnit=normalizeTimeUnit(o)),d&&(p.field=`${d}`),isBinning(f)&&(p.bin=normalizeBin(f,t)),isBinned(f)&&!isXorY(t)&&warn(channelShouldNotBeUsedForBinned(t)),isTypedFieldDef(p)){const{type:v}=p,_=getFullName(v);v!==_&&(p.type=_),v!=="quantitative"&&isCountingAggregateOp(s)&&(warn(invalidFieldTypeForCountAggregate(v,s)),p.type="quantitative")}else if(!isSecondaryRangeChannel(t)){const v=defaultType$2(p,t);p.type=v}if(isTypedFieldDef(p)){const{compatible:v,warning:_}=channelCompatibility(p,t)||{};v===!1&&warn(_)}if(isSortableFieldDef(p)&&isString(p.sort)){const{sort:v}=p;if(isSortByChannel(v))return{...p,sort:{encoding:v}};const _=v.substring(1);if(v.charAt(0)==="-"&&isSortByChannel(_))return{...p,sort:{encoding:_,order:"descending"}}}if(isFacetFieldDef(p)){const{header:v}=p;if(v){const{orient:_,...k}=v;if(_)return{...p,header:{...k,labelOrient:v.labelOrient||_,titleOrient:v.titleOrient||_}}}}return p}function normalizeBin(n,t){return isBoolean$2(n)?{maxbins:autoMaxBins(t)}:n==="binned"?{binned:!0}:!n.maxbins&&!n.step?{...n,maxbins:autoMaxBins(t)}:n}const COMPATIBLE={compatible:!0};function channelCompatibility(n,t){const i=n.type;if(i==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case ROW:case COLUMN:case FACET:return isDiscrete(n)?COMPATIBLE:{compatible:!1,warning:channelShouldBeDiscrete(t)};case X$1:case Y$1:case XOFFSET:case YOFFSET:case COLOR:case FILL:case STROKE:case TEXT$1:case DETAIL:case KEY:case TOOLTIP:case HREF:case URL$1:case ANGLE:case THETA:case RADIUS:case DESCRIPTION:return COMPATIBLE;case LONGITUDE:case LONGITUDE2:case LATITUDE:case LATITUDE2:return i!==QUANTITATIVE?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${n.type} field.`}:COMPATIBLE;case OPACITY:case FILLOPACITY:case STROKEOPACITY:case STROKEWIDTH:case SIZE:case THETA2:case RADIUS2:case X2$1:case Y2$1:case TIME:return i==="nominal"&&!n.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:COMPATIBLE;case SHAPE:case STROKEDASH:return!isDiscrete(n)&&!isDiscretizing(n)?{compatible:!1,warning:channelShouldBeDiscreteOrDiscretizing(t)}:COMPATIBLE;case ORDER:return n.type==="nominal"&&!("sort"in n)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:COMPATIBLE}}function isFieldOrDatumDefForTimeFormat(n){const{formatType:t}=getFormatMixins(n);return t==="time"||!t&&isTemporalFieldDef(n)}function isTemporalFieldDef(n){return n&&(n.type==="temporal"||isFieldDef(n)&&!!n.timeUnit)}function valueExpr(n,{timeUnit:t,type:i,wrapTime:s,undefinedIfExprNotRequired:o}){var v;const f=t&&((v=normalizeTimeUnit(t))==null?void 0:v.unit);let d=f||i==="temporal",p;return isExprRef(n)?p=n.expr:isSignalRef(n)?p=n.signal:isDateTime(n)?(d=!0,p=dateTimeToExpr(n)):(isString(n)||isNumber$1(n))&&d&&(p=`datetime(${stringify(n)})`,isLocalSingleTimeUnit(f)&&(isNumber$1(n)&&n<1e4||isString(n)&&isNaN(Date.parse(n)))&&(p=dateTimeToExpr({[f]:n}))),p?s&&d?`time(${p})`:p:o?void 0:stringify(n)}function valueArray(n,t){const{type:i}=n;return t.map(s=>{const o=isFieldDef(n)&&!isBinnedTimeUnit(n.timeUnit)?n.timeUnit:void 0,f=valueExpr(s,{timeUnit:o,type:i,undefinedIfExprNotRequired:!0});return f!==void 0?{signal:f}:s})}function binRequiresRange(n,t){return isBinning(n.bin)?isScaleChannel(t)&&["ordinal","nominal"].includes(n.type):(console.warn("Only call this method for binned field defs."),!1)}const CONDITIONAL_AXIS_PROP_INDEX={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function isConditionalAxisValue(n){return n==null?void 0:n.condition}const AXIS_PARTS=["domain","grid","labels","ticks","title"],AXIS_PROPERTY_TYPE={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},COMMON_AXIS_PROPERTIES_INDEX={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},AXIS_PROPERTIES_INDEX={...COMMON_AXIS_PROPERTIES_INDEX,style:1,labelExpr:1,encoding:1};function isAxisProperty(n){return has$1(AXIS_PROPERTIES_INDEX,n)}const AXIS_CONFIGS_INDEX={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},AXIS_CONFIGS=keys(AXIS_CONFIGS_INDEX);function isUnitSpec(n){return hasProperty(n,"mark")}class CompositeMarkNormalizer{constructor(t,i){this.name=t,this.run=i}hasMatchingType(t){return isUnitSpec(t)?getMarkType(t.mark)===this.name:!1}}function channelHasField(n,t){const i=n&&n[t];return i?isArray(i)?some(i,s=>!!s.field):isFieldDef(i)||hasConditionalFieldDef(i):!1}function channelHasFieldOrDatum(n,t){const i=n&&n[t];return i?isArray(i)?some(i,s=>!!s.field):isFieldDef(i)||isDatumDef(i)||hasConditionalFieldOrDatumDef(i):!1}function channelHasNestedOffsetScale(n,t){if(isXorY(t)){const i=n[t];if((isFieldDef(i)||isDatumDef(i))&&(isDiscrete$1(i.type)||isFieldDef(i)&&i.timeUnit)){const s=getOffsetScaleChannel(t);return channelHasFieldOrDatum(n,s)}}return!1}function isAggregate$1(n){return some(CHANNELS,t=>{if(channelHasField(n,t)){const i=n[t];if(isArray(i))return some(i,s=>!!s.aggregate);{const s=getFieldDef(i);return s&&!!s.aggregate}}return!1})}function extractTransformsFromEncoding(n,t){const i=[],s=[],o=[],f=[],d={};return forEach(n,(p,v)=>{if(isFieldDef(p)){const{field:_,aggregate:k,bin:P,timeUnit:L,...G}=p;if(k||L||P){const Z=getGuide(p),W=Z==null?void 0:Z.title;let j=vgField(p,{forAs:!0});const H={...W?[]:{title:title(p,t,{allowDisabling:!0})},...G,field:j};if(k){let me;if(isArgmaxDef(k)?(me="argmax",j=vgField({op:"argmax",field:k.argmax},{forAs:!0}),H.field=`${j}.${_}`):isArgminDef(k)?(me="argmin",j=vgField({op:"argmin",field:k.argmin},{forAs:!0}),H.field=`${j}.${_}`):k!=="boxplot"&&k!=="errorbar"&&k!=="errorband"&&(me=k),me){const $e={op:me,as:j};_&&($e.field=_),f.push($e)}}else if(i.push(j),isTypedFieldDef(p)&&isBinning(P)){if(s.push({bin:P,field:_,as:j}),i.push(vgField(p,{binSuffix:"end"})),binRequiresRange(p,v)&&i.push(vgField(p,{binSuffix:"range"})),isXorY(v)){const me={field:`${j}_end`};d[`${v}2`]=me}H.bin="binned",isSecondaryRangeChannel(v)||(H.type=QUANTITATIVE)}else if(L&&!isBinnedTimeUnit(L)){o.push({timeUnit:L,field:_,as:j});const me=isTypedFieldDef(p)&&p.type!==TEMPORAL&&"time";me&&(v===TEXT$1||v===TOOLTIP?H.formatType=me:isNonPositionScaleChannel(v)?H.legend={formatType:me,...H.legend}:isXorY(v)&&(H.axis={formatType:me,...H.axis}))}d[v]=H}else i.push(_),d[v]=n[v]}else d[v]=n[v]}),{bins:s,timeUnits:o,aggregate:f,groupby:i,encoding:d}}function markChannelCompatible(n,t,i){const s=supportMark(t,i);if(s){if(s==="binned"){const o=n[t===X2$1?X$1:Y$1];return!!(isFieldDef(o)&&isFieldDef(n[t])&&isBinned(o.bin))}}else return!1;return!0}function initEncoding(n,t,i,s){const o={};for(const f of keys(n))isChannel(f)||warn(invalidEncodingChannel(f));for(let f of UNIT_CHANNELS){if(!n[f])continue;const d=n[f];if(isXorYOffset(f)){const p=getMainChannelFromOffsetChannel(f),v=o[p];if(isFieldDef(v)&&isContinuous(v.type)&&isFieldDef(d)&&!v.timeUnit){warn(offsetNestedInsideContinuousPositionScaleDropped(p));continue}}if(f==="angle"&&t==="arc"&&!n.theta&&(warn(REPLACE_ANGLE_WITH_THETA),f=THETA),!markChannelCompatible(n,f,t)){warn(incompatibleChannel(f,t));continue}if(f===SIZE&&t==="line"){const p=getFieldDef(n[f]);if(p!=null&&p.aggregate){warn(LINE_WITH_VARYING_SIZE);continue}}if(f===COLOR&&(i?"fill"in n:"stroke"in n)){warn(droppingColor("encoding",{fill:"fill"in n,stroke:"stroke"in n}));continue}if(f===DETAIL||f===ORDER&&!isArray(d)&&!isValueDef(d)||f===TOOLTIP&&isArray(d)){if(d){if(f===ORDER){const p=n[f];if(isOrderOnlyDef(p)){o[f]=p;continue}}o[f]=array$5(d).reduce((p,v)=>(isFieldDef(v)?p.push(initFieldDef(v,f)):warn(emptyFieldDef(v,f)),p),[])}}else{if(f===TOOLTIP&&d===null)o[f]=null;else if(!isFieldDef(d)&&!isDatumDef(d)&&!isValueDef(d)&&!isConditionalDef(d)&&!isSignalRef(d)){warn(emptyFieldDef(d,f));continue}o[f]=initChannelDef(d,f,s)}}return o}function normalizeEncoding(n,t){const i={};for(const s of keys(n)){const o=initChannelDef(n[s],s,t,{compositeMark:!0});i[s]=o}return i}function fieldDefs(n){const t=[];for(const i of keys(n))if(channelHasField(n,i)){const s=n[i],o=array$5(s);for(const f of o)isFieldDef(f)?t.push(f):hasConditionalFieldDef(f)&&t.push(f.condition)}return t}function forEach(n,t,i){if(n)for(const s of keys(n)){const o=n[s];if(isArray(o))for(const f of o)t.call(i,f,s);else t.call(i,o,s)}}function reduce(n,t,i,s){return n?keys(n).reduce((o,f)=>{const d=n[f];return isArray(d)?d.reduce((p,v)=>t.call(s,p,v,f),o):t.call(s,o,d,f)},i):i}function pathGroupingFields(n,t){return keys(t).reduce((i,s)=>{switch(s){case X$1:case Y$1:case HREF:case DESCRIPTION:case URL$1:case X2$1:case Y2$1:case XOFFSET:case YOFFSET:case THETA:case THETA2:case RADIUS:case RADIUS2:case TIME:case LATITUDE:case LONGITUDE:case LATITUDE2:case LONGITUDE2:case TEXT$1:case SHAPE:case ANGLE:case TOOLTIP:return i;case ORDER:if(n==="line"||n==="trail")return i;case DETAIL:case KEY:{const o=t[s];if(isArray(o)||isFieldDef(o))for(const f of array$5(o))f.aggregate||i.push(vgField(f,{}));return i}case SIZE:if(n==="trail")return i;case COLOR:case FILL:case STROKE:case OPACITY:case FILLOPACITY:case STROKEOPACITY:case STROKEDASH:case STROKEWIDTH:{const o=getFieldDef(t[s]);return o&&!o.aggregate&&i.push(vgField(o,{})),i}}},[])}function filterTooltipWithAggregatedField(n){const{tooltip:t,...i}=n;if(!t)return{filteredEncoding:i};let s,o;if(isArray(t)){for(const f of t)f.aggregate?(s||(s=[]),s.push(f)):(o||(o=[]),o.push(f));s&&(i.tooltip=s)}else t.aggregate?i.tooltip=t:o=t;return isArray(o)&&o.length===1&&(o=o[0]),{customTooltipWithoutAggregatedField:o,filteredEncoding:i}}function getCompositeMarkTooltip(n,t,i,s=!0){if("tooltip"in i)return{tooltip:i.tooltip};const o=n.map(({fieldPrefix:d,titlePrefix:p})=>{const v=s?` of ${getTitle(t)}`:"";return{field:d+t.field,type:t.type,title:isSignalRef(p)?{signal:`${p}"${escape(v)}"`}:p+v}}),f=fieldDefs(i).map(toStringFieldDef);return{tooltip:[...o,...unique(f,hash)]}}function getTitle(n){const{title:t,field:i}=n;return getFirstDefined(t,i)}function makeCompositeAggregatePartFactory(n,t,i,s,o){const{scale:f,axis:d}=i;return({partName:p,mark:v,positionPrefix:_,endPositionPrefix:k=void 0,extraEncoding:P={}})=>{const L=getTitle(i);return partLayerMixins(n,p,o,{mark:v,encoding:{[t]:{field:`${_}_${i.field}`,type:i.type,...L!==void 0?{title:L}:{},...f!==void 0?{scale:f}:{},...d!==void 0?{axis:d}:{}},...isString(k)?{[`${t}2`]:{field:`${k}_${i.field}`}}:{},...s,...P}})}}function partLayerMixins(n,t,i,s){const{clip:o,color:f,opacity:d}=n,p=n.type;return n[t]||n[t]===void 0&&i[t]?[{...s,mark:{...i[t],...o?{clip:o}:{},...f?{color:f}:{},...d?{opacity:d}:{},...isMarkDef(s.mark)?s.mark:{type:s.mark},style:`${p}-${String(t)}`,...isBoolean$2(n[t])?{}:n[t]}}]:[]}function compositeMarkContinuousAxis(n,t,i){const{encoding:s}=n,o=t==="vertical"?"y":"x",f=s[o],d=s[`${o}2`],p=s[`${o}Error`],v=s[`${o}Error2`];return{continuousAxisChannelDef:filterAggregateFromChannelDef(f,i),continuousAxisChannelDef2:filterAggregateFromChannelDef(d,i),continuousAxisChannelDefError:filterAggregateFromChannelDef(p,i),continuousAxisChannelDefError2:filterAggregateFromChannelDef(v,i),continuousAxis:o}}function filterAggregateFromChannelDef(n,t){if(n!=null&&n.aggregate){const{aggregate:i,...s}=n;return i!==t&&warn(errorBarContinuousAxisHasCustomizedAggregate(i,t)),s}else return n}function compositeMarkOrient(n,t){const{mark:i,encoding:s}=n,{x:o,y:f}=s;if(isMarkDef(i)&&i.orient)return i.orient;if(isContinuousFieldOrDatumDef(o)){if(isContinuousFieldOrDatumDef(f)){const d=isFieldDef(o)&&o.aggregate,p=isFieldDef(f)&&f.aggregate;if(!d&&p===t)return"vertical";if(!p&&d===t)return"horizontal";if(d===t&&p===t)throw new Error("Both x and y cannot have aggregate");return isFieldOrDatumDefForTimeFormat(f)&&!isFieldOrDatumDefForTimeFormat(o)?"horizontal":"vertical"}return"horizontal"}else{if(isContinuousFieldOrDatumDef(f))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const BOXPLOT="boxplot",BOXPLOT_PARTS=["box","median","outliers","rule","ticks"],boxPlotNormalizer=new CompositeMarkNormalizer(BOXPLOT,normalizeBoxPlot);function getBoxPlotType(n){return isNumber$1(n)?"tukey":n}function normalizeBoxPlot(n,{config:t}){n={...n,encoding:normalizeEncoding(n.encoding,t)};const{mark:i,encoding:s,params:o,projection:f,...d}=n,p=isMarkDef(i)?i:{type:i};o&&warn(selectionNotSupported("boxplot"));const v=p.extent??t.boxplot.extent,_=getMarkPropOrConfig("size",p,t),k=p.invalid,P=getBoxPlotType(v),{bins:L,timeUnits:G,transform:Z,continuousAxisChannelDef:W,continuousAxis:j,groupby:H,aggregate:me,encodingWithoutContinuousAxis:$e,ticksOrient:De,boxOrient:le,customTooltipWithoutAggregatedField:Ce}=boxParams(n,v,t),Me=removePathFromField(W.field),{color:_n,size:_i,...ll}=$e,_l=_$=>makeCompositeAggregatePartFactory(p,j,W,_$,t.boxplot),oa=_l(ll),Ru=_l($e),ga=(isObject(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",_s=_l({...ll,..._i?{size:_i}:{},color:{condition:{test:`${accessWithDatumToUnescapedPath(`lower_box_${W.field}`)} >= ${accessWithDatumToUnescapedPath(`upper_box_${W.field}`)}`,..._n||{value:ga}}}}),Sa=getCompositeMarkTooltip([{fieldPrefix:P==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:P==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],W,$e),Ra={type:"tick",color:"black",opacity:1,orient:De,invalid:k,aria:!1},Da=P==="min-max"?Sa:getCompositeMarkTooltip([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],W,$e),Fa=[...oa({partName:"rule",mark:{type:"rule",invalid:k,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Da}),...oa({partName:"rule",mark:{type:"rule",invalid:k,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Da}),...oa({partName:"ticks",mark:Ra,positionPrefix:"lower_whisker",extraEncoding:Da}),...oa({partName:"ticks",mark:Ra,positionPrefix:"upper_whisker",extraEncoding:Da})],Na=[...P!=="tukey"?Fa:[],...Ru({partName:"box",mark:{type:"bar",..._?{size:_}:{},orient:le,invalid:k,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:Sa}),..._s({partName:"median",mark:{type:"tick",invalid:k,...isObject(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},..._?{size:_}:{},orient:De,aria:!1},positionPrefix:"mid_box",extraEncoding:Sa})];if(P==="min-max")return{...d,transform:(d.transform??[]).concat(Z),layer:Na};const _a=accessWithDatumToUnescapedPath(`lower_box_${W.field}`),Pa=accessWithDatumToUnescapedPath(`upper_box_${W.field}`),qc=`(${Pa} - ${_a})`,uf=`${_a} - ${v} * ${qc}`,_h=`${Pa} + ${v} * ${qc}`,Uh=accessWithDatumToUnescapedPath(W.field),Kd={joinaggregate:boxParamsQuartiles(W.field),groupby:H},ud={transform:[{filter:`(${uf} <= ${Uh}) && (${Uh} <= ${_h})`},{aggregate:[{op:"min",field:W.field,as:`lower_whisker_${Me}`},{op:"max",field:W.field,as:`upper_whisker_${Me}`},{op:"min",field:`lower_box_${W.field}`,as:`lower_box_${Me}`},{op:"max",field:`upper_box_${W.field}`,as:`upper_box_${Me}`},...me],groupby:H}],layer:Fa},{tooltip:sc,...Yd}=ll,{scale:wg,axis:Pf}=W,ac=getTitle(W),fc=omit(Pf,["title"]),nd=partLayerMixins(p,"outliers",t.boxplot,{transform:[{filter:`(${Uh} < ${uf}) || (${Uh} > ${_h})`}],mark:"point",encoding:{[j]:{field:W.field,type:W.type,...ac!==void 0?{title:ac}:{},...wg!==void 0?{scale:wg}:{},...isEmpty(fc)?{}:{axis:fc}},...Yd,..._n?{color:_n}:{},...Ce?{tooltip:Ce}:{}}})[0];let a0;const _1=[...L,...G,Kd];return nd?a0={transform:_1,layer:[nd,ud]}:(a0=ud,a0.transform.unshift(..._1)),{...d,layer:[a0,{transform:Z,layer:Na}]}}function boxParamsQuartiles(n){const t=removePathFromField(n);return[{op:"q1",field:n,as:`lower_box_${t}`},{op:"q3",field:n,as:`upper_box_${t}`}]}function boxParams(n,t,i){const s=compositeMarkOrient(n,BOXPLOT),{continuousAxisChannelDef:o,continuousAxis:f}=compositeMarkContinuousAxis(n,s,BOXPLOT),d=o.field,p=removePathFromField(d),v=getBoxPlotType(t),_=[...boxParamsQuartiles(d),{op:"median",field:d,as:`mid_box_${p}`},{op:"min",field:d,as:(v==="min-max"?"lower_whisker_":"min_")+p},{op:"max",field:d,as:(v==="min-max"?"upper_whisker_":"max_")+p}],k=v==="min-max"||v==="tukey"?[]:[{calculate:`${accessWithDatumToUnescapedPath(`upper_box_${p}`)} - ${accessWithDatumToUnescapedPath(`lower_box_${p}`)}`,as:`iqr_${p}`},{calculate:`min(${accessWithDatumToUnescapedPath(`upper_box_${p}`)} + ${accessWithDatumToUnescapedPath(`iqr_${p}`)} * ${t}, ${accessWithDatumToUnescapedPath(`max_${p}`)})`,as:`upper_whisker_${p}`},{calculate:`max(${accessWithDatumToUnescapedPath(`lower_box_${p}`)} - ${accessWithDatumToUnescapedPath(`iqr_${p}`)} * ${t}, ${accessWithDatumToUnescapedPath(`min_${p}`)})`,as:`lower_whisker_${p}`}],{[f]:P,...L}=n.encoding,{customTooltipWithoutAggregatedField:G,filteredEncoding:Z}=filterTooltipWithAggregatedField(L),{bins:W,timeUnits:j,aggregate:H,groupby:me,encoding:$e}=extractTransformsFromEncoding(Z,i),De=s==="vertical"?"horizontal":"vertical",le=s,Ce=[...W,...j,{aggregate:[...H,..._],groupby:me},...k];return{bins:W,timeUnits:j,transform:Ce,groupby:me,aggregate:H,continuousAxisChannelDef:o,continuousAxis:f,encodingWithoutContinuousAxis:$e,ticksOrient:De,boxOrient:le,customTooltipWithoutAggregatedField:G}}const ERRORBAR="errorbar",ERRORBAR_PARTS=["ticks","rule"],errorBarNormalizer=new CompositeMarkNormalizer(ERRORBAR,normalizeErrorBar);function normalizeErrorBar(n,{config:t}){n={...n,encoding:normalizeEncoding(n.encoding,t)};const{transform:i,continuousAxisChannelDef:s,continuousAxis:o,encodingWithoutContinuousAxis:f,ticksOrient:d,markDef:p,outerSpec:v,tooltipEncoding:_}=errorBarParams(n,ERRORBAR,t);delete f.size;const k=makeCompositeAggregatePartFactory(p,o,s,f,t.errorbar),P=p.thickness,L=p.size,G={type:"tick",orient:d,aria:!1,...P!==void 0?{thickness:P}:{},...L!==void 0?{size:L}:{}},Z=[...k({partName:"ticks",mark:G,positionPrefix:"lower",extraEncoding:_}),...k({partName:"ticks",mark:G,positionPrefix:"upper",extraEncoding:_}),...k({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...P!==void 0?{size:P}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:_})];return{...v,transform:i,...Z.length>1?{layer:Z}:{...Z[0]}}}function errorBarOrientAndInputType(n,t){const{encoding:i}=n;if(errorBarIsInputTypeRaw(i))return{orient:compositeMarkOrient(n,t),inputType:"raw"};const s=errorBarIsInputTypeAggregatedUpperLower(i),o=errorBarIsInputTypeAggregatedError(i),f=i.x,d=i.y;if(s){if(o)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const p=i.x2,v=i.y2;if(isFieldOrDatumDef(p)&&isFieldOrDatumDef(v))throw new Error(`${t} cannot have both x2 and y2`);if(isFieldOrDatumDef(p)){if(isContinuousFieldOrDatumDef(f))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(isFieldOrDatumDef(v)){if(isContinuousFieldOrDatumDef(d))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const p=i.xError,v=i.xError2,_=i.yError,k=i.yError2;if(isFieldOrDatumDef(v)&&!isFieldOrDatumDef(p))throw new Error(`${t} cannot have xError2 without xError`);if(isFieldOrDatumDef(k)&&!isFieldOrDatumDef(_))throw new Error(`${t} cannot have yError2 without yError`);if(isFieldOrDatumDef(p)&&isFieldOrDatumDef(_))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(isFieldOrDatumDef(p)){if(isContinuousFieldOrDatumDef(f))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(isFieldOrDatumDef(_)){if(isContinuousFieldOrDatumDef(d))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function errorBarIsInputTypeRaw(n){return(isFieldOrDatumDef(n.x)||isFieldOrDatumDef(n.y))&&!isFieldOrDatumDef(n.x2)&&!isFieldOrDatumDef(n.y2)&&!isFieldOrDatumDef(n.xError)&&!isFieldOrDatumDef(n.xError2)&&!isFieldOrDatumDef(n.yError)&&!isFieldOrDatumDef(n.yError2)}function errorBarIsInputTypeAggregatedUpperLower(n){return isFieldOrDatumDef(n.x2)||isFieldOrDatumDef(n.y2)}function errorBarIsInputTypeAggregatedError(n){return isFieldOrDatumDef(n.xError)||isFieldOrDatumDef(n.xError2)||isFieldOrDatumDef(n.yError)||isFieldOrDatumDef(n.yError2)}function errorBarParams(n,t,i){const{mark:s,encoding:o,params:f,projection:d,...p}=n,v=isMarkDef(s)?s:{type:s};f&&warn(selectionNotSupported(t));const{orient:_,inputType:k}=errorBarOrientAndInputType(n,t),{continuousAxisChannelDef:P,continuousAxisChannelDef2:L,continuousAxisChannelDefError:G,continuousAxisChannelDefError2:Z,continuousAxis:W}=compositeMarkContinuousAxis(n,_,t),{errorBarSpecificAggregate:j,postAggregateCalculates:H,tooltipSummary:me,tooltipTitleWithFieldName:$e}=errorBarAggregationAndCalculation(v,P,L,G,Z,k,t,i),{[W]:De,[W==="x"?"x2":"y2"]:le,[W==="x"?"xError":"yError"]:Ce,[W==="x"?"xError2":"yError2"]:Me,..._n}=o,{bins:_i,timeUnits:ll,aggregate:_l,groupby:oa,encoding:Ru}=extractTransformsFromEncoding(_n,i),ga=[..._l,...j],_s=k!=="raw"?[]:oa,Sa=getCompositeMarkTooltip(me,P,Ru,$e);return{transform:[...p.transform??[],..._i,...ll,...ga.length===0?[]:[{aggregate:ga,groupby:_s}],...H],groupby:_s,continuousAxisChannelDef:P,continuousAxis:W,encodingWithoutContinuousAxis:Ru,ticksOrient:_==="vertical"?"horizontal":"vertical",markDef:v,outerSpec:p,tooltipEncoding:Sa}}function errorBarAggregationAndCalculation(n,t,i,s,o,f,d,p){let v=[],_=[];const k=t.field;let P,L=!1;if(f==="raw"){const G=n.center?n.center:n.extent?n.extent==="iqr"?"median":"mean":p.errorbar.center,Z=n.extent?n.extent:G==="mean"?"stderr":"iqr";if(G==="median"!=(Z==="iqr")&&warn(errorBarCenterIsUsedWithWrongExtent(G,Z,d)),Z==="stderr"||Z==="stdev")v=[{op:Z,field:k,as:`extent_${k}`},{op:G,field:k,as:`center_${k}`}],_=[{calculate:`${accessWithDatumToUnescapedPath(`center_${k}`)} + ${accessWithDatumToUnescapedPath(`extent_${k}`)}`,as:`upper_${k}`},{calculate:`${accessWithDatumToUnescapedPath(`center_${k}`)} - ${accessWithDatumToUnescapedPath(`extent_${k}`)}`,as:`lower_${k}`}],P=[{fieldPrefix:"center_",titlePrefix:titleCase(G)},{fieldPrefix:"upper_",titlePrefix:getTitlePrefix(G,Z,"+")},{fieldPrefix:"lower_",titlePrefix:getTitlePrefix(G,Z,"-")}],L=!0;else{let W,j,H;Z==="ci"?(W="mean",j="ci0",H="ci1"):(W="median",j="q1",H="q3"),v=[{op:j,field:k,as:`lower_${k}`},{op:H,field:k,as:`upper_${k}`},{op:W,field:k,as:`center_${k}`}],P=[{fieldPrefix:"upper_",titlePrefix:title({field:k,aggregate:H,type:"quantitative"},p,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:title({field:k,aggregate:j,type:"quantitative"},p,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:title({field:k,aggregate:W,type:"quantitative"},p,{allowDisabling:!1})}]}}else{(n.center||n.extent)&&warn(errorBarCenterAndExtentAreNotNeeded(n.center,n.extent)),f==="aggregated-upper-lower"?(P=[],_=[{calculate:accessWithDatumToUnescapedPath(i.field),as:`upper_${k}`},{calculate:accessWithDatumToUnescapedPath(k),as:`lower_${k}`}]):f==="aggregated-error"&&(P=[{fieldPrefix:"",titlePrefix:k}],_=[{calculate:`${accessWithDatumToUnescapedPath(k)} + ${accessWithDatumToUnescapedPath(s.field)}`,as:`upper_${k}`}],o?_.push({calculate:`${accessWithDatumToUnescapedPath(k)} + ${accessWithDatumToUnescapedPath(o.field)}`,as:`lower_${k}`}):_.push({calculate:`${accessWithDatumToUnescapedPath(k)} - ${accessWithDatumToUnescapedPath(s.field)}`,as:`lower_${k}`}));for(const G of _)P.push({fieldPrefix:G.as.substring(0,6),titlePrefix:replaceAll(replaceAll(G.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:_,errorBarSpecificAggregate:v,tooltipSummary:P,tooltipTitleWithFieldName:L}}function getTitlePrefix(n,t,i){return`${titleCase(n)} ${i} ${t}`}const ERRORBAND="errorband",ERRORBAND_PARTS=["band","borders"],errorBandNormalizer=new CompositeMarkNormalizer(ERRORBAND,normalizeErrorBand);function normalizeErrorBand(n,{config:t}){n={...n,encoding:normalizeEncoding(n.encoding,t)};const{transform:i,continuousAxisChannelDef:s,continuousAxis:o,encodingWithoutContinuousAxis:f,markDef:d,outerSpec:p,tooltipEncoding:v}=errorBarParams(n,ERRORBAND,t),_=d,k=makeCompositeAggregatePartFactory(_,o,s,f,t.errorband),P=n.encoding.x!==void 0&&n.encoding.y!==void 0;let L={type:P?"area":"rect"},G={type:P?"line":"rule"};const Z={..._.interpolate?{interpolate:_.interpolate}:{},..._.tension&&_.interpolate?{tension:_.tension}:{}};return P?(L={...L,...Z,ariaRoleDescription:"errorband"},G={...G,...Z,aria:!1}):_.interpolate?warn(errorBand1DNotSupport("interpolate")):_.tension&&warn(errorBand1DNotSupport("tension")),{...p,transform:i,layer:[...k({partName:"band",mark:L,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:v}),...k({partName:"borders",mark:G,positionPrefix:"lower",extraEncoding:v}),...k({partName:"borders",mark:G,positionPrefix:"upper",extraEncoding:v})]}}const compositeMarkRegistry={};function add(n,t,i){const s=new CompositeMarkNormalizer(n,t);compositeMarkRegistry[n]={normalizer:s,parts:i}}function getAllCompositeMarks(){return keys(compositeMarkRegistry)}add(BOXPLOT,normalizeBoxPlot,BOXPLOT_PARTS);add(ERRORBAR,normalizeErrorBar,ERRORBAR_PARTS);add(ERRORBAND,normalizeErrorBand,ERRORBAND_PARTS);const VL_ONLY_LEGEND_CONFIG=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],HEADER_TITLE_PROPERTIES_MAP={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},HEADER_LABEL_PROPERTIES_MAP={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},HEADER_TITLE_PROPERTIES=keys(HEADER_TITLE_PROPERTIES_MAP),HEADER_LABEL_PROPERTIES=keys(HEADER_LABEL_PROPERTIES_MAP),HEADER_CONFIGS_INDEX={header:1,headerRow:1,headerColumn:1,headerFacet:1},HEADER_CONFIGS=keys(HEADER_CONFIGS_INDEX),LEGEND_SCALE_CHANNELS=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],defaultLegendConfig={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},COMMON_LEGEND_PROPERTY_INDEX={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},SELECTION_ID="_vgsid_",defaultConfig$1={point:{on:"click",fields:[SELECTION_ID],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function isLegendBinding(n){return n==="legend"||!!(n!=null&&n.legend)}function isLegendStreamBinding(n){return isLegendBinding(n)&&isObject(n)}function isSelectionParameter(n){return!!(n!=null&&n.select)}function assembleParameterSignals(n){const t=[];for(const i of n||[]){if(isSelectionParameter(i))continue;const{expr:s,bind:o,...f}=i;if(o&&s){const d={...f,bind:o,init:s};t.push(d)}else{const d={...f,...s?{update:s}:{},...o?{bind:o}:{}};t.push(d)}}return t}function isAnyConcatSpec(n){return isVConcatSpec(n)||isHConcatSpec(n)||isConcatSpec(n)}function isConcatSpec(n){return hasProperty(n,"concat")}function isVConcatSpec(n){return hasProperty(n,"vconcat")}function isHConcatSpec(n){return hasProperty(n,"hconcat")}function getStepFor({step:n,offsetIsDiscrete:t}){return t?n.for??"offset":"position"}function isStep(n){return hasProperty(n,"step")}function isFrameMixins(n){return hasProperty(n,"view")||hasProperty(n,"width")||hasProperty(n,"height")}const DEFAULT_SPACING=20,COMPOSITION_LAYOUT_INDEX={align:1,bounds:1,center:1,columns:1,spacing:1},COMPOSITION_LAYOUT_PROPERTIES=keys(COMPOSITION_LAYOUT_INDEX);function extractCompositionLayout(n,t,i){const s=i[t],o={},{spacing:f,columns:d}=s;f!==void 0&&(o.spacing=f),d!==void 0&&(isFacetSpec(n)&&!isFacetMapping(n.facet)||isConcatSpec(n))&&(o.columns=d),isVConcatSpec(n)&&(o.columns=1);for(const p of COMPOSITION_LAYOUT_PROPERTIES)if(n[p]!==void 0)if(p==="spacing"){const v=n[p];o[p]=isNumber$1(v)?v:{row:v.row??f,column:v.column??f}}else o[p]=n[p];return o}function getViewConfigContinuousSize(n,t){return n[t]??n[t==="width"?"continuousWidth":"continuousHeight"]}function getViewConfigDiscreteStep(n,t){const i=getViewConfigDiscreteSize(n,t);return isStep(i)?i.step:DEFAULT_STEP}function getViewConfigDiscreteSize(n,t){const i=n[t]??n[t==="width"?"discreteWidth":"discreteHeight"];return getFirstDefined(i,{step:n.step})}const DEFAULT_STEP=20,defaultViewConfig={continuousWidth:200,continuousHeight:200,step:DEFAULT_STEP},defaultConfig={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:defaultViewConfig,mark:defaultMarkConfig,arc:{},area:{},bar:defaultBarConfig,circle:{},geoshape:{},image:{},line:{},point:{},rect:defaultRectConfig,rule:{color:"black"},square:{},text:{color:"black"},tick:defaultTickConfig,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:defaultScaleConfig,projection:{},legend:defaultLegendConfig,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:defaultConfig$1,style:{},title:{},facet:{spacing:DEFAULT_SPACING},concat:{spacing:DEFAULT_SPACING},normalizedNumberFormat:".0%"},tab10=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],DEFAULT_FONT_SIZE={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},DEFAULT_COLOR={blue:tab10[0],orange:tab10[1],red:tab10[2],teal:tab10[3],green:tab10[4],yellow:tab10[5],purple:tab10[6],pink:tab10[7],brown:tab10[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function colorSignalConfig(n={}){return{signals:[{name:"color",value:isObject(n)?{...DEFAULT_COLOR,...n}:DEFAULT_COLOR}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function fontSizeSignalConfig(n){return{signals:[{name:"fontSize",value:isObject(n)?{...DEFAULT_FONT_SIZE,...n}:DEFAULT_FONT_SIZE}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function fontConfig(n){return{text:{font:n},style:{"guide-label":{font:n},"guide-title":{font:n},"group-title":{font:n},"group-subtitle":{font:n}}}}function getAxisConfigInternal(n){const t=keys(n||{}),i={};for(const s of t){const o=n[s];i[s]=isConditionalAxisValue(o)?signalOrValueRefWithCondition(o):signalRefOrValue(o)}return i}function getStyleConfigInternal(n){const t=keys(n),i={};for(const s of t)i[s]=getAxisConfigInternal(n[s]);return i}const configPropsWithExpr=[...MARK_CONFIGS,...AXIS_CONFIGS,...HEADER_CONFIGS,"background","padding","legend","lineBreak","scale","style","title","view"];function initConfig(n={}){const{color:t,font:i,fontSize:s,selection:o,...f}=n,d=mergeConfig({},duplicate(defaultConfig),i?fontConfig(i):{},t?colorSignalConfig(t):{},s?fontSizeSignalConfig(s):{},f||{});o&&writeConfig(d,"selection",o,!0);const p=omit(d,configPropsWithExpr);for(const v of["background","lineBreak","padding"])d[v]&&(p[v]=signalRefOrValue(d[v]));for(const v of MARK_CONFIGS)d[v]&&(p[v]=replaceExprRef(d[v]));for(const v of AXIS_CONFIGS)d[v]&&(p[v]=getAxisConfigInternal(d[v]));for(const v of HEADER_CONFIGS)d[v]&&(p[v]=replaceExprRef(d[v]));if(d.legend&&(p.legend=replaceExprRef(d.legend)),d.scale){const{invalid:v,..._}=d.scale,k=replaceExprRef(v,{level:1});p.scale={...replaceExprRef(_),...keys(k).length>0?{invalid:k}:{}}}return d.style&&(p.style=getStyleConfigInternal(d.style)),d.title&&(p.title=replaceExprRef(d.title)),d.view&&(p.view=replaceExprRef(d.view)),p}const MARK_STYLES=new Set(["view",...PRIMITIVE_MARKS]),VL_ONLY_CONFIG_PROPERTIES=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX};function stripAndRedirectConfig(n){n=duplicate(n);for(const t of VL_ONLY_CONFIG_PROPERTIES)delete n[t];if(n.axis)for(const t in n.axis)isConditionalAxisValue(n.axis[t])&&delete n.axis[t];if(n.legend)for(const t of VL_ONLY_LEGEND_CONFIG)delete n.legend[t];if(n.mark){for(const t of VL_ONLY_MARK_CONFIG_PROPERTIES)delete n.mark[t];n.mark.tooltip&&isObject(n.mark.tooltip)&&delete n.mark.tooltip}n.params&&(n.signals=(n.signals||[]).concat(assembleParameterSignals(n.params)),delete n.params);for(const t of MARK_STYLES){for(const s of VL_ONLY_MARK_CONFIG_PROPERTIES)delete n[t][s];const i=VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX[t];if(i)for(const s of i)delete n[t][s];redirectConfigToStyleConfig(n,t)}for(const t of getAllCompositeMarks())delete n[t];redirectTitleConfig(n);for(const t in n)isObject(n[t])&&isEmpty(n[t])&&delete n[t];return isEmpty(n)?void 0:n}function redirectTitleConfig(n){const{titleMarkConfig:t,subtitleMarkConfig:i,subtitle:s}=extractTitleConfig(n.title);isEmpty(t)||(n.style["group-title"]={...n.style["group-title"],...t}),isEmpty(i)||(n.style["group-subtitle"]={...n.style["group-subtitle"],...i}),isEmpty(s)?delete n.title:n.title=s}function redirectConfigToStyleConfig(n,t,i,s){const o=n[t];t==="view"&&(i="cell");const f={...o,...n.style[i??t]};isEmpty(f)||(n.style[i??t]=f),delete n[t]}function isLayerSpec(n){return hasProperty(n,"layer")}function isRepeatSpec(n){return hasProperty(n,"repeat")}function isLayerRepeatSpec(n){return!isArray(n.repeat)&&hasProperty(n.repeat,"layer")}class SpecMapper{map(t,i){return isFacetSpec(t)?this.mapFacet(t,i):isRepeatSpec(t)?this.mapRepeat(t,i):isHConcatSpec(t)?this.mapHConcat(t,i):isVConcatSpec(t)?this.mapVConcat(t,i):isConcatSpec(t)?this.mapConcat(t,i):this.mapLayerOrUnit(t,i)}mapLayerOrUnit(t,i){if(isLayerSpec(t))return this.mapLayer(t,i);if(isUnitSpec(t))return this.mapUnit(t,i);throw new Error(invalidSpec(t))}mapLayer(t,i){return{...t,layer:t.layer.map(s=>this.mapLayerOrUnit(s,i))}}mapHConcat(t,i){return{...t,hconcat:t.hconcat.map(s=>this.map(s,i))}}mapVConcat(t,i){return{...t,vconcat:t.vconcat.map(s=>this.map(s,i))}}mapConcat(t,i){const{concat:s,...o}=t;return{...o,concat:s.map(f=>this.map(f,i))}}mapFacet(t,i){return{...t,spec:this.map(t.spec,i)}}mapRepeat(t,i){return{...t,spec:this.map(t.spec,i)}}}const STACK_OFFSET_INDEX={zero:1,center:1,normalize:1};function isStackOffset(n){return has$1(STACK_OFFSET_INDEX,n)}const STACKABLE_MARKS=new Set([ARC,BAR,AREA,RULE,POINT,CIRCLE,SQUARE,LINE,TEXT,TICK]),STACK_BY_DEFAULT_MARKS=new Set([BAR,AREA,ARC]);function isUnbinnedQuantitative(n){return isFieldDef(n)&&channelDefType(n)==="quantitative"&&!n.bin}function potentialStackedChannel(n,t,{orient:i,type:s}){const o=t==="x"?"y":"radius",f=t==="x"&&["bar","area"].includes(s),d=n[t],p=n[o];if(isFieldDef(d)&&isFieldDef(p))if(isUnbinnedQuantitative(d)&&isUnbinnedQuantitative(p)){if(d.stack)return t;if(p.stack)return o;const v=isFieldDef(d)&&!!d.aggregate,_=isFieldDef(p)&&!!p.aggregate;if(v!==_)return v?t:o;if(f){if(i==="vertical")return o;if(i==="horizontal")return t}}else{if(isUnbinnedQuantitative(d))return t;if(isUnbinnedQuantitative(p))return o}else{if(isUnbinnedQuantitative(d))return f&&i==="vertical"?void 0:t;if(isUnbinnedQuantitative(p))return f&&i==="horizontal"?void 0:o}}function getDimensionChannel(n){switch(n){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function stack(n,t){var W,j;const i=isMarkDef(n)?n:{type:n},s=i.type;if(!STACKABLE_MARKS.has(s))return null;const o=potentialStackedChannel(t,"x",i)||potentialStackedChannel(t,"theta",i);if(!o)return null;const f=t[o],d=isFieldDef(f)?vgField(f,{}):void 0,p=getDimensionChannel(o),v=[],_=new Set;if(t[p]){const H=t[p],me=isFieldDef(H)?vgField(H,{}):void 0;me&&me!==d&&(v.push(p),_.add(me))}const k=p==="x"?"xOffset":"yOffset",P=t[k],L=isFieldDef(P)?vgField(P,{}):void 0;L&&L!==d&&(v.push(k),_.add(L));const G=NONPOSITION_CHANNELS.reduce((H,me)=>{if(me!=="tooltip"&&channelHasField(t,me)){const $e=t[me];for(const De of array$5($e)){const le=getFieldDef(De);if(le.aggregate)continue;const Ce=vgField(le,{});(!Ce||!_.has(Ce))&&H.push({channel:me,fieldDef:le})}}return H},[]);let Z;return f.stack!==void 0?isBoolean$2(f.stack)?Z=f.stack?"zero":null:Z=f.stack:STACK_BY_DEFAULT_MARKS.has(s)&&(Z="zero"),!Z||!isStackOffset(Z)||isAggregate$1(t)&&G.length===0?null:((W=f==null?void 0:f.scale)!=null&&W.type&&((j=f==null?void 0:f.scale)==null?void 0:j.type)!==ScaleType.LINEAR&&f!=null&&f.stack&&warn(stackNonLinearScale(f.scale.type)),isFieldOrDatumDef(t[getSecondaryRangeChannel(o)])?(f.stack!==void 0&&warn(cannotStackRangedMark(o)),null):(isFieldDef(f)&&f.aggregate&&!SUM_OPS.has(f.aggregate)&&warn(stackNonSummativeAggregate(f.aggregate)),{groupbyChannels:v,groupbyFields:_,fieldChannel:o,impute:f.impute===null?!1:isPathMark(s),stackBy:G,offset:Z}))}function initMarkdef(n,t,i){const s=replaceExprRef(n),o=getMarkPropOrConfig("orient",s,i);if(s.orient=orient(s.type,t,o),o!==void 0&&o!==s.orient&&warn(orientOverridden(s.orient,o)),s.type==="bar"&&s.orient){const v=getMarkPropOrConfig("cornerRadiusEnd",s,i);if(v!==void 0){const _=s.orient==="horizontal"&&t.x2||s.orient==="vertical"&&t.y2?["cornerRadius"]:BAR_CORNER_RADIUS_INDEX[s.orient];for(const k of _)s[k]=v;s.cornerRadiusEnd!==void 0&&delete s.cornerRadiusEnd}}const f=getMarkPropOrConfig("opacity",s,i),d=getMarkPropOrConfig("fillOpacity",s,i);return f===void 0&&d===void 0&&(s.opacity=opacity(s.type,t)),getMarkPropOrConfig("cursor",s,i)===void 0&&(s.cursor=cursor(s,t,i)),s}function cursor(n,t,i){return t.href||n.href||getMarkPropOrConfig("href",n,i)?"pointer":n.cursor}function opacity(n,t){if(contains([POINT,TICK,CIRCLE,SQUARE],n)&&!isAggregate$1(t))return .7}function defaultFilled(n,t,{graticule:i}){if(i)return!1;const s=getMarkConfig("filled",n,t),o=n.type;return getFirstDefined(s,o!==POINT&&o!==LINE&&o!==RULE)}function orient(n,t,i){switch(n){case POINT:case CIRCLE:case SQUARE:case TEXT:case RECT:case IMAGE:return}const{x:s,y:o,x2:f,y2:d}=t;switch(n){case BAR:if(isFieldDef(s)&&(isBinned(s.bin)||isFieldDef(o)&&o.aggregate&&!s.aggregate))return"vertical";if(isFieldDef(o)&&(isBinned(o.bin)||isFieldDef(s)&&s.aggregate&&!o.aggregate))return"horizontal";if(d||f){if(i)return i;if(!f)return(isFieldDef(s)&&s.type===QUANTITATIVE&&!isBinning(s.bin)||isNumericDataDef(s))&&isFieldDef(o)&&isBinned(o.bin)?"horizontal":"vertical";if(!d)return(isFieldDef(o)&&o.type===QUANTITATIVE&&!isBinning(o.bin)||isNumericDataDef(o))&&isFieldDef(s)&&isBinned(s.bin)?"vertical":"horizontal"}case RULE:if(f&&!(isFieldDef(s)&&isBinned(s.bin))&&d&&!(isFieldDef(o)&&isBinned(o.bin)))return;case AREA:if(d)return isFieldDef(o)&&isBinned(o.bin)?"horizontal":"vertical";if(f)return isFieldDef(s)&&isBinned(s.bin)?"vertical":"horizontal";if(n===RULE){if(s&&!o)return"vertical";if(o&&!s)return"horizontal"}case LINE:case TICK:{const p=isUnbinnedQuantitativeFieldOrDatumDef(s),v=isUnbinnedQuantitativeFieldOrDatumDef(o);if(i)return i;if(p&&!v)return n!=="tick"?"horizontal":"vertical";if(!p&&v)return n!=="tick"?"vertical":"horizontal";if(p&&v)return"vertical";{const _=isTypedFieldDef(s)&&s.type===TEMPORAL,k=isTypedFieldDef(o)&&o.type===TEMPORAL;if(_&&!k)return"vertical";if(!_&&k)return"horizontal"}return}}return"vertical"}function dropLineAndPoint(n){const{point:t,line:i,...s}=n;return keys(s).length>1?s:s.type}function dropLineAndPointFromConfig(n){for(const t of["line","area","rule","trail"])n[t]&&(n={...n,[t]:omit(n[t],["point","line"])});return n}function getPointOverlay(n,t={},i){return n.point==="transparent"?{opacity:0}:n.point?isObject(n.point)?n.point:{}:n.point!==void 0?null:t.point||i.shape?isObject(t.point)?t.point:{}:void 0}function getLineOverlay(n,t={}){return n.line?n.line===!0?{}:n.line:n.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class PathOverlayNormalizer{constructor(){this.name="path-overlay"}hasMatchingType(t,i){if(isUnitSpec(t)){const{mark:s,encoding:o}=t,f=isMarkDef(s)?s:{type:s};switch(f.type){case"line":case"rule":case"trail":return!!getPointOverlay(f,i[f.type],o);case"area":return!!getPointOverlay(f,i[f.type],o)||!!getLineOverlay(f,i[f.type])}}return!1}run(t,i,s){const{config:o}=i,{params:f,projection:d,mark:p,name:v,encoding:_,...k}=t,P=normalizeEncoding(_,o),L=isMarkDef(p)?p:{type:p},G=getPointOverlay(L,o[L.type],P),Z=L.type==="area"&&getLineOverlay(L,o[L.type]),W=[{name:v,...f?{params:f}:{},mark:dropLineAndPoint({...L.type==="area"&&L.opacity===void 0&&L.fillOpacity===void 0?{opacity:.7}:{},...L}),encoding:omit(P,["shape"])}],j=stack(initMarkdef(L,P,o),P);let H=P;if(j){const{fieldChannel:me,offset:$e}=j;H={...P,[me]:{...P[me],...$e?{stack:$e}:{}}}}return H=omit(H,["y2","x2"]),Z&&W.push({...d?{projection:d}:{},mark:{type:"line",...pick(L,["clip","interpolate","tension","tooltip"]),...Z},encoding:H}),G&&W.push({...d?{projection:d}:{},mark:{type:"point",opacity:1,filled:!0,...pick(L,["clip","tooltip"]),...G},encoding:H}),s({...k,layer:W},{...i,config:dropLineAndPointFromConfig(o)})}}function replaceRepeaterInFacet(n,t){return t?isFacetMapping(n)?replaceRepeaterInMapping(n,t):replaceRepeaterInFieldDef(n,t):n}function replaceRepeaterInEncoding(n,t){return t?replaceRepeaterInMapping(n,t):n}function replaceRepeatInProp(n,t,i){const s=t[n];if(isRepeatRef(s)){if(s.repeat in i)return{...t,[n]:i[s.repeat]};warn(noSuchRepeatedValue(s.repeat));return}return t}function replaceRepeaterInFieldDef(n,t){if(n=replaceRepeatInProp("field",n,t),n!==void 0){if(n===null)return null;if(isSortableFieldDef(n)&&isSortField(n.sort)){const i=replaceRepeatInProp("field",n.sort,t);n={...n,...i?{sort:i}:{}}}return n}}function replaceRepeaterInFieldOrDatumDef(n,t){if(isFieldDef(n))return replaceRepeaterInFieldDef(n,t);{const i=replaceRepeatInProp("datum",n,t);return i!==n&&!i.type&&(i.type="nominal"),i}}function replaceRepeaterInChannelDef(n,t){if(isFieldOrDatumDef(n)){const i=replaceRepeaterInFieldOrDatumDef(n,t);if(i)return i;if(isConditionalDef(n))return{condition:n.condition}}else{if(hasConditionalFieldOrDatumDef(n)){const i=replaceRepeaterInFieldOrDatumDef(n.condition,t);if(i)return{...n,condition:i};{const{condition:s,...o}=n;return o}}return n}}function replaceRepeaterInMapping(n,t){const i={};for(const s in n)if(hasProperty(n,s)){const o=n[s];if(isArray(o))i[s]=o.map(f=>replaceRepeaterInChannelDef(f,t)).filter(f=>f);else{const f=replaceRepeaterInChannelDef(o,t);f!==void 0&&(i[s]=f)}}return i}class RuleForRangedLineNormalizer{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(isUnitSpec(t)){const{encoding:i,mark:s}=t;if(s==="line"||isMarkDef(s)&&s.type==="line")for(const o of SECONDARY_RANGE_CHANNEL){const f=getMainRangeChannel(o),d=i[f];if(i[o]&&(isFieldDef(d)&&!isBinned(d.bin)||isDatumDef(d)))return!0}}return!1}run(t,i,s){const{encoding:o,mark:f}=t;return warn(lineWithRange(!!o.x2,!!o.y2)),s({...t,mark:isObject(f)?{...f,type:"rule"}:"rule"},i)}}class CoreNormalizer extends SpecMapper{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[boxPlotNormalizer,errorBarNormalizer,errorBandNormalizer,new PathOverlayNormalizer,new RuleForRangedLineNormalizer]}map(t,i){if(isUnitSpec(t)){const s=channelHasField(t.encoding,ROW),o=channelHasField(t.encoding,COLUMN),f=channelHasField(t.encoding,FACET);if(s||o||f)return this.mapFacetedUnit(t,i)}return super.map(t,i)}mapUnit(t,i){const{parentEncoding:s,parentProjection:o}=i,f=replaceRepeaterInEncoding(t.encoding,i.repeater),d={...t,...t.name?{name:[i.repeaterPrefix,t.name].filter(v=>v).join("_")}:{},...f?{encoding:f}:{}};if(s||o)return this.mapUnitWithParentEncodingOrProjection(d,i);const p=this.mapLayerOrUnit.bind(this);for(const v of this.nonFacetUnitNormalizers)if(v.hasMatchingType(d,i.config))return v.run(d,i,p);return d}mapRepeat(t,i){return isLayerRepeatSpec(t)?this.mapLayerRepeat(t,i):this.mapNonLayerRepeat(t,i)}mapLayerRepeat(t,i){const{repeat:s,spec:o,...f}=t,{row:d,column:p,layer:v}=s,{repeater:_={},repeaterPrefix:k=""}=i;return d||p?this.mapRepeat({...t,repeat:{...d?{row:d}:{},...p?{column:p}:{}},spec:{repeat:{layer:v},spec:o}},i):{...f,layer:v.map(P=>{const L={..._,layer:P},G=`${(o.name?`${o.name}_`:"")+k}child__layer_${varName(P)}`,Z=this.mapLayerOrUnit(o,{...i,repeater:L,repeaterPrefix:G});return Z.name=G,Z})}}mapNonLayerRepeat(t,i){const{repeat:s,spec:o,data:f,...d}=t;!isArray(s)&&t.columns&&(t=omit(t,["columns"]),warn(columnsNotSupportByRowCol("repeat")));const p=[],{repeater:v={},repeaterPrefix:_=""}=i,k=!isArray(s)&&s.row||[v?v.row:null],P=!isArray(s)&&s.column||[v?v.column:null],L=isArray(s)&&s||[v?v.repeat:null];for(const Z of L)for(const W of k)for(const j of P){const H={repeat:Z,row:W,column:j,layer:v.layer},me=(o.name?`${o.name}_`:"")+_+"child__"+(isArray(s)?`${varName(Z)}`:(s.row?`row_${varName(W)}`:"")+(s.column?`column_${varName(j)}`:"")),$e=this.map(o,{...i,repeater:H,repeaterPrefix:me});$e.name=me,p.push(omit($e,["data"]))}const G=isArray(s)?t.columns:s.column?s.column.length:1;return{data:o.data??f,align:"all",...d,columns:G,concat:p}}mapFacet(t,i){const{facet:s}=t;return isFacetMapping(s)&&t.columns&&(t=omit(t,["columns"]),warn(columnsNotSupportByRowCol("facet"))),super.mapFacet(t,i)}mapUnitWithParentEncodingOrProjection(t,i){const{encoding:s,projection:o}=t,{parentEncoding:f,parentProjection:d,config:p}=i,v=mergeProjection({parentProjection:d,projection:o}),_=mergeEncoding({parentEncoding:f,encoding:replaceRepeaterInEncoding(s,i.repeater)});return this.mapUnit({...t,...v?{projection:v}:{},..._?{encoding:_}:{}},{config:p})}mapFacetedUnit(t,i){const{row:s,column:o,facet:f,...d}=t.encoding,{mark:p,width:v,projection:_,height:k,view:P,params:L,encoding:G,...Z}=t,{facetMapping:W,layout:j}=this.getFacetMappingAndLayout({row:s,column:o,facet:f},i),H=replaceRepeaterInEncoding(d,i.repeater);return this.mapFacet({...Z,...j,facet:W,spec:{...v?{width:v}:{},...k?{height:k}:{},...P?{view:P}:{},..._?{projection:_}:{},mark:p,encoding:H,...L?{params:L}:{}}},i)}getFacetMappingAndLayout(t,i){const{row:s,column:o,facet:f}=t;if(s||o){f&&warn(facetChannelDropped([...s?[ROW]:[],...o?[COLUMN]:[]]));const d={},p={};for(const v of[ROW,COLUMN]){const _=t[v];if(_){const{align:k,center:P,spacing:L,columns:G,...Z}=_;d[v]=Z;for(const W of["align","center","spacing"])_[W]!==void 0&&(p[W]??(p[W]={}),p[W][v]=_[W])}}return{facetMapping:d,layout:p}}else{const{align:d,center:p,spacing:v,columns:_,...k}=f;return{facetMapping:replaceRepeaterInFacet(k,i.repeater),layout:{...d?{align:d}:{},...p?{center:p}:{},...v?{spacing:v}:{},..._?{columns:_}:{}}}}}mapLayer(t,{parentEncoding:i,parentProjection:s,...o}){const{encoding:f,projection:d,...p}=t,v={...o,parentEncoding:mergeEncoding({parentEncoding:i,encoding:f,layer:!0}),parentProjection:mergeProjection({parentProjection:s,projection:d})};return super.mapLayer({...p,...t.name?{name:[v.repeaterPrefix,t.name].filter(_=>_).join("_")}:{}},v)}}function mergeEncoding({parentEncoding:n,encoding:t={},layer:i}){let s={};if(n){const o=new Set([...keys(n),...keys(t)]);for(const f of o){const d=t[f],p=n[f];if(isFieldOrDatumDef(d)){const v={...p,...d};s[f]=v}else hasConditionalFieldOrDatumDef(d)?s[f]={...d,condition:{...p,...d.condition}}:d||d===null?s[f]=d:(i||isValueDef(p)||isSignalRef(p)||isFieldOrDatumDef(p)||isArray(p))&&(s[f]=p)}}else s=t;return!s||isEmpty(s)?void 0:s}function mergeProjection(n){const{parentProjection:t,projection:i}=n;return t&&i&&warn(projectionOverridden({parentProjection:t,projection:i})),i??t}function isFilter(n){return hasProperty(n,"filter")}function isImputeSequence(n){return hasProperty(n,"stop")}function isLookup(n){return hasProperty(n,"lookup")}function isLookupData(n){return hasProperty(n,"data")}function isLookupSelection(n){return hasProperty(n,"param")}function isPivot(n){return hasProperty(n,"pivot")}function isDensity(n){return hasProperty(n,"density")}function isQuantile(n){return hasProperty(n,"quantile")}function isRegression(n){return hasProperty(n,"regression")}function isLoess(n){return hasProperty(n,"loess")}function isSample(n){return hasProperty(n,"sample")}function isWindow(n){return hasProperty(n,"window")}function isJoinAggregate(n){return hasProperty(n,"joinaggregate")}function isFlatten(n){return hasProperty(n,"flatten")}function isCalculate(n){return hasProperty(n,"calculate")}function isBin(n){return hasProperty(n,"bin")}function isImpute(n){return hasProperty(n,"impute")}function isTimeUnit(n){return hasProperty(n,"timeUnit")}function isAggregate(n){return hasProperty(n,"aggregate")}function isStack(n){return hasProperty(n,"stack")}function isFold(n){return hasProperty(n,"fold")}function isExtent(n){return hasProperty(n,"extent")&&!hasProperty(n,"density")&&!hasProperty(n,"regression")}function normalizeTransform(n){return n.map(t=>isFilter(t)?{filter:normalizeLogicalComposition(t.filter,normalizePredicate$1)}:t)}class SelectionCompatibilityNormalizer extends SpecMapper{map(t,i){return i.emptySelections??(i.emptySelections={}),i.selectionPredicates??(i.selectionPredicates={}),t=normalizeTransforms(t,i),super.map(t,i)}mapLayerOrUnit(t,i){if(t=normalizeTransforms(t,i),t.encoding){const s={};for(const[o,f]of entries$1(t.encoding))s[o]=normalizeChannelDef(f,i);t={...t,encoding:s}}return super.mapLayerOrUnit(t,i)}mapUnit(t,i){const{selection:s,...o}=t;return s?{...o,params:entries$1(s).map(([f,d])=>{const{init:p,bind:v,empty:_,...k}=d;k.type==="single"?(k.type="point",k.toggle=!1):k.type==="multi"&&(k.type="point"),i.emptySelections[f]=_!=="none";for(const P of vals(i.selectionPredicates[f]??{}))P.empty=_!=="none";return{name:f,value:p,select:k,bind:v}})}:t}}function normalizeTransforms(n,t){const{transform:i,...s}=n;if(i){const o=i.map(f=>{if(isFilter(f))return{filter:normalizePredicate(f,t)};if(isBin(f)&&isBinParams(f.bin))return{...f,bin:normalizeBinExtent(f.bin)};if(isLookup(f)){const{selection:d,...p}=f.from;return d?{...f,from:{param:d,...p}}:f}return f});return{...s,transform:o}}return n}function normalizeChannelDef(n,t){var s,o;const i=duplicate(n);if(isFieldDef(i)&&isBinParams(i.bin)&&(i.bin=normalizeBinExtent(i.bin)),isScaleFieldDef(i)&&((o=(s=i.scale)==null?void 0:s.domain)!=null&&o.selection)){const{selection:f,...d}=i.scale.domain;i.scale.domain={...d,...f?{param:f}:{}}}if(isConditionalDef(i))if(isArray(i.condition))i.condition=i.condition.map(f=>{const{selection:d,param:p,test:v,..._}=f;return p?f:{..._,test:normalizePredicate(f,t)}});else{const{selection:f,param:d,test:p,...v}=normalizeChannelDef(i.condition,t);i.condition=d?i.condition:{...v,test:normalizePredicate(i.condition,t)}}return i}function normalizeBinExtent(n){const t=n.extent;if(t!=null&&t.selection){const{selection:i,...s}=t;return{...n,extent:{...s,param:i}}}return n}function normalizePredicate(n,t){const i=s=>normalizeLogicalComposition(s,o=>{var f;const d=t.emptySelections[o]??!0,p={param:o,empty:d};return(f=t.selectionPredicates)[o]??(f[o]=[]),t.selectionPredicates[o].push(p),p});return n.selection?i(n.selection):normalizeLogicalComposition(n.test||n.filter,s=>s.selection?i(s.selection):s)}class TopLevelSelectionsNormalizer extends SpecMapper{map(t,i){const s=i.selections??[];if(t.params&&!isUnitSpec(t)){const o=[];for(const f of t.params)isSelectionParameter(f)?s.push(f):o.push(f);t.params=o}return i.selections=s,super.map(t,i)}mapUnit(t,i){const s=i.selections;if(!s||!s.length)return t;const o=(i.path??[]).concat(t.name),f=[];for(const d of s)if(!d.views||!d.views.length)f.push(d);else for(const p of d.views)(isString(p)&&(p===t.name||o.includes(p))||isArray(p)&&p.map(v=>o.indexOf(v)).every((v,_,k)=>v!==-1&&(_===0||v>k[_-1])))&&f.push(d);return f.length&&(t.params=f),t}}for(const n of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=TopLevelSelectionsNormalizer.prototype[n];TopLevelSelectionsNormalizer.prototype[n]=function(i,s){return t.call(this,i,addSpecNameToParams(i,s))}}function addSpecNameToParams(n,t){return n.name?{...t,path:(t.path??[]).concat(n.name)}:t}function normalize(n,t){t===void 0&&(t=initConfig(n.config));const i=normalizeGenericSpec(n,t),{width:s,height:o}=n,f=normalizeAutoSize(i,{width:s,height:o,autosize:n.autosize},t);return{...i,...f?{autosize:f}:{}}}const coreNormalizer=new CoreNormalizer,selectionCompatNormalizer=new SelectionCompatibilityNormalizer,topLevelSelectionNormalizer=new TopLevelSelectionsNormalizer;function normalizeGenericSpec(n,t={}){const i={config:t};return topLevelSelectionNormalizer.map(coreNormalizer.map(selectionCompatNormalizer.map(n,i),i),i)}function _normalizeAutoSize(n){return isString(n)?{type:n}:n??{}}function normalizeAutoSize(n,t,i){let{width:s,height:o}=t;const f=isUnitSpec(n)||isLayerSpec(n),d={};f?s=="container"&&o=="container"?(d.type="fit",d.contains="padding"):s=="container"?(d.type="fit-x",d.contains="padding"):o=="container"&&(d.type="fit-y",d.contains="padding"):(s=="container"&&(warn(containerSizeNonSingle("width")),s=void 0),o=="container"&&(warn(containerSizeNonSingle("height")),o=void 0));const p={type:"pad",...d,...i?_normalizeAutoSize(i.autosize):{},..._normalizeAutoSize(n.autosize)};if(p.type==="fit"&&!f&&(warn(FIT_NON_SINGLE),p.type="pad"),s=="container"&&!(p.type=="fit"||p.type=="fit-x")&&warn(containerSizeNotCompatibleWithAutosize("width")),o=="container"&&!(p.type=="fit"||p.type=="fit-y")&&warn(containerSizeNotCompatibleWithAutosize("height")),!deepEqual(p,{type:"pad"}))return p}function isFitType(n){return["fit","fit-x","fit-y"].includes(n)}function getFitType(n){return n?`fit-${getPositionScaleChannel(n)}`:"fit"}const TOP_LEVEL_PROPERTIES=["background","padding"];function extractTopLevelProperties(n,t){const i={};for(const s of TOP_LEVEL_PROPERTIES)n&&n[s]!==void 0&&(i[s]=signalRefOrValue(n[s]));return t&&(i.params=n.params),i}class Split{constructor(t={},i={}){this.explicit=t,this.implicit=i}clone(){return new Split(duplicate(this.explicit),duplicate(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return getFirstDefined(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:i,explicit:s}){i!==void 0&&this.set(t,i,s)}set(t,i,s){return delete this[s?"implicit":"explicit"][t],this[s?"explicit":"implicit"][t]=i,this}copyKeyFromSplit(t,{explicit:i,implicit:s}){i[t]!==void 0?this.set(t,i[t],!0):s[t]!==void 0&&this.set(t,s[t],!1)}copyKeyFromObject(t,i){i[t]!==void 0&&this.set(t,i[t],!0)}copyAll(t){for(const i of keys(t.combine())){const s=t.getWithExplicit(i);this.setWithExplicit(i,s)}}}function makeExplicit(n){return{explicit:!0,value:n}}function makeImplicit(n){return{explicit:!1,value:n}}function tieBreakByComparing(n){return(t,i,s,o)=>{const f=n(t.value,i.value);return f>0?t:f<0?i:defaultTieBreaker(t,i,s,o)}}function defaultTieBreaker(n,t,i,s){return n.explicit&&t.explicit&&warn(mergeConflictingProperty(i,s,n.value,t.value)),n}function mergeValuesWithExplicit(n,t,i,s,o=defaultTieBreaker){return n===void 0||n.value===void 0?t:n.explicit&&!t.explicit?n:t.explicit&&!n.explicit?t:deepEqual(n.value,t.value)?n:o(n,t,i,s)}class AncestorParse extends Split{constructor(t={},i={},s=!1){super(t,i),this.explicit=t,this.implicit=i,this.parseNothing=s}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function isUrlData(n){return hasProperty(n,"url")}function isInlineData(n){return hasProperty(n,"values")}function isNamedData(n){return hasProperty(n,"name")&&!isUrlData(n)&&!isInlineData(n)&&!isGenerator(n)}function isGenerator(n){return n&&(isSequenceGenerator(n)||isSphereGenerator(n)||isGraticuleGenerator(n))}function isSequenceGenerator(n){return hasProperty(n,"sequence")}function isSphereGenerator(n){return hasProperty(n,"sphere")}function isGraticuleGenerator(n){return hasProperty(n,"graticule")}var DataSourceType;(function(n){n[n.Raw=0]="Raw",n[n.Main=1]="Main",n[n.Row=2]="Row",n[n.Column=3]="Column",n[n.Lookup=4]="Lookup",n[n.PreFilterInvalid=5]="PreFilterInvalid",n[n.PostFilterInvalid=6]="PostFilterInvalid"})(DataSourceType||(DataSourceType={}));function getDataSourcesForHandlingInvalidValues({invalid:n,isPath:t}){switch(normalizeInvalidDataMode(n,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function getScaleDataSourceForHandlingInvalidValues(n){const{marks:t,scales:i}=getDataSourcesForHandlingInvalidValues(n);return t===i?DataSourceType.Main:i==="include-invalid-values"?DataSourceType.PreFilterInvalid:DataSourceType.PostFilterInvalid}class DataFlowNode{constructor(t,i){this.debugName=i,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,i){if(this._children.includes(t)){warn(ADD_SAME_CHILD_TWICE);return}i!==void 0?this._children.splice(i,0,t):this._children.push(t)}removeChild(t){const i=this._children.indexOf(t);return this._children.splice(i,1),i}remove(){let t=this._parent.removeChild(this);for(const i of this._children)i._parent=this._parent,this._parent.addChild(i,t++)}insertAsParentOf(t){const i=t.parent;i.removeChild(this),this.parent=i,t.parent=this}swapWithParent(){const t=this._parent,i=t.parent;for(const o of this._children)o.parent=t;this._children=[],t.removeChild(this);const s=t.parent.removeChild(t);this._parent=i,i.addChild(this,s),t.parent=this}}class OutputNode extends DataFlowNode{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,i,s,o){super(t,i),this.type=s,this.refCounts=o,this._source=this._name=i,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${uniqueId()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function isTimeUnitTransformComponent(n){return n.as!==void 0}function offsetAs(n){return`${n}_end`}class TimeUnitNode extends DataFlowNode{clone(){return new TimeUnitNode(null,duplicate(this.timeUnits))}constructor(t,i){super(t),this.timeUnits=i}static makeFromEncoding(t,i){const s=i.reduceFieldDef((o,f,d)=>{const{field:p,timeUnit:v}=f;if(v){let _;if(isBinnedTimeUnit(v)){if(isUnitModel(i)){const{mark:k,markDef:P,config:L}=i,G=getBandPosition({fieldDef:f,markDef:P,config:L});(isRectBasedMark(k)||G)&&(_={timeUnit:normalizeTimeUnit(v),field:p})}}else _={as:vgField(f,{forAs:!0}),field:p,timeUnit:v};if(isUnitModel(i)){const{mark:k,markDef:P,config:L}=i,G=getBandPosition({fieldDef:f,markDef:P,config:L});isRectBasedMark(k)&&isXorY(d)&&G!==.5&&(_.rectBandPosition=G)}_&&(o[hash(_)]=_)}return o},{});return isEmpty(s)?null:new TimeUnitNode(t,s)}static makeFromTransform(t,i){const{timeUnit:s,...o}={...i},f=normalizeTimeUnit(s),d={...o,timeUnit:f};return new TimeUnitNode(t,{[hash(d)]:d})}merge(t){this.timeUnits={...this.timeUnits};for(const i in t.timeUnits)this.timeUnits[i]||(this.timeUnits[i]=t.timeUnits[i]);for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}removeFormulas(t){const i={};for(const[s,o]of entries$1(this.timeUnits)){const f=isTimeUnitTransformComponent(o)?o.as:`${o.field}_end`;t.has(f)||(i[s]=o)}this.timeUnits=i}producedFields(){return new Set(vals(this.timeUnits).map(t=>isTimeUnitTransformComponent(t)?t.as:offsetAs(t.field)))}dependentFields(){return new Set(vals(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${hash(this.timeUnits)}`}assemble(){const t=[];for(const i of vals(this.timeUnits)){const{rectBandPosition:s}=i,o=normalizeTimeUnit(i.timeUnit);if(isTimeUnitTransformComponent(i)){const{field:f,as:d}=i,{unit:p,utc:v,..._}=o,k=[d,`${d}_end`];t.push({field:replacePathInField(f),type:"timeunit",...p?{units:getTimeUnitParts(p)}:{},...v?{timezone:"utc"}:{},..._,as:k}),t.push(...offsetedRectFormulas(k,s,o))}else if(i){const{field:f}=i,d=f.replaceAll("\\.","."),p=offsetExpr({timeUnit:o,field:d}),v=offsetAs(d);t.push({type:"formula",expr:p,as:v}),t.push(...offsetedRectFormulas([d,v],s,o))}}return t}}const OFFSETTED_RECT_START_SUFFIX="offsetted_rect_start",OFFSETTED_RECT_END_SUFFIX="offsetted_rect_end";function offsetExpr({timeUnit:n,field:t,reverse:i}){const{unit:s,utc:o}=n,f=getSmallestTimeUnitPart(s),{part:d,step:p}=getDateTimePartAndStep(f,n.step);return`${o?"utcOffset":"timeOffset"}('${d}', ${accessWithDatumToUnescapedPath(t)}, ${i?-p:p})`}function offsetedRectFormulas([n,t],i,s){if(i!==void 0&&i!==.5){const o=accessWithDatumToUnescapedPath(n),f=accessWithDatumToUnescapedPath(t);return[{type:"formula",expr:interpolateExpr([offsetExpr({timeUnit:s,field:n,reverse:!0}),o],i+.5),as:`${n}_${OFFSETTED_RECT_START_SUFFIX}`},{type:"formula",expr:interpolateExpr([o,f],i+.5),as:`${n}_${OFFSETTED_RECT_END_SUFFIX}`}]}return[]}function interpolateExpr([n,t],i){return`${1-i} * ${n} + ${i} * ${t}`}const TUPLE_FIELDS="_tuple_fields";class SelectionProjectionComponent{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const project={defined:()=>!0,parse:(n,t,i)=>{const s=t.name,o=t.project??(t.project=new SelectionProjectionComponent),f={},d={},p=new Set,v=(Z,W)=>{const j=W==="visual"?Z.channel:Z.field;let H=varName(`${s}_${j}`);for(let me=1;p.has(H);me++)H=varName(`${s}_${j}_${me}`);return p.add(H),{[W]:H}},_=t.type,k=n.config.selection[_],P=i.value!==void 0?array$5(i.value):null;let{fields:L,encodings:G}=isObject(i.select)?i.select:{};if(!L&&!G&&P){for(const Z of P)if(isObject(Z))for(const W of keys(Z))isSingleDefUnitChannel(W)?(G||(G=[])).push(W):_==="interval"?(warn(INTERVAL_INITIALIZED_WITH_POS),G=k.encodings):(L??(L=[])).push(W)}!L&&!G&&(G=k.encodings,"fields"in k&&(L=k.fields));for(const Z of G??[]){const W=n.fieldDef(Z);if(W){let j=W.field;if(W.aggregate){warn(cannotProjectAggregate(Z,W.aggregate));continue}else if(!j){warn(cannotProjectOnChannelWithoutField(Z));continue}if(W.timeUnit&&!isBinnedTimeUnit(W.timeUnit)){j=n.vgField(Z);const H={timeUnit:W.timeUnit,as:j,field:W.field};d[hash(H)]=H}if(!f[j]){const H=_==="interval"&&isScaleChannel(Z)&&hasContinuousDomain(n.getScaleComponent(Z).get("type"))?"R":W.bin?"R-RE":"E",me={field:j,channel:Z,type:H,index:o.items.length};me.signals={...v(me,"data"),...v(me,"visual")},o.items.push(f[j]=me),o.hasField[j]=f[j],o.hasSelectionId=o.hasSelectionId||j===SELECTION_ID,isGeoPositionChannel(Z)?(me.geoChannel=Z,me.channel=getPositionChannelFromLatLong(Z),o.hasChannel[me.channel]=f[j]):o.hasChannel[Z]=f[j]}}else warn(cannotProjectOnChannelWithoutField(Z))}for(const Z of L??[]){if(o.hasField[Z])continue;const W={type:"E",field:Z,index:o.items.length};W.signals={...v(W,"data")},o.items.push(W),o.hasField[Z]=W,o.hasSelectionId=o.hasSelectionId||Z===SELECTION_ID}P&&(t.init=P.map(Z=>o.items.map(W=>isObject(Z)?Z[W.geoChannel||W.channel]!==void 0?Z[W.geoChannel||W.channel]:Z[W.field]:Z))),isEmpty(d)||(o.timeUnit=new TimeUnitNode(null,d))},signals:(n,t,i)=>{const s=t.name+TUPLE_FIELDS;return i.filter(f=>f.name===s).length>0||t.project.hasSelectionId?i:i.concat({name:s,value:t.project.items.map(assembleProjection)})}},CURR="_curr",ANIM_VALUE="anim_value",ANIM_CLOCK="anim_clock",EASED_ANIM_CLOCK="eased_anim_clock",MIN_EXTENT="min_extent",MAX_RANGE_EXTENT="max_range_extent",LAST_TICK="last_tick_at",IS_PLAYING="is_playing",THROTTLE=1/60*1e3,animationSignals=(n,t)=>[{name:EASED_ANIM_CLOCK,update:ANIM_CLOCK},{name:`${n}_domain`,init:`domain('${t}')`},{name:MIN_EXTENT,init:`extent(${n}_domain)[0]`},{name:MAX_RANGE_EXTENT,init:`extent(range('${t}'))[1]`},{name:ANIM_VALUE,update:`invert('${t}', ${EASED_ANIM_CLOCK})`}],point$1={defined:n=>n.type==="point",topLevelSignals:(n,t,i)=>(isTimerSelection(t)&&(i=i.concat([{name:ANIM_CLOCK,init:"0",on:[{events:{type:"timer",throttle:THROTTLE},update:`${IS_PLAYING} ? (${ANIM_CLOCK} + (now() - ${LAST_TICK}) > ${MAX_RANGE_EXTENT} ? 0 : ${ANIM_CLOCK} + (now() - ${LAST_TICK})) : ${ANIM_CLOCK}`}]},{name:LAST_TICK,init:"now()",on:[{events:[{signal:ANIM_CLOCK},{signal:IS_PLAYING}],update:"now()"}]},{name:IS_PLAYING,init:"true"}])),i),signals:(n,t,i)=>{const s=t.name,o=s+TUPLE_FIELDS,f=t.project,d="(item().isVoronoi ? datum.datum : datum)",p=vals(n.component.selection??{}).reduce((k,P)=>P.type==="interval"?k.concat(P.name+BRUSH):k,[]).map(k=>`indexof(item().mark.name, '${k}') < 0`).join(" && "),v=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${p?` && ${p}`:""}`;let _=`unit: ${unitName(n)}, `;if(t.project.hasSelectionId)_+=`${SELECTION_ID}: ${d}[${$(SELECTION_ID)}]`;else if(isTimerSelection(t))_+=`fields: ${o}, values: [${ANIM_VALUE} ? ${ANIM_VALUE} : ${MIN_EXTENT}]`;else{const k=f.items.map(P=>{const L=n.fieldDef(P.channel);return L!=null&&L.bin?`[${d}[${$(n.vgField(P.channel,{}))}], ${d}[${$(n.vgField(P.channel,{binSuffix:"end"}))}]]`:`${d}[${$(P.field)}]`}).join(", ");_+=`fields: ${o}, values: [${k}]`}if(isTimerSelection(t))return i.concat(animationSignals(t.name,n.scaleName(TIME)),[{name:s+TUPLE,on:[{events:[{signal:EASED_ANIM_CLOCK},{signal:ANIM_VALUE}],update:`{${_}}`,force:!0}]}]);{const k=t.events;return i.concat([{name:s+TUPLE,on:k?[{events:k,update:`${v} ? {${_}} : null`,force:!0}]:[]}])}}};function assembleProjection(n){const{signals:t,hasLegend:i,index:s,...o}=n;return o.field=replacePathInField(o.field),o}function assembleInit(n,t=!0,i=identity$7){if(isArray(n)){const s=n.map(o=>assembleInit(o,t,i));return t?`[${s.join(", ")}]`:s}else if(isDateTime(n))return i(t?dateTimeToExpr(n):dateTimeToTimestamp(n));return t?i(stringify(n)):n}function assembleUnitSelectionSignals(n,t){for(const i of vals(n.component.selection??{})){const s=i.name;let o=`${s}${TUPLE}, ${i.resolve==="global"?"true":`{unit: ${unitName(n)}}`}`;for(const f of selectionCompilers)f.defined(i)&&(f.signals&&(t=f.signals(n,i,t)),f.modifyExpr&&(o=f.modifyExpr(n,i,o)));t.push({name:s+MODIFY,on:[{events:{signal:i.name+TUPLE},update:`modify(${$(i.name+STORE)}, ${o})`}]})}return cleanupEmptyOnArray(t)}function assembleFacetSignals(n,t){if(n.component.selection&&keys(n.component.selection).length){const i=$(n.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:eventSelector("pointermove","scope"),update:`isTuple(facet) ? facet : group(${i}).datum`}]})}return cleanupEmptyOnArray(t)}function assembleTopLevelSignals(n,t){let i=!1;for(const s of vals(n.component.selection??{})){const o=s.name,f=$(o+STORE);if(t.filter(p=>p.name===o).length===0){const p=s.resolve==="global"?"union":s.resolve,v=s.type==="point"?", true, true)":")";t.push({name:s.name,update:`${VL_SELECTION_RESOLVE}(${f}, ${$(p)}${v}`})}i=!0;for(const p of selectionCompilers)p.defined(s)&&p.topLevelSignals&&(t=p.topLevelSignals(n,s,t))}return i&&t.filter(o=>o.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),cleanupEmptyOnArray(t)}function assembleUnitSelectionData(n,t){const i=[],s=[],o=unitName(n,{escape:!1});for(const f of vals(n.component.selection??{})){const d={name:f.name+STORE};if(f.project.hasSelectionId&&(d.transform=[{type:"collect",sort:{field:SELECTION_ID}}]),f.init){const v=f.project.items.map(assembleProjection);d.values=f.project.hasSelectionId?f.init.map(_=>({unit:o,[SELECTION_ID]:assembleInit(_,!1)[0]})):f.init.map(_=>({unit:o,fields:v,values:assembleInit(_,!1)}))}if([...i,...t].filter(v=>v.name===f.name+STORE).length||i.push(d),isTimerSelection(f)&&t.length){const v=n.lookupDataSource(n.getDataName(DataSourceType.Main)),_=t.find(P=>P.name===v),k=_.transform.find(P=>P.type==="filter"&&P.expr.includes("vlSelectionTest"));if(k){_.transform=_.transform.filter(L=>L!==k);const P={name:_.name+CURR,source:_.name,transform:[k]};s.push(P)}}}return i.concat(t,s)}function assembleUnitSelectionMarks(n,t){for(const i of vals(n.component.selection??{}))for(const s of selectionCompilers)s.defined(i)&&s.marks&&(t=s.marks(n,i,t));return t}function assembleLayerSelectionMarks(n,t){for(const i of n.children)isUnitModel(i)&&(t=assembleUnitSelectionMarks(i,t));return t}function assembleSelectionScaleDomain(n,t,i,s){const o=parseSelectionExtent(n,t.param,t);return{signal:hasContinuousDomain(i.get("type"))&&isArray(s)&&s[0]>s[1]?`isValid(${o}) && reverse(${o})`:o}}function cleanupEmptyOnArray(n){return n.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const scaleBindings={defined:n=>n.type==="interval"&&n.resolve==="global"&&n.bind&&n.bind==="scales",parse:(n,t)=>{const i=t.scales=[];for(const s of t.project.items){const o=s.channel;if(!isScaleChannel(o))continue;const f=n.getScaleComponent(o),d=f?f.get("type"):void 0;if(d=="sequential"&&warn(SEQUENTIAL_SCALE_DEPRECATED),!f||!hasContinuousDomain(d)){warn(SCALE_BINDINGS_CONTINUOUS);continue}f.set("selectionExtent",{param:t.name,field:s.field},!0),i.push(s)}},topLevelSignals:(n,t,i)=>{const s=t.scales.filter(d=>i.filter(p=>p.name===d.signals.data).length===0);if(!n.parent||isTopLevelLayer(n)||s.length===0)return i;const o=i.find(d=>d.name===t.name);let f=o.update;if(f.includes(VL_SELECTION_RESOLVE))o.update=`{${s.map(d=>`${$(replacePathInField(d.field))}: ${d.signals.data}`).join(", ")}}`;else{for(const d of s){const p=`${$(replacePathInField(d.field))}: ${d.signals.data}`;f.includes(p)||(f=`${f.substring(0,f.length-1)}, ${p}}`)}o.update=f}return i.concat(s.map(d=>({name:d.signals.data})))},signals:(n,t,i)=>{if(n.parent&&!isTopLevelLayer(n))for(const s of t.scales){const o=i.find(f=>f.name===s.signals.data);o.push="outer",delete o.value,delete o.update}return i}};function domain(n,t){return`domain(${$(n.scaleName(t))})`}function isTopLevelLayer(n){return n.parent&&isLayerModel(n.parent)&&(!n.parent.parent||isTopLevelLayer(n.parent.parent))}const BRUSH="_brush",SCALE_TRIGGER="_scale_trigger",GEO_INIT_TICK="geo_interval_init_tick",INIT="_init",CENTER="_center",interval={defined:n=>n.type==="interval",parse:(n,t,i)=>{var s;if(n.hasProjection){const o={...isObject(i.select)?i.select:{}};o.fields=[SELECTION_ID],o.encodings||(o.encodings=i.value?keys(i.value):[LONGITUDE,LATITUDE]),i.select={type:"interval",...o}}if(t.translate&&!scaleBindings.defined(t)){const o=`!event.item || event.item.mark.name !== ${$(t.name+BRUSH)}`;for(const f of t.events){if(!f.between){warn(`${f} is not an ordered event stream for interval selections.`);continue}const d=array$5((s=f.between[0]).filter??(s.filter=[]));d.includes(o)||d.push(o)}}},signals:(n,t,i)=>{const s=t.name,o=s+TUPLE,f=vals(t.project.hasChannel).filter(p=>p.channel===X$1||p.channel===Y$1),d=t.init?t.init[0]:null;if(i.push(...f.reduce((p,v)=>p.concat(channelSignals(n,t,v,d&&d[v.index])),[])),n.hasProjection){const p=$(n.projectionName()),v=n.projectionName()+CENTER,{x:_,y:k}=t.project.hasChannel,P=_&&_.signals.visual,L=k&&k.signals.visual,G=_?d&&d[_.index]:`${v}[0]`,Z=k?d&&d[k.index]:`${v}[1]`,W=le=>n.getSizeSignalRef(le).signal,j=`[[${P?P+"[0]":"0"}, ${L?L+"[0]":"0"}],[${P?P+"[1]":W("width")}, ${L?L+"[1]":W("height")}]]`;d&&(i.unshift({name:s+INIT,init:`[scale(${p}, [${_?G[0]:G}, ${k?Z[0]:Z}]), scale(${p}, [${_?G[1]:G}, ${k?Z[1]:Z}])]`}),(!_||!k)&&(i.find(Ce=>Ce.name===v)||i.unshift({name:v,update:`invert(${p}, [${W("width")}/2, ${W("height")}/2])`})));const H=`intersect(${j}, {markname: ${$(n.getName("marks"))}}, unit.mark)`,me=`{unit: ${unitName(n)}}`,$e=`vlSelectionTuples(${H}, ${me})`,De=f.map(le=>le.signals.visual);return i.concat({name:o,on:[{events:[...De.length?[{signal:De.join(" || ")}]:[],...d?[{signal:GEO_INIT_TICK}]:[]],update:$e}]})}else{if(!scaleBindings.defined(t)){const _=s+SCALE_TRIGGER,k=f.map(P=>{const L=P.channel,{data:G,visual:Z}=P.signals,W=$(n.scaleName(L)),j=n.getScaleComponent(L).get("type"),H=hasContinuousDomain(j)?"+":"";return`(!isArray(${G}) || (${H}invert(${W}, ${Z})[0] === ${H}${G}[0] && ${H}invert(${W}, ${Z})[1] === ${H}${G}[1]))`});k.length&&i.push({name:_,value:{},on:[{events:f.map(P=>({scale:n.scaleName(P.channel)})),update:k.join(" && ")+` ? ${_} : {}`}]})}const p=f.map(_=>_.signals.data),v=`unit: ${unitName(n)}, fields: ${s+TUPLE_FIELDS}, values`;return i.concat({name:o,...d?{init:`{${v}: ${assembleInit(d)}}`}:{},...p.length?{on:[{events:[{signal:p.join(" || ")}],update:`${p.join(" && ")} ? {${v}: [${p}]} : null`}]}:{}})}},topLevelSignals:(n,t,i)=>(isUnitModel(n)&&n.hasProjection&&t.init&&(i.filter(o=>o.name===GEO_INIT_TICK).length||i.unshift({name:GEO_INIT_TICK,value:null,on:[{events:"timer{1}",update:`${GEO_INIT_TICK} === null ? {} : ${GEO_INIT_TICK}`}]})),i),marks:(n,t,i)=>{const s=t.name,{x:o,y:f}=t.project.hasChannel,d=o==null?void 0:o.signals.visual,p=f==null?void 0:f.signals.visual,v=`data(${$(t.name+STORE)})`;if(scaleBindings.defined(t)||!o&&!f)return i;const _={x:o!==void 0?{signal:`${d}[0]`}:{value:0},y:f!==void 0?{signal:`${p}[0]`}:{value:0},x2:o!==void 0?{signal:`${d}[1]`}:{field:{group:"width"}},y2:f!==void 0?{signal:`${p}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const j of keys(_))_[j]=[{test:`${v}.length && ${v}[0].unit === ${unitName(n)}`,..._[j]},{value:0}];const{fill:k,fillOpacity:P,cursor:L,...G}=t.mark,Z=keys(G).reduce((j,H)=>(j[H]=[{test:[o!==void 0&&`${d}[0] !== ${d}[1]`,f!==void 0&&`${p}[0] !== ${p}[1]`].filter(me=>me).join(" && "),value:G[H]},{value:null}],j),{}),W=L??(t.translate?"move":null);return[{name:`${s+BRUSH}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:k},fillOpacity:{value:P}},update:_}},...i,{name:s+BRUSH,type:"rect",clip:!0,encode:{enter:{...W?{cursor:{value:W}}:{},fill:{value:"transparent"}},update:{..._,...Z}}}]}};function channelSignals(n,t,i,s){const o=!n.hasProjection,f=i.channel,d=i.signals.visual,p=$(o?n.scaleName(f):n.projectionName()),v=L=>`scale(${p}, ${L})`,_=n.getSizeSignalRef(f===X$1?"width":"height").signal,k=`${f}(unit)`,P=t.events.reduce((L,G)=>[...L,{events:G.between[0],update:`[${k}, ${k}]`},{events:G,update:`[${d}[0], clamp(${k}, 0, ${_})]`}],[]);if(o){const L=i.signals.data,G=scaleBindings.defined(t),Z=n.getScaleComponent(f),W=Z?Z.get("type"):void 0,j=s?{init:assembleInit(s,!0,v)}:{value:[]};return P.push({events:{signal:t.name+SCALE_TRIGGER},update:hasContinuousDomain(W)?`[${v(`${L}[0]`)}, ${v(`${L}[1]`)}]`:"[0, 0]"}),G?[{name:L,on:[]}]:[{name:d,...j,on:P},{name:L,...s?{init:assembleInit(s)}:{},on:[{events:{signal:d},update:`${d}[0] === ${d}[1] ? null : invert(${p}, ${d})`}]}]}else{const L=f===X$1?0:1,G=t.name+INIT,Z=s?{init:`[${G}[0][${L}], ${G}[1][${L}]]`}:{value:[]};return[{name:d,...Z,on:P}]}}function wrapCondition({model:n,channelDef:t,vgChannel:i,invalidValueRef:s,mainRefFn:o}){const f=isConditionalDef(t)&&t.condition;let d=[];f&&(d=array$5(f).map(_=>{const k=o(_);if(isConditionalParameter(_)){const{param:P,empty:L}=_;return{test:parseSelectionPredicate(n,{param:P,empty:L}),...k}}else return{test:expression(n,_.test),...k}})),s!==void 0&&d.push(s);const p=o(t);return p!==void 0&&d.push(p),d.length>1||d.length===1&&d[0].test?{[i]:d}:d.length===1?{[i]:d[0]}:{}}function text$1(n,t="text"){const i=n.encoding[t];return wrapCondition({model:n,channelDef:i,vgChannel:t,mainRefFn:s=>textRef(s,n.config),invalidValueRef:void 0})}function textRef(n,t,i="datum"){if(n){if(isValueDef(n))return signalOrValueRef(n.value);if(isFieldOrDatumDef(n)){const{format:s,formatType:o}=getFormatMixins(n);return formatSignalRef({fieldOrDatumDef:n,format:s,formatType:o,expr:i,config:t})}}}function tooltip(n,t={}){const{encoding:i,markDef:s,config:o,stack:f}=n,d=i.tooltip;if(isArray(d))return{tooltip:tooltipRefForEncoding({tooltip:d},f,o,t)};{const p=t.reactiveGeom?"datum.datum":"datum";return wrapCondition({model:n,channelDef:d,vgChannel:"tooltip",mainRefFn:_=>{const k=textRef(_,o,p);if(k)return k;if(_===null)return;let P=getMarkPropOrConfig("tooltip",s,o);if(P===!0&&(P={content:"encoding"}),isString(P))return{value:P};if(isObject(P))return isSignalRef(P)?P:P.content==="encoding"?tooltipRefForEncoding(i,f,o,t):{signal:p}},invalidValueRef:void 0})}}function tooltipData(n,t,i,{reactiveGeom:s}={}){const o={...i,...i.tooltipFormat},f=new Set,d=s?"datum.datum":"datum",p=[];function v(k,P){const L=getMainRangeChannel(P),G=isTypedFieldDef(k)?k:{...k,type:n[L].type},Z=G.title||defaultTitle(G,o),W=array$5(Z).join(", ").replaceAll(/"/g,'\\"');let j;if(isXorY(P)){const H=P==="x"?"x2":"y2",me=getFieldDef(n[H]);if(isBinned(G.bin)&&me){const $e=vgField(G,{expr:d}),De=vgField(me,{expr:d}),{format:le,formatType:Ce}=getFormatMixins(G);j=binFormatExpression($e,De,le,Ce,o),f.add(H)}}if((isXorY(P)||P===THETA||P===RADIUS)&&t&&t.fieldChannel===P&&t.offset==="normalize"){const{format:H,formatType:me}=getFormatMixins(G);j=formatSignalRef({fieldOrDatumDef:G,format:H,formatType:me,expr:d,config:o,normalizeStack:!0}).signal}j??(j=textRef(G,o,d).signal),p.push({channel:P,key:W,value:j})}forEach(n,(k,P)=>{isFieldDef(k)?v(k,P):hasConditionalFieldDef(k)&&v(k.condition,P)});const _={};for(const{channel:k,key:P,value:L}of p)!f.has(k)&&!_[P]&&(_[P]=L);return _}function tooltipRefForEncoding(n,t,i,{reactiveGeom:s}={}){const o=tooltipData(n,t,i,{reactiveGeom:s}),f=entries$1(o).map(([d,p])=>`"${d}": ${p}`);return f.length>0?{signal:`{${f.join(", ")}}`}:void 0}function aria(n){const{markDef:t,config:i}=n,s=getMarkPropOrConfig("aria",t,i);return s===!1?{}:{...s?{aria:s}:{},...ariaRoleDescription(n),...description(n)}}function ariaRoleDescription(n){const{mark:t,markDef:i,config:s}=n;if(s.aria===!1)return{};const o=getMarkPropOrConfig("ariaRoleDescription",i,s);return o!=null?{ariaRoleDescription:{value:o}}:has$1(VG_MARK_INDEX,t)?{}:{ariaRoleDescription:{value:t}}}function description(n){const{encoding:t,markDef:i,config:s,stack:o}=n,f=t.description;if(f)return wrapCondition({model:n,channelDef:f,vgChannel:"description",mainRefFn:v=>textRef(v,n.config),invalidValueRef:void 0});const d=getMarkPropOrConfig("description",i,s);if(d!=null)return{description:signalOrValueRef(d)};if(s.aria===!1)return{};const p=tooltipData(t,o,s);if(!isEmpty(p))return{description:{signal:entries$1(p).map(([v,_],k)=>`"${k>0?"; ":""}${v}: " + (${_})`).join(" + ")}}}function nonPosition(n,t,i={}){const{markDef:s,encoding:o,config:f}=t,{vgChannel:d}=i;let{defaultRef:p,defaultValue:v}=i;const _=o[n];p===void 0&&(v??(v=getMarkPropOrConfig(n,s,f,{vgChannel:d,ignoreVgConfig:!isConditionalDef(_)})),v!==void 0&&(p=signalOrValueRef(v)));const k={markDef:s,config:f,scaleName:t.scaleName(n),scale:t.getScaleComponent(n)},P=getConditionalValueRefForIncludingInvalidValue({...k,scaleChannel:n,channelDef:_});return wrapCondition({model:t,channelDef:_,vgChannel:d??n,invalidValueRef:P,mainRefFn:G=>midPoint({...k,channel:n,channelDef:G,stack:null,defaultRef:p})})}function color(n,t={filled:void 0}){const{markDef:i,encoding:s,config:o}=n,{type:f}=i,d=t.filled??getMarkPropOrConfig("filled",i,o),p=contains(["bar","point","circle","square","geoshape"],f)?"transparent":void 0,v=getMarkPropOrConfig(d===!0?"color":void 0,i,o,{vgChannel:"fill"})??o.mark[d===!0&&"color"]??p,_=getMarkPropOrConfig(d===!1?"color":void 0,i,o,{vgChannel:"stroke"})??o.mark[d===!1&&"color"],k=d?"fill":"stroke",P={...v?{fill:signalOrValueRef(v)}:{},..._?{stroke:signalOrValueRef(_)}:{}};return i.color&&(d?i.fill:i.stroke)&&warn(droppingColor("property",{fill:"fill"in i,stroke:"stroke"in i})),{...P,...nonPosition("color",n,{vgChannel:k,defaultValue:d?v:_}),...nonPosition("fill",n,{defaultValue:s.fill?v:void 0}),...nonPosition("stroke",n,{defaultValue:s.stroke?_:void 0})}}function zindex(n){const{encoding:t,mark:i}=n,s=t.order;return!isPathMark(i)&&isValueDef(s)?wrapCondition({model:n,channelDef:s,vgChannel:"zindex",mainRefFn:o=>signalOrValueRef(o.value),invalidValueRef:void 0}):{}}function positionOffset({channel:n,markDef:t,encoding:i={},model:s,bandPosition:o}){const f=`${n}Offset`,d=t[f],p=i[f];if((f==="xOffset"||f==="yOffset")&&p)return{offsetType:"encoding",offset:midPoint({channel:f,channelDef:p,markDef:t,config:s==null?void 0:s.config,scaleName:s.scaleName(f),scale:s.getScaleComponent(f),stack:null,defaultRef:signalOrValueRef(d),bandPosition:o})};const v=t[f];return v?{offsetType:"visual",offset:v}:{}}function pointPosition(n,t,{defaultPos:i,vgChannel:s}){const{encoding:o,markDef:f,config:d,stack:p}=t,v=o[n],_=o[getSecondaryRangeChannel(n)],k=t.scaleName(n),P=t.getScaleComponent(n),{offset:L,offsetType:G}=positionOffset({channel:n,markDef:f,encoding:o,model:t,bandPosition:.5}),Z=pointPositionDefaultRef({model:t,defaultPos:i,channel:n,scaleName:k,scale:P}),W=!v&&isXorY(n)&&(o.latitude||o.longitude)?{field:t.getName(n)}:positionRef({channel:n,channelDef:v,channel2Def:_,markDef:f,config:d,scaleName:k,scale:P,stack:p,offset:L,defaultRef:Z,bandPosition:G==="encoding"?0:void 0});return W?{[s||n]:W}:void 0}function positionRef(n){const{channel:t,channelDef:i,scaleName:s,stack:o,offset:f,markDef:d}=n;if(isFieldOrDatumDef(i)&&o&&t===o.fieldChannel){if(isFieldDef(i)){let p=i.bandPosition;if(p===void 0&&d.type==="text"&&(t==="radius"||t==="theta")&&(p=.5),p!==void 0)return interpolatedSignalRef({scaleName:s,fieldOrDatumDef:i,startSuffix:"start",bandPosition:p,offset:f})}return valueRefForFieldOrDatumDef(i,s,{suffix:"end"},{offset:f})}return midPointRefWithPositionInvalidTest(n)}function pointPositionDefaultRef({model:n,defaultPos:t,channel:i,scaleName:s,scale:o}){const{markDef:f,config:d}=n;return()=>{const p=getMainRangeChannel(i),v=getVgPositionChannel(i),_=getMarkPropOrConfig(i,f,d,{vgChannel:v});if(_!==void 0)return widthHeightValueOrSignalRef(i,_);switch(t){case"zeroOrMin":return zeroOrMinOrMaxPosition({scaleName:s,scale:o,mode:"zeroOrMin",mainChannel:p,config:d});case"zeroOrMax":return zeroOrMinOrMaxPosition({scaleName:s,scale:o,mode:{zeroOrMax:{widthSignal:n.width.signal,heightSignal:n.height.signal}},mainChannel:p,config:d});case"mid":return{...n[getSizeChannel(i)],mult:.5}}}}function zeroOrMinOrMaxPosition({mainChannel:n,config:t,...i}){const s=scaledZeroOrMinOrMax(i),{mode:o}=i;if(s)return s;switch(n){case"radius":{if(o==="zeroOrMin")return{value:0};const{widthSignal:f,heightSignal:d}=o.zeroOrMax;return{signal:`min(${f},${d})/2`}}case"theta":return o==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return o==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return o==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const ALIGNED_X_CHANNEL={left:"x",center:"xc",right:"x2"},BASELINED_Y_CHANNEL={top:"y",middle:"yc",bottom:"y2"};function vgAlignedPositionChannel(n,t,i,s="middle"){if(n==="radius"||n==="theta")return getVgPositionChannel(n);const o=n==="x"?"align":"baseline",f=getMarkPropOrConfig(o,t,i);let d;return isSignalRef(f)?(warn(rangeMarkAlignmentCannotBeExpression(o)),d=void 0):d=f,n==="x"?ALIGNED_X_CHANNEL[d||(s==="top"?"left":"center")]:BASELINED_Y_CHANNEL[d||s]}function pointOrRangePosition(n,t,{defaultPos:i,defaultPos2:s,range:o}){return o?rangePosition(n,t,{defaultPos:i,defaultPos2:s}):pointPosition(n,t,{defaultPos:i})}function rangePosition(n,t,{defaultPos:i,defaultPos2:s}){const{markDef:o,config:f}=t,d=getSecondaryRangeChannel(n),p=getSizeChannel(n),v=pointPosition2OrSize(t,s,d),_=v[p]?vgAlignedPositionChannel(n,o,f):getVgPositionChannel(n);return{...pointPosition(n,t,{defaultPos:i,vgChannel:_}),...v}}function pointPosition2OrSize(n,t,i){const{encoding:s,mark:o,markDef:f,stack:d,config:p}=n,v=getMainRangeChannel(i),_=getSizeChannel(i),k=getVgPositionChannel(i),P=s[v],L=n.scaleName(v),G=n.getScaleComponent(v),{offset:Z}=i in s||i in f?positionOffset({channel:i,markDef:f,encoding:s,model:n}):positionOffset({channel:v,markDef:f,encoding:s,model:n});if(!P&&(i==="x2"||i==="y2")&&(s.latitude||s.longitude)){const j=getSizeChannel(i),H=n.markDef[j];return H!=null?{[j]:{value:H}}:{[k]:{field:n.getName(i)}}}const W=position2Ref({channel:i,channelDef:P,channel2Def:s[i],markDef:f,config:p,scaleName:L,scale:G,stack:d,offset:Z,defaultRef:void 0});return W!==void 0?{[k]:W}:position2orSize(i,f)||position2orSize(i,{[i]:getMarkStyleConfig(i,f,p.style),[_]:getMarkStyleConfig(_,f,p.style)})||position2orSize(i,p[o])||position2orSize(i,p.mark)||{[k]:pointPositionDefaultRef({model:n,defaultPos:t,channel:i,scaleName:L,scale:G})()}}function position2Ref({channel:n,channelDef:t,channel2Def:i,markDef:s,config:o,scaleName:f,scale:d,stack:p,offset:v,defaultRef:_}){return isFieldOrDatumDef(t)&&p&&n.charAt(0)===p.fieldChannel.charAt(0)?valueRefForFieldOrDatumDef(t,f,{suffix:"start"},{offset:v}):midPointRefWithPositionInvalidTest({channel:n,channelDef:i,scaleName:f,scale:d,stack:p,markDef:s,config:o,offset:v,defaultRef:_})}function position2orSize(n,t){const i=getSizeChannel(n),s=getVgPositionChannel(n);if(t[s]!==void 0)return{[s]:widthHeightValueOrSignalRef(n,t[s])};if(t[n]!==void 0)return{[s]:widthHeightValueOrSignalRef(n,t[n])};if(t[i]){const o=t[i];if(isRelativeBandSize(o))warn(relativeBandSizeNotSupported(i));else return{[i]:widthHeightValueOrSignalRef(n,o)}}}function rectPosition(n,t){const{config:i,encoding:s,markDef:o}=n,f=o.type,d=getSecondaryRangeChannel(t),p=getSizeChannel(t),v=s[t],_=s[d],k=n.getScaleComponent(t),P=k?k.get("type"):void 0,L=o.orient,G=s[p]??s.size??getMarkPropOrConfig("size",o,i,{vgChannel:p}),Z=getOffsetChannel(t),W=f==="bar"&&(t==="x"?L==="vertical":L==="horizontal")||f==="tick"&&(t==="y"?L==="vertical":L==="horizontal");return isFieldDef(v)&&(isBinning(v.bin)||isBinned(v.bin)||v.timeUnit&&!_)&&!(G&&!isRelativeBandSize(G))&&!s[Z]&&!hasDiscreteDomain(P)?rectBinPosition({fieldDef:v,fieldDef2:_,channel:t,model:n}):(isFieldOrDatumDef(v)&&hasDiscreteDomain(P)||W)&&!_?positionAndSize(v,t,n):rangePosition(t,n,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function defaultSizeRef(n,t,i,s,o,f,d){if(isRelativeBandSize(o))if(i){const v=i.get("type");if(v==="band"){let _=`bandwidth('${t}')`;o.band!==1&&(_=`${o.band} * ${_}`);const k=getMarkConfig("minBandSize",{type:d},s);return{signal:k?`max(${signalOrStringValue(k)}, ${_})`:_}}else o.band!==1&&(warn(cannotUseRelativeBandSizeWithNonBandScale(v)),o=void 0)}else return{mult:o.band,field:{group:n}};else{if(isSignalRef(o))return o;if(o)return{value:o}}if(i){const v=i.get("range");if(isVgRangeStep(v)&&isNumber$1(v.step))return{value:v.step-2}}if(!f){const{bandPaddingInner:v,barBandPaddingInner:_,rectBandPaddingInner:k,tickBandPaddingInner:P}=s.scale,L=getFirstDefined(v,d==="tick"?P:d==="bar"?_:k);if(isSignalRef(L))return{signal:`(1 - (${L.signal})) * ${n}`};if(isNumber$1(L))return{signal:`${1-L} * ${n}`}}return{value:getViewConfigDiscreteStep(s.view,n)-2}}function positionAndSize(n,t,i){var _i,ll;const{markDef:s,encoding:o,config:f,stack:d}=i,p=s.orient,v=i.scaleName(t),_=i.getScaleComponent(t),k=getSizeChannel(t),P=getSecondaryRangeChannel(t),L=getOffsetChannel(t),G=i.scaleName(L),Z=i.getScaleComponent(getOffsetScaleChannel(t)),W=s.type==="tick"||p==="horizontal"&&t==="y"||p==="vertical"&&t==="x";let j;(o.size||s.size)&&(W?j=nonPosition("size",i,{vgChannel:k,defaultRef:signalOrValueRef(s.size)}):warn(cannotApplySizeToNonOrientedMark(s.type)));const H=!!j,me=getBandSize({channel:t,fieldDef:n,markDef:s,config:f,scaleType:(_i=_||Z)==null?void 0:_i.get("type"),useVlSizeChannel:W});j=j||{[k]:defaultSizeRef(k,G||v,Z||_,f,me,!!n,s.type)};const $e=((ll=_||Z)==null?void 0:ll.get("type"))==="band"&&isRelativeBandSize(me)&&!H?"top":"middle",De=vgAlignedPositionChannel(t,s,f,$e),le=De==="xc"||De==="yc",{offset:Ce,offsetType:Me}=positionOffset({channel:t,markDef:s,encoding:o,model:i,bandPosition:le?.5:0}),_n=midPointRefWithPositionInvalidTest({channel:t,channelDef:n,markDef:s,config:f,scaleName:v,scale:_,stack:d,offset:Ce,defaultRef:pointPositionDefaultRef({model:i,defaultPos:"mid",channel:t,scaleName:v,scale:_}),bandPosition:le?Me==="encoding"?0:.5:isSignalRef(me)?{signal:`(1-${me})/2`}:isRelativeBandSize(me)?(1-me.band)/2:0});if(k)return{[De]:_n,...j};{const _l=getVgPositionChannel(P),oa=j[k],Ru=Ce?{...oa,offset:Ce}:oa;return{[De]:_n,[_l]:isArray(_n)?[_n[0],{..._n[1],offset:Ru}]:{..._n,offset:Ru}}}}function getBinSpacing(n,t,i,s,o,f,d){if(isPolarPositionChannel(n))return 0;const p=n==="x"||n==="y2",v=p?-t/2:t/2;if(isSignalRef(i)||isSignalRef(o)||isSignalRef(s)||f){const _=signalOrStringValue(i),k=signalOrStringValue(o),P=signalOrStringValue(s),L=signalOrStringValue(f),Z=f?`(${d} < ${L} ? ${p?"":"-"}0.5 * (${L} - (${d})) : ${v})`:v,W=P?`${P} + `:"",j=_?`(${_} ? -1 : 1) * `:"",H=k?`(${k} + ${Z})`:Z;return{signal:W+j+H}}else return o=o||0,s+(i?-o-v:+o+v)}function rectBinPosition({fieldDef:n,fieldDef2:t,channel:i,model:s}){var ll;const{config:o,markDef:f,encoding:d}=s,p=s.getScaleComponent(i),v=s.scaleName(i),_=p?p.get("type"):void 0,k=p.get("reverse"),P=getBandSize({channel:i,fieldDef:n,markDef:f,config:o,scaleType:_}),L=(ll=s.component.axes[i])==null?void 0:ll[0],G=(L==null?void 0:L.get("translate"))??.5,Z=isXorY(i)?getMarkPropOrConfig("binSpacing",f,o)??0:0,W=getSecondaryRangeChannel(i),j=getVgPositionChannel(i),H=getVgPositionChannel(W),me=getMarkConfig("minBandSize",f,o),{offset:$e}=positionOffset({channel:i,markDef:f,encoding:d,model:s,bandPosition:0}),{offset:De}=positionOffset({channel:W,markDef:f,encoding:d,model:s,bandPosition:0}),le=binSizeExpr({fieldDef:n,scaleName:v}),Ce=getBinSpacing(i,Z,k,G,$e,me,le),Me=getBinSpacing(W,Z,k,G,De??$e,me,le),_n=isSignalRef(P)?{signal:`(1-${P.signal})/2`}:isRelativeBandSize(P)?(1-P.band)/2:.5,_i=getBandPosition({fieldDef:n,fieldDef2:t,markDef:f,config:o});if(isBinning(n.bin)||n.timeUnit){const _l=n.timeUnit&&_i!==.5;return{[H]:rectBinRef({fieldDef:n,scaleName:v,bandPosition:_n,offset:Me,useRectOffsetField:_l}),[j]:rectBinRef({fieldDef:n,scaleName:v,bandPosition:isSignalRef(_n)?{signal:`1-${_n.signal}`}:1-_n,offset:Ce,useRectOffsetField:_l})}}else if(isBinned(n.bin)){const _l=valueRefForFieldOrDatumDef(n,v,{},{offset:Me});if(isFieldDef(t))return{[H]:_l,[j]:valueRefForFieldOrDatumDef(t,v,{},{offset:Ce})};if(isBinParams(n.bin)&&n.bin.step)return{[H]:_l,[j]:{signal:`scale("${v}", ${vgField(n,{expr:"datum"})} + ${n.bin.step})`,offset:Ce}}}warn(channelRequiredForBinned(W))}function rectBinRef({fieldDef:n,scaleName:t,bandPosition:i,offset:s,useRectOffsetField:o}){return interpolatedSignalRef({scaleName:t,fieldOrDatumDef:n,bandPosition:i,offset:s,...o?{startSuffix:OFFSETTED_RECT_START_SUFFIX,endSuffix:OFFSETTED_RECT_END_SUFFIX}:{}})}const ALWAYS_IGNORE=new Set(["aria","width","height"]);function baseEncodeEntry(n,t){const{fill:i=void 0,stroke:s=void 0}=t.color==="include"?color(n):{};return{...markDefProperties(n.markDef,t),...colorRef("fill",i),...colorRef("stroke",s),...nonPosition("opacity",n),...nonPosition("fillOpacity",n),...nonPosition("strokeOpacity",n),...nonPosition("strokeWidth",n),...nonPosition("strokeDash",n),...zindex(n),...tooltip(n),...text$1(n,"href"),...aria(n)}}function colorRef(n,t){return t?{[n]:t}:{}}function markDefProperties(n,t){return VG_MARK_CONFIGS.reduce((i,s)=>(!ALWAYS_IGNORE.has(s)&&hasProperty(n,s)&&t[s]!=="ignore"&&(i[s]=signalOrValueRef(n[s])),i),{})}function defined(n){const{config:t,markDef:i}=n,s=new Set;if(n.forEachFieldDef((o,f)=>{var _;let d;if(!isScaleChannel(f)||!(d=n.getScaleType(f)))return;const p=isCountingAggregateOp(o.aggregate),v=getScaleInvalidDataMode({scaleChannel:f,markDef:i,config:t,scaleType:d,isCountAggregate:p});if(shouldBreakPath(v)){const k=n.vgField(f,{expr:"datum",binSuffix:(_=n.stack)!=null&&_.impute?"mid":void 0});k&&s.add(k)}}),s.size>0)return{defined:{signal:[...s].map(f=>fieldValidPredicate(f,!0)).join(" && ")}}}function valueIfDefined(n,t){if(t!==void 0)return{[n]:signalOrValueRef(t)}}const VORONOI="voronoi",nearest={defined:n=>n.type==="point"&&n.nearest,parse:(n,t)=>{if(t.events)for(const i of t.events)i.markname=n.getName(VORONOI)},marks:(n,t,i)=>{const{x:s,y:o}=t.project.hasChannel,f=n.mark;if(isPathMark(f))return warn(nearestNotSupportForContinuous(f)),i;const d={name:n.getName(VORONOI),type:"path",interactive:!0,from:{data:n.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...tooltip(n,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:s||!o?"datum.datum.x || 0":"0"},y:{expr:o||!s?"datum.datum.y || 0":"0"},size:[n.getSizeSignalRef("width"),n.getSizeSignalRef("height")]}]};let p=0,v=!1;return i.forEach((_,k)=>{const P=_.name??"";P===n.component.mark[0].name?p=k:P.includes(VORONOI)&&(v=!0)}),v||i.splice(p+1,0,d),i}},inputBindings={defined:n=>n.type==="point"&&n.resolve==="global"&&n.bind&&n.bind!=="scales"&&!isLegendBinding(n.bind),parse:(n,t,i)=>disableDirectManipulation(t,i),topLevelSignals:(n,t,i)=>{const s=t.name,o=t.project,f=t.bind,d=t.init&&t.init[0],p=nearest.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return o.items.forEach((v,_)=>{const k=varName(`${s}_${v.field}`);i.filter(L=>L.name===k).length||i.unshift({name:k,...d?{init:assembleInit(d[_])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${p}[${$(v.field)}] : null`}]:[],bind:f[v.field]??f[v.channel]??f})}),i},signals:(n,t,i)=>{const s=t.name,o=t.project,f=i.find(_=>_.name===s+TUPLE),d=s+TUPLE_FIELDS,p=o.items.map(_=>varName(`${s}_${_.field}`)),v=p.map(_=>`${_} !== null`).join(" && ");return p.length&&(f.update=`${v} ? {fields: ${d}, values: [${p.join(", ")}]} : null`),delete f.value,delete f.on,i}},TOGGLE="_toggle",toggle={defined:n=>n.type==="point"&&!isTimerSelection(n)&&!!n.toggle,signals:(n,t,i)=>i.concat({name:t.name+TOGGLE,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(n,t)=>{const i=t.name+TUPLE,s=t.name+TOGGLE;return`${s} ? null : ${i}, `+(t.resolve==="global"?`${s} ? null : true, `:`${s} ? null : {unit: ${unitName(n)}}, `)+`${s} ? ${i} : null`}},clear={defined:n=>n.clear!==void 0&&n.clear!==!1&&!isTimerSelection(n),parse:(n,t)=>{t.clear&&(t.clear=isString(t.clear)?eventSelector(t.clear,"view"):t.clear)},topLevelSignals:(n,t,i)=>{if(inputBindings.defined(t))for(const s of t.project.items){const o=i.findIndex(f=>f.name===varName(`${t.name}_${s.field}`));o!==-1&&i[o].on.push({events:t.clear,update:"null"})}return i},signals:(n,t,i)=>{function s(o,f){o!==-1&&i[o].on&&i[o].on.push({events:t.clear,update:f})}if(t.type==="interval")for(const o of t.project.items){const f=i.findIndex(d=>d.name===o.signals.visual);if(s(f,"[0, 0]"),f===-1){const d=i.findIndex(p=>p.name===o.signals.data);s(d,"null")}}else{let o=i.findIndex(f=>f.name===t.name+TUPLE);s(o,"null"),toggle.defined(t)&&(o=i.findIndex(f=>f.name===t.name+TOGGLE),s(o,"false"))}return i}},legendBindings={defined:n=>{const t=n.resolve==="global"&&n.bind&&isLegendBinding(n.bind),i=n.project.items.length===1&&n.project.items[0].field!==SELECTION_ID;return t&&!i&&warn(LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&i},parse:(n,t,i)=>{const s=duplicate(i);if(s.select=isString(s.select)?{type:s.select,toggle:t.toggle}:{...s.select,toggle:t.toggle},disableDirectManipulation(t,s),isObject(i.select)&&(i.select.on||i.select.clear)){const d='event.item && indexof(event.item.mark.role, "legend") < 0';for(const p of t.events)p.filter=array$5(p.filter??[]),p.filter.includes(d)||p.filter.push(d)}const o=isLegendStreamBinding(t.bind)?t.bind.legend:"click",f=isString(o)?eventSelector(o,"view"):array$5(o);t.bind={legend:{merge:f}}},topLevelSignals:(n,t,i)=>{const s=t.name,o=isLegendStreamBinding(t.bind)&&t.bind.legend,f=d=>p=>{const v=duplicate(p);return v.markname=d,v};for(const d of t.project.items){if(!d.hasLegend)continue;const p=`${varName(d.field)}_legend`,v=`${s}_${p}`;if(i.filter(k=>k.name===v).length===0){const k=o.merge.map(f(`${p}_symbols`)).concat(o.merge.map(f(`${p}_labels`))).concat(o.merge.map(f(`${p}_entries`)));i.unshift({name:v,...t.init?{}:{value:null},on:[{events:k,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:o.merge,update:`!event.item || !datum ? null : ${v}`,force:!0}]})}}return i},signals:(n,t,i)=>{const s=t.name,o=t.project,f=i.find(L=>L.name===s+TUPLE),d=s+TUPLE_FIELDS,p=o.items.filter(L=>L.hasLegend).map(L=>varName(`${s}_${varName(L.field)}_legend`)),_=`${p.map(L=>`${L} !== null`).join(" && ")} ? {fields: ${d}, values: [${p.join(", ")}]} : null`;t.events&&p.length>0?f.on.push({events:p.map(L=>({signal:L})),update:_}):p.length>0&&(f.update=_,delete f.value,delete f.on);const k=i.find(L=>L.name===s+TOGGLE),P=isLegendStreamBinding(t.bind)&&t.bind.legend;return k&&(t.events?k.on.push({...k.on[0],events:P}):k.on[0].events=P),i}};function parseInteractiveLegend(n,t,i){var o;const s=(o=n.fieldDef(t))==null?void 0:o.field;for(const f of vals(n.component.selection??{})){const d=f.project.hasField[s]??f.project.hasChannel[t];if(d&&legendBindings.defined(f)){const p=i.get("selections")??[];p.push(f.name),i.set("selections",p,!1),d.hasLegend=!0}}}const ANCHOR$1="_translate_anchor",DELTA$1="_translate_delta",translate={defined:n=>n.type==="interval"&&n.translate,signals:(n,t,i)=>{const s=t.name,o=scaleBindings.defined(t),f=s+ANCHOR$1,{x:d,y:p}=t.project.hasChannel;let v=eventSelector(t.translate,"scope");return o||(v=v.map(_=>(_.between[0].markname=s+BRUSH,_))),i.push({name:f,value:{},on:[{events:v.map(_=>_.between[0]),update:"{x: x(unit), y: y(unit)"+(d!==void 0?`, extent_x: ${o?domain(n,X$1):`slice(${d.signals.visual})`}`:"")+(p!==void 0?`, extent_y: ${o?domain(n,Y$1):`slice(${p.signals.visual})`}`:"")+"}"}]},{name:s+DELTA$1,value:{},on:[{events:v,update:`{x: ${f}.x - x(unit), y: ${f}.y - y(unit)}`}]}),d!==void 0&&onDelta$1(n,t,d,"width",i),p!==void 0&&onDelta$1(n,t,p,"height",i),i}};function onDelta$1(n,t,i,s,o){const f=t.name,d=f+ANCHOR$1,p=f+DELTA$1,v=i.channel,_=scaleBindings.defined(t),k=o.find(le=>le.name===i.signals[_?"data":"visual"]),P=n.getSizeSignalRef(s).signal,L=n.getScaleComponent(v),G=L&&L.get("type"),Z=L&&L.get("reverse"),W=_?v===X$1?Z?"":"-":Z?"-":"":"",j=`${d}.extent_${v}`,H=`${W}${p}.${v} / ${_?`${P}`:`span(${j})`}`,me=!_||!L?"panLinear":G==="log"?"panLog":G==="symlog"?"panSymlog":G==="pow"?"panPow":"panLinear",$e=_?G==="pow"?`, ${L.get("exponent")??1}`:G==="symlog"?`, ${L.get("constant")??1}`:"":"",De=`${me}(${j}, ${H}${$e})`;k.on.push({events:{signal:p},update:_?De:`clampRange(${De}, 0, ${P})`})}const ANCHOR="_zoom_anchor",DELTA="_zoom_delta",zoom={defined:n=>n.type==="interval"&&n.zoom,signals:(n,t,i)=>{const s=t.name,o=scaleBindings.defined(t),f=s+DELTA,{x:d,y:p}=t.project.hasChannel,v=$(n.scaleName(X$1)),_=$(n.scaleName(Y$1));let k=eventSelector(t.zoom,"scope");return o||(k=k.map(P=>(P.markname=s+BRUSH,P))),i.push({name:s+ANCHOR,on:[{events:k,update:o?"{"+[v?`x: invert(${v}, x(unit))`:"",_?`y: invert(${_}, y(unit))`:""].filter(P=>P).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:f,on:[{events:k,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),d!==void 0&&onDelta(n,t,d,"width",i),p!==void 0&&onDelta(n,t,p,"height",i),i}};function onDelta(n,t,i,s,o){const f=t.name,d=i.channel,p=scaleBindings.defined(t),v=o.find(me=>me.name===i.signals[p?"data":"visual"]),_=n.getSizeSignalRef(s).signal,k=n.getScaleComponent(d),P=k&&k.get("type"),L=p?domain(n,d):v.name,G=f+DELTA,Z=`${f}${ANCHOR}.${d}`,W=!p||!k?"zoomLinear":P==="log"?"zoomLog":P==="symlog"?"zoomSymlog":P==="pow"?"zoomPow":"zoomLinear",j=p?P==="pow"?`, ${k.get("exponent")??1}`:P==="symlog"?`, ${k.get("constant")??1}`:"":"",H=`${W}(${L}, ${Z}, ${G}${j})`;v.on.push({events:{signal:G},update:p?H:`clampRange(${H}, 0, ${_})`})}const STORE="_store",TUPLE="_tuple",MODIFY="_modify",VL_SELECTION_RESOLVE="vlSelectionResolve",selectionCompilers=[point$1,interval,project,toggle,inputBindings,scaleBindings,legendBindings,clear,translate,zoom,nearest];function getFacetModel(n){let t=n.parent;for(;t&&!isFacetModel(t);)t=t.parent;return t}function unitName(n,{escape:t}={escape:!0}){let i=t?$(n.name):n.name;const s=getFacetModel(n);if(s){const{facet:o}=s;for(const f of FACET_CHANNELS)o[f]&&(i+=` + '__facet_${f}_' + (facet[${$(s.vgField(f))}])`)}return i}function requiresSelectionId(n){return vals(n.component.selection??{}).reduce((t,i)=>t||i.project.hasSelectionId,!1)}function disableDirectManipulation(n,t){(isString(t.select)||!t.select.on)&&delete n.events,(isString(t.select)||!t.select.clear)&&delete n.clear,(isString(t.select)||!t.select.toggle)&&delete n.toggle}function isTimerSelection(n){var t;return(t=n.events)==null?void 0:t.find(i=>"type"in i&&i.type==="timer")}const RawCode="RawCode",Literal="Literal",Property="Property",Identifier="Identifier",ArrayExpression="ArrayExpression",BinaryExpression="BinaryExpression",CallExpression="CallExpression",ConditionalExpression="ConditionalExpression",LogicalExpression="LogicalExpression",MemberExpression="MemberExpression",ObjectExpression="ObjectExpression",UnaryExpression="UnaryExpression";function ASTNode(n){this.type=n}ASTNode.prototype.visit=function(n){let t,i,s;if(n(this))return 1;for(t=children(this),i=0,s=t.length;i<s;++i)if(t[i].visit(n))return 1};function children(n){switch(n.type){case ArrayExpression:return n.elements;case BinaryExpression:case LogicalExpression:return[n.left,n.right];case CallExpression:return[n.callee].concat(n.arguments);case ConditionalExpression:return[n.test,n.consequent,n.alternate];case MemberExpression:return[n.object,n.property];case ObjectExpression:return n.properties;case Property:return[n.key,n.value];case UnaryExpression:return[n.argument];case Identifier:case Literal:case RawCode:default:return[]}}var TokenName,source,index$1,length,lookahead,TokenBooleanLiteral=1,TokenEOF=2,TokenIdentifier=3,TokenKeyword=4,TokenNullLiteral=5,TokenNumericLiteral=6,TokenPunctuator=7,TokenStringLiteral=8,TokenRegularExpression=9;TokenName={};TokenName[TokenBooleanLiteral]="Boolean";TokenName[TokenEOF]="<end>";TokenName[TokenIdentifier]="Identifier";TokenName[TokenKeyword]="Keyword";TokenName[TokenNullLiteral]="Null";TokenName[TokenNumericLiteral]="Numeric";TokenName[TokenPunctuator]="Punctuator";TokenName[TokenStringLiteral]="String";TokenName[TokenRegularExpression]="RegularExpression";var SyntaxArrayExpression="ArrayExpression",SyntaxBinaryExpression="BinaryExpression",SyntaxCallExpression="CallExpression",SyntaxConditionalExpression="ConditionalExpression",SyntaxIdentifier="Identifier",SyntaxLiteral="Literal",SyntaxLogicalExpression="LogicalExpression",SyntaxMemberExpression="MemberExpression",SyntaxObjectExpression="ObjectExpression",SyntaxProperty="Property",SyntaxUnaryExpression="UnaryExpression",MessageUnexpectedToken="Unexpected token %0",MessageUnexpectedNumber="Unexpected number",MessageUnexpectedString="Unexpected string",MessageUnexpectedIdentifier="Unexpected identifier",MessageUnexpectedReserved="Unexpected reserved word",MessageUnexpectedEOS="Unexpected end of input",MessageInvalidRegExp="Invalid regular expression",MessageUnterminatedRegExp="Invalid regular expression: missing /",MessageStrictOctalLiteral="Octal literals are not allowed in strict mode.",MessageStrictDuplicateProperty="Duplicate data property in object literal not allowed in strict mode",ILLEGAL="ILLEGAL",DISABLED="Disabled.",RegexNonAsciiIdentifierStart=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),RegexNonAsciiIdentifierPart=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function assert(n,t){if(!n)throw new Error("ASSERT: "+t)}function isDecimalDigit(n){return n>=48&&n<=57}function isHexDigit(n){return"0123456789abcdefABCDEF".includes(n)}function isOctalDigit(n){return"01234567".includes(n)}function isWhiteSpace(n){return n===32||n===9||n===11||n===12||n===160||n>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(n)}function isLineTerminator(n){return n===10||n===13||n===8232||n===8233}function isIdentifierStart(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n===92||n>=128&&RegexNonAsciiIdentifierStart.test(String.fromCharCode(n))}function isIdentifierPart(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||n===92||n>=128&&RegexNonAsciiIdentifierPart.test(String.fromCharCode(n))}const keywords={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function skipComment(){for(;index$1<length;){const n=source.charCodeAt(index$1);if(isWhiteSpace(n)||isLineTerminator(n))++index$1;else break}}function scanHexEscape(n){var t,i,s,o=0;for(i=n==="u"?4:2,t=0;t<i;++t)index$1<length&&isHexDigit(source[index$1])?(s=source[index$1++],o=o*16+"0123456789abcdef".indexOf(s.toLowerCase())):throwError({},MessageUnexpectedToken,ILLEGAL);return String.fromCharCode(o)}function scanUnicodeCodePointEscape(){var n,t,i,s;for(n=source[index$1],t=0,n==="}"&&throwError({},MessageUnexpectedToken,ILLEGAL);index$1<length&&(n=source[index$1++],!!isHexDigit(n));)t=t*16+"0123456789abcdef".indexOf(n.toLowerCase());return(t>1114111||n!=="}")&&throwError({},MessageUnexpectedToken,ILLEGAL),t<=65535?String.fromCharCode(t):(i=(t-65536>>10)+55296,s=(t-65536&1023)+56320,String.fromCharCode(i,s))}function getEscapedIdentifier(){var n,t;for(n=source.charCodeAt(index$1++),t=String.fromCharCode(n),n===92&&(source.charCodeAt(index$1)!==117&&throwError({},MessageUnexpectedToken,ILLEGAL),++index$1,n=scanHexEscape("u"),(!n||n==="\\"||!isIdentifierStart(n.charCodeAt(0)))&&throwError({},MessageUnexpectedToken,ILLEGAL),t=n);index$1<length&&(n=source.charCodeAt(index$1),!!isIdentifierPart(n));)++index$1,t+=String.fromCharCode(n),n===92&&(t=t.substr(0,t.length-1),source.charCodeAt(index$1)!==117&&throwError({},MessageUnexpectedToken,ILLEGAL),++index$1,n=scanHexEscape("u"),(!n||n==="\\"||!isIdentifierPart(n.charCodeAt(0)))&&throwError({},MessageUnexpectedToken,ILLEGAL),t+=n);return t}function getIdentifier(){var n,t;for(n=index$1++;index$1<length;){if(t=source.charCodeAt(index$1),t===92)return index$1=n,getEscapedIdentifier();if(isIdentifierPart(t))++index$1;else break}return source.slice(n,index$1)}function scanIdentifier(){var n,t,i;return n=index$1,t=source.charCodeAt(index$1)===92?getEscapedIdentifier():getIdentifier(),t.length===1?i=TokenIdentifier:keywords.hasOwnProperty(t)?i=TokenKeyword:t==="null"?i=TokenNullLiteral:t==="true"||t==="false"?i=TokenBooleanLiteral:i=TokenIdentifier,{type:i,value:t,start:n,end:index$1}}function scanPunctuator(){var n=index$1,t=source.charCodeAt(index$1),i,s=source[index$1],o,f,d;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++index$1,{type:TokenPunctuator,value:String.fromCharCode(t),start:n,end:index$1};default:if(i=source.charCodeAt(index$1+1),i===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return index$1+=2,{type:TokenPunctuator,value:String.fromCharCode(t)+String.fromCharCode(i),start:n,end:index$1};case 33:case 61:return index$1+=2,source.charCodeAt(index$1)===61&&++index$1,{type:TokenPunctuator,value:source.slice(n,index$1),start:n,end:index$1}}}if(d=source.substr(index$1,4),d===">>>=")return index$1+=4,{type:TokenPunctuator,value:d,start:n,end:index$1};if(f=d.substr(0,3),f===">>>"||f==="<<="||f===">>=")return index$1+=3,{type:TokenPunctuator,value:f,start:n,end:index$1};if(o=f.substr(0,2),s===o[1]&&"+-<>&|".includes(s)||o==="=>")return index$1+=2,{type:TokenPunctuator,value:o,start:n,end:index$1};if(o==="//"&&throwError({},MessageUnexpectedToken,ILLEGAL),"<>=!+-*%&|^/".includes(s))return++index$1,{type:TokenPunctuator,value:s,start:n,end:index$1};throwError({},MessageUnexpectedToken,ILLEGAL)}function scanHexLiteral(n){let t="";for(;index$1<length&&isHexDigit(source[index$1]);)t+=source[index$1++];return t.length===0&&throwError({},MessageUnexpectedToken,ILLEGAL),isIdentifierStart(source.charCodeAt(index$1))&&throwError({},MessageUnexpectedToken,ILLEGAL),{type:TokenNumericLiteral,value:parseInt("0x"+t,16),start:n,end:index$1}}function scanOctalLiteral(n){let t="0"+source[index$1++];for(;index$1<length&&isOctalDigit(source[index$1]);)t+=source[index$1++];return(isIdentifierStart(source.charCodeAt(index$1))||isDecimalDigit(source.charCodeAt(index$1)))&&throwError({},MessageUnexpectedToken,ILLEGAL),{type:TokenNumericLiteral,value:parseInt(t,8),octal:!0,start:n,end:index$1}}function scanNumericLiteral(){var n,t,i;if(i=source[index$1],assert(isDecimalDigit(i.charCodeAt(0))||i===".","Numeric literal must start with a decimal digit or a decimal point"),t=index$1,n="",i!=="."){if(n=source[index$1++],i=source[index$1],n==="0"){if(i==="x"||i==="X")return++index$1,scanHexLiteral(t);if(isOctalDigit(i))return scanOctalLiteral(t);i&&isDecimalDigit(i.charCodeAt(0))&&throwError({},MessageUnexpectedToken,ILLEGAL)}for(;isDecimalDigit(source.charCodeAt(index$1));)n+=source[index$1++];i=source[index$1]}if(i==="."){for(n+=source[index$1++];isDecimalDigit(source.charCodeAt(index$1));)n+=source[index$1++];i=source[index$1]}if(i==="e"||i==="E")if(n+=source[index$1++],i=source[index$1],(i==="+"||i==="-")&&(n+=source[index$1++]),isDecimalDigit(source.charCodeAt(index$1)))for(;isDecimalDigit(source.charCodeAt(index$1));)n+=source[index$1++];else throwError({},MessageUnexpectedToken,ILLEGAL);return isIdentifierStart(source.charCodeAt(index$1))&&throwError({},MessageUnexpectedToken,ILLEGAL),{type:TokenNumericLiteral,value:parseFloat(n),start:t,end:index$1}}function scanStringLiteral(){var n="",t,i,s,o,f=!1;for(t=source[index$1],assert(t==="'"||t==='"',"String literal must starts with a quote"),i=index$1,++index$1;index$1<length;)if(s=source[index$1++],s===t){t="";break}else if(s==="\\")if(s=source[index$1++],!s||!isLineTerminator(s.charCodeAt(0)))switch(s){case"u":case"x":source[index$1]==="{"?(++index$1,n+=scanUnicodeCodePointEscape()):n+=scanHexEscape(s);break;case"n":n+=`
`;break;case"r":n+="\r";break;case"t":n+="	";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;default:isOctalDigit(s)?(o="01234567".indexOf(s),o!==0&&(f=!0),index$1<length&&isOctalDigit(source[index$1])&&(f=!0,o=o*8+"01234567".indexOf(source[index$1++]),"0123".includes(s)&&index$1<length&&isOctalDigit(source[index$1])&&(o=o*8+"01234567".indexOf(source[index$1++]))),n+=String.fromCharCode(o)):n+=s;break}else s==="\r"&&source[index$1]===`
`&&++index$1;else{if(isLineTerminator(s.charCodeAt(0)))break;n+=s}return t!==""&&throwError({},MessageUnexpectedToken,ILLEGAL),{type:TokenStringLiteral,value:n,octal:f,start:i,end:index$1}}function testRegExp(n,t){let i=n;t.includes("u")&&(i=i.replace(/\\u\{([0-9a-fA-F]+)\}/g,(s,o)=>{if(parseInt(o,16)<=1114111)return"x";throwError({},MessageInvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(i)}catch{throwError({},MessageInvalidRegExp)}try{return new RegExp(n,t)}catch{return null}}function scanRegExpBody(){var n,t,i,s,o;for(n=source[index$1],assert(n==="/","Regular expression literal must start with a slash"),t=source[index$1++],i=!1,s=!1;index$1<length;)if(n=source[index$1++],t+=n,n==="\\")n=source[index$1++],isLineTerminator(n.charCodeAt(0))&&throwError({},MessageUnterminatedRegExp),t+=n;else if(isLineTerminator(n.charCodeAt(0)))throwError({},MessageUnterminatedRegExp);else if(i)n==="]"&&(i=!1);else if(n==="/"){s=!0;break}else n==="["&&(i=!0);return s||throwError({},MessageUnterminatedRegExp),o=t.substr(1,t.length-2),{value:o,literal:t}}function scanRegExpFlags(){var n,t,i;for(t="",i="";index$1<length&&(n=source[index$1],!!isIdentifierPart(n.charCodeAt(0)));)++index$1,n==="\\"&&index$1<length?throwError({},MessageUnexpectedToken,ILLEGAL):(i+=n,t+=n);return i.search(/[^gimuy]/g)>=0&&throwError({},MessageInvalidRegExp,i),{value:i,literal:t}}function scanRegExp(){var n,t,i,s;return lookahead=null,skipComment(),n=index$1,t=scanRegExpBody(),i=scanRegExpFlags(),s=testRegExp(t.value,i.value),{literal:t.literal+i.literal,value:s,regex:{pattern:t.value,flags:i.value},start:n,end:index$1}}function isIdentifierName(n){return n.type===TokenIdentifier||n.type===TokenKeyword||n.type===TokenBooleanLiteral||n.type===TokenNullLiteral}function advance(){if(skipComment(),index$1>=length)return{type:TokenEOF,start:index$1,end:index$1};const n=source.charCodeAt(index$1);return isIdentifierStart(n)?scanIdentifier():n===40||n===41||n===59?scanPunctuator():n===39||n===34?scanStringLiteral():n===46?isDecimalDigit(source.charCodeAt(index$1+1))?scanNumericLiteral():scanPunctuator():isDecimalDigit(n)?scanNumericLiteral():scanPunctuator()}function lex(){const n=lookahead;return index$1=n.end,lookahead=advance(),index$1=n.end,n}function peek(){const n=index$1;lookahead=advance(),index$1=n}function finishArrayExpression(n){const t=new ASTNode(SyntaxArrayExpression);return t.elements=n,t}function finishBinaryExpression(n,t,i){const s=new ASTNode(n==="||"||n==="&&"?SyntaxLogicalExpression:SyntaxBinaryExpression);return s.operator=n,s.left=t,s.right=i,s}function finishCallExpression(n,t){const i=new ASTNode(SyntaxCallExpression);return i.callee=n,i.arguments=t,i}function finishConditionalExpression(n,t,i){const s=new ASTNode(SyntaxConditionalExpression);return s.test=n,s.consequent=t,s.alternate=i,s}function finishIdentifier(n){const t=new ASTNode(SyntaxIdentifier);return t.name=n,t}function finishLiteral(n){const t=new ASTNode(SyntaxLiteral);return t.value=n.value,t.raw=source.slice(n.start,n.end),n.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=n.regex),t}function finishMemberExpression(n,t,i){const s=new ASTNode(SyntaxMemberExpression);return s.computed=n==="[",s.object=t,s.property=i,s.computed||(i.member=!0),s}function finishObjectExpression(n){const t=new ASTNode(SyntaxObjectExpression);return t.properties=n,t}function finishProperty(n,t,i){const s=new ASTNode(SyntaxProperty);return s.key=t,s.value=i,s.kind=n,s}function finishUnaryExpression(n,t){const i=new ASTNode(SyntaxUnaryExpression);return i.operator=n,i.argument=t,i.prefix=!0,i}function throwError(n,t){var i,s=Array.prototype.slice.call(arguments,2),o=t.replace(/%(\d)/g,(f,d)=>(assert(d<s.length,"Message reference must be in range"),s[d]));throw i=new Error(o),i.index=index$1,i.description=o,i}function throwUnexpected(n){n.type===TokenEOF&&throwError(n,MessageUnexpectedEOS),n.type===TokenNumericLiteral&&throwError(n,MessageUnexpectedNumber),n.type===TokenStringLiteral&&throwError(n,MessageUnexpectedString),n.type===TokenIdentifier&&throwError(n,MessageUnexpectedIdentifier),n.type===TokenKeyword&&throwError(n,MessageUnexpectedReserved),throwError(n,MessageUnexpectedToken,n.value)}function expect(n){const t=lex();(t.type!==TokenPunctuator||t.value!==n)&&throwUnexpected(t)}function match(n){return lookahead.type===TokenPunctuator&&lookahead.value===n}function matchKeyword(n){return lookahead.type===TokenKeyword&&lookahead.value===n}function parseArrayInitialiser(){const n=[];for(index$1=lookahead.start,expect("[");!match("]");)match(",")?(lex(),n.push(null)):(n.push(parseConditionalExpression()),match("]")||expect(","));return lex(),finishArrayExpression(n)}function parseObjectPropertyKey(){index$1=lookahead.start;const n=lex();return n.type===TokenStringLiteral||n.type===TokenNumericLiteral?(n.octal&&throwError(n,MessageStrictOctalLiteral),finishLiteral(n)):finishIdentifier(n.value)}function parseObjectProperty(){var n,t,i,s;if(index$1=lookahead.start,n=lookahead,n.type===TokenIdentifier)return i=parseObjectPropertyKey(),expect(":"),s=parseConditionalExpression(),finishProperty("init",i,s);if(n.type===TokenEOF||n.type===TokenPunctuator)throwUnexpected(n);else return t=parseObjectPropertyKey(),expect(":"),s=parseConditionalExpression(),finishProperty("init",t,s)}function parseObjectInitialiser(){var n=[],t,i,s,o={},f=String;for(index$1=lookahead.start,expect("{");!match("}");)t=parseObjectProperty(),t.key.type===SyntaxIdentifier?i=t.key.name:i=f(t.key.value),s="$"+i,Object.prototype.hasOwnProperty.call(o,s)?throwError({},MessageStrictDuplicateProperty):o[s]=!0,n.push(t),match("}")||expect(",");return expect("}"),finishObjectExpression(n)}function parseGroupExpression(){expect("(");const n=parseExpression$1();return expect(")"),n}const legalKeywords={if:1};function parsePrimaryExpression(){var n,t,i;if(match("("))return parseGroupExpression();if(match("["))return parseArrayInitialiser();if(match("{"))return parseObjectInitialiser();if(n=lookahead.type,index$1=lookahead.start,n===TokenIdentifier||legalKeywords[lookahead.value])i=finishIdentifier(lex().value);else if(n===TokenStringLiteral||n===TokenNumericLiteral)lookahead.octal&&throwError(lookahead,MessageStrictOctalLiteral),i=finishLiteral(lex());else{if(n===TokenKeyword)throw new Error(DISABLED);n===TokenBooleanLiteral?(t=lex(),t.value=t.value==="true",i=finishLiteral(t)):n===TokenNullLiteral?(t=lex(),t.value=null,i=finishLiteral(t)):match("/")||match("/=")?(i=finishLiteral(scanRegExp()),peek()):throwUnexpected(lex())}return i}function parseArguments(){const n=[];if(expect("("),!match(")"))for(;index$1<length&&(n.push(parseConditionalExpression()),!match(")"));)expect(",");return expect(")"),n}function parseNonComputedProperty(){index$1=lookahead.start;const n=lex();return isIdentifierName(n)||throwUnexpected(n),finishIdentifier(n.value)}function parseNonComputedMember(){return expect("."),parseNonComputedProperty()}function parseComputedMember(){expect("[");const n=parseExpression$1();return expect("]"),n}function parseLeftHandSideExpressionAllowCall(){var n,t,i;for(n=parsePrimaryExpression();;)if(match("."))i=parseNonComputedMember(),n=finishMemberExpression(".",n,i);else if(match("("))t=parseArguments(),n=finishCallExpression(n,t);else if(match("["))i=parseComputedMember(),n=finishMemberExpression("[",n,i);else break;return n}function parsePostfixExpression(){const n=parseLeftHandSideExpressionAllowCall();if(lookahead.type===TokenPunctuator&&(match("++")||match("--")))throw new Error(DISABLED);return n}function parseUnaryExpression(){var n,t;if(lookahead.type!==TokenPunctuator&&lookahead.type!==TokenKeyword)t=parsePostfixExpression();else{if(match("++")||match("--"))throw new Error(DISABLED);if(match("+")||match("-")||match("~")||match("!"))n=lex(),t=parseUnaryExpression(),t=finishUnaryExpression(n.value,t);else{if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof"))throw new Error(DISABLED);t=parsePostfixExpression()}}return t}function binaryPrecedence(n){let t=0;if(n.type!==TokenPunctuator&&n.type!==TokenKeyword)return 0;switch(n.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function parseBinaryExpression(){var n,t,i,s,o,f,d,p,v,_;if(n=lookahead,v=parseUnaryExpression(),s=lookahead,o=binaryPrecedence(s),o===0)return v;for(s.prec=o,lex(),t=[n,lookahead],d=parseUnaryExpression(),f=[v,s,d];(o=binaryPrecedence(lookahead))>0;){for(;f.length>2&&o<=f[f.length-2].prec;)d=f.pop(),p=f.pop().value,v=f.pop(),t.pop(),i=finishBinaryExpression(p,v,d),f.push(i);s=lex(),s.prec=o,f.push(s),t.push(lookahead),i=parseUnaryExpression(),f.push(i)}for(_=f.length-1,i=f[_],t.pop();_>1;)t.pop(),i=finishBinaryExpression(f[_-1].value,f[_-2],i),_-=2;return i}function parseConditionalExpression(){var n,t,i;return n=parseBinaryExpression(),match("?")&&(lex(),t=parseConditionalExpression(),expect(":"),i=parseConditionalExpression(),n=finishConditionalExpression(n,t,i)),n}function parseExpression$1(){const n=parseConditionalExpression();if(match(","))throw new Error(DISABLED);return n}function parser(n){source=n,index$1=0,length=source.length,lookahead=null,peek();const t=parseExpression$1();if(lookahead.type!==TokenEOF)throw new Error("Unexpect token after expression.");return t}function getName(n){const t=[];return n.type==="Identifier"?[n.name]:n.type==="Literal"?[n.value]:(n.type==="MemberExpression"&&(t.push(...getName(n.object)),t.push(...getName(n.property))),t)}function startsWithDatum(n){return n.object.type==="MemberExpression"?startsWithDatum(n.object):n.object.name==="datum"}function getDependentFields(n){const t=parser(n),i=new Set;return t.visit(s=>{s.type==="MemberExpression"&&startsWithDatum(s)&&i.add(getName(s).slice(1).join("."))}),i}class FilterNode extends DataFlowNode{clone(){return new FilterNode(null,this.model,duplicate(this.filter))}constructor(t,i,s){super(t),this.model=i,this.filter=s,this.expr=expression(this.model,this.filter,this),this._dependentFields=getDependentFields(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function parseUnitSelection(n,t){const i={},s=n.config.selection;if(!t||!t.length)return i;let o=0;for(const f of t){const d=varName(f.name),p=f.select,v=isString(p)?p:p.type,_=isObject(p)?duplicate(p):{type:v},k=s[v];for(const G in k)G==="fields"||G==="encodings"||(G==="mark"&&(_.mark={...k.mark,..._.mark}),(_[G]===void 0||_[G]===!0)&&(_[G]=duplicate(k[G]??_[G])));const P=i[d]={..._,name:d,type:v,init:f.value,bind:f.bind,events:isString(_.on)?eventSelector(_.on,"scope"):array$5(duplicate(_.on))};if(isTimerSelection(P)&&(o++,o>1)){delete i[d];continue}const L=duplicate(f);for(const G of selectionCompilers)G.defined(P)&&G.parse&&G.parse(n,P,L)}return o>1&&warn(MULTIPLE_TIMER_ANIMATION_SELECTION),i}function parseSelectionPredicate(n,t,i,s="datum"){const o=isString(t)?t:t.param,f=varName(o),d=$(f+STORE);let p;try{p=n.getSelectionComponent(f,o)}catch{return`!!${f}`}if(p.project.timeUnit){const L=i??n.component.data.raw,G=p.project.timeUnit.clone();L.parent?G.insertAsParentOf(L):L.parent=G}const v=p.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",_=p.resolve==="global"?")":`, ${$(p.resolve)})`,k=`${v}${d}, ${s}${_}`,P=`length(data(${d}))`;return t.empty===!1?`${P} && ${k}`:`!${P} || ${k}`}function parseSelectionExtent(n,t,i){const s=varName(t),o=i.encoding;let f=i.field,d;try{d=n.getSelectionComponent(s,t)}catch{return s}if(!o&&!f)f=d.project.items[0].field,d.project.items.length>1&&warn(selectionAsScaleDomainWithoutField(f));else if(o&&!f){const p=d.project.items.filter(v=>v.channel===o);!p.length||p.length>1?(f=d.project.items[0].field,warn(selectionAsScaleDomainWrongEncodings(p,o,i,f))):f=p[0].field}return`${d.name}[${$(replacePathInField(f))}]`}function materializeSelections(n,t){for(const[i,s]of entries$1(n.component.selection??{})){const o=n.getName(`lookup_${i}`);n.component.data.outputNodes[o]=s.materialized=new OutputNode(new FilterNode(t,n,{param:i}),o,DataSourceType.Lookup,n.component.data.outputNodeRefCounts)}}function expression(n,t,i){return logicalExpr(t,s=>isString(s)?s:isSelectionPredicate(s)?parseSelectionPredicate(n,s,i):fieldFilterExpression(s))}function assembleTitle(n,t){if(n)return isArray(n)&&!isText(n)?n.map(i=>defaultTitle(i,t)).join(", "):n}function setAxisEncode(n,t,i,s){var o,f;n.encode??(n.encode={}),(o=n.encode)[t]??(o[t]={}),(f=n.encode[t]).update??(f.update={}),n.encode[t].update[i]=s}function assembleAxis(n,t,i,s={header:!1}){var P,L;const{disable:o,orient:f,scale:d,labelExpr:p,title:v,zindex:_,...k}=n.combine();if(!o){for(const G in k){const Z=G,W=AXIS_PROPERTY_TYPE[Z],j=k[Z];if(W&&W!==t&&W!=="both")delete k[Z];else if(isConditionalAxisValue(j)){const{condition:H,...me}=j,$e=array$5(H),De=CONDITIONAL_AXIS_PROP_INDEX[Z];if(De){const{vgProp:le,part:Ce}=De,Me=[...$e.map(_n=>{const{test:_i,...ll}=_n;return{test:expression(null,_i),...ll}}),me];setAxisEncode(k,Ce,le,Me),delete k[Z]}else if(De===null){const le={signal:$e.map(Ce=>{const{test:Me,..._n}=Ce;return`${expression(null,Me)} ? ${exprFromValueRefOrSignalRef(_n)} : `}).join("")+exprFromValueRefOrSignalRef(me)};k[Z]=le}}else if(isSignalRef(j)){const H=CONDITIONAL_AXIS_PROP_INDEX[Z];if(H){const{vgProp:me,part:$e}=H;setAxisEncode(k,$e,me,j),delete k[Z]}}contains(["labelAlign","labelBaseline"],Z)&&k[Z]===null&&delete k[Z]}if(t==="grid"){if(!k.grid)return;if(k.encode){const{grid:G}=k.encode;k.encode={...G?{grid:G}:{}},isEmpty(k.encode)&&delete k.encode}return{scale:d,orient:f,...k,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:getFirstDefined(_,0)}}else{if(!s.header&&n.mainExtracted)return;if(p!==void 0){let Z=p;(L=(P=k.encode)==null?void 0:P.labels)!=null&&L.update&&isSignalRef(k.encode.labels.update.text)&&(Z=replaceAll(p,"datum.label",k.encode.labels.update.text.signal)),setAxisEncode(k,"labels","text",{signal:Z})}if(k.labelAlign===null&&delete k.labelAlign,k.encode){for(const Z of AXIS_PARTS)n.hasAxisPart(Z)||delete k.encode[Z];isEmpty(k.encode)&&delete k.encode}const G=assembleTitle(v,i);return{scale:d,orient:f,grid:!1,...G?{title:G}:{},...k,...i.aria===!1?{aria:!1}:{},zindex:getFirstDefined(_,0)}}}}function assembleAxisSignals(n){const{axes:t}=n.component,i=[];for(const s of POSITION_SCALE_CHANNELS)if(t[s]){for(const o of t[s])if(!o.get("disable")&&!o.get("gridScale")){const f=s==="x"?"height":"width",d=n.getSizeSignalRef(f).signal;f!==d&&i.push({name:f,update:d})}}return i}function assembleAxes(n,t){const{x:i=[],y:s=[]}=n;return[...i.map(o=>assembleAxis(o,"grid",t)),...s.map(o=>assembleAxis(o,"grid",t)),...i.map(o=>assembleAxis(o,"main",t)),...s.map(o=>assembleAxis(o,"main",t))].filter(o=>o)}function getAxisConfigFromConfigTypes(n,t,i,s){return Object.assign.apply(null,[{},...n.map(o=>{if(o==="axisOrient"){const f=i==="x"?"bottom":"left",d=t[i==="x"?"axisBottom":"axisLeft"]||{},p=t[i==="x"?"axisTop":"axisRight"]||{},v=new Set([...keys(d),...keys(p)]),_={};for(const k of v.values())_[k]={signal:`${s.signal} === "${f}" ? ${signalOrStringValue(d[k])} : ${signalOrStringValue(p[k])}`};return _}return t[o]})])}function getAxisConfigs(n,t,i,s){const o=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:isQuantitative(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],f=n==="x"?"axisX":"axisY",d=isSignalRef(i)?"axisOrient":`axis${titleCase(i)}`,p=[...o,...o.map(_=>f+_.substr(4))],v=["axis",d,f];return{vlOnlyAxisConfig:getAxisConfigFromConfigTypes(p,s,n,i),vgAxisConfig:getAxisConfigFromConfigTypes(v,s,n,i),axisConfigStyle:getAxisConfigStyle([...v,...p],s)}}function getAxisConfigStyle(n,t){var s;const i=[{}];for(const o of n){let f=(s=t[o])==null?void 0:s.style;if(f){f=array$5(f);for(const d of f)i.push(t.style[d])}}return Object.assign.apply(null,i)}function getAxisConfig(n,t,i,s={}){var f;const o=getStyleConfig(n,i,t);if(o!==void 0)return{configFrom:"style",configValue:o};for(const d of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((f=s[d])==null?void 0:f[n])!==void 0)return{configFrom:d,configValue:s[d][n]};return{}}const axisRules={scale:({model:n,channel:t})=>n.scaleName(t),format:({format:n})=>n,formatType:({formatType:n})=>n,grid:({fieldOrDatumDef:n,axis:t,scaleType:i})=>t.grid??defaultGrid(i,n),gridScale:({model:n,channel:t})=>gridScale(n,t),labelAlign:({axis:n,labelAngle:t,orient:i,channel:s})=>n.labelAlign||defaultLabelAlign(t,i,s),labelAngle:({labelAngle:n})=>n,labelBaseline:({axis:n,labelAngle:t,orient:i,channel:s})=>n.labelBaseline||defaultLabelBaseline(t,i,s),labelFlush:({axis:n,fieldOrDatumDef:t,channel:i})=>n.labelFlush??defaultLabelFlush(t.type,i),labelOverlap:({axis:n,fieldOrDatumDef:t,scaleType:i})=>n.labelOverlap??defaultLabelOverlap$1(t.type,i,isFieldDef(t)&&!!t.timeUnit,isFieldDef(t)?t.sort:void 0),orient:({orient:n})=>n,tickCount:({channel:n,model:t,axis:i,fieldOrDatumDef:s,scaleType:o})=>{const f=n==="x"?"width":n==="y"?"height":void 0,d=f?t.getSizeSignalRef(f):void 0;return i.tickCount??defaultTickCount({fieldOrDatumDef:s,scaleType:o,size:d,values:i.values})},tickMinStep:defaultTickMinStep,title:({axis:n,model:t,channel:i})=>{if(n.title!==void 0)return n.title;const s=getFieldDefTitle(t,i);if(s!==void 0)return s;const o=t.typedFieldDef(i),f=i==="x"?"x2":"y2",d=t.fieldDef(f);return mergeTitleFieldDefs(o?[toFieldDefBase(o)]:[],isFieldDef(d)?[toFieldDefBase(d)]:[])},values:({axis:n,fieldOrDatumDef:t})=>values$1(n,t),zindex:({axis:n,fieldOrDatumDef:t,mark:i})=>n.zindex??defaultZindex(i,t)};function defaultGrid(n,t){return!hasDiscreteDomain(n)&&isFieldDef(t)&&!isBinning(t==null?void 0:t.bin)&&!isBinned(t==null?void 0:t.bin)}function gridScale(n,t){const i=t==="x"?"y":"x";if(n.getScaleComponent(i))return n.scaleName(i)}function getLabelAngle(n,t,i,s,o){const f=t==null?void 0:t.labelAngle;if(f!==void 0)return isSignalRef(f)?f:normalizeAngle(f);{const{configValue:d}=getAxisConfig("labelAngle",s,t==null?void 0:t.style,o);return d!==void 0?normalizeAngle(d):i===X$1&&contains([NOMINAL,ORDINAL],n.type)&&!(isFieldDef(n)&&n.timeUnit)?270:void 0}}function normalizeAngleExpr(n){return`(((${n.signal} % 360) + 360) % 360)`}function defaultLabelBaseline(n,t,i,s){if(n!==void 0)if(i==="x"){if(isSignalRef(n)){const o=normalizeAngleExpr(n),f=isSignalRef(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${o} && ${o} < 135) || (225 < ${o} && ${o} < 315) ? "middle" :(${o} <= 45 || 315 <= ${o}) === ${f} ? "bottom" : "top"`}}if(45<n&&n<135||225<n&&n<315)return"middle";if(isSignalRef(t)){const o=n<=45||315<=n?"===":"!==";return{signal:`${t.signal} ${o} "top" ? "bottom" : "top"`}}return(n<=45||315<=n)==(t==="top")?"bottom":"top"}else{if(isSignalRef(n)){const o=normalizeAngleExpr(n),f=isSignalRef(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${o} <= 45 || 315 <= ${o} || (135 <= ${o} && ${o} <= 225) ? ${s?'"middle"':"null"} : (45 <= ${o} && ${o} <= 135) === ${f} ? "top" : "bottom"`}}if(n<=45||315<=n||135<=n&&n<=225)return s?"middle":null;if(isSignalRef(t)){const o=45<=n&&n<=135?"===":"!==";return{signal:`${t.signal} ${o} "left" ? "top" : "bottom"`}}return(45<=n&&n<=135)==(t==="left")?"top":"bottom"}}function defaultLabelAlign(n,t,i){if(n===void 0)return;const s=i==="x",o=s?0:90,f=s?"bottom":"left";if(isSignalRef(n)){const d=normalizeAngleExpr(n),p=isSignalRef(t)?`(${t.signal} === "${f}")`:t===f;return{signal:`(${o?`(${d} + 90)`:d} % 180 === 0) ? ${s?null:'"center"'} :(${o} < ${d} && ${d} < ${180+o}) === ${p} ? "left" : "right"`}}if((n+o)%180===0)return s?null:"center";if(isSignalRef(t)){const d=o<n&&n<180+o?"===":"!==";return{signal:`${`${t.signal} ${d} "${f}"`} ? "left" : "right"`}}return(o<n&&n<180+o)==(t===f)?"left":"right"}function defaultLabelFlush(n,t){if(t==="x"&&contains(["quantitative","temporal"],n))return!0}function defaultLabelOverlap$1(n,t,i,s){if(i&&!isObject(s)||n!=="nominal"&&n!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function defaultOrient(n){return n==="x"?"bottom":"left"}function defaultTickCount({fieldOrDatumDef:n,scaleType:t,size:i,values:s}){var o;if(!s&&!hasDiscreteDomain(t)&&t!=="log"){if(isFieldDef(n)){if(isBinning(n.bin))return{signal:`ceil(${i.signal}/10)`};if(n.timeUnit&&contains(["month","hours","day","quarter"],(o=normalizeTimeUnit(n.timeUnit))==null?void 0:o.unit))return}return{signal:`ceil(${i.signal}/40)`}}}function defaultTickMinStep({format:n,fieldOrDatumDef:t}){if(n==="d")return 1;if(isFieldDef(t)){const{timeUnit:i}=t;if(i){const s=durationExpr(i);if(s)return{signal:s}}}}function getFieldDefTitle(n,t){const i=t==="x"?"x2":"y2",s=n.fieldDef(t),o=n.fieldDef(i),f=s?s.title:void 0,d=o?o.title:void 0;if(f&&d)return mergeTitle(f,d);if(f)return f;if(d)return d;if(f!==void 0)return f;if(d!==void 0)return d}function values$1(n,t){const i=n.values;if(isArray(i))return valueArray(t,i);if(isSignalRef(i))return i}function defaultZindex(n,t){return n==="rect"&&isDiscrete(t)?1:0}class CalculateNode extends DataFlowNode{clone(){return new CalculateNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i,this._dependentFields=getDependentFields(this.transform.calculate)}static parseAllForSortIndex(t,i){return i.forEachFieldDef((s,o)=>{if(isScaleFieldDef(s)&&isSortArray(s.sort)){const{field:f,timeUnit:d}=s,p=s.sort,v=p.map((_,k)=>`${fieldFilterExpression({field:f,timeUnit:d,equal:_})} ? ${k} : `).join("")+p.length;t=new CalculateNode(t,{calculate:v,as:sortArrayIndexField(s,o,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${hash(this.transform)}`}}function sortArrayIndexField(n,t,i){return vgField(n,{prefix:t,suffix:"sort_index",...i})}function getHeaderChannel(n,t){return contains(["top","bottom"],t)?"column":contains(["left","right"],t)||n==="row"?"row":"column"}function getHeaderProperty(n,t,i,s){const o=s==="row"?i.headerRow:s==="column"?i.headerColumn:i.headerFacet;return getFirstDefined((t||{})[n],o[n],i.header[n])}function getHeaderProperties(n,t,i,s){const o={};for(const f of n){const d=getHeaderProperty(f,t||{},i,s);d!==void 0&&(o[f]=d)}return o}const HEADER_CHANNELS=["row","column"],HEADER_TYPES=["header","footer"];function assembleTitleGroup(n,t){const i=n.component.layoutHeaders[t].title,s=n.config?n.config:void 0,o=n.component.layoutHeaders[t].facetFieldDef?n.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:f,titleAngle:d,titleOrient:p}=getHeaderProperties(["titleAnchor","titleAngle","titleOrient"],o.header,s,t),v=getHeaderChannel(t,p),_=normalizeAngle(d);return{name:`${t}-title`,type:"group",role:`${v}-title`,title:{text:i,...t==="row"?{orient:"left"}:{},style:"guide-title",...defaultHeaderGuideBaseline(_,v),...defaultHeaderGuideAlign(v,_,f),...assembleHeaderProperties(s,o,t,HEADER_TITLE_PROPERTIES,HEADER_TITLE_PROPERTIES_MAP)}}}function defaultHeaderGuideAlign(n,t,i="middle"){switch(i){case"start":return{align:"left"};case"end":return{align:"right"}}const s=defaultLabelAlign(t,n==="row"?"left":"top",n==="row"?"y":"x");return s?{align:s}:{}}function defaultHeaderGuideBaseline(n,t){const i=defaultLabelBaseline(n,t==="row"?"left":"top",t==="row"?"y":"x",!0);return i?{baseline:i}:{}}function assembleHeaderGroups(n,t){const i=n.component.layoutHeaders[t],s=[];for(const o of HEADER_TYPES)if(i[o])for(const f of i[o]){const d=assembleHeaderGroup(n,t,o,i,f);d!=null&&s.push(d)}return s}function getSort$1(n,t){const{sort:i}=n;return isSortField(i)?{field:vgField(i,{expr:"datum"}),order:i.order??"ascending"}:isArray(i)?{field:sortArrayIndexField(n,t,{expr:"datum"}),order:"ascending"}:{field:vgField(n,{expr:"datum"}),order:i??"ascending"}}function assembleLabelTitle(n,t,i){const{format:s,formatType:o,labelAngle:f,labelAnchor:d,labelOrient:p,labelExpr:v}=getHeaderProperties(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],n.header,i,t),_=formatSignalRef({fieldOrDatumDef:n,format:s,formatType:o,expr:"parent",config:i}).signal,k=getHeaderChannel(t,p);return{text:{signal:v?replaceAll(replaceAll(v,"datum.label",_),"datum.value",vgField(n,{expr:"parent"})):_},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...defaultHeaderGuideBaseline(f,k),...defaultHeaderGuideAlign(k,f,d),...assembleHeaderProperties(i,n,t,HEADER_LABEL_PROPERTIES,HEADER_LABEL_PROPERTIES_MAP)}}function assembleHeaderGroup(n,t,i,s,o){if(o){let f=null;const{facetFieldDef:d}=s,p=n.config?n.config:void 0;if(d&&o.labels){const{labelOrient:P}=getHeaderProperties(["labelOrient"],d.header,p,t);(t==="row"&&!contains(["top","bottom"],P)||t==="column"&&!contains(["left","right"],P))&&(f=assembleLabelTitle(d,t,p))}const v=isFacetModel(n)&&!isFacetMapping(n.facet),_=o.axes,k=(_==null?void 0:_.length)>0;if(f||k){const P=t==="row"?"height":"width";return{name:n.getName(`${t}_${i}`),type:"group",role:`${t}-${i}`,...s.facetFieldDef?{from:{data:n.getName(`${t}_domain`)},sort:getSort$1(d,t)}:{},...k&&v?{from:{data:n.getName(`facet_domain_${t}`)}}:{},...f?{title:f}:{},...o.sizeSignal?{encode:{update:{[P]:o.sizeSignal}}}:{},...k?{axes:_}:{}}}}return null}const LAYOUT_TITLE_BAND={column:{start:0,end:1},row:{start:1,end:0}};function getLayoutTitleBand(n,t){return LAYOUT_TITLE_BAND[t][n]}function assembleLayoutTitleBand(n,t){const i={};for(const s of FACET_CHANNELS){const o=n[s];if(o!=null&&o.facetFieldDef){const{titleAnchor:f,titleOrient:d}=getHeaderProperties(["titleAnchor","titleOrient"],o.facetFieldDef.header,t,s),p=getHeaderChannel(s,d),v=getLayoutTitleBand(f,p);v!==void 0&&(i[p]=v)}}return isEmpty(i)?void 0:i}function assembleHeaderProperties(n,t,i,s,o){const f={};for(const d of s){if(!o[d])continue;const p=getHeaderProperty(d,t==null?void 0:t.header,n,i);p!==void 0&&(f[o[d]]=p)}return f}function assembleLayoutSignals(n){return[...sizeSignals(n,"width"),...sizeSignals(n,"height"),...sizeSignals(n,"childWidth"),...sizeSignals(n,"childHeight")]}function sizeSignals(n,t){const i=t==="width"?"x":"y",s=n.component.layoutSize.get(t);if(!s||s==="merged")return[];const o=n.getSizeSignalRef(t).signal;if(s==="step"){const f=n.getScaleComponent(i);if(f){const d=f.get("type"),p=f.get("range");if(hasDiscreteDomain(d)&&isVgRangeStep(p)){const v=n.scaleName(i);return isFacetModel(n.parent)&&n.parent.component.resolve.scale[i]==="independent"?[stepSignal(v,p)]:[stepSignal(v,p),{name:o,update:sizeExpr(v,f,`domain('${v}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(s=="container"){const f=o.endsWith("width"),d=f?"containerSize()[0]":"containerSize()[1]",p=getViewConfigContinuousSize(n.config.view,f?"width":"height"),v=`isFinite(${d}) ? ${d} : ${p}`;return[{name:o,init:v,on:[{update:v,events:"window:resize"}]}]}else return[{name:o,value:s}]}function stepSignal(n,t){const i=`${n}_step`;return isSignalRef(t.step)?{name:i,update:t.step.signal}:{name:i,value:t.step}}function sizeExpr(n,t,i){const s=t.get("type"),o=t.get("padding"),f=getFirstDefined(t.get("paddingOuter"),o);let d=t.get("paddingInner");return d=s==="band"?d!==void 0?d:o:1,`bandspace(${i}, ${signalOrStringValue(d)}, ${signalOrStringValue(f)}) * ${n}_step`}function getSizeTypeFromLayoutSizeType(n){return n==="childWidth"?"width":n==="childHeight"?"height":n}function guideEncodeEntry(n,t){return keys(n).reduce((i,s)=>({...i,...wrapCondition({model:t,channelDef:n[s],vgChannel:s,mainRefFn:o=>signalOrValueRef(o.value),invalidValueRef:void 0})}),{})}function defaultScaleResolve(n,t){if(isFacetModel(t))return n==="theta"?"independent":"shared";if(isLayerModel(t))return"shared";if(isConcatModel(t))return isXorY(n)||n==="theta"||n==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function parseGuideResolve(n,t){const i=n.scale[t],s=isXorY(t)?"axis":"legend";return i==="independent"?(n[s][t]==="shared"&&warn(independentScaleMeansIndependentGuide(t)),"independent"):n[s][t]||"shared"}const LEGEND_COMPONENT_PROPERTY_INDEX={...COMMON_LEGEND_PROPERTY_INDEX,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},LEGEND_COMPONENT_PROPERTIES=keys(LEGEND_COMPONENT_PROPERTY_INDEX);class LegendComponent extends Split{}const legendEncodeRules={symbols,gradient,labels:labels$1,entries};function symbols(n,{fieldOrDatumDef:t,model:i,channel:s,legendCmpt:o,legendType:f}){if(f!=="symbol")return;const{markDef:d,encoding:p,config:v,mark:_}=i,k=d.filled&&_!=="trail";let P={...applyMarkConfig({},i,FILL_STROKE_CONFIG),...color(i,{filled:k})};const L=o.get("symbolOpacity")??v.legend.symbolOpacity,G=o.get("symbolFillColor")??v.legend.symbolFillColor,Z=o.get("symbolStrokeColor")??v.legend.symbolStrokeColor,W=L===void 0?getMaxValue(p.opacity)??d.opacity:void 0;if(P.fill){if(s==="fill"||k&&s===COLOR)delete P.fill;else if(hasProperty(P.fill,"field"))G?delete P.fill:(P.fill=signalOrValueRef(v.legend.symbolBaseFillColor??"black"),P.fillOpacity=signalOrValueRef(W??1));else if(isArray(P.fill)){const j=getFirstConditionValue(p.fill??p.color)??d.fill??(k&&d.color);j&&(P.fill=signalOrValueRef(j))}}if(P.stroke){if(s==="stroke"||!k&&s===COLOR)delete P.stroke;else if(hasProperty(P.stroke,"field")||Z)delete P.stroke;else if(isArray(P.stroke)){const j=getFirstDefined(getFirstConditionValue(p.stroke||p.color),d.stroke,k?d.color:void 0);j&&(P.stroke={value:j})}}if(s!==OPACITY){const j=isFieldDef(t)&&selectedCondition(i,o,t);j?P.opacity=[{test:j,...signalOrValueRef(W??1)},signalOrValueRef(v.legend.unselectedOpacity)]:W&&(P.opacity=signalOrValueRef(W))}return P={...P,...n},isEmpty(P)?void 0:P}function gradient(n,{model:t,legendType:i,legendCmpt:s}){if(i!=="gradient")return;const{config:o,markDef:f,encoding:d}=t;let p={};const _=(s.get("gradientOpacity")??o.legend.gradientOpacity)===void 0?getMaxValue(d.opacity)||f.opacity:void 0;return _&&(p.opacity=signalOrValueRef(_)),p={...p,...n},isEmpty(p)?void 0:p}function labels$1(n,{fieldOrDatumDef:t,model:i,channel:s,legendCmpt:o}){const f=i.legend(s)||{},d=i.config,p=isFieldDef(t)?selectedCondition(i,o,t):void 0,v=p?[{test:p,value:1},{value:d.legend.unselectedOpacity}]:void 0,{format:_,formatType:k}=f;let P;isCustomFormatType(k)?P=formatCustomType({fieldOrDatumDef:t,field:"datum.value",format:_,formatType:k,config:d}):_===void 0&&k===void 0&&d.customFormatTypes&&(t.type==="quantitative"&&d.numberFormatType?P=formatCustomType({fieldOrDatumDef:t,field:"datum.value",format:d.numberFormat,formatType:d.numberFormatType,config:d}):t.type==="temporal"&&d.timeFormatType&&isFieldDef(t)&&t.timeUnit===void 0&&(P=formatCustomType({fieldOrDatumDef:t,field:"datum.value",format:d.timeFormat,formatType:d.timeFormatType,config:d})));const L={...v?{opacity:v}:{},...P?{text:P}:{},...n};return isEmpty(L)?void 0:L}function entries(n,{legendCmpt:t}){const i=t.get("selections");return i!=null&&i.length?{...n,fill:{value:"transparent"}}:n}function getMaxValue(n){return getConditionValue(n,(t,i)=>Math.max(t,i.value))}function getFirstConditionValue(n){return getConditionValue(n,(t,i)=>getFirstDefined(t,i.value))}function getConditionValue(n,t){if(hasConditionalValueDef(n))return array$5(n.condition).reduce(t,n.value);if(isValueDef(n))return n.value}function selectedCondition(n,t,i){const s=t.get("selections");if(!(s!=null&&s.length))return;const o=$(i.field);return s.map(f=>`(!length(data(${$(varName(f)+STORE)})) || (${f}[${o}] && indexof(${f}[${o}], datum.value) >= 0))`).join(" || ")}const legendRules={direction:({direction:n})=>n,format:({fieldOrDatumDef:n,legend:t,config:i})=>{const{format:s,formatType:o}=t;return guideFormat(n,n.type,s,o,i,!1)},formatType:({legend:n,fieldOrDatumDef:t,scaleType:i})=>{const{formatType:s}=n;return guideFormatType(s,t,i)},gradientLength:n=>{const{legend:t,legendConfig:i}=n;return t.gradientLength??i.gradientLength??defaultGradientLength(n)},labelOverlap:({legend:n,legendConfig:t,scaleType:i})=>n.labelOverlap??t.labelOverlap??defaultLabelOverlap(i),symbolType:({legend:n,markDef:t,channel:i,encoding:s})=>n.symbolType??defaultSymbolType(t.type,i,s.shape,t.shape),title:({fieldOrDatumDef:n,config:t})=>title(n,t,{allowDisabling:!0}),type:({legendType:n,scaleType:t,channel:i})=>{if(isColorChannel(i)&&isContinuousToContinuous(t)){if(n==="gradient")return}else if(n==="symbol")return;return n},values:({fieldOrDatumDef:n,legend:t})=>values(t,n)};function values(n,t){const i=n.values;if(isArray(i))return valueArray(t,i);if(isSignalRef(i))return i}function defaultSymbolType(n,t,i,s){if(t!=="shape"){const o=getFirstConditionValue(i)??s;if(o)return o}switch(n){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function getLegendType(n){const{legend:t}=n;return getFirstDefined(t.type,defaultType$1(n))}function defaultType$1({channel:n,timeUnit:t,scaleType:i}){if(isColorChannel(n)){if(contains(["quarter","month","day"],t))return"symbol";if(isContinuousToContinuous(i))return"gradient"}return"symbol"}function getDirection({legendConfig:n,legendType:t,orient:i,legend:s}){return s.direction??n[t?"gradientDirection":"symbolDirection"]??defaultDirection(i,t)}function defaultDirection(n,t){switch(n){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function defaultGradientLength({legendConfig:n,model:t,direction:i,orient:s,scaleType:o}){const{gradientHorizontalMaxLength:f,gradientHorizontalMinLength:d,gradientVerticalMaxLength:p,gradientVerticalMinLength:v}=n;if(isContinuousToContinuous(o))return i==="horizontal"?s==="top"||s==="bottom"?gradientLengthSignal(t,"width",d,f):d:gradientLengthSignal(t,"height",v,p)}function gradientLengthSignal(n,t,i,s){return{signal:`clamp(${n.getSizeSignalRef(t).signal}, ${i}, ${s})`}}function defaultLabelOverlap(n){if(contains(["quantile","threshold","log","symlog"],n))return"greedy"}function parseLegend(n){const t=isUnitModel(n)?parseUnitLegend(n):parseNonUnitLegend(n);return n.component.legends=t,t}function parseUnitLegend(n){const{encoding:t}=n,i={};for(const s of[COLOR,...LEGEND_SCALE_CHANNELS]){const o=getFieldOrDatumDef(t[s]);!o||!n.getScaleComponent(s)||s===SHAPE&&isFieldDef(o)&&o.type===GEOJSON||(i[s]=parseLegendForChannel(n,s))}return i}function getLegendDefWithScale(n,t){const i=n.scaleName(t);if(n.mark==="trail"){if(t==="color")return{stroke:i};if(t==="size")return{strokeWidth:i}}return t==="color"?n.markDef.filled?{fill:i}:{stroke:i}:{[t]:i}}function isExplicit$1(n,t,i,s){switch(t){case"disable":return i!==void 0;case"values":return!!(i!=null&&i.values);case"title":if(t==="title"&&n===(s==null?void 0:s.title))return!0}return n===(i||{})[t]}function parseLegendForChannel(n,t){var De;let i=n.legend(t);const{markDef:s,encoding:o,config:f}=n,d=f.legend,p=new LegendComponent({},getLegendDefWithScale(n,t));parseInteractiveLegend(n,t,p);const v=i!==void 0?!i:d.disable;if(p.set("disable",v,i!==void 0),v)return p;i=i||{};const _=n.getScaleComponent(t).get("type"),k=getFieldOrDatumDef(o[t]),P=isFieldDef(k)?(De=normalizeTimeUnit(k.timeUnit))==null?void 0:De.unit:void 0,L=i.orient||f.legend.orient||"right",G=getLegendType({legend:i,channel:t,timeUnit:P,scaleType:_}),Z=getDirection({legend:i,legendType:G,orient:L,legendConfig:d}),W={legend:i,channel:t,model:n,markDef:s,encoding:o,fieldOrDatumDef:k,legendConfig:d,config:f,scaleType:_,orient:L,legendType:G,direction:Z};for(const le of LEGEND_COMPONENT_PROPERTIES){if(G==="gradient"&&le.startsWith("symbol")||G==="symbol"&&le.startsWith("gradient"))continue;const Ce=le in legendRules?legendRules[le](W):i[le];if(Ce!==void 0){const Me=isExplicit$1(Ce,le,i,n.fieldDef(t));(Me||f.legend[le]===void 0)&&p.set(le,Ce,Me)}}const j=(i==null?void 0:i.encoding)??{},H=p.get("selections"),me={},$e={fieldOrDatumDef:k,model:n,channel:t,legendCmpt:p,legendType:G};for(const le of["labels","legend","title","symbols","gradient","entries"]){const Ce=guideEncodeEntry(j[le]??{},n),Me=le in legendEncodeRules?legendEncodeRules[le](Ce,$e):Ce;Me!==void 0&&!isEmpty(Me)&&(me[le]={...H!=null&&H.length&&isFieldDef(k)?{name:`${varName(k.field)}_legend_${le}`}:{},...H!=null&&H.length?{interactive:!!H}:{},update:Me})}return isEmpty(me)||p.set("encode",me,!!(i!=null&&i.encoding)),p}function parseNonUnitLegend(n){const{legends:t,resolve:i}=n.component;for(const s of n.children){parseLegend(s);for(const o of keys(s.component.legends))i.legend[o]=parseGuideResolve(n.component.resolve,o),i.legend[o]==="shared"&&(t[o]=mergeLegendComponent(t[o],s.component.legends[o]),t[o]||(i.legend[o]="independent",delete t[o]))}for(const s of keys(t))for(const o of n.children)o.component.legends[s]&&i.legend[s]==="shared"&&delete o.component.legends[s];return t}function mergeLegendComponent(n,t){var f,d,p,v;if(!n)return t.clone();const i=n.getWithExplicit("orient"),s=t.getWithExplicit("orient");if(i.explicit&&s.explicit&&i.value!==s.value)return;let o=!1;for(const _ of LEGEND_COMPONENT_PROPERTIES){const k=mergeValuesWithExplicit(n.getWithExplicit(_),t.getWithExplicit(_),_,"legend",(P,L)=>{switch(_){case"symbolType":return mergeSymbolType(P,L);case"title":return mergeTitleComponent(P,L);case"type":return o=!0,makeImplicit("symbol")}return defaultTieBreaker(P,L,_,"legend")});n.setWithExplicit(_,k)}return o&&((d=(f=n.implicit)==null?void 0:f.encode)!=null&&d.gradient&&deleteNestedProperty(n.implicit,["encode","gradient"]),(v=(p=n.explicit)==null?void 0:p.encode)!=null&&v.gradient&&deleteNestedProperty(n.explicit,["encode","gradient"])),n}function mergeSymbolType(n,t){return t.value==="circle"?t:n}function setLegendEncode(n,t,i,s){var o,f;n.encode??(n.encode={}),(o=n.encode)[t]??(o[t]={}),(f=n.encode[t]).update??(f.update={}),n.encode[t].update[i]=s}function assembleLegends(n){const t=n.component.legends,i={};for(const o of keys(t)){const f=n.getScaleComponent(o),d=stringify(f.get("domains"));if(i[d])for(const p of i[d])mergeLegendComponent(p,t[o])||i[d].push(t[o]);else i[d]=[t[o].clone()]}return vals(i).flat().map(o=>assembleLegend(o,n.config)).filter(o=>o!==void 0)}function assembleLegend(n,t){var d,p,v;const{disable:i,labelExpr:s,selections:o,...f}=n.combine();if(!i){if(t.aria===!1&&f.aria==null&&(f.aria=!1),(d=f.encode)!=null&&d.symbols){const _=f.encode.symbols.update;_.fill&&_.fill.value!=="transparent"&&!_.stroke&&!f.stroke&&(_.stroke={value:"transparent"});for(const k of LEGEND_SCALE_CHANNELS)f[k]&&delete _[k]}if(f.title||delete f.title,s!==void 0){let _=s;(v=(p=f.encode)==null?void 0:p.labels)!=null&&v.update&&isSignalRef(f.encode.labels.update.text)&&(_=replaceAll(s,"datum.label",f.encode.labels.update.text.signal)),setLegendEncode(f,"labels","text",{signal:_})}return f}}function assembleProjections(n){return isLayerModel(n)||isConcatModel(n)?assembleProjectionsForModelAndChildren(n):assembleProjectionForModel(n)}function assembleProjectionsForModelAndChildren(n){return n.children.reduce((t,i)=>t.concat(i.assembleProjections()),assembleProjectionForModel(n))}function assembleProjectionForModel(n){const t=n.component.projection;if(!t||t.merged)return[];const i=t.combine(),{name:s}=i;if(t.data){const o={signal:`[${t.size.map(d=>d.signal).join(", ")}]`},f=t.data.reduce((d,p)=>{const v=isSignalRef(p)?p.signal:`data('${n.lookupDataSource(p)}')`;return contains(d,v)||d.push(v),d},[]);if(f.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:s,size:o,fit:{signal:f.length>1?`[${f.join(", ")}]`:f[0]},...i}]}else return[{name:s,translate:{signal:"[width / 2, height / 2]"},...i}]}const PROJECTION_PROPERTIES=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class ProjectionComponent extends Split{constructor(t,i,s,o){super({...i},{name:t}),this.specifiedProjection=i,this.size=s,this.data=o,this.merged=!1}get isFit(){return!!this.data}}function parseProjection(n){n.component.projection=isUnitModel(n)?parseUnitProjection(n):parseNonUnitProjections(n)}function parseUnitProjection(n){if(n.hasProjection){const t=replaceExprRef(n.specifiedProjection),i=!(t&&(t.scale!=null||t.translate!=null)),s=i?[n.getSizeSignalRef("width"),n.getSizeSignalRef("height")]:void 0,o=i?gatherFitData(n):void 0,f=new ProjectionComponent(n.projectionName(!0),{...replaceExprRef(n.config.projection),...t},s,o);return f.get("type")||f.set("type","equalEarth",!1),f}}function gatherFitData(n){const t=[],{encoding:i}=n;for(const s of[[LONGITUDE,LATITUDE],[LONGITUDE2,LATITUDE2]])(getFieldOrDatumDef(i[s[0]])||getFieldOrDatumDef(i[s[1]]))&&t.push({signal:n.getName(`geojson_${t.length}`)});return n.channelHasField(SHAPE)&&n.typedFieldDef(SHAPE).type===GEOJSON&&t.push({signal:n.getName(`geojson_${t.length}`)}),t.length===0&&t.push(n.requestDataName(DataSourceType.Main)),t}function mergeIfNoConflict(n,t){const i=every(PROJECTION_PROPERTIES,o=>!!(!has$1(n.explicit,o)&&!has$1(t.explicit,o)||has$1(n.explicit,o)&&has$1(t.explicit,o)&&deepEqual(n.get(o),t.get(o))));if(deepEqual(n.size,t.size)){if(i)return n;if(deepEqual(n.explicit,{}))return t;if(deepEqual(t.explicit,{}))return n}return null}function parseNonUnitProjections(n){if(n.children.length===0)return;let t;for(const s of n.children)parseProjection(s);const i=every(n.children,s=>{const o=s.component.projection;if(o)if(t){const f=mergeIfNoConflict(t,o);return f&&(t=f),!!f}else return t=o,!0;else return!0});if(t&&i){const s=n.projectionName(!0),o=new ProjectionComponent(s,t.specifiedProjection,t.size,duplicate(t.data));for(const f of n.children){const d=f.component.projection;d&&(d.isFit&&o.data.push(...f.component.projection.data),f.renameProjection(d.get("name"),s),d.merged=!0)}return o}}function rangeFormula(n,t,i,s){if(binRequiresRange(t,i)){const o=isUnitModel(n)?n.axis(i)??n.legend(i)??{}:{},f=vgField(t,{expr:"datum"}),d=vgField(t,{expr:"datum",binSuffix:"end"});return{formulaAs:vgField(t,{binSuffix:"range",forAs:!0}),formula:binFormatExpression(f,d,o.format,o.formatType,s)}}return{}}function binKey(n,t){return`${binToString(n)}_${t}`}function getSignalsFromModel(n,t){return{signal:n.getName(`${t}_bins`),extentSignal:n.getName(`${t}_extent`)}}function getBinSignalName(n,t,i){const s=normalizeBin(i,void 0)??{},o=binKey(s,t);return n.getName(`${o}_bins`)}function isBinTransform(n){return"as"in n}function createBinComponent(n,t,i){let s,o;isBinTransform(n)?s=isString(n.as)?[n.as,`${n.as}_end`]:[n.as[0],n.as[1]]:s=[vgField(n,{forAs:!0}),vgField(n,{binSuffix:"end",forAs:!0})];const f={...normalizeBin(t,void 0)},d=binKey(f,n.field),{signal:p,extentSignal:v}=getSignalsFromModel(i,d);if(isParameterExtent(f.extent)){const k=f.extent;o=parseSelectionExtent(i,k.param,k),delete f.extent}const _={bin:f,field:n.field,as:[s],...p?{signal:p}:{},...v?{extentSignal:v}:{},...o?{span:o}:{}};return{key:d,binComponent:_}}class BinNode extends DataFlowNode{clone(){return new BinNode(null,duplicate(this.bins))}constructor(t,i){super(t),this.bins=i}static makeFromEncoding(t,i){const s=i.reduceFieldDef((o,f,d)=>{if(isTypedFieldDef(f)&&isBinning(f.bin)){const{key:p,binComponent:v}=createBinComponent(f,f.bin,i);o[p]={...v,...o[p],...rangeFormula(i,f,d,i.config)}}return o},{});return isEmpty(s)?null:new BinNode(t,s)}static makeFromTransform(t,i,s){const{key:o,binComponent:f}=createBinComponent(i,i.bin,s);return new BinNode(t,{[o]:f})}merge(t,i){for(const s of keys(t.bins))s in this.bins?(i(t.bins[s].signal,this.bins[s].signal),this.bins[s].as=unique([...this.bins[s].as,...t.bins[s].as],hash)):this.bins[s]=t.bins[s];for(const s of t.children)t.removeChild(s),s.parent=this;t.remove()}producedFields(){return new Set(vals(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(vals(this.bins).map(t=>t.field))}hash(){return`Bin ${hash(this.bins)}`}assemble(){return vals(this.bins).flatMap(t=>{const i=[],[s,...o]=t.as,{extent:f,...d}=t.bin,p={type:"bin",field:replacePathInField(t.field),as:s,signal:t.signal,...isParameterExtent(f)?{extent:null}:{extent:f},...t.span?{span:{signal:`span(${t.span})`}}:{},...d};!f&&t.extentSignal&&(i.push({type:"extent",field:replacePathInField(t.field),signal:t.extentSignal}),p.extent={signal:t.extentSignal}),i.push(p);for(const v of o)for(let _=0;_<2;_++)i.push({type:"formula",expr:vgField({field:s[_]},{expr:"datum"}),as:v[_]});return t.formula&&i.push({type:"formula",expr:t.formula,as:t.formulaAs}),i})}}function addDimension(n,t,i,s){var f;const o=isUnitModel(s)?s.encoding[getSecondaryRangeChannel(t)]:void 0;if(isTypedFieldDef(i)&&isUnitModel(s)&&hasBandEnd(i,o,s.markDef,s.config)){n.add(vgField(i,{})),n.add(vgField(i,{suffix:"end"}));const{mark:d,markDef:p,config:v}=s,_=getBandPosition({fieldDef:i,markDef:p,config:v});isRectBasedMark(d)&&_!==.5&&isXorY(t)&&(n.add(vgField(i,{suffix:OFFSETTED_RECT_START_SUFFIX})),n.add(vgField(i,{suffix:OFFSETTED_RECT_END_SUFFIX}))),i.bin&&binRequiresRange(i,t)&&n.add(vgField(i,{binSuffix:"range"}))}else if(isGeoPositionChannel(t)){const d=getPositionChannelFromLatLong(t);n.add(s.getName(d))}else n.add(vgField(i));return isScaleFieldDef(i)&&isFieldRange((f=i.scale)==null?void 0:f.range)&&n.add(i.scale.range.field),n}function mergeMeasures(n,t){for(const i of keys(t)){const s=t[i];for(const o of keys(s))i in n?n[i][o]=new Set([...n[i][o]??[],...s[o]]):n[i]={[o]:s[o]}}}class AggregateNode extends DataFlowNode{clone(){return new AggregateNode(null,new Set(this.dimensions),duplicate(this.measures))}constructor(t,i,s){super(t),this.dimensions=i,this.measures=s}get groupBy(){return this.dimensions}static makeFromEncoding(t,i){let s=!1;i.forEachFieldDef(d=>{d.aggregate&&(s=!0)});const o={},f=new Set;return!s||(i.forEachFieldDef((d,p)=>{const{aggregate:v,field:_}=d;if(v)if(v==="count")o["*"]??(o["*"]={}),o["*"].count=new Set([vgField(d,{forAs:!0})]);else{if(isArgminDef(v)||isArgmaxDef(v)){const k=isArgminDef(v)?"argmin":"argmax",P=v[k];o[P]??(o[P]={}),o[P][k]=new Set([vgField({op:k,field:P},{forAs:!0})])}else o[_]??(o[_]={}),o[_][v]=new Set([vgField(d,{forAs:!0})]);isScaleChannel(p)&&i.scaleDomain(p)==="unaggregated"&&(o[_]??(o[_]={}),o[_].min=new Set([vgField({field:_,aggregate:"min"},{forAs:!0})]),o[_].max=new Set([vgField({field:_,aggregate:"max"},{forAs:!0})]))}else addDimension(f,p,d,i)}),f.size+keys(o).length===0)?null:new AggregateNode(t,f,o)}static makeFromTransform(t,i){var s;const o=new Set,f={};for(const d of i.aggregate){const{op:p,field:v,as:_}=d;p&&(p==="count"?(f["*"]??(f["*"]={}),f["*"].count=new Set([_||vgField(d,{forAs:!0})])):(f[v]??(f[v]={}),(s=f[v])[p]??(s[p]=new Set),f[v][p].add(_||vgField(d,{forAs:!0}))))}for(const d of i.groupby??[])o.add(d);return o.size+keys(f).length===0?null:new AggregateNode(t,o,f)}merge(t){return setEqual(this.dimensions,t.dimensions)?(mergeMeasures(this.measures,t.measures),!0):(debug("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...keys(this.measures)])}producedFields(){const t=new Set;for(const i of keys(this.measures))for(const s of keys(this.measures[i])){const o=this.measures[i][s];o.size===0?t.add(`${s}_${i}`):o.forEach(t.add,t)}return t}hash(){return`Aggregate ${hash({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],i=[],s=[];for(const f of keys(this.measures))for(const d of keys(this.measures[f]))for(const p of this.measures[f][d])s.push(p),t.push(d),i.push(f==="*"?null:replacePathInField(f));return{type:"aggregate",groupby:[...this.dimensions].map(replacePathInField),ops:t,fields:i,as:s}}}class FacetNode extends DataFlowNode{constructor(t,i,s,o){super(t),this.model=i,this.name=s,this.data=o;for(const f of FACET_CHANNELS){const d=i.facet[f];if(d){const{bin:p,sort:v}=d;this[f]={name:i.getName(`${f}_domain`),fields:[vgField(d),...isBinning(p)?[vgField(d,{binSuffix:"end"})]:[]],...isSortField(v)?{sortField:v}:isArray(v)?{sortIndexField:sortArrayIndexField(d,f)}:{}}}}this.childModel=i.child}hash(){let t="Facet";for(const i of FACET_CHANNELS)this[i]&&(t+=` ${i.charAt(0)}:${hash(this[i])}`);return t}get fields(){var i;const t=[];for(const s of FACET_CHANNELS)(i=this[s])!=null&&i.fields&&t.push(...this[s].fields);return t}dependentFields(){const t=new Set(this.fields);for(const i of FACET_CHANNELS)this[i]&&(this[i].sortField&&t.add(this[i].sortField.field),this[i].sortIndexField&&t.add(this[i].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const i of POSITION_SCALE_CHANNELS){const s=this.childModel.component.scales[i];if(s&&!s.merged){const o=s.get("type"),f=s.get("range");if(hasDiscreteDomain(o)&&isVgRangeStep(f)){const d=assembleDomain(this.childModel,i),p=getFieldFromDomain(d);p?t[i]=p:warn(unknownField(i))}}}return t}assembleRowColumnHeaderData(t,i,s){const o={row:"y",column:"x",facet:void 0}[t],f=[],d=[],p=[];o&&s&&s[o]&&(i?(f.push(`distinct_${s[o]}`),d.push("max")):(f.push(s[o]),d.push("distinct")),p.push(`distinct_${s[o]}`));const{sortField:v,sortIndexField:_}=this[t];if(v){const{op:k=DEFAULT_SORT_OP,field:P}=v;f.push(P),d.push(k),p.push(vgField(v,{forAs:!0}))}else _&&(f.push(_),d.push("max"),p.push(_));return{name:this[t].name,source:i??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...f.length?{fields:f,ops:d,as:p}:{}}]}}assembleFacetHeaderData(t){var v;const{columns:i}=this.model.layout,{layoutHeaders:s}=this.model.component,o=[],f={};for(const _ of HEADER_CHANNELS){for(const k of HEADER_TYPES){const P=(s[_]&&s[_][k])??[];for(const L of P)if(((v=L.axes)==null?void 0:v.length)>0){f[_]=!0;break}}if(f[_]){const k=`length(data("${this.facet.name}"))`,P=_==="row"?i?{signal:`ceil(${k} / ${i})`}:1:i?{signal:`min(${k}, ${i})`}:{signal:k};o.push({name:`${this.facet.name}_${_}`,transform:[{type:"sequence",start:0,stop:P}]})}}const{row:d,column:p}=f;return(d||p)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,t)),o}assemble(){const t=[];let i=null;const s=this.getChildIndependentFieldsWithStep(),{column:o,row:f,facet:d}=this;if(o&&f&&(s.x||s.y)){i=`cross_${this.column.name}_${this.row.name}`;const p=[].concat(s.x??[],s.y??[]),v=p.map(()=>"distinct");t.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:p,ops:v}]})}for(const p of[COLUMN,ROW])this[p]&&t.push(this.assembleRowColumnHeaderData(p,i,s));if(d){const p=this.assembleFacetHeaderData(s);p&&t.push(...p)}return t}}function unquote(n){return n.startsWith("'")&&n.endsWith("'")||n.startsWith('"')&&n.endsWith('"')?n.slice(1,-1):n}function parseExpression(n,t){const i=accessPathWithDatum(n);if(t==="number")return`toNumber(${i})`;if(t==="boolean")return`toBoolean(${i})`;if(t==="string")return`toString(${i})`;if(t==="date")return`toDate(${i})`;if(t==="flatten")return i;if(t.startsWith("date:")){const s=unquote(t.slice(5,t.length));return`timeParse(${i},'${s}')`}else if(t.startsWith("utc:")){const s=unquote(t.slice(4,t.length));return`utcParse(${i},'${s}')`}else return warn(unrecognizedParse(t)),null}function getImplicitFromFilterTransform(n){const t={};return forEachLeaf(n.filter,i=>{if(isFieldPredicate(i)){let s=null;isFieldEqualPredicate(i)?s=signalRefOrValue(i.equal):isFieldLTEPredicate(i)?s=signalRefOrValue(i.lte):isFieldLTPredicate(i)?s=signalRefOrValue(i.lt):isFieldGTPredicate(i)?s=signalRefOrValue(i.gt):isFieldGTEPredicate(i)?s=signalRefOrValue(i.gte):isFieldRangePredicate(i)?s=i.range[0]:isFieldOneOfPredicate(i)&&(s=(i.oneOf??i.in)[0]),s&&(isDateTime(s)?t[i.field]="date":isNumber$1(s)?t[i.field]="number":isString(s)&&(t[i.field]="string")),i.timeUnit&&(t[i.field]="date")}}),t}function getImplicitFromEncoding(n){const t={};function i(s){isFieldOrDatumDefForTimeFormat(s)?t[s.field]="date":s.type==="quantitative"&&isMinMaxOp(s.aggregate)?t[s.field]="number":accessPathDepth(s.field)>1?s.field in t||(t[s.field]="flatten"):isScaleFieldDef(s)&&isSortField(s.sort)&&accessPathDepth(s.sort.field)>1&&(s.sort.field in t||(t[s.sort.field]="flatten"))}if((isUnitModel(n)||isFacetModel(n))&&n.forEachFieldDef((s,o)=>{if(isTypedFieldDef(s))i(s);else{const f=getMainRangeChannel(o),d=n.fieldDef(f);i({...s,type:d.type})}}),isUnitModel(n)){const{mark:s,markDef:o,encoding:f}=n;if(isPathMark(s)&&!n.encoding.order){const d=o.orient==="horizontal"?"y":"x",p=f[d];isFieldDef(p)&&p.type==="quantitative"&&!(p.field in t)&&(t[p.field]="number")}}return t}function getImplicitFromSelection(n){const t={};if(isUnitModel(n)&&n.component.selection)for(const i of keys(n.component.selection)){const s=n.component.selection[i];for(const o of s.project.items)!o.channel&&accessPathDepth(o.field)>1&&(t[o.field]="flatten")}return t}class ParseNode extends DataFlowNode{clone(){return new ParseNode(null,duplicate(this._parse))}constructor(t,i){super(t),this._parse=i}hash(){return`Parse ${hash(this._parse)}`}static makeExplicit(t,i,s){var d;let o={};const f=i.data;return!isGenerator(f)&&((d=f==null?void 0:f.format)!=null&&d.parse)&&(o=f.format.parse),this.makeWithAncestors(t,o,{},s)}static makeWithAncestors(t,i,s,o){for(const p of keys(s)){const v=o.getWithExplicit(p);v.value!==void 0&&(v.explicit||v.value===s[p]||v.value==="derived"||s[p]==="flatten"?delete s[p]:warn(differentParse(p,s[p],v.value)))}for(const p of keys(i)){const v=o.get(p);v!==void 0&&(v===i[p]?delete i[p]:warn(differentParse(p,i[p],v)))}const f=new Split(i,s);o.copyAll(f);const d={};for(const p of keys(f.combine())){const v=f.get(p);v!==null&&(d[p]=v)}return keys(d).length===0||o.parseNothing?null:new ParseNode(t,d)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const i of keys(this._parse)){const s=this._parse[i];accessPathDepth(i)===1&&(t[i]=s)}return t}producedFields(){return new Set(keys(this._parse))}dependentFields(){return new Set(keys(this._parse))}assembleTransforms(t=!1){return keys(this._parse).filter(i=>t?accessPathDepth(i)>1:!0).map(i=>{const s=parseExpression(i,this._parse[i]);return s?{type:"formula",expr:s,as:removePathFromField(i)}:null}).filter(i=>i!==null)}}class IdentifierNode extends DataFlowNode{clone(){return new IdentifierNode(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([SELECTION_ID])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:SELECTION_ID}}}class GraticuleNode extends DataFlowNode{clone(){return new GraticuleNode(null,this.params)}constructor(t,i){super(t),this.params=i}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${hash(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class SequenceNode extends DataFlowNode{clone(){return new SequenceNode(null,this.params)}constructor(t,i){super(t),this.params=i}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${hash(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class SourceNode extends DataFlowNode{constructor(t){super(null),t??(t={name:"source"});let i;if(isGenerator(t)||(i=t.format?{...omit(t.format,["parse"])}:{}),isInlineData(t))this._data={values:t.values};else if(isUrlData(t)){if(this._data={url:t.url},!i.type){let s=/(?:\.([^.]+))?$/.exec(t.url)[1];contains(["json","csv","tsv","dsv","topojson"],s)||(s="json"),i.type=s}}else isSphereGenerator(t)?this._data={values:[{type:"Sphere"}]}:(isNamedData(t)||isGenerator(t))&&(this._data={});this._generator=isGenerator(t),t.name&&(this._name=t.name),i&&!isEmpty(i)&&(this._data.format=i)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var __classPrivateFieldSet=function(n,t,i,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!o:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(n,i):o?o.value=i:t.set(n,i),i},__classPrivateFieldGet=function(n,t,i,s){if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!s:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?s:i==="a"?s.call(n):s?s.value:t.get(n)},_Optimizer_modified;function isDataSourceNode(n){return n instanceof SourceNode||n instanceof GraticuleNode||n instanceof SequenceNode}class Optimizer{constructor(){_Optimizer_modified.set(this,void 0),__classPrivateFieldSet(this,_Optimizer_modified,!1,"f")}setModified(){__classPrivateFieldSet(this,_Optimizer_modified,!0,"f")}get modifiedFlag(){return __classPrivateFieldGet(this,_Optimizer_modified,"f")}}_Optimizer_modified=new WeakMap;class BottomUpOptimizer extends Optimizer{getNodeDepths(t,i,s){s.set(t,i);for(const o of t.children)this.getNodeDepths(o,i+1,s);return s}optimize(t){const s=[...this.getNodeDepths(t,0,new Map).entries()].sort((o,f)=>f[1]-o[1]);for(const o of s)this.run(o[0]);return this.modifiedFlag}}class TopDownOptimizer extends Optimizer{optimize(t){this.run(t);for(const i of t.children)this.optimize(i);return this.modifiedFlag}}class MergeIdenticalNodes extends TopDownOptimizer{mergeNodes(t,i){const s=i.shift();for(const o of i)t.removeChild(o),o.parent=s,o.remove()}run(t){const i=t.children.map(o=>o.hash()),s={};for(let o=0;o<i.length;o++)s[i[o]]===void 0?s[i[o]]=[t.children[o]]:s[i[o]].push(t.children[o]);for(const o of keys(s))s[o].length>1&&(this.setModified(),this.mergeNodes(t,s[o]))}}class RemoveUnnecessaryIdentifierNodes extends TopDownOptimizer{constructor(t){super(),this.requiresSelectionId=t&&requiresSelectionId(t)}run(t){t instanceof IdentifierNode&&(this.requiresSelectionId&&(isDataSourceNode(t.parent)||t.parent instanceof AggregateNode||t.parent instanceof ParseNode)||(this.setModified(),t.remove()))}}class RemoveDuplicateTimeUnits extends Optimizer{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,i){let s=new Set;t instanceof TimeUnitNode&&(s=t.producedFields(),hasIntersection(s,i)&&(this.setModified(),t.removeFormulas(i),t.producedFields.length===0&&t.remove()));for(const o of t.children)this.run(o,new Set([...i,...s]))}}class RemoveUnnecessaryOutputNodes extends TopDownOptimizer{constructor(){super()}run(t){t instanceof OutputNode&&!t.isRequired()&&(this.setModified(),t.remove())}}class MoveParseUp extends BottomUpOptimizer{run(t){if(!isDataSourceNode(t)&&!(t.numChildren()>1)){for(const i of t.children)if(i instanceof ParseNode)if(t instanceof ParseNode)this.setModified(),t.merge(i);else{if(fieldIntersection(t.producedFields(),i.dependentFields()))continue;this.setModified(),i.swapWithParent()}}}}class MergeParse extends BottomUpOptimizer{run(t){const i=[...t.children],s=t.children.filter(o=>o instanceof ParseNode);if(t.numChildren()>1&&s.length>=1){const o={},f=new Set;for(const d of s){const p=d.parse;for(const v of keys(p))v in o?o[v]!==p[v]&&f.add(v):o[v]=p[v]}for(const d of f)delete o[d];if(!isEmpty(o)){this.setModified();const d=new ParseNode(t,o);for(const p of i){if(p instanceof ParseNode)for(const v of keys(o))delete p.parse[v];t.removeChild(p),p.parent=d,p instanceof ParseNode&&keys(p.parse).length===0&&p.remove()}}}}}class RemoveUnusedSubtrees extends BottomUpOptimizer{run(t){t instanceof OutputNode||t.numChildren()>0||t instanceof FacetNode||t instanceof SourceNode||(this.setModified(),t.remove())}}class MergeTimeUnits extends BottomUpOptimizer{run(t){const i=t.children.filter(o=>o instanceof TimeUnitNode),s=i.pop();for(const o of i)this.setModified(),s.merge(o)}}class MergeAggregates extends BottomUpOptimizer{run(t){const i=t.children.filter(o=>o instanceof AggregateNode),s={};for(const o of i){const f=hash(o.groupBy);f in s||(s[f]=[]),s[f].push(o)}for(const o of keys(s)){const f=s[o];if(f.length>1){const d=f.pop();for(const p of f)d.merge(p)&&(t.removeChild(p),p.parent=d,p.remove(),this.setModified())}}}}class MergeBins extends BottomUpOptimizer{constructor(t){super(),this.model=t}run(t){const i=!(isDataSourceNode(t)||t instanceof FilterNode||t instanceof ParseNode||t instanceof IdentifierNode),s=[],o=[];for(const f of t.children)f instanceof BinNode&&(i&&!fieldIntersection(t.producedFields(),f.dependentFields())?s.push(f):o.push(f));if(s.length>0){const f=s.pop();for(const d of s)f.merge(d,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof BinNode?t.merge(f,this.model.renameSignal.bind(this.model)):f.swapWithParent()}if(o.length>1){const f=o.pop();for(const d of o)f.merge(d,this.model.renameSignal.bind(this.model));this.setModified()}}}class MergeOutputs extends BottomUpOptimizer{run(t){const i=[...t.children];if(!some(i,d=>d instanceof OutputNode)||t.numChildren()<=1)return;const o=[];let f;for(const d of i)if(d instanceof OutputNode){let p=d;for(;p.numChildren()===1;){const[v]=p.children;if(v instanceof OutputNode)p=v;else break}o.push(...p.children),f?(t.removeChild(d),d.parent=f.parent,f.parent.removeChild(f),f.parent=p,this.setModified()):f=p}else o.push(d);if(o.length){this.setModified();for(const d of o)d.parent.removeChild(d),d.parent=f}}}class JoinAggregateTransformNode extends DataFlowNode{clone(){return new JoinAggregateTransformNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i}addDimensions(t){this.transform.groupby=unique(this.transform.groupby.concat(t),i=>i)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(i=>i.field).filter(i=>i!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??vgField(t)}hash(){return`JoinAggregateTransform ${hash(this.transform)}`}assemble(){const t=[],i=[],s=[];for(const f of this.transform.joinaggregate)i.push(f.op),s.push(this.getDefaultName(f)),t.push(f.field===void 0?null:f.field);const o=this.transform.groupby;return{type:"joinaggregate",as:s,ops:i,fields:t,...o!==void 0?{groupby:o}:{}}}}class FilterInvalidNode extends DataFlowNode{clone(){return new FilterInvalidNode(null,{...this.filter})}constructor(t,i){super(t),this.filter=i}static make(t,i,s){const{config:o,markDef:f}=i,{marks:d,scales:p}=s;if(d==="include-invalid-values"&&p==="include-invalid-values")return null;const v=i.reduceFieldDef((_,k,P)=>{const L=isScaleChannel(P)&&i.getScaleComponent(P);if(L){const G=L.get("type"),{aggregate:Z}=k,W=getScaleInvalidDataMode({scaleChannel:P,markDef:f,config:o,scaleType:G,isCountAggregate:isCountingAggregateOp(Z)});W!=="show"&&W!=="always-valid"&&(_[k.field]=k)}return _},{});return keys(v).length?new FilterInvalidNode(t,v):null}dependentFields(){return new Set(keys(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${hash(this.filter)}`}assemble(){const t=keys(this.filter).reduce((i,s)=>{const o=this.filter[s],f=vgField(o,{expr:"datum"});return o!==null&&(o.type==="temporal"?i.push(`(isDate(${f}) || (${isValidFiniteNumberExpr(f)}))`):o.type==="quantitative"&&i.push(isValidFiniteNumberExpr(f))),i},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function isValidFiniteNumberExpr(n){return`isValid(${n}) && isFinite(+${n})`}function getStackByFields(n){return n.stack.stackBy.reduce((t,i)=>{const s=i.fieldDef,o=vgField(s);return o&&t.push(o),t},[])}function isValidAsArray(n){return isArray(n)&&n.every(t=>isString(t))&&n.length>1}class StackNode extends DataFlowNode{clone(){return new StackNode(null,duplicate(this._stack))}constructor(t,i){super(t),this._stack=i}static makeFromTransform(t,i){const{stack:s,groupby:o,as:f,offset:d="zero"}=i,p=[],v=[];if(i.sort!==void 0)for(const P of i.sort)p.push(P.field),v.push(getFirstDefined(P.order,"ascending"));const _={field:p,order:v};let k;return isValidAsArray(f)?k=f:isString(f)?k=[f,`${f}_end`]:k=[`${i.stack}_start`,`${i.stack}_end`],new StackNode(t,{dimensionFieldDefs:[],stackField:s,groupby:o,offset:d,sort:_,facetby:[],as:k})}static makeFromEncoding(t,i){const s=i.stack,{encoding:o}=i;if(!s)return null;const{groupbyChannels:f,fieldChannel:d,offset:p,impute:v}=s,_=f.map(G=>{const Z=o[G];return getFieldDef(Z)}).filter(G=>!!G),k=getStackByFields(i),P=i.encoding.order;let L;if(isArray(P)||isFieldDef(P))L=sortParams(P);else{const G=isOrderOnlyDef(P)?P.sort:d==="y"?"descending":"ascending";L=k.reduce((Z,W)=>(Z.field.includes(W)||(Z.field.push(W),Z.order.push(G)),Z),{field:[],order:[]})}return new StackNode(t,{dimensionFieldDefs:_,stackField:i.vgField(d),facetby:[],stackby:k,sort:L,offset:p,impute:v,as:[i.vgField(d,{suffix:"start",forAs:!0}),i.vgField(d,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${hash(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:i,groupby:s}=this._stack;return t.length>0?t.map(o=>o.bin?i?[vgField(o,{binSuffix:"mid"})]:[vgField(o,{}),vgField(o,{binSuffix:"end"})]:[vgField(o)]).flat():s??[]}assemble(){const t=[],{facetby:i,dimensionFieldDefs:s,stackField:o,stackby:f,sort:d,offset:p,impute:v,as:_}=this._stack;if(v)for(const k of s){const{bandPosition:P=.5,bin:L}=k;if(L){const G=vgField(k,{expr:"datum"}),Z=vgField(k,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${isValidFiniteNumberExpr(G)} ? ${P}*${G}+${1-P}*${Z} : ${G}`,as:vgField(k,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:o,groupby:[...f,...i],key:vgField(k,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...i],field:o,sort:d,as:_,offset:p}),t}}class WindowTransformNode extends DataFlowNode{clone(){return new WindowTransformNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i}addDimensions(t){this.transform.groupby=unique(this.transform.groupby.concat(t),i=>i)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(i=>t.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??vgField(t)}hash(){return`WindowTransform ${hash(this.transform)}`}assemble(){const t=[],i=[],s=[],o=[];for(const P of this.transform.window)i.push(P.op),s.push(this.getDefaultName(P)),o.push(P.param===void 0?null:P.param),t.push(P.field===void 0?null:P.field);const f=this.transform.frame,d=this.transform.groupby;if(f&&f[0]===null&&f[1]===null&&i.every(P=>isAggregateOp(P)))return{type:"joinaggregate",as:s,ops:i,fields:t,...d!==void 0?{groupby:d}:{}};const p=[],v=[];if(this.transform.sort!==void 0)for(const P of this.transform.sort)p.push(P.field),v.push(P.order??"ascending");const _={field:p,order:v},k=this.transform.ignorePeers;return{type:"window",params:o,as:s,ops:i,fields:t,sort:_,...k!==void 0?{ignorePeers:k}:{},...d!==void 0?{groupby:d}:{},...f!==void 0?{frame:f}:{}}}}function cloneSubtree(n){function t(i){if(!(i instanceof FacetNode)){const s=i.clone();if(s instanceof OutputNode){const o=FACET_SCALE_PREFIX+s.getSource();s.setSource(o),n.model.component.data.outputNodes[o]=s}else(s instanceof AggregateNode||s instanceof StackNode||s instanceof WindowTransformNode||s instanceof JoinAggregateTransformNode)&&s.addDimensions(n.fields);for(const o of i.children.flatMap(t))o.parent=s;return[s]}return i.children.flatMap(t)}return t}function moveFacetDown(n){if(n instanceof FacetNode)if(n.numChildren()===1&&!(n.children[0]instanceof OutputNode)){const t=n.children[0];(t instanceof AggregateNode||t instanceof StackNode||t instanceof WindowTransformNode||t instanceof JoinAggregateTransformNode)&&t.addDimensions(n.fields),t.swapWithParent(),moveFacetDown(n)}else{const t=n.model.component.data.main;moveMainDownToFacet(t);const i=cloneSubtree(n),s=n.children.map(i).flat();for(const o of s)o.parent=t}else n.children.map(moveFacetDown)}function moveMainDownToFacet(n){if(n instanceof OutputNode&&n.type===DataSourceType.Main&&n.numChildren()===1){const t=n.children[0];t instanceof FacetNode||(t.swapWithParent(),moveMainDownToFacet(n))}}const FACET_SCALE_PREFIX="scale_",MAX_OPTIMIZATION_RUNS=5;function checkLinks(n){for(const t of n){for(const i of t.children)if(i.parent!==t)return!1;if(!checkLinks(t.children))return!1}return!0}function runOptimizer(n,t){let i=!1;for(const s of t)i=n.optimize(s)||i;return i}function optimizationDataflowHelper(n,t,i){let s=n.sources,o=!1;return o=runOptimizer(new RemoveUnnecessaryOutputNodes,s)||o,o=runOptimizer(new RemoveUnnecessaryIdentifierNodes(t),s)||o,s=s.filter(f=>f.numChildren()>0),o=runOptimizer(new RemoveUnusedSubtrees,s)||o,s=s.filter(f=>f.numChildren()>0),i||(o=runOptimizer(new MoveParseUp,s)||o,o=runOptimizer(new MergeBins(t),s)||o,o=runOptimizer(new RemoveDuplicateTimeUnits,s)||o,o=runOptimizer(new MergeParse,s)||o,o=runOptimizer(new MergeAggregates,s)||o,o=runOptimizer(new MergeTimeUnits,s)||o,o=runOptimizer(new MergeIdenticalNodes,s)||o,o=runOptimizer(new MergeOutputs,s)||o),n.sources=s,o}function optimizeDataflow(n,t){checkLinks(n.sources);let i=0,s=0;for(let o=0;o<MAX_OPTIMIZATION_RUNS&&optimizationDataflowHelper(n,t,!0);o++)i++;n.sources.map(moveFacetDown);for(let o=0;o<MAX_OPTIMIZATION_RUNS&&optimizationDataflowHelper(n,t,!1);o++)s++;checkLinks(n.sources),Math.max(i,s)===MAX_OPTIMIZATION_RUNS&&warn(`Maximum optimization runs(${MAX_OPTIMIZATION_RUNS}) reached.`)}class SignalRefWrapper{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,i){return new SignalRefWrapper(()=>t(i))}}function parseScaleDomain(n){isUnitModel(n)?parseUnitScaleDomain(n):parseNonUnitScaleDomain(n)}function parseUnitScaleDomain(n){const t=n.component.scales;for(const i of keys(t)){const s=parseDomainForChannel(n,i);if(t[i].setWithExplicit("domains",s),parseSelectionDomain(n,i),n.component.data.isFaceted){let f=n;for(;!isFacetModel(f)&&f.parent;)f=f.parent;if(f.component.resolve.scale[i]==="shared")for(const p of s.value)isDataRefDomain(p)&&(p.data=FACET_SCALE_PREFIX+p.data.replace(FACET_SCALE_PREFIX,""))}}}function parseNonUnitScaleDomain(n){for(const i of n.children)parseScaleDomain(i);const t=n.component.scales;for(const i of keys(t)){let s,o=null;for(const f of n.children){const d=f.component.scales[i];if(d){s===void 0?s=d.getWithExplicit("domains"):s=mergeValuesWithExplicit(s,d.getWithExplicit("domains"),"domains","scale",domainsTieBreaker);const p=d.get("selectionExtent");o&&p&&o.param!==p.param&&warn(NEEDS_SAME_SELECTION),o=p}}t[i].setWithExplicit("domains",s),o&&t[i].set("selectionExtent",o,!0)}}function normalizeUnaggregatedDomain(n,t,i,s){if(n==="unaggregated"){const{valid:o,reason:f}=canUseUnaggregatedDomain(t,i);if(!o){warn(f);return}}else if(n===void 0&&s.useUnaggregatedDomain){const{valid:o}=canUseUnaggregatedDomain(t,i);if(o)return"unaggregated"}return n}function parseDomainForChannel(n,t){const i=n.getScaleComponent(t).get("type"),{encoding:s}=n,o=normalizeUnaggregatedDomain(n.scaleDomain(t),n.typedFieldDef(t),i,n.config.scale);return o!==n.scaleDomain(t)&&(n.specifiedScales[t]={...n.specifiedScales[t],domain:o}),t==="x"&&getFieldOrDatumDef(s.x2)?getFieldOrDatumDef(s.x)?mergeValuesWithExplicit(parseSingleChannelDomain(i,o,n,"x"),parseSingleChannelDomain(i,o,n,"x2"),"domain","scale",domainsTieBreaker):parseSingleChannelDomain(i,o,n,"x2"):t==="y"&&getFieldOrDatumDef(s.y2)?getFieldOrDatumDef(s.y)?mergeValuesWithExplicit(parseSingleChannelDomain(i,o,n,"y"),parseSingleChannelDomain(i,o,n,"y2"),"domain","scale",domainsTieBreaker):parseSingleChannelDomain(i,o,n,"y2"):parseSingleChannelDomain(i,o,n,t)}function mapDomainToDataSignal(n,t,i){return n.map(s=>({signal:`{data: ${valueExpr(s,{timeUnit:i,type:t})}}`}))}function convertDomainIfItIsDateTime(n,t,i){var o;const s=(o=normalizeTimeUnit(i))==null?void 0:o.unit;return t==="temporal"||s?mapDomainToDataSignal(n,t,s):[n]}function parseSingleChannelDomain(n,t,i,s){const{encoding:o,markDef:f,mark:d,config:p,stack:v}=i,_=getFieldOrDatumDef(o[s]),{type:k}=_,P=_.timeUnit,L=getScaleDataSourceForHandlingInvalidValues({invalid:getMarkConfig("invalid",f,p),isPath:isPathMark(d)});if(isDomainUnionWith(t)){const W=parseSingleChannelDomain(n,void 0,i,s),j=convertDomainIfItIsDateTime(t.unionWith,k,P);return makeExplicit([...j,...W.value])}else{if(isSignalRef(t))return makeExplicit([t]);if(t&&t!=="unaggregated"&&!isParameterDomain(t))return makeExplicit(convertDomainIfItIsDateTime(t,k,P))}if(v&&s===v.fieldChannel){if(v.offset==="normalize")return makeImplicit([[0,1]]);const W=i.requestDataName(L);return makeImplicit([{data:W,field:i.vgField(s,{suffix:"start"})},{data:W,field:i.vgField(s,{suffix:"end"})}])}const G=isScaleChannel(s)&&isFieldDef(_)?domainSort(i,s,n):void 0;if(isDatumDef(_)){const W=convertDomainIfItIsDateTime([_.datum],k,P);return makeImplicit(W)}const Z=_;if(t==="unaggregated"){const{field:W}=_;return makeImplicit([{data:i.requestDataName(L),field:vgField({field:W,aggregate:"min"})},{data:i.requestDataName(L),field:vgField({field:W,aggregate:"max"})}])}else if(isBinning(Z.bin)){if(hasDiscreteDomain(n))return makeImplicit(n==="bin-ordinal"?[]:[{data:isBoolean(G)?i.requestDataName(L):i.requestDataName(DataSourceType.Raw),field:i.vgField(s,binRequiresRange(Z,s)?{binSuffix:"range"}:{}),sort:G===!0||!isObject(G)?{field:i.vgField(s,{}),op:"min"}:G}]);{const{bin:W}=Z;if(isBinning(W)){const j=getBinSignalName(i,Z.field,W);return makeImplicit([new SignalRefWrapper(()=>{const H=i.getSignalName(j);return`[${H}.start, ${H}.stop]`})])}else return makeImplicit([{data:i.requestDataName(L),field:i.vgField(s,{})}])}}else if(Z.timeUnit&&contains(["time","utc"],n)){const W=o[getSecondaryRangeChannel(s)];if(hasBandEnd(Z,W,f,p)){const j=i.requestDataName(L),H=getBandPosition({fieldDef:Z,fieldDef2:W,markDef:f,config:p}),me=isRectBasedMark(d)&&H!==.5&&isXorY(s);return makeImplicit([{data:j,field:i.vgField(s,me?{suffix:OFFSETTED_RECT_START_SUFFIX}:{})},{data:j,field:i.vgField(s,{suffix:me?OFFSETTED_RECT_END_SUFFIX:"end"})}])}}return makeImplicit(G?[{data:isBoolean(G)?i.requestDataName(L):i.requestDataName(DataSourceType.Raw),field:i.vgField(s),sort:G}]:[{data:i.requestDataName(L),field:i.vgField(s)}])}function normalizeSortField(n,t){const{op:i,field:s,order:o}=n;return{op:i??(t?"sum":DEFAULT_SORT_OP),...s?{field:replacePathInField(s)}:{},...o?{order:o}:{}}}function parseSelectionDomain(n,t){var p;const i=n.component.scales[t],s=n.specifiedScales[t].domain,o=(p=n.fieldDef(t))==null?void 0:p.bin,f=isParameterDomain(s)?s:void 0,d=isBinParams(o)&&isParameterExtent(o.extent)?o.extent:void 0;(f||d)&&i.set("selectionExtent",f??d,!0)}function domainSort(n,t,i){if(!hasDiscreteDomain(i))return;const s=n.fieldDef(t),o=s.sort;if(isSortArray(o))return{op:"min",field:sortArrayIndexField(s,t),order:"ascending"};const{stack:f}=n,d=f?new Set([...f.groupbyFields,...f.stackBy.map(p=>p.fieldDef.field)]):void 0;if(isSortField(o)){const p=f&&!d.has(o.field);return normalizeSortField(o,p)}else if(isSortByEncoding(o)){const{encoding:p,order:v}=o,_=n.fieldDef(p),{aggregate:k,field:P}=_,L=f&&!d.has(P);if(isArgminDef(k)||isArgmaxDef(k))return normalizeSortField({field:vgField(_),order:v},L);if(isAggregateOp(k)||!k)return normalizeSortField({op:k,field:P,order:v},L)}else{if(o==="descending")return{op:"min",field:n.vgField(t),order:"descending"};if(contains(["ascending",void 0],o))return!0}}function canUseUnaggregatedDomain(n,t){const{aggregate:i,type:s}=n;return i?isString(i)&&!SHARED_DOMAIN_OPS.has(i)?{valid:!1,reason:unaggregateDomainWithNonSharedDomainOp(i)}:s==="quantitative"&&t==="log"?{valid:!1,reason:unaggregatedDomainWithLogScale(n)}:{valid:!0}:{valid:!1,reason:unaggregateDomainHasNoEffectForRawField(n)}}function domainsTieBreaker(n,t,i,s){return n.explicit&&t.explicit&&warn(mergeConflictingDomainProperty(i,s,n.value,t.value)),{explicit:n.explicit,value:[...n.value,...t.value]}}function mergeDomains(n){const t=unique(n.map(d=>{if(isDataRefDomain(d)){const{sort:p,...v}=d;return v}return d}),hash),i=unique(n.map(d=>{if(isDataRefDomain(d)){const p=d.sort;return p!==void 0&&!isBoolean(p)&&("op"in p&&p.op==="count"&&delete p.field,p.order==="ascending"&&delete p.order),p}}).filter(d=>d!==void 0),hash);if(t.length===0)return;if(t.length===1){const d=n[0];if(isDataRefDomain(d)&&i.length>0){let p=i[0];if(i.length>1){warn(MORE_THAN_ONE_SORT);const v=i.filter(_=>isObject(_)&&"op"in _&&_.op!=="min");i.every(_=>isObject(_)&&"op"in _)&&v.length===1?p=v[0]:p=!0}else if(isObject(p)&&"field"in p){const v=p.field;d.field===v&&(p=p.order?{order:p.order}:!0)}return{...d,sort:p}}return d}const s=unique(i.map(d=>isBoolean(d)||!("op"in d)||isString(d.op)&&has$1(MULTIDOMAIN_SORT_OP_INDEX,d.op)?d:(warn(domainSortDropped(d)),!0)),hash);let o;s.length===1?o=s[0]:s.length>1&&(warn(MORE_THAN_ONE_SORT),o=!0);const f=unique(n.map(d=>isDataRefDomain(d)?d.data:null),d=>d);return f.length===1&&f[0]!==null?{data:f[0],fields:t.map(p=>p.field),...o?{sort:o}:{}}:{fields:t,...o?{sort:o}:{}}}function getFieldFromDomain(n){if(isDataRefDomain(n)&&isString(n.field))return n.field;if(isDataRefUnionedDomain(n)){let t;for(const i of n.fields)if(isDataRefDomain(i)&&isString(i.field)){if(!t)t=i.field;else if(t!==i.field)return warn(FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}return warn(FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}else if(isFieldRefUnionDomain(n)){warn(FACETED_INDEPENDENT_SAME_SOURCE);const t=n.fields[0];return isString(t)?t:void 0}}function assembleDomain(n,t){const s=n.component.scales[t].get("domains").map(o=>(isDataRefDomain(o)&&(o.data=n.lookupDataSource(o.data)),o));return mergeDomains(s)}function assembleScales(n){return isLayerModel(n)||isConcatModel(n)?n.children.reduce((t,i)=>t.concat(assembleScales(i)),assembleScalesForModel(n)):assembleScalesForModel(n)}function assembleScalesForModel(n){return keys(n.component.scales).reduce((t,i)=>{const s=n.component.scales[i];if(s.merged)return t;const o=s.combine(),{name:f,type:d,selectionExtent:p,domains:v,range:_,reverse:k,...P}=o,L=assembleScaleRange(o.range,f,i,n),G=assembleDomain(n,i),Z=p?assembleSelectionScaleDomain(n,p,s,G):null;return t.push({name:f,type:d,...G?{domain:G}:{},...Z?{domainRaw:Z}:{},range:L,...k!==void 0?{reverse:k}:{},...P}),t},[])}function assembleScaleRange(n,t,i,s){if(isXorY(i)){if(isVgRangeStep(n))return{step:{signal:`${t}_step`}}}else if(isObject(n)&&isDataRefDomain(n))return{...n,data:s.lookupDataSource(n.data)};return n}class ScaleComponent extends Split{constructor(t,i){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",i)}domainHasZero(){const t=this.get("type");if(contains([ScaleType.LOG,ScaleType.TIME,ScaleType.UTC],t))return"definitely-not";const i=this.get("zero");if(i===!0||i===void 0&&contains([ScaleType.LINEAR,ScaleType.SQRT,ScaleType.POW],t))return"definitely";const s=this.get("domains");if(s.length>0){let o=!1,f=!1,d=!1;for(const p of s){if(isArray(p)){const v=p[0],_=p[p.length-1];if(isNumber$1(v)&&isNumber$1(_))if(v<=0&&_>=0){o=!0;continue}else{f=!0;continue}}d=!0}if(o)return"definitely";if(f&&!d)return"definitely-not"}return"maybe"}}const RANGE_PROPERTIES=["range","scheme"];function parseUnitScaleRange(n){const t=n.component.scales;for(const i of SCALE_CHANNELS){const s=t[i];if(!s)continue;const o=parseRangeForChannel(i,n);s.setWithExplicit("range",o)}}function getBinStepSignal(n,t){const i=n.fieldDef(t);if(i!=null&&i.bin){const{bin:s,field:o}=i,f=getSizeChannel(t),d=n.getName(f);if(isObject(s)&&s.binned&&s.step!==void 0)return new SignalRefWrapper(()=>{const p=n.scaleName(t),v=`(domain("${p}")[1] - domain("${p}")[0]) / ${s.step}`;return`${n.getSignalName(d)} / (${v})`});if(isBinning(s)){const p=getBinSignalName(n,o,s);return new SignalRefWrapper(()=>{const v=n.getSignalName(p),_=`(${v}.stop - ${v}.start) / ${v}.step`;return`${n.getSignalName(d)} / (${_})`})}}}function parseRangeForChannel(n,t){const i=t.specifiedScales[n],{size:s}=t,f=t.getScaleComponent(n).get("type");for(const P of RANGE_PROPERTIES)if(i[P]!==void 0){const L=scaleTypeSupportProperty(f,P),G=channelScalePropertyIncompatability(n,P);if(!L)warn(scalePropertyNotWorkWithScaleType(f,P,n));else if(G)warn(G);else switch(P){case"range":{const Z=i.range;if(isArray(Z)){if(isXorY(n))return makeExplicit(Z.map(W=>{if(W==="width"||W==="height"){const j=t.getName(W),H=t.getSignalName.bind(t);return SignalRefWrapper.fromName(H,j)}return W}))}else if(isObject(Z))return makeExplicit({data:t.requestDataName(DataSourceType.Main),field:Z.field,sort:{op:"min",field:t.vgField(n)}});return makeExplicit(Z)}case"scheme":return makeExplicit(parseScheme(i[P]))}}const d=n===X$1||n==="xOffset"?"width":"height",p=s[d];if(isStep(p)){if(isXorY(n))if(hasDiscreteDomain(f)){const P=getPositionStep(p,t,n);if(P)return makeExplicit({step:P})}else warn(stepDropped(d));else if(isXorYOffset(n)){const P=n===XOFFSET?"x":"y";if(t.getScaleComponent(P).get("type")==="band"){const Z=getOffsetStep(p,f);if(Z)return makeExplicit(Z)}}}const{rangeMin:v,rangeMax:_}=i,k=defaultRange(n,t);return(v!==void 0||_!==void 0)&&scaleTypeSupportProperty(f,"rangeMin")&&isArray(k)&&k.length===2?makeExplicit([v??k[0],_??k[1]]):makeImplicit(k)}function parseScheme(n){return isExtendedScheme(n)?{scheme:n.name,...omit(n,["name"])}:{scheme:n}}function fullWidthOrHeightRange(n,t,i,{center:s}={}){const o=getSizeChannel(n),f=t.getName(o),d=t.getSignalName.bind(t);return n===Y$1&&hasContinuousDomain(i)?s?[SignalRefWrapper.fromName(p=>`${d(p)}/2`,f),SignalRefWrapper.fromName(p=>`-${d(p)}/2`,f)]:[SignalRefWrapper.fromName(d,f),0]:s?[SignalRefWrapper.fromName(p=>`-${d(p)}/2`,f),SignalRefWrapper.fromName(p=>`${d(p)}/2`,f)]:[0,SignalRefWrapper.fromName(d,f)]}function defaultRange(n,t){const{size:i,config:s,mark:o,encoding:f}=t,{type:d}=getFieldOrDatumDef(f[n]),v=t.getScaleComponent(n).get("type"),{domain:_,domainMid:k}=t.specifiedScales[n];switch(n){case X$1:case Y$1:{if(contains(["point","band"],v)){const P=getDiscretePositionSize(n,i,s.view);if(isStep(P))return{step:getPositionStep(P,t,n)}}return fullWidthOrHeightRange(n,t,v)}case XOFFSET:case YOFFSET:return getOffsetRange(n,t,v);case SIZE:{const P=sizeRangeMin(o,s),L=sizeRangeMax(o,i,t,s);return isContinuousToDiscrete(v)?interpolateRange(P,L,defaultContinuousToDiscreteCount(v,s,_,n)):[P,L]}case THETA:return[0,Math.PI*2];case ANGLE:return[0,360];case RADIUS:return[0,new SignalRefWrapper(()=>{const P=t.getSignalName(isFacetModel(t.parent)?"child_width":"width"),L=t.getSignalName(isFacetModel(t.parent)?"child_height":"height");return`min(${P},${L})/2`})];case TIME:return{step:1e3/s.scale.framesPerSecond};case STROKEWIDTH:return[s.scale.minStrokeWidth,s.scale.maxStrokeWidth];case STROKEDASH:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case SHAPE:return"symbol";case COLOR:case FILL:case STROKE:return v==="ordinal"?d==="nominal"?"category":"ordinal":k!==void 0?"diverging":o==="rect"||o==="geoshape"?"heatmap":"ramp";case OPACITY:case FILLOPACITY:case STROKEOPACITY:return[s.scale.minOpacity,s.scale.maxOpacity]}}function getPositionStep(n,t,i){const{encoding:s}=t,o=t.getScaleComponent(i),f=getOffsetScaleChannel(i),d=s[f];if(getStepFor({step:n,offsetIsDiscrete:isFieldOrDatumDef(d)&&isDiscrete$1(d.type)})==="offset"&&channelHasFieldOrDatum(s,f)){const v=t.getScaleComponent(f);let k=`domain('${t.scaleName(f)}').length`;if(v.get("type")==="band"){const L=v.get("paddingInner")??v.get("padding")??0,G=v.get("paddingOuter")??v.get("padding")??0;k=`bandspace(${k}, ${L}, ${G})`}const P=o.get("paddingInner")??o.get("padding");return{signal:`${n.step} * ${k} / (1-${exprFromSignalRefOrValue(P)})`}}else return n.step}function getOffsetStep(n,t){if(getStepFor({step:n,offsetIsDiscrete:hasDiscreteDomain(t)})==="offset")return{step:n.step}}function getOffsetRange(n,t,i){const s=n===XOFFSET?"x":"y",o=t.getScaleComponent(s);if(!o)return fullWidthOrHeightRange(s,t,i,{center:!0});const f=o.get("type"),d=t.scaleName(s),{markDef:p,config:v}=t;if(f==="band"){const _=getDiscretePositionSize(s,t.size,t.config.view);if(isStep(_)){const k=getOffsetStep(_,i);if(k)return k}return[0,{signal:`bandwidth('${d}')`}]}else{const _=t.encoding[s];if(isFieldDef(_)&&_.timeUnit){const k=durationExpr(_.timeUnit,Z=>`scale('${d}', ${Z})`),P=t.config.scale.bandWithNestedOffsetPaddingInner,L=getBandPosition({fieldDef:_,markDef:p,config:v})-.5,G=L!==0?` + ${L}`:"";if(P){const Z=isSignalRef(P)?`${P.signal}/2`+G:`${P/2+L}`,W=isSignalRef(P)?`(1 - ${P.signal}/2)`+G:`${1-P/2+L}`;return[{signal:`${Z} * (${k})`},{signal:`${W} * (${k})`}]}return[0,{signal:k}]}return never(`Cannot use ${n} scale if ${s} scale is not discrete.`)}}function getDiscretePositionSize(n,t,i){const s=n===X$1?"width":"height",o=t[s];return o||getViewConfigDiscreteSize(i,s)}function defaultContinuousToDiscreteCount(n,t,i,s){switch(n){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return i!==void 0&&isArray(i)?i.length+1:(warn(domainRequiredForThresholdScale(s)),3)}}function interpolateRange(n,t,i){const s=()=>{const o=signalOrStringValue(t),f=signalOrStringValue(n),d=`(${o} - ${f}) / (${i} - 1)`;return`sequence(${f}, ${o} + ${d}, ${d})`};return isSignalRef(t)?new SignalRefWrapper(s):{signal:s()}}function sizeRangeMin(n,t){switch(n){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(incompatibleChannel("size",n))}const MAX_SIZE_RANGE_STEP_RATIO=.95;function sizeRangeMax(n,t,i,s){const o={x:getBinStepSignal(i,"x"),y:getBinStepSignal(i,"y")};switch(n){case"bar":case"tick":{if(s.scale.maxBandSize!==void 0)return s.scale.maxBandSize;const f=minXYStep(t,o,s.view);return isNumber$1(f)?f-1:new SignalRefWrapper(()=>`${f.signal} - 1`)}case"line":case"trail":case"rule":return s.scale.maxStrokeWidth;case"text":return s.scale.maxFontSize;case"point":case"square":case"circle":{if(s.scale.maxSize)return s.scale.maxSize;const f=minXYStep(t,o,s.view);return isNumber$1(f)?Math.pow(MAX_SIZE_RANGE_STEP_RATIO*f,2):new SignalRefWrapper(()=>`pow(${MAX_SIZE_RANGE_STEP_RATIO} * ${f.signal}, 2)`)}}throw new Error(incompatibleChannel("size",n))}function minXYStep(n,t,i){const s=isStep(n.width)?n.width.step:getViewConfigDiscreteStep(i,"width"),o=isStep(n.height)?n.height.step:getViewConfigDiscreteStep(i,"height");return t.x||t.y?new SignalRefWrapper(()=>`min(${[t.x?t.x.signal:s,t.y?t.y.signal:o].join(", ")})`):Math.min(s,o)}function parseScaleProperty(n,t){isUnitModel(n)?parseUnitScaleProperty(n,t):parseNonUnitScaleProperty(n,t)}function parseUnitScaleProperty(n,t){const i=n.component.scales,{config:s,encoding:o,markDef:f,specifiedScales:d}=n;for(const p of keys(i)){const v=d[p],_=i[p],k=n.getScaleComponent(p),P=getFieldOrDatumDef(o[p]),L=v[t],G=k.get("type"),Z=k.get("padding"),W=k.get("paddingInner"),j=scaleTypeSupportProperty(G,t),H=channelScalePropertyIncompatability(p,t);if(L!==void 0&&(j?H&&warn(H):warn(scalePropertyNotWorkWithScaleType(G,t,p))),j&&H===void 0)if(L!==void 0){const me=P.timeUnit,$e=P.type;switch(t){case"domainMax":case"domainMin":isDateTime(v[t])||$e==="temporal"||me?_.set(t,{signal:valueExpr(v[t],{type:$e,timeUnit:me})},!0):_.set(t,v[t],!0);break;default:_.copyKeyFromObject(t,v)}}else{const me=hasProperty(scaleRules,t)?scaleRules[t]({model:n,channel:p,fieldOrDatumDef:P,scaleType:G,scalePadding:Z,scalePaddingInner:W,domain:v.domain,domainMin:v.domainMin,domainMax:v.domainMax,markDef:f,config:s,hasNestedOffsetScale:channelHasNestedOffsetScale(o,p),hasSecondaryRangeChannel:!!o[getSecondaryRangeChannel(p)]}):s.scale[t];me!==void 0&&_.set(t,me,!1)}}}const scaleRules={bins:({model:n,fieldOrDatumDef:t})=>isFieldDef(t)?bins(n,t):void 0,interpolate:({channel:n,fieldOrDatumDef:t})=>interpolate(n,t.type),nice:({scaleType:n,channel:t,domain:i,domainMin:s,domainMax:o,fieldOrDatumDef:f})=>nice(n,t,i,s,o,f),padding:({channel:n,scaleType:t,fieldOrDatumDef:i,markDef:s,config:o})=>padding(n,t,o.scale,i,s,o.bar),paddingInner:({scalePadding:n,channel:t,markDef:i,scaleType:s,config:o,hasNestedOffsetScale:f})=>paddingInner(n,t,i.type,s,o.scale,f),paddingOuter:({scalePadding:n,channel:t,scaleType:i,scalePaddingInner:s,config:o,hasNestedOffsetScale:f})=>paddingOuter(n,t,i,s,o.scale,f),reverse:({fieldOrDatumDef:n,scaleType:t,channel:i,config:s})=>{const o=isFieldDef(n)?n.sort:void 0;return reverse(t,o,i,s.scale)},zero:({channel:n,fieldOrDatumDef:t,domain:i,markDef:s,scaleType:o,config:f,hasSecondaryRangeChannel:d})=>zero(n,t,i,s,o,f.scale,d)};function parseScaleRange(n){isUnitModel(n)?parseUnitScaleRange(n):parseNonUnitScaleProperty(n,"range")}function parseNonUnitScaleProperty(n,t){const i=n.component.scales;for(const s of n.children)t==="range"?parseScaleRange(s):parseScaleProperty(s,t);for(const s of keys(i)){let o;for(const f of n.children){const d=f.component.scales[s];if(d){const p=d.getWithExplicit(t);o=mergeValuesWithExplicit(o,p,t,"scale",tieBreakByComparing((v,_)=>{switch(t){case"range":return v.step&&_.step?v.step-_.step:0}return 0}))}}i[s].setWithExplicit(t,o)}}function bins(n,t){const i=t.bin;if(isBinning(i)){const s=getBinSignalName(n,t.field,i);return new SignalRefWrapper(()=>n.getSignalName(s))}else if(isBinned(i)&&isBinParams(i)&&i.step!==void 0)return{step:i.step}}function interpolate(n,t){if(contains([COLOR,FILL,STROKE],n)&&t!=="nominal")return"hcl"}function nice(n,t,i,s,o,f){var d;if(!((d=getFieldDef(f))!=null&&d.bin||isArray(i)||o!=null||s!=null||contains([ScaleType.TIME,ScaleType.UTC],n)))return isXorY(t)?!0:void 0}function padding(n,t,i,s,o,f){if(isXorY(n)){if(isContinuousToContinuous(t)){if(i.continuousPadding!==void 0)return i.continuousPadding;const{type:d,orient:p}=o;if(d==="bar"&&!(isFieldDef(s)&&(s.bin||s.timeUnit))&&(p==="vertical"&&n==="x"||p==="horizontal"&&n==="y"))return f.continuousBandSize}if(t===ScaleType.POINT)return i.pointPadding}}function paddingInner(n,t,i,s,o,f=!1){if(n===void 0){if(isXorY(t)){const{bandPaddingInner:d,barBandPaddingInner:p,rectBandPaddingInner:v,tickBandPaddingInner:_,bandWithNestedOffsetPaddingInner:k}=o;return f?k:getFirstDefined(d,i==="bar"?p:i==="tick"?_:v)}else if(isXorYOffset(t)&&s===ScaleType.BAND)return o.offsetBandPaddingInner}}function paddingOuter(n,t,i,s,o,f=!1){if(n===void 0){if(isXorY(t)){const{bandPaddingOuter:d,bandWithNestedOffsetPaddingOuter:p}=o;if(f)return p;if(i===ScaleType.BAND)return getFirstDefined(d,isSignalRef(s)?{signal:`${s.signal}/2`}:s/2)}else if(isXorYOffset(t)){if(i===ScaleType.POINT)return .5;if(i===ScaleType.BAND)return o.offsetBandPaddingOuter}}}function reverse(n,t,i,s){if(i==="x"&&s.xReverse!==void 0)return hasContinuousDomain(n)&&t==="descending"?isSignalRef(s.xReverse)?{signal:`!${s.xReverse.signal}`}:!s.xReverse:s.xReverse;if(hasContinuousDomain(n)&&t==="descending")return!0}function zero(n,t,i,s,o,f,d){if(!!i&&i!=="unaggregated"&&hasContinuousDomain(o)){if(isArray(i)){const v=i[0],_=i[i.length-1];if(isNumber$1(v)&&v<=0&&isNumber$1(_)&&_>=0)return!0}return!1}if(n==="size"&&t.type==="quantitative"&&!isContinuousToDiscrete(o))return!0;if(!(isFieldDef(t)&&t.bin)&&contains([...POSITION_SCALE_CHANNELS,...POLAR_POSITION_SCALE_CHANNELS],n)){const{orient:v,type:_}=s;return contains(["bar","area","line","trail"],_)&&(v==="horizontal"&&n==="y"||v==="vertical"&&n==="x")?!1:contains(["bar","area"],_)&&!d?!0:f==null?void 0:f.zero}return!1}function scaleType(n,t,i,s,o=!1){const f=defaultType(t,i,s,o),{type:d}=n;return isScaleChannel(t)?d!==void 0?channelSupportScaleType(t,d)?isFieldDef(i)&&!scaleTypeSupportDataType(d,i.type)?(warn(scaleTypeNotWorkWithFieldDef(d,f)),f):d:(warn(scaleTypeNotWorkWithChannel(t,d,f)),f):f:null}function defaultType(n,t,i,s){var o;switch(t.type){case"nominal":case"ordinal":{if(isColorChannel(n)||rangeType(n)==="discrete")return n==="shape"&&t.type==="ordinal"&&warn(discreteChannelCannotEncode(n,"ordinal")),"ordinal";if(isTime(n))return"band";if(isXorY(n)||isXorYOffset(n)){if(contains(["rect","bar","image","rule","tick"],i.type)||s)return"band"}else if(i.type==="arc"&&n in POLAR_POSITION_SCALE_CHANNEL_INDEX)return"band";const f=i[getSizeChannel(n)];return isRelativeBandSize(f)||isPositionFieldOrDatumDef(t)&&((o=t.axis)!=null&&o.tickBand)?"band":"point"}case"temporal":return isColorChannel(n)?"time":rangeType(n)==="discrete"?(warn(discreteChannelCannotEncode(n,"temporal")),"ordinal"):isFieldDef(t)&&t.timeUnit&&normalizeTimeUnit(t.timeUnit).utc?"utc":isTime(n)?"band":"time";case"quantitative":return isColorChannel(n)?isFieldDef(t)&&isBinning(t.bin)?"bin-ordinal":"linear":rangeType(n)==="discrete"?(warn(discreteChannelCannotEncode(n,"quantitative")),"ordinal"):isTime(n)?"band":"linear";case"geojson":return}throw new Error(invalidFieldType(t.type))}function parseScales(n,{ignoreRange:t}={}){parseScaleCore(n),parseScaleDomain(n);for(const i of NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES)parseScaleProperty(n,i);t||parseScaleRange(n)}function parseScaleCore(n){isUnitModel(n)?n.component.scales=parseUnitScaleCore(n):n.component.scales=parseNonUnitScaleCore(n)}function parseUnitScaleCore(n){const{encoding:t,mark:i,markDef:s}=n,o={};for(const f of SCALE_CHANNELS){const d=getFieldOrDatumDef(t[f]);if(d&&i===GEOSHAPE&&f===SHAPE&&d.type===GEOJSON)continue;let p=d&&d.scale;if(d&&p!==null&&p!==!1){p??(p={});const v=channelHasNestedOffsetScale(t,f),_=scaleType(p,f,d,s,v);o[f]=new ScaleComponent(n.scaleName(`${f}`,!0),{value:_,explicit:p.type===_})}}return o}const scaleTypeTieBreaker=tieBreakByComparing((n,t)=>scaleTypePrecedence(n)-scaleTypePrecedence(t));function parseNonUnitScaleCore(n){var t;const i=n.component.scales={},s={},o=n.component.resolve;for(const f of n.children){parseScaleCore(f);for(const d of keys(f.component.scales))if((t=o.scale)[d]??(t[d]=defaultScaleResolve(d,n)),o.scale[d]==="shared"){const p=s[d],v=f.component.scales[d].getWithExplicit("type");p?scaleCompatible(p.value,v.value)?s[d]=mergeValuesWithExplicit(p,v,"type","scale",scaleTypeTieBreaker):(o.scale[d]="independent",delete s[d]):s[d]=v}}for(const f of keys(s)){const d=n.scaleName(f,!0),p=s[f];i[f]=new ScaleComponent(d,p);for(const v of n.children){const _=v.component.scales[f];_&&(v.renameScale(_.get("name"),d),_.merged=!0)}}return i}class NameMap{constructor(){this.nameMap={}}rename(t,i){this.nameMap[t]=i}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function isUnitModel(n){return(n==null?void 0:n.type)==="unit"}function isFacetModel(n){return(n==null?void 0:n.type)==="facet"}function isConcatModel(n){return(n==null?void 0:n.type)==="concat"}function isLayerModel(n){return(n==null?void 0:n.type)==="layer"}class Model{constructor(t,i,s,o,f,d,p){this.type=i,this.parent=s,this.config=f,this.parent=s,this.config=f,this.view=replaceExprRef(p),this.name=t.name??o,this.title=isText(t.title)?{text:t.title}:t.title?replaceExprRef(t.title):void 0,this.scaleNameMap=s?s.scaleNameMap:new NameMap,this.projectionNameMap=s?s.projectionNameMap:new NameMap,this.signalNameMap=s?s.signalNameMap:new NameMap,this.data=t.data,this.description=t.description,this.transforms=normalizeTransform(t.transform??[]),this.layout=i==="layer"||i==="unit"?{}:extractCompositionLayout(t,i,f),this.component={data:{sources:s?s.component.data.sources:[],outputNodes:s?s.component.data.outputNodes:{},outputNodeRefCounts:s?s.component.data.outputNodeRefCounts:{},isFaceted:isFacetSpec(t)||(s==null?void 0:s.component.data.isFaceted)&&t.data===void 0},layoutSize:new Split,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...d?duplicate(d):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){parseScales(this)}parseProjection(){parseProjection(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){parseLegend(this)}assembleEncodeFromView(t){const{style:i,...s}=t,o={};for(const f of keys(s)){const d=s[f];d!==void 0&&(o[f]=signalOrValueRef(d))}return o}assembleGroupEncodeEntry(t){let i={};return this.view&&(i=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(i.description=signalOrValueRef(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...i}:isEmpty(i)?void 0:i}assembleLayout(){if(!this.layout)return;const{spacing:t,...i}=this.layout,{component:s,config:o}=this,f=assembleLayoutTitleBand(s.layoutHeaders,o);return{padding:t,...this.assembleDefaultLayout(),...i,...f?{titleBand:f}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let i=[];for(const s of FACET_CHANNELS)t[s].title&&i.push(assembleTitleGroup(this,s));for(const s of HEADER_CHANNELS)i=i.concat(assembleHeaderGroups(this,s));return i}assembleAxes(){return assembleAxes(this.component.axes,this.config)}assembleLegends(){return assembleLegends(this)}assembleProjections(){return assembleProjections(this)}assembleTitle(){const{encoding:t,...i}=this.title??{},s={...extractTitleConfig(this.config.title).nonMarkTitleProperties,...i,...t?{encode:{update:t}}:{}};if(s.text)return contains(["unit","layer"],this.type)?contains(["middle",void 0],s.anchor)&&(s.frame??(s.frame="group")):s.anchor??(s.anchor="start"),isEmpty(s)?void 0:s}assembleGroup(t=[]){const i={};t=t.concat(this.assembleSignals()),t.length>0&&(i.signals=t);const s=this.assembleLayout();s&&(i.layout=s),i.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const o=!this.parent||isFacetModel(this.parent)?assembleScales(this):[];o.length>0&&(i.scales=o);const f=this.assembleAxes();f.length>0&&(i.axes=f);const d=this.assembleLegends();return d.length>0&&(i.legends=d),i}getName(t){return varName((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(DataSourceType[t].toLowerCase())}requestDataName(t){const i=this.getDataName(t),s=this.component.data.outputNodeRefCounts;return s[i]=(s[i]||0)+1,i}getSizeSignalRef(t){if(isFacetModel(this.parent)){const i=getSizeTypeFromLayoutSizeType(t),s=getPositionScaleChannel(i),o=this.component.scales[s];if(o&&!o.merged){const f=o.get("type"),d=o.get("range");if(hasDiscreteDomain(f)&&isVgRangeStep(d)){const p=o.get("name"),v=assembleDomain(this,s),_=getFieldFromDomain(v);if(_){const k=vgField({aggregate:"distinct",field:_},{expr:"datum"});return{signal:sizeExpr(p,o,k)}}else return warn(unknownField(s)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const i=this.component.data.outputNodes[t];return i?i.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,i){this.signalNameMap.rename(t,i)}renameScale(t,i){this.scaleNameMap.rename(t,i)}renameProjection(t,i){this.projectionNameMap.rename(t,i)}scaleName(t,i){if(i)return this.getName(t);if(isChannel(t)&&isScaleChannel(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const i=this.component.scales[t];return i&&!i.merged?i:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const i=this.getScaleComponent(t);return i?i.get("type"):void 0}getSelectionComponent(t,i){let s=this.component.selection[t];if(!s&&this.parent&&(s=this.parent.getSelectionComponent(t,i)),!s)throw new Error(selectionNotFound(i));return s}hasAxisOrientSignalRef(){var t,i;return((t=this.component.axes.x)==null?void 0:t.some(s=>s.hasOrientSignalRef()))||((i=this.component.axes.y)==null?void 0:i.some(s=>s.hasOrientSignalRef()))}}class ModelWithField extends Model{vgField(t,i={}){const s=this.fieldDef(t);if(s)return vgField(s,i)}reduceFieldDef(t,i){return reduce(this.getMapping(),(s,o,f)=>{const d=getFieldDef(o);return d?t(s,d,f):s},i)}forEachFieldDef(t,i){forEach(this.getMapping(),(s,o)=>{const f=getFieldDef(s);f&&t(f,o)},i)}}class DensityTransformNode extends DataFlowNode{clone(){return new DensityTransformNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i,this.transform=duplicate(i);const s=this.transform.as??[void 0,void 0];this.transform.as=[s[0]??"value",s[1]??"density"];const o=this.transform.resolve??"shared";this.transform.resolve=o}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${hash(this.transform)}`}assemble(){const{density:t,...i}=this.transform,s={type:"kde",field:t,...i};return s.resolve=this.transform.resolve,s}}class ExtentTransformNode extends DataFlowNode{clone(){return new ExtentTransformNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i,this.transform=duplicate(i)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${hash(this.transform)}`}assemble(){const{extent:t,param:i}=this.transform;return{type:"extent",field:t,signal:i}}}class FlattenTransformNode extends DataFlowNode{clone(){return new FlattenTransformNode(this.parent,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i,this.transform=duplicate(i);const{flatten:s,as:o=[]}=this.transform;this.transform.as=s.map((f,d)=>o[d]??f)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${hash(this.transform)}`}assemble(){const{flatten:t,as:i}=this.transform;return{type:"flatten",fields:t,as:i}}}class FoldTransformNode extends DataFlowNode{clone(){return new FoldTransformNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i,this.transform=duplicate(i);const s=this.transform.as??[void 0,void 0];this.transform.as=[s[0]??"key",s[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${hash(this.transform)}`}assemble(){const{fold:t,as:i}=this.transform;return{type:"fold",fields:t,as:i}}}class GeoJSONNode extends DataFlowNode{clone(){return new GeoJSONNode(null,duplicate(this.fields),this.geojson,this.signal)}static parseAll(t,i){if(i.component.projection&&!i.component.projection.isFit)return t;let s=0;for(const o of[[LONGITUDE,LATITUDE],[LONGITUDE2,LATITUDE2]]){const f=o.map(d=>{const p=getFieldOrDatumDef(i.encoding[d]);return isFieldDef(p)?p.field:isDatumDef(p)?{expr:`${p.datum}`}:isValueDef(p)?{expr:`${p.value}`}:void 0});(f[0]||f[1])&&(t=new GeoJSONNode(t,f,null,i.getName(`geojson_${s++}`)))}if(i.channelHasField(SHAPE)){const o=i.typedFieldDef(SHAPE);o.type===GEOJSON&&(t=new GeoJSONNode(t,null,o.field,i.getName(`geojson_${s++}`)))}return t}constructor(t,i,s,o){super(t),this.fields=i,this.geojson=s,this.signal=o}dependentFields(){const t=(this.fields??[]).filter(isString);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${hash(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class GeoPointNode extends DataFlowNode{clone(){return new GeoPointNode(null,this.projection,duplicate(this.fields),duplicate(this.as))}constructor(t,i,s,o){super(t),this.projection=i,this.fields=s,this.as=o}static parseAll(t,i){if(!i.projectionName())return t;for(const s of[[LONGITUDE,LATITUDE],[LONGITUDE2,LATITUDE2]]){const o=s.map(d=>{const p=getFieldOrDatumDef(i.encoding[d]);return isFieldDef(p)?p.field:isDatumDef(p)?{expr:`${p.datum}`}:isValueDef(p)?{expr:`${p.value}`}:void 0}),f=s[0]===LONGITUDE2?"2":"";(o[0]||o[1])&&(t=new GeoPointNode(t,i.projectionName(),o,[i.getName(`x${f}`),i.getName(`y${f}`)]))}return t}dependentFields(){return new Set(this.fields.filter(isString))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${hash(this.fields)} ${hash(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class ImputeNode extends DataFlowNode{clone(){return new ImputeNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:i=0,stop:s,step:o}=t;return{signal:`sequence(${[i,s,...o?[o]:[]].join(",")})`}}static makeFromTransform(t,i){return new ImputeNode(t,i)}static makeFromEncoding(t,i){const s=i.encoding,o=s.x,f=s.y;if(isFieldDef(o)&&isFieldDef(f)){const d=o.impute?o:f.impute?f:void 0;if(d===void 0)return;const p=o.impute?f:f.impute?o:void 0,{method:v,value:_,frame:k,keyvals:P}=d.impute,L=pathGroupingFields(i.mark,s);return new ImputeNode(t,{impute:d.field,key:p.field,...v?{method:v}:{},..._!==void 0?{value:_}:{},...k?{frame:k}:{},...P!==void 0?{keyvals:P}:{},...L.length?{groupby:L}:{}})}return null}hash(){return`Impute ${hash(this.transform)}`}assemble(){const{impute:t,key:i,keyvals:s,method:o,groupby:f,value:d,frame:p=[null,null]}=this.transform,v={type:"impute",field:t,key:i,...s?{keyvals:isImputeSequence(s)?this.processSequence(s):s}:{},method:"value",...f?{groupby:f}:{},value:!o||o==="value"?d:null};if(o&&o!=="value"){const _={type:"window",as:[`imputed_${t}_value`],ops:[o],fields:[t],frame:p,ignorePeers:!1,...f?{groupby:f}:{}},k={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[v,_,k]}else return[v]}}class LoessTransformNode extends DataFlowNode{clone(){return new LoessTransformNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i,this.transform=duplicate(i);const s=this.transform.as??[void 0,void 0];this.transform.as=[s[0]??i.on,s[1]??i.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${hash(this.transform)}`}assemble(){const{loess:t,on:i,...s}=this.transform;return{type:"loess",x:i,y:t,...s}}}class LookupNode extends DataFlowNode{clone(){return new LookupNode(null,duplicate(this.transform),this.secondary)}constructor(t,i,s){super(t),this.transform=i,this.secondary=s}static make(t,i,s,o){const f=i.component.data.sources,{from:d}=s;let p=null;if(isLookupData(d)){let v=findSource(d.data,f);v||(v=new SourceNode(d.data),f.push(v));const _=i.getName(`lookup_${o}`);p=new OutputNode(v,_,DataSourceType.Lookup,i.component.data.outputNodeRefCounts),i.component.data.outputNodes[_]=p}else if(isLookupSelection(d)){const v=d.param;s={as:v,...s};let _;try{_=i.getSelectionComponent(varName(v),v)}catch{throw new Error(cannotLookupVariableParameter(v))}if(p=_.materialized,!p)throw new Error(noSameUnitLookup(v))}return new LookupNode(t,s,p.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?array$5(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${hash({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:array$5(this.transform.as)}:{}};else{let i=this.transform.as;isString(i)||(warn(NO_FIELDS_NEEDS_AS),i="_lookup"),t={as:[i]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class QuantileTransformNode extends DataFlowNode{clone(){return new QuantileTransformNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i,this.transform=duplicate(i);const s=this.transform.as??[void 0,void 0];this.transform.as=[s[0]??"prob",s[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${hash(this.transform)}`}assemble(){const{quantile:t,...i}=this.transform;return{type:"quantile",field:t,...i}}}class RegressionTransformNode extends DataFlowNode{clone(){return new RegressionTransformNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i,this.transform=duplicate(i);const s=this.transform.as??[void 0,void 0];this.transform.as=[s[0]??i.on,s[1]??i.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${hash(this.transform)}`}assemble(){const{regression:t,on:i,...s}=this.transform;return{type:"regression",x:i,y:t,...s}}}class PivotTransformNode extends DataFlowNode{clone(){return new PivotTransformNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i}addDimensions(t){this.transform.groupby=unique((this.transform.groupby??[]).concat(t),i=>i)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${hash(this.transform)}`}assemble(){const{pivot:t,value:i,groupby:s,limit:o,op:f}=this.transform;return{type:"pivot",field:t,value:i,...o!==void 0?{limit:o}:{},...f!==void 0?{op:f}:{},...s!==void 0?{groupby:s}:{}}}}class SampleTransformNode extends DataFlowNode{clone(){return new SampleTransformNode(null,duplicate(this.transform))}constructor(t,i){super(t),this.transform=i}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${hash(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function makeWalkTree(n){let t=0;function i(s,o){if(s instanceof SourceNode&&!s.isGenerator&&!isUrlData(s.data)&&(n.push(o),o={name:null,source:o.name,transform:[]}),s instanceof ParseNode&&(s.parent instanceof SourceNode&&!o.source?(o.format={...o.format,parse:s.assembleFormatParse()},o.transform.push(...s.assembleTransforms(!0))):o.transform.push(...s.assembleTransforms())),s instanceof FacetNode){o.name||(o.name=`data_${t++}`),!o.source||o.transform.length>0?(n.push(o),s.data=o.name):s.data=o.source,n.push(...s.assemble());return}switch((s instanceof GraticuleNode||s instanceof SequenceNode||s instanceof FilterInvalidNode||s instanceof FilterNode||s instanceof CalculateNode||s instanceof GeoPointNode||s instanceof AggregateNode||s instanceof LookupNode||s instanceof WindowTransformNode||s instanceof JoinAggregateTransformNode||s instanceof FoldTransformNode||s instanceof FlattenTransformNode||s instanceof DensityTransformNode||s instanceof LoessTransformNode||s instanceof QuantileTransformNode||s instanceof RegressionTransformNode||s instanceof IdentifierNode||s instanceof SampleTransformNode||s instanceof PivotTransformNode||s instanceof ExtentTransformNode)&&o.transform.push(s.assemble()),(s instanceof BinNode||s instanceof TimeUnitNode||s instanceof ImputeNode||s instanceof StackNode||s instanceof GeoJSONNode)&&o.transform.push(...s.assemble()),s instanceof OutputNode&&(o.source&&o.transform.length===0?s.setSource(o.source):s.parent instanceof OutputNode?s.setSource(o.name):(o.name||(o.name=`data_${t++}`),s.setSource(o.name),s.numChildren()===1&&(n.push(o),o={name:null,source:o.name,transform:[]}))),s.numChildren()){case 0:s instanceof OutputNode&&(!o.source||o.transform.length>0)&&n.push(o);break;case 1:i(s.children[0],o);break;default:{o.name||(o.name=`data_${t++}`);let f=o.name;!o.source||o.transform.length>0?n.push(o):f=o.source;for(const d of s.children)i(d,{name:null,source:f,transform:[]});break}}}return i}function assembleFacetData(n){const t=[],i=makeWalkTree(t);for(const s of n.children)i(s,{source:n.name,name:null,transform:[]});return t}function assembleRootData(n,t){const i=[],s=makeWalkTree(i);let o=0;for(const d of n.sources){d.hasName()||(d.dataName=`source_${o++}`);const p=d.assemble();s(d,p)}for(const d of i)d.transform.length===0&&delete d.transform;let f=0;for(const[d,p]of i.entries())(p.transform??[]).length===0&&!p.source&&i.splice(f++,0,i.splice(d,1)[0]);for(const d of i)for(const p of d.transform??[])p.type==="lookup"&&(p.from=n.outputNodes[p.from].getSource());for(const d of i)d.name in t&&(d.values=t[d.name]);return i}function getHeaderType(n){return n==="top"||n==="left"||isSignalRef(n)?"header":"footer"}function parseFacetHeaders(n){for(const t of FACET_CHANNELS)parseFacetHeader(n,t);mergeChildAxis(n,"x"),mergeChildAxis(n,"y")}function parseFacetHeader(n,t){var d;const{facet:i,config:s,child:o,component:f}=n;if(n.channelHasField(t)){const p=i[t],v=getHeaderProperty("title",null,s,t);let _=title(p,s,{allowDisabling:!0,includeDefault:v===void 0||!!v});o.component.layoutHeaders[t].title&&(_=isArray(_)?_.join(", "):_,_+=` / ${o.component.layoutHeaders[t].title}`,o.component.layoutHeaders[t].title=null);const k=getHeaderProperty("labelOrient",p.header,s,t),P=p.header!==null?getFirstDefined((d=p.header)==null?void 0:d.labels,s.header.labels,!0):!1,L=contains(["bottom","right"],k)?"footer":"header";f.layoutHeaders[t]={title:p.header!==null?_:null,facetFieldDef:p,[L]:t==="facet"?[]:[makeHeaderComponent(n,t,P)]}}}function makeHeaderComponent(n,t,i){const s=t==="row"?"height":"width";return{labels:i,sizeSignal:n.child.component.layoutSize.get(s)?n.child.getSizeSignalRef(s):void 0,axes:[]}}function mergeChildAxis(n,t){const{child:i}=n;if(i.component.axes[t]){const{layoutHeaders:s,resolve:o}=n.component;if(o.axis[t]=parseGuideResolve(o,t),o.axis[t]==="shared"){const f=t==="x"?"column":"row",d=s[f];for(const p of i.component.axes[t]){const v=getHeaderType(p.get("orient"));d[v]??(d[v]=[makeHeaderComponent(n,f,!1)]);const _=assembleAxis(p,"main",n.config,{header:!0});_&&d[v][0].axes.push(_),p.mainExtracted=!0}}}}function parseLayerLayoutSize(n){parseChildrenLayoutSize(n),parseNonUnitLayoutSizeForChannel(n,"width"),parseNonUnitLayoutSizeForChannel(n,"height")}function parseConcatLayoutSize(n){parseChildrenLayoutSize(n);const t=n.layout.columns===1?"width":"childWidth",i=n.layout.columns===void 0?"height":"childHeight";parseNonUnitLayoutSizeForChannel(n,t),parseNonUnitLayoutSizeForChannel(n,i)}function parseChildrenLayoutSize(n){for(const t of n.children)t.parseLayoutSize()}function parseNonUnitLayoutSizeForChannel(n,t){const i=getSizeTypeFromLayoutSizeType(t),s=getPositionScaleChannel(i),o=n.component.resolve,f=n.component.layoutSize;let d;for(const p of n.children){const v=p.component.layoutSize.getWithExplicit(i),_=o.scale[s]??defaultScaleResolve(s,n);if(_==="independent"&&v.value==="step"){d=void 0;break}if(d){if(_==="independent"&&d.value!==v.value){d=void 0;break}d=mergeValuesWithExplicit(d,v,i,"")}else d=v}if(d){for(const p of n.children)n.renameSignal(p.getName(i),n.getName(t)),p.component.layoutSize.set(i,"merged",!1);f.setWithExplicit(t,d)}else f.setWithExplicit(t,{explicit:!1,value:void 0})}function parseUnitLayoutSize(n){const{size:t,component:i}=n;for(const s of POSITION_SCALE_CHANNELS){const o=getSizeChannel(s);if(t[o]){const f=t[o];i.layoutSize.set(o,isStep(f)?"step":f,!0)}else{const f=defaultUnitSize(n,o);i.layoutSize.set(o,f,!1)}}}function defaultUnitSize(n,t){const i=t==="width"?"x":"y",s=n.config,o=n.getScaleComponent(i);if(o){const f=o.get("type"),d=o.get("range");if(hasDiscreteDomain(f)){const p=getViewConfigDiscreteSize(s.view,t);return isVgRangeStep(d)||isStep(p)?"step":p}else return getViewConfigContinuousSize(s.view,t)}else{if(n.hasProjection||n.mark==="arc")return getViewConfigContinuousSize(s.view,t);{const f=getViewConfigDiscreteSize(s.view,t);return isStep(f)?f.step:f}}}function facetSortFieldName(n,t,i){return vgField(t,{suffix:`by_${vgField(n)}`,...i})}class FacetModel extends ModelWithField{constructor(t,i,s,o){super(t,"facet",i,s,o,t.resolve),this.child=buildModel(t.spec,this,this.getName("child"),void 0,o),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!isFacetMapping(t))return{facet:this.initFacetFieldDef(t,"facet")};const i=keys(t),s={};for(const o of i){if(![ROW,COLUMN].includes(o)){warn(incompatibleChannel(o,"facet"));break}const f=t[o];if(f.field===void 0){warn(emptyFieldDef(f,o));break}s[o]=this.initFacetFieldDef(f,o)}return s}initFacetFieldDef(t,i){const s=initFieldDef(t,i);return s.header?s.header=replaceExprRef(s.header):s.header===null&&(s.header=null),s}channelHasField(t){return hasProperty(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=parseData(this),this.child.parseData()}parseLayoutSize(){parseChildrenLayoutSize(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>isTimerSelection(t))&&error(MULTI_VIEW_ANIMATION_UNSUPPORTED)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),parseFacetHeaders(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const i of FACET_CHANNELS)for(const s of HEADER_TYPES){const o=this.component.layoutHeaders[i],f=o[s],{facetFieldDef:d}=o;if(d){const p=getHeaderProperty("titleOrient",d.header,this.config,i);if(["right","bottom"].includes(p)){const v=getHeaderChannel(i,p);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[v]="end"}}if(f!=null&&f[0]){const p=i==="row"?"height":"width",v=s==="header"?"headerBand":"footerBand";i!=="facet"&&!this.child.component.layoutSize.get(p)&&(t[v]??(t[v]={}),t[v][i]=.5),o.title&&(t.offset??(t.offset={}),t.offset[i==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:i}=this.facet,s=t?this.columnDistinctSignal():i?1:void 0;let o="all";return(!i&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(o="none"),{...this.getHeaderLayoutMixins(),...s?{columns:s}:{},bounds:"full",align:o}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof FacetModel))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof FacetModel?{...this.channelHasField("column")?{encode:{update:{columns:{field:vgField(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],i=[],s=[];if(this.child instanceof FacetModel){if(this.child.channelHasField("column")){const o=vgField(this.child.facet.column);t.push(o),i.push("distinct"),s.push(`distinct_${o}`)}}else for(const o of POSITION_SCALE_CHANNELS){const f=this.child.component.scales[o];if(f&&!f.merged){const d=f.get("type"),p=f.get("range");if(hasDiscreteDomain(d)&&isVgRangeStep(p)){const v=assembleDomain(this.child,o),_=getFieldFromDomain(v);_?(t.push(_),i.push("distinct"),s.push(`distinct_${_}`)):warn(unknownField(o))}}}return{fields:t,ops:i,as:s}}assembleFacet(){const{name:t,data:i}=this.component.data.facetRoot,{row:s,column:o}=this.facet,{fields:f,ops:d,as:p}=this.getCardinalityAggregateForChild(),v=[];for(const k of FACET_CHANNELS){const P=this.facet[k];if(P){v.push(vgField(P));const{bin:L,sort:G}=P;if(isBinning(L)&&v.push(vgField(P,{binSuffix:"end"})),isSortField(G)){const{field:Z,op:W=DEFAULT_SORT_OP}=G,j=facetSortFieldName(P,G);s&&o?(f.push(j),d.push("max"),p.push(j)):(f.push(Z),d.push(W),p.push(j))}else if(isArray(G)){const Z=sortArrayIndexField(P,k);f.push(Z),d.push("max"),p.push(Z)}}}const _=!!s&&!!o;return{name:t,data:i,groupby:v,..._||f.length>0?{aggregate:{..._?{cross:_}:{},...f.length?{fields:f,ops:d,as:p}:{}}}:{}}}facetSortFields(t){const{facet:i}=this,s=i[t];return s?isSortField(s.sort)?[facetSortFieldName(s,s.sort,{expr:"datum"})]:isArray(s.sort)?[sortArrayIndexField(s,t,{expr:"datum"})]:[vgField(s,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:i}=this,s=i[t];if(s){const{sort:o}=s;return[(isSortField(o)?o.order:!isArray(o)&&o)||"ascending"]}return[]}assembleLabelTitle(){var o;const{facet:t,config:i}=this;if(t.facet)return assembleLabelTitle(t.facet,"facet",i);const s={row:["top","bottom"],column:["left","right"]};for(const f of HEADER_CHANNELS)if(t[f]){const d=getHeaderProperty("labelOrient",(o=t[f])==null?void 0:o.header,i,f);if(s[f].includes(d))return assembleLabelTitle(t[f],f,i)}}assembleMarks(){const{child:t}=this,i=this.component.data.facetRoot,s=assembleFacetData(i),o=t.assembleGroupEncodeEntry(!1),f=this.assembleLabelTitle()||t.assembleTitle(),d=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...f?{title:f}:{},...d?{style:d}:{},from:{facet:this.assembleFacet()},sort:{field:FACET_CHANNELS.map(v=>this.facetSortFields(v)).flat(),order:FACET_CHANNELS.map(v=>this.facetSortOrder(v)).flat()},...s.length>0?{data:s}:{},...o?{encode:{update:o}}:{},...t.assembleGroup(assembleFacetSignals(this,[]))}]}getMapping(){return this.facet}}function makeJoinAggregateFromFacet(n,t){const{row:i,column:s}=t;if(i&&s){let o=null;for(const f of[i,s])if(isSortField(f.sort)){const{field:d,op:p=DEFAULT_SORT_OP}=f.sort;n=o=new JoinAggregateTransformNode(n,{joinaggregate:[{op:p,field:d,as:facetSortFieldName(f,f.sort,{forAs:!0})}],groupby:[vgField(f)]})}return o}return null}function findSource(n,t){var i,s,o,f;for(const d of t){const p=d.data;if(n.name&&d.hasName()&&n.name!==d.dataName)continue;const v=(i=n.format)==null?void 0:i.mesh,_=(s=p.format)==null?void 0:s.feature;if(v&&_)continue;const k=(o=n.format)==null?void 0:o.feature;if((k||_)&&k!==_)continue;const P=(f=p.format)==null?void 0:f.mesh;if(!((v||P)&&v!==P)){if(isInlineData(n)&&isInlineData(p)){if(deepEqual(n.values,p.values))return d}else if(isUrlData(n)&&isUrlData(p)){if(n.url===p.url)return d}else if(isNamedData(n)&&n.name===d.dataName)return d}}return null}function parseRoot(n,t){if(n.data||!n.parent){if(n.data===null){const s=new SourceNode({values:[]});return t.push(s),s}const i=findSource(n.data,t);if(i)return isGenerator(n.data)||(i.data.format=mergeDeep$1({},n.data.format,i.data.format)),!i.hasName()&&n.data.name&&(i.dataName=n.data.name),i;{const s=new SourceNode(n.data);return t.push(s),s}}else return n.parent.component.data.facetRoot?n.parent.component.data.facetRoot:n.parent.component.data.main}function parseTransformArray(n,t,i){let s=0;for(const o of t.transforms){let f,d;if(isCalculate(o))d=n=new CalculateNode(n,o),f="derived";else if(isFilter(o)){const p=getImplicitFromFilterTransform(o);d=n=ParseNode.makeWithAncestors(n,{},p,i)??n,n=new FilterNode(n,t,o.filter)}else if(isBin(o))d=n=BinNode.makeFromTransform(n,o,t),f="number";else if(isTimeUnit(o))f="date",i.getWithExplicit(o.field).value===void 0&&(n=new ParseNode(n,{[o.field]:f}),i.set(o.field,f,!1)),d=n=TimeUnitNode.makeFromTransform(n,o);else if(isAggregate(o))d=n=AggregateNode.makeFromTransform(n,o),f="number",requiresSelectionId(t)&&(n=new IdentifierNode(n));else if(isLookup(o))d=n=LookupNode.make(n,t,o,s++),f="derived";else if(isWindow(o))d=n=new WindowTransformNode(n,o),f="number";else if(isJoinAggregate(o))d=n=new JoinAggregateTransformNode(n,o),f="number";else if(isStack(o))d=n=StackNode.makeFromTransform(n,o),f="derived";else if(isFold(o))d=n=new FoldTransformNode(n,o),f="derived";else if(isExtent(o))d=n=new ExtentTransformNode(n,o),f="derived";else if(isFlatten(o))d=n=new FlattenTransformNode(n,o),f="derived";else if(isPivot(o))d=n=new PivotTransformNode(n,o),f="derived";else if(isSample(o))n=new SampleTransformNode(n,o);else if(isImpute(o))d=n=ImputeNode.makeFromTransform(n,o),f="derived";else if(isDensity(o))d=n=new DensityTransformNode(n,o),f="derived";else if(isQuantile(o))d=n=new QuantileTransformNode(n,o),f="derived";else if(isRegression(o))d=n=new RegressionTransformNode(n,o),f="derived";else if(isLoess(o))d=n=new LoessTransformNode(n,o),f="derived";else{warn(invalidTransformIgnored(o));continue}if(d&&f!==void 0)for(const p of d.producedFields()??[])i.set(p,f,!1)}return n}function parseData(n){var j;let t=parseRoot(n,n.component.data.sources);const{outputNodes:i,outputNodeRefCounts:s}=n.component.data,o=n.data,d=!(o&&(isGenerator(o)||isUrlData(o)||isInlineData(o)))&&n.parent?n.parent.component.data.ancestorParse.clone():new AncestorParse;isGenerator(o)?(isSequenceGenerator(o)?t=new SequenceNode(t,o.sequence):isGraticuleGenerator(o)&&(t=new GraticuleNode(t,o.graticule)),d.parseNothing=!0):((j=o==null?void 0:o.format)==null?void 0:j.parse)===null&&(d.parseNothing=!0),t=ParseNode.makeExplicit(t,n,d)??t,t=new IdentifierNode(t);const p=n.parent&&isLayerModel(n.parent);(isUnitModel(n)||isFacetModel(n))&&p&&(t=BinNode.makeFromEncoding(t,n)??t),n.transforms.length>0&&(t=parseTransformArray(t,n,d));const v=getImplicitFromSelection(n),_=getImplicitFromEncoding(n);t=ParseNode.makeWithAncestors(t,{},{...v,..._},d)??t,isUnitModel(n)&&(t=GeoJSONNode.parseAll(t,n),t=GeoPointNode.parseAll(t,n)),(isUnitModel(n)||isFacetModel(n))&&(p||(t=BinNode.makeFromEncoding(t,n)??t),t=TimeUnitNode.makeFromEncoding(t,n)??t,t=CalculateNode.parseAllForSortIndex(t,n));const k=t=makeOutputNode(DataSourceType.Raw,n,t);if(isUnitModel(n)){const H=AggregateNode.makeFromEncoding(t,n);H&&(t=H,requiresSelectionId(n)&&(t=new IdentifierNode(t))),t=ImputeNode.makeFromEncoding(t,n)??t,t=StackNode.makeFromEncoding(t,n)??t}let P,L;if(isUnitModel(n)){const{markDef:H,mark:me,config:$e}=n,De=getMarkPropOrConfig("invalid",H,$e),{marks:le,scales:Ce}=L=getDataSourcesForHandlingInvalidValues({invalid:De,isPath:isPathMark(me)});le!==Ce&&Ce==="include-invalid-values"&&(P=t=makeOutputNode(DataSourceType.PreFilterInvalid,n,t)),le==="exclude-invalid-values"&&(t=FilterInvalidNode.make(t,n,L)??t)}const G=t=makeOutputNode(DataSourceType.Main,n,t);let Z;if(isUnitModel(n)&&L){const{marks:H,scales:me}=L;H==="include-invalid-values"&&me==="exclude-invalid-values"&&(t=FilterInvalidNode.make(t,n,L)??t,Z=t=makeOutputNode(DataSourceType.PostFilterInvalid,n,t))}isUnitModel(n)&&materializeSelections(n,G);let W=null;if(isFacetModel(n)){const H=n.getName("facet");t=makeJoinAggregateFromFacet(t,n.facet)??t,W=new FacetNode(t,n,H,G.getSource()),i[H]=W}return{...n.component.data,outputNodes:i,outputNodeRefCounts:s,raw:k,main:G,facetRoot:W,ancestorParse:d,preFilterInvalid:P,postFilterInvalid:Z}}function makeOutputNode(n,t,i){const{outputNodes:s,outputNodeRefCounts:o}=t.component.data,f=t.getDataName(n),d=new OutputNode(i,f,n,o);return s[f]=d,d}class ConcatModel extends Model{constructor(t,i,s,o){var f,d,p,v;super(t,"concat",i,s,o,t.resolve),(((d=(f=t.resolve)==null?void 0:f.axis)==null?void 0:d.x)==="shared"||((v=(p=t.resolve)==null?void 0:p.axis)==null?void 0:v.y)==="shared")&&warn(CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((_,k)=>buildModel(_,this,this.getName(`concat_${k}`),void 0,o))}parseData(){this.component.data=parseData(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const i of keys(t.component.selection))this.component.selection[i]=t.component.selection[i]}Object.values(this.component.selection).some(t=>isTimerSelection(t))&&error(MULTI_VIEW_ANIMATION_UNSUPPORTED)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return isVConcatSpec(t)?t.vconcat:isHConcatSpec(t)?t.hconcat:t.concat}parseLayoutSize(){parseConcatLayoutSize(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((i,s)=>s.assembleSelectionTopLevelSignals(i),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=assembleLayoutSignals(this);for(const i of this.children)t.push(...i.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((i,s)=>s.assembleSelectionData(i),t)}assembleMarks(){return this.children.map(t=>{const i=t.assembleTitle(),s=t.assembleGroupStyle(),o=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...i?{title:i}:{},...s?{style:s}:{},...o?{encode:{update:o}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function isFalseOrNull(n){return n===!1||n===null}const AXIS_COMPONENT_PROPERTIES_INDEX={disable:1,gridScale:1,scale:1,...COMMON_AXIS_PROPERTIES_INDEX,labelExpr:1,encode:1},AXIS_COMPONENT_PROPERTIES=keys(AXIS_COMPONENT_PROPERTIES_INDEX);class AxisComponent extends Split{constructor(t={},i={},s=!1){super(),this.explicit=t,this.implicit=i,this.mainExtracted=s}clone(){return new AxisComponent(duplicate(this.explicit),duplicate(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!isFalseOrNull(this.get(t))}hasOrientSignalRef(){return isSignalRef(this.explicit.orient)}}function labels(n,t,i){const{encoding:s,config:o}=n,f=getFieldOrDatumDef(s[t])??getFieldOrDatumDef(s[getSecondaryRangeChannel(t)]),d=n.axis(t)||{},{format:p,formatType:v}=d;if(isCustomFormatType(v))return{text:formatCustomType({fieldOrDatumDef:f,field:"datum.value",format:p,formatType:v,config:o}),...i};if(p===void 0&&v===void 0&&o.customFormatTypes){if(channelDefType(f)==="quantitative"){if(isPositionFieldOrDatumDef(f)&&f.stack==="normalize"&&o.normalizedNumberFormatType)return{text:formatCustomType({fieldOrDatumDef:f,field:"datum.value",format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,config:o}),...i};if(o.numberFormatType)return{text:formatCustomType({fieldOrDatumDef:f,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}),...i}}if(channelDefType(f)==="temporal"&&o.timeFormatType&&isFieldDef(f)&&!f.timeUnit)return{text:formatCustomType({fieldOrDatumDef:f,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o}),...i}}return i}function parseUnitAxes(n){return POSITION_SCALE_CHANNELS.reduce((t,i)=>(n.component.scales[i]&&(t[i]=[parseAxis(i,n)]),t),{})}const OPPOSITE_ORIENT={bottom:"top",top:"bottom",left:"right",right:"left"};function parseLayerAxes(n){const{axes:t,resolve:i}=n.component,s={top:0,bottom:0,right:0,left:0};for(const o of n.children){o.parseAxesAndHeaders();for(const f of keys(o.component.axes))i.axis[f]=parseGuideResolve(n.component.resolve,f),i.axis[f]==="shared"&&(t[f]=mergeAxisComponents(t[f],o.component.axes[f]),t[f]||(i.axis[f]="independent",delete t[f]))}for(const o of POSITION_SCALE_CHANNELS){for(const f of n.children)if(f.component.axes[o]){if(i.axis[o]==="independent"){t[o]=(t[o]??[]).concat(f.component.axes[o]);for(const d of f.component.axes[o]){const{value:p,explicit:v}=d.getWithExplicit("orient");if(!isSignalRef(p)){if(s[p]>0&&!v){const _=OPPOSITE_ORIENT[p];s[p]>s[_]&&d.set("orient",_,!1)}s[p]++}}}delete f.component.axes[o]}if(i.axis[o]==="independent"&&t[o]&&t[o].length>1)for(const[f,d]of(t[o]||[]).entries())f>0&&d.get("grid")&&!d.explicit.grid&&(d.implicit.grid=!1)}}function mergeAxisComponents(n,t){if(n){if(n.length!==t.length)return;const i=n.length;for(let s=0;s<i;s++){const o=n[s],f=t[s];if(!!o!=!!f)return;if(o&&f){const d=o.getWithExplicit("orient"),p=f.getWithExplicit("orient");if(d.explicit&&p.explicit&&d.value!==p.value)return;n[s]=mergeAxisComponent(o,f)}}}else return t.map(i=>i.clone());return n}function mergeAxisComponent(n,t){for(const i of AXIS_COMPONENT_PROPERTIES){const s=mergeValuesWithExplicit(n.getWithExplicit(i),t.getWithExplicit(i),i,"axis",(o,f)=>{switch(i){case"title":return mergeTitleComponent(o,f);case"gridScale":return{explicit:o.explicit,value:getFirstDefined(o.value,f.value)}}return defaultTieBreaker(o,f,i,"axis")});n.setWithExplicit(i,s)}return n}function isExplicit(n,t,i,s,o){if(t==="disable")return i!==void 0;switch(i=i||{},t){case"titleAngle":case"labelAngle":return n===(isSignalRef(i.labelAngle)?i.labelAngle:normalizeAngle(i.labelAngle));case"values":return!!i.values;case"encode":return!!i.encoding||!!i.labelAngle;case"title":if(n===getFieldDefTitle(s,o))return!0}return n===i[t]}const propsToAlwaysIncludeConfig=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function parseAxis(n,t){var H,me;let i=t.axis(n);const s=new AxisComponent,o=getFieldOrDatumDef(t.encoding[n]),{mark:f,config:d}=t,p=(i==null?void 0:i.orient)||((H=d[n==="x"?"axisX":"axisY"])==null?void 0:H.orient)||((me=d.axis)==null?void 0:me.orient)||defaultOrient(n),v=t.getScaleComponent(n).get("type"),_=getAxisConfigs(n,v,p,t.config),k=i!==void 0?!i:getAxisConfig("disable",d.style,i==null?void 0:i.style,_).configValue;if(s.set("disable",k,i!==void 0),k)return s;i=i||{};const P=getLabelAngle(o,i,n,d.style,_),L=guideFormatType(i.formatType,o,v),G=guideFormat(o,o.type,i.format,i.formatType,d,!0),Z={fieldOrDatumDef:o,axis:i,channel:n,model:t,scaleType:v,orient:p,labelAngle:P,format:G,formatType:L,mark:f,config:d};for(const $e of AXIS_COMPONENT_PROPERTIES){const De=$e in axisRules?axisRules[$e](Z):isAxisProperty($e)?i[$e]:void 0,le=De!==void 0,Ce=isExplicit(De,$e,i,t,n);if(le&&Ce)s.set($e,De,Ce);else{const{configValue:Me=void 0,configFrom:_n=void 0}=isAxisProperty($e)&&$e!=="values"?getAxisConfig($e,d.style,i.style,_):{},_i=Me!==void 0;le&&!_i?s.set($e,De,Ce):(_n!=="vgAxisConfig"||propsToAlwaysIncludeConfig.has($e)&&_i||isConditionalAxisValue(Me)||isSignalRef(Me))&&s.set($e,Me,!1)}}const W=i.encoding??{},j=AXIS_PARTS.reduce(($e,De)=>{if(!s.hasAxisPart(De))return $e;const le=guideEncodeEntry(W[De]??{},t),Ce=De==="labels"?labels(t,n,le):le;return Ce!==void 0&&!isEmpty(Ce)&&($e[De]={update:Ce}),$e},{});return isEmpty(j)||s.set("encode",j,!!i.encoding||i.labelAngle!==void 0),s}function initLayoutSize({encoding:n,size:t}){for(const i of POSITION_SCALE_CHANNELS){const s=getSizeChannel(i);isStep(t[s])&&isContinuousFieldOrDatumDef(n[i])&&(delete t[s],warn(stepDropped(s)))}return t}const arc={vgMark:"arc",encodeEntry:n=>({...baseEncodeEntry(n,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pointPosition("x",n,{defaultPos:"mid"}),...pointPosition("y",n,{defaultPos:"mid"}),...rectPosition(n,"radius"),...rectPosition(n,"theta")})},area={vgMark:"area",encodeEntry:n=>({...baseEncodeEntry(n,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...pointOrRangePosition("x",n,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:n.markDef.orient==="horizontal"}),...pointOrRangePosition("y",n,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:n.markDef.orient==="vertical"}),...defined(n)})},bar={vgMark:"rect",encodeEntry:n=>({...baseEncodeEntry(n,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...rectPosition(n,"x"),...rectPosition(n,"y")})},geoshape={vgMark:"shape",encodeEntry:n=>({...baseEncodeEntry(n,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:n=>{const{encoding:t}=n,i=t.shape;return[{type:"geoshape",projection:n.projectionName(),...i&&isFieldDef(i)&&i.type===GEOJSON?{field:vgField(i,{expr:"datum"})}:{}}]}},image={vgMark:"image",encodeEntry:n=>({...baseEncodeEntry(n,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...rectPosition(n,"x"),...rectPosition(n,"y"),...text$1(n,"url")})},line={vgMark:"line",encodeEntry:n=>({...baseEncodeEntry(n,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pointPosition("x",n,{defaultPos:"mid"}),...pointPosition("y",n,{defaultPos:"mid"}),...nonPosition("size",n,{vgChannel:"strokeWidth"}),...defined(n)})},trail={vgMark:"trail",encodeEntry:n=>({...baseEncodeEntry(n,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pointPosition("x",n,{defaultPos:"mid"}),...pointPosition("y",n,{defaultPos:"mid"}),...nonPosition("size",n),...defined(n)})};function encodeEntry(n,t){const{config:i}=n;return{...baseEncodeEntry(n,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pointPosition("x",n,{defaultPos:"mid"}),...pointPosition("y",n,{defaultPos:"mid"}),...nonPosition("size",n),...nonPosition("angle",n),...shapeMixins(n,i,t)}}function shapeMixins(n,t,i){return i?{shape:{value:i}}:nonPosition("shape",n)}const point={vgMark:"symbol",encodeEntry:n=>encodeEntry(n)},circle={vgMark:"symbol",encodeEntry:n=>encodeEntry(n,"circle")},square={vgMark:"symbol",encodeEntry:n=>encodeEntry(n,"square")},rect={vgMark:"rect",encodeEntry:n=>({...baseEncodeEntry(n,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...rectPosition(n,"x"),...rectPosition(n,"y")})},rule={vgMark:"rule",encodeEntry:n=>{const{markDef:t}=n,i=t.orient;return!n.encoding.x&&!n.encoding.y&&!n.encoding.latitude&&!n.encoding.longitude?{}:{...baseEncodeEntry(n,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pointOrRangePosition("x",n,{defaultPos:i==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:i!=="vertical"}),...pointOrRangePosition("y",n,{defaultPos:i==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:i!=="horizontal"}),...nonPosition("size",n,{vgChannel:"strokeWidth"})}}},text={vgMark:"text",encodeEntry:n=>{const{config:t,encoding:i}=n;return{...baseEncodeEntry(n,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...pointPosition("x",n,{defaultPos:"mid"}),...pointPosition("y",n,{defaultPos:"mid"}),...text$1(n),...nonPosition("size",n,{vgChannel:"fontSize"}),...nonPosition("angle",n),...valueIfDefined("align",align(n.markDef,i,t)),...valueIfDefined("baseline",baseline(n.markDef,i,t)),...pointPosition("radius",n,{defaultPos:null}),...pointPosition("theta",n,{defaultPos:null})}}};function align(n,t,i){if(getMarkPropOrConfig("align",n,i)===void 0)return"center"}function baseline(n,t,i){if(getMarkPropOrConfig("baseline",n,i)===void 0)return"middle"}const tick={vgMark:"rect",encodeEntry:n=>{const{config:t,markDef:i}=n,s=i.orient,o=s==="horizontal"?"x":"y",f=s==="horizontal"?"y":"x",d=s==="horizontal"?"height":"width";return{...baseEncodeEntry(n,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...rectPosition(n,o),...pointPosition(f,n,{defaultPos:"mid",vgChannel:f==="y"?"yc":"xc"}),[d]:signalOrValueRef(getMarkPropOrConfig("thickness",i,t))}}},markCompiler={arc,area,bar,circle,geoshape,image,line,point,rect,rule,square,text,tick,trail};function parseMarkGroups(n){if(contains([LINE,AREA,TRAIL],n.mark)){const t=pathGroupingFields(n.mark,n.encoding);if(t.length>0)return getPathGroups(n,t)}else if(n.mark===BAR){const t=VG_CORNERRADIUS_CHANNELS.some(i=>getMarkPropOrConfig(i,n.markDef,n.config));if(n.stack&&!n.fieldDef("size")&&t)return getGroupsForStackedBarWithCornerRadius(n)}return getMarkGroup(n)}const FACETED_PATH_PREFIX="faceted_path_";function getPathGroups(n,t){return[{name:n.getName("pathgroup"),type:"group",from:{facet:{name:FACETED_PATH_PREFIX+n.requestDataName(DataSourceType.Main),data:n.requestDataName(DataSourceType.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:getMarkGroup(n,{fromPrefix:FACETED_PATH_PREFIX})}]}const STACK_GROUP_PREFIX="stack_group_";function getGroupsForStackedBarWithCornerRadius(n){var _;const[t]=getMarkGroup(n,{fromPrefix:STACK_GROUP_PREFIX}),i=n.scaleName(n.stack.fieldChannel),s=(k={})=>n.vgField(n.stack.fieldChannel,k),o=(k,P)=>{const L=[s({prefix:"min",suffix:"start",expr:P}),s({prefix:"max",suffix:"start",expr:P}),s({prefix:"min",suffix:"end",expr:P}),s({prefix:"max",suffix:"end",expr:P})];return`${k}(${L.map(G=>`scale('${i}',${G})`).join(",")})`};let f,d;n.stack.fieldChannel==="x"?(f={...pick(t.encode.update,["y","yc","y2","height",...VG_CORNERRADIUS_CHANNELS]),x:{signal:o("min","datum")},x2:{signal:o("max","datum")},clip:{value:!0}},d={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...omit(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(f={...pick(t.encode.update,["x","xc","x2","width"]),y:{signal:o("min","datum")},y2:{signal:o("max","datum")},clip:{value:!0}},d={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...omit(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const k of VG_CORNERRADIUS_CHANNELS){const P=getMarkConfig(k,n.markDef,n.config);t.encode.update[k]?(f[k]=t.encode.update[k],delete t.encode.update[k]):P&&(f[k]=signalOrValueRef(P)),P&&(t.encode.update[k]={value:0})}const p=[];if(((_=n.stack.groupbyChannels)==null?void 0:_.length)>0)for(const k of n.stack.groupbyChannels){const P=n.fieldDef(k),L=vgField(P);L&&p.push(L),(P!=null&&P.bin||P!=null&&P.timeUnit)&&p.push(vgField(P,{binSuffix:"end"}))}return f=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((k,P)=>{if(t.encode.update[P])return{...k,[P]:t.encode.update[P]};{const L=getMarkConfig(P,n.markDef,n.config);return L!==void 0?{...k,[P]:signalOrValueRef(L)}:k}},f),f.stroke&&(f.strokeForeground={value:!0},f.strokeOffset={value:0}),[{type:"group",from:{facet:{data:n.requestDataName(DataSourceType.Main),name:STACK_GROUP_PREFIX+n.requestDataName(DataSourceType.Main),groupby:p,aggregate:{fields:[s({suffix:"start"}),s({suffix:"start"}),s({suffix:"end"}),s({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:f},marks:[{type:"group",encode:{update:d},marks:[t]}]}]}function getSort(n){const{encoding:t,stack:i,mark:s,markDef:o,config:f}=n,d=t.order;if(!(!isArray(d)&&isValueDef(d)&&isNullOrFalse(d.value)||!d&&isNullOrFalse(getMarkPropOrConfig("order",o,f)))){if((isArray(d)||isFieldDef(d))&&!i)return sortParams(d,{expr:"datum"});if(isPathMark(s)){const p=o.orient==="horizontal"?"y":"x",v=t[p];if(isFieldDef(v))return{field:p}}}}function getMarkGroup(n,t={fromPrefix:""}){const{mark:i,markDef:s,encoding:o,config:f}=n,d=getFirstDefined(s.clip,scaleClip(n),projectionClip(n)),p=getStyles(s),v=o.key,_=getSort(n),k=interactiveFlag(n),P=getMarkPropOrConfig("aria",s,f),L=markCompiler[i].postEncodingTransform?markCompiler[i].postEncodingTransform(n):null;return[{name:n.getName("marks"),type:markCompiler[i].vgMark,...d?{clip:d}:{},...p?{style:p}:{},...v?{key:v.field}:{},..._?{sort:_}:{},...k||{},...P===!1?{aria:P}:{},from:{data:t.fromPrefix+n.requestDataName(DataSourceType.Main)},encode:{update:markCompiler[i].encodeEntry(n)},...L?{transform:L}:{}}]}function scaleClip(n){const t=n.getScaleComponent("x"),i=n.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||i!=null&&i.get("selectionExtent")?!0:void 0}function projectionClip(n){const t=n.component.projection;return t&&!t.isFit?!0:void 0}function interactiveFlag(n){if(!n.component.selection)return null;const t=keys(n.component.selection).length;let i=t,s=n.parent;for(;s&&i===0;)i=keys(s.component.selection).length,s=s.parent;return i?{interactive:t>0||n.mark==="geoshape"||!!n.encoding.tooltip||!!n.markDef.tooltip}:null}class UnitModel extends ModelWithField{constructor(t,i,s,o={},f){super(t,"unit",i,s,f,void 0,isFrameMixins(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=_=>{var k,P,L;return(k=_.from)!=null&&k.data&&(_.from.data=this.lookupDataSource(_.from.data),"time"in this.encoding&&(_.from.data=_.from.data+CURR)),(L=(P=_.from)==null?void 0:P.facet)!=null&&L.data&&(_.from.facet.data=this.lookupDataSource(_.from.facet.data)),_};const d=isMarkDef(t.mark)?{...t.mark}:{type:t.mark},p=d.type;d.filled===void 0&&(d.filled=defaultFilled(d,f,{graticule:t.data&&isGraticuleGenerator(t.data)}));const v=this.encoding=initEncoding(t.encoding||{},p,d.filled,f);this.markDef=initMarkdef(d,v,f),this.size=initLayoutSize({encoding:v,size:isFrameMixins(t)?{...o,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:o}),this.stack=stack(this.markDef,v),this.specifiedScales=this.initScales(p,v),this.specifiedAxes=this.initAxes(v),this.specifiedLegends=this.initLegends(v),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(_=>isSelectionParameter(_))}get hasProjection(){const{encoding:t}=this,i=this.mark===GEOSHAPE,s=t&&GEOPOSITION_CHANNELS.some(o=>isFieldOrDatumDef(t[o]));return i||s}scaleDomain(t){const i=this.specifiedScales[t];return i?i.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,i){return SCALE_CHANNELS.reduce((s,o)=>{const f=getFieldOrDatumDef(i[o]);return f&&(s[o]=this.initScale(f.scale??{})),s},{})}initScale(t){const{domain:i,range:s}=t,o=replaceExprRef(t);return isArray(i)&&(o.domain=i.map(signalRefOrValue)),isArray(s)&&(o.range=s.map(signalRefOrValue)),o}initAxes(t){return POSITION_SCALE_CHANNELS.reduce((i,s)=>{const o=t[s];if(isFieldOrDatumDef(o)||s===X$1&&isFieldOrDatumDef(t.x2)||s===Y$1&&isFieldOrDatumDef(t.y2)){const f=isFieldOrDatumDef(o)?o.axis:void 0;i[s]=f&&this.initAxis({...f})}return i},{})}initAxis(t){const i=keys(t),s={};for(const o of i){const f=t[o];s[o]=isConditionalAxisValue(f)?signalOrValueRefWithCondition(f):signalRefOrValue(f)}return s}initLegends(t){return NONPOSITION_SCALE_CHANNELS.reduce((i,s)=>{const o=getFieldOrDatumDef(t[s]);if(o&&supportLegend(s)){const f=o.legend;i[s]=f&&replaceExprRef(f)}return i},{})}parseData(){this.component.data=parseData(this)}parseLayoutSize(){parseUnitLayoutSize(this)}parseSelections(){this.component.selection=parseUnitSelection(this,this.selection)}parseMarkGroup(){this.component.mark=parseMarkGroups(this)}parseAxesAndHeaders(){this.component.axes=parseUnitAxes(this)}assembleSelectionTopLevelSignals(t){return assembleTopLevelSignals(this,t)}assembleSignals(){return[...assembleAxisSignals(this),...assembleUnitSelectionSignals(this,[])]}assembleSelectionData(t){return assembleUnitSelectionData(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return assembleLayoutSignals(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!isLayerModel(this.parent))&&(t=assembleUnitSelectionMarks(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return channelHasField(this.encoding,t)}fieldDef(t){const i=this.encoding[t];return getFieldDef(i)}typedFieldDef(t){const i=this.fieldDef(t);return isTypedFieldDef(i)?i:null}}class LayerModel extends Model{constructor(t,i,s,o,f){super(t,"layer",i,s,f,t.resolve,t.view);const d={...o,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((p,v)=>{if(isLayerSpec(p))return new LayerModel(p,this,this.getName(`layer_${v}`),d,f);if(isUnitSpec(p))return new UnitModel(p,this,this.getName(`layer_${v}`),d,f);throw new Error(invalidSpec(p))})}parseData(){this.component.data=parseData(this);for(const t of this.children)t.parseData()}parseLayoutSize(){parseLayerLayoutSize(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const i of keys(t.component.selection))this.component.selection[i]=t.component.selection[i]}Object.values(this.component.selection).some(t=>isTimerSelection(t))&&error(MULTI_VIEW_ANIMATION_UNSUPPORTED)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){parseLayerAxes(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((i,s)=>s.assembleSelectionTopLevelSignals(i),t)}assembleSignals(){return this.children.reduce((t,i)=>t.concat(i.assembleSignals()),assembleAxisSignals(this))}assembleLayoutSignals(){return this.children.reduce((t,i)=>t.concat(i.assembleLayoutSignals()),assembleLayoutSignals(this))}assembleSelectionData(t){return this.children.reduce((i,s)=>s.assembleSelectionData(i),t)}assembleGroupStyle(){const t=new Set;for(const s of this.children)for(const o of array$5(s.assembleGroupStyle()))t.add(o);const i=Array.from(t);return i.length>1?i:i.length===1?i[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const i of this.children)if(t=i.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return assembleLayerSelectionMarks(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,i)=>t.concat(i.assembleLegends()),assembleLegends(this))}}function buildModel(n,t,i,s,o){if(isFacetSpec(n))return new FacetModel(n,t,i,o);if(isLayerSpec(n))return new LayerModel(n,t,i,s,o);if(isUnitSpec(n))return new UnitModel(n,t,i,s,o);if(isAnyConcatSpec(n))return new ConcatModel(n,t,i,o);throw new Error(invalidSpec(n))}function compile(n,t={}){t.logger&&set(t.logger),t.fieldTitle&&setTitleFormatter(t.fieldTitle);try{const i=initConfig(mergeConfig(t.config,n.config)),s=normalize(n,i),o=buildModel(s,null,"",void 0,i);return o.parse(),optimizeDataflow(o.component.data,o),{spec:assembleTopLevelModel(o,getTopLevelProperties(n,s.autosize,i,o),n.datasets,n.usermeta),normalized:s}}finally{t.logger&&reset(),t.fieldTitle&&resetTitleFormatter()}}function getTopLevelProperties(n,t,i,s){const o=s.component.layoutSize.get("width"),f=s.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},s.hasAxisOrientSignalRef()&&(t.resize=!0)):isString(t)&&(t={type:t}),o&&f&&isFitType(t.type)){if(o==="step"&&f==="step")warn(droppingFit()),t.type="pad";else if(o==="step"||f==="step"){const d=o==="step"?"width":"height";warn(droppingFit(getPositionScaleChannel(d)));const p=d==="width"?"height":"width";t.type=getFitType(p)}}return{...keys(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...extractTopLevelProperties(i,!1),...extractTopLevelProperties(n,!0)}}function assembleTopLevelModel(n,t,i={},s){const o=n.config?stripAndRedirectConfig(n.config):void 0,f=assembleRootData(n.component.data,i),d=n.assembleSelectionData(f),p=n.assembleProjections(),v=n.assembleTitle(),_=n.assembleGroupStyle(),k=n.assembleGroupEncodeEntry(!0);let P=n.assembleLayoutSignals();P=P.filter(Z=>(Z.name==="width"||Z.name==="height")&&Z.value!==void 0?(t[Z.name]=+Z.value,!1):!0);const{params:L,...G}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...n.description?{description:n.description}:{},...G,...v?{title:v}:{},..._?{style:_}:{},...k?{encode:{update:k}}:{},data:d,...p.length>0?{projections:p}:{},...n.assembleGroup([...P,...n.assembleSelectionTopLevelSignals([]),...assembleParameterSignals(L)]),...o?{config:o}:{},...s?{usermeta:s}:{}}}const version$3=pkg$1.version,vegaLiteImport=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth,accessPathWithDatum,accessWithDatumToUnescapedPath,compile,contains,deepEqual,deleteNestedProperty,duplicate,entries:entries$1,every,fieldIntersection,flatAccessWithDatum,getFirstDefined,hasIntersection,hasProperty,hash,internalField,isBoolean,isEmpty,isEqual,isInternalField,isNullOrFalse,isNumeric,keys,logicalExpr,mergeDeep:mergeDeep$1,never,normalize,normalizeAngle,omit,pick,prefixGenerator,removePathFromField,replaceAll,replacePathInField,resetIdCounter,setEqual,some,stringify,titleCase,unique,uniqueId,vals,varName,version:version$3},Symbol.toStringTag,{value:"Module"}));function e(n){const[t,i]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(n).slice(1,3);return{library:t,version:i}}var version$1="2.15.0",pkg={version:version$1};const lightColor="#fff",medColor="#888",darkTheme={background:"#333",view:{stroke:medColor},title:{color:lightColor,subtitleColor:lightColor},style:{"guide-label":{fill:lightColor},"guide-title":{fill:lightColor}},axis:{domainColor:lightColor,gridColor:medColor,tickColor:lightColor}},markColor$7="#4572a7",excelTheme={background:"#fff",arc:{fill:markColor$7},area:{fill:markColor$7},line:{stroke:markColor$7,strokeWidth:2},path:{stroke:markColor$7},rect:{fill:markColor$7},shape:{stroke:markColor$7},symbol:{fill:markColor$7,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},markColor$6="#30a2da",axisColor$2="#cbcbcb",guideLabelColor="#999",guideTitleColor="#333",backgroundColor$2="#f0f0f0",blackTitle="#333",fiveThirtyEightTheme={arc:{fill:markColor$6},area:{fill:markColor$6},axis:{domainColor:axisColor$2,grid:!0,gridColor:axisColor$2,gridWidth:1,labelColor:guideLabelColor,labelFontSize:10,titleColor:guideTitleColor,tickColor:axisColor$2,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:backgroundColor$2,group:{fill:backgroundColor$2},legend:{labelColor:blackTitle,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:blackTitle,titleFontSize:14,titlePadding:10},line:{stroke:markColor$6,strokeWidth:2},path:{stroke:markColor$6,strokeWidth:.5},rect:{fill:markColor$6},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:markColor$6},bar:{binSpacing:2,fill:markColor$6,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},markColor$5="#000",ggplot2Theme={group:{fill:"#e5e5e5"},arc:{fill:markColor$5},area:{fill:markColor$5},line:{stroke:markColor$5},path:{stroke:markColor$5},rect:{fill:markColor$5},shape:{stroke:markColor$5},symbol:{fill:markColor$5,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},headlineFontSize=22,headlineFontWeight="normal",labelFont$1="Benton Gothic, sans-serif",labelFontSize=11.5,labelFontWeight="normal",markColor$4="#82c6df",titleFont="Benton Gothic Bold, sans-serif",titleFontWeight="normal",titleFontSize$1=13,colorSchemes$1={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},latimesTheme={background:"#ffffff",title:{anchor:"start",color:"#000000",font:titleFont,fontSize:headlineFontSize,fontWeight:headlineFontWeight},arc:{fill:markColor$4},area:{fill:markColor$4},line:{stroke:markColor$4,strokeWidth:2},path:{stroke:markColor$4},rect:{fill:markColor$4},shape:{stroke:markColor$4},symbol:{fill:markColor$4,size:30},axis:{labelFont:labelFont$1,labelFontSize,labelFontWeight,titleFont,titleFontSize:titleFontSize$1,titleFontWeight},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:labelFont$1,labelFontSize,symbolType:"square",titleFont,titleFontSize:titleFontSize$1,titleFontWeight},range:{category:colorSchemes$1["category-6"],diverging:colorSchemes$1["fireandice-6"],heatmap:colorSchemes$1["fire-7"],ordinal:colorSchemes$1["fire-7"],ramp:colorSchemes$1["fire-7"]}},markColor$3="#ab5787",axisColor$1="#979797",quartzTheme={background:"#f9f9f9",arc:{fill:markColor$3},area:{fill:markColor$3},line:{stroke:markColor$3},path:{stroke:markColor$3},rect:{fill:markColor$3},shape:{stroke:markColor$3},symbol:{fill:markColor$3,size:30},axis:{domainColor:axisColor$1,domainWidth:.5,gridWidth:.2,labelColor:axisColor$1,tickColor:axisColor$1,tickWidth:.2,titleColor:axisColor$1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},markColor$2="#3e5c69",voxTheme={background:"#fff",arc:{fill:markColor$2},area:{fill:markColor$2},line:{stroke:markColor$2},path:{stroke:markColor$2},rect:{fill:markColor$2},shape:{stroke:markColor$2},symbol:{fill:markColor$2},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},markColor$1="#1696d2",axisColor="#000000",backgroundColor$1="#FFFFFF",font="Lato",labelFont="Lato",sourceFont="Lato",gridColor$1="#DEDDDD",titleFontSize=18,colorSchemes={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},urbanInstituteTheme={background:backgroundColor$1,title:{anchor:"start",fontSize:titleFontSize,font},axisX:{domain:!0,domainColor:axisColor,domainWidth:1,grid:!1,labelFontSize:12,labelFont,labelAngle:0,tickColor:axisColor,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:font},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:gridColor$1,gridWidth:1,labelFontSize:12,labelFont,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:font,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:font,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:colorSchemes["six-groups-cat-1"],diverging:colorSchemes["diverging-colors"],heatmap:colorSchemes["diverging-colors"],ordinal:colorSchemes["six-groups-seq"],ramp:colorSchemes["shades-blue"]},area:{fill:markColor$1},rect:{fill:markColor$1},line:{color:markColor$1,stroke:markColor$1,strokeWidth:5},trail:{color:markColor$1,stroke:markColor$1,strokeWidth:0,size:1},path:{stroke:markColor$1,strokeWidth:.5},point:{filled:!0},text:{font:sourceFont,color:markColor$1,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:markColor$1,stroke:null}},arc:{fill:markColor$1},shape:{stroke:markColor$1},symbol:{fill:markColor$1,size:30}},markColor="#3366CC",gridColor="#ccc",defaultFont$1="Arial, sans-serif",googlechartsTheme={arc:{fill:markColor},area:{fill:markColor},path:{stroke:markColor},rect:{fill:markColor},shape:{stroke:markColor},symbol:{stroke:markColor},circle:{fill:markColor},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:defaultFont$1,fontSize:12},"guide-title":{font:defaultFont$1,fontSize:12},"group-title":{font:defaultFont$1,fontSize:12}},title:{font:defaultFont$1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor,tickColor:gridColor,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ptToPx=n=>n*(1/3+1),fontSmallPx=ptToPx(9),legendFontPx=ptToPx(10),fontLargePx=ptToPx(12),fontStandard="Segoe UI",fontTitle="wf_standard-font, helvetica, arial, sans-serif",firstLevelElementColor="#252423",secondLevelElementColor="#605E5C",backgroundColor="transparent",backgroundSecondaryColor="#C8C6C4",paletteColor1="#118DFF",paletteColor2="#12239E",paletteColor3="#E66C37",paletteColor4="#6B007B",paletteColor5="#E044A7",paletteColor6="#744EC2",paletteColor7="#D9B300",paletteColor8="#D64550",divergentColorMax=paletteColor1,divergentColorMin="#DEEFFF",divergentPalette=[divergentColorMin,divergentColorMax],ordinalPalette=[divergentColorMin,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",divergentColorMax],powerbiTheme={view:{stroke:backgroundColor},background:backgroundColor,font:fontStandard,header:{titleFont:fontTitle,titleFontSize:fontLargePx,titleColor:firstLevelElementColor,labelFont:fontStandard,labelFontSize:legendFontPx,labelColor:secondLevelElementColor},axis:{ticks:!1,grid:!1,domain:!1,labelColor:secondLevelElementColor,labelFontSize:fontSmallPx,titleFont:fontTitle,titleColor:firstLevelElementColor,titleFontSize:fontLargePx,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:backgroundSecondaryColor,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:paletteColor1},line:{stroke:paletteColor1,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:fontStandard,fontSize:fontSmallPx,fill:secondLevelElementColor},arc:{fill:paletteColor1},area:{fill:paletteColor1,line:!0,opacity:.6},path:{stroke:paletteColor1},rect:{fill:paletteColor1},point:{fill:paletteColor1,filled:!0,size:75},shape:{stroke:paletteColor1},symbol:{fill:paletteColor1,strokeWidth:1.5,size:50},legend:{titleFont:fontStandard,titleFontWeight:"bold",titleColor:secondLevelElementColor,labelFont:fontStandard,labelFontSize:legendFontPx,labelColor:secondLevelElementColor,symbolType:"circle",symbolSize:75},range:{category:[paletteColor1,paletteColor2,paletteColor3,paletteColor4,paletteColor5,paletteColor6,paletteColor7,paletteColor8],diverging:divergentPalette,heatmap:divergentPalette,ordinal:ordinalPalette}},defaultFont='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',condensedFont='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',fontWeight=400,TOKENS={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},darkCategories=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],lightCategories=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function genCarbonConfig({theme:n,background:t}){const i=["white","g10"].includes(n)?"light":"dark",s=TOKENS.gridBg[n],o=TOKENS.textPrimary[n],f=TOKENS.textSecondary[n],d=i==="dark"?darkCategories:lightCategories,p=i==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:p},area:{fill:p},path:{stroke:p},rect:{fill:p},shape:{stroke:p},symbol:{stroke:p},circle:{fill:p},view:{fill:s,stroke:s},group:{fill:s},title:{color:o,anchor:"start",dy:-15,fontSize:16,font:defaultFont,fontWeight:600},axis:{labelColor:f,labelFontSize:12,labelFont:condensedFont,labelFontWeight:fontWeight,titleColor:o,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:TOKENS.layerAccent01[n],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:defaultFont,fill:f,fontWeight},"guide-title":{font:defaultFont,fill:f,fontWeight}},range:{category:d,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const carbonwhite=genCarbonConfig({theme:"white",background:"#ffffff"}),carbong10=genCarbonConfig({theme:"g10",background:"#f4f4f4"}),carbong90=genCarbonConfig({theme:"g90",background:"#262626"}),carbong100=genCarbonConfig({theme:"g100",background:"#161616"}),version$2=pkg.version,themes=Object.freeze(Object.defineProperty({__proto__:null,carbong10,carbong100,carbong90,carbonwhite,dark:darkTheme,excel:excelTheme,fivethirtyeight:fiveThirtyEightTheme,ggplot2:ggplot2Theme,googlecharts:googlechartsTheme,latimes:latimesTheme,powerbi:powerbiTheme,quartz:quartzTheme,urbaninstitute:urbanInstituteTheme,version:version$2,vox:voxTheme},Symbol.toStringTag,{value:"Module"}));var define_process_env_default={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var __extends=function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var f in o)o.hasOwnProperty(f)&&(s[f]=o[f])},n(t,i)};return function(t,i){n(t,i);function s(){this.constructor=t}t.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),_hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwnProperty(n,t){return _hasOwnProperty.call(n,t)}function _objectKeys(n){if(Array.isArray(n)){for(var t=new Array(n.length),i=0;i<t.length;i++)t[i]=""+i;return t}if(Object.keys)return Object.keys(n);var s=[];for(var o in n)hasOwnProperty(n,o)&&s.push(o);return s}function _deepClone(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}function isInteger(n){for(var t=0,i=n.length,s;t<i;){if(s=n.charCodeAt(t),s>=48&&s<=57){t++;continue}return!1}return!0}function escapePathComponent(n){return n.indexOf("/")===-1&&n.indexOf("~")===-1?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapePathComponent(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}function hasUndefined(n){if(n===void 0)return!0;if(n){if(Array.isArray(n)){for(var t=0,i=n.length;t<i;t++)if(hasUndefined(n[t]))return!0}else if(typeof n=="object"){for(var s=_objectKeys(n),o=s.length,f=0;f<o;f++)if(hasUndefined(n[s[f]]))return!0}}return!1}function patchErrorMessageFormatter(n,t){var i=[n];for(var s in t){var o=typeof t[s]=="object"?JSON.stringify(t[s],null,2):t[s];typeof o<"u"&&i.push(s+": "+o)}return i.join(`
`)}var PatchError=function(n){__extends(t,n);function t(i,s,o,f,d){var p=this.constructor,v=n.call(this,patchErrorMessageFormatter(i,{name:s,index:o,operation:f,tree:d}))||this;return v.name=s,v.index=o,v.operation=f,v.tree=d,Object.setPrototypeOf(v,p.prototype),v.message=patchErrorMessageFormatter(i,{name:s,index:o,operation:f,tree:d}),v}return t}(Error),JsonPatchError=PatchError,deepClone=_deepClone,objOps={add:function(n,t,i){return n[t]=this.value,{newDocument:i}},remove:function(n,t,i){var s=n[t];return delete n[t],{newDocument:i,removed:s}},replace:function(n,t,i){var s=n[t];return n[t]=this.value,{newDocument:i,removed:s}},move:function(n,t,i){var s=getValueByPointer(i,this.path);s&&(s=_deepClone(s));var o=applyOperation(i,{op:"remove",path:this.from}).removed;return applyOperation(i,{op:"add",path:this.path,value:o}),{newDocument:i,removed:s}},copy:function(n,t,i){var s=getValueByPointer(i,this.from);return applyOperation(i,{op:"add",path:this.path,value:_deepClone(s)}),{newDocument:i}},test:function(n,t,i){return{newDocument:i,test:_areEquals(n[t],this.value)}},_get:function(n,t,i){return this.value=n[t],{newDocument:i}}},arrOps={add:function(n,t,i){return isInteger(t)?n.splice(t,0,this.value):n[t]=this.value,{newDocument:i,index:t}},remove:function(n,t,i){var s=n.splice(t,1);return{newDocument:i,removed:s[0]}},replace:function(n,t,i){var s=n[t];return n[t]=this.value,{newDocument:i,removed:s}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};function getValueByPointer(n,t){if(t=="")return n;var i={op:"_get",path:t};return applyOperation(n,i),i.value}function applyOperation(n,t,i,s,o,f){if(i===void 0&&(i=!1),s===void 0&&(s=!0),o===void 0&&(o=!0),f===void 0&&(f=0),i&&(typeof i=="function"?i(t,0,n,t.path):validator(t,0)),t.path===""){var d={newDocument:n};if(t.op==="add")return d.newDocument=t.value,d;if(t.op==="replace")return d.newDocument=t.value,d.removed=n,d;if(t.op==="move"||t.op==="copy")return d.newDocument=getValueByPointer(n,t.from),t.op==="move"&&(d.removed=n),d;if(t.op==="test"){if(d.test=_areEquals(n,t.value),d.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",f,t,n);return d.newDocument=n,d}else{if(t.op==="remove")return d.removed=n,d.newDocument=null,d;if(t.op==="_get")return t.value=n,d;if(i)throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",f,t,n);return d}}else{s||(n=_deepClone(n));var p=t.path||"",v=p.split("/"),_=n,k=1,P=v.length,L=void 0,G=void 0,Z=void 0;for(typeof i=="function"?Z=i:Z=validator;;){if(G=v[k],G&&G.indexOf("~")!=-1&&(G=unescapePathComponent(G)),o&&(G=="__proto__"||G=="prototype"&&k>0&&v[k-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(i&&L===void 0&&(_[G]===void 0?L=v.slice(0,k).join("/"):k==P-1&&(L=t.path),L!==void 0&&Z(t,0,n,L)),k++,Array.isArray(_)){if(G==="-")G=_.length;else{if(i&&!isInteger(G))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",f,t,n);isInteger(G)&&(G=~~G)}if(k>=P){if(i&&t.op==="add"&&G>_.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",f,t,n);var d=arrOps[t.op].call(t,_,G,n);if(d.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",f,t,n);return d}}else if(k>=P){var d=objOps[t.op].call(t,_,G,n);if(d.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",f,t,n);return d}if(_=_[G],i&&k<P&&(!_||typeof _!="object"))throw new JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",f,t,n)}}}function applyPatch(n,t,i,s,o){if(s===void 0&&(s=!0),o===void 0&&(o=!0),i&&!Array.isArray(t))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");s||(n=_deepClone(n));for(var f=new Array(t.length),d=0,p=t.length;d<p;d++)f[d]=applyOperation(n,t[d],i,!0,o,d),n=f[d].newDocument;return f.newDocument=n,f}function applyReducer(n,t,i){var s=applyOperation(n,t);if(s.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",i,t,n);return s.newDocument}function validator(n,t,i,s){if(typeof n!="object"||n===null||Array.isArray(n))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,n,i);if(objOps[n.op]){if(typeof n.path!="string")throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,n,i);if(n.path.indexOf("/")!==0&&n.path.length>0)throw new JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,n,i);if((n.op==="move"||n.op==="copy")&&typeof n.from!="string")throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,n,i);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n.value===void 0)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,n,i);if((n.op==="add"||n.op==="replace"||n.op==="test")&&hasUndefined(n.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,n,i);if(i){if(n.op=="add"){var o=n.path.split("/").length,f=s.split("/").length;if(o!==f+1&&o!==f)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,n,i)}else if(n.op==="replace"||n.op==="remove"||n.op==="_get"){if(n.path!==s)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,n,i)}else if(n.op==="move"||n.op==="copy"){var d={op:"_get",path:n.from,value:void 0},p=validate([d],i);if(p&&p.name==="OPERATION_PATH_UNRESOLVABLE")throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,n,i)}}}else throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,n,i)}function validate(n,t,i){try{if(!Array.isArray(n))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)applyPatch(_deepClone(t),_deepClone(n),i||!0);else{i=i||validator;for(var s=0;s<n.length;s++)i(n[s],s,t,void 0)}}catch(o){if(o instanceof JsonPatchError)return o;throw o}}function _areEquals(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){var i=Array.isArray(n),s=Array.isArray(t),o,f,d;if(i&&s){if(f=n.length,f!=t.length)return!1;for(o=f;o--!==0;)if(!_areEquals(n[o],t[o]))return!1;return!0}if(i!=s)return!1;var p=Object.keys(n);if(f=p.length,f!==Object.keys(t).length)return!1;for(o=f;o--!==0;)if(!t.hasOwnProperty(p[o]))return!1;for(o=f;o--!==0;)if(d=p[o],!_areEquals(n[d],t[d]))return!1;return!0}return n!==n&&t!==t}var core=Object.freeze({__proto__:null,JsonPatchError,_areEquals,applyOperation,applyPatch,applyReducer,deepClone,getValueByPointer,validate,validator});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var beforeDict=new WeakMap,Mirror=function(){function n(t){this.observers=new Map,this.obj=t}return n}(),ObserverInfo=function(){function n(t,i){this.callback=t,this.observer=i}return n}();function getMirror(n){return beforeDict.get(n)}function getObserverFromMirror(n,t){return n.observers.get(t)}function removeObserverFromMirror(n,t){n.observers.delete(t.callback)}function unobserve(n,t){t.unobserve()}function observe(n,t){var i=[],s,o=getMirror(n);if(!o)o=new Mirror(n),beforeDict.set(n,o);else{var f=getObserverFromMirror(o,t);s=f&&f.observer}if(s)return s;if(s={},o.value=_deepClone(n),t){s.callback=t,s.next=null;var d=function(){generate(s)},p=function(){clearTimeout(s.next),s.next=setTimeout(d)};typeof window<"u"&&(window.addEventListener("mouseup",p),window.addEventListener("keyup",p),window.addEventListener("mousedown",p),window.addEventListener("keydown",p),window.addEventListener("change",p))}return s.patches=i,s.object=n,s.unobserve=function(){generate(s),clearTimeout(s.next),removeObserverFromMirror(o,s),typeof window<"u"&&(window.removeEventListener("mouseup",p),window.removeEventListener("keyup",p),window.removeEventListener("mousedown",p),window.removeEventListener("keydown",p),window.removeEventListener("change",p))},o.observers.set(t,new ObserverInfo(t,s)),s}function generate(n,t){t===void 0&&(t=!1);var i=beforeDict.get(n.object);_generate(i.value,n.object,n.patches,"",t),n.patches.length&&applyPatch(i.value,n.patches);var s=n.patches;return s.length>0&&(n.patches=[],n.callback&&n.callback(s)),s}function _generate(n,t,i,s,o){if(t!==n){typeof t.toJSON=="function"&&(t=t.toJSON());for(var f=_objectKeys(t),d=_objectKeys(n),p=!1,v=d.length-1;v>=0;v--){var _=d[v],k=n[_];if(hasOwnProperty(t,_)&&!(t[_]===void 0&&k!==void 0&&Array.isArray(t)===!1)){var P=t[_];typeof k=="object"&&k!=null&&typeof P=="object"&&P!=null&&Array.isArray(k)===Array.isArray(P)?_generate(k,P,i,s+"/"+escapePathComponent(_),o):k!==P&&(o&&i.push({op:"test",path:s+"/"+escapePathComponent(_),value:_deepClone(k)}),i.push({op:"replace",path:s+"/"+escapePathComponent(_),value:_deepClone(P)}))}else Array.isArray(n)===Array.isArray(t)?(o&&i.push({op:"test",path:s+"/"+escapePathComponent(_),value:_deepClone(k)}),i.push({op:"remove",path:s+"/"+escapePathComponent(_)}),p=!0):(o&&i.push({op:"test",path:s,value:n}),i.push({op:"replace",path:s,value:t}))}if(!(!p&&f.length==d.length))for(var v=0;v<f.length;v++){var _=f[v];!hasOwnProperty(n,_)&&t[_]!==void 0&&i.push({op:"add",path:s+"/"+escapePathComponent(_),value:_deepClone(t[_])})}}}function compare(n,t,i){i===void 0&&(i=!1);var s=[];return _generate(n,t,s,"",i),s}var duplex=Object.freeze({__proto__:null,compare,generate,observe,unobserve});Object.assign({},core,duplex,{JsonPatchError:PatchError,deepClone:_deepClone,escapePathComponent,unescapePathComponent});function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lrucache,hasRequiredLrucache;function requireLrucache(){if(hasRequiredLrucache)return lrucache;hasRequiredLrucache=1;class n{constructor(){this.max=1e3,this.map=new Map}get(i){const s=this.map.get(i);if(s!==void 0)return this.map.delete(i),this.map.set(i,s),s}delete(i){return this.map.delete(i)}set(i,s){if(!this.delete(i)&&s!==void 0){if(this.map.size>=this.max){const f=this.map.keys().next().value;this.delete(f)}this.map.set(i,s)}return this}}return lrucache=n,lrucache}var parseOptions_1,hasRequiredParseOptions;function requireParseOptions(){if(hasRequiredParseOptions)return parseOptions_1;hasRequiredParseOptions=1;const n=Object.freeze({loose:!0}),t=Object.freeze({});return parseOptions_1=s=>s?typeof s!="object"?n:s:t,parseOptions_1}var re$1={exports:{}},constants,hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1;const n="2.0.0",t=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,o=t-6;return constants={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:o,MAX_SAFE_INTEGER:i,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},constants}var debug_1,hasRequiredDebug;function requireDebug(){return hasRequiredDebug||(hasRequiredDebug=1,debug_1=typeof process=="object"&&define_process_env_default&&define_process_env_default.NODE_DEBUG&&/\bsemver\b/i.test(define_process_env_default.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),debug_1}var hasRequiredRe;function requireRe(){return hasRequiredRe||(hasRequiredRe=1,function(n,t){const{MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:o}=requireConstants(),f=requireDebug();t=n.exports={};const d=t.re=[],p=t.safeRe=[],v=t.src=[],_=t.t={};let k=0;const P="[a-zA-Z0-9-]",L=[["\\s",1],["\\d",o],[P,s]],G=W=>{for(const[j,H]of L)W=W.split(`${j}*`).join(`${j}{0,${H}}`).split(`${j}+`).join(`${j}{1,${H}}`);return W},Z=(W,j,H)=>{const me=G(j),$e=k++;f(W,$e,j),_[W]=$e,v[$e]=j,d[$e]=new RegExp(j,H?"g":void 0),p[$e]=new RegExp(me,H?"g":void 0)};Z("NUMERICIDENTIFIER","0|[1-9]\\d*"),Z("NUMERICIDENTIFIERLOOSE","\\d+"),Z("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${P}*`),Z("MAINVERSION",`(${v[_.NUMERICIDENTIFIER]})\\.(${v[_.NUMERICIDENTIFIER]})\\.(${v[_.NUMERICIDENTIFIER]})`),Z("MAINVERSIONLOOSE",`(${v[_.NUMERICIDENTIFIERLOOSE]})\\.(${v[_.NUMERICIDENTIFIERLOOSE]})\\.(${v[_.NUMERICIDENTIFIERLOOSE]})`),Z("PRERELEASEIDENTIFIER",`(?:${v[_.NUMERICIDENTIFIER]}|${v[_.NONNUMERICIDENTIFIER]})`),Z("PRERELEASEIDENTIFIERLOOSE",`(?:${v[_.NUMERICIDENTIFIERLOOSE]}|${v[_.NONNUMERICIDENTIFIER]})`),Z("PRERELEASE",`(?:-(${v[_.PRERELEASEIDENTIFIER]}(?:\\.${v[_.PRERELEASEIDENTIFIER]})*))`),Z("PRERELEASELOOSE",`(?:-?(${v[_.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${v[_.PRERELEASEIDENTIFIERLOOSE]})*))`),Z("BUILDIDENTIFIER",`${P}+`),Z("BUILD",`(?:\\+(${v[_.BUILDIDENTIFIER]}(?:\\.${v[_.BUILDIDENTIFIER]})*))`),Z("FULLPLAIN",`v?${v[_.MAINVERSION]}${v[_.PRERELEASE]}?${v[_.BUILD]}?`),Z("FULL",`^${v[_.FULLPLAIN]}$`),Z("LOOSEPLAIN",`[v=\\s]*${v[_.MAINVERSIONLOOSE]}${v[_.PRERELEASELOOSE]}?${v[_.BUILD]}?`),Z("LOOSE",`^${v[_.LOOSEPLAIN]}$`),Z("GTLT","((?:<|>)?=?)"),Z("XRANGEIDENTIFIERLOOSE",`${v[_.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),Z("XRANGEIDENTIFIER",`${v[_.NUMERICIDENTIFIER]}|x|X|\\*`),Z("XRANGEPLAIN",`[v=\\s]*(${v[_.XRANGEIDENTIFIER]})(?:\\.(${v[_.XRANGEIDENTIFIER]})(?:\\.(${v[_.XRANGEIDENTIFIER]})(?:${v[_.PRERELEASE]})?${v[_.BUILD]}?)?)?`),Z("XRANGEPLAINLOOSE",`[v=\\s]*(${v[_.XRANGEIDENTIFIERLOOSE]})(?:\\.(${v[_.XRANGEIDENTIFIERLOOSE]})(?:\\.(${v[_.XRANGEIDENTIFIERLOOSE]})(?:${v[_.PRERELEASELOOSE]})?${v[_.BUILD]}?)?)?`),Z("XRANGE",`^${v[_.GTLT]}\\s*${v[_.XRANGEPLAIN]}$`),Z("XRANGELOOSE",`^${v[_.GTLT]}\\s*${v[_.XRANGEPLAINLOOSE]}$`),Z("COERCEPLAIN",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?`),Z("COERCE",`${v[_.COERCEPLAIN]}(?:$|[^\\d])`),Z("COERCEFULL",v[_.COERCEPLAIN]+`(?:${v[_.PRERELEASE]})?(?:${v[_.BUILD]})?(?:$|[^\\d])`),Z("COERCERTL",v[_.COERCE],!0),Z("COERCERTLFULL",v[_.COERCEFULL],!0),Z("LONETILDE","(?:~>?)"),Z("TILDETRIM",`(\\s*)${v[_.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",Z("TILDE",`^${v[_.LONETILDE]}${v[_.XRANGEPLAIN]}$`),Z("TILDELOOSE",`^${v[_.LONETILDE]}${v[_.XRANGEPLAINLOOSE]}$`),Z("LONECARET","(?:\\^)"),Z("CARETTRIM",`(\\s*)${v[_.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",Z("CARET",`^${v[_.LONECARET]}${v[_.XRANGEPLAIN]}$`),Z("CARETLOOSE",`^${v[_.LONECARET]}${v[_.XRANGEPLAINLOOSE]}$`),Z("COMPARATORLOOSE",`^${v[_.GTLT]}\\s*(${v[_.LOOSEPLAIN]})$|^$`),Z("COMPARATOR",`^${v[_.GTLT]}\\s*(${v[_.FULLPLAIN]})$|^$`),Z("COMPARATORTRIM",`(\\s*)${v[_.GTLT]}\\s*(${v[_.LOOSEPLAIN]}|${v[_.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",Z("HYPHENRANGE",`^\\s*(${v[_.XRANGEPLAIN]})\\s+-\\s+(${v[_.XRANGEPLAIN]})\\s*$`),Z("HYPHENRANGELOOSE",`^\\s*(${v[_.XRANGEPLAINLOOSE]})\\s+-\\s+(${v[_.XRANGEPLAINLOOSE]})\\s*$`),Z("STAR","(<|>)?=?\\s*\\*"),Z("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),Z("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(re$1,re$1.exports)),re$1.exports}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){if(hasRequiredIdentifiers)return identifiers;hasRequiredIdentifiers=1;const n=/^[0-9]+$/,t=(s,o)=>{const f=n.test(s),d=n.test(o);return f&&d&&(s=+s,o=+o),s===o?0:f&&!d?-1:d&&!f?1:s<o?-1:1};return identifiers={compareIdentifiers:t,rcompareIdentifiers:(s,o)=>t(o,s)},identifiers}var semver,hasRequiredSemver;function requireSemver(){if(hasRequiredSemver)return semver;hasRequiredSemver=1;const n=requireDebug(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:i}=requireConstants(),{safeRe:s,t:o}=requireRe(),f=requireParseOptions(),{compareIdentifiers:d}=requireIdentifiers();class p{constructor(_,k){if(k=f(k),_ instanceof p){if(_.loose===!!k.loose&&_.includePrerelease===!!k.includePrerelease)return _;_=_.version}else if(typeof _!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof _}".`);if(_.length>t)throw new TypeError(`version is longer than ${t} characters`);n("SemVer",_,k),this.options=k,this.loose=!!k.loose,this.includePrerelease=!!k.includePrerelease;const P=_.trim().match(k.loose?s[o.LOOSE]:s[o.FULL]);if(!P)throw new TypeError(`Invalid Version: ${_}`);if(this.raw=_,this.major=+P[1],this.minor=+P[2],this.patch=+P[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");P[4]?this.prerelease=P[4].split(".").map(L=>{if(/^[0-9]+$/.test(L)){const G=+L;if(G>=0&&G<i)return G}return L}):this.prerelease=[],this.build=P[5]?P[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(_){if(n("SemVer.compare",this.version,this.options,_),!(_ instanceof p)){if(typeof _=="string"&&_===this.version)return 0;_=new p(_,this.options)}return _.version===this.version?0:this.compareMain(_)||this.comparePre(_)}compareMain(_){return _ instanceof p||(_=new p(_,this.options)),d(this.major,_.major)||d(this.minor,_.minor)||d(this.patch,_.patch)}comparePre(_){if(_ instanceof p||(_=new p(_,this.options)),this.prerelease.length&&!_.prerelease.length)return-1;if(!this.prerelease.length&&_.prerelease.length)return 1;if(!this.prerelease.length&&!_.prerelease.length)return 0;let k=0;do{const P=this.prerelease[k],L=_.prerelease[k];if(n("prerelease compare",k,P,L),P===void 0&&L===void 0)return 0;if(L===void 0)return 1;if(P===void 0)return-1;if(P===L)continue;return d(P,L)}while(++k)}compareBuild(_){_ instanceof p||(_=new p(_,this.options));let k=0;do{const P=this.build[k],L=_.build[k];if(n("build compare",k,P,L),P===void 0&&L===void 0)return 0;if(L===void 0)return 1;if(P===void 0)return-1;if(P===L)continue;return d(P,L)}while(++k)}inc(_,k,P){switch(_){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",k,P);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",k,P);break;case"prepatch":this.prerelease.length=0,this.inc("patch",k,P),this.inc("pre",k,P);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",k,P),this.inc("pre",k,P);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const L=Number(P)?1:0;if(!k&&P===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[L];else{let G=this.prerelease.length;for(;--G>=0;)typeof this.prerelease[G]=="number"&&(this.prerelease[G]++,G=-2);if(G===-1){if(k===this.prerelease.join(".")&&P===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(L)}}if(k){let G=[k,L];P===!1&&(G=[k]),d(this.prerelease[0],k)===0?isNaN(this.prerelease[1])&&(this.prerelease=G):this.prerelease=G}break}default:throw new Error(`invalid increment argument: ${_}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return semver=p,semver}var compare_1,hasRequiredCompare;function requireCompare(){if(hasRequiredCompare)return compare_1;hasRequiredCompare=1;const n=requireSemver();return compare_1=(i,s,o)=>new n(i,o).compare(new n(s,o)),compare_1}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;const n=requireCompare();return eq_1=(i,s,o)=>n(i,s,o)===0,eq_1}var neq_1,hasRequiredNeq;function requireNeq(){if(hasRequiredNeq)return neq_1;hasRequiredNeq=1;const n=requireCompare();return neq_1=(i,s,o)=>n(i,s,o)!==0,neq_1}var gt_1,hasRequiredGt;function requireGt(){if(hasRequiredGt)return gt_1;hasRequiredGt=1;const n=requireCompare();return gt_1=(i,s,o)=>n(i,s,o)>0,gt_1}var gte_1,hasRequiredGte;function requireGte(){if(hasRequiredGte)return gte_1;hasRequiredGte=1;const n=requireCompare();return gte_1=(i,s,o)=>n(i,s,o)>=0,gte_1}var lt_1,hasRequiredLt;function requireLt(){if(hasRequiredLt)return lt_1;hasRequiredLt=1;const n=requireCompare();return lt_1=(i,s,o)=>n(i,s,o)<0,lt_1}var lte_1,hasRequiredLte;function requireLte(){if(hasRequiredLte)return lte_1;hasRequiredLte=1;const n=requireCompare();return lte_1=(i,s,o)=>n(i,s,o)<=0,lte_1}var cmp_1,hasRequiredCmp;function requireCmp(){if(hasRequiredCmp)return cmp_1;hasRequiredCmp=1;const n=requireEq(),t=requireNeq(),i=requireGt(),s=requireGte(),o=requireLt(),f=requireLte();return cmp_1=(p,v,_,k)=>{switch(v){case"===":return typeof p=="object"&&(p=p.version),typeof _=="object"&&(_=_.version),p===_;case"!==":return typeof p=="object"&&(p=p.version),typeof _=="object"&&(_=_.version),p!==_;case"":case"=":case"==":return n(p,_,k);case"!=":return t(p,_,k);case">":return i(p,_,k);case">=":return s(p,_,k);case"<":return o(p,_,k);case"<=":return f(p,_,k);default:throw new TypeError(`Invalid operator: ${v}`)}},cmp_1}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const n=Symbol("SemVer ANY");class t{static get ANY(){return n}constructor(k,P){if(P=i(P),k instanceof t){if(k.loose===!!P.loose)return k;k=k.value}k=k.trim().split(/\s+/).join(" "),d("comparator",k,P),this.options=P,this.loose=!!P.loose,this.parse(k),this.semver===n?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}parse(k){const P=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],L=k.match(P);if(!L)throw new TypeError(`Invalid comparator: ${k}`);this.operator=L[1]!==void 0?L[1]:"",this.operator==="="&&(this.operator=""),L[2]?this.semver=new p(L[2],this.options.loose):this.semver=n}toString(){return this.value}test(k){if(d("Comparator.test",k,this.options.loose),this.semver===n||k===n)return!0;if(typeof k=="string")try{k=new p(k,this.options)}catch{return!1}return f(k,this.operator,this.semver,this.options)}intersects(k,P){if(!(k instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new v(k.value,P).test(this.value):k.operator===""?k.value===""?!0:new v(this.value,P).test(k.semver):(P=i(P),P.includePrerelease&&(this.value==="<0.0.0-0"||k.value==="<0.0.0-0")||!P.includePrerelease&&(this.value.startsWith("<0.0.0")||k.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&k.operator.startsWith(">")||this.operator.startsWith("<")&&k.operator.startsWith("<")||this.semver.version===k.semver.version&&this.operator.includes("=")&&k.operator.includes("=")||f(this.semver,"<",k.semver,P)&&this.operator.startsWith(">")&&k.operator.startsWith("<")||f(this.semver,">",k.semver,P)&&this.operator.startsWith("<")&&k.operator.startsWith(">")))}}comparator=t;const i=requireParseOptions(),{safeRe:s,t:o}=requireRe(),f=requireCmp(),d=requireDebug(),p=requireSemver(),v=requireRange();return comparator}var range,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range;hasRequiredRange=1;const n=/\s+/g;class t{constructor(_s,Sa){if(Sa=o(Sa),_s instanceof t)return _s.loose===!!Sa.loose&&_s.includePrerelease===!!Sa.includePrerelease?_s:new t(_s.raw,Sa);if(_s instanceof f)return this.raw=_s.value,this.set=[[_s]],this.formatted=void 0,this;if(this.options=Sa,this.loose=!!Sa.loose,this.includePrerelease=!!Sa.includePrerelease,this.raw=_s.trim().replace(n," "),this.set=this.raw.split("||").map(Ra=>this.parseRange(Ra.trim())).filter(Ra=>Ra.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const Ra=this.set[0];if(this.set=this.set.filter(Da=>!W(Da[0])),this.set.length===0)this.set=[Ra];else if(this.set.length>1){for(const Da of this.set)if(Da.length===1&&j(Da[0])){this.set=[Da];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let _s=0;_s<this.set.length;_s++){_s>0&&(this.formatted+="||");const Sa=this.set[_s];for(let Ra=0;Ra<Sa.length;Ra++)Ra>0&&(this.formatted+=" "),this.formatted+=Sa[Ra].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(_s){const Ra=((this.options.includePrerelease&&G)|(this.options.loose&&Z))+":"+_s,Da=s.get(Ra);if(Da)return Da;const Fa=this.options.loose,Na=Fa?v[_.HYPHENRANGELOOSE]:v[_.HYPHENRANGE];_s=_s.replace(Na,oa(this.options.includePrerelease)),d("hyphen replace",_s),_s=_s.replace(v[_.COMPARATORTRIM],k),d("comparator trim",_s),_s=_s.replace(v[_.TILDETRIM],P),d("tilde trim",_s),_s=_s.replace(v[_.CARETTRIM],L),d("caret trim",_s);let _a=_s.split(" ").map(_h=>me(_h,this.options)).join(" ").split(/\s+/).map(_h=>_l(_h,this.options));Fa&&(_a=_a.filter(_h=>(d("loose invalid filter",_h,this.options),!!_h.match(v[_.COMPARATORLOOSE])))),d("range list",_a);const Pa=new Map,qc=_a.map(_h=>new f(_h,this.options));for(const _h of qc){if(W(_h))return[_h];Pa.set(_h.value,_h)}Pa.size>1&&Pa.has("")&&Pa.delete("");const uf=[...Pa.values()];return s.set(Ra,uf),uf}intersects(_s,Sa){if(!(_s instanceof t))throw new TypeError("a Range is required");return this.set.some(Ra=>H(Ra,Sa)&&_s.set.some(Da=>H(Da,Sa)&&Ra.every(Fa=>Da.every(Na=>Fa.intersects(Na,Sa)))))}test(_s){if(!_s)return!1;if(typeof _s=="string")try{_s=new p(_s,this.options)}catch{return!1}for(let Sa=0;Sa<this.set.length;Sa++)if(Ru(this.set[Sa],_s,this.options))return!0;return!1}}range=t;const i=requireLrucache(),s=new i,o=requireParseOptions(),f=requireComparator(),d=requireDebug(),p=requireSemver(),{safeRe:v,t:_,comparatorTrimReplace:k,tildeTrimReplace:P,caretTrimReplace:L}=requireRe(),{FLAG_INCLUDE_PRERELEASE:G,FLAG_LOOSE:Z}=requireConstants(),W=ga=>ga.value==="<0.0.0-0",j=ga=>ga.value==="",H=(ga,_s)=>{let Sa=!0;const Ra=ga.slice();let Da=Ra.pop();for(;Sa&&Ra.length;)Sa=Ra.every(Fa=>Da.intersects(Fa,_s)),Da=Ra.pop();return Sa},me=(ga,_s)=>(d("comp",ga,_s),ga=Ce(ga,_s),d("caret",ga),ga=De(ga,_s),d("tildes",ga),ga=_n(ga,_s),d("xrange",ga),ga=ll(ga,_s),d("stars",ga),ga),$e=ga=>!ga||ga.toLowerCase()==="x"||ga==="*",De=(ga,_s)=>ga.trim().split(/\s+/).map(Sa=>le(Sa,_s)).join(" "),le=(ga,_s)=>{const Sa=_s.loose?v[_.TILDELOOSE]:v[_.TILDE];return ga.replace(Sa,(Ra,Da,Fa,Na,_a)=>{d("tilde",ga,Ra,Da,Fa,Na,_a);let Pa;return $e(Da)?Pa="":$e(Fa)?Pa=`>=${Da}.0.0 <${+Da+1}.0.0-0`:$e(Na)?Pa=`>=${Da}.${Fa}.0 <${Da}.${+Fa+1}.0-0`:_a?(d("replaceTilde pr",_a),Pa=`>=${Da}.${Fa}.${Na}-${_a} <${Da}.${+Fa+1}.0-0`):Pa=`>=${Da}.${Fa}.${Na} <${Da}.${+Fa+1}.0-0`,d("tilde return",Pa),Pa})},Ce=(ga,_s)=>ga.trim().split(/\s+/).map(Sa=>Me(Sa,_s)).join(" "),Me=(ga,_s)=>{d("caret",ga,_s);const Sa=_s.loose?v[_.CARETLOOSE]:v[_.CARET],Ra=_s.includePrerelease?"-0":"";return ga.replace(Sa,(Da,Fa,Na,_a,Pa)=>{d("caret",ga,Da,Fa,Na,_a,Pa);let qc;return $e(Fa)?qc="":$e(Na)?qc=`>=${Fa}.0.0${Ra} <${+Fa+1}.0.0-0`:$e(_a)?Fa==="0"?qc=`>=${Fa}.${Na}.0${Ra} <${Fa}.${+Na+1}.0-0`:qc=`>=${Fa}.${Na}.0${Ra} <${+Fa+1}.0.0-0`:Pa?(d("replaceCaret pr",Pa),Fa==="0"?Na==="0"?qc=`>=${Fa}.${Na}.${_a}-${Pa} <${Fa}.${Na}.${+_a+1}-0`:qc=`>=${Fa}.${Na}.${_a}-${Pa} <${Fa}.${+Na+1}.0-0`:qc=`>=${Fa}.${Na}.${_a}-${Pa} <${+Fa+1}.0.0-0`):(d("no pr"),Fa==="0"?Na==="0"?qc=`>=${Fa}.${Na}.${_a}${Ra} <${Fa}.${Na}.${+_a+1}-0`:qc=`>=${Fa}.${Na}.${_a}${Ra} <${Fa}.${+Na+1}.0-0`:qc=`>=${Fa}.${Na}.${_a} <${+Fa+1}.0.0-0`),d("caret return",qc),qc})},_n=(ga,_s)=>(d("replaceXRanges",ga,_s),ga.split(/\s+/).map(Sa=>_i(Sa,_s)).join(" ")),_i=(ga,_s)=>{ga=ga.trim();const Sa=_s.loose?v[_.XRANGELOOSE]:v[_.XRANGE];return ga.replace(Sa,(Ra,Da,Fa,Na,_a,Pa)=>{d("xRange",ga,Ra,Da,Fa,Na,_a,Pa);const qc=$e(Fa),uf=qc||$e(Na),_h=uf||$e(_a),Uh=_h;return Da==="="&&Uh&&(Da=""),Pa=_s.includePrerelease?"-0":"",qc?Da===">"||Da==="<"?Ra="<0.0.0-0":Ra="*":Da&&Uh?(uf&&(Na=0),_a=0,Da===">"?(Da=">=",uf?(Fa=+Fa+1,Na=0,_a=0):(Na=+Na+1,_a=0)):Da==="<="&&(Da="<",uf?Fa=+Fa+1:Na=+Na+1),Da==="<"&&(Pa="-0"),Ra=`${Da+Fa}.${Na}.${_a}${Pa}`):uf?Ra=`>=${Fa}.0.0${Pa} <${+Fa+1}.0.0-0`:_h&&(Ra=`>=${Fa}.${Na}.0${Pa} <${Fa}.${+Na+1}.0-0`),d("xRange return",Ra),Ra})},ll=(ga,_s)=>(d("replaceStars",ga,_s),ga.trim().replace(v[_.STAR],"")),_l=(ga,_s)=>(d("replaceGTE0",ga,_s),ga.trim().replace(v[_s.includePrerelease?_.GTE0PRE:_.GTE0],"")),oa=ga=>(_s,Sa,Ra,Da,Fa,Na,_a,Pa,qc,uf,_h,Uh)=>($e(Ra)?Sa="":$e(Da)?Sa=`>=${Ra}.0.0${ga?"-0":""}`:$e(Fa)?Sa=`>=${Ra}.${Da}.0${ga?"-0":""}`:Na?Sa=`>=${Sa}`:Sa=`>=${Sa}${ga?"-0":""}`,$e(qc)?Pa="":$e(uf)?Pa=`<${+qc+1}.0.0-0`:$e(_h)?Pa=`<${qc}.${+uf+1}.0-0`:Uh?Pa=`<=${qc}.${uf}.${_h}-${Uh}`:ga?Pa=`<${qc}.${uf}.${+_h+1}-0`:Pa=`<=${Pa}`,`${Sa} ${Pa}`.trim()),Ru=(ga,_s,Sa)=>{for(let Ra=0;Ra<ga.length;Ra++)if(!ga[Ra].test(_s))return!1;if(_s.prerelease.length&&!Sa.includePrerelease){for(let Ra=0;Ra<ga.length;Ra++)if(d(ga[Ra].semver),ga[Ra].semver!==f.ANY&&ga[Ra].semver.prerelease.length>0){const Da=ga[Ra].semver;if(Da.major===_s.major&&Da.minor===_s.minor&&Da.patch===_s.patch)return!0}return!1}return!0};return range}var satisfies_1,hasRequiredSatisfies;function requireSatisfies(){if(hasRequiredSatisfies)return satisfies_1;hasRequiredSatisfies=1;const n=requireRange();return satisfies_1=(i,s,o)=>{try{s=new n(s,o)}catch{return!1}return s.test(i)},satisfies_1}var satisfiesExports=requireSatisfies(),satisfies=getDefaultExportFromCjs(satisfiesExports);function post(n,t,i){const s=n.open(t),o=250,{origin:f}=new URL(t);let d=40;function p(_){_.source===s&&(d=0,n.removeEventListener("message",p,!1))}n.addEventListener("message",p,!1);function v(){d<=0||(s.postMessage(i,f),setTimeout(v,o),d-=1)}setTimeout(v,o)}var embedStyle=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function mergeDeep(n,...t){for(const i of t)deepMerge_(n,i);return n}function deepMerge_(n,t){for(const i of Object.keys(t))writeConfig(n,i,t[i],!0)}const vega=vegaImport;let vegaLite=vegaLiteImport;const w$1=typeof window<"u"?window:void 0;var Cue;vegaLite===void 0&&((Cue=w$1==null?void 0:w$1.vl)!=null&&Cue.compile)&&(vegaLite=w$1.vl);const DEFAULT_ACTIONS={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},I18N={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},NAMES={vega:"Vega","vega-lite":"Vega-Lite"},VERSION={vega:vega.version,"vega-lite":vegaLite?vegaLite.version:"not available"},PREPROCESSOR={vega:n=>n,"vega-lite":(n,t)=>vegaLite.compile(n,{config:t}).spec},SVG_CIRCLES=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,CHART_WRAPPER_CLASS="chart-wrapper";function isTooltipHandler(n){return typeof n=="function"}function viewSource(n,t,i,s){const o=`<html><head>${t}</head><body><pre><code class="json">`,f=`</code></pre>${i}</body></html>`,d=window.open("");d.document.write(o+n+f),d.document.title=`${NAMES[s]} JSON Source`}function guessMode(n,t){if(n.$schema){const i=e(n.$schema);t&&t!==i.library&&console.warn(`The given visualization spec is written in ${NAMES[i.library]}, but mode argument sets ${NAMES[t]??t}.`);const s=i.library;return satisfies(VERSION[s],`^${i.version.slice(1)}`)||console.warn(`The input spec uses ${NAMES[s]} ${i.version}, but the current version of ${NAMES[s]} is v${VERSION[s]}.`),s}return"mark"in n||"encoding"in n||"layer"in n||"hconcat"in n||"vconcat"in n||"facet"in n||"repeat"in n?"vega-lite":"marks"in n||"signals"in n||"scales"in n||"axes"in n?"vega":t??"vega"}function isLoader(n){return!!(n&&"load"in n)}function createLoader(n){return isLoader(n)?n:vega.loader(n)}function embedOptionsFromUsermeta(n){var i;const t=((i=n.usermeta)==null?void 0:i.embedOptions)??{};return isString(t.defaultStyle)&&(t.defaultStyle=!1),t}async function embed(n,t,i={}){let s,o;isString(t)?(o=createLoader(i.loader),s=JSON.parse(await o.load(t))):s=t;const f=embedOptionsFromUsermeta(s),d=f.loader;(!o||d)&&(o=createLoader(i.loader??d));const p=await loadOpts(f,o),v=await loadOpts(i,o),_={...mergeDeep(v,p),config:mergeConfig(v.config??{},p.config??{})};return await _embed(n,s,_,o)}async function loadOpts(n,t){const i=isString(n.config)?JSON.parse(await t.load(n.config)):n.config??{},s=isString(n.patch)?JSON.parse(await t.load(n.patch)):n.patch;return{...n,...s?{patch:s}:{},...i?{config:i}:{}}}function getRoot(n){const t=n.getRootNode?n.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function _embed(n,t,i={},s){const o=i.theme?mergeConfig(themes[i.theme],i.config??{}):i.config,f=isBoolean$2(i.actions)?i.actions:mergeDeep({},DEFAULT_ACTIONS,i.actions??{}),d={...I18N,...i.i18n},p=i.renderer??"canvas",v=i.logLevel??vega.Warn,_=i.downloadFileName??"visualization",k=typeof n=="string"?document.querySelector(n):n;if(!k)throw new Error(`${n} does not exist`);if(i.defaultStyle!==!1){const le="vega-embed-style",{root:Ce,rootContainer:Me}=getRoot(k);if(!Ce.getElementById(le)){const _n=document.createElement("style");_n.id=le,_n.innerHTML=i.defaultStyle===void 0||i.defaultStyle===!0?embedStyle.toString():i.defaultStyle,Me.appendChild(_n)}}const P=guessMode(t,i.mode);let L=PREPROCESSOR[P](t,o);if(P==="vega-lite"&&L.$schema){const le=e(L.$schema);satisfies(VERSION.vega,`^${le.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${le.version}, but current version is v${VERSION.vega}.`)}k.classList.add("vega-embed"),f&&k.classList.add("has-actions"),k.innerHTML="";let G=k;if(f){const le=document.createElement("div");le.classList.add(CHART_WRAPPER_CLASS),k.appendChild(le),G=le}const Z=i.patch;if(Z&&(L=Z instanceof Function?Z(L):applyPatch(L,Z,!0,!1).newDocument),i.formatLocale&&vega.formatLocale(i.formatLocale),i.timeFormatLocale&&vega.timeFormatLocale(i.timeFormatLocale),i.expressionFunctions)for(const le in i.expressionFunctions){const Ce=i.expressionFunctions[le];"fn"in Ce?vega.expressionFunction(le,Ce.fn,Ce.visitor):Ce instanceof Function&&vega.expressionFunction(le,Ce)}const{ast:W}=i,j=vega.parse(L,P==="vega-lite"?{}:o,{ast:W}),H=new(i.viewClass||vega.View)(j,{loader:s,logLevel:v,renderer:p,...W?{expr:vega.expressionInterpreter??i.expr??expression$1}:{}});if(H.addSignalListener("autosize",(le,Ce)=>{const{type:Me}=Ce;Me=="fit-x"?(G.classList.add("fit-x"),G.classList.remove("fit-y")):Me=="fit-y"?(G.classList.remove("fit-x"),G.classList.add("fit-y")):Me=="fit"?G.classList.add("fit-x","fit-y"):G.classList.remove("fit-x","fit-y")}),i.tooltip!==!1){const{loader:le,tooltip:Ce}=i,Me=le&&!isLoader(le)?le==null?void 0:le.baseURL:void 0,_n=isTooltipHandler(Ce)?Ce:new Handler$1({baseURL:Me,...Ce===!0?{}:Ce}).call;H.tooltip(_n)}let{hover:me}=i;if(me===void 0&&(me=P==="vega"),me){const{hoverSet:le,updateSet:Ce}=typeof me=="boolean"?{}:me;H.hover(le,Ce)}i&&(i.width!=null&&H.width(i.width),i.height!=null&&H.height(i.height),i.padding!=null&&H.padding(i.padding)),await H.initialize(G,i.bind).runAsync();let $e;if(f!==!1){let le=k;if(i.defaultStyle!==!1||i.forceActionsMenu){const Me=document.createElement("details");Me.title=d.CLICK_TO_VIEW_ACTIONS,k.append(Me),le=Me;const _n=document.createElement("summary");_n.innerHTML=SVG_CIRCLES,Me.append(_n),$e=_i=>{Me.contains(_i.target)||Me.removeAttribute("open")},document.addEventListener("click",$e)}const Ce=document.createElement("div");if(le.append(Ce),Ce.classList.add("vega-actions"),f===!0||f.export!==!1){for(const Me of["svg","png"])if(f===!0||f.export===!0||f.export[Me]){const _n=d[`${Me.toUpperCase()}_ACTION`],_i=document.createElement("a"),ll=isObject(i.scaleFactor)?i.scaleFactor[Me]:i.scaleFactor;_i.text=_n,_i.href="#",_i.target="_blank",_i.download=`${_}.${Me}`,_i.addEventListener("mousedown",async function(_l){_l.preventDefault();const oa=await H.toImageURL(Me,ll);this.href=oa}),Ce.append(_i)}}if(f===!0||f.source!==!1){const Me=document.createElement("a");Me.text=d.SOURCE_ACTION,Me.href="#",Me.addEventListener("click",function(_n){viewSource(stringify$1(t),i.sourceHeader??"",i.sourceFooter??"",P),_n.preventDefault()}),Ce.append(Me)}if(P==="vega-lite"&&(f===!0||f.compiled!==!1)){const Me=document.createElement("a");Me.text=d.COMPILED_ACTION,Me.href="#",Me.addEventListener("click",function(_n){viewSource(stringify$1(L),i.sourceHeader??"",i.sourceFooter??"","vega"),_n.preventDefault()}),Ce.append(Me)}if(f===!0||f.editor!==!1){const Me=i.editorUrl??"https://vega.github.io/editor/",_n=document.createElement("a");_n.text=d.EDITOR_ACTION,_n.href="#",_n.addEventListener("click",function(_i){post(window,Me,{config:o,mode:Z?"vega":P,renderer:p,spec:stringify$1(Z?L:t)}),_i.preventDefault()}),Ce.append(_n)}}function De(){$e&&document.removeEventListener("click",$e),H.finalize()}return{view:H,spec:t,vgSpec:L,finalize:De,embedOptions:i}}function isFunction(n){return!!n&&{}.toString.call(n)==="[object Function]"}function updateSingleDatasetInView(n,t,i){i&&(isFunction(i)?i(n.data(t)):n.change(t,vega.changeset().remove(()=>!0).insert(i)))}function updateMultipleDatasetsInView(n,t){Object.keys(t).forEach(i=>{updateSingleDatasetInView(n,i,t[i])})}function getUniqueFieldNames(n){const t=new Set;return n.forEach(i=>{Object.keys(i).forEach(s=>{t.add(s)})}),t}const NOOP=()=>{};function addSignalListenersToView(n,t){const i=Object.keys(t);return i.forEach(s=>{try{n.addSignalListener(s,t[s])}catch(o){console.warn("Cannot add invalid signal listener.",o)}}),i.length>0}var fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function n(t,i){if(t===i)return!0;if(t&&i&&typeof t=="object"&&typeof i=="object"){if(t.constructor!==i.constructor)return!1;var s,o,f;if(Array.isArray(t)){if(s=t.length,s!=i.length)return!1;for(o=s;o--!==0;)if(!n(t[o],i[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();if(f=Object.keys(t),s=f.length,s!==Object.keys(i).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(i,f[o]))return!1;for(o=s;o--!==0;){var d=f[o];if(!n(t[d],i[d]))return!1}return!0}return t!==t&&i!==i}),fastDeepEqual}var fastDeepEqualExports=requireFastDeepEqual();const equal=getDefaultExportFromCjs$1(fastDeepEqualExports);function computeSpecChanges(n,t){if(n===t)return!1;const i={width:!1,height:!1,isExpensive:!1},s=getUniqueFieldNames([n,t]);return s.has("width")&&(!("width"in n)||!("width"in t)||n.width!==t.width)&&("width"in n&&typeof n.width=="number"?i.width=n.width:i.isExpensive=!0),s.has("height")&&(!("height"in n)||!("height"in t)||n.height!==t.height)&&("height"in n&&typeof n.height=="number"?i.height=n.height:i.isExpensive=!0),s.delete("width"),s.delete("height"),[...s].some(o=>!(o in n)||!(o in t)||!equal(n[o],t[o]))&&(i.isExpensive=!0),i.width!==!1||i.height!==!1||i.isExpensive?i:!1}function removeSignalListenersFromView(n,t){const i=Object.keys(t);return i.forEach(s=>{try{n.removeSignalListener(s,t[s])}catch(o){console.warn("Cannot remove invalid signal listener.",o)}}),i.length>0}function combineSpecWithDimension(n){const{spec:t,width:i,height:s}=n;return typeof i<"u"&&typeof s<"u"?{...t,width:i,height:s}:typeof i<"u"?{...t,width:i}:typeof s<"u"?{...t,height:s}:t}function _defineProperty$1(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}class VegaEmbed extends React.PureComponent{constructor(){super(...arguments),_defineProperty$1(this,"containerRef",React.createRef()),_defineProperty$1(this,"resultPromise",void 0),_defineProperty$1(this,"handleError",t=>{const{onError:i=NOOP}=this.props;i(t,this.containerRef.current),console.warn(t)}),_defineProperty$1(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(i=>(i&&t(i.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const i=getUniqueFieldNames([this.props,t]);if(i.delete("className"),i.delete("signalListeners"),i.delete("spec"),i.delete("style"),i.delete("width"),i.delete("height"),Array.from(i).some(s=>this.props[s]!==t[s]))this.clearView(),this.createView();else{const s=computeSpecChanges(combineSpecWithDimension(this.props),combineSpecWithDimension(t)),{signalListeners:o}=this.props,{signalListeners:f}=t;if(s)if(s.isExpensive)this.clearView(),this.createView();else{const d=!shallowEqual(o,f);this.modifyView(p=>{s.width!==!1&&p.width(s.width),s.height!==!1&&p.height(s.height),d&&(f&&removeSignalListenersFromView(p,f),o&&addSignalListenersToView(p,o)),p.run()})}else shallowEqual(o,f)||this.modifyView(d=>{f&&removeSignalListenersFromView(d,f),o&&addSignalListenersToView(d,o),d.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:i,signalListeners:s={},width:o,height:f,...d}=this.props;if(this.containerRef.current){const p=combineSpecWithDimension(this.props);this.resultPromise=embed(this.containerRef.current,p,d).then(v=>{if(v){const{view:_}=v;addSignalListenersToView(_,s)&&_.run()}return v}).catch(this.handleError),i&&this.modifyView(i)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:i}=this.props;return React.createElement("div",{ref:this.containerRef,className:t,style:i})}}_defineProperty$1(VegaEmbed,"propTypes",{className:_pt.string,onError:_pt.func});function _extends$1(){return _extends$1=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},_extends$1.apply(this,arguments)}function _defineProperty(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}const EMPTY={};class Vega extends React.PureComponent{constructor(){super(...arguments),_defineProperty(this,"vegaEmbed",React.createRef()),_defineProperty(this,"handleNewView",t=>{this.update();const{onNewView:i=NOOP}=this.props;i(t)})}componentDidMount(){this.update()}componentDidUpdate(t){shallowEqual(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(i=>{updateMultipleDatasetsInView(i,t),i.resize().run()})}render(){const{data:t,...i}=this.props;return React.createElement(VegaEmbed,_extends$1({ref:this.vegaEmbed},i,{onNewView:this.handleNewView}))}}_defineProperty(Vega,"defaultProps",{data:EMPTY});function _extends(){return _extends=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},_extends.apply(this,arguments)}function VegaLite(n){return React.createElement(Vega,_extends({},n,{mode:"vega-lite"}))}var _3Dmol$1={exports:{}};/*!
 * 3dmol v2.4.2
 * JavaScript/TypeScript molecular visualization library
 * Author: David Koes and contributors
 */var _3Dmol=_3Dmol$1.exports,hasRequired_3Dmol;function require_3Dmol(){return hasRequired_3Dmol||(hasRequired_3Dmol=1,function(module,exports){(function(t,i){module.exports=i()})(_3Dmol,()=>(()=>{var __webpack_modules__={"./node_modules/iobuffer/lib-esm/IOBuffer.js":(n,t,i)=>{i.r(t),i.d(t,{IOBuffer:()=>p});var s=i("./node_modules/iobuffer/lib-esm/text.browser.js");const o=1024*8,f=(()=>{const v=new Uint8Array(4),_=new Uint32Array(v.buffer);return!((_[0]=1)&v[0])})(),d={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class p{constructor(_=o,k={}){let P=!1;typeof _=="number"?_=new ArrayBuffer(_):(P=!0,this.lastWrittenByte=_.byteLength);const L=k.offset?k.offset>>>0:0,G=_.byteLength-L;let Z=L;(ArrayBuffer.isView(_)||_ instanceof p)&&(_.byteLength!==_.buffer.byteLength&&(Z=_.byteOffset+L),_=_.buffer),P?this.lastWrittenByte=G:this.lastWrittenByte=0,this.buffer=_,this.length=G,this.byteLength=G,this.byteOffset=Z,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,Z,G),this._mark=0,this._marks=[]}available(_=1){return this.offset+_<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(_=1){return this.offset+=_,this}back(_=1){return this.offset-=_,this}seek(_){return this.offset=_,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const _=this._marks.pop();if(_===void 0)throw new Error("Mark stack empty");return this.seek(_),this}rewind(){return this.offset=0,this}ensureAvailable(_=1){if(!this.available(_)){const P=(this.offset+_)*2,L=new Uint8Array(P);L.set(new Uint8Array(this.buffer)),this.buffer=L.buffer,this.length=this.byteLength=P,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(_=1){return this.readArray(_,"uint8")}readArray(_,k){const P=d[k].BYTES_PER_ELEMENT*_,L=this.byteOffset+this.offset,G=this.buffer.slice(L,L+P);if(this.littleEndian===f&&k!=="uint8"&&k!=="int8"){const W=new Uint8Array(this.buffer.slice(L,L+P));W.reverse();const j=new d[k](W.buffer);return this.offset+=P,j.reverse(),j}const Z=new d[k](G);return this.offset+=P,Z}readInt16(){const _=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,_}readUint16(){const _=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,_}readInt32(){const _=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,_}readUint32(){const _=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,_}readFloat32(){const _=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,_}readFloat64(){const _=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,_}readBigInt64(){const _=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,_}readBigUint64(){const _=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,_}readChar(){return String.fromCharCode(this.readInt8())}readChars(_=1){let k="";for(let P=0;P<_;P++)k+=this.readChar();return k}readUtf8(_=1){return(0,s.decode)(this.readBytes(_))}decodeText(_=1,k="utf-8"){return(0,s.decode)(this.readBytes(_),k)}writeBoolean(_){return this.writeUint8(_?255:0),this}writeInt8(_){return this.ensureAvailable(1),this._data.setInt8(this.offset++,_),this._updateLastWrittenByte(),this}writeUint8(_){return this.ensureAvailable(1),this._data.setUint8(this.offset++,_),this._updateLastWrittenByte(),this}writeByte(_){return this.writeUint8(_)}writeBytes(_){this.ensureAvailable(_.length);for(let k=0;k<_.length;k++)this._data.setUint8(this.offset++,_[k]);return this._updateLastWrittenByte(),this}writeInt16(_){return this.ensureAvailable(2),this._data.setInt16(this.offset,_,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(_){return this.ensureAvailable(2),this._data.setUint16(this.offset,_,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(_){return this.ensureAvailable(4),this._data.setInt32(this.offset,_,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(_){return this.ensureAvailable(4),this._data.setUint32(this.offset,_,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(_){return this.ensureAvailable(4),this._data.setFloat32(this.offset,_,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(_){return this.ensureAvailable(8),this._data.setFloat64(this.offset,_,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(_){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,_,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(_){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,_,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(_){return this.writeUint8(_.charCodeAt(0))}writeChars(_){for(let k=0;k<_.length;k++)this.writeUint8(_.charCodeAt(k));return this}writeUtf8(_){return this.writeBytes((0,s.encode)(_))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}},"./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js":function(){(function(n){if(n.TextEncoder&&n.TextDecoder)return!1;function t(s="utf-8"){if(s!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${s}') is invalid.`)}Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(s,o={stream:!1}){if(o.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let f=0;const d=s.length;let p=0,v=Math.max(32,d+(d>>1)+7),_=new Uint8Array(v>>3<<3);for(;f<d;){let k=s.charCodeAt(f++);if(k>=55296&&k<=56319){if(f<d){const P=s.charCodeAt(f);(P&64512)===56320&&(++f,k=((k&1023)<<10)+(P&1023)+65536)}if(k>=55296&&k<=56319)continue}if(p+4>_.length){v+=8,v*=1+f/s.length*2,v=v>>3<<3;const P=new Uint8Array(v);P.set(_),_=P}if((k&4294967168)===0){_[p++]=k;continue}else if((k&4294965248)===0)_[p++]=k>>6&31|192;else if((k&4294901760)===0)_[p++]=k>>12&15|224,_[p++]=k>>6&63|128;else if((k&4292870144)===0)_[p++]=k>>18&7|240,_[p++]=k>>12&63|128,_[p++]=k>>6&63|128;else continue;_[p++]=k&63|128}return _.slice(0,p)};function i(s="utf-8",o={fatal:!1}){if(s!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${s}') is invalid.`);if(o.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(i.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(i.prototype,"fatal",{value:!1}),Object.defineProperty(i.prototype,"ignoreBOM",{value:!1}),i.prototype.decode=function(s,o={stream:!1}){if(o.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const f=new Uint8Array(s);let d=0;const p=f.length,v=[];for(;d<p;){const _=f[d++];if(_===0)break;if((_&128)===0)v.push(_);else if((_&224)===192){const k=f[d++]&63;v.push((_&31)<<6|k)}else if((_&240)===224){const k=f[d++]&63,P=f[d++]&63;v.push((_&31)<<12|k<<6|P)}else if((_&248)===240){const k=f[d++]&63,P=f[d++]&63,L=f[d++]&63;let G=(_&7)<<18|k<<12|P<<6|L;G>65535&&(G-=65536,v.push(G>>>10&1023|55296),G=56320|G&1023),v.push(G)}}return String.fromCharCode.apply(null,v)},n.TextEncoder=t,n.TextDecoder=i})(typeof window<"u"?window:typeof self<"u"?self:this)},"./node_modules/iobuffer/lib-esm/text.browser.js":(n,t,i)=>{i.r(t),i.d(t,{decode:()=>s,encode:()=>f}),i("./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js");function s(d,p="utf8"){return new TextDecoder(p).decode(d)}const o=new TextEncoder;function f(d){return o.encode(d)}},"./node_modules/netcdfjs/lib-esm/data.js":(n,t,i)=>{i.r(t),i.d(t,{nonRecord:()=>o,record:()=>f});var s=i("./node_modules/netcdfjs/lib-esm/types.js");function o(d,p){const v=(0,s.str2num)(p.type),_=p.size/(0,s.num2bytes)(v),k=new Array(_);for(let P=0;P<_;P++)k[P]=(0,s.readType)(d,v,1);return k}function f(d,p,v){const _=(0,s.str2num)(p.type),k=p.size?p.size/(0,s.num2bytes)(_):1,P=v.length,L=new Array(P),G=v.recordStep;if(G)for(let Z=0;Z<P;Z++){const W=d.offset;L[Z]=(0,s.readType)(d,_,k),d.seek(W+G)}else throw new Error("recordDimension.recordStep is undefined");return L}},"./node_modules/netcdfjs/lib-esm/header.js":(n,t,i)=>{i.r(t),i.d(t,{header:()=>k});var s=i("./node_modules/netcdfjs/lib-esm/types.js"),o=i("./node_modules/netcdfjs/lib-esm/utils.js");const f=0,d=10,p=11,v=12,_=0;function k(Z,W){const j={version:W},H={length:Z.readUint32()},me=P(Z);Array.isArray(me)||(H.id=me.recordId,H.name=me.recordName,j.dimensions=me.dimensions),j.globalAttributes=L(Z);const $e=G(Z,H==null?void 0:H.id,W);return Array.isArray($e)||(j.variables=$e.variables,H.recordStep=$e.recordStep),j.recordDimension=H,j}function P(Z){const W={};let j,H;const me=Z.readUint32();let $e;if(me===f)return(0,o.notNetcdf)(Z.readUint32()!==f,"wrong empty tag for list of dimensions"),[];{(0,o.notNetcdf)(me!==d,"wrong tag for list of dimensions");const De=Z.readUint32();$e=new Array(De);for(let le=0;le<De;le++){const Ce=(0,o.readName)(Z),Me=Z.readUint32();Me===_&&(j=le,H=Ce),$e[le]={name:Ce,size:Me}}}return j!==void 0&&(W.recordId=j),H!==void 0&&(W.recordName=H),W.dimensions=$e,W}function L(Z){const W=Z.readUint32();let j;if(W===f)return(0,o.notNetcdf)(Z.readUint32()!==f,"wrong empty tag for list of attributes"),[];{(0,o.notNetcdf)(W!==v,"wrong tag for list of attributes");const H=Z.readUint32();j=new Array(H);for(let me=0;me<H;me++){const $e=(0,o.readName)(Z),De=Z.readUint32();(0,o.notNetcdf)(De<1||De>6,`non valid type ${De}`);const le=Z.readUint32(),Ce=(0,s.readType)(Z,De,le);(0,o.padding)(Z),j[me]={name:$e,type:(0,s.num2str)(De),value:Ce}}}return j}function G(Z,W,j){const H=Z.readUint32();let me=0,$e;if(H===f)return(0,o.notNetcdf)(Z.readUint32()!==f,"wrong empty tag for list of variables"),[];{(0,o.notNetcdf)(H!==p,"wrong tag for list of variables");const De=Z.readUint32();$e=new Array(De);for(let le=0;le<De;le++){const Ce=(0,o.readName)(Z),Me=Z.readUint32(),_n=new Array(Me);for(let ga=0;ga<Me;ga++)_n[ga]=Z.readUint32();const _i=L(Z),ll=Z.readUint32();(0,o.notNetcdf)(ll<1&&ll>6,`non valid type ${ll}`);const _l=Z.readUint32();let oa=Z.readUint32();j===2&&((0,o.notNetcdf)(oa>0,"offsets larger than 4GB not supported"),oa=Z.readUint32());let Ru=!1;typeof W<"u"&&_n[0]===W&&(me+=_l,Ru=!0),$e[le]={name:Ce,dimensions:_n,attributes:_i,type:(0,s.num2str)(ll),size:_l,offset:oa,record:Ru}}}return{variables:$e,recordStep:me}}},"./node_modules/netcdfjs/lib-esm/index.js":(n,t,i)=>{i.r(t),i.d(t,{NetCDFReader:()=>s.NetCDFReader});var s=i("./node_modules/netcdfjs/lib-esm/parser.js")},"./node_modules/netcdfjs/lib-esm/parser.js":(n,t,i)=>{i.r(t),i.d(t,{NetCDFReader:()=>v});var s=i("./node_modules/iobuffer/lib-esm/IOBuffer.js"),o=i("./node_modules/netcdfjs/lib-esm/data.js"),f=i("./node_modules/netcdfjs/lib-esm/header.js"),d=i("./node_modules/netcdfjs/lib-esm/toString.js"),p=i("./node_modules/netcdfjs/lib-esm/utils.js");class v{constructor(k){this.toString=d.toString;const P=new s.IOBuffer(k);P.setBigEndian(),(0,p.notNetcdf)(P.readChars(3)!=="CDF","should start with CDF");const L=P.readByte();(0,p.notNetcdf)(L>2,"unknown version"),this.header=(0,f.header)(P,L),this.buffer=P}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(k){const P=this.globalAttributes.find(L=>L.name===k);return P?P.value:null}getDataVariableAsString(k){const P=this.getDataVariable(k);return P?P.join(""):null}get variables(){return this.header.variables}getDataVariable(k){let P;if(typeof k=="string"?P=this.header.variables.find(L=>L.name===k):P=k,P===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(P.offset),P.record?(0,o.record)(this.buffer,P,this.header.recordDimension):(0,o.nonRecord)(this.buffer,P)}dataVariableExists(k){return this.header.variables.find(L=>L.name===k)!==void 0}attributeExists(k){return this.globalAttributes.find(L=>L.name===k)!==void 0}}},"./node_modules/netcdfjs/lib-esm/toString.js":(n,t,i)=>{i.r(t),i.d(t,{toString:()=>s});function s(){const o=[];o.push("DIMENSIONS");for(const d of this.dimensions)o.push(`  ${d.name.padEnd(30)} = size: ${d.size}`);o.push(""),o.push("GLOBAL ATTRIBUTES");for(const d of this.globalAttributes)o.push(`  ${d.name.padEnd(30)} = ${d.value}`);const f=JSON.parse(JSON.stringify(this.variables));o.push(""),o.push("VARIABLES:");for(const d of f){d.value=this.getDataVariable(d);let p=JSON.stringify(d.value);p.length>50&&(p=p.substring(0,50)),isNaN(d.value.length)||(p+=` (length: ${d.value.length})`),o.push(`  ${d.name.padEnd(30)} = ${p}`)}return o.join(`
`)}},"./node_modules/netcdfjs/lib-esm/types.js":(n,t,i)=>{i.r(t),i.d(t,{num2bytes:()=>f,num2str:()=>o,readType:()=>v,str2num:()=>d});const s={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function o(k){switch(Number(k)){case s.BYTE:return"byte";case s.CHAR:return"char";case s.SHORT:return"short";case s.INT:return"int";case s.FLOAT:return"float";case s.DOUBLE:return"double";default:return"undefined"}}function f(k){switch(Number(k)){case s.BYTE:return 1;case s.CHAR:return 1;case s.SHORT:return 2;case s.INT:return 4;case s.FLOAT:return 4;case s.DOUBLE:return 8;default:return-1}}function d(k){switch(String(k)){case"byte":return s.BYTE;case"char":return s.CHAR;case"short":return s.SHORT;case"int":return s.INT;case"float":return s.FLOAT;case"double":return s.DOUBLE;default:return-1}}function p(k,P){if(k!==1){const L=new Array(k);for(let G=0;G<k;G++)L[G]=P();return L}else return P()}function v(k,P,L){switch(P){case s.BYTE:return Array.from(k.readBytes(L));case s.CHAR:return _(k.readChars(L));case s.SHORT:return p(L,k.readInt16.bind(k));case s.INT:return p(L,k.readInt32.bind(k));case s.FLOAT:return p(L,k.readFloat32.bind(k));case s.DOUBLE:return p(L,k.readFloat64.bind(k));default:throw new Error(`non valid type ${P}`)}}function _(k){return k.charCodeAt(k.length-1)===0?k.substring(0,k.length-1):k}},"./node_modules/netcdfjs/lib-esm/utils.js":(n,t,i)=>{i.r(t),i.d(t,{notNetcdf:()=>s,padding:()=>o,readName:()=>f});function s(d,p){if(d)throw new TypeError(`Not a valid NetCDF v3.x file: ${p}`)}function o(d){d.offset%4!==0&&d.skip(4-d.offset%4)}function f(d){const p=d.readUint32(),v=d.readChars(p);return o(d),v}},"./src/WebGL/shaders/lib/basic/basic.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/basic/basic.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`},"./src/WebGL/shaders/lib/blur/blur.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`},"./src/WebGL/shaders/lib/blur/blur.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/instanced/instanced.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/instanced/instanced.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/lambert/lambert.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}`},"./src/WebGL/shaders/lib/lambert/lambert.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/outline/outline.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );    
}


`},"./src/WebGL/shaders/lib/outline/outline.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`},"./src/WebGL/shaders/lib/screen/screen.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `},"./src/WebGL/shaders/lib/screen/screen.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}

`},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );
}


`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform int fogType;
uniform vec3 fogColor;
uniform float fogDensity;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogType > 0) {

        float depth = gl_FragCoord.z / gl_FragCoord.w;
        float fogFactor = 0.0;

        if (fogType == 1) {
            fogFactor = smoothstep(fogNear, fogFar, depth);
        }

        else {
            const float LOG2 = 1.442695;
            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);
            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);
        }

        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);

    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`},"./src/WebGL/shaders/lib/ssao/ssao.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`},"./src/WebGL/shaders/lib/ssao/ssao.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/stickimposter/stickimposter.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`},"./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`},"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`},"./src/WebGL/shaders/lib/volumetric/volumetric.frag":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `},"./src/WebGL/shaders/lib/volumetric/volumetric.vert":(n,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`},"./src/GLDraw.ts":(n,t,i)=>{i.r(t),i.d(t,{CAP:()=>o,GLDraw:()=>f});var s=i("./src/WebGL/math/index.ts"),o;(function(d){d[d.NONE=0]="NONE",d[d.FLAT=1]="FLAT",d[d.ROUND=2]="ROUND"})(o||(o={}));var f;(function(d){function p(W,j,H){var me=Math.hypot(W,j),$e,De,le,Ce,Me;me<1e-4?(De=0,le=1):(De=-W/me,le=j/me),j=-De*W+le*j,$e=Math.hypot(j,H),$e<1e-4?(Ce=0,Me=1):(Ce=H/$e,Me=j/$e);var _n=new Float32Array(9);return _n[0]=le,_n[1]=De,_n[2]=0,_n[3]=-De*Me,_n[4]=le*Me,_n[5]=Ce,_n[6]=De*Ce,_n[7]=-le*Ce,_n[8]=Me,_n}class v{constructor(){this.cache={};let j=[],H=4,me=Math.pow(2,H),$e=2,De=Math.pow(2,$e),le=me/De,Ce;for(j[0]=new s.Vector3(-1,0,0),j[le]=new s.Vector3(0,0,1),j[le*2]=new s.Vector3(1,0,0),j[le*3]=new s.Vector3(0,0,-1),$e=3;$e<=H;$e++){for(De=Math.pow(2,$e-1),le=me/De,Ce=0;Ce<De-1;Ce++)j[le/2+Ce*le]=j[Ce*le].clone().add(j[(Ce+1)*le]).normalize();Ce=De-1,j[le/2+Ce*le]=j[Ce*le].clone().add(j[0]).normalize()}this.basisVectors=j}getVerticesForRadius(j,H,me){if(typeof this.cache<"u"&&this.cache[j]!==void 0&&this.cache[j][H+me]!==void 0)return this.cache[j][H+me];for(var $e=this.basisVectors.length,De=[],le=[],Ce,Me=0;Me<$e;Me++)De.push(this.basisVectors[Me].clone().multiplyScalar(j)),De.push(this.basisVectors[Me].clone().multiplyScalar(j)),Ce=this.basisVectors[Me].clone().normalize(),le.push(Ce),le.push(Ce);var _n=[],_i=10,ll=$e,_l=0,oa=Math.PI*2,Ru=0,ga=Math.PI,_s,Sa,Ra=!1,Da=!1;for(Sa=0;Sa<=_i;Sa++){Ra=Sa===0||Sa===_i,Da=Sa===_i/2;var Fa=[],Na=[];for(_s=0;_s<=ll;_s++){if(Da){var _a=_s<ll?2*_s:0;Na.push(_a+1),Fa.push(_a);continue}var Pa=_s/ll,qc=Sa/_i;if(!Ra||_s===0)if(_s<ll){var uf=new s.Vector3;uf.x=-j*Math.cos(_l+Pa*oa)*Math.sin(Ru+qc*ga),H==1?uf.y=0:uf.y=j*Math.cos(Ru+qc*ga),uf.z=j*Math.sin(_l+Pa*oa)*Math.sin(Ru+qc*ga),Math.abs(uf.x)<1e-5&&(uf.x=0),Math.abs(uf.y)<1e-5&&(uf.y=0),Math.abs(uf.z)<1e-5&&(uf.z=0),H==o.FLAT?(Ce=new s.Vector3(0,Math.cos(Ru+qc*ga),0),Ce.normalize()):(Ce=new s.Vector3(uf.x,uf.y,uf.z),Ce.normalize()),De.push(uf),le.push(Ce),Fa.push(De.length-1)}else Fa.push(De.length-ll);else Ra&&Fa.push(De.length-1)}Da&&_n.push(Na),_n.push(Fa)}var _h={vertices:De,normals:le,verticesRows:_n,w:ll,h:_i};return j in this.cache||(this.cache[j]={}),this.cache[j][H+me]=_h,_h}}var _=new v;function k(W,j,H,me,$e,De=0,le=0){if(!j||!H)return;let Ce=function(_p){if(typeof _p=="string"){let _O=_p;return _O.toLowerCase()=="flat"?o.FLAT:_O.toLowerCase()=="round"?o.ROUND:o.NONE}else return _p};De=Ce(De),le=Ce(le);var Me=le||De;$e=$e||{r:0,g:0,b:0};var _n=p(H.x-j.x,H.y-j.y,H.z-j.z),_i=_.getVerticesForRadius(me,le,"to"),ll=_i.w,_l=_i.h,oa=Me?_l*ll+2:2*ll,Ru=W.updateGeoGroup(oa),ga=_i.vertices,_s=_i.normals,Sa=_i.verticesRows,Ra=Sa[_l/2],Da=Sa[_l/2+1],Fa=Ru.vertices,Na,_a,Pa,qc,uf,_h,Uh=Ru.vertexArray,Kd=Ru.normalArray,ud=Ru.colorArray,sc=Ru.faceArray;for(Pa=0;Pa<ll;++Pa){var Yd=2*Pa;qc=_n[0]*ga[Yd].x+_n[3]*ga[Yd].y+_n[6]*ga[Yd].z,uf=_n[1]*ga[Yd].x+_n[4]*ga[Yd].y+_n[7]*ga[Yd].z,_h=_n[5]*ga[Yd].y+_n[8]*ga[Yd].z,Na=3*(Fa+Yd),_a=Ru.faceidx,Uh[Na]=qc+j.x,Uh[Na+1]=uf+j.y,Uh[Na+2]=_h+j.z,Uh[Na+3]=qc+H.x,Uh[Na+4]=uf+H.y,Uh[Na+5]=_h+H.z,Kd[Na]=qc,Kd[Na+3]=qc,Kd[Na+1]=uf,Kd[Na+4]=uf,Kd[Na+2]=_h,Kd[Na+5]=_h,ud[Na]=$e.r,ud[Na+3]=$e.r,ud[Na+1]=$e.g,ud[Na+4]=$e.g,ud[Na+2]=$e.b,ud[Na+5]=$e.b,sc[_a]=Da[Pa]+Fa,sc[_a+1]=Da[Pa+1]+Fa,sc[_a+2]=Ra[Pa]+Fa,sc[_a+3]=Ra[Pa]+Fa,sc[_a+4]=Da[Pa+1]+Fa,sc[_a+5]=Ra[Pa+1]+Fa,Ru.faceidx+=6}if(Me){var wg=le?0:_l/2,Pf=De?_l+1:_l/2+1,ac,fc,nd,a0,_1,_$,$b,Z_,_b,cb,ib,_2,Nb,_D,ec,Jc,ih,Bd,xg,hb,_S,rc,e0,b0,nb,vf,c0,Ba,$_,_A,ka,Pp;for(uf=wg;uf<Pf;uf++)if(uf!==_l/2){var _0=uf<=_l/2?H:j,Oc=_.getVerticesForRadius(me,le,"to"),zg=_.getVerticesForRadius(me,De,"from");for(_0===H?(ga=Oc.vertices,_s=Oc.normals,Sa=Oc.verticesRows):_0==j&&(ga=zg.vertices,_s=zg.normals,Sa=zg.verticesRows),qc=0;qc<ll;qc++)_a=Ru.faceidx,ac=Sa[uf][qc+1],$_=(ac+Fa)*3,fc=Sa[uf][qc],_A=(fc+Fa)*3,nd=Sa[uf+1][qc],ka=(nd+Fa)*3,a0=Sa[uf+1][qc+1],Pp=(a0+Fa)*3,_1=_n[0]*ga[ac].x+_n[3]*ga[ac].y+_n[6]*ga[ac].z,_$=_n[0]*ga[fc].x+_n[3]*ga[fc].y+_n[6]*ga[fc].z,$b=_n[0]*ga[nd].x+_n[3]*ga[nd].y+_n[6]*ga[nd].z,Z_=_n[0]*ga[a0].x+_n[3]*ga[a0].y+_n[6]*ga[a0].z,_b=_n[1]*ga[ac].x+_n[4]*ga[ac].y+_n[7]*ga[ac].z,cb=_n[1]*ga[fc].x+_n[4]*ga[fc].y+_n[7]*ga[fc].z,ib=_n[1]*ga[nd].x+_n[4]*ga[nd].y+_n[7]*ga[nd].z,_2=_n[1]*ga[a0].x+_n[4]*ga[a0].y+_n[7]*ga[a0].z,Nb=_n[5]*ga[ac].y+_n[8]*ga[ac].z,_D=_n[5]*ga[fc].y+_n[8]*ga[fc].z,ec=_n[5]*ga[nd].y+_n[8]*ga[nd].z,Jc=_n[5]*ga[a0].y+_n[8]*ga[a0].z,Uh[$_]=_1+_0.x,Uh[_A]=_$+_0.x,Uh[ka]=$b+_0.x,Uh[Pp]=Z_+_0.x,Uh[$_+1]=_b+_0.y,Uh[_A+1]=cb+_0.y,Uh[ka+1]=ib+_0.y,Uh[Pp+1]=_2+_0.y,Uh[$_+2]=Nb+_0.z,Uh[_A+2]=_D+_0.z,Uh[ka+2]=ec+_0.z,Uh[Pp+2]=Jc+_0.z,ud[$_]=$e.r,ud[_A]=$e.r,ud[ka]=$e.r,ud[Pp]=$e.r,ud[$_+1]=$e.g,ud[_A+1]=$e.g,ud[ka+1]=$e.g,ud[Pp+1]=$e.g,ud[$_+2]=$e.b,ud[_A+2]=$e.b,ud[ka+2]=$e.b,ud[Pp+2]=$e.b,ih=_n[0]*_s[ac].x+_n[3]*_s[ac].y+_n[6]*_s[ac].z,Bd=_n[0]*_s[fc].x+_n[3]*_s[fc].y+_n[6]*_s[fc].z,xg=_n[0]*_s[nd].x+_n[3]*_s[nd].y+_n[6]*_s[nd].z,hb=_n[0]*_s[a0].x+_n[3]*_s[a0].y+_n[6]*_s[a0].z,_S=_n[1]*_s[ac].x+_n[4]*_s[ac].y+_n[7]*_s[ac].z,rc=_n[1]*_s[fc].x+_n[4]*_s[fc].y+_n[7]*_s[fc].z,e0=_n[1]*_s[nd].x+_n[4]*_s[nd].y+_n[7]*_s[nd].z,b0=_n[1]*_s[a0].x+_n[4]*_s[a0].y+_n[7]*_s[a0].z,nb=_n[5]*_s[ac].y+_n[8]*_s[ac].z,vf=_n[5]*_s[fc].y+_n[8]*_s[fc].z,c0=_n[5]*_s[nd].y+_n[8]*_s[nd].z,Ba=_n[5]*_s[a0].y+_n[8]*_s[a0].z,uf===0?(Kd[$_]=ih,Kd[ka]=xg,Kd[Pp]=hb,Kd[$_+1]=_S,Kd[ka+1]=e0,Kd[Pp+1]=b0,Kd[$_+2]=nb,Kd[ka+2]=c0,Kd[Pp+2]=Ba,sc[_a]=ac+Fa,sc[_a+1]=nd+Fa,sc[_a+2]=a0+Fa,Ru.faceidx+=3):uf===Pf-1?(Kd[$_]=ih,Kd[_A]=Bd,Kd[ka]=xg,Kd[$_+1]=_S,Kd[_A+1]=rc,Kd[ka+1]=e0,Kd[$_+2]=nb,Kd[_A+2]=vf,Kd[ka+2]=c0,sc[_a]=ac+Fa,sc[_a+1]=fc+Fa,sc[_a+2]=nd+Fa,Ru.faceidx+=3):(Kd[$_]=ih,Kd[_A]=Bd,Kd[Pp]=hb,Kd[$_+1]=_S,Kd[_A+1]=rc,Kd[Pp+1]=b0,Kd[$_+2]=nb,Kd[_A+2]=vf,Kd[Pp+2]=Ba,Kd[_A]=Bd,Kd[ka]=xg,Kd[Pp]=hb,Kd[_A+1]=rc,Kd[ka+1]=e0,Kd[Pp+1]=b0,Kd[_A+2]=vf,Kd[ka+2]=c0,Kd[Pp+2]=Ba,sc[_a]=ac+Fa,sc[_a+1]=fc+Fa,sc[_a+2]=a0+Fa,sc[_a+3]=fc+Fa,sc[_a+4]=nd+Fa,sc[_a+5]=a0+Fa,Ru.faceidx+=6)}}Ru.vertices+=oa}d.drawCylinder=k;function P(W,j,H,me,$e){if(!j||!H)return;$e=$e||{r:0,g:0,b:0};let De=new s.Vector3(H.x-j.x,H.y-j.y,H.z-j.z);var le=p(De.x,De.y,De.z);De=De.normalize();var Ce=_.basisVectors.length,Me=_.basisVectors,_n=Ce+2,_i=W.updateGeoGroup(_n),ll=_i.vertices,_l,oa,Ru,ga,_s,Sa,Ra=_i.vertexArray,Da=_i.normalArray,Fa=_i.colorArray,Na=_i.faceArray;for(_l=ll*3,Ra[_l]=j.x,Ra[_l+1]=j.y,Ra[_l+2]=j.z,Da[_l]=-De.x,Da[_l+1]=-De.y,Da[_l+2]=-De.z,Fa[_l]=$e.r,Fa[_l+1]=$e.g,Fa[_l+2]=$e.b,Ra[_l+3]=H.x,Ra[_l+4]=H.y,Ra[_l+5]=H.z,Da[_l+3]=De.x,Da[_l+4]=De.y,Da[_l+5]=De.z,Fa[_l+3]=$e.r,Fa[_l+4]=$e.g,Fa[_l+5]=$e.b,_l+=6,Ru=0;Ru<Ce;++Ru){var _a=Me[Ru].clone();_a.multiplyScalar(me),ga=le[0]*_a.x+le[3]*_a.y+le[6]*_a.z,_s=le[1]*_a.x+le[4]*_a.y+le[7]*_a.z,Sa=le[5]*_a.y+le[8]*_a.z,Ra[_l]=ga+j.x,Ra[_l+1]=_s+j.y,Ra[_l+2]=Sa+j.z,Da[_l]=ga,Da[_l+1]=_s,Da[_l+2]=Sa,Fa[_l]=$e.r,Fa[_l+1]=$e.g,Fa[_l+2]=$e.b,_l+=3}for(_i.vertices+=Ce+2,oa=_i.faceidx,Ru=0;Ru<Ce;Ru++){var Pa=ll+2+Ru,qc=ll+2+(Ru+1)%Ce;Na[oa]=Pa,Na[oa+1]=qc,Na[oa+2]=ll,oa+=3,Na[oa]=Pa,Na[oa+1]=qc,Na[oa+2]=ll+1,oa+=3}_i.faceidx+=6*Ce}d.drawCone=P;class L{constructor(){this.cache=new Map}getVerticesForRadius(j,H){H=H||2,this.cache.has(H)||this.cache.set(H,new Map);let me=this.cache.get(H);if(me.has(j))return me.get(j);var $e={vertices:[],verticesRows:[],normals:[]},De=16*H,le=10*H;j<1&&(De=10*H,le=8*H);var Ce=0,Me=Math.PI*2,_n=0,_i=Math.PI,ll,_l;for(_l=0;_l<=le;_l++){let Ru=[];for(ll=0;ll<=De;ll++){let ga=ll/De,_s=_l/le,Sa=-j*Math.cos(Ce+ga*Me)*Math.sin(_n+_s*_i),Ra=j*Math.cos(_n+_s*_i),Da=j*Math.sin(Ce+ga*Me)*Math.sin(_n+_s*_i);var oa=new s.Vector3(Sa,Ra,Da);oa.normalize(),$e.vertices.push({x:Sa,y:Ra,z:Da}),$e.normals.push(oa),Ru.push($e.vertices.length-1)}$e.verticesRows.push(Ru)}return me.set(j,$e),$e}}var G=new L;function Z(W,j,H,me,$e){var De=G.getVerticesForRadius(H,$e),le=De.vertices,Ce=De.normals,Me=W.updateGeoGroup(le.length),_n=Me.vertices,_i=Me.vertexArray,ll=Me.colorArray,_l=Me.faceArray,oa=Me.lineArray,Ru=Me.normalArray;for(let Sa=0,Ra=le.length;Sa<Ra;++Sa){let Da=3*(_n+Sa),Fa=le[Sa];_i[Da]=Fa.x+j.x,_i[Da+1]=Fa.y+j.y,_i[Da+2]=Fa.z+j.z,ll[Da]=me.r,ll[Da+1]=me.g,ll[Da+2]=me.b}Me.vertices+=le.length;let ga=De.verticesRows,_s=ga.length-1;for(let Sa=0;Sa<_s;Sa++){let Ra=ga[Sa].length-1;for(let Da=0;Da<Ra;Da++){let Fa=Me.faceidx,Na=Me.lineidx,_a=ga[Sa][Da+1]+_n,Pa=_a*3,qc=ga[Sa][Da]+_n,uf=qc*3,_h=ga[Sa+1][Da]+_n,Uh=_h*3,Kd=ga[Sa+1][Da+1]+_n,ud=Kd*3,sc=Ce[_a-_n],Yd=Ce[qc-_n],wg=Ce[_h-_n],Pf=Ce[Kd-_n];Math.abs(le[_a-_n].y)===H?(Ru[Pa]=sc.x,Ru[Uh]=wg.x,Ru[ud]=Pf.x,Ru[Pa+1]=sc.y,Ru[Uh+1]=wg.y,Ru[ud+1]=Pf.y,Ru[Pa+2]=sc.z,Ru[Uh+2]=wg.z,Ru[ud+2]=Pf.z,_l[Fa]=_a,_l[Fa+1]=_h,_l[Fa+2]=Kd,oa[Na]=_a,oa[Na+1]=_h,oa[Na+2]=_a,oa[Na+3]=Kd,oa[Na+4]=_h,oa[Na+5]=Kd,Me.faceidx+=3,Me.lineidx+=6):Math.abs(le[_h-_n].y)===H?(Ru[Pa]=sc.x,Ru[uf]=Yd.x,Ru[Uh]=wg.x,Ru[Pa+1]=sc.y,Ru[uf+1]=Yd.y,Ru[Uh+1]=wg.y,Ru[Pa+2]=sc.z,Ru[uf+2]=Yd.z,Ru[Uh+2]=wg.z,_l[Fa]=_a,_l[Fa+1]=qc,_l[Fa+2]=_h,oa[Na]=_a,oa[Na+1]=qc,oa[Na+2]=_a,oa[Na+3]=_h,oa[Na+4]=qc,oa[Na+5]=_h,Me.faceidx+=3,Me.lineidx+=6):(Ru[Pa]=sc.x,Ru[uf]=Yd.x,Ru[ud]=Pf.x,Ru[Pa+1]=sc.y,Ru[uf+1]=Yd.y,Ru[ud+1]=Pf.y,Ru[Pa+2]=sc.z,Ru[uf+2]=Yd.z,Ru[ud+2]=Pf.z,Ru[uf]=Yd.x,Ru[Uh]=wg.x,Ru[ud]=Pf.x,Ru[uf+1]=Yd.y,Ru[Uh+1]=wg.y,Ru[ud+1]=Pf.y,Ru[uf+2]=Yd.z,Ru[Uh+2]=wg.z,Ru[ud+2]=Pf.z,_l[Fa]=_a,_l[Fa+1]=qc,_l[Fa+2]=Kd,_l[Fa+3]=qc,_l[Fa+4]=_h,_l[Fa+5]=Kd,oa[Na]=_a,oa[Na+1]=qc,oa[Na+2]=_a,oa[Na+3]=Kd,oa[Na+4]=qc,oa[Na+5]=_h,oa[Na+6]=_h,oa[Na+7]=Kd,Me.faceidx+=6,Me.lineidx+=8)}}}d.drawSphere=Z})(f||(f={}))},"./src/GLModel.ts":(n,t,i)=>{i.r(t),i.d(t,{GLModel:()=>Z});var s=i("./src/WebGL/index.ts"),o=i("./src/WebGL/shapes/index.ts"),f=i("./src/WebGL/math/index.ts"),d=i("./src/colors.ts"),p=i("./src/GLDraw.ts"),v=i("./src/glcartoon.ts"),_=i("./src/utilities.ts"),k=i("./src/Gradient.ts"),P=i("./src/parsers/index.ts"),L=i("./node_modules/netcdfjs/lib-esm/index.js"),G=i("./src/parsers/utils/assignBonds.ts");class Z{static sameObj(j,H){return j&&H?JSON.stringify(j)==JSON.stringify(H):j==H}constructor(j,H){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new f.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=d.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=H||{},this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:d.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=j}getRadiusFromStyle(j,H){var me=this.defaultSphereRadius;if(typeof H.radius<"u")me=H.radius;else if(Z.vdwRadii[j.elem])me=Z.vdwRadii[j.elem];else if(j.elem.length>1){let $e=j.elem;$e=$e[0].toUpperCase()+$e[1].toLowerCase(),Z.vdwRadii[$e]&&(me=Z.vdwRadii[$e])}return typeof H.scale<"u"&&(me*=H.scale),me}drawAtomCross(j,H){if(j.style.cross){var me=j.style.cross;if(!me.hidden){var $e=me.linewidth||Z.defaultlineWidth;H[$e]||(H[$e]=new s.Geometry);var De=H[$e].updateGeoGroup(6),le=this.getRadiusFromStyle(j,me),Ce=[[le,0,0],[-le,0,0],[0,le,0],[0,-le,0],[0,0,le],[0,0,-le]],Me=j.clickable||j.hoverable;Me&&j.intersectionShape===void 0&&(j.intersectionShape={sphere:[],cylinder:[],line:[]});for(var _n=(0,_.getColorFromStyle)(j,me),_i=De.vertexArray,ll=De.colorArray,_l=0;_l<6;_l++){var oa=De.vertices*3;if(De.vertices++,_i[oa]=j.x+Ce[_l][0],_i[oa+1]=j.y+Ce[_l][1],_i[oa+2]=j.z+Ce[_l][2],ll[oa]=_n.r,ll[oa+1]=_n.g,ll[oa+2]=_n.b,Me){var Ru=new f.Vector3(Ce[_l][0],Ce[_l][1],Ce[_l][2]);Ru.multiplyScalar(.1),Ru.set(Ru.x+j.x,Ru.y+j.y,Ru.z+j.z),j.intersectionShape.line.push(Ru)}}}}}getGoodCross(j,H,me,$e){for(var De=null,le=-1,Ce=0,Me=j.bonds.length;Ce<Me;Ce++)if(j.bonds[Ce]!=H.index){let _i=j.bonds[Ce],ll=this.atoms[_i],oa=new f.Vector3(ll.x,ll.y,ll.z).clone();oa.sub(me);let Ru=oa.clone();Ru.cross($e);var _n=Ru.lengthSq();if(_n>le&&(le=_n,De=Ru,le>.1))return De}return De}getSideBondV(j,H,me){var $e,De,le,Ce,Me,_n=new f.Vector3(j.x,j.y,j.z),_i=new f.Vector3(H.x,H.y,H.z),ll=_i.clone(),_l=null;if(ll.sub(_n),j.bonds.length===1)H.bonds.length===1?(_l=ll.clone(),Math.abs(_l.x)>1e-4?_l.y+=1:_l.x+=1):($e=(me+1)%H.bonds.length,De=H.bonds[$e],le=this.atoms[De],le.index==j.index&&($e=($e+1)%H.bonds.length,De=H.bonds[$e],le=this.atoms[De]),Ce=new f.Vector3(le.x,le.y,le.z),Me=Ce.clone(),Me.sub(_n),_l=Me.clone(),_l.cross(ll));else if(_l=this.getGoodCross(j,H,_n,ll),_l.lengthSq()<.01){var oa=this.getGoodCross(H,j,_n,ll);oa!=null&&(_l=oa)}return _l.lengthSq()<.01&&(_l=ll.clone(),Math.abs(_l.x)>1e-4?_l.y+=1:_l.x+=1),_l.cross(ll),_l.normalize(),_l}addLine(j,H,me,$e,De,le){j[me]=$e.x,j[me+1]=$e.y,j[me+2]=$e.z,H[me]=le.r,H[me+1]=le.g,H[me+2]=le.b,j[me+3]=De.x,j[me+4]=De.y,j[me+5]=De.z,H[me+3]=le.r,H[me+4]=le.g,H[me+5]=le.b}drawBondLines(j,H,me){if(j.style.line){var $e=j.style.line;if(!$e.hidden){var De,le,Ce,Me,_n=$e.linewidth||Z.defaultlineWidth;me[_n]||(me[_n]=new s.Geometry);for(var _i=me[_n].updateGeoGroup(6*j.bonds.length),ll=_i.vertexArray,_l=_i.colorArray,oa=0;oa<j.bonds.length;oa++){var Ru=j.bonds[oa],ga=H[Ru];if(ga.style.line&&!(j.index>=ga.index)){var _s=new f.Vector3(j.x,j.y,j.z),Sa=new f.Vector3(ga.x,ga.y,ga.z),Ra=_s.clone().add(Sa).multiplyScalar(.5),Da=!1,Fa=j.clickable||j.hoverable,Na=ga.clickable||ga.hoverable;(Fa||Na)&&(Fa&&(j.intersectionShape===void 0&&(j.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),j.intersectionShape.line.push(_s),j.intersectionShape.line.push(Ra)),Na&&(ga.intersectionShape===void 0&&(ga.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),ga.intersectionShape.line.push(Ra),ga.intersectionShape.line.push(Sa)));var _a=(0,_.getColorFromStyle)(j,j.style.line),Pa=(0,_.getColorFromStyle)(ga,ga.style.line);if(j.bondStyles&&j.bondStyles[oa]){var qc=j.bondStyles[oa];if(!qc.iswire)continue;qc.singleBond&&(Da=!0),typeof qc.color1<"u"&&(_a=d.CC.color(qc.color1)),typeof qc.color2<"u"&&(Pa=d.CC.color(qc.color2))}var uf=_i.vertices*3,_h,Uh;if(j.bondOrder[oa]>1&&j.bondOrder[oa]<4&&!Da){var Kd=this.getSideBondV(j,ga,oa),ud=Sa.clone();ud.sub(_s),j.bondOrder[oa]==2?(Kd.multiplyScalar(.1),De=_s.clone(),De.add(Kd),le=_s.clone(),le.sub(Kd),Ce=De.clone(),Ce.add(ud),Me=le.clone(),Me.add(ud),_a==Pa?(_i.vertices+=4,this.addLine(ll,_l,uf,De,Ce,_a),this.addLine(ll,_l,uf+6,le,Me,_a)):(_i.vertices+=8,ud.multiplyScalar(.5),_h=De.clone(),_h.add(ud),Uh=le.clone(),Uh.add(ud),this.addLine(ll,_l,uf,De,_h,_a),this.addLine(ll,_l,uf+6,_h,Ce,Pa),this.addLine(ll,_l,uf+12,le,Uh,_a),this.addLine(ll,_l,uf+18,Uh,Me,Pa))):j.bondOrder[oa]==3&&(Kd.multiplyScalar(.1),De=_s.clone(),De.add(Kd),le=_s.clone(),le.sub(Kd),Ce=De.clone(),Ce.add(ud),Me=le.clone(),Me.add(ud),_a==Pa?(_i.vertices+=6,this.addLine(ll,_l,uf,_s,Sa,_a),this.addLine(ll,_l,uf+6,De,Ce,_a),this.addLine(ll,_l,uf+12,le,Me,_a)):(_i.vertices+=12,ud.multiplyScalar(.5),_h=De.clone(),_h.add(ud),Uh=le.clone(),Uh.add(ud),this.addLine(ll,_l,uf,_s,Ra,_a),this.addLine(ll,_l,uf+6,Ra,Sa,Pa),this.addLine(ll,_l,uf+12,De,_h,_a),this.addLine(ll,_l,uf+18,_h,Ce,Pa),this.addLine(ll,_l,uf+24,le,Uh,_a),this.addLine(ll,_l,uf+30,Uh,Me,Pa)))}else _a==Pa?(_i.vertices+=2,this.addLine(ll,_l,uf,_s,Sa,_a)):(_i.vertices+=4,this.addLine(ll,_l,uf,_s,Ra,_a),this.addLine(ll,_l,uf+6,Ra,Sa,Pa))}}}}}drawAtomSphere(j,H){if(j.style.sphere){var me=j.style.sphere;if(!me.hidden){var $e=(0,_.getColorFromStyle)(j,me),De=this.getRadiusFromStyle(j,me);if((j.clickable===!0||j.hoverable)&&j.intersectionShape!==void 0){var le=new f.Vector3(j.x,j.y,j.z);j.intersectionShape.sphere.push(new o.Sphere(le,De))}p.GLDraw.drawSphere(H,j,De,$e)}}}drawAtomClickSphere(j){if(j.style.clicksphere){var H=j.style.clicksphere;if(!H.hidden){var me=this.getRadiusFromStyle(j,H);if((j.clickable===!0||j.hoverable)&&j.intersectionShape!==void 0){var $e=new f.Vector3(j.x,j.y,j.z);j.intersectionShape.sphere.push(new o.Sphere($e,me))}}}}drawAtomInstanced(j,H){if(j.style.sphere){var me=j.style.sphere;if(!me.hidden){var $e=this.getRadiusFromStyle(j,me),De=(0,_.getColorFromStyle)(j,me),le=H.updateGeoGroup(1),Ce=le.vertices,Me=Ce*3,_n=le.vertexArray,_i=le.colorArray,ll=le.radiusArray;if(_n[Me]=j.x,_n[Me+1]=j.y,_n[Me+2]=j.z,_i[Me]=De.r,_i[Me+1]=De.g,_i[Me+2]=De.b,ll[Ce]=$e,(j.clickable===!0||j.hoverable)&&j.intersectionShape!==void 0){var _l=new f.Vector3(j.x,j.y,j.z);j.intersectionShape.sphere.push(new o.Sphere(_l,$e))}le.vertices+=1}}}drawSphereImposter(j,H,me,$e){var De=j.updateGeoGroup(4),le,Ce=De.vertices,Me=Ce*3,_n=De.vertexArray,_i=De.colorArray;for(le=0;le<4;le++)_n[Me+3*le]=H.x,_n[Me+3*le+1]=H.y,_n[Me+3*le+2]=H.z;var ll=De.normalArray;for(le=0;le<4;le++)_i[Me+3*le]=$e.r,_i[Me+3*le+1]=$e.g,_i[Me+3*le+2]=$e.b;ll[Me+0]=-me,ll[Me+1]=me,ll[Me+2]=0,ll[Me+3]=-me,ll[Me+4]=-me,ll[Me+5]=0,ll[Me+6]=me,ll[Me+7]=-me,ll[Me+8]=0,ll[Me+9]=me,ll[Me+10]=me,ll[Me+11]=0,De.vertices+=4;var _l=De.faceArray,oa=De.faceidx;_l[oa+0]=Ce,_l[oa+1]=Ce+1,_l[oa+2]=Ce+2,_l[oa+3]=Ce+2,_l[oa+4]=Ce+3,_l[oa+5]=Ce,De.faceidx+=6}drawAtomImposter(j,H){if(j.style.sphere){var me=j.style.sphere;if(!me.hidden){var $e=this.getRadiusFromStyle(j,me),De=(0,_.getColorFromStyle)(j,me);if((j.clickable===!0||j.hoverable)&&j.intersectionShape!==void 0){var le=new f.Vector3(j.x,j.y,j.z);j.intersectionShape.sphere.push(new o.Sphere(le,$e))}this.drawSphereImposter(H,j,$e,De)}}}calculateDashes(j,H,me,$e,De){var le=Math.sqrt(Math.pow(j.x-H.x,2)+Math.pow(j.y-H.y,2)+Math.pow(j.z-H.z,2));me=Math.max(me,0),De=Math.max(De,0)+2*me,$e=Math.max($e,.001),$e+De>le&&($e=le,De=0);var Ce=Math.floor((le-$e)/($e+De))+1,Me=Ce*$e;De=(le-Me)/Ce;for(var _n,_i=new f.Vector3(j.x,j.y,j.z),ll=new f.Vector3((H.x-j.x)/(le/De),(H.y-j.y)/(le/De),(H.z-j.z)/(le/De)),_l=new f.Vector3((H.x-j.x)/(le/$e),(H.y-j.y)/(le/$e),(H.z-j.z)/(le/$e)),oa=[],Ru=0;Ru<Ce;Ru++)_n=new f.Vector3(_i.x+_l.x,_i.y+_l.y,_i.z+_l.z),oa.push({from:_i,to:_n}),_i=new f.Vector3(_n.x+ll.x,_n.y+ll.y,_n.z+ll.z);return oa}static drawStickImposter(j,H,me,$e,De,le=0,Ce=0){for(var Me=j.updateGeoGroup(4),_n=Me.vertices,_i=_n*3,ll=Me.vertexArray,_l=Me.colorArray,oa=Me.radiusArray,Ru=Me.normalArray,ga=De.r,_s=De.g,Sa=De.b,Ra=function(Pa){var qc=-Pa;return qc==0&&(qc=-1e-4),qc},Da=_i,Fa=0;Fa<4;Fa++)ll[Da]=H.x,Ru[Da]=me.x,_l[Da]=ga,Da++,ll[Da]=H.y,Ru[Da]=me.y,_l[Da]=_s,Da++,ll[Da]=H.z,Ru[Da]=me.z,Fa<2?_l[Da]=Sa:_l[Da]=Ra(Sa),Da++;Me.vertices+=4,oa[_n]=-$e,oa[_n+1]=$e,oa[_n+2]=-$e,oa[_n+3]=$e;var Na=Me.faceArray,_a=Me.faceidx;Na[_a+0]=_n,Na[_a+1]=_n+1,Na[_a+2]=_n+2,Na[_a+3]=_n+2,Na[_a+4]=_n+3,Na[_a+5]=_n,Me.faceidx+=6}drawBondSticks(j,H,me){var $e,De;if(j.style.stick){var le=j.style.stick;if(!le.hidden){var Ce=le.radius||this.defaultStickRadius,Me=le.doubleBondScaling||.4,_n=le.tripleBondScaling||.25,_i=(($e=le.dashedBondConfig)===null||$e===void 0?void 0:$e.dashLength)||.1,ll=((De=le.dashedBondConfig)===null||De===void 0?void 0:De.gapLength)||.25,_l=Ce,oa=le.singleBonds||!1,Ru=le.dashedBonds||!1,ga=0,_s=0,Sa,Ra,Da,Fa,Na,_a,Pa,qc,uf,_h,Uh,Kd=(0,_.getColorFromStyle)(j,le),ud,sc,Yd;!j.capDrawn&&j.bonds.length<4&&(ga=2);var wg=e0=>{var b0=me.imposter?Z.drawStickImposter:p.GLDraw.drawCylinder;return!Ru&&e0>=1?b0:(nb,vf,c0,Ba,$_,_A=0,ka=0,Pp=.1,_0=.25)=>{var Oc=this.calculateDashes(vf,c0,Ba,Pp,_0);Oc.forEach(zg=>{b0(nb,zg.from,zg.to,Ba,$_,_A,ka)})}};for(Da=0;Da<j.bonds.length;Da++){var Pf=wg(j.bondOrder[Da]),ac=j.bonds[Da],fc=H[ac];if(ud=sc=Yd=null,j.index<fc.index){var nd=fc.style;if(!nd.stick||nd.stick.hidden)continue;var a0=(0,_.getColorFromStyle)(fc,nd.stick);if(_l=Ce,Fa=oa,j.bondStyles&&j.bondStyles[Da]){if(Na=j.bondStyles[Da],Na.iswire)continue;Na.radius&&(_l=Na.radius),Na.singleBond&&(Fa=!0),typeof Na.color1<"u"&&(Kd=d.CC.color(Na.color1)),typeof Na.color2<"u"&&(a0=d.CC.color(Na.color2))}var _1=new f.Vector3(j.x,j.y,j.z),_$=new f.Vector3(fc.x,fc.y,fc.z);if(j.bondOrder[Da]<=1||Fa||j.bondOrder[Da]>3){if(j.bondOrder[Da]<1&&(_l*=j.bondOrder[Da]),!fc.capDrawn&&fc.bonds.length<4&&(_s=2),Kd!=a0?(ud=new f.Vector3().addVectors(_1,_$).multiplyScalar(.5),Pf(me,_1,ud,_l,Kd,ga,0,_i,ll),Pf(me,ud,_$,_l,a0,0,_s,_i,ll)):Pf(me,_1,_$,_l,Kd,ga,_s,_i,ll),Sa=j.clickable||j.hoverable,Ra=fc.clickable||fc.hoverable,Sa||Ra){if(ud||(ud=new f.Vector3().addVectors(_1,_$).multiplyScalar(.5)),Sa){var $b=new o.Cylinder(_1,ud,_l),Z_=new o.Sphere(_1,_l);j.intersectionShape.cylinder.push($b),j.intersectionShape.sphere.push(Z_)}if(Ra){var _b=new o.Cylinder(_$,ud,_l),cb=new o.Sphere(_$,_l);fc.intersectionShape.cylinder.push(_b),fc.intersectionShape.sphere.push(cb)}}}else if(j.bondOrder[Da]>1){var ib=0,_2=0;_l!=Ce&&(ib=2,_2=2);var Nb=_$.clone(),_D=null;Nb.sub(_1);var ec,Jc,ih,Bd,xg;_D=this.getSideBondV(j,fc,Da),j.bondOrder[Da]==2?(ec=_l*Me,_D.multiplyScalar(ec*1.5),Jc=_1.clone(),Jc.add(_D),ih=_1.clone(),ih.sub(_D),Bd=Jc.clone(),Bd.add(Nb),xg=ih.clone(),xg.add(Nb),Kd!=a0?(ud=new f.Vector3().addVectors(Jc,Bd).multiplyScalar(.5),sc=new f.Vector3().addVectors(ih,xg).multiplyScalar(.5),Pf(me,Jc,ud,ec,Kd,ib,0),Pf(me,ud,Bd,ec,a0,0,_2),Pf(me,ih,sc,ec,Kd,ib,0),Pf(me,sc,xg,ec,a0,0,_2)):(Pf(me,Jc,Bd,ec,Kd,ib,_2),Pf(me,ih,xg,ec,Kd,ib,_2)),Sa=j.clickable||j.hoverable,Ra=fc.clickable||fc.hoverable,(Sa||Ra)&&(ud||(ud=new f.Vector3().addVectors(Jc,Bd).multiplyScalar(.5)),sc||(sc=new f.Vector3().addVectors(ih,xg).multiplyScalar(.5)),Sa&&(_a=new o.Cylinder(Jc,ud,ec),Pa=new o.Cylinder(ih,sc,ec),j.intersectionShape.cylinder.push(_a),j.intersectionShape.cylinder.push(Pa)),Ra&&(uf=new o.Cylinder(Bd,ud,ec),_h=new o.Cylinder(xg,sc,ec),fc.intersectionShape.cylinder.push(uf),fc.intersectionShape.cylinder.push(_h)))):j.bondOrder[Da]==3&&(ec=_l*_n,_D.cross(Nb),_D.normalize(),_D.multiplyScalar(ec*3),Jc=_1.clone(),Jc.add(_D),ih=_1.clone(),ih.sub(_D),Bd=Jc.clone(),Bd.add(Nb),xg=ih.clone(),xg.add(Nb),Kd!=a0?(ud=new f.Vector3().addVectors(Jc,Bd).multiplyScalar(.5),sc=new f.Vector3().addVectors(ih,xg).multiplyScalar(.5),Yd=new f.Vector3().addVectors(_1,_$).multiplyScalar(.5),Pf(me,Jc,ud,ec,Kd,ib,0),Pf(me,ud,Bd,ec,a0,0,_2),Pf(me,_1,Yd,ec,Kd,ga,0),Pf(me,Yd,_$,ec,a0,0,_s),Pf(me,ih,sc,ec,Kd,ib,0),Pf(me,sc,xg,ec,a0,0,_2)):(Pf(me,Jc,Bd,ec,Kd,ib,_2),Pf(me,_1,_$,ec,Kd,ga,_s),Pf(me,ih,xg,ec,Kd,ib,_2)),Sa=j.clickable||j.hoverable,Ra=fc.clickable||fc.hoverable,(Sa||Ra)&&(ud||(ud=new f.Vector3().addVectors(Jc,Bd).multiplyScalar(.5)),sc||(sc=new f.Vector3().addVectors(ih,xg).multiplyScalar(.5)),Yd||(Yd=new f.Vector3().addVectors(_1,_$).multiplyScalar(.5)),Sa&&(_a=new o.Cylinder(Jc.clone(),ud.clone(),ec),Pa=new o.Cylinder(ih.clone(),sc.clone(),ec),qc=new o.Cylinder(_1.clone(),Yd.clone(),ec),j.intersectionShape.cylinder.push(_a),j.intersectionShape.cylinder.push(Pa),j.intersectionShape.cylinder.push(qc)),Ra&&(uf=new o.Cylinder(Bd.clone(),ud.clone(),ec),_h=new o.Cylinder(xg.clone(),sc.clone(),ec),Uh=new o.Cylinder(_$.clone(),Yd.clone(),ec),fc.intersectionShape.cylinder.push(uf),fc.intersectionShape.cylinder.push(_h),fc.intersectionShape.cylinder.push(Uh))))}}}var hb=!1,_S=0,rc=!1;for(Da=0;Da<j.bonds.length;Da++)Fa=oa,j.bondStyles&&j.bondStyles[Da]&&(Na=j.bondStyles[Da],Na.singleBond&&(Fa=!0),Na.radius&&Na.radius!=Ce&&(rc=!0)),(Fa||j.bondOrder[Da]==1)&&_S++;rc?_S>0&&(hb=!0):_S==0&&(j.bonds.length>0||le.showNonBonded)&&(hb=!0),hb&&(_l=Ce,me.imposter?this.drawSphereImposter(me.sphereGeometry,j,_l,Kd):p.GLDraw.drawSphere(me,j,_l,Kd))}}}createMolObj(j,H){H=H||{};var me=new s.Object3D,$e=[],De={},le={},Ce=this.drawAtomSphere,Me=null,_n=null;H.supportsImposters?(Ce=this.drawAtomImposter,Me=new s.Geometry(!0),Me.imposter=!0,_n=new s.Geometry(!0,!0),_n.imposter=!0,_n.sphereGeometry=new s.Geometry(!0),_n.sphereGeometry.imposter=!0,_n.drawnCaps={}):H.supportsAIA?(Ce=this.drawAtomInstanced,Me=new s.Geometry(!1,!0,!0),Me.instanced=!0,_n=new s.Geometry(!0)):(Me=new s.Geometry(!0),_n=new s.Geometry(!0));var _i,ll,_l,oa,Ru={},ga=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(_i=0,_l=j.length;_i<_l;_i++){var _s=j[_i];if(_s&&_s.style){(_s.clickable||_s.hoverable)&&_s.intersectionShape===void 0&&(_s.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),oa={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(ll in oa)_s.style[ll]?_s.style[ll].opacity?oa[ll]=parseFloat(_s.style[ll].opacity):oa[ll]=1:oa[ll]=void 0,Ru[ll]?oa[ll]!=null&&Ru[ll]!=oa[ll]&&(console.log("Warning: "+ll+" opacity is ambiguous"),Ru[ll]=1):Ru[ll]=oa[ll];Ce.call(this,_s,Me),this.drawAtomClickSphere(_s),this.drawAtomCross(_s,le),this.drawBondLines(_s,j,De),this.drawBondSticks(_s,j,_n),typeof _s.style.cartoon<"u"&&!_s.style.cartoon.hidden&&(_s.style.cartoon.color==="spectrum"&&typeof _s.resi=="number"&&!_s.hetflag&&(_s.resi<ga[0]&&(ga[0]=_s.resi),_s.resi>ga[1]&&(ga[1]=_s.resi)),$e.push(_s))}}if($e.length>0&&(0,v.drawCartoon)(me,$e,ga,this.defaultCartoonQuality),Me&&Me.vertices>0){Me.initTypedArrays();var Sa=null,Ra=null;Me.imposter?Sa=new s.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):Me.instanced?(Ra=new s.Geometry(!0),p.GLDraw.drawSphere(Ra,{x:0,y:0,z:0},1,new d.Color(.5,.5,.5)),Ra.initTypedArrays(),Sa=new s.InstancedMaterial({sphereMaterial:new s.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:Ra})):Sa=new s.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),Ru.sphere<1&&Ru.sphere>=0&&(Sa.transparent=!0,Sa.opacity=Ru.sphere),Ra=new s.Mesh(Me,Sa),me.add(Ra)}if(_n.vertices>0){var Da=null,Fa=null,Na=_n.sphereGeometry;(!Na||typeof Na.vertices>"u"||Na.vertices==0)&&(Na=null),_n.initTypedArrays(),Na&&Na.initTypedArrays();var _a={ambient:0,vertexColors:!0,reflectivity:0};_n.imposter?(Da=new s.StickImposterMaterial(_a),Fa=new s.SphereImposterMaterial(_a)):(Da=new s.MeshLambertMaterial(_a),Fa=new s.MeshLambertMaterial(_a),Da.wireframe&&(_n.setUpWireframe(),Na&&Na.setUpWireframe())),Ru.stick<1&&Ru.stick>=0&&(Da.transparent=!0,Da.opacity=Ru.stick,Fa.transparent=!0,Fa.opacity=Ru.stick);var Pa=new s.Mesh(_n,Da);if(me.add(Pa),Na){var qc=new s.Mesh(Na,Fa);me.add(qc)}}var uf;for(_i in De)if(De.hasOwnProperty(_i)){uf=_i;var _h=new s.LineBasicMaterial({linewidth:uf,vertexColors:!0});Ru.line<1&&Ru.line>=0&&(_h.transparent=!0,_h.opacity=Ru.line),De[_i].initTypedArrays();var Uh=new s.Line(De[_i],_h,s.LineStyle.LinePieces);me.add(Uh)}for(_i in le)if(le.hasOwnProperty(_i)){uf=_i;var Kd=new s.LineBasicMaterial({linewidth:uf,vertexColors:!0});Ru.cross<1&&Ru.cross>=0&&(Kd.transparent=!0,Kd.opacity=Ru.cross),le[_i].initTypedArrays();var ud=new s.Line(le[_i],Kd,s.LineStyle.LinePieces);me.add(ud)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var sc=new s.Object3D,Yd;for(Yd=0;Yd<this.modelData.symmetries.length;Yd++){var wg=new s.Object3D;wg=me.clone(),wg.matrix.copy(this.modelData.symmetries[Yd]),wg.matrixAutoUpdate=!1,sc.add(wg)}return sc}return me}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(j){this.atoms=j.atoms,this.frames=j.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const j=this.modelData.cryst;this.modelData.cryst.matrix=(0,f.conversionMatrix3)(j.a,j.b,j.c,j.alpha,j.beta,j.gamma)}return this.modelData.cryst}else return null}setCrystData(j,H,me,$e,De,le){j=j||1,H=H||1,me=me||1,$e=$e||90,De=De||90,le=le||90;const Ce=(0,f.conversionMatrix3)(j,H,me,$e,De,le);this.modelData.cryst={a:j,b:H,c:me,alpha:$e,beta:De,gamma:le,matrix:Ce}}setCrystMatrix(j){j=j||new f.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:j}}getSymmetries(){return typeof this.modelData.symmetries>"u"&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(j){typeof j>"u"?this.modelData.symmetries=[this.idMatrix]:this.modelData.symmetries=j}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(j,H,me,$e){var De=H-j;return De<-me?H+$e:De>me?H-$e:H}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var j=this.box[0],H=this.box[1],me=this.box[2],$e=j*.9,De=H*.9,le=me*.9,Ce=0;Ce<this.atomdfs.length;Ce++)for(var Me=this.atomdfs[Ce],_n=1;_n<Me.length;_n++){var _i=this.atoms[Me[_n][0]],ll=this.atoms[Me[_n][1]];_i.x=this.adjustCoord(ll.x,_i.x,$e,j),_i.y=this.adjustCoord(ll.y,_i.y,De,H),_i.z=this.adjustCoord(ll.z,_i.z,le,me)}}setFrame(j,H){var me=this.getNumFrames();let $e=this;return new Promise(function(De,le){if(me==0&&De(),(j<0||j>=me)&&(j=me-1),$e.frames.url!=null){var Ce=$e.frames.url;(0,_.getbin)(Ce+"/traj/frame/"+j+"/"+$e.frames.path,void 0,"POST",void 0).then(function(Me){for(var _n=new Float32Array(Me,44),_i=0,ll=0;ll<$e.atoms.length;ll++)$e.atoms[ll].x=_n[_i++],$e.atoms[ll].y=_n[_i++],$e.atoms[ll].z=_n[_i++];$e.box&&$e.atomdfs&&$e.adjustCoordinatesToBox(),De()}).catch(le)}else $e.atoms=$e.frames[j],De();$e.molObj=null,$e.modelDatas&&j<$e.modelDatas.length&&($e.modelData=$e.modelDatas[j],$e.unitCellObjects&&H&&(H.removeUnitCell($e),H.addUnitCell($e)))})}addFrame(j){this.frames.push(j)}vibrate(j=10,H=1,me=!1,$e,De){var le=0,Ce=j;me&&(le=-j,Ce=j),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),le<Ce&&(this.frames=[]),me&&(this.frames.origIndex=j);for(var Me=le;Me<Ce;Me++){var _n=[],_i=this.frames.length;if(Me==0&&!De){this.frames.push(this.atoms);continue}for(var ll=0;ll<this.atoms.length;ll++){var _l=(0,_.getAtomProperty)(this.atoms[ll],"dx"),oa=(0,_.getAtomProperty)(this.atoms[ll],"dy"),Ru=(0,_.getAtomProperty)(this.atoms[ll],"dz"),ga=new f.Vector3(_l,oa,Ru),_s=new f.Vector3(this.atoms[ll].x,this.atoms[ll].y,this.atoms[ll].z),Sa=Me*H/j;ga.multiplyScalar(Sa),_s.add(ga);var Ra={};for(var Da in this.atoms[ll])Ra[Da]=this.atoms[ll][Da];if(Ra.x=_s.x,Ra.y=_s.y,Ra.z=_s.z,_n.push(Ra),$e&&De){var Fa=(0,_.extend)({},De),Na=new f.Vector3(_l,oa,Ru);if(Na.multiplyScalar(H),Na.add(_s),Fa.start=_s,Fa.end=Na,Fa.frame=_i,!Fa.color){var _a=Ra.style.sphere;_a||(_a=Ra.style.stick),_a||(_a=Ra.style.line),Fa.color=(0,_.getColorFromStyle)(Ra,_a)}$e.addArrow(Fa)}}this.frames.push(_n)}}setAtomDefaults(j){for(let H=0;H<j.length;H++){let me=j[H];me&&(me.style=me.style||(0,_.deepCopy)(Z.defaultAtomStyle),me.color=me.color||this.ElementColors[me.elem]||this.defaultColor,me.model=this.id,(me.clickable||me.hoverable)&&(me.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(j,H,me={}){var $e=Z.parseMolData(j,H,me);this.dontDuplicateAtoms=!me.duplicateAssemblyAtoms;var De=$e.modelData;if(De&&(Array.isArray(De)?(this.modelData=De[0],me.frames&&(this.modelDatas=De)):this.modelData=De),$e.box?this.box=$e.box:this.box=null,this.frames.length==0){for(let Ce=0;Ce<$e.length;Ce++)$e[Ce].length!=0&&this.frames.push($e[Ce]);this.frames[0]&&(this.atoms=this.frames[0])}else if(me.frames)for(let Ce=0;Ce<$e.length;Ce++)this.frames.push($e[Ce]);else for(var le=0;le<$e.length;le++)this.addAtoms($e[le]);for(let Ce=0;Ce<this.frames.length;Ce++)this.setAtomDefaults(this.frames[Ce]);me.vibrate&&me.vibrate.frames&&me.vibrate.amplitude&&this.vibrate(me.vibrate.frames,me.vibrate.amplitude),me.style&&this.setStyle({},me.style)}setDontDuplicateAtoms(j){this.dontDuplicateAtoms=j}setModelData(j){this.modelData=j}propertyMatches(j,H){if(j==H)return!0;if(typeof H=="string"&&typeof j=="number"){var me=H.match(/(-?\d+)\s*-\s*(-?\d+)/);if(me){var $e=parseInt(me[1]),De=parseInt(me[2]);if(me&&j>=$e&&j<=De)return!0}}return!1}static deepCopyAndCache(j,H){if(typeof j!="object"||j==null||j.__cache_created)return j;const me={};for(const $e in j){const De=j[$e];if(Array.isArray(De)){me[$e]=[];for(let le=0;le<De.length;le++)me[$e].push(Z.deepCopyAndCache(De[le],H))}else typeof De=="object"&&$e!="properties"&&$e!="model"?me[$e]=Z.deepCopyAndCache(De,H):me[$e]=De;if($e=="and"||$e=="or"){const le=[];for(const Ce of me[$e]){const Me=new Set;for(const _n of H.selectedAtoms(Ce))Me.add(_n.index);le.push(Me)}if($e=="and"){const Ce=function(_n,_i){const ll=new Set;for(const _l of _i)_n.has(_l)&&ll.add(_l);return ll};let Me=new Set(le[0]);for(const _n of le.splice(1))Me=Ce(Me,_n);me[$e].__cached_results=Me}else if($e=="or"){const Ce=new Set;for(const Me of le)for(const _n of Me)Ce.add(_n);me[$e].__cached_results=Ce}}}return me.__cache_created=!0,me}atomIsSelected(j,H){if(typeof H>"u")return!0;var me=!!H.invert,$e=!0;for(var De in H)if(De=="and"||De=="or"||De=="not"){if(De=="not"){if(this.atomIsSelected(j,H[De])){$e=!1;break}}else if(H[De].__cached_results===void 0&&(H=Z.deepCopyAndCache(H,this)),$e=H[De].__cached_results.has(j.index),!$e)break}else if(De==="predicate"){if(!H.predicate(j)){$e=!1;break}}else if(De=="properties"&&j[De]){for(var le in H.properties)if(!le.startsWith("__cache")){if(typeof j.properties[le]>"u"){$e=!1;break}if(j.properties[le]!=H.properties[le]){$e=!1;break}}}else if(H.hasOwnProperty(De)&&!Z.ignoredKeys.has(De)&&!De.startsWith("__cache")){if(typeof j[De]>"u"){$e=!1;break}var Ce=!1;if(De==="bonds"){var Me=H[De];if(Me!=j.bonds.length){$e=!1;break}}else if(Array.isArray(H[De])){var _n=H[De],_i=j[De];for(let ll=0;ll<_n.length;ll++)if(this.propertyMatches(_i,_n[ll])){Ce=!0;break}if(!Ce){$e=!1;break}}else{let ll=H[De];if(!this.propertyMatches(j[De],ll)){$e=!1;break}}}return me?!$e:$e}static squaredDistance(j,H){var me=H.x-j.x,$e=H.y-j.y,De=H.z-j.z;return me*me+$e*$e+De*De}expandAtomList(j,H){if(H<=0)return j;for(var me=(0,_.getExtent)(j,void 0),$e=[[],[],[]],De=0;De<3;De++)$e[0][De]=me[0][De]-H,$e[1][De]=me[1][De]+H,$e[2][De]=me[2][De];var le=[];for(let _i=0;_i<this.atoms.length;_i++){var Ce=this.atoms[_i].x,Me=this.atoms[_i].y,_n=this.atoms[_i].z;Ce>=$e[0][0]&&Ce<=$e[1][0]&&Me>=$e[0][1]&&Me<=$e[1][1]&&_n>=$e[0][2]&&_n<=$e[1][2]&&(Ce>=me[0][0]&&Ce<=me[1][0]&&Me>=me[0][1]&&Me<=me[1][1]&&_n>=me[0][2]&&_n<=me[1][2]||le.push(this.atoms[_i]))}return le}static getFloat(j){return typeof j=="number"?j:parseFloat(j)}selectedAtoms(j,H){var me=[];j=Z.deepCopyAndCache(j||{},this),H||(H=this.atoms);for(var $e=H.length,De=0;De<$e;De++){var le=H[De];le&&this.atomIsSelected(le,j)&&me.push(le)}if(j.hasOwnProperty("expand")){const Ra=Z.getFloat(j.expand);let Da=this.expandAtomList(me,Ra),Fa=me.length;const Na=Ra*Ra;for(let _a=0;_a<Da.length;_a++)for(let Pa=0;Pa<Fa;Pa++){var Ce=Z.squaredDistance(Da[_a],me[Pa]);Ce<Na&&Ce>0&&me.push(Da[_a])}}if(j.hasOwnProperty("within")&&j.within.hasOwnProperty("sel")&&j.within.hasOwnProperty("distance")){var Me=this.selectedAtoms(j.within.sel,this.atoms),_n={};const Ra=Z.getFloat(j.within.distance),Da=Ra*Ra;for(let Fa=0;Fa<Me.length;Fa++)for(let Na=0;Na<me.length;Na++){let _a=Z.squaredDistance(Me[Fa],me[Na]);_a<Da&&_a>0&&(_n[Na]=1)}var _i=[];if(j.within.invert)for(let Fa=0;Fa<me.length;Fa++)_n[Fa]||_i.push(me[Fa]);else for(let Fa in _n)_i.push(me[Fa]);me=_i}if(j.hasOwnProperty("byres")){var ll={},_l=[],oa=[];for(let Ra=0;Ra<me.length;Ra++){let Da=me[Ra];var Ru=Da.chain,ga=Da.resi;if(ll[Ru]===void 0&&(ll[Ru]={}),Da.hasOwnProperty("resi")&&ll[Ru][ga]===void 0){for(ll[Ru][ga]=!0,oa.push(Da);oa.length>0;)if(Da=oa.pop(),Ru=Da.chain,ga=Da.resi,_l[Da.index]===void 0){_l[Da.index]=!0;for(var _s=0;_s<Da.bonds.length;_s++){var Sa=this.atoms[Da.bonds[_s]];_l[Sa.index]===void 0&&Sa.hasOwnProperty("resi")&&Sa.chain==Ru&&Sa.resi==ga&&(oa.push(Sa),me.push(Sa))}}}}}return me}addAtoms(j){this.molObj=null;var H=this.atoms.length,me=[],$e;for($e=0;$e<j.length;$e++)typeof j[$e].index>"u"&&(j[$e].index=$e),typeof j[$e].serial>"u"&&(j[$e].serial=$e),me[j[$e].index]=H+$e;for($e=0;$e<j.length;$e++){var De=j[$e],le=me[De.index],Ce=(0,_.extend)({},De);Ce.index=le,Ce.bonds=[],Ce.bondOrder=[],Ce.model=this.id,Ce.style=Ce.style||(0,_.deepCopy)(Z.defaultAtomStyle),typeof Ce.color>"u"&&(Ce.color=this.ElementColors[Ce.elem]||this.defaultColor);for(var Me=De.bonds?De.bonds.length:0,_n=0;_n<Me;_n++){var _i=me[De.bonds[_n]];typeof _i<"u"&&(Ce.bonds.push(_i),Ce.bondOrder.push(De.bondOrder?De.bondOrder[_n]:1))}this.atoms.push(Ce)}}assignBonds(){(0,G.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(j){this.molObj=null;var H=[],me;for(me=0;me<j.length;me++)H[j[me].index]=!0;var $e=[];for(me=0;me<this.atoms.length;me++){var De=this.atoms[me];H[De.index]||$e.push(De)}this.atoms=[],this.addAtoms($e)}setStyle(j,H,me){typeof H>"u"&&typeof me>"u"&&(H=j,j={}),j=j,typeof H=="string"&&(H=(0,_.specStringToObject)(H));var $e=!1,De=this,le=function(Me){var _n=De.selectedAtoms(j,Me);for(let _i=0;_i<Me.length;_i++)Me[_i]&&(Me[_i].capDrawn=!1);for(let _i=0;_i<_n.length;_i++){$e=!0,(_n[_i].clickable||_n[_i].hoverable)&&(_n[_i].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),me||(_n[_i].style={});for(let ll in H)H.hasOwnProperty(ll)&&(_n[_i].style[ll]=_n[_i].style[ll]||{},Object.assign(_n[_i].style[ll],H[ll]))}};if(j.frame!==void 0&&j.frame<this.frames.length){let Me=j.frame;Me<0&&(Me=this.frames.length+Me),le(this.frames[Me])}else{le(this.atoms);for(var Ce=0;Ce<this.frames.length;Ce++)this.frames[Ce]!==this.atoms&&le(this.frames[Ce])}$e&&(this.molObj=null)}setClickable(j,H,me){if(H=!!H,me=(0,_.makeFunction)(me),me===null){console.log("Callback is not a function");return}var $e=this.selectedAtoms(j,this.atoms),De=$e.length;for(let le=0;le<De;le++)$e[le].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},$e[le].clickable=H,me&&($e[le].callback=me);De>0&&(this.molObj=null)}setHoverable(j,H,me,$e){if(H=!!H,me=(0,_.makeFunction)(me),$e=(0,_.makeFunction)($e),me===null){console.log("Hover_callback is not a function");return}if($e===null){console.log("Unhover_callback is not a function");return}var De=this.selectedAtoms(j,this.atoms),le=De.length;for(let Ce=0;Ce<le;Ce++)De[Ce].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},De[Ce].hoverable=H,me&&(De[Ce].hover_callback=me),$e&&(De[Ce].unhover_callback=$e);le>0&&(this.molObj=null)}enableContextMenu(j,H){H=!!H;var me,$e=this.selectedAtoms(j,this.atoms),De=$e.length;for(me=0;me<De;me++)$e[me].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},$e[me].contextMenuEnabled=H;De>0&&(this.molObj=null)}setColorByElement(j,H){if(!(this.molObj!==null&&Z.sameObj(H,this.lastColors))){this.lastColors=H;var me=this.selectedAtoms(j,me);me.length>0&&(this.molObj=null);for(var $e=0;$e<me.length;$e++){var De=me[$e];typeof H[De.elem]<"u"&&(De.color=H[De.elem])}}}setColorByProperty(j,H,me,$e){var De,le,Ce=this.selectedAtoms(j,Ce);for(this.lastColors=null,Ce.length>0&&(this.molObj=null),typeof me=="string"&&typeof k.Gradient.builtinGradients[me]<"u"&&(me=new k.Gradient.builtinGradients[me]),me=me,$e||($e=me.range()),$e||($e=(0,_.getPropertyRange)(Ce,H)),De=0;De<Ce.length;De++){le=Ce[De];var Me=(0,_.getAtomProperty)(le,H);Me!=null&&(le.color=me.valueToHex(parseFloat(le.properties[H]),$e))}}setColorByFunction(j,H){var me=this.selectedAtoms(j,me);if(typeof H=="function"){this.lastColors=null,me.length>0&&(this.molObj=null);for(let $e=0;$e<me.length;$e++){let De=me[$e];De.color=H(De)}}}toCDObject(j=!1){var H={a:[],b:[]};j&&(H.s=[]);for(let $e=0;$e<this.atoms.length;$e++){let De={},le=this.atoms[$e];if(De.x=le.x,De.y=le.y,De.z=le.z,le.elem!="C"&&(De.l=le.elem),j){for(var me=0;me<H.s.length&&JSON.stringify(le.style)!==JSON.stringify(H.s[me]);)me++;me===H.s.length&&H.s.push(le.style),me!==0&&(De.s=me)}H.a.push(De);for(let Ce=0;Ce<le.bonds.length;Ce++){let Me=$e,_n=le.bonds[Ce];if(Me>=_n)continue;let _i={b:Me,e:_n},ll=le.bondOrder[Ce];ll!=1&&(_i.o=ll),H.b.push(_i)}}return H}globj(j,H){(this.molObj===null||H.regen)&&(this.molObj=this.createMolObj(this.atoms,H),this.renderedMolObj&&(j.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),j.add(this.renderedMolObj))}exportVRML(){var j=this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1});return j.vrml()}removegl(j){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),j.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(j,H,me,$e){for(var De=this.selectedAtoms(H,De),le=(0,_.deepCopy)($e),Ce=0;Ce<De.length;Ce++){var Me=De[Ce],_n=null;typeof Me[j]<"u"?_n=String(Me[j]):typeof Me.properties[j]<"u"&&(_n=String(Me.properties[j])),_n!=null&&(le.position=Me,me.addLabel(_n,le))}}addResLabels(j,H,me,$e=!1){var De=[],le=function(Me,_n){for(var _i=Me.selectedAtoms(j,_i),ll={},_l=0;_l<_i.length;_l++){var oa=_i[_l],Ru=oa.chain,ga=oa.resn,_s=oa.resi,Sa=ga+""+_s;ll[Ru]||(ll[Ru]={}),ll[Ru][Sa]||(ll[Ru][Sa]=[]),ll[Ru][Sa].push(oa)}var Ra=(0,_.deepCopy)(me);for(let Fa in ll)if(ll.hasOwnProperty(Fa)){var Da=ll[Fa];for(let Na in Da)if(Da.hasOwnProperty(Na)){let _a=Da[Na],Pa=new f.Vector3(0,0,0);for(let uf=0;uf<_a.length;uf++){let _h=_a[uf];Pa.x+=_h.x,Pa.y+=_h.y,Pa.z+=_h.z}Pa.divideScalar(_a.length),Ra.position=Pa,Ra.frame=_n;let qc=H.addLabel(Na,Ra,void 0,!0);De.push(qc)}}};if($e){var Ce=this.getNumFrames();let Me=this.atoms;for(let _n=0;_n<Ce;_n++)this.frames[_n]&&(this.atoms=this.frames[_n],le(this,_n));this.atoms=Me}else le(this);return De}setupDFS(){this.atomdfs=[];var j=this,H=new Int8Array(this.atoms.length);H.fill(0);for(var me=function(Ce,Me,_n){_n.push([Ce,Me]);var _i=j.atoms[Ce];H[Ce]=1;for(var ll=0;ll<_i.bonds.length;ll++){var _l=_i.bonds[ll];j.atoms[_l]&&!H[_l]&&me(_l,Ce,_n)}},$e=0;$e<this.atoms.length;$e++){var De=this.atoms[$e];if(De&&!H[$e]){var le=[];me($e,-1,le),this.atomdfs.push(le)}}}setCoordinatesFromURL(j,H){this.frames=[];var me=this;return this.box&&this.setupDFS(),j.startsWith("http")||(j="http://"+j),(0,_.get)(j+"/traj/numframes/"+H,function($e){if(!isNaN(parseInt($e)))return me.frames.push(me.atoms),me.frames.numFrames=$e,me.frames.url=j,me.frames.path=H,me.setFrame(0)})}setCoordinates(j,H){if(H=H||"",!j)return[];if(/\.gz$/.test(H)){H=H.replace(/\.gz$/,"");try{j=(0,_.inflateString)(j)}catch(ll){console.log(ll)}}var me={mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""};if(me.hasOwnProperty(H)){this.frames=[];for(var $e=this.atoms.length,De=Z.parseCrd(j,H),le=0;le<De.length;){for(var Ce=[],Me=0;Me<$e;Me++){var _n={};for(var _i in this.atoms[Me])_n[_i]=this.atoms[Me][_i];Ce[Me]=_n,Ce[Me].x=De[le++],Ce[Me].y=De[le++],Ce[Me].z=De[le++]}this.frames.push(Ce)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(j){}static parseCrd(j,H){var me=[],$e=0;if(H=="pdb")for(var De=j.indexOf(`
ATOM`);De!=-1;){for(;j.slice(De,De+5)==`
ATOM`||j.slice(De,De+7)==`
HETATM`;)me[$e++]=parseFloat(j.slice(De+31,De+39)),me[$e++]=parseFloat(j.slice(De+39,De+47)),me[$e++]=parseFloat(j.slice(De+47,De+55)),De=j.indexOf(`
`,De+54),j.slice(De,De+4)==`
TER`&&(De=j.indexOf(`
`,De+5));De=j.indexOf(`
ATOM`,De)}else if(H=="netcdf"){var le=new L.NetCDFReader(j);me=[].concat.apply([],le.getDataVariable("coordinates"))}else{if(H=="array"||Array.isArray(j))return j.flat(2);{let Ce=j.indexOf(`
`);H=="inpcrd"&&(Ce=j.indexOf(`
`,Ce+1)),j=j.slice(Ce+1),me=j.match(/\S+/g).map(parseFloat)}}return me}static parseMolData(j,H="",me){if(!j)return[];if(/\.gz$/.test(H)){H=H.replace(/\.gz$/,"");try{H.match(/bcif/i)?j=(0,_.inflateString)(j,!1):j=(0,_.inflateString)(j)}catch(le){console.log(le)}}typeof P.Parsers[H]>"u"&&(H=H.split(".").pop(),typeof P.Parsers[H]>"u"&&(console.log("Unknown format: "+H),j instanceof Uint8Array?H="bcif":j.match(/^@<TRIPOS>MOLECULE/gm)?H="mol2":j.match(/^data_/gm)&&j.match(/^loop_/gm)?H="cif":j.match(/^HETATM/gm)||j.match(/^ATOM/gm)?H="pdb":j.match(/ITEM: TIMESTEP/gm)?H="lammpstrj":j.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?H="sdf":j.match(/^%VERSION\s+VERSION_STAMP/gm)?H="prmtop":H="xyz",console.log("Best guess: "+H)));var $e=P.Parsers[H],De=$e(j,me);return De}}Z.defaultAtomStyle={line:{}},Z.defaultlineWidth=1,Z.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},Z.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"])},"./src/GLShape.ts":(n,t,i)=>{i.r(t),i.d(t,{GLShape:()=>L,splitMesh:()=>G});var s=i("./src/WebGL/index.ts"),o=i("./src/WebGL/shapes/index.ts"),f=i("./src/WebGL/math/index.ts"),d=i("./src/colors.ts"),p=i("./src/ProteinSurface4.ts"),v=i("./src/VolumeData.ts"),_=i("./src/GLDraw.ts"),k=i("./src/glcartoon.ts"),P=i("./src/utilities.ts");class L{static finalizeGeo(W){var j=W.updateGeoGroup(0);j.vertices>0&&j.truncateArrayBuffers(!0,!0)}static updateColor(W,j){j=j||d.CC.color(j),W.colorsNeedUpdate=!0;var H,me,$e;j.constructor!==Array&&(H=j.r,me=j.g,$e=j.b);for(let De in W.geometryGroups){let le=W.geometryGroups[De],Ce=le.colorArray;for(let Me=0,_n=le.vertices;Me<_n;++Me){if(j.constructor===Array){let _i=j[Me];H=_i.r,me=_i.g,$e=_i.b}Ce[Me*3]=H,Ce[Me*3+1]=me,Ce[Me*3+2]=$e}}}static drawArrow(W,j,H){var me=H.start,$e=H.end,De=H.radius,le=H.radiusRatio,Ce=H.mid,Me=H.midpos;if(!(me&&$e))return;var _n=j.updateGeoGroup(51),_i=new f.Vector3($e.x,$e.y,$e.z).sub(me);if(Me){let vf=_i.length();Me>0?Ce=Me/vf:Ce=(vf+Me)/vf}_i.multiplyScalar(Ce);var ll=new f.Vector3(me.x,me.y,me.z).add(_i),_l=_i.clone().negate();let oa=new f.Vector3(me.x,me.y,me.z);W.intersectionShape.cylinder.push(new o.Cylinder(oa,ll.clone(),De)),W.intersectionShape.sphere.push(new o.Sphere(oa,De));var Ru=[];Ru[0]=_i.clone(),Math.abs(Ru[0].x)>1e-4?Ru[0].y+=1:Ru[0].x+=1,Ru[0].cross(_i),Ru[0].normalize(),Ru[4]=Ru[0].clone(),Ru[4].crossVectors(Ru[0],_i),Ru[4].normalize(),Ru[8]=Ru[0].clone().negate(),Ru[12]=Ru[4].clone().negate(),Ru[2]=Ru[0].clone().add(Ru[4]).normalize(),Ru[6]=Ru[4].clone().add(Ru[8]).normalize(),Ru[10]=Ru[8].clone().add(Ru[12]).normalize(),Ru[14]=Ru[12].clone().add(Ru[0]).normalize(),Ru[1]=Ru[0].clone().add(Ru[2]).normalize(),Ru[3]=Ru[2].clone().add(Ru[4]).normalize(),Ru[5]=Ru[4].clone().add(Ru[6]).normalize(),Ru[7]=Ru[6].clone().add(Ru[8]).normalize(),Ru[9]=Ru[8].clone().add(Ru[10]).normalize(),Ru[11]=Ru[10].clone().add(Ru[12]).normalize(),Ru[13]=Ru[12].clone().add(Ru[14]).normalize(),Ru[15]=Ru[14].clone().add(Ru[0]).normalize();var ga=_n.vertices,_s=_n.vertexArray,Sa=_n.faceArray,Ra=_n.normalArray,Da=_n.lineArray,Fa,Na,_a;for(Na=0,_a=Ru.length;Na<_a;++Na){Fa=3*(ga+3*Na);var Pa=Ru[Na].clone().multiplyScalar(De).add(me),qc=Ru[Na].clone().multiplyScalar(De).add(ll),uf=Ru[Na].clone().multiplyScalar(De*le).add(ll);if(_s[Fa]=Pa.x,_s[Fa+1]=Pa.y,_s[Fa+2]=Pa.z,_s[Fa+3]=qc.x,_s[Fa+4]=qc.y,_s[Fa+5]=qc.z,_s[Fa+6]=uf.x,_s[Fa+7]=uf.y,_s[Fa+8]=uf.z,Na>0){var _h=_s[Fa-3],Uh=_s[Fa-2],Kd=_s[Fa-1],ud=new f.Vector3(_h,Uh,Kd),sc=new f.Vector3($e.x,$e.y,$e.z),Yd=ll.clone(),wg=new f.Vector3(uf.x,uf.y,uf.z);W.intersectionShape.triangle.push(new o.Triangle(wg,sc,ud)),W.intersectionShape.triangle.push(new o.Triangle(ud.clone(),Yd,wg.clone()))}}_n.vertices+=48,Fa=_n.vertices*3,_s[Fa]=me.x,_s[Fa+1]=me.y,_s[Fa+2]=me.z,_s[Fa+3]=ll.x,_s[Fa+4]=ll.y,_s[Fa+5]=ll.z,_s[Fa+6]=$e.x,_s[Fa+7]=$e.y,_s[Fa+8]=$e.z,_n.vertices+=3;var Pf,ac,fc,nd,a0,_1,_$,$b,Z_,_b,cb,ib,_2,Nb,_D,ec,Jc,ih,Bd,xg=_n.vertices-3,hb=_n.vertices-2,_S=_n.vertices-1,rc=xg*3,e0=hb*3,b0=_S*3;for(Na=0,_a=Ru.length-1;Na<_a;++Na){var nb=ga+3*Na;Fa=nb*3,ac=_n.faceidx,fc=_n.lineidx,nd=nb,_b=nd*3,a0=nb+1,cb=a0*3,_1=nb+2,ib=_1*3,_$=nb+4,_2=_$*3,$b=nb+5,Nb=$b*3,Z_=nb+3,_D=Z_*3,ec=Jc=Ru[Na],ih=Bd=Ru[Na+1],Ra[_b]=ec.x,Ra[cb]=Jc.x,Ra[_D]=Bd.x,Ra[_b+1]=ec.y,Ra[cb+1]=Jc.y,Ra[_D+1]=Bd.y,Ra[_b+2]=ec.z,Ra[cb+2]=Jc.z,Ra[_D+2]=Bd.z,Ra[cb]=Jc.x,Ra[_2]=ih.x,Ra[_D]=Bd.x,Ra[cb+1]=Jc.y,Ra[_2+1]=ih.y,Ra[_D+1]=Bd.y,Ra[cb+2]=Jc.z,Ra[_2+2]=ih.z,Ra[_D+2]=Bd.z,Ra[ib]=Jc.x,Ra[Nb]=ih.x,Ra[ib+1]=Jc.y,Ra[Nb+1]=ih.y,Ra[ib+2]=Jc.z,Ra[Nb+2]=ih.z,Sa[ac]=nd,Sa[ac+1]=a0,Sa[ac+2]=Z_,Sa[ac+3]=a0,Sa[ac+4]=_$,Sa[ac+5]=Z_,Sa[ac+6]=nd,Sa[ac+7]=Z_,Sa[ac+8]=xg,Sa[ac+9]=_1,Sa[ac+10]=hb,Sa[ac+11]=$b,Sa[ac+12]=_1,Sa[ac+13]=_S,Sa[ac+14]=$b,Da[fc]=nd,Da[fc+1]=a0,Da[fc+2]=nd,Da[fc+3]=Z_,Da[fc+4]=_$,Da[fc+5]=Z_,Da[fc+6]=nd,Da[fc+7]=Z_,Da[fc+8]=_1,Da[fc+9]=a0,Da[fc+10]=_1,Da[fc+11]=$b,Da[fc+12]=_$,Da[fc+13]=$b,Da[fc+14]=_1,Da[fc+15]=_S,Da[fc+16]=_1,Da[fc+17]=$b,Da[fc+18]=_S,Da[fc+19]=$b,_n.faceidx+=15,_n.lineidx+=20}Pf=[ga+45,ga+46,ga+1,ga,ga+47,ga+2],ac=_n.faceidx,fc=_n.lineidx,nd=Pf[0],_b=nd*3,a0=Pf[1],cb=a0*3,_1=Pf[4],ib=_1*3,_$=Pf[2],_2=_$*3,$b=Pf[5],Nb=$b*3,Z_=Pf[3],_D=Z_*3,ec=Jc=Ru[15],ih=Bd=Ru[0],Ra[_b]=ec.x,Ra[cb]=Jc.x,Ra[_D]=Bd.x,Ra[_b+1]=ec.y,Ra[cb+1]=Jc.y,Ra[_D+1]=Bd.y,Ra[_b+2]=ec.z,Ra[cb+2]=Jc.z,Ra[_D+2]=Bd.z,Ra[cb]=Jc.x,Ra[_2]=ih.x,Ra[_D]=Bd.x,Ra[cb+1]=Jc.y,Ra[_2+1]=ih.y,Ra[_D+1]=Bd.y,Ra[cb+2]=Jc.z,Ra[_2+2]=ih.z,Ra[_D+2]=Bd.z,Ra[ib]=Jc.x,Ra[Nb]=ih.x,Ra[ib+1]=Jc.y,Ra[Nb+1]=ih.y,Ra[ib+2]=Jc.z,Ra[Nb+2]=ih.z,_i.normalize(),_l.normalize(),Ra[rc]=_l.x,Ra[e0]=Ra[b0]=_i.x,Ra[rc+1]=_l.y,Ra[e0+1]=Ra[b0+1]=_i.y,Ra[rc+2]=_l.z,Ra[e0+2]=Ra[b0+2]=_i.z,Sa[ac]=nd,Sa[ac+1]=a0,Sa[ac+2]=Z_,Sa[ac+3]=a0,Sa[ac+4]=_$,Sa[ac+5]=Z_,Sa[ac+6]=nd,Sa[ac+7]=Z_,Sa[ac+8]=xg,Sa[ac+9]=_1,Sa[ac+10]=hb,Sa[ac+11]=$b,Sa[ac+12]=_1,Sa[ac+13]=_S,Sa[ac+14]=$b,Da[fc]=nd,Da[fc+1]=a0,Da[fc+2]=nd,Da[fc+3]=Z_,Da[fc+4]=_$,Da[fc+5]=Z_,Da[fc+6]=nd,Da[fc+7]=Z_,Da[fc+8]=_1,Da[fc+9]=a0,Da[fc+10]=_1,Da[fc+11]=$b,Da[fc+12]=_$,Da[fc+13]=$b,Da[fc+14]=_1,Da[fc+15]=_S,Da[fc+16]=_1,Da[fc+17]=$b,Da[fc+18]=_S,Da[fc+19]=$b,_n.faceidx+=15,_n.lineidx+=20}static updateBoundingFromPoints(W,j,H,me){W.center.set(0,0,0);let $e=1/0,De=1/0,le=1/0,Ce=-1/0,Me=-1/0,_n=-1/0;W.box&&($e=W.box.min.x,Ce=W.box.max.x,De=W.box.min.y,Me=W.box.max.y,le=W.box.min.z,_n=W.box.max.z);for(let oa=0,Ru=me;oa<Ru;oa++){var _i=H[oa*3],ll=H[oa*3+1],_l=H[oa*3+2];_i<$e&&($e=_i),ll<De&&(De=ll),_l<le&&(le=_l),_i>Ce&&(Ce=_i),ll>Me&&(Me=ll),_l>_n&&(_n=_l)}W.center.set((Ce+$e)/2,(Me+De)/2,(_n+le)/2),W.radius=W.center.distanceTo({x:Ce,y:Me,z:_n}),W.box={min:{x:$e,y:De,z:le},max:{x:Ce,y:Me,z:_n}}}static addCustomGeo(W,j,H,me,$e){var De=j.addGeoGroup(),le=H.vertexArr,Ce=H.normalArr,Me=H.faceArr;De.vertices=le.length,De.faceidx=Me.length;var _n,_i,ll,_l,oa,Ru,ga,_s,Sa,Ra=De.vertexArray,Da=De.colorArray;for(me.constructor!==Array&&(_s=me.r,Sa=me.g,_l=me.b),Ru=0,ga=De.vertices;Ru<ga;++Ru)_n=Ru*3,_i=le[Ru],Ra[_n]=_i.x,Ra[_n+1]=_i.y,Ra[_n+2]=_i.z,me.constructor===Array&&(oa=me[Ru],_s=oa.r,Sa=oa.g,_l=oa.b),Da[_n]=_s,Da[_n+1]=Sa,Da[_n+2]=_l;if($e)for(Ru=0,ga=De.faceidx/3;Ru<ga;++Ru){_n=Ru*3,ll=Me[_n],_l=Me[_n+1],oa=Me[_n+2];var Fa=new f.Vector3,Na=new f.Vector3,_a=new f.Vector3;W.intersectionShape.triangle.push(new o.Triangle(Fa.copy(le[ll]),Na.copy(le[_l]),_a.copy(le[oa])))}if($e){var Pa=new f.Vector3(0,0,0),qc=0;for(let Uh=0;Uh<j.geometryGroups.length;Uh++)Pa.add(j.geometryGroups[Uh].getCentroid()),qc++;Pa.divideScalar(qc),L.updateBoundingFromPoints(W.boundingSphere,{centroid:Pa},Ra,De.vertices)}if(De.faceArray=new Uint16Array(Me),De.truncateArrayBuffers(!0,!0),Ce.length<De.vertices)De.setNormals();else{var uf=De.normalArray=new Float32Array(De.vertices*3),_h;for(Ru=0,ga=De.vertices;Ru<ga;++Ru)_n=Ru*3,_h=Ce[Ru],uf[_n]=_h.x,uf[_n+1]=_h.y,uf[_n+2]=_h.z}De.setLineIndices(),De.lineidx=De.lineArray.length}static updateFromStyle(W,j){typeof j.color<"u"?(W.color=j.color||new d.Color,j.color instanceof d.Color||(W.color=d.CC.color(j.color))):W.color=d.CC.color(0),W.wireframe=!!j.wireframe,W.opacity=j.alpha?(0,f.clamp)(j.alpha,0,1):1,typeof j.opacity<"u"&&(W.opacity=(0,f.clamp)(j.opacity,0,1)),W.side=j.side!==void 0?j.side:s.DoubleSide,W.linewidth=typeof j.linewidth>"u"?1:j.linewidth,W.clickable=!!j.clickable,W.callback=(0,P.makeFunction)(j.callback),W.hoverable=!!j.hoverable,W.hover_callback=(0,P.makeFunction)(j.hover_callback),W.unhover_callback=(0,P.makeFunction)(j.unhover_callback),W.contextMenuEnabled=!!j.contextMenuEnabled,W.hidden=j.hidden,W.frame=j.frame}constructor(W){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=s.DoubleSide,this.stylespec=W||{},this.boundingSphere=new o.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},L.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new s.Geometry(!0),this.linegeo=new s.Geometry(!0)}updateStyle(W){for(var j in W)this.stylespec[j]=W[j];if(L.updateFromStyle(this,this.stylespec),W.voldata&&W.volscheme){(0,P.adjustVolumeStyle)(W);const H=W.volscheme,me=W.voldata,$e=d.CC,De=H.range()||[-1,1];this.geo.setColors(function(le,Ce,Me){let _n=me.getVal(le,Ce,Me);return $e.color(H.valueToHex(_n,De))}),delete this.color}}addCustom(W){W.vertexArr=W.vertexArr||[],W.faceArr=W.faceArr||[],W.normalArr=W.normalArr||[],L.drawCustom(this,this.geo,W)}addSphere(W){W.center||(W.center=new f.Vector3(0,0,0)),W.radius=W.radius?(0,f.clamp)(W.radius,0,1/0):1.5,W.color=d.CC.color(W.color),this.intersectionShape.sphere.push(new o.Sphere(W.center,W.radius)),_.GLDraw.drawSphere(this.geo,W.center,W.radius,W.color,W.quality),this.components.push({centroid:new f.Vector3(W.center.x,W.center.y,W.center.z)});var j=this.geo.updateGeoGroup(0);L.updateBoundingFromPoints(this.boundingSphere,this.components,j.vertexArray,j.vertices)}addBox(W){var j=W.dimensions||{w:1,h:1,d:1},H;typeof j.w=="number"?H={x:j.w,y:0,z:0}:H=j.w;var me;typeof j.h=="number"?me={x:0,y:j.h,z:0}:me=j.h;var $e;typeof j.d=="number"?$e={x:0,y:0,z:j.d}:$e=j.d;var De=W.corner;De==null&&(W.center!==void 0?De={x:W.center.x-.5*(H.x+me.x+$e.x),y:W.center.y-.5*(H.y+me.y+$e.y),z:W.center.z-.5*(H.z+me.z+$e.z)}:De={x:0,y:0,z:0});var le=[{x:De.x,y:De.y,z:De.z},{x:De.x+H.x,y:De.y+H.y,z:De.z+H.z},{x:De.x+me.x,y:De.y+me.y,z:De.z+me.z},{x:De.x+H.x+me.x,y:De.y+H.y+me.y,z:De.z+H.z+me.z},{x:De.x+$e.x,y:De.y+$e.y,z:De.z+$e.z},{x:De.x+H.x+$e.x,y:De.y+H.y+$e.y,z:De.z+H.z+$e.z},{x:De.x+me.x+$e.x,y:De.y+me.y+$e.y,z:De.z+me.z+$e.z},{x:De.x+H.x+me.x+$e.x,y:De.y+H.y+me.y+$e.y,z:De.z+H.z+me.z+$e.z}],Ce=[],Me=[];Ce.splice(Ce.length,0,le[0],le[1],le[2],le[3]),Me.splice(Me.length,0,0,2,1,1,2,3);var _n=4;Ce.splice(Ce.length,0,le[2],le[3],le[6],le[7]),Me.splice(Me.length,0,_n+0,_n+2,_n+1,_n+1,_n+2,_n+3),_n+=4,Ce.splice(Ce.length,0,le[4],le[5],le[0],le[1]),Me.splice(Me.length,0,_n+0,_n+2,_n+1,_n+1,_n+2,_n+3),_n+=4,Ce.splice(Ce.length,0,le[6],le[7],le[4],le[5]),Me.splice(Me.length,0,_n+0,_n+2,_n+1,_n+1,_n+2,_n+3),_n+=4,Ce.splice(Ce.length,0,le[3],le[1],le[7],le[5]),Me.splice(Me.length,0,_n+0,_n+2,_n+1,_n+1,_n+2,_n+3),_n+=4,Ce.splice(Ce.length,0,le[2],le[6],le[0],le[4]),Me.splice(Me.length,0,_n+0,_n+2,_n+1,_n+1,_n+2,_n+3),_n+=4;var _i=(0,P.extend)({},W);_i.vertexArr=Ce,_i.faceArr=Me,_i.normalArr=[],L.drawCustom(this,this.geo,_i);var ll=new f.Vector3;this.components.push({centroid:ll.addVectors(le[0],le[7]).multiplyScalar(.5)});var _l=this.geo.updateGeoGroup(0);L.updateBoundingFromPoints(this.boundingSphere,this.components,_l.vertexArray,_l.vertices)}addCylinder(W){var j,H;W.start?j=new f.Vector3(W.start.x||0,W.start.y||0,W.start.z||0):j=new f.Vector3(0,0,0),W.end?(H=new f.Vector3(W.end.x,W.end.y||0,W.end.z||0),typeof H.x>"u"&&(H.x=3)):H=new f.Vector3(0,0,0);var me=W.radius||.1,$e=d.CC.color(W.color);this.intersectionShape.cylinder.push(new o.Cylinder(j,H,me)),_.GLDraw.drawCylinder(this.geo,j,H,me,$e,W.fromCap,W.toCap);var De=new f.Vector3;this.components.push({centroid:De.addVectors(j,H).multiplyScalar(.5)});var le=this.geo.updateGeoGroup(0);L.updateBoundingFromPoints(this.boundingSphere,this.components,le.vertexArray,le.vertices)}addDashedCylinder(W){W.dashLength=W.dashLength||.25,W.gapLength=W.gapLength||.25;var j;W.start?j=new f.Vector3(W.start.x||0,W.start.y||0,W.start.z||0):j=new f.Vector3(0,0,0);var H;W.end?(H=new f.Vector3(W.end.x,W.end.y||0,W.end.z||0),typeof H.x>"u"&&(H.x=3)):H=new f.Vector3(3,0,0);for(var me=W.radius||.1,$e=d.CC.color(W.color),De=Math.sqrt(Math.pow(j.x-H.x,2)+Math.pow(j.y-H.y,2)+Math.pow(j.z-H.z,2)),le=De/(W.gapLength+W.dashLength),Ce=new f.Vector3(W.start.x||0,W.start.y||0,W.start.z||0),Me=new f.Vector3(W.end.x,W.end.y||0,W.end.z||0),_n=new f.Vector3((H.x-j.x)/(De/W.gapLength),(H.y-j.y)/(De/W.gapLength),(H.z-j.z)/(De/W.gapLength)),_i=new f.Vector3((H.x-j.x)/(De/W.dashLength),(H.y-j.y)/(De/W.dashLength),(H.z-j.z)/(De/W.dashLength)),ll=0;ll<le;ll++)Me=new f.Vector3(Ce.x+_i.x,Ce.y+_i.y,Ce.z+_i.z),this.intersectionShape.cylinder.push(new o.Cylinder(Ce,Me,me)),_.GLDraw.drawCylinder(this.geo,Ce,Me,me,$e,W.fromCap,W.toCap),Ce=new f.Vector3(Me.x+_n.x,Me.y+_n.y,Me.z+_n.z);var _l=new f.Vector3;this.components.push({centroid:_l.addVectors(j,H).multiplyScalar(.5)});var oa=this.geo.updateGeoGroup(0);L.updateBoundingFromPoints(this.boundingSphere,this.components,oa.vertexArray,oa.vertices)}addCurve(W){W.points=W.points||[],W.smooth=W.smooth||10,typeof W.fromCap>"u"&&(W.fromCap=2),typeof W.toCap>"u"&&(W.toCap=2);var j=(0,k.subdivide_spline)(W.points,W.smooth);if(j.length<3){console.log("Too few points in addCurve");return}var H=W.radius||.1,me=d.CC.color(W.color),$e=0,De=j.length-1,le=j[0].distanceTo(j[1]),Ce=Math.ceil(2*H/le);if(W.toArrow){De-=Ce;let ll={start:j[De],end:j[j.length-1],radius:H,color:me,mid:1e-4};this.addArrow(ll)}if(W.fromArrow){$e+=Ce;let ll={start:j[$e],end:j[0],radius:H,color:me,mid:1e-4};this.addArrow(ll)}for(var Me=Math.ceil(j.length/2),_n={radius:H,color:me,fromCap:2,toCap:2},_i=$e;_i<De;_i++)_n.start=j[_i],_n.end=j[_i+1],_n.fromCap=2,_n.toCap=2,_i<Me?(_n.fromCap=2,_n.toCap=0):_i>Me?(_n.fromCap=0,_n.toCap=2):(_n.fromCap=2,_n.toCap=2),this.addCylinder(_n)}addLine(W){var j,H;W.start?j=new f.Vector3(W.start.x||0,W.start.y||0,W.start.z||0):j=new f.Vector3(0,0,0),W.end?(H=new f.Vector3(W.end.x,W.end.y||0,W.end.z||0),typeof H.x>"u"&&(H.x=3)):H=new f.Vector3(3,0,0);var me=this.geo.updateGeoGroup(2),$e=me.vertices,De=$e*3,le=me.vertexArray;le[De]=j.x,le[De+1]=j.y,le[De+2]=j.z,le[De+3]=H.x,le[De+4]=H.y,le[De+5]=H.z,me.vertices+=2;var Ce=me.lineArray,Me=me.lineidx;Ce[Me]=$e,Ce[Me+1]=$e+1,me.lineidx+=2;var _n=new f.Vector3;this.components.push({centroid:_n.addVectors(j,H).multiplyScalar(.5)}),me=this.geo.updateGeoGroup(0),L.updateBoundingFromPoints(this.boundingSphere,this.components,me.vertexArray,me.vertices)}addArrow(W){if(W.start?W.start=new f.Vector3(W.start.x||0,W.start.y||0,W.start.z||0):W.start=new f.Vector3(0,0,0),W.dir instanceof f.Vector3&&typeof W.length=="number"){var j=W.dir.clone().multiplyScalar(W.length).add(W.start);W.end=j}else W.end?(W.end=new f.Vector3(W.end.x,W.end.y||0,W.end.z||0),typeof W.end.x>"u"&&(W.end.x=3)):W.end=new f.Vector3(3,0,0);W.radius=W.radius||.1,W.radiusRatio=W.radiusRatio||1.618034,W.mid=0<W.mid&&W.mid<1?W.mid:.618034,L.drawArrow(this,this.geo,W);var H=new f.Vector3;this.components.push({centroid:H.addVectors(W.start,W.end).multiplyScalar(.5)});var me=this.geo.updateGeoGroup(0);L.updateBoundingFromPoints(this.boundingSphere,this.components,me.vertexArray,me.vertices)}static distance_from(W,j){return Math.sqrt(Math.pow(W.x-j.x,2)+Math.pow(W.y-j.y,2)+Math.pow(W.z-j.z,2))}static inSelectedRegion(W,j,H){for(var me=0;me<j.length;me++)if(L.distance_from(j[me],W)<=H)return!0;return!1}addIsosurface(W,j,H,me){var $e=j.isoval!==void 0&&typeof j.isoval=="number"?j.isoval:0,De=!!j.voxel,le=j.smoothness===void 0?1:j.smoothness,Ce=W.size.x,Me=W.size.y,_n=W.size.z,_i=new Int16Array(Ce*Me*_n),ll=W.data,_l,oa;for(_l=0,oa=_i.length;_l<oa;++_l)_i[_l]=-1;var Ru=new Uint8Array(Ce*Me*_n);for(_l=0,oa=ll.length;_l<oa;++_l){var ga=$e>=0?ll[_l]-$e:$e-ll[_l];ga>0&&(Ru[_l]|=L.ISDONE)}var _s=[],Sa=[];p.MarchingCube.march(Ru,_s,Sa,{fulltable:!0,voxel:De,unitCube:W.unit,origin:W.origin,matrix:W.matrix,nX:Ce,nY:Me,nZ:_n}),!De&&le>0&&p.MarchingCube.laplacianSmooth(le,_s,Sa);var Ra=[],Da=[],Fa=[];if(j.selectedRegion&&j.coords===void 0&&(j.coords=j.selectedRegion),j.coords===void 0&&j.selection!==void 0&&(me?j.coords=me.selectedAtoms(j.selection):console.log("addIsosurface needs viewer is selection provided.")),j.coords!==void 0){var Na=j.coords[0].x,_a=j.coords[0].y,Pa=j.coords[0].z,qc=j.coords[0].x,uf=j.coords[0].y,_h=j.coords[0].z;for(let fc=0;fc<j.coords.length;fc++)j.coords[fc].x>Na?Na=j.coords[fc].x:j.coords[fc].x<qc&&(qc=j.coords[fc].x),j.coords[fc].y>_a?_a=j.coords[fc].y:j.coords[fc].y<uf&&(uf=j.coords[fc].y),j.coords[fc].z>Pa?Pa=j.coords[fc].z:j.coords[fc].z<_h&&(_h=j.coords[fc].z);var Uh=2;j.radius!==void 0&&(Uh=j.radius),j.selectedOffset!==void 0&&(Uh=j.selectedOffset),j.seldist!==void 0&&(Uh=j.seldist),qc-=Uh,Na+=Uh,uf-=Uh,_a+=Uh,_h-=Uh,Pa+=Uh;for(let fc=0;fc<_s.length;fc++)_s[fc].x>qc&&_s[fc].x<Na&&_s[fc].y>uf&&_s[fc].y<_a&&_s[fc].z>_h&&_s[fc].z<Pa&&L.inSelectedRegion(_s[fc],j.coords,Uh)?(Ra.push(Da.length),Da.push(_s[fc])):Ra.push(-1);for(let fc=0;fc+2<Sa.length;fc+=3)Ra[Sa[fc]]!==-1&&Ra[Sa[fc+1]]!==-1&&Ra[Sa[fc+2]]!==-1&&(Fa.push(Sa[fc]-(Sa[fc]-Ra[Sa[fc]])),Fa.push(Sa[fc+1]-(Sa[fc+1]-Ra[Sa[fc+1]])),Fa.push(Sa[fc+2]-(Sa[fc+2]-Ra[Sa[fc+2]])));_s=Da,Sa=Fa}L.drawCustom(this,this.geo,{vertexArr:_s,faceArr:Sa,normalArr:[],clickable:j.clickable,hoverable:j.hoverable}),this.updateStyle(j);var Kd=new f.Vector3(W.origin.x,W.origin.y,W.origin.z),ud=new f.Vector3(W.size.x*W.unit.x,W.size.y*W.unit.y,W.size.z*W.unit.z),sc=new f.Vector3(0,0,0),Yd=Kd.clone(),wg=Kd.clone().add(ud);for(let fc=0;fc<_s.length;fc++)sc.add(_s[fc]),Yd.max(_s[fc]),wg.min(_s[fc]);sc.divideScalar(_s.length);var Pf=sc.distanceTo(wg),ac=sc.distanceTo(Yd);this.boundingSphere.center=sc,this.boundingSphere.radius=Math.max(Pf,ac),typeof H=="function"&&H()}addVolumetricData(W,j,H){W=new v.VolumeData(W,j),this.addIsosurface(W,H)}finalize(){return L.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(W){if(this.renderedShapeObj&&(W.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){L.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),typeof this.color<"u"&&L.updateColor(this.geo,this.color),this.shapeObj=new s.Object3D;var j=null;this.side==s.DoubleSide?j=new s.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:s.Coloring.VertexColors}):j=new s.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:s.Coloring.VertexColors});var H=new s.Mesh(this.geo,j);if(this.shapeObj.add(H),this.linegeo&&this.linegeo.vertices>0){var me=new s.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),$e=new s.Line(this.linegeo,me,s.LineStyle.LinePieces);this.shapeObj.add($e)}this.renderedShapeObj=this.shapeObj.clone(),W.add(this.renderedShapeObj)}}removegl(W){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),W.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}L.ISDONE=2,L.drawCustom=function(Z,W,j){var H=j,me=H.vertexArr,$e=H.faceArr;(me.length===0||$e.length===0)&&console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var De=j.color;typeof De>"u"&&(De=Z.color),De=d.CC.color(De);for(var le=G(H),Ce=0,Me=le.length;Ce<Me;Ce++)L.addCustomGeo(Z,W,le[Ce],le[Ce].colorArr?le[Ce].colorArr:De,j.clickable)};function G(Z){var W=64e3;if(Z.vertexArr.length<W)return[Z];var j=[{vertexArr:[],normalArr:[],faceArr:[]}];Z.colorArr&&(j.colorArr=[]);var H=[],me=[],$e=0,De=Z.faceArr;for(let Ce=0,Me=De.length;Ce<Me;Ce+=3){let _n=j[$e];for(let _i=0;_i<3;_i++){var le=De[Ce+_i];H[le]!==$e&&(H[le]=$e,me[le]=_n.vertexArr.length,_n.vertexArr.push(Z.vertexArr[le]),Z.normalArr&&Z.normalArr[le]&&_n.normalArr.push(Z.normalArr[le]),Z.colorArr&&Z.colorArr[le]&&_n.colorArr.push(Z.colorArr[le])),_n.faceArr.push(me[le])}_n.vertexArr.length>=W&&(j.push({vertexArr:[],normalArr:[],faceArr:[]}),Z.colorArr&&(j.colorArr=[]),$e++)}return j}},"./src/GLViewer.ts":(n,t,i)=>{i.r(t),i.d(t,{CONTEXTS_PER_VIEWPORT:()=>W,GLViewer:()=>j,createStereoViewer:()=>$e,createViewer:()=>H,createViewerGrid:()=>me});var s=i("./src/WebGL/index.ts"),o=i("./src/WebGL/math/index.ts"),f=i("./src/colors.ts"),d=i("./src/utilities.ts"),p=i("./src/Gradient.ts"),v=i("./src/GLModel.ts"),_=i("./src/Label.ts"),k=i("./src/GLShape.ts"),P=i("./src/VolumeData.ts"),L=i("./src/ProteinSurface4.ts"),G=i("./src/VolumetricRender.ts"),Z=i("./node_modules/upng-js/UPNG.js");const W=16;class j{getWidth(){let le=this.container,Ce=le.offsetWidth;if(Ce==0&&le.style.display==="none"){let Me=le.style.position,_n=le.style.visibility;le.style.display="block",le.style.visibility="hidden",le.style.position="absolute",Ce=le.offsetWidth,le.style.display="none",le.style.visibility=_n,le.style.position=Me}return Ce}getHeight(){let le=this.container,Ce=le.offsetHeight;if(Ce==0&&le.style.display==="none"){let Me=le.style.position,_n=le.style.visibility;le.style.display="block",le.style.visibility="hidden",le.style.position="absolute",Ce=le.offsetHeight,le.style.display="none",le.style.visibility=_n,le.style.position=Me}return Ce}setupRenderer(){this.renderer=new s.Renderer({antialias:this.config.antialias,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:this.config.id,row:this.config.row,col:this.config.col,rows:this.config.rows,cols:this.config.cols,canvas:this.config.canvas,containerWidth:this.WIDTH,containerHeight:this.HEIGHT,ambientOcclusion:this.config.ambientOcclusion,outline:this.config.outline}),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new s.Scene,this.scene.fog=new s.Fog(this.bgColor,100,200),this.modelGroup=new s.Object3D,this.rotationGroup=new s.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new o.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var le=new s.Light(16777215);le.position=new o.Vector3(.2,.2,1).normalize(),le.intensity=1,this.scene.add(le)}_handleLostContext(le){const Ce=function(Me){const _n=Me.getBoundingClientRect();return!(_n.right<0||_n.bottom<0||_n.top>(window.innerHeight||document.documentElement.clientHeight)||_n.left>(window.innerWidth||document.documentElement.clientWidth))};if(Ce(this.container)){let Me=0;for(let _n of document.getElementsByTagName("canvas"))if(Ce(_n)&&_n._3dmol_viewer!=null&&(_n._3dmol_viewer.resize(),Me+=1,Me>=W))break}}initContainer(le){this.container=le,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var le=0;for(let Me in this.surfaces)if(this.surfaces.hasOwnProperty(Me)){var Ce=parseInt(Me);isNaN(Ce)||Ce>le&&(le=Ce)}return le+1}setSlabAndFog(){let le=this.camera.position.z-this.rotationGroup.position.z;le<1&&(le=1),this.camera.near=le+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=le+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=le*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.far,this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(le){if(this.renderer.setViewport(),!!this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!le&&this.linkedViewers.length>0))for(var Ce=this._viewer.getView(),Me=0;Me<this.linkedViewers.length;Me++){var _n=this.linkedViewers[Me];_n.setView(Ce,!0)}}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let le=0,Ce=this.models.length;le<Ce;le++){let Me=this.models[le];if(Me){let _n=Me.selectedAtoms({clickable:!0}),_i=Me.selectedAtoms({hoverable:!0}),ll=Me.selectedAtoms({contextMenuEnabled:!0});for(let _l=0;_l<_i.length;_l++)this.hoverables.push(_i[_l]);for(let _l=0;_l<_n.length;_l++)this.clickables.push(_n[_l]);for(let _l=0;_l<ll.length;_l++)this.contextMenuEnabledObjects.push(ll[_l])}}for(let le=0,Ce=this.shapes.length;le<Ce;le++){let Me=this.shapes[le];Me&&Me.clickable&&this.clickables.push(Me),Me&&Me.hoverable&&this.hoverables.push(Me),Me&&Me.contextMenuEnabled&&this.contextMenuEnabledObjects.push(Me)}}handleClickSelection(le,Ce,Me){let _n=this.targetedObjects(le,Ce,this.clickables);if(_n.length){var _i=_n[0].clickable;_i.callback!==void 0&&(typeof _i.callback!="function"&&(_i.callback=(0,d.makeFunction)(_i.callback)),typeof _i.callback=="function"&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(_i)&&this.userContextMenuHandler||_i.callback(_i,this._viewer,Me,this.container,_n)))}}canvasOffset(){let le=this.glDOM,Ce=le.getBoundingClientRect(),Me=le.ownerDocument,_n=Me.documentElement,_i=Me.defaultView;return{top:Ce.top+_i.pageYOffset-_n.clientTop,left:Ce.left+_i.pageXOffset-_n.clientLeft}}setHover(le,Ce,Me){this.current_hover!=le&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,d.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,Ce,this.container,Me)),this.current_hover=le,le&&le.hover_callback!==void 0&&(typeof le.hover_callback!="function"&&(le.hover_callback=(0,d.makeFunction)(le.hover_callback)),typeof le.hover_callback=="function"&&le.hover_callback(le,this._viewer,Ce,this.container,Me)))}handleHoverSelection(le,Ce,Me){if(this.hoverables.length==0)return;let _n=this.targetedObjects(le,Ce,this.hoverables);if(_n.length){var _i=_n[0].clickable;this.setHover(_i,Me,_n),this.current_hover=_i}else this.setHover(null)}handleHoverContinue(le,Ce){let Me=this.targetedObjects(le,Ce,this.hoverables);(Me.length==0||Me[0]===void 0)&&this.setHover(null),Me[0]!==void 0&&Me[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(le,{allowTolerance:Ce=le.targetTouches,tolerance:Me=5}={}){const _n=this.getX(le),_i=this.getY(le);if(Ce){const ll=Math.abs(_n-this.mouseStartX),_l=Math.abs(_i-this.mouseStartY);return ll<=Me&&_l<=Me}else return _n===this.mouseStartX&&_i===this.mouseStartY}calcTouchDistance(le){var Ce=le.targetTouches[0].pageX-le.targetTouches[1].pageX,Me=le.targetTouches[0].pageY-le.targetTouches[1].pageY;return Math.hypot(Ce,Me)}getX(le){var Ce=le.pageX;return Ce==null&&(Ce=le.pageX),le.targetTouches&&le.targetTouches[0]?Ce=le.targetTouches[0].pageX:le.changedTouches&&le.changedTouches[0]&&(Ce=le.changedTouches[0].pageX),Ce}getY(le){var Ce=le.pageY;return Ce==null&&(Ce=le.pageY),le.targetTouches&&le.targetTouches[0]?Ce=le.targetTouches[0].pageY:le.changedTouches&&le.changedTouches[0]&&(Ce=le.changedTouches[0].pageY),Ce}isInViewer(le,Ce){if(this.viewers!=null){var Me=this.WIDTH/this.cols,_n=this.HEIGHT/this.rows,_i=this.canvasOffset(),ll=le-_i.left,_l=Ce-_i.top,oa=this.rows-Math.floor(_l/_n)-1,Ru=Math.floor(ll/Me);if(oa!=this.row||Ru!=this.col)return!1}return!0}adjustZoomToLimits(le){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let Ce=this.CAMERA_Z-this.config.lowerZoomLimit;le>Ce&&(le=Ce)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let Ce=this.CAMERA_Z-this.config.upperZoomLimit;le<Ce&&(le=Ce)}return le>this.CAMERA_Z-1&&(le=this.CAMERA_Z-1),le}static slerp(le,Ce,Me){if(Me==1)return Ce.clone();if(Me==0)return le.clone();let _n=le.x*Ce.x+le.y*Ce.y+le.z*Ce.z+le.w*Ce.w;if(_n>.9995){let _s=new o.Quaternion(le.x+Me*(Ce.x-le.x),le.y+Me*(Ce.y-le.y),le.z+Me*(Ce.z-le.z),le.w+Me*(Ce.w-le.w));return _s.normalize(),_s}_n<0&&(Ce=Ce.clone().multiplyScalar(-1),_n=-_n),_n>1?_n=1:_n<-1&&(_n=-1);var _i=Math.acos(_n),ll=_i*Me,_l=Ce.clone();_l.sub(le.clone().multiplyScalar(_n)),_l.normalize();var oa=Math.cos(ll),Ru=Math.sin(ll),ga=new o.Quaternion(le.x*oa+_l.x*Ru,le.y*oa+_l.y*Ru,le.z*oa+_l.z*Ru,le.w*oa+_l.w*Ru);return ga.normalize(),ga}constructor(le,Ce={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.slabNear=-50,this.slabFar=50,this.cq=new o.Quaternion(0,0,0,1),this.dq=new o.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=Ce,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=f.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",typeof this.config.backgroundColor<"u"&&(this.bgColor=f.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,typeof this.config.camerax<"u"&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=le,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new s.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new o.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new o.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new s.Raycaster(new o.Vector3(0,0,0),new o.Vector3(0,0,0)),this.projector=new s.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=f.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),typeof window.ResizeObserver<"u"&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),typeof window.IntersectionObserver<"u"){let Me=(_n,_i)=>{_n.forEach(ll=>{ll.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(Me),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(Me){console.log("error with glviewer callback: "+Me)}}targetedObjects(le,Ce,Me){var _n={x:le,y:Ce,z:-1};return Array.isArray(Me)||(Me=this.selectedAtoms(Me)),Me.length==0?[]:(this.raycaster.setFromCamera(_n,this.camera),this.raycaster.intersectObjects(this.modelGroup,Me))}modelToScreen(le){let Ce=!1;Array.isArray(le)||(le=[le],Ce=!0);let Me=this.renderer.getXRatio(),_n=this.renderer.getYRatio(),_i=this.col,ll=this.row,_l=_i*(this.WIDTH/Me),oa=(_n-ll-1)*(this.HEIGHT/_n),Ru=[],ga=this.canvasOffset();return le.forEach(_s=>{let Sa=new o.Vector3(_s.x,_s.y,_s.z);Sa.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(Sa,this.camera);let Ra=this.WIDTH/Me*(Sa.x+1)/2+ga.left+_l,Da=-(this.HEIGHT/_n)*(Sa.y-1)/2+ga.top+oa;Ru.push({x:Ra,y:Da})}),Ce&&(Ru=Ru[0]),Ru}screenOffsetToModel(le,Ce,Me){var _n=le/this.WIDTH,_i=Ce/this.HEIGHT,ll=Me===void 0?this.rotationGroup.position.z:Me,_l=this.rotationGroup.quaternion,oa=new o.Vector3(0,0,ll);return this.projector.projectVector(oa,this.camera),oa.x+=_n*2,oa.y-=_i*2,this.projector.unprojectVector(oa,this.camera),oa.z=0,oa.applyQuaternion(_l),oa}screenToModelDistance(le,Ce){let Me=this.canvasOffset(),_n=new o.Vector3(Ce.x,Ce.y,Ce.z);_n.applyMatrix4(this.modelGroup.matrixWorld);let _i=_n.clone();this.projector.projectVector(_n,this.camera);let ll=new o.Vector3((le.x-Me.left)*2/this.WIDTH-1,(le.y-Me.top)*2/-this.HEIGHT+1,_n.z);return this.projector.unprojectVector(ll,this.camera),ll.distanceTo(_i)}setViewChangeCallback(le){(typeof le=="function"||le==null)&&(this.viewChangeCallback=le)}setStateChangeCallback(le){(typeof le=="function"||le==null)&&(this.stateChangeCallback=le)}getConfig(){return this.config}setConfig(le){this.config=le,le.ambientOcclusion&&this.renderer.enableAmbientOcclusion(le.ambientOcclusion)}getInternalState(){var le={models:[],surfaces:[],shapes:[],labels:[]};for(let Ce=0;Ce<this.models.length;Ce++)this.models[Ce]&&(le.models[Ce]=this.models[Ce].getInternalState());return le}setInternalState(le){this.clear();var Ce=le.models;for(let Me=0;Me<Ce.length;Me++)Ce[Me]&&(this.models[Me]=new v.GLModel(Me),this.models[Me].setInternalState(Ce[Me]));this.render()}setZoomLimits(le,Ce){typeof le<"u"&&(this.config.lowerZoomLimit=le),Ce&&(this.config.upperZoomLimit=Ce),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(le){le.fov!==void 0&&(this.fov=le.fov,this.camera.fov=this.fov),le.z!==void 0&&(this.CAMERA_Z=le.z,this.camera.z=this.CAMERA_Z),le.orthographic!==void 0&&(this.camera.ortho=le.orthographic),this.setSlabAndFog()}_handleMouseDown(le){if(le.preventDefault(),!this.scene)return;var Ce=this.getX(le),Me=this.getY(le);if(Ce===void 0)return;this.isDragging=!0,this.mouseButton=le.which,this.mouseStartX=Ce,this.mouseStartY=Me,this.touchHold=!0,this.touchDistanceStart=0,le.targetTouches&&le.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(le)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let _n=this;le.targetTouches&&le.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(_n.touchHold==!0){_n.glDOM=_n.renderer.domElement;const _i=le.targetTouches[0],ll=new PointerEvent("contextmenu",Object.assign(Object.assign({},le),{pageX:_i.pageX,pageY:_i.pageY,screenX:_i.screenX,screenY:_i.screenY,clientX:_i.clientX,clientY:_i.clientY}));_n.glDOM.dispatchEvent(ll)}},this.longTouchDuration))}_handleMouseUp(le){if(this.touchHold=!1,this.isDragging&&this.scene){var Ce=this.getX(le),Me=this.getY(le);if(this.closeEnoughForClick(le)&&this.isInViewer(Ce,Me)){let _n=this.mouseXY(Ce,Me);this.handleClickSelection(_n.x,_n.y,le)}}this.isDragging=!1}_handleMouseScroll(le){if(le.preventDefault(),!!this.scene){var Ce=this.getX(le),Me=this.getY(le);if(Ce!==void 0&&!(!this.control_all&&!this.isInViewer(Ce,Me))){var _n=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,_i=1;if(le.ctrlKey&&(_i=-1),le.detail)this.rotationGroup.position.z+=_i*_n*le.detail/10;else if(le.wheelDelta){let ll=le.wheelDelta*600/(le.wheelDelta+600);this.rotationGroup.position.z-=_i*_n*ll/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(le){let Ce=this;return le=le||1,new Promise(function(Me){let _n=0,_i=Ce.viewChangeCallback,ll=[],_l=[],oa=Date.now();Ce.viewChangeCallback=function(){_l.push(Date.now()-oa),oa=Date.now(),ll.push(new Promise(Ru=>{Ce.getCanvas().toBlob(function(ga){ga.arrayBuffer().then(Ru)},"image/png")})),_n+=1,_n==le&&(Ce.viewChangeCallback=_i,Promise.all(ll).then(Ru=>{let ga=[];for(let Na=0;Na<Ru.length;Na++){let _a=(0,Z.decode)(Ru[Na]);ga.push((0,Z.toRGBA8)(_a)[0])}let _s=Ce.getCanvas().width,Sa=Ce.getCanvas().height,Ra=(0,Z.encode)(ga,_s,Sa,0,_l),Da=new Blob([Ra],{type:"image/png"}),Fa=new FileReader;Fa.onload=function(Na){Me(Na.target.result)},Fa.readAsDataURL(Da)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(le){this.hoverDuration=le}mouseXY(le,Ce){let Me=this.canvasOffset(),_n=this.renderer.getXRatio(),_i=this.renderer.getYRatio(),ll=this.col,_l=this.row,oa=ll*(this.WIDTH/_n),Ru=(_i-_l-1)*(this.HEIGHT/_i),ga=(le-Me.left-oa)/(this.WIDTH/_n)*2-1,_s=-((Ce-Me.top-Ru)/(this.HEIGHT/_i))*2+1;return{x:ga,y:_s}}_handleMouseMove(le){clearTimeout(this.hoverTimeout),le.preventDefault();let Ce=this.getX(le),Me=this.getY(le);if(Ce===void 0)return;let _n=this.renderer.getXRatio(),_i=this.renderer.getYRatio(),ll=this.mouseXY(Ce,Me),_l=this;this.current_hover!==null&&this.handleHoverContinue(ll.x,ll.y);var oa=0;if(!(!this.control_all&&!this.isInViewer(Ce,Me))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){_l.handleHoverSelection(ll.x,ll.y,le)},this.hoverDuration)),!!this.isDragging)){le.targetTouches&&(le.targetTouches.length>1||le.targetTouches.length===1&&!this.closeEnoughForClick(le))&&clearTimeout(this.longTouchTimeout);var Ru=(Ce-this.mouseStartX)/this.WIDTH,ga=(Me-this.mouseStartY)/this.HEIGHT;if(this.touchDistanceStart!=0&&le.targetTouches&&le.targetTouches.length==2){var _s=this.calcTouchDistance(le);oa=2,ga=(_s-this.touchDistanceStart)*2/(this.WIDTH+this.HEIGHT)}else le.targetTouches&&le.targetTouches.length==3&&(oa=1);Ru*=_n,ga*=_i;var Sa=Math.hypot(Ru,ga),Ra;if(oa==3||this.mouseButton==3&&le.ctrlKey)this.slabNear=this.cslabNear+Ru*100,this.slabFar=this.cslabFar-ga*100;else if(oa==2||this.mouseButton==3||le.shiftKey)Ra=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,Ra<80&&(Ra=80),this.rotationGroup.position.z=this.cz+ga*Ra,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(oa==1||this.mouseButton==2||le.ctrlKey){var Da=this.screenOffsetToModel(_n*(Ce-this.mouseStartX),_i*(Me-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,Da)}else if((oa===0||this.mouseButton==1)&&Sa!==0){var Fa=Math.sin(Sa*Math.PI)/Sa;this.dq.x=Math.cos(Sa*Math.PI),this.dq.y=0,this.dq.z=Fa*Ru,this.dq.w=-Fa*ga,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(le){if(le.preventDefault(),this.closeEnoughForClick(le)){var _n=this.mouseStartX,_i=this.mouseStartY,Me=this.canvasOffset();let ll=this.mouseXY(_n,_i),_l=ll.x,oa=ll.y,Ru=this.targetedObjects(_l,oa,this.contextMenuEnabledObjects);var Ce=null;Ru.length&&(Ce=Ru[0].clickable);var Me=this.canvasOffset(),_n=this.mouseStartX-Me.left,_i=this.mouseStartY-Me.top;this.userContextMenuHandler&&(this.userContextMenuHandler(Ce,_n,_i,Ru,le),this.isDragging=!1)}}setContainer(le){let Ce=(0,d.getElement)(le)||this.container;return this.initContainer(Ce),this}setBackgroundColor(le,Ce){(typeof Ce>"u"||Ce<0||Ce>1)&&(Ce=1);var Me=f.CC.color(le);return this.scene.fog.color=Me,this.bgColor=Me.getHex(),this.renderer.setClearColorHex(Me.getHex(),Ce),this.show(),this}setProjection(le){this.camera.ortho=le==="orthographic",this.setSlabAndFog()}setViewStyle(le){if(le=le||{},le.style=le.style||"",le.style.includes("outline")?this.renderer.enableOutline(le):this.renderer.disableOutline(),le.style.includes("ambientOcclusion")){var Ce={};le.strength&&(Ce.strength=le.strength),le.radius&&(Ce.radius=le.radius),this.renderer.enableAmbientOcclusion(Ce)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(le){return this.WIDTH=le||this.WIDTH,this.updateSize(),this}setHeight(le){return this.HEIGHT=le||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let le=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let Ce=!1,Me=this.container.querySelector("canvas");Me&&Me!=this.renderer.getCanvas()?this.config.canvas=Me:(Me.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,Ce=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),le=!0,Ce&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),le){let Ce=this.renderer.supportedExtensions();if(Ce.regen=!0,this.viewers)for(let Me=0,_n=this.viewers.length;Me<_n;Me++)for(let _i=0,ll=this.viewers[Me].length;_i<ll;_i++)this.viewers[Me][_i].render(null,Ce);this._viewer.render(null,Ce)}else this.show();return this}getModel(le){return le===void 0?this.models.length==0?null:this.models[this.models.length-1]:le instanceof v.GLModel?le:le in this.models?this.models[le]:this.models.length==0?null:this.models[this.models.length-1]}spin(le,Ce=1,Me=!1){if(clearInterval(this.spinInterval),typeof le>"u"&&(le="y"),typeof le=="boolean")if(le)le="y";else return;Array.isArray(le)&&(le={x:le[0],y:le[1],z:le[2]});var _n=this;this.spinInterval=setInterval(function(){!_n.getCanvas().isConnected&&_n.renderer.isLost()&&clearInterval(_n.spinInterval),(!Me||_n.container.checkVisibility&&_n.container.checkVisibility())&&_n.rotate(1*Ce,le)},25)}animateMotion(le,Ce,Me,_n,_i,ll){var _l=20,oa=Math.ceil(le/_l);oa<1&&(oa=1),this.incAnim();var Ru={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(Ce){let Sa=new Array(oa);for(let Na=0;Na<oa;Na++){let _a=(Na+1)/oa,Pa={mpos:Ru.mpos,rz:Ru.rz,rot:Ru.rot};Pa.mpos=Me.clone().sub(Ru.mpos).multiplyScalar(_a).add(Ru.mpos),Pa.rz=Ru.rz+_a*(_n-Ru.rz),Pa.rot=j.slerp(Ru.rot,_i,_a),Pa.cam=ll.clone().sub(Ru.cam).multiplyScalar(_a).add(Ru.cam),Sa[Na]=Pa}let Ra=0,Da=this,Fa=function(){var Na=Sa[Ra];Ra+=1,Da.modelGroup.position=Na.mpos,Da.rotationGroup.position.z=Na.rz,Da.rotationGroup.quaternion=Na.rot,Da.camera.lookAt(Na.cam),Ra<Sa.length?setTimeout(Fa,_l):Da.decAnim(),Da.show()};setTimeout(Fa,_l)}else{var ga={};let Sa=1/oa;if(Me&&(ga.mpos=Me.clone().sub(Ru.mpos).multiplyScalar(Sa)),typeof _n<"u"&&_n!=null&&(ga.rz=Sa*(_n-Ru.rz)),_i){var _s=j.slerp(Ru.rot,_i,Sa);ga.rot=Ru.rot.clone().inverse().multiply(_s)}ll&&(ga.cam=ll.clone().sub(Ru.cam).multiplyScalar(Sa));let Ra=0,Da=this,Fa=function(){Ra+=1,ga.mpos&&Da.modelGroup.position.add(ga.mpos),ga.rz&&(Da.rotationGroup.position.z+=ga.rz),ga.rot&&Da.rotationGroup.quaternion.multiply(ga.rot),ga.cam&&(Da.lookingAt.add(ga.cam),Da.camera.lookAt(Da.lookingAt)),Ra<oa?setTimeout(Fa,_l):Da.decAnim(),Da.show()};setTimeout(Fa,_l)}}rotate(le,Ce="y",Me=0,_n=!1){if(Ce=="x"?Ce={x:1,y:0,z:0}:Ce=="y"?Ce={x:0,y:1,z:0}:Ce=="z"&&(Ce={x:0,y:0,z:1}),Ce=="vx"?Ce={vx:1,vy:0,vz:0}:Ce=="vy"?Ce={vx:0,vy:1,vz:0}:Ce=="vz"&&(Ce={vx:0,vy:0,vz:1}),typeof Ce.vx<"u"){var _i=new o.Vector3(Ce.vx,Ce.vy,Ce.vz);_i.applyQuaternion(this.rotationGroup.quaternion),Ce={x:_i.x,y:_i.y,z:_i.z}}var ll=function(ga){var _s=Math.sin(ga/2),Sa=Math.cos(ga/2),Ra=0,Da=0,Fa=0;return Ra=Ce.x*_s,Da=Ce.y*_s,Fa=Ce.z*_s,new o.Quaternion(Ra,Da,Fa,Sa).normalize()},_l=Math.PI*le/180,oa=ll(_l);if(Me){var Ru=new o.Quaternion().copy(this.rotationGroup.quaternion).multiply(oa);this.animateMotion(Me,_n,this.modelGroup.position,this.rotationGroup.position.z,Ru,this.lookingAt)}else this.rotationGroup.quaternion.multiply(oa),this.show();return this}surfacesFinished(){for(var le in this.surfaces)if(!this.surfaces[le][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var le=this.modelGroup.position,Ce=this.rotationGroup.quaternion;return[le.x,le.y,le.z,this.rotationGroup.position.z,Ce.x,Ce.y,Ce.z,Ce.w]}setView(le,Ce){return le===void 0||!(le instanceof Array||le.length!==8)?this:!this.modelGroup||!this.rotationGroup?this:(this.modelGroup.position.x=le[0],this.modelGroup.position.y=le[1],this.modelGroup.position.z=le[2],this.rotationGroup.position.z=le[3],this.rotationGroup.quaternion.x=le[4],this.rotationGroup.quaternion.y=le[5],this.rotationGroup.quaternion.z=le[6],this.rotationGroup.quaternion.w=le[7],typeof le[8]<"u"&&(this.rotationGroup.position.x=le[8],this.rotationGroup.position.y=le[9]),this.show(Ce),this)}render(le,Ce){this.renderer.setViewport(),this.updateClickables();var Me=this.getView();this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState());var _n,_i;for(Ce||(Ce=this.renderer.supportedExtensions()),_n=0;_n<this.models.length;_n++)this.models[_n]&&this.models[_n].globj(this.modelGroup,Ce);for(_n=0;_n<this.shapes.length;_n++)this.shapes[_n]&&(typeof this.shapes[_n].frame>"u"||this.viewer_frame<0||this.shapes[_n].frame<0||this.shapes[_n].frame==this.viewer_frame?this.shapes[_n].globj(this.modelGroup,Ce):this.shapes[_n].removegl(this.modelGroup));for(_n=0;_n<this.labels.length;_n++)Ce.regen&&(this.labels[_n].dispose(),this.modelGroup.remove(this.labels[_n].sprite),this.labels[_n].setContext(),this.modelGroup.add(this.labels[_n].sprite)),this.labels[_n]&&typeof this.labels[_n].frame<"u"&&this.labels[_n].frame>=0&&(this.modelGroup.remove(this.labels[_n].sprite),(this.viewer_frame<0||this.labels[_n].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[_n].sprite));for(_n in this.surfaces)if(this.surfaces.hasOwnProperty(_n)){var ll=this.surfaces[_n];for(_i=0;_i<ll.length;_i++)if(ll.hasOwnProperty(_i)){var _l=ll[_i].geo;if(!ll[_i].finished||Ce.regen){_l.verticesNeedUpdate=!0,_l.elementsNeedUpdate=!0,_l.normalsNeedUpdate=!0,_l.colorsNeedUpdate=!0,_l.buffersNeedUpdate=!0,ll[_i].mat.needsUpdate=!0,ll[_i].done&&(ll[_i].finished=!0),ll[_i].lastGL&&this.modelGroup.remove(ll[_i].lastGL);var oa=null;if(ll[_i].mat instanceof s.LineBasicMaterial?oa=new s.Line(_l,ll[_i].mat):oa=new s.Mesh(_l,ll[_i].mat),ll[_i].mat.transparent&&ll[_i].mat.opacity==0?oa.visible=!1:oa.visible=!0,ll[_i].symmetries.length>1||ll[_i].symmetries.length==1&&!ll[_i].symmetries[_i].isIdentity()){var Ru,ga=new s.Object3D;for(Ru=0;Ru<ll[_i].symmetries.length;Ru++){var _s=oa.clone();_s.matrix=ll[_i].symmetries[Ru],_s.matrixAutoUpdate=!1,ga.add(_s)}ll[_i].lastGL=ga,this.modelGroup.add(ga)}else ll[_i].lastGL=oa,this.modelGroup.add(oa)}}}return this.setView(Me),typeof le=="function"&&le(this),this}getModelList(le){let Ce=[];if(typeof le>"u"||typeof le.model>"u")for(let _n=0;_n<this.models.length;_n++)this.models[_n]&&Ce.push(this.models[_n]);else{let _n=le.model;Array.isArray(_n)||(_n=[_n]);for(let _i=0;_i<_n.length;_i++)if(typeof _n[_i]=="number"){var Me=_n[_i];Me<0&&(Me+=this.models.length),Ce.push(this.models[Me])}else Ce.push(_n[_i])}return Ce}getAtomsFromSel(le){var Ce=[];typeof le>"u"&&(le={});var Me=this.getModelList(le);for(let _n=0;_n<Me.length;_n++)Ce=Ce.concat(Me[_n].selectedAtoms(le));return Ce}atomIsSelected(le,Ce){typeof Ce>"u"&&(Ce={});for(var Me=this.getModelList(Ce),_n=0;_n<Me.length;_n++)if(Me[_n].atomIsSelected(le,Ce))return!0;return!1}selectedAtoms(le){return this.getAtomsFromSel(le)}getUniqueValues(le,Ce){typeof Ce>"u"&&(Ce={});var Me=this.getAtomsFromSel(Ce),_n={};for(var _i in Me)if(Me[_i].hasOwnProperty(le)){var ll=Me[_i][le];_n[ll]=!0}return Object.keys(_n)}pdbData(le){for(var Ce=this.getAtomsFromSel(le),Me="",_n=0,_i=Ce.length;_n<_i;++_n)Me+=Ce[_n].pdbline+`
`;return Me}zoom(le=2,Ce=0,Me=!1){var _n=(this.CAMERA_Z-this.rotationGroup.position.z)/le,_i=this.CAMERA_Z-_n;return Ce>0?this.animateMotion(Ce,Me,this.modelGroup.position,this.adjustZoomToLimits(_i),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(_i),this.show()),this}translate(le,Ce,Me=0,_n=!1){var _i=le/this.WIDTH,ll=Ce/this.HEIGHT,_l=new o.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(_l,this.camera),_l.x-=_i,_l.y-=ll,this.projector.unprojectVector(_l,this.camera),_l.z=0;var oa=this.lookingAt.clone().add(_l);return Me>0?this.animateMotion(Me,_n,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,oa):(this.lookingAt=oa,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(le,Ce,Me=0,_n=!1){var _i=this.screenOffsetToModel(le,Ce),ll=this.modelGroup.position.clone().add(_i);return Me>0?this.animateMotion(Me,_n,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=ll,this.show()),this}fitSlab(le){le=le||{};var Ce=this.getAtomsFromSel(le),Me=(0,d.getExtent)(Ce),_n=Me[1][0]-Me[0][0],_i=Me[1][1]-Me[0][1],ll=Me[1][2]-Me[0][2],_l=Math.hypot(_n,_i,ll);return _l<5&&(_l=5),this.slabNear=-_l/1.9,this.slabFar=_l/2,this}center(le={},Ce=0,Me=!1){var _n,_i,ll=this.getAtomsFromSel(le),_l=(0,d.getExtent)(ll);(0,d.isEmptyObject)(le)?(this.shapes.forEach(_a=>{if(_a&&_a.boundingSphere&&_a.boundingSphere.center){var Pa=_a.boundingSphere.center,qc=_a.boundingSphere.radius;qc>0?(ll.push(new o.Vector3(Pa.x+qc,Pa.y,Pa.z)),ll.push(new o.Vector3(Pa.x-qc,Pa.y,Pa.z)),ll.push(new o.Vector3(Pa.x,Pa.y+qc,Pa.z)),ll.push(new o.Vector3(Pa.x,Pa.y-qc,Pa.z)),ll.push(new o.Vector3(Pa.x,Pa.y,Pa.z+qc)),ll.push(new o.Vector3(Pa.x,Pa.y,Pa.z-qc))):ll.push(Pa)}}),_l=(0,d.getExtent)(ll),_n=ll,_i=_l):(_n=this.getAtomsFromSel({}),_i=(0,d.getExtent)(_n));var oa=new o.Vector3(_l[2][0],_l[2][1],_l[2][2]),Ru=_i[1][0]-_i[0][0],ga=_i[1][1]-_i[0][1],_s=_i[1][2]-_i[0][2],Sa=Math.hypot(Ru,ga,_s);Sa<5&&(Sa=5),this.slabNear=-Sa/1.9,this.slabFar=Sa/2,Ru=_l[1][0]-_l[0][0],ga=_l[1][1]-_l[0][1],_s=_l[1][2]-_l[0][2],Sa=Math.hypot(Ru,ga,_s),Sa<5&&(Sa=5);for(var Ra=25,Da=0;Da<ll.length;Da++)if(ll[Da]){var Fa=oa.distanceToSquared(ll[Da]);Fa>Ra&&(Ra=Fa)}Sa=Math.sqrt(Ra)*2;var Na=oa.clone().multiplyScalar(-1);return Ce>0?this.animateMotion(Ce,Me,Na,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Na,this.show()),this}zoomTo(le={},Ce=0,Me=!1){let _n=this.getAtomsFromSel(le),_i=(0,d.getExtent)(_n),ll=_i;if((0,d.isEmptyObject)(le)){let Pa=_n&&_n.length;if(this.shapes.forEach(qc=>{if(qc&&qc.boundingSphere){if(qc.boundingSphere.box){let Uh=qc.boundingSphere.box;_n.push(new o.Vector3(Uh.min.x,Uh.min.y,Uh.min.z)),_n.push(new o.Vector3(Uh.max.x,Uh.max.y,Uh.max.z))}else if(qc.boundingSphere.center){var uf=qc.boundingSphere.center,_h=qc.boundingSphere.radius;_h>0?(_n.push(new o.Vector3(uf.x+_h,uf.y,uf.z)),_n.push(new o.Vector3(uf.x-_h,uf.y,uf.z)),_n.push(new o.Vector3(uf.x,uf.y+_h,uf.z)),_n.push(new o.Vector3(uf.x,uf.y-_h,uf.z)),_n.push(new o.Vector3(uf.x,uf.y,uf.z+_h)),_n.push(new o.Vector3(uf.x,uf.y,uf.z-_h))):_n.push(uf)}}}),ll=(0,d.getExtent)(_n),!Pa)for(let qc=0;qc<3;qc++)_i[2][qc]=(ll[0][qc]+ll[1][qc])/2}else{let Pa=this.getAtomsFromSel({});ll=(0,d.getExtent)(Pa)}var _l=new o.Vector3(_i[2][0],_i[2][1],_i[2][2]),oa=ll[1][0]-ll[0][0],Ru=ll[1][1]-ll[0][1],ga=ll[1][2]-ll[0][2],_s=Math.hypot(oa,Ru,ga);_s<5&&(_s=5),this.slabNear=-_s/1.9,this.slabFar=_s/2,Object.keys(le).length===0&&(this.slabNear=Math.min(-_s*2,-50),this.slabFar=Math.max(_s*2,50));var Sa=this.config.minimumZoomToDistance||5;oa=_i[1][0]-_i[0][0],Ru=_i[1][1]-_i[0][1],ga=_i[1][2]-_i[0][2],_s=Math.hypot(oa,Ru,ga),_s<Sa&&(_s=Sa);for(var Ra=Sa*Sa,Da=0;Da<_n.length;Da++)if(_n[Da]){var Fa=_l.distanceToSquared(_n[Da]);Fa>Ra&&(Ra=Fa)}_s=Math.sqrt(Ra)*2;var Na=_l.clone().multiplyScalar(-1),_a=-(_s*.5/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return _a=this.adjustZoomToLimits(_a),Ce>0?this.animateMotion(Ce,Me,Na,_a,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Na,this.rotationGroup.position.z=_a,this.show()),this}setSlab(le,Ce){this.slabNear=le,this.slabFar=Ce}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(le,Ce={},Me,_n=!1){if(Me){var _i=(0,d.getExtent)(this.getAtomsFromSel(Me));Ce.position={x:_i[2][0],y:_i[2][1],z:_i[2][2]}}var ll=new _.Label(le,Ce);return ll.setContext(),this.modelGroup.add(ll.sprite),this.labels.push(ll),_n||this.show(),ll}addResLabels(le,Ce,Me=!1){let _n=this.labels.length;return this.applyToModels("addResLabels",le,this,Ce,Me),this.show(),this.labels.slice(_n)}addPropertyLabels(le,Ce,Me){return this.applyToModels("addPropertyLabels",le,Ce,this,Me),this.show(),this}removeLabel(le){for(var Ce=0;Ce<this.labels.length;Ce++)if(this.labels[Ce]==le){this.labels.splice(Ce,1),le.dispose(),this.modelGroup.remove(le.sprite);break}return this.show(),this}removeAllLabels(){for(var le=0;le<this.labels.length;le++)this.labels[le]&&this.labels[le].sprite&&this.modelGroup.remove(this.labels[le].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var le=0;le<this.labels.length;le++)this.labels[le]&&this.labels[le].hide();return this.show(),this}showAllLabels(){for(var le=0;le<this.labels.length;le++)this.labels[le]&&this.labels[le].show();return this.show(),this}setLabelStyle(le,Ce){return this.modelGroup.remove(le.sprite),le.dispose(),le.stylespec=Ce,le.setContext(),this.modelGroup.add(le.sprite),this.show(),le}setLabelText(le,Ce){return this.modelGroup.remove(le.sprite),le.dispose(),le.text=Ce,le.setContext(),this.modelGroup.add(le.sprite),this.show(),le}addShape(le){le=le||{};var Ce=new k.GLShape(le);return Ce.shapePosition=this.shapes.length,this.shapes.push(Ce),Ce}removeShape(le){if(!le)return this;for(le.removegl(this.modelGroup),delete this.shapes[le.shapePosition];this.shapes.length>0&&typeof this.shapes[this.shapes.length-1]>"u";)this.shapes.pop();return this}removeAllShapes(){for(var le=0;le<this.shapes.length;le++){var Ce=this.shapes[le];Ce&&Ce.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(le){if(le.hasOwnProperty("x")&&le.hasOwnProperty("y")&&le.hasOwnProperty("z"))return le;var Ce=this.getAtomsFromSel(le);if(Ce.length==0)return{x:0,y:0,z:0};var Me=(0,d.getExtent)(Ce);return{x:Me[0][0]+(Me[1][0]-Me[0][0])/2,y:Me[0][1]+(Me[1][1]-Me[0][1])/2,z:Me[0][2]+(Me[1][2]-Me[0][2])/2}}addSphere(le){le=le||{},le.center=this.getSelectionCenter(le.center);var Ce=new k.GLShape(le);return Ce.shapePosition=this.shapes.length,Ce.addSphere(le),this.shapes.push(Ce),Ce.finalize(),Ce}addBox(le={}){le.corner!=null&&(le.corner=this.getSelectionCenter(le.corner)),le.center!=null&&(le.center=this.getSelectionCenter(le.center));var Ce=new k.GLShape(le);return Ce.shapePosition=this.shapes.length,Ce.addBox(le),this.shapes.push(Ce),Ce.finalize(),Ce}addArrow(le={}){le.start=this.getSelectionCenter(le.start),le.end=this.getSelectionCenter(le.end);var Ce=new k.GLShape(le);return Ce.shapePosition=this.shapes.length,Ce.addArrow(le),this.shapes.push(Ce),Ce.finalize(),Ce}addCylinder(le={}){le.start=this.getSelectionCenter(le.start),le.end=this.getSelectionCenter(le.end);var Ce=new k.GLShape(le);return Ce.shapePosition=this.shapes.length,le.dashed?Ce.addDashedCylinder(le):Ce.addCylinder(le),this.shapes.push(Ce),Ce.finalize(),Ce}addCurve(le={}){var Ce=new k.GLShape(le);return Ce.shapePosition=this.shapes.length,Ce.addCurve(le),this.shapes.push(Ce),Ce.finalize(),Ce}addLine(le={}){le.start=this.getSelectionCenter(le.start),le.end=this.getSelectionCenter(le.end),le.wireframe=!0;var Ce=new k.GLShape(le);return Ce.shapePosition=this.shapes.length,le.dashed?Ce=this.addLineDashed(le,Ce):Ce.addLine(le),this.shapes.push(Ce),Ce.finalize(),Ce}addUnitCell(le,Ce){le=this.getModel(le),Ce=Ce||{alabel:"a",blabel:"b",clabel:"c"},Ce.box=Ce.box||{},Ce.astyle=Ce.astyle||{color:"red",radius:.1,midpos:-1},Ce.bstyle=Ce.bstyle||{color:"green",radius:.1,midpos:-1},Ce.cstyle=Ce.cstyle||{color:"blue",radius:.1,midpos:-1},Ce.alabelstyle=Ce.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},Ce.blabelstyle=Ce.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},Ce.clabelstyle=Ce.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},le.unitCellObjects&&this.removeUnitCell(le),le.unitCellObjects={shapes:[],labels:[]};var Me=le.getCrystData(),_n=null;if(Me){if(Me.matrix)_n=Me.matrix;else{var _i=Me.a,ll=Me.b,_l=Me.c,oa=Me.alpha,Ru=Me.beta,ga=Me.gamma;oa=oa*Math.PI/180,Ru=Ru*Math.PI/180,ga=ga*Math.PI/180;var _s,Sa,Ra;_s=Math.cos(Ru),Sa=(Math.cos(oa)-Math.cos(Ru)*Math.cos(ga))/Math.sin(ga),Ra=Math.sqrt(Math.max(0,1-_s*_s-Sa*Sa)),_n=new o.Matrix3(_i,ll*Math.cos(ga),_l*_s,0,ll*Math.sin(ga),_l*Sa,0,0,_l*Ra)}var Da=[new o.Vector3(0,0,0),new o.Vector3(1,0,0),new o.Vector3(0,1,0),new o.Vector3(0,0,1),new o.Vector3(1,1,0),new o.Vector3(0,1,1),new o.Vector3(1,0,1),new o.Vector3(1,1,1)];if(Me.matrix4)for(let Na=0;Na<Da.length;Na++)Me.size&&Da[Na].multiplyVectors(Da[Na],Me.size),Da[Na]=Da[Na].applyMatrix4(Me.matrix4);else for(let Na=0;Na<Da.length;Na++)Da[Na]=Da[Na].applyMatrix3(_n);if(Ce.box&&!Ce.box.hidden){Ce.box.wireframe=!0;var Fa=new k.GLShape(Ce.box);Fa.shapePosition=this.shapes.length,Fa.addLine({start:Da[0],end:Da[1]}),Fa.addLine({start:Da[0],end:Da[2]}),Fa.addLine({start:Da[1],end:Da[4]}),Fa.addLine({start:Da[2],end:Da[4]}),Fa.addLine({start:Da[0],end:Da[3]}),Fa.addLine({start:Da[3],end:Da[5]}),Fa.addLine({start:Da[2],end:Da[5]}),Fa.addLine({start:Da[1],end:Da[6]}),Fa.addLine({start:Da[4],end:Da[7]}),Fa.addLine({start:Da[6],end:Da[7]}),Fa.addLine({start:Da[3],end:Da[6]}),Fa.addLine({start:Da[5],end:Da[7]}),this.shapes.push(Fa),le.unitCellObjects.shapes.push(Fa),Fa.finalize()}if(!Ce.astyle.hidden){Ce.astyle.start=Da[0],Ce.astyle.end=Da[1];let Na=this.addArrow(Ce.astyle);le.unitCellObjects.shapes.push(Na)}if(!Ce.bstyle.hidden){Ce.bstyle.start=Da[0],Ce.bstyle.end=Da[2];let Na=this.addArrow(Ce.bstyle);le.unitCellObjects.shapes.push(Na)}if(!Ce.cstyle.hidden){Ce.cstyle.start=Da[0],Ce.cstyle.end=Da[3];let Na=this.addArrow(Ce.cstyle);le.unitCellObjects.shapes.push(Na)}if(Ce.alabel){Ce.alabelstyle.position=Da[1];let Na=this.addLabel(Ce.alabel,Ce.alabelstyle);le.unitCellObjects.labels.push(Na)}if(Ce.blabel){Ce.blabelstyle.position=Da[2];let Na=this.addLabel(Ce.blabel,Ce.blabelstyle);le.unitCellObjects.labels.push(Na)}if(Ce.clabel){Ce.clabelstyle.position=Da[3];let Na=this.addLabel(Ce.clabel,Ce.clabelstyle);le.unitCellObjects.labels.push(Na)}}}removeUnitCell(le){if(le=this.getModel(le),le.unitCellObjects){let Ce=this;le.unitCellObjects.shapes.forEach(function(Me){Ce.removeShape(Me)}),le.unitCellObjects.labels.forEach(function(Me){Ce.removeLabel(Me)})}delete le.unitCellObjects}replicateUnitCell(le=3,Ce=le,Me=Ce,_n,_i,ll){_n=this.getModel(_n);let _l=_n.getCrystData();if(_l){const oa=_n.selectedAtoms({}),Ru=_l.matrix;let ga=function(Sa){return Sa%2==0?-Sa/2:Math.ceil(Sa/2)};le<=1&&Ce<=1&&Me<=1&&(ll=!0,le=Ce=Me=3);let _s=function(Sa,Ra,Da){return!1};if(ll){const Sa=new o.Matrix3().getInverse3(Ru);_s=function(Ra,Da,Fa){let Na=new o.Vector3(Ra,Da,Fa).applyMatrix3(Sa);return!(Na.x>-1e-4&&Na.x<1.0001&&Na.y>-1e-4&&Na.y<1.0001&&Na.z>-1e-4&&Na.z<1.0001)}}for(let Sa=0;Sa<le;Sa++)for(let Ra=0;Ra<Ce;Ra++)for(let Da=0;Da<Me;Da++){if(Sa==0&&Ra==0&&Da==0)continue;let Fa=new o.Vector3(ga(Sa),ga(Ra),ga(Da));Fa.applyMatrix3(Ru);let Na=[];for(let _a=0;_a<oa.length;_a++){let Pa=oa[_a].x+Fa.x,qc=oa[_a].y+Fa.y,uf=oa[_a].z+Fa.z;if(_s(Pa,qc,uf))continue;let _h={};for(let Uh in oa[_a])_h[Uh]=oa[_a][Uh];_h.x=Pa,_h.y=qc,_h.z=uf,Na.push(_h)}_n.addAtoms(Na)}_i&&_n.assignBonds()}}addLineDashed(le,Ce){le.dashLength=le.dashLength||.5,le.gapLength=le.gapLength||.5;var Me;le.start?Me=new o.Vector3(le.start.x||0,le.start.y||0,le.start.z||0):Me=new o.Vector3(0,0,0);var _n;le.end?_n=new o.Vector3(le.end.x,le.end.y||0,le.end.z||0):_n=new o.Vector3(0,0,0);var _i=new o.Vector3,ll=new o.Vector3,_l=new o.Vector3,oa,Ru,ga,_s=Me.clone(),Sa=0;for(_i.subVectors(_n,Me),oa=_i.length(),_i.normalize(),ll=_i.clone(),_l=_i.clone(),ll.multiplyScalar(le.dashLength),_l.multiplyScalar(le.gapLength),Ru=ll.length(),ga=_l.length();Sa<oa;){if(Sa+Ru>oa){le.start=Me,le.end=_n,Ce.addLine(le);break}_s.addVectors(Me,ll),le.start=Me,le.end=_s,Ce.addLine(le),Me=_s.clone(),Sa+=Ru,_s.addVectors(Me,_l),Me=_s.clone(),Sa+=ga}return Ce.finalize(),Ce}addCustom(le){le=le||{};var Ce=new k.GLShape(le);return Ce.shapePosition=this.shapes.length,Ce.addCustom(le),this.shapes.push(Ce),Ce.finalize(),Ce}addVolumetricData(le,Ce,Me={}){var _n=new P.VolumeData(le,Ce);return Me.hasOwnProperty("transferfn")?this.addVolumetricRender(_n,Me):this.addIsosurface(_n,Me)}addIsosurface(le,Ce={},Me){var _n=new k.GLShape(Ce);return _n.shapePosition=this.shapes.length,_n.addIsosurface(le,Ce,Me,this),this.shapes.push(_n),_n}addVolumetricRender(le,Ce){Ce=Ce||{};var Me=new G.GLVolumetricRender(le,Ce,this);return Me.shapePosition=this.shapes.length,this.shapes.push(Me),Me}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(le){le?this.scene.fog=new s.Fog(this.bgColor,100,200):(this.config.disableFog=!0,this.show())}setFrame(le){this.viewer_frame=le;let Ce=this;return new Promise(function(Me){var _n=Ce.models.map(function(_i){return _i.setFrame(le,Ce)});Promise.all(_n).then(function(){Me()})})}getFrame(){return this.viewer_frame}getNumFrames(){var le=0;for(let Ce=0;Ce<this.models.length;Ce++)this.models[Ce].getNumFrames()>le&&(le=this.models[Ce].getNumFrames());for(let Ce=0;Ce<this.shapes.length;Ce++)this.shapes[Ce].frame&&this.shapes[Ce].frame>=le&&(le=this.shapes[Ce].frame+1);for(let Ce=0;Ce<this.labels.length;Ce++)this.labels[Ce].frame&&this.labels[Ce].frame>=le&&(le=this.labels[Ce].frame+1);return le}animate(le){this.incAnim();var Ce=100,Me="forward",_n=1/0;le=le||{},le.interval&&(Ce=le.interval),le.loop&&(Me=le.loop),le.reps&&(_n=le.reps);var _i=this.getNumFrames(),ll=this,_l=0;le.startFrame&&(_l=le.startFrame%_i);var oa=1;le.step&&(oa=le.step,_n/=oa);var Ru=0,ga=_i*_n,_s=new Date,Sa,Ra,Da=function(Fa){_s=new Date,Fa=="forward"?ll.setFrame(_l).then(function(){_l=(_l+oa)%_i,Sa()}):Fa=="backward"?ll.setFrame(_i-1-_l).then(function(){_l=(_l+oa)%_i,Sa()}):ll.setFrame(_l).then(function(){_l+=oa,oa*=_l%(_i-1)==0?-1:1,Sa()})};return Sa=function(){if(ll.render(),!ll.getCanvas().isConnected)ll.stopAnimate();else if(++Ru>=ga||!ll.isAnimated())Ra.cancel(),ll.animationTimers.delete(Ra),ll.decAnim();else{var Fa=Ce-(new Date().getTime()-_s.getTime());Fa=Fa>0?Fa:0,ll.animationTimers.delete(Ra),Ra=new d.PausableTimer(Da,Fa,Me),ll.animationTimers.add(Ra)}},Ra=new d.PausableTimer(Da,0,Me),this.animationTimers.add(Ra),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(le){le.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(le){le.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(le){le.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(le){return le&&!le.defaultcolors?(le.defaultcolors=this.defaultcolors,le.cartoonQuality=le.cartoonQuality||this.config.cartoonQuality):typeof le>"u"&&(le={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),le}addModel(le,Ce="",Me){Me=this.getModelOpt(Me);var _n=new v.GLModel(this.models.length,Me);return _n.addMolData(le,Ce,Me),this.models.push(_n),_n}addModels(le,Ce,Me){Me=this.getModelOpt(Me),Me.multimodel=!0,Me.frames=!0;for(var _n=v.GLModel.parseMolData(le,Ce,Me),_i=0;_i<_n.length;_i++){var ll=new v.GLModel(this.models.length,Me);ll.setAtomDefaults(_n[_i]),ll.addFrame(_n[_i]),ll.setFrame(0),_n.modelData&&ll.setModelData(_n.modelData[_i]),ll.setDontDuplicateAtoms(!Me.duplicateAssemblyAtoms),this.models.push(ll)}return this.models}addModelsAsFrames(le,Ce,Me){Me=this.getModelOpt(Me),Me.multimodel=!0,Me.frames=!0;var _n=new v.GLModel(this.models.length,Me);return _n.addMolData(le,Ce,Me),this.models.push(_n),_n}addAsOneMolecule(le,Ce,Me){Me=this.getModelOpt(Me),Me.multimodel=!0,Me.onemol=!0;var _n=new v.GLModel(this.models.length,Me);return _n.addMolData(le,Ce,Me),this.models.push(_n),_n}removeModel(le){if(le=this.getModel(le),!!le){for(le.removegl(this.modelGroup),delete this.models[le.getID()];this.models.length>0&&typeof this.models[this.models.length-1]>"u";)this.models.pop();return this}}removeAllModels(){for(var le=0;le<this.models.length;le++){var Ce=this.models[le];Ce&&Ce.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(le,Ce){var Me={};return Ce===void 0?Me.m=this.models.map(function(_n){return _n.toCDObject(le)}):Me.m=[this.models[Ce].toCDObject()],JSON.stringify(Me)}exportVRML(){var le=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new s.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var Ce=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=le,Ce}createModelFrom(le,Ce=!1){for(var Me=new v.GLModel(this.models.length,this.defaultcolors),_n=0;_n<this.models.length;_n++)if(this.models[_n]){var _i=this.models[_n].selectedAtoms(le);Me.addAtoms(_i),Ce&&this.models[_n].removeAtoms(_i)}return this.models.push(Me),Me}applyToModels(le,Ce,Me,_n,_i,ll,_l){for(var oa=this.getModelList(Ce),Ru=0;Ru<oa.length;Ru++)oa[Ru][le](Ce,Me,_n,_i,ll,_l)}setStyle(le,Ce){return typeof Ce>"u"&&(Ce=le,le={}),this.applyToModels("setStyle",le,Ce,!1),this}addStyle(le,Ce){return typeof Ce>"u"&&(Ce=le,le={}),this.applyToModels("setStyle",le,Ce,!0),this}setClickable(le,Ce,Me){return this.applyToModels("setClickable",le,Ce,Me),this}setHoverable(le,Ce,Me,_n){return this.applyToModels("setHoverable",le,Ce,Me,_n),this}enableContextMenu(le,Ce){return this.applyToModels("enableContextMenu",le,Ce),this}vibrate(le,Ce,Me,_n){return this.applyToModels("vibrate",le,Ce,Me,this,_n),this}setColorByProperty(le,Ce,Me,_n){return this.applyToModels("setColorByProperty",le,Ce,Me,_n),this}setColorByElement(le,Ce){return this.applyToModels("setColorByElement",le,Ce),this}static getAtomsWithin(le,Ce){var Me=[];for(let _i=0;_i<le.length;_i++){var _n=le[_i];typeof _n>"u"||_n.x<Ce[0][0]||_n.x>Ce[1][0]||_n.y<Ce[0][1]||_n.y>Ce[1][1]||_n.z<Ce[0][2]||_n.z>Ce[1][2]||Me.push(_n)}return Me}static volume(le){var Ce=le[1][0]-le[0][0],Me=le[1][1]-le[0][1],_n=le[1][2]-le[0][2];return Ce*Me*_n}carveUpExtent(le,Ce,Me){let _n=[],_i={};for(let _s=0,Sa=Ce.length;_s<Sa;_s++)_i[Ce[_s].index]=_s;let ll=function(_s){let Sa=[];for(let Ra=0,Da=_s.length;Ra<Da;Ra++)_s[Ra].index in _i&&Sa.push(_i[_s[Ra].index]);return Sa},_l=function(_s){let Sa=[];return Sa[0]=[_s[0][0],_s[0][1],_s[0][2]],Sa[1]=[_s[1][0],_s[1][1],_s[1][2]],Sa},oa=function(_s){if(j.volume(_s)<j.maxVolume)return[_s];var Sa=_s[1][0]-_s[0][0],Ra=_s[1][1]-_s[0][1],Da=_s[1][2]-_s[0][2],Fa;Sa>Ra&&Sa>Da?Fa=0:Ra>Sa&&Ra>Da?Fa=1:Fa=2;var Na=_l(_s),_a=_l(_s),Pa=(_s[1][Fa]-_s[0][Fa])/2+_s[0][Fa];Na[1][Fa]=Pa,_a[0][Fa]=Pa;var qc=oa(Na),uf=oa(_a);return qc.concat(uf)},Ru=oa(le),ga=6;for(let _s=0,Sa=Ru.length;_s<Sa;_s++){let Ra=_l(Ru[_s]);Ra[0][0]-=ga,Ra[0][1]-=ga,Ra[0][2]-=ga,Ra[1][0]+=ga,Ra[1][1]+=ga,Ra[1][2]+=ga;let Da=j.getAtomsWithin(Ce,Ra),Fa=j.getAtomsWithin(Me,Ru[_s]);_n.push({extent:Ru[_s],atoms:ll(Da),toshow:ll(Fa)})}return _n}static generateSurfaceMesh(le,Ce,Me){var _n=new s.Geometry(!0),_i=_n.updateGeoGroup(0),ll=[];for(let ac=0,fc=le.length;ac<fc;ac++){var _l=le[ac];_l&&(typeof _l.surfaceColor<"u"?ll[ac]=_l.surfaceColor:_l.color&&(ll[ac]=f.CC.color(_l.color)))}var oa=_i.vertexArray,Ru=Ce.vertices;for(let ac=0,fc=Ru.length;ac<fc;ac++){let nd=_i.vertices*3;oa[nd]=Ru[ac].x,oa[nd+1]=Ru[ac].y,oa[nd+2]=Ru[ac].z,_i.vertices++}var ga=_i.colorArray;let _s=_i.atomArray;if(Me.voldata&&Me.volscheme){var Sa=Me.volscheme,Ra=Me.voldata,Da=Sa.range()||[-1,1];for(let ac=0,fc=Ru.length;ac<fc;ac++){let nd=Ru[ac].atomid,a0=Ra.getVal(Ru[ac].x,Ru[ac].y,Ru[ac].z),_1=f.CC.color(Sa.valueToHex(a0,Da)),_$=ac*3;ga[_$]=_1.r,ga[_$+1]=_1.g,ga[_$+2]=_1.b,_s[ac]=le[nd]}}else if(ll.length>0)for(let ac=0,fc=Ru.length;ac<fc;ac++){let nd=Ru[ac].atomid,a0=ac*3;ga[a0]=ll[nd].r,ga[a0+1]=ll[nd].g,ga[a0+2]=ll[nd].b,_s[ac]=le[nd]}var Fa=Ce.faces;_i.faceidx=Fa.length,_n.initTypedArrays();var Na=_i.vertexArray,_a=_i.normalArray,Pa,qc,uf,_h;for(let ac=0,fc=Fa.length;ac<fc;ac+=3){var Uh=Fa[ac],Kd=Fa[ac+1],ud=Fa[ac+2],sc=Uh*3,Yd=Kd*3,wg=ud*3;Pa=new o.Vector3(Na[sc],Na[sc+1],Na[sc+2]),qc=new o.Vector3(Na[Yd],Na[Yd+1],Na[Yd+2]),uf=new o.Vector3(Na[wg],Na[wg+1],Na[wg+2]),uf.subVectors(uf,qc),Pa.subVectors(Pa,qc),uf.cross(Pa),_h=uf,_h.normalize(),_a[sc]+=_h.x,_a[Yd]+=_h.x,_a[wg]+=_h.x,_a[sc+1]+=_h.y,_a[Yd+1]+=_h.y,_a[wg+1]+=_h.y,_a[sc+2]+=_h.z,_a[Yd+2]+=_h.z,_a[wg+2]+=_h.z}_i.faceArray=new Uint16Array(Fa);var Pf=new s.Mesh(_n,Me);return Pf}static generateMeshSyncHelper(le,Ce,Me,_n,_i,ll){var _l=new L.ProteinSurface;return _l.initparm(Ce,le!==1,ll),_l.fillvoxels(_i,Me),_l.buildboundary(),(le==L.SurfaceType.SES||le==L.SurfaceType.MS)&&(_l.fastdistancemap(),_l.boundingatom(!1),_l.fillvoxelswaals(_i,Me)),_l.marchingcube(le),_l.getFacesAndVertices(_n)}static getMatWithStyle(le){let Ce=null;le.onesided?Ce=new s.MeshLambertMaterial:Ce=new s.MeshDoubleLambertMaterial,Ce.vertexColors=s.Coloring.VertexColors;for(var Me in le)Me==="color"||Me==="map"||le.hasOwnProperty(Me)&&(Ce[Me]=le[Me]);return le.opacity!==void 0&&(le.opacity===1?Ce.transparent=!1:Ce.transparent=!0),Ce}addMesh(le){var Ce={geo:le.geometry,mat:le.material,done:!0,finished:!1},Me=this.nextSurfID();return this.surfaces[Me]=[Ce],Me}static shallowCopy(le){var Ce=[];let Me=le.length;for(let _n=0;_n<Me;_n++)Ce[_n]=(0,d.extend)({},le[_n]);return Ce}addSurface(le,Ce={},Me={},_n,_i,ll){let _l=this.nextSurfID(),oa=null,Ru=this,ga=L.SurfaceType.VDW;typeof le=="string"?j.surfaceTypeMap[le.toUpperCase()]!==void 0?ga=j.surfaceTypeMap[le]:console.log("Surface type : "+le+" is not recognized"):typeof le=="number"&&(ga=le);var _s=null,Sa=null,Ra=j.shallowCopy(this.getAtomsFromSel(Me));_n?_s=j.shallowCopy(this.getAtomsFromSel(_n)):_s=Ra,(0,d.adjustVolumeStyle)(Ce);var Da=!1,Fa;for(Fa=0;Fa<this.models.length;Fa++)if(this.models[Fa]){var Na=this.models[Fa].getSymmetries();if(Na.length>1||Na.length==1&&!Na[0].isIdentity()){Da=!0;break}}var _a=function(ud,sc,Yd){_i?Sa=j.shallowCopy(Ru.getAtomsFromSel(_i)):Sa=Yd;var wg,Pf=(0,d.getExtent)(Yd,!0);if(Ce.map&&Ce.map.prop){var ac=Ce.map.prop;let _2=(0,p.getGradient)(Ce.map.scheme||Ce.map.gradient||new p.Gradient.RWB),Nb=_2.range();Nb||(Nb=(0,d.getPropertyRange)(Yd,ac)),Ce.colorscheme={prop:ac,gradient:_2}}for(let _2=0,Nb=sc.length;_2<Nb;_2++)wg=sc[_2],wg.surfaceColor=(0,d.getColorFromStyle)(wg,Ce);var fc=j.volume(Pf),nd=Ru.carveUpExtent(Pf,sc,Yd);if(Sa&&Sa.length&&Sa.length>0){var a0=(0,d.getExtent)(Sa,!0),_1=function(_2,Nb){var _D=function(ih,Bd){var xg=ih.extent,hb=xg[1][0]-xg[0][0],_S=xg[1][1]-xg[0][1],rc=xg[1][2]-xg[0][2],e0=hb-Bd[2][0];e0*=e0;var b0=_S-Bd[2][1];b0*=b0;var nb=rc-Bd[2][2];return nb*=nb,e0+b0+nb},ec=_D(_2,a0),Jc=_D(Nb,a0);return ec-Jc};nd.sort(_1)}var _$=[];for(let _2=0,Nb=sc.length;_2<Nb;_2++)wg=sc[_2],_$[_2]={x:wg.x,y:wg.y,z:wg.z,serial:_2,elem:wg.elem};var $b=!!L.syncSurface;if($b){var Z_=function(Nb){return new Promise(function(_D){for(var ec=j.generateMeshSyncHelper(ga,nd[Nb].extent,nd[Nb].atoms,nd[Nb].toshow,_$,fc),Jc=(0,k.splitMesh)({vertexArr:ec.vertices,faceArr:ec.faces}),ih=0,Bd=Jc.length;ih<Bd;ih++){ec={vertices:Jc[ih].vertexArr,faces:Jc[ih].faceArr};var xg=j.generateSurfaceMesh(sc,ec,oa);(0,d.mergeGeos)(ud.geo,xg)}Ru.render(),_D()})},_b=[];for(let _2=0;_2<nd.length;_2++)_b.push(Z_(_2));return Promise.all(_b).then(function(){return ud.done=!0,Promise.resolve(_l)})}else{var cb=[];ga<0&&(ga=0);for(let _2=0,Nb=j.numWorkers;_2<Nb;_2++){var ib=new Worker($3Dmol.SurfaceWorker);cb.push(ib),ib.postMessage({type:-1,atoms:_$,volume:fc})}return new Promise(function(_2,Nb){var _D=0,ec=function(){!cb||!cb.length||cb.forEach(function(xg){xg&&xg.terminate&&xg.terminate()})},Jc=function(xg){for(var hb=(0,k.splitMesh)({vertexArr:xg.data.vertices,faceArr:xg.data.faces}),_S=0,rc=hb.length;_S<rc;_S++){var e0={vertices:hb[_S].vertexArr,faces:hb[_S].faceArr},b0=j.generateSurfaceMesh(sc,e0,oa);(0,d.mergeGeos)(ud.geo,b0)}Ru.render(),_D++,_D==nd.length&&(ud.done=!0,ec(),_2(_l))},ih=function(xg){ec(),console.log(xg.message+" ("+xg.filename+":"+xg.lineno+")"),Nb(xg)};for(let xg=0;xg<nd.length;xg++){var Bd=cb[xg%cb.length];Bd.onmessage=Jc,Bd.onerror=ih,Bd.postMessage({type:ga,expandedExtent:nd[xg].extent,extendedAtoms:nd[xg].atoms,atomsToShow:nd[xg].toshow})}})}};Ce=Ce||{},oa=j.getMatWithStyle(Ce);var Pa=[];Pa.style=Ce,Pa.atomsel=Me,Pa.allsel=_n,Pa.focus=_i;var qc=null;if(Da){var uf={},_h={};for(Fa=0;Fa<this.models.length;Fa++)uf[Fa]=[],_h[Fa]=[];for(Fa=0;Fa<_s.length;Fa++)uf[_s[Fa].model].push(_s[Fa]);for(Fa=0;Fa<Ra.length;Fa++)_h[Ra[Fa].model].push(Ra[Fa]);var Uh=[];for(Fa=0;Fa<this.models.length;Fa++)_h[Fa].length>0&&(Pa.push({geo:new s.Geometry(!0),mat:oa,done:!1,finished:!1,symmetries:this.models[Fa].getSymmetries()}),Uh.push(_a(Pa[Pa.length-1],uf[Fa],_h[Fa])));qc=Promise.all(Uh)}else Pa.push({geo:new s.Geometry(!0),mat:oa,done:!1,finished:!1,symmetries:[new o.Matrix4]}),qc=_a(Pa[Pa.length-1],_s,Ra);return this.surfaces[_l]=Pa,qc.surfid=_l,ll&&typeof ll=="function"?(qc.then(function(Kd){ll(Kd)}),_l):qc}setSurfaceMaterialStyle(le,Ce){if((0,d.adjustVolumeStyle)(Ce),this.surfaces[le]){var Me=this.surfaces[le];for(let _i=0;_i<Me.length;_i++){var _n=Me[_i].mat=j.getMatWithStyle(Ce);if(Me[_i].mat.side=s.FrontSide,Ce.color){Me[_i].mat.color=f.CC.color(Ce.color),Me[_i].geo.colorsNeedUpdate=!0;const ll=f.CC.color(Ce.color);Me[_i].geo.setColor(ll)}else if(_n.voldata&&_n.volscheme){const ll=_n.volscheme,_l=_n.voldata,oa=f.CC,Ru=ll.range()||[-1,1];Me[_i].geo.setColors(function(ga,_s,Sa){let Ra=_l.getVal(ga,_s,Sa);return oa.color(ll.valueToHex(Ra,Ru))})}else{Me[_i].geo.colorsNeedUpdate=!0;for(let ll of Me[_i].geo.geometryGroups)for(let _l=0;_l<ll.vertices;_l++){let oa=(0,d.getColorFromStyle)(ll.atomArray[_l],Ce),Ru=3*_l;ll.colorArray[Ru]=oa.r,ll.colorArray[Ru+1]=oa.g,ll.colorArray[Ru+2]=oa.b}}Me[_i].finished=!1}}return this}getSurface(le){return this.surfaces[le]}removeSurface(le){for(var Ce=this.surfaces[le],Me=0;Me<Ce.length;Me++)Ce[Me]&&Ce[Me].lastGL&&(Ce[Me].geo!==void 0&&Ce[Me].geo.dispose(),Ce[Me].mat!==void 0&&Ce[Me].mat.dispose(),this.modelGroup.remove(Ce[Me].lastGL));return delete this.surfaces[le],this.show(),this}removeAllSurfaces(){for(var le in this.surfaces)if(this.surfaces.hasOwnProperty(le)){for(var Ce=this.surfaces[le],Me=0;Me<Ce.length;Me++)Ce[Me]&&Ce[Me].lastGL&&(Ce[Me].geo!==void 0&&Ce[Me].geo.dispose(),Ce[Me].mat!==void 0&&Ce[Me].mat.dispose(),this.modelGroup.remove(Ce[Me].lastGL));delete this.surfaces[le]}return this.show(),this}jmolMoveTo(){var le=this.modelGroup.position,Ce="center { "+-le.x+" "+-le.y+" "+-le.z+" }; ",Me=this.rotationGroup.quaternion;return Ce+="moveto .5 quaternion { "+Me.x+" "+Me.y+" "+Me.z+" "+Me.w+" };",Ce}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(le,Ce){Ce=Ce||{};var Me=this.getAtomsFromSel(Ce);if(typeof le=="function")for(let ll=0,_l=Me.length;ll<_l;ll++){let oa=Me[ll];le(oa)}else for(let ll=0,_l=Me.length;ll<_l;ll++){var _n=Me[ll];for(let oa=0,Ru=le.length;oa<Ru;oa++){let ga=le[oa];if(ga.props)for(var _i in ga.props)ga.props.hasOwnProperty(_i)&&this.atomIsSelected(_n,ga)&&(_n.properties||(_n.properties={}),_n.properties[_i]=ga.props[_i])}}return this}linkViewer(le){return this.linkedViewers.push(le),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(le){this.rotationGroup.position.z=this.CAMERA_Z-le}setAutoEyeSeparation(le,Ce){var Me=this.getPerceivedDistance();return Ce||(Ce=5),le||this.camera.position.x>0?this.camera.position.x=Me*Math.tan(Math.PI/180*Ce):this.camera.position.x=-Me*Math.tan(Math.PI/180*Ce),this.camera.lookAt(new o.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(le){this.config.cartoonQuality=le}}j.numWorkers=4,j.maxVolume=64e3,j.surfaceTypeMap={VDW:L.SurfaceType.VDW,MS:L.SurfaceType.MS,SAS:L.SurfaceType.SAS,SES:L.SurfaceType.SES};function H(De,le){if(De=(0,d.getElement)(De),!!De){le=le||{};try{var Ce=new j(De,le);return Ce}catch(Me){throw"error creating viewer: "+Me}}}function me(De,le={},Ce={}){if(De=(0,d.getElement)(De),!!De){var Me=[],_n=document.createElement("canvas");Ce.rows=le.rows,Ce.cols=le.cols,Ce.control_all=le.control_all!=null?le.control_all:!1,De.appendChild(_n);try{for(var _i=0;_i<le.rows;_i++){for(var ll=[],_l=0;_l<le.cols;_l++){Ce.row=_i,Ce.col=_l,Ce.canvas=_n,Ce.viewers=Me,Ce.control_all=le.control_all;var oa=H(De,(0,d.extend)({},Ce));ll.push(oa)}Me.unshift(ll)}}catch(Ru){throw"error creating viewer grid: "+Ru}return Me}}function $e(De){var le=this;if(De=(0,d.getElement)(De),!!De){var Ce=me(De,{rows:1,cols:2,control_all:!0});this.glviewer1=Ce[0][0],this.glviewer2=Ce[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var Me=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(_i){return typeof le.glviewer1[_i]=="function"}),_n=0;_n<Me.length;_n++)this[Me[_n]]=function(_i){return function(){var ll=this.glviewer1[_i].apply(this.glviewer1,arguments),_l=this.glviewer2[_i].apply(this.glviewer2,arguments);return[ll,_l]}}(Me[_n]);this.setCoordinates=function(_i,ll,_l){for(var oa=0;oa<_i.length;oa++)_i[oa].setCoordinates(ll,_l)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(_i){this.glviewer1.render(),this.glviewer2.render(),_i&&_i(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}},"./src/Gradient.ts":(n,t,i)=>{i.r(t),i.d(t,{CustomLinear:()=>k,Gradient:()=>L,GradientType:()=>o,ROYGB:()=>v,RWB:()=>p,Sinebow:()=>_,builtinGradients:()=>P,getGradient:()=>d,normalizeValue:()=>f});var s=i("./src/colors.ts");class o{}function f(G,Z,W){return Z>=G?(W<G&&(W=G),W>Z&&(W=Z),{lo:G,hi:Z,val:W}):(W>G&&(W=G),W<Z&&(W=Z),W=G-W+Z,{lo:Z,hi:G,val:W})}function d(G){if(G instanceof o)return G;if(G.gradient!==void 0&&P[G.gradient]){let Z=G.min===void 0?-1:G.min,W=G.max===void 0?1:G.max;return G.mid===void 0?G.colors===void 0?new P[G.gradient](Z,W):new P[G.gradient](Z,W,G.colors):new P[G.gradient](Z,W,G.mid)}else if(typeof G.gradient=="string"&&G.gradient.startsWith("linear_")){let Z=G.gradient.split("_");Z.shift();let W=G.min===void 0?-1:G.min,j=G.max===void 0?1:G.max;return new k(W,j,Z)}return G}class p extends o{constructor(Z,W,j){super(),this.gradient="RWB",this.mult=1,this.mid=j,this.min=Z,this.max=W,typeof W>"u"&&Array.isArray(Z)&&Z.length>=2?(this.max=Z[1],this.min=Z[0]):Z&&W&&!Array.isArray(Z)&&(this.min=Z,this.max=W)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(Z,W){var j,H;if(Z=this.mult*Z,W?(j=W[0],H=W[1]):(j=this.min,H=this.max),Z===void 0)return 16777215;var me=f(j,H,Z);j=me.lo,H=me.hi,Z=me.val;var $e=(H+j)/2;W&&typeof W[2]<"u"?$e=W[2]:typeof this.mid<"u"?$e=this.mid:$e=(j+H)/2;var De,le;return Z<$e?(De=Math.floor(255*Math.sqrt((Z-j)/($e-j))),le=16711680+256*De+De,le):Z>$e?(De=Math.floor(255*Math.sqrt(1-(Z-$e)/(H-$e))),le=65536*De+256*De+255,le):16777215}}class v extends o{constructor(Z,W){super(),this.gradient="ROYGB",this.mult=1,this.min=Z,this.max=W,typeof W>"u"&&Array.isArray(Z)&&Z.length>=2?(this.max=Z[1],this.min=Z[0]):Z&&W&&!Array.isArray(Z)&&(this.min=Z,this.max=W)}valueToHex(Z,W){var j,H;if(Z=this.mult*Z,W?(j=W[0],H=W[1]):(j=this.min,H=this.max),typeof Z>"u")return 16777215;var me=f(j,H,Z);j=me.lo,H=me.hi,Z=me.val;var $e=(j+H)/2,De=(j+$e)/2,le=($e+H)/2,Ce,Me;return Z<De?(Ce=Math.floor(255*Math.sqrt((Z-j)/(De-j))),Me=16711680+256*Ce+0,Me):Z<$e?(Ce=Math.floor(255*Math.sqrt(1-(Z-De)/($e-De))),Me=65536*Ce+65280+0,Me):Z<le?(Ce=Math.floor(255*Math.sqrt((Z-$e)/(le-$e))),Me=65280+1*Ce,Me):(Ce=Math.floor(255*Math.sqrt(1-(Z-le)/(H-le))),Me=0+256*Ce+255,Me)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class _ extends o{constructor(Z,W){super(),this.gradient="Sinebow",this.mult=1,this.min=Z,this.max=W,typeof W>"u"&&Array.isArray(Z)&&Z.length>=2&&(this.max=Z[1],this.min=Z[0]),W<Z&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(Z,W){var j,H;if(Z=this.mult*Z,W?(j=W[0],H=W[1]):(j=this.min,H=this.max),typeof Z>"u")return 16777215;var me=L.normalizeValue(j,H,Z);j=me.lo,H=me.hi,Z=me.val;var $e=(Z-j)/(H-j),De=5*$e/6+.5,le=Math.sin(Math.PI*De);le*=le*255;var Ce=Math.sin(Math.PI*(De+1/3));Ce*=Ce*255;var Me=Math.sin(Math.PI*(De+2/3));return Me*=Me*255,65536*Math.floor(le)+256*Math.floor(Me)+1*Math.floor(Ce)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class k extends o{constructor(Z,W,j){super(),this.gradient="linear",this.colors=new Array;var H;if(Array.isArray(Z)&&Z.length>=2?(this.max=Z[1],this.min=Z[0],H=W):(this.min=Z,this.max=W,H=j),H)for(let me of H)this.colors.push(s.CC.color(me));else this.colors.push(s.CC.color(0))}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(Z,W){var j,H;if(W?(j=W[0],H=W[1]):(j=this.min,H=this.max),Z===void 0)return 16777215;var me=f(j,H,Z);j=me.lo,H=me.hi,Z=me.val;let $e=this.colors.length,De=(H-j)/$e,le=Math.min(Math.floor((Z-j)/De),$e-1),Ce=Math.min(le+1,$e-1),Me=(Z-j-le*De)/De,_n=this.colors[le],_i=this.colors[Ce];return new s.Color(_n.r+Me*(_i.r-_n.r),_n.g+Me*(_i.g-_n.g),_n.b+Me*(_i.b-_n.b)).getHex()}}const P={rwb:p,RWB:p,roygb:v,ROYGB:v,sinebow:_,linear:k};class L extends o{valueToHex(Z,W){return 0}range(){return null}}L.RWB=p,L.ROYGB=v,L.Sinebow=_,L.CustomLinear=k,L.builtinGradients=P,L.normalizeValue=f,L.getGradient=d},"./src/Label.ts":(n,t,i)=>{i.r(t),i.d(t,{Label:()=>_,LabelCount:()=>d});var s=i("./src/WebGL/index.ts"),o=i("./src/Gradient.ts"),f=i("./src/colors.ts");let d=0;function p(k,P,L,G,Z,W,j){k.beginPath(),k.moveTo(P+W,L),k.lineTo(P+G-W,L),k.quadraticCurveTo(P+G,L,P+G,L+W),k.lineTo(P+G,L+Z-W),k.quadraticCurveTo(P+G,L+Z,P+G-W,L+Z),k.lineTo(P+W,L+Z),k.quadraticCurveTo(P,L+Z,P,L+Z-W),k.lineTo(P,L+W),k.quadraticCurveTo(P,L,P+W,L),k.closePath(),k.fill(),j&&k.stroke()}function v(k,P,L){var G=L;return typeof k<"u"&&(k instanceof f.Color?G=k.scaled():(G=f.CC.color(k),typeof G.scaled<"u"&&(G=G.scaled()))),typeof P<"u"&&(G.a=parseFloat(P)),G}class _{constructor(P,L){this.id=d++,this.stylespec=L||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new s.Sprite,this.text=P,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var P=this.stylespec,L=typeof P.useScreen>"u"?!1:P.useScreen,G=P.showBackground;(G==="0"||G==="false")&&(G=!1),typeof G>"u"&&(G=!0);var Z=P.font?P.font:"sans-serif",W=parseInt(P.fontSize)?parseInt(P.fontSize):18,j=v(P.fontColor,P.fontOpacity,{r:255,g:255,b:255,a:1}),H=P.padding?P.padding:4,me=P.borderThickness?P.borderThickness:0,$e=v(P.backgroundColor,P.backgroundOpacity,{r:0,g:0,b:0,a:1}),De=v(P.borderColor,P.borderOpacity,$e),le=P.position?P.position:{x:-10,y:1,z:1},Ce=P.inFront!==void 0?P.inFront:!0;(Ce==="false"||Ce==="0")&&(Ce=!1);var Me=P.alignment||s.SpriteAlignment.topLeft;typeof Me=="string"&&Me in s.SpriteAlignment&&(Me=s.SpriteAlignment[Me]);var _n="";P.bold&&(_n="bold "),this.context.font=_n+W+"px  "+Z;var _i=this.context.measureText(this.text),ll=_i.width;G||(me=0);var _l=ll+2.5*me+2*H,oa=W*1.25+2*me+2*H;if(P.backgroundImage){var Ru=P.backgroundImage,ga=P.backgroundWidth?P.backgroundWidth:Ru.width,_s=P.backgroundHeight?P.backgroundHeight:Ru.height;ga>_l&&(_l=ga),_s>oa&&(oa=_s)}if(this.canvas.width=_l,this.canvas.height=oa,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),_n="",P.bold&&(_n="bold "),this.context.font=_n+W+"px  "+Z,this.context.fillStyle="rgba("+$e.r+","+$e.g+","+$e.b+","+$e.a+")",this.context.strokeStyle="rgba("+De.r+","+De.g+","+De.b+","+De.a+")",P.backgroundGradient){let Ra=this.context.createLinearGradient(0,oa/2,_l,oa/2),Da=o.Gradient.getGradient(P.backgroundGradient),Fa=Da.range(),Na=-1,_a=1;Fa&&(Na=Fa[0],_a=Fa[1]);let Pa=_a-Na;for(let qc=0;qc<1.01;qc+=.1){let uf=v(Da.valueToHex(Na+Pa*qc)),_h="rgba("+uf.r+","+uf.g+","+uf.b+","+uf.a+")";Ra.addColorStop(qc,_h)}this.context.fillStyle=Ra}this.context.lineWidth=me,G&&p(this.context,me,me,_l-2*me,oa-2*me,6,me>0),P.backgroundImage&&this.context.drawImage(Ru,0,0,_l,oa),this.context.fillStyle="rgba("+j.r+","+j.g+","+j.b+","+j.a+")",this.context.fillText(this.text,me+H,W+me+H,ll);var Sa=new s.Texture(this.canvas);Sa.needsUpdate=!0,this.sprite.material=new s.SpriteMaterial({map:Sa,useScreenCoordinates:L,alignment:Me,depthTest:!Ce,screenOffset:P.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(le.x,le.y,le.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}},"./src/ProteinSurface4.ts":(n,t,i)=>{i.r(t),i.d(t,{MarchingCube:()=>v,MarchingCubeInitializer:()=>p,PointGrid:()=>_,ProteinSurface:()=>k,SurfaceType:()=>o,setSyncSurface:()=>d,syncSurface:()=>f});var s=i("./src/WebGL/math/index.ts"),o;(function(P){P[P.VDW=1]="VDW",P[P.MS=2]="MS",P[P.SAS=3]="SAS",P[P.SES=4]="SES"})(o||(o={}));var f=!1;function d(P){f=P}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(f=!0);class p{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(L,G,Z,W){let j=!!W.fulltable,H=W.hasOwnProperty("origin")&&W.origin.hasOwnProperty("x")?W.origin:{x:0,y:0,z:0},me=!!W.voxel,$e=W.matrix,De=W.nX||0,le=W.nY||0,Ce=W.nZ||0,Me=W.scale||1,_n=null;W.unitCube?_n=W.unitCube:_n={x:Me,y:Me,z:Me};let _i=new Int32Array(De*le*Ce),ll,_l;for(ll=0,_l=_i.length;ll<_l;++ll)_i[ll]=-1;let oa=function(Sa,Ra,Da,Fa,Na,_a){let Pa={x:0,y:0,z:0},qc=!!(Fa&1<<Na),uf=!!(Fa&1<<_a),_h=Na;if(!qc&&uf&&(_h=_a),_h&1&&Da++,_h&2&&Ra++,_h&4&&Sa++,$e){let Kd=new s.Vector3(Sa,Ra,Da);Kd=Kd.applyMatrix4($e),Pa={x:Kd.x,y:Kd.y,z:Kd.z}}else Pa.x=H.x+_n.x*Sa,Pa.y=H.y+_n.y*Ra,Pa.z=H.z+_n.z*Da;let Uh=(le*Sa+Ra)*Ce+Da;return me?(G.push(Pa),G.length-1):(_i[Uh]<0&&(_i[Uh]=G.length,G.push(Pa)),_i[Uh])},Ru=new Int32Array(12),ga=j?this.edgeTable2:this.edgeTable,_s=j?this.triTable2:this.triTable;for(ll=0;ll<De-1;++ll)for(let Sa=0;Sa<le-1;++Sa)for(let Ra=0;Ra<Ce-1;++Ra){let Da=0;for(let _a=0;_a<8;++_a){let Pa=(le*(ll+((_a&4)>>2))+Sa+((_a&2)>>1))*Ce+Ra+(_a&1),qc=!!(L[Pa]&this.ISDONE);Da|=qc<<_a}if(Da===0||Da===255)continue;let Fa=ga[Da];if(Fa===0)continue;let Na=_s[Da];Fa&1&&(Ru[0]=oa(ll,Sa,Ra,Da,0,1)),Fa&2&&(Ru[1]=oa(ll,Sa,Ra,Da,1,3)),Fa&4&&(Ru[2]=oa(ll,Sa,Ra,Da,3,2)),Fa&8&&(Ru[3]=oa(ll,Sa,Ra,Da,2,0)),Fa&16&&(Ru[4]=oa(ll,Sa,Ra,Da,4,5)),Fa&32&&(Ru[5]=oa(ll,Sa,Ra,Da,5,7)),Fa&64&&(Ru[6]=oa(ll,Sa,Ra,Da,7,6)),Fa&128&&(Ru[7]=oa(ll,Sa,Ra,Da,6,4)),Fa&256&&(Ru[8]=oa(ll,Sa,Ra,Da,0,4)),Fa&512&&(Ru[9]=oa(ll,Sa,Ra,Da,1,5)),Fa&1024&&(Ru[10]=oa(ll,Sa,Ra,Da,3,7)),Fa&2048&&(Ru[11]=oa(ll,Sa,Ra,Da,2,6));for(let _a=0;_a<Na.length;_a+=3){let Pa=Ru[Na[_a]],qc=Ru[Na[_a+1]],uf=Ru[Na[_a+2]];me&&_a>=3&&(G.push(G[Pa]),Pa=G.length-1,G.push(G[qc]),qc=G.length-1,G.push(G[uf]),uf=G.length-1),Z.push(Pa),Z.push(qc),Z.push(uf)}}}laplacianSmooth(L,G,Z){let W=new Array(G.length),j,H,me,$e,De;for(j=0,H=G.length;j<H;j++)W[j]={x:0,y:0,z:0};let le=new Array(20),Ce;for(j=0;j<20;j++)le[j]=new Array(G.length);for(j=0,H=G.length;j<H;j++)le[0][j]=0;for(j=0,H=Z.length/3;j<H;j++){let _i=j*3,ll=j*3+1,_l=j*3+2;for(Ce=!0,me=0,$e=le[0][Z[_i]];me<$e;me++)if(Z[ll]==le[me+1][Z[_i]]){Ce=!1;break}for(Ce&&(le[0][Z[_i]]++,le[le[0][Z[_i]]][Z[_i]]=Z[ll]),Ce=!0,me=0,$e=le[0][Z[_i]];me<$e;me++)if(Z[_l]==le[me+1][Z[_i]]){Ce=!1;break}for(Ce&&(le[0][Z[_i]]++,le[le[0][Z[_i]]][Z[_i]]=Z[_l]),Ce=!0,me=0,$e=le[0][Z[ll]];me<$e;me++)if(Z[_i]==le[me+1][Z[ll]]){Ce=!1;break}for(Ce&&(le[0][Z[ll]]++,le[le[0][Z[ll]]][Z[ll]]=Z[_i]),Ce=!0,me=0,$e=le[0][Z[ll]];me<$e;me++)if(Z[_l]==le[me+1][Z[ll]]){Ce=!1;break}for(Ce&&(le[0][Z[ll]]++,le[le[0][Z[ll]]][Z[ll]]=Z[_l]),Ce=!0,me=0;me<le[0][Z[_l]];me++)if(Z[_i]==le[me+1][Z[_l]]){Ce=!1;break}for(Ce&&(le[0][Z[_l]]++,le[le[0][Z[_l]]][Z[_l]]=Z[_i]),Ce=!0,me=0,$e=le[0][Z[_l]];me<$e;me++)if(Z[ll]==le[me+1][Z[_l]]){Ce=!1;break}Ce&&(le[0][Z[_l]]++,le[le[0][Z[_l]]][Z[_l]]=Z[ll])}let Me=1,_n=.5;for(De=0;De<L;De++){for(j=0,H=G.length;j<H;j++)if(le[0][j]<3)W[j].x=G[j].x,W[j].y=G[j].y,W[j].z=G[j].z;else if(le[0][j]==3||le[0][j]==4){for(W[j].x=0,W[j].y=0,W[j].z=0,me=0,$e=le[0][j];me<$e;me++)W[j].x+=G[le[me+1][j]].x,W[j].y+=G[le[me+1][j]].y,W[j].z+=G[le[me+1][j]].z;W[j].x+=_n*G[j].x,W[j].y+=_n*G[j].y,W[j].z+=_n*G[j].z,W[j].x/=_n+le[0][j],W[j].y/=_n+le[0][j],W[j].z/=_n+le[0][j]}else{for(W[j].x=0,W[j].y=0,W[j].z=0,me=0,$e=le[0][j];me<$e;me++)W[j].x+=G[le[me+1][j]].x,W[j].y+=G[le[me+1][j]].y,W[j].z+=G[le[me+1][j]].z;W[j].x+=Me*G[j].x,W[j].y+=Me*G[j].y,W[j].z+=Me*G[j].z,W[j].x/=Me+le[0][j],W[j].y/=Me+le[0][j],W[j].z/=Me+le[0][j]}for(j=0,H=G.length;j<H;j++)G[j].x=W[j].x,G[j].y=W[j].y,G[j].z=W[j].z}}}let v=new p;class _{constructor(L,G,Z){this.data=new Int32Array(L*G*Z*3),this.width=G,this.height=Z}set(L,G,Z,W){let j=((L*this.width+G)*this.height+Z)*3;this.data[j]=W.ix,this.data[j+1]=W.iy,this.data[j+2]=W.iz}get(L,G,Z){let W=((L*this.width+G)*this.height+Z)*3;return{ix:this.data[W],iy:this.data[W+1],iz:this.data[W+2]}}}class k{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],k.MarchingCube||(k.MarchingCube=new p)}getVDWIndex(L){return!L.elem||typeof this.vdwRadii[L.elem]>"u"?"X":L.elem}getFacesAndVertices(L){let G={};for(let j=0,H=L.length;j<H;j++)G[L[j]]=!0;let Z=this.verts;for(let j=0,H=Z.length;j<H;j++)Z[j].x=Z[j].x/this.scaleFactor-this.ptranx,Z[j].y=Z[j].y/this.scaleFactor-this.ptrany,Z[j].z=Z[j].z/this.scaleFactor-this.ptranz;let W=[];for(let j=0,H=this.faces.length;j<H;j+=3){let me=this.faces[j],$e=this.faces[j+1],De=this.faces[j+2],le=Z[me].atomid,Ce=Z[$e].atomid,Me=Z[De].atomid,_n=le;Ce<_n&&(_n=Ce),Me<_n&&(_n=Me),G[_n]&&me!==$e&&$e!==De&&me!==De&&(W.push(me),W.push($e),W.push(De))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:Z,faces:W}}initparm(L,G,Z){Z>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let W=1/this.scaleFactor*5.5;this.pminx=L[0][0],this.pmaxx=L[1][0],this.pminy=L[0][1],this.pmaxy=L[1][1],this.pminz=L[0][2],this.pmaxz=L[1][2],G?(this.pminx-=this.probeRadius+W,this.pminy-=this.probeRadius+W,this.pminz-=this.probeRadius+W,this.pmaxx+=this.probeRadius+W,this.pmaxy+=this.probeRadius+W,this.pmaxz+=this.probeRadius+W):(this.pminx-=W,this.pminy-=W,this.pminz-=W,this.pmaxx+=W,this.pmaxy+=W,this.pmaxz+=W),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(G),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(L){let G={};for(const Z in this.vdwRadii){let W=this.vdwRadii[Z];L?G[Z]=(W+this.probeRadius)*this.scaleFactor+.5:G[Z]=W*this.scaleFactor+.5;let j=G[Z]*G[Z];this.widxz[Z]=Math.floor(G[Z])+1,this.depty[Z]=new Int32Array(this.widxz[Z]*this.widxz[Z]);let H=0;for(let me=0;me<this.widxz[Z];me++)for(let $e=0;$e<this.widxz[Z];$e++){let De=me*me+$e*$e;if(De>j)this.depty[Z][H]=-1;else{let le=Math.sqrt(j-De);this.depty[Z][H]=Math.floor(le)}H++}}}fillvoxels(L,G){for(let Z=0,W=this.vpBits.length;Z<W;Z++)this.vpBits[Z]=0,this.vpDistance[Z]=-1,this.vpAtomID[Z]=-1;for(let Z in G){let W=L[G[Z]];W!==void 0&&this.fillAtom(W,L)}for(let Z=0,W=this.vpBits.length;Z<W;Z++)this.vpBits[Z]&this.INOUT&&(this.vpBits[Z]|=this.ISDONE)}fillAtom(L,G){let Z=Math.floor(.5+this.scaleFactor*(L.x+this.ptranx)),W=Math.floor(.5+this.scaleFactor*(L.y+this.ptrany)),j=Math.floor(.5+this.scaleFactor*(L.z+this.ptranz)),H=this.getVDWIndex(L),me=0,$e=this.pWidth*this.pHeight;for(let De=0,le=this.widxz[H];De<le;De++)for(let Ce=0;Ce<le;Ce++){if(this.depty[H][me]!=-1){for(let Me=-1;Me<2;Me++)for(let _n=-1;_n<2;_n++)for(let _i=-1;_i<2;_i++)if(Me!==0&&_n!==0&&_i!==0){let ll=Me*De,_l=_i*Ce;for(let oa=0;oa<=this.depty[H][me];oa++){let Ru=oa*_n,ga=Z+ll,_s=W+Ru,Sa=j+_l;if(ga<0||_s<0||Sa<0||ga>=this.pLength||_s>=this.pWidth||Sa>=this.pHeight)continue;let Ra=ga*$e+_s*this.pHeight+Sa;if(!(this.vpBits[Ra]&this.INOUT))this.vpBits[Ra]|=this.INOUT,this.vpAtomID[Ra]=L.serial;else{let Da=G[this.vpAtomID[Ra]];if(Da.serial!=L.serial){let Fa=Z+ll-Math.floor(.5+this.scaleFactor*(Da.x+this.ptranx)),Na=W+Ru-Math.floor(.5+this.scaleFactor*(Da.y+this.ptrany)),_a=j+_l-Math.floor(.5+this.scaleFactor*(Da.z+this.ptranz));ll*ll+Ru*Ru+_l*_l<Fa*Fa+Na*Na+_a*_a&&(this.vpAtomID[Ra]=L.serial)}}}}}me++}}fillvoxelswaals(L,G){for(let Z=0,W=this.vpBits.length;Z<W;Z++)this.vpBits[Z]&=~this.ISDONE;for(let Z in G){let W=L[G[Z]];W!==void 0&&this.fillAtomWaals(W,L)}}fillAtomWaals(L,G){let Z=0,W=Math.floor(.5+this.scaleFactor*(L.x+this.ptranx)),j=Math.floor(.5+this.scaleFactor*(L.y+this.ptrany)),H=Math.floor(.5+this.scaleFactor*(L.z+this.ptranz)),me=this.getVDWIndex(L),$e=this.pWidth*this.pHeight;for(let De=0,le=this.widxz[me];De<le;De++)for(let Ce=0;Ce<le;Ce++){if(this.depty[me][Z]!=-1){for(let Me=-1;Me<2;Me++)for(let _n=-1;_n<2;_n++)for(let _i=-1;_i<2;_i++)if(Me!==0&&_n!==0&&_i!==0){let ll=Me*De,_l=_i*Ce;for(let oa=0;oa<=this.depty[me][Z];oa++){let Ru=oa*_n,ga=W+ll,_s=j+Ru,Sa=H+_l;if(ga<0||_s<0||Sa<0||ga>=this.pLength||_s>=this.pWidth||Sa>=this.pHeight)continue;let Ra=ga*$e+_s*this.pHeight+Sa;if(!(this.vpBits[Ra]&this.ISDONE))this.vpBits[Ra]|=this.ISDONE,this.vpAtomID[Ra]=L.serial;else{let Da=G[this.vpAtomID[Ra]];if(Da.serial!=L.serial){let Fa=W+ll-Math.floor(.5+this.scaleFactor*(Da.x+this.ptranx)),Na=j+Ru-Math.floor(.5+this.scaleFactor*(Da.y+this.ptrany)),_a=H+_l-Math.floor(.5+this.scaleFactor*(Da.z+this.ptranz));ll*ll+Ru*Ru+_l*_l<Fa*Fa+Na*Na+_a*_a&&(this.vpAtomID[Ra]=L.serial)}}}}}Z++}}buildboundary(){let L=this.pWidth*this.pHeight;for(let G=0;G<this.pLength;G++)for(let Z=0;Z<this.pHeight;Z++)for(let W=0;W<this.pWidth;W++){let j=G*L+W*this.pHeight+Z;if(this.vpBits[j]&this.INOUT){let H=0;for(;H<26;){let me=G+this.nb[H][0],$e=Z+this.nb[H][2],De=W+this.nb[H][1];if(me>-1&&me<this.pLength&&De>-1&&De<this.pWidth&&$e>-1&&$e<this.pHeight&&!(this.vpBits[me*L+De*this.pHeight+$e]&this.INOUT)){this.vpBits[j]|=this.ISBOUND;break}else H++}}}}fastdistancemap(){let L=new _(this.pLength,this.pWidth,this.pHeight),G=this.pWidth*this.pHeight,Z=this.cutRadius*this.cutRadius,W=[],j=[],H;for(let De=0;De<this.pLength;De++)for(let le=0;le<this.pWidth;le++)for(let Ce=0;Ce<this.pHeight;Ce++)if(H=De*G+le*this.pHeight+Ce,this.vpBits[H]&=~this.ISDONE,this.vpBits[H]&this.INOUT&&this.vpBits[H]&this.ISBOUND){let Me={ix:De,iy:le,iz:Ce};L.set(De,le,Ce,Me),W.push(Me),this.vpDistance[H]=0,this.vpBits[H]|=this.ISDONE,this.vpBits[H]&=~this.ISBOUND}do{j=this.fastoneshell(W,L),W=[];for(let De=0,le=j.length;De<le;De++)H=G*j[De].ix+this.pHeight*j[De].iy+j[De].iz,this.vpBits[H]&=~this.ISBOUND,this.vpDistance[H]<=1.0404*Z&&W.push({ix:j[De].ix,iy:j[De].iy,iz:j[De].iz})}while(W.length!==0);W=[],j=[],L=null;let me=this.scaleFactor-.5;me<0&&(me=0);let $e=Z-.5/(.1+me);for(let De=0;De<this.pLength;De++)for(let le=0;le<this.pWidth;le++)for(let Ce=0;Ce<this.pHeight;Ce++)H=De*G+le*this.pHeight+Ce,this.vpBits[H]&=~this.ISBOUND,this.vpBits[H]&this.INOUT&&(!(this.vpBits[H]&this.ISDONE)||this.vpBits[H]&this.ISDONE&&this.vpDistance[H]>=$e)&&(this.vpBits[H]|=this.ISBOUND)}fastoneshell(L,G){let Z,W,j,H,me,$e,De,le,Ce,Me=[];if(L.length===0)return Me;let _n={ix:-1,iy:-1,iz:-1},_i=this.pWidth*this.pHeight;for(let ll=0,_l=L.length;ll<_l;ll++){Z=L[ll].ix,W=L[ll].iy,j=L[ll].iz,le=G.get(Z,W,j);for(let oa=0;oa<6;oa++)_n.ix=Z+this.nb[oa][0],_n.iy=W+this.nb[oa][1],_n.iz=j+this.nb[oa][2],_n.ix<this.pLength&&_n.ix>-1&&_n.iy<this.pWidth&&_n.iy>-1&&_n.iz<this.pHeight&&_n.iz>-1&&(Ce=_n.ix*_i+this.pHeight*_n.iy+_n.iz,this.vpBits[Ce]&this.INOUT&&!(this.vpBits[Ce]&this.ISDONE)?(G.set(_n.ix,_n.iy,j+this.nb[oa][2],le),H=_n.ix-le.ix,me=_n.iy-le.iy,$e=_n.iz-le.iz,De=H*H+me*me+$e*$e,this.vpDistance[Ce]=De,this.vpBits[Ce]|=this.ISDONE,this.vpBits[Ce]|=this.ISBOUND,Me.push({ix:_n.ix,iy:_n.iy,iz:_n.iz})):this.vpBits[Ce]&this.INOUT&&this.vpBits[Ce]&this.ISDONE&&(H=_n.ix-le.ix,me=_n.iy-le.iy,$e=_n.iz-le.iz,De=H*H+me*me+$e*$e,De<this.vpDistance[Ce]&&(G.set(_n.ix,_n.iy,_n.iz,le),this.vpDistance[Ce]=De,this.vpBits[Ce]&this.ISBOUND||(this.vpBits[Ce]|=this.ISBOUND,Me.push({ix:_n.ix,iy:_n.iy,iz:_n.iz})))))}for(let ll=0,_l=L.length;ll<_l;ll++){Z=L[ll].ix,W=L[ll].iy,j=L[ll].iz,le=G.get(Z,W,j);for(let oa=6;oa<18;oa++)_n.ix=Z+this.nb[oa][0],_n.iy=W+this.nb[oa][1],_n.iz=j+this.nb[oa][2],_n.ix<this.pLength&&_n.ix>-1&&_n.iy<this.pWidth&&_n.iy>-1&&_n.iz<this.pHeight&&_n.iz>-1&&(Ce=_n.ix*_i+this.pHeight*_n.iy+_n.iz,this.vpBits[Ce]&this.INOUT&&!(this.vpBits[Ce]&this.ISDONE)?(G.set(_n.ix,_n.iy,j+this.nb[oa][2],le),H=_n.ix-le.ix,me=_n.iy-le.iy,$e=_n.iz-le.iz,De=H*H+me*me+$e*$e,this.vpDistance[Ce]=De,this.vpBits[Ce]|=this.ISDONE,this.vpBits[Ce]|=this.ISBOUND,Me.push({ix:_n.ix,iy:_n.iy,iz:_n.iz})):this.vpBits[Ce]&this.INOUT&&this.vpBits[Ce]&this.ISDONE&&(H=_n.ix-le.ix,me=_n.iy-le.iy,$e=_n.iz-le.iz,De=H*H+me*me+$e*$e,De<this.vpDistance[Ce]&&(G.set(_n.ix,_n.iy,_n.iz,le),this.vpDistance[Ce]=De,this.vpBits[Ce]&this.ISBOUND||(this.vpBits[Ce]|=this.ISBOUND,Me.push({ix:_n.ix,iy:_n.iy,iz:_n.iz})))))}for(let ll=0,_l=L.length;ll<_l;ll++){Z=L[ll].ix,W=L[ll].iy,j=L[ll].iz,le=G.get(Z,W,j);for(let oa=18;oa<26;oa++)_n.ix=Z+this.nb[oa][0],_n.iy=W+this.nb[oa][1],_n.iz=j+this.nb[oa][2],_n.ix<this.pLength&&_n.ix>-1&&_n.iy<this.pWidth&&_n.iy>-1&&_n.iz<this.pHeight&&_n.iz>-1&&(Ce=_n.ix*_i+this.pHeight*_n.iy+_n.iz,this.vpBits[Ce]&this.INOUT&&!(this.vpBits[Ce]&this.ISDONE)?(G.set(_n.ix,_n.iy,j+this.nb[oa][2],le),H=_n.ix-le.ix,me=_n.iy-le.iy,$e=_n.iz-le.iz,De=H*H+me*me+$e*$e,this.vpDistance[Ce]=De,this.vpBits[Ce]|=this.ISDONE,this.vpBits[Ce]|=this.ISBOUND,Me.push({ix:_n.ix,iy:_n.iy,iz:_n.iz})):this.vpBits[Ce]&this.INOUT&&this.vpBits[Ce]&this.ISDONE&&(H=_n.ix-le.ix,me=_n.iy-le.iy,$e=_n.iz-le.iz,De=H*H+me*me+$e*$e,De<this.vpDistance[Ce]&&(G.set(_n.ix,_n.iy,_n.iz,le),this.vpDistance[Ce]=De,this.vpBits[Ce]&this.ISBOUND||(this.vpBits[Ce]|=this.ISBOUND,Me.push({ix:_n.ix,iy:_n.iy,iz:_n.iz})))))}return Me}marchingcubeinit(L){for(let G=0,Z=this.vpBits.length;G<Z;G++)L==1?this.vpBits[G]&=~this.ISBOUND:L==4?(this.vpBits[G]&=~this.ISDONE,this.vpBits[G]&this.ISBOUND&&(this.vpBits[G]|=this.ISDONE),this.vpBits[G]&=~this.ISBOUND):L==2?this.vpBits[G]&this.ISBOUND&&this.vpBits[G]&this.ISDONE?this.vpBits[G]&=~this.ISBOUND:this.vpBits[G]&this.ISBOUND&&!(this.vpBits[G]&this.ISDONE)&&(this.vpBits[G]|=this.ISDONE):L==3&&(this.vpBits[G]&=~this.ISBOUND)}marchingcube(L){this.marchingcubeinit(L),this.verts=[],this.faces=[],k.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let G=this.pWidth*this.pHeight;for(let Z=0,W=this.verts.length;Z<W;Z++)this.verts[Z].atomid=this.vpAtomID[this.verts[Z].x*G+this.pHeight*this.verts[Z].y+this.verts[Z].z];k.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}k.MarchingCube=new p},"./src/VolumeData.ts":(n,t,i)=>{i.r(t),i.d(t,{VolumeData:()=>v});var s=i("./src/utilities.ts"),o=i("./src/WebGL/math/index.ts"),f=i("./src/parsers/VASP.ts"),d=i("./src/parsers/CUBE.ts"),p=i("./node_modules/pako/dist/pako.esm.mjs");class v{constructor(k,P,L){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(H){var me=H/(this.size.y*this.size.z),$e=H%(this.size.y*this.size.z),De=H%this.size.z;return me*=this.unit.x,$e*=this.unit.y,De*=this.unit.z,me+=this.origin.x,$e+=this.origin.y,De+=this.origin.z,{x:me,y:$e,z:De}},this.vasp=function(H){var me=H.replace(/^\s+/,"").split(/[\n\r]/),$e=(0,f.VASP)(H)[0],De=$e.length;if(De==0){console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];return}var le=1.889725992,Ce=.036749309,Me=parseFloat(me[1]),_n;_n=me[2].replace(/^\s+/,"").split(/\s+/);var _i=new o.Vector3(parseFloat(_n[0]),parseFloat(_n[1]),parseFloat(_n[2])).multiplyScalar(Me*le);_n=me[3].replace(/^\s+/,"").split(/\s+/);var ll=new o.Vector3(parseFloat(_n[0]),parseFloat(_n[1]),parseFloat(_n[2])).multiplyScalar(Me*le);_n=me[4].replace(/^\s+/,"").split(/\s+/);var _l=new o.Vector3(parseFloat(_n[0]),parseFloat(_n[1]),parseFloat(_n[2])).multiplyScalar(Me*le),oa=_i.x*(ll.y*_l.z-_l.y*ll.z)-ll.x*(_i.y*_l.z-_l.y*_i.z)+_l.x*(_i.y*ll.z-ll.y*_i.z);oa=Math.abs(oa)/Math.pow(le,3);var Ru=1/oa;me.splice(0,8+De+1);var ga=me[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),_s=Math.abs(parseFloat(ga[0])),Sa=Math.abs(parseFloat(ga[1])),Ra=Math.abs(parseFloat(ga[2])),Da=this.origin=new o.Vector3(0,0,0);this.size={x:_s,y:Sa,z:Ra},this.unit=new o.Vector3(_i.x,ll.y,_l.z),_i=_i.multiplyScalar(1/(le*_s)),ll=ll.multiplyScalar(1/(le*Sa)),_l=_l.multiplyScalar(1/(le*Ra)),(_i.y!=0||_i.z!=0||ll.x!=0||ll.z!=0||_l.x!=0||_l.y!=0)&&(this.matrix=new o.Matrix4(_i.x,ll.x,_l.x,0,_i.y,ll.y,_l.y,0,_i.z,ll.z,_l.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new o.Matrix4().makeTranslation(Da.x,Da.y,Da.z)),this.origin=new o.Vector3(0,0,0),this.unit=new o.Vector3(1,1,1)),me.splice(0,1);var Fa=me.join(" ");Fa=Fa.replace(/^\s+/,"");var Na=Fa.split(/[\s\r]+/);Na.splice(_s*Sa*Ra+1);for(var _a=Float32Array.from(Na,parseFloat),Pa=0;Pa<_a.length;Pa++)_a[Pa]=_a[Pa]*Ru*Ce;this.data=_a},this.dx=function(H){var me=H.split(/[\n\r]+/),$e,De=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,le=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,Ce=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,Me=/data follows/,_n=0;for(_n=0;_n<me.length;_n++){var _i=me[_n];if($e=De.exec(_i)){var ll=parseInt($e[1]),_l=parseInt($e[2]),oa=parseInt($e[3]);this.size={x:ll,y:_l,z:oa}}else if($e=Ce.exec(_i)){var Ru=parseFloat($e[1]);if((parseFloat($e[2])!=0||parseFloat($e[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),_n+=1,_i=me[_n],$e=Ce.exec(_i),$e==null){console.error("Parse error in dx delta matrix");return}var ga=parseFloat($e[2]);if((parseFloat($e[1])!=0||parseFloat($e[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),_n+=1,_i=me[_n],$e=Ce.exec(_i),$e==null){console.error("Parse error in dx delta matrix");return}var _s=parseFloat($e[3]);(parseFloat($e[1])!=0||parseFloat($e[2])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new o.Vector3(Ru,ga,_s)}else if($e=le.exec(_i)){var Sa=parseFloat($e[1]),Ra=parseFloat($e[2]),Da=parseFloat($e[3]);this.origin=new o.Vector3(Sa,Ra,Da)}else if($e=Me.exec(_i))break}if(_n+=1,!this.size||!this.origin||!this.unit||!this.size){console.error("Error parsing dx format");return}var Fa=me.splice(_n).join(" "),Na=Fa.split(/[\s\r]+/);this.data=Float32Array.from(Na,parseFloat)},P=P.toLowerCase(),/\.gz$/.test(P)){P=P.replace(/\.gz$/,"");try{this[P]&&this.isbinary.has(P)?(typeof k=="string"&&(k=(0,s.base64ToArray)(k)),k=(0,p.inflate)(k)):k=new TextDecoder("utf-8").decode((0,p.inflate)(k))}catch(H){console.error(H)}}if(this[P]&&(this.isbinary.has(P)&&typeof k=="string"&&(k=(0,s.base64ToArray)(k)),this[P](k)),L){if(L.negate)for(let H=0,me=this.data.length;H<me;H++)this.data[H]=-this.data[H];if(L.normalize){var G=0;for(let H=0,me=this.data.length;H<me;H++)G+=this.data[H];var Z=G/this.data.length;G=0;for(let H=0,me=this.data.length;H<me;H++){var W=this.data[H]-Z;G+=W*W}var j=G/this.data.length;for(let H=0,me=this.data.length;H<me;H++)this.data[H]=(this.data[H]-Z)/j}}}getIndex(k,P,L){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new o.Matrix4().getInverse(this.matrix));var G=new o.Vector3(k,P,L);G=G.applyMatrix4(this.inversematrix),k=G.x,P=G.y,L=G.z}else k-=this.origin.x,P-=this.origin.y,L-=this.origin.z,k/=this.unit.x,P/=this.unit.y,L/=this.unit.z;return k=Math.round(k),P=Math.round(P),L=Math.round(L),k<0||k>=this.size.x||P<0||P>=this.size.y||L<0||L>=this.size.z?-1:k*this.size.y*this.size.z+P*this.size.z+L}getVal(k,P,L){let G=this.getIndex(k,P,L);return G<0?0:this.data[G]}cube(k){var P=k.split(/\r?\n/);if(!(P.length<6)){var L=(0,d.CUBE)(k,{}).modelData[0].cryst,G=P[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Z=parseFloat(G[0]),W=Math.abs(Z);this.origin=L.origin,this.size=L.size,this.unit=L.unit,this.matrix=L.matrix4;var j=6;Z<0&&j++;var H=P.splice(W+j).join(" ");H=H.replace(/^\s+/,"");var me=H.split(/[\s\r]+/);this.data=Float32Array.from(me,parseFloat)}}ccp4(k){var P={};k=new Int8Array(k);var L=new Int32Array(k.buffer,0,56),G=new Float32Array(k.buffer,0,56),Z=new DataView(k.buffer);if(P.MAP=String.fromCharCode(Z.getUint8(208),Z.getUint8(209),Z.getUint8(210),Z.getUint8(211)),P.MACHST=[Z.getUint8(212),Z.getUint8(213)],P.MACHST[0]===17&&P.MACHST[1]===17)for(var W=k.byteLength,j=0;j<W;j+=4)Z.setFloat32(j,Z.getFloat32(j),!0);P.NX=L[0],P.NY=L[1],P.NZ=L[2],P.MODE=L[3],P.NXSTART=L[4],P.NYSTART=L[5],P.NZSTART=L[6],P.MX=L[7],P.MY=L[8],P.MZ=L[9],P.xlen=G[10],P.ylen=G[11],P.zlen=G[12],P.alpha=G[13],P.beta=G[14],P.gamma=G[15],P.MAPC=L[16],P.MAPR=L[17],P.MAPS=L[18],P.DMIN=G[19],P.DMAX=G[20],P.DMEAN=G[21],P.ISPG=L[22],P.NSYMBT=L[23],P.LSKFLG=L[24],P.originX=G[49],P.originY=G[50],P.originZ=G[51],P.ARMS=G[54];var H=P,me=[H.xlen,0,0],$e=[H.ylen*Math.cos(Math.PI/180*H.gamma),H.ylen*Math.sin(Math.PI/180*H.gamma),0],De=[H.zlen*Math.cos(Math.PI/180*H.beta),H.zlen*(Math.cos(Math.PI/180*H.alpha)-Math.cos(Math.PI/180*H.gamma)*Math.cos(Math.PI/180*H.beta))/Math.sin(Math.PI/180*H.gamma),0];De[2]=Math.sqrt(H.zlen*H.zlen*Math.sin(Math.PI/180*H.beta)*Math.sin(Math.PI/180*H.beta)-De[1]*De[1]);var le=[0,me,$e,De],Ce=[0,H.MX,H.MY,H.MZ],Me=[0,H.MAPC,H.MAPR,H.MAPS];this.matrix=new o.Matrix4,this.matrix.set(le[Me[1]][0]/Ce[Me[1]],le[Me[2]][0]/Ce[Me[2]],le[Me[3]][0]/Ce[Me[3]],0,le[Me[1]][1]/Ce[Me[1]],le[Me[2]][1]/Ce[Me[2]],le[Me[3]][1]/Ce[Me[3]],0,le[Me[1]][2]/Ce[Me[1]],le[Me[2]][2]/Ce[Me[2]],le[Me[3]][2]/Ce[Me[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new o.Matrix4().makeTranslation(H.NXSTART+H.originX,H.NYSTART+H.originY,H.NZSTART+H.originZ)),this.origin=new o.Vector3(0,0,0),this.unit=new o.Vector3(1,1,1),this.size={x:P.NX,y:P.NY,z:P.NZ},this.dimensionorder=[P.MAPC,P.MAPR,P.MAPS];var _n=new Float32Array(k.buffer,1024+P.NSYMBT),_i=P.NX,ll=P.NY,_l=P.NZ;this.data=new Float32Array(_i*ll*_l);for(let oa=0;oa<_i;oa++)for(let Ru=0;Ru<ll;Ru++)for(let ga=0;ga<_l;ga++)this.data[(oa*ll+Ru)*_l+ga]=_n[(ga*ll+Ru)*_i+oa]}}},"./src/VolumetricRender.ts":(n,t,i)=>{i.r(t),i.d(t,{GLVolumetricRender:()=>v});var s=i("./src/WebGL/shapes/index.ts"),o=i("./src/WebGL/math/index.ts"),f=i("./src/WebGL/index.ts"),d=i("./src/colors.ts"),p=i("./src/GLShape.ts");class v{static interpolateArray(k,P){function L(De,le,Ce){return De+(le-De)*Ce}var G=[],Z=(k.length-1)/(P-1);G[0]=k[0];for(var W=1;W<P-1;W++){var j=W*Z,H=Math.floor(j),me=Math.ceil(j),$e=j-H;G[W]=L(k[H],k[me],$e)}return G[P-1]=k[k.length-1],G}constructor(k,P,L){this.hidden=!1,this.boundingSphere=new s.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,P=P||{};var G=Object.assign([],P.transferfn);this.subsamples=P.subsamples||5;let Z=256;G.forEach(function(ll){ll.value=parseFloat(ll.value)}),G.sort(function(ll,_l){return ll.value-_l.value}),this.min=G[0].value,G.length==0&&G.push(G[0]),this.max=G[G.length-1].value;var W,j,H,me,$e,De,le,Ce,Me,_n;for(let ll=0;ll<G.length-1;ll++)if(H=d.CC.color(G[ll].color),me=d.CC.color(G[ll+1].color),Me=G[ll].opacity,_n=G[ll+1].opacity,W=Math.floor((G[ll].value-this.min)*Z/(this.max-this.min)),j=Math.floor((G[ll+1].value-this.min)*Z/(this.max-this.min)),W!=j){$e=v.interpolateArray([H.r*255,me.r*255],j-W),De=v.interpolateArray([H.g*255,me.g*255],j-W),le=v.interpolateArray([H.b*255,me.b*255],j-W),Ce=v.interpolateArray([Me*255,_n*255],j-W);for(let _l=0;_l<$e.length;_l++)this.transferfunctionbuffer.push($e[_l]),this.transferfunctionbuffer.push(De[_l]),this.transferfunctionbuffer.push(le[_l]),this.transferfunctionbuffer.push(Ce[_l])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),k.matrix){let ll=new o.Vector3(0,0,0),_l=new o.Vector3(k.size.x,k.size.y,k.size.z),oa=new o.Vector3(1,1,1);ll.applyMatrix4(k.matrix),_l.applyMatrix4(k.matrix),oa.applyMatrix4(k.matrix).sub(ll),this.extent=[[ll.x,ll.y,ll.z],[_l.x,_l.y,_l.z]];for(let Sa=1;Sa<7;Sa++)_l.x=Sa&1?k.size.x:0,_l.y=Sa&2?k.size.y:0,_l.z=Sa&4?k.size.z:0,_l.applyMatrix4(k.matrix),this.extent[0][0]=Math.min(this.extent[0][0],_l.x),this.extent[0][1]=Math.min(this.extent[0][1],_l.y),this.extent[0][2]=Math.min(this.extent[0][2],_l.z),this.extent[1][0]=Math.max(this.extent[1][0],_l.x),this.extent[1][1]=Math.max(this.extent[1][1],_l.y),this.extent[1][2]=Math.max(this.extent[1][2],_l.z);let Ru=_l.x-ll.x,ga=_l.y-ll.y,_s=_l.z-ll.z;this.maxdepth=Math.sqrt(Ru*Ru+ga*ga+_s*_s),this.minunit=Math.min(Math.min(oa.x,oa.y),oa.z),this.texmatrix=new o.Matrix4().identity().scale({x:k.size.x,y:k.size.y,z:k.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(k.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new o.Matrix4().identity();let ll=k.unit.x*k.size.x,_l=k.unit.y*k.size.y,oa=k.unit.z*k.size.z;this.texmatrix.makeTranslation(-k.origin.x/ll,-k.origin.y/_l,-k.origin.z/oa),this.texmatrix.scale({x:1/ll,y:1/_l,z:1/oa}),this.minunit=Math.min(Math.min(k.unit.x,k.unit.y),k.unit.z),this.extent=[[k.origin.x,k.origin.y,k.origin.z],[k.origin.x+ll,k.origin.y+_l,k.origin.z+oa]],this.maxdepth=Math.sqrt(ll*ll+_l*_l+oa*oa)}var _i=new p.GLShape({});if(_i.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=_i.finalize(),this.boundingSphere.center=new o.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,P.coords===void 0&&P.selection!==void 0&&(L?P.coords=L.selectedAtoms(P.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),P.coords!==void 0&&P.seldist!==void 0){let ll=new Uint8Array(k.data.length),_l=P.seldist,oa=_l*_l;for(let Ru=0,ga=P.coords.length;Ru<ga;Ru++){let _s=P.coords[Ru],Sa=_s.x-_l,Ra=_s.y-_l,Da=_s.z-_l,Fa=_s.x+_l,Na=_s.y+_l,_a=_s.z+_l;if(k.getIndex(Sa,Ra,Da)>=0||k.getIndex(Fa,Na,_a)>=0)for(let Pa=Sa;Pa<Fa;Pa+=this.minunit)for(let qc=Ra;qc<Na;qc+=this.minunit)for(let uf=Da;uf<_a;uf+=this.minunit){let _h=k.getIndex(Pa,qc,uf);_h>=0&&!ll[_h]&&(Pa-_s.x)*(Pa-_s.x)+(qc-_s.y)*(qc-_s.y)+(uf-_s.z)*(uf-_s.z)<oa&&(ll[_h]=1)}}for(let Ru=0,ga=k.data.length;Ru<ga;Ru++)ll[Ru]==0&&(k.data[Ru]=1/0)}this.data=k}globj(k){if(this.renderedShapeObj&&(k.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new f.Object3D;var P=null,L=new f.Texture(this.data,!0),G=new f.Texture(this.transferfunctionbuffer,!1);L.needsUpdate=!0,G.needsUpdate=!0,G.flipY=!1,P=new f.VolumetricMaterial({transferfn:G,transfermin:this.min,transfermax:this.max,map:L,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var Z=new f.Mesh(this.geo,P);this.shapeObj.add(Z),this.renderedShapeObj=this.shapeObj.clone(),k.add(this.renderedShapeObj)}}removegl(k){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),k.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}},"./src/WebGL/Camera.ts":(n,t,i)=>{i.r(t),i.d(t,{Camera:()=>f});var s=i("./src/WebGL/core/index.ts"),o=i("./src/WebGL/math/index.ts");class f extends s.Object3D{constructor(p=50,v=1,_=.1,k=2e3,P=!1){super(),this.projectionMatrix=new o.Matrix4,this.projectionMatrixInverse=new o.Matrix4,this.matrixWorldInverse=new o.Matrix4,this.fov=p,this.aspect=v,this.near=_,this.far=k;var L=this.position.z;this.right=L*Math.tan(Math.PI/180*p),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!P,this.updateProjectionMatrix()}lookAt(p){this.matrix.lookAt(this.position,p,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof o.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}},"./src/WebGL/Fog.ts":(n,t,i)=>{i.r(t),i.d(t,{Fog:()=>o});var s=i("./src/colors.ts");class o{constructor(d,p=1,v=1e3){this.name="",this.color=new s.Color(d),this.near=p,this.far=v}clone(){return new o(this.color.getHex(),this.near,this.far)}}},"./src/WebGL/Renderer.ts":(n,t,i)=>{i.r(t),i.d(t,{Renderer:()=>W});var s=i("./src/WebGL/Camera.ts"),o=i("./src/WebGL/constants/Sides.ts"),f=i("./src/WebGL/constants/TextureConstants.ts"),d=i("./src/WebGL/core/index.ts"),p=i("./src/colors.ts"),v=i("./src/WebGL/materials/index.ts"),_=i("./src/WebGL/math/index.ts"),k=i("./src/WebGL/objects/index.ts"),P=i("./src/WebGL/shaders/index.ts"),L=i("./src/WebGL/SpritePlugin.ts"),G=null,Z=null;class W{constructor(H){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new _.Vector3,this._worldInverse=new _.Matrix4,this._projInverse=new _.Matrix4,this._textureMatrix=new _.Matrix4,this._fullProjModelMatrix=new _.Matrix4,this._fullProjModelMatrixInv=new _.Matrix4,this._direction=new _.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new L.SpritePlugin,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,H=H||{},this.row=H.row,this.col=H.col,this.rows=H.rows,this.cols=H.cols,this._canvas=H.canvas!==void 0?H.canvas:document.createElement("canvas"),this._precision=H.precision!==void 0?H.precision:"highp",this._alpha=H.alpha!==void 0?H.alpha:!0,this._premultipliedAlpha=H.premultipliedAlpha!==void 0?H.premultipliedAlpha:!0,this._antialias=H.antialias!==void 0?H.antialias:!1,this._preserveDrawingBuffer=H.preserveDrawingBuffer!==void 0?H.preserveDrawingBuffer:!1,this._clearColor=H.clearColor!==void 0?new p.Color(H.clearColor):new p.Color(0),this._clearAlpha=H.clearAlpha!==void 0?H.clearAlpha:0,this._outlineMaterial=new v.MeshOutlineMaterial(H.outline),this._outlineSphereImposterMaterial=new v.SphereImposterOutlineMaterial(H.outline),this._outlineStickImposterMaterial=new v.StickImposterOutlineMaterial(H.outline),this._outlineEnabled=!!H.outline,this._AOEnabled=!!H.ambientOcclusion,H.ambientOcclusion&&typeof H.ambientOcclusion.strength<"u"&&(this._AOstrength=parseFloat(H.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),H.ambientOcclusion&&typeof H.ambientOcclusion.radius<"u"&&(this._AOradius=parseFloat(H.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=H.id,!(H.containerWidth==0||H.containerHeight==0)&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(H,me){this._clearColor.setHex(H),this._clearAlpha=me,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(H){this._outlineMaterial=new v.MeshOutlineMaterial(H),this._outlineSphereImposterMaterial=new v.SphereImposterOutlineMaterial(H),this._outlineStickImposterMaterial=new v.StickImposterOutlineMaterial(H),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(H){H&&(H.strength&&(this._AOstrength=H.strength),H.scale&&(this._AOradius=H.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var H=this._canvas.width/this.cols,me=this._canvas.height/this.rows;this._viewportWidth=H,this._viewportHeight=me,this.isLost()||(this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(H*this.col,me*this.row,H,me),this._gl.viewport(H*this.col,me*this.row,H,me))}}setSize(H,me){if(this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._antialias&&this.devicePixelRatio<2&&(this.devicePixelRatio*=2),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var $e=H/this.cols,De=me/this.rows;this._canvas.width=H*this.devicePixelRatio,this._canvas.height=me*this.devicePixelRatio,this._viewportWidth=$e*this.devicePixelRatio,this._viewportHeight=De*this.devicePixelRatio,this._canvas.style.width=H+"px",this._canvas.style.height=me+"px",this.setViewport()}else this._viewportWidth=this._canvas.width=H*this.devicePixelRatio,this._viewportHeight=this._canvas.height=me*this.devicePixelRatio,this._canvas.style.width=H+"px",this._canvas.style.height=me+"px",this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight);this.initFrameBuffer()}clear(H,me,$e){var De=0;(H===void 0||H)&&(De|=this._gl.COLOR_BUFFER_BIT),(me===void 0||me)&&(De|=this._gl.DEPTH_BUFFER_BIT),($e===void 0||$e)&&(De|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(De)}setMaterialFaces(H,me){var $e=H.side===o.DoubleSide,De=H.side===o.BackSide;H.imposter||(De=me?!De:De),this._oldDoubleSided!==$e&&($e?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=$e),this._oldFlipSided!==De&&(De?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=De),this._gl.cullFace(this._gl.BACK)}setDepthTest(H){this._oldDepthTest!==H&&(H?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=H)}setDepthWrite(H){this._oldDepthWrite!==H&&(this._gl.depthMask(H),this._oldDepthWrite=H)}setBlending(H){H?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(H,me,$e,De){H.addEventListener("dispose",this.onMaterialDispose.bind(this));var le,Ce;if(Ce=H.shaderID,Ce){var Me=P.ShaderLib[Ce];H.vertexShader=Me.vertexShader,H.fragmentShader=Me.fragmentShader,H.uniforms=P.ShaderUtils.clone(Me.uniforms),H.shaded&&H.makeShaded(this.SHADE_TEXTURE)}le={wireframe:H.wireframe,fragdepth:H.imposter,volumetric:H.volumetric,shaded:H.shaded},H.program=this.buildProgram(H.fragmentShader,H.vertexShader,H.uniforms,le)}renderBuffer(H,me,$e,De,le,Ce){if(De.visible){var Me,_n;if(Me=this.setProgram(H,me,$e,De,Ce,this),!!Me){_n=Me.attributes;var _i=!1,ll=De.wireframe?1:0,_l=le.id*16777215+Me.id*2+ll;_l!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=_l,_i=!0),_i&&(this.disableAttributes(),_n.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,le.__webglVertexBuffer),this.enableAttribute(_n.position),this._gl.vertexAttribPointer(_n.position,3,this._gl.FLOAT,!1,0,0)),_n.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,le.__webglColorBuffer),this.enableAttribute(_n.color),this._gl.vertexAttribPointer(_n.color,3,this._gl.FLOAT,!1,0,0)),_n.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,le.__webglNormalBuffer),this.enableAttribute(_n.normal),this._gl.vertexAttribPointer(_n.normal,3,this._gl.FLOAT,!1,0,0)),_n.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,le.__webglOffsetBuffer),this.enableAttribute(_n.offset),this._gl.vertexAttribPointer(_n.offset,3,this._gl.FLOAT,!1,0,0)),_n.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,le.__webglRadiusBuffer),this.enableAttribute(_n.radius),this._gl.vertexAttribPointer(_n.radius,1,this._gl.FLOAT,!1,0,0)));var oa,Ru;if(Ce instanceof k.Mesh){if(De.shaderID==="instanced"){var ga=De.sphere.geometryGroups[0];_i&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,le.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,ga.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,le.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,ga.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,le.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,ga.faceArray,this._gl.STATIC_DRAW)),oa=ga.faceidx,this._extInstanced.vertexAttribDivisorANGLE(_n.offset,1),this._extInstanced.vertexAttribDivisorANGLE(_n.radius,1),this._extInstanced.vertexAttribDivisorANGLE(_n.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,oa,this._gl.UNSIGNED_SHORT,0,le.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(_n.offset,0),this._extInstanced.vertexAttribDivisorANGLE(_n.radius,0),this._extInstanced.vertexAttribDivisorANGLE(_n.color,0)}else De.wireframe?(Ru=le.lineidx,this.setLineWidth(De.wireframeLinewidth),_i&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,le.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,Ru,this._gl.UNSIGNED_SHORT,0)):(oa=le.faceidx,_i&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,le.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,oa,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=oa,this.info.render.faces+=oa/3}else Ce instanceof k.Line&&(Ru=le.vertices,this.setLineWidth(De.linewidth),this._gl.drawArrays(this._gl.LINES,0,Ru),this.info.render.calls++)}}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(H,me,$e){let De=H.__lights,le=H.fog,Ce=[];for(let _i=0,ll=H.__webglObjects.length;_i<ll;_i++){let _l=H.__webglObjects[_i];_l.render&&_l[$e]&&Ce.push(_l)}if(Ce.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(H.__webglObjects,!0,$e+"Depth",me,De,le,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let Me=this._AOshader.uniforms;this._gl.uniform1f(Me.total_strength,this._AOstrength),this._gl.uniform1f(Me.radius,this._AOradius),this._fullProjModelMatrix=new _.Matrix4,this._fullProjModelMatrixInv=new _.Matrix4;let _n=Ce[0].object;this._fullProjModelMatrix.multiplyMatrices(me.projectionMatrix,_n._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(Me.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(Me.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(H,me){if(!(me instanceof s.Camera)){console.error("Renderer.render: camera is not an instance of Camera.");return}var $e,De,le,Ce,Me,_n=H.__lights,_i=H.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&H.updateMatrixWorld(),me.parent===void 0&&me.updateMatrixWorld(),me.matrixWorldInverse.getInverse(me.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(H),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),Me=H.__webglObjects;let ll=!1,_l=this._AOEnabled;for($e=0,De=Me.length;$e<De;$e++)le=Me[$e],Ce=le.object,le.render=!1,Ce.visible&&(this.setupMatrices(Ce,me),this.unrollBufferMaterial(le),le.render=!0,le.volumetric&&(ll=!0),le.hasAO&&(_l=!0));if(this.setBlending(!1),_l&&this.setShading(H,me,"opaque"),this.renderObjects(H.__webglObjects,!0,"opaque",me,_n,_i,!1),_l&&this.clearShading(),this.renderSprites(H,me,!1),this.renderObjects(H.__webglObjects,!0,"transparentDepth",me,_n,_i,!0),this.renderObjects(H.__webglObjects,!1,"transparent",me,_n,_i,!0),ll&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(H.__webglObjects,!1,"volumetric",me,_n,_i,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(H,me,!0),this._bitmap){const oa=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(oa),oa.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let H=this._viewportWidth,me=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,H,me),this._gl.viewport(0,0,H,me),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,H,me,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,H,me,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,H,me,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,H,me,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let H=this._viewportWidth,me=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,H,me),this._gl.viewport(0,0,H,me),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var $e=this._antialias?P.ShaderLib.screenaa:P.ShaderLib.screen;this._screenshader=this.buildProgram($e.fragmentShader,$e.vertexShader,$e.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition");var De=[1,1,-1,1,-1,-1,-1,-1,1,-1,1,1];this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(De),this._gl.STATIC_DRAW);let le=P.ShaderLib.ssao;this._AOshader=this.buildProgram(le.fragmentShader,le.vertexShader,le.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let Ce=P.ShaderLib.blur;this._blurshader=this.buildProgram(Ce.fragmentShader,Ce.vertexShader,Ce.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(H){if(H.__webglObjects||(H.__webglObjects=[],H.__webglObjectsImmediate=[],H.__webglSprites=[],H.__webglFlares=[]),H.__objectsAdded.length){for(;H.__objectsAdded.length;)this.addObject(H.__objectsAdded[0],H),H.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;H.__objectsRemoved.length;)this.removeObject(H.__objectsRemoved[0],H),H.__objectsRemoved.splice(0,1);for(var me=0,$e=H.__webglObjects.length;me<$e;me++)this.updateObject(H.__webglObjects[me].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(H,me){(H==null||me==null)&&(H=this._canvas.width,me=this._canvas.height);var $e=H/me;if(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var De=H/this.cols,le=me/this.rows;$e=De/le}return $e}setTexture(H,me,$e){if(H.needsUpdate){H.__webglInit||(H.__webglInit=!0,H.addEventListener("dispose",this.onTextureDispose.bind(this)),H.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+me);var De=$e?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(De,H.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,H.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,H.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,H.unpackAlignment);var le=this.paramToGL(H.format),Ce=this.paramToGL(H.type);if($e)this.setTextureParameters(this._gl.TEXTURE_3D,H),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,H.image.size.z,H.image.size.y,H.image.size.x,0,this._gl.RED,this._gl.FLOAT,H.image.data);else{var Me=H.image,_n=Me.width,_i=Me.height;typeof _n>"u"&&(_n=Me.length,le==this._gl.RGBA&&(_n/=4),_i=1),this.setTextureParameters(this._gl.TEXTURE_2D,H),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,le,le,Ce,H.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,le,_n,_i,0,le,Ce,H.image)}H.needsUpdate=!1,H.onUpdate&&H.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+me),$e?this._gl.bindTexture(this._gl.TEXTURE_3D,H.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,H.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(H){this._enabledAttributes[H]||(this._gl.enableVertexAttribArray(H),this._enabledAttributes[H]=!0)}disableAttributes(){for(let H in this._enabledAttributes)this._enabledAttributes[H]&&(this._gl.disableVertexAttribArray(H),this._enabledAttributes[H]=!1)}setPolygonOffset(H,me,$e){this._oldPolygonOffset!==H&&(H?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(H){H!==this._oldLineWidth&&(this._gl.lineWidth(H),this._oldLineWidth=H)}deallocateGeometry(H){if(H.__webglInit=void 0,H.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(H.__webglVertexBuffer),H.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(H.__webglColorBuffer),H.geometryGroups!==void 0)for(var me=0,$e=H.groups;me<$e;me++){var De=H.geometryGroups[me];De.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(De.__webglVertexBuffer),De.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(De.__webglColorBuffer),De.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(De.__webglNormalBuffer),De.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(De.__webglFaceBuffer),De.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(De.__webglLineBuffer)}}deallocateMaterial(H){var me=H.program;if(me!==void 0){H.program=void 0;var $e,De,le,Ce=!1;for($e=0,De=this._programs.length;$e<De;$e++)if(le=this._programs[$e],le.program===me){le.usedTimes--,le.usedTimes===0&&(Ce=!0);break}if(Ce===!0){var Me=[];for($e=0,De=this._programs.length;$e<De;$e++)le=this._programs[$e],le.program!==me&&Me.push(le);this._programs=Me,this._gl.deleteProgram(me),this.info.memory.programs--}}}deallocateTexture(H){if(H.image&&H.image.__webglTextureCube)this._gl.deleteTexture(H.image.__webglTextureCube);else{if(!H.__webglInit)return;H.__webglInit=!1,this._gl.deleteTexture(H.__webglTexture)}}onGeometryDispose(H){var me=H.target;me.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(me),this.info.memory.geometries--}onTextureDispose(H){var me=H.target;me.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(me),this.info.memory.textures--}onMaterialDispose(H){var me=H.target;me.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(me)}getShader(H,me){var $e;return!this.isWebGL1()&&!me.startsWith("#version")&&(me=me.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),H=="fragment"?me=me.replace(/varying/g,"in"):me=me.replace(/varying/g,"out"),me=me.replace(/attribute/g,"in"),me=me.replace(/texture2D/g,"texture"),me=me.replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;"),me=me.replace(/gl_FragColor/g,"glFragColor"),me=`#version 300 es
`+me),H==="fragment"?$e=this._gl.createShader(this._gl.FRAGMENT_SHADER):H==="vertex"&&($e=this._gl.createShader(this._gl.VERTEX_SHADER)),$e==null?null:(this._gl.shaderSource($e,me),this._gl.compileShader($e),this._gl.getShaderParameter($e,this._gl.COMPILE_STATUS)?$e:(console.error(this._gl.getShaderInfoLog($e)),console.error("could not initialize shader"),null))}buildProgram(H,me,$e,De){var le,Ce,Me,_n,_i=[];_i.push(H),_i.push(me);for(le in De)_i.push(le),_i.push(De[le]);for(_n=_i.join(),le=0,Ce=this._programs.length;le<Ce;le++){var ll=this._programs[le];if(ll.code===_n)return ll.usedTimes++,ll.program}if(this.isWebGL1()&&De.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if(Me=this._gl.createProgram(),Me==null)return null;var _l=this._precision,oa="precision "+_l+" float;",Ru=[De.volumetric?"#version 300 es":"",oa].join(`
`),ga=[De.volumetric?"#version 300 es":"",De.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",De.shaded?"#define SHADED 1":"",De.wireframe?"#define WIREFRAME 1":"",oa].join(`
`),_s=this.getShader("fragment",ga+H),Sa=this.getShader("vertex",Ru+me);Sa!=null&&this._gl.attachShader(Me,Sa),_s!=null&&this._gl.attachShader(Me,_s),this._gl.linkProgram(Me),this._gl.getProgramParameter(Me,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),Me.uniforms={},Me.attributes={};var Ra,Da,Fa;Ra=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"];for(Da in $e)Ra.push(Da);for(Fa=0;Fa<Ra.length;Fa++){var Na=Ra[Fa];Me.uniforms[Na]=this._gl.getUniformLocation(Me,Na)}for(Ra=["position","normal","color","lineDistance","offset","radius"],Fa=0;Fa<Ra.length;Fa++){var _a=Ra[Fa];Me.attributes[_a]=this._gl.getAttribLocation(Me,_a)}return Me.id=this._programs_counter++,this._programs.push({program:Me,code:_n,usedTimes:1}),this.info.memory.programs=this._programs.length,Me}setProgram(H,me,$e,De,le,Ce){if(De.needsUpdate&&(De.program&&this.deallocateMaterial(De),this.initMaterial(De,me,$e,le),De.needsUpdate=!1),De.program==null)return null;var Me=!1,_n=De.program,_i=_n.uniforms,ll=De.uniforms;if(_n!=this._currentProgram&&(this._gl.useProgram(_n),this._currentProgram=_n,Me=!0),De.id!=this._currentMaterialId&&(this._currentMaterialId=De.id,Me=!0),H!=this._currentCamera&&(this._currentCamera=H,Me=!0),_i.projectionMatrix&&this._gl.uniformMatrix4fv(_i.projectionMatrix,!1,H.projectionMatrix.elements),_i.modelViewMatrix&&this._gl.uniformMatrix4fv(_i.modelViewMatrix,!1,le._modelViewMatrix.elements),_i.normalMatrix&&this._gl.uniformMatrix3fv(_i.normalMatrix,!1,le._normalMatrix.elements),_i.projinv&&(this._projInverse.getInverse(H.projectionMatrix),this._gl.uniformMatrix4fv(_i.projinv,!1,this._projInverse.elements)),_i.viewMatrix&&this._gl.uniformMatrix4fv(_i.viewMatrix,!1,H.matrixWorldInverse.elements),_i.vWidth&&this._gl.uniform1f(_i.vWidth,this._viewportWidth),_i.vHeight&&this._gl.uniform1f(_i.vHeight,this._viewportHeight),Me){if(ll.fogColor.value=$e.color,ll.fogNear.value=$e.near,ll.fogFar.value=$e.far,De.shaderID.startsWith("lambert")||De.shaderID==="instanced"||De.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(_n,me),this._lightsNeedUpdate=!1),ll.directionalLightColor.value=this._lights.directional.colors,ll.directionalLightDirection.value=this._lights.directional.positions;else if(De.shaderID.endsWith("outline"))ll.outlineColor.value=De.outlineColor,ll.outlineWidth.value=De.outlineWidth,ll.outlinePushback.value=De.outlinePushback,ll.outlineMaxPixels.value=De.outlineMaxPixels*this.devicePixelRatio;else if(De.shaderID==="volumetric"){le._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(le._modelViewMatrix),this._projInverse.getInverse(H.projectionMatrix),this._textureMatrix.multiplyMatrices(le.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(_i.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(_i.projinv,!1,this._projInverse.elements);let _l=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);ll.step.value=le.material.unit*_l,ll.maxdepth.value=le.material.maxdepth*_l,ll.transfermax.value=le.material.transfermax,ll.transfermin.value=le.material.transfermin,ll.subsamples.value=le.material.subsamples,Ce.setTexture(le.material.transferfn,4,!1),Ce.setTexture(le.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}ll.opacity.value=De.opacity,this.loadMaterialUniforms(_i,ll)}return ll.shading&&(ll.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),_n}loadMaterialUniforms(H,me){var $e,De,le,Ce;for($e in me)H[$e]&&(De=me[$e].type,le=me[$e].value,Ce=H[$e],De==="f"?this._gl.uniform1f(Ce,le):De==="i"?this._gl.uniform1i(Ce,le):De==="fv"?this._gl.uniform3fv(Ce,le):De==="c"?this._gl.uniform3f(Ce,le.r,le.g,le.b):De==="f4"&&this._gl.uniform4f(Ce,le[0],le[1],le[2],le[3]))}addObject(H,me){var $e,De,le,Ce;if(!H.__webglInit&&(H.__webglInit=!0,H._modelViewMatrix=new _.Matrix4,H._normalMatrix=new _.Matrix3,H.geometry!==void 0&&H.geometry.__webglInit===void 0&&(H.geometry.__webglInit=!0,H.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),H instanceof k.Mesh||H instanceof k.Line))for(le=H.geometry,$e=0,De=le.geometryGroups.length;$e<De;$e++)Ce=le.geometryGroups[$e],Ce.id=this._geometryGroupCounter++,Ce.__webglVertexBuffer||(H instanceof k.Mesh?(this.createMeshBuffers(Ce),le.elementsNeedUpdate=!0,le.normalsNeedUpdate=!0):H instanceof k.Line&&this.createLineBuffers(Ce),le.verticesNeedUpdate=!0,le.colorsNeedUpdate=!0);if(!H.__webglActive){if(H instanceof k.Mesh||H instanceof k.Line)for(le=H.geometry,$e=0,De=le.geometryGroups.length;$e<De;$e++)Ce=le.geometryGroups[$e],this.addBuffer(me.__webglObjects,Ce,H);else H instanceof k.Sprite&&me.__webglSprites.push(H);H.__webglActive=!0}}updateObject(H){var me=H.geometry,$e;if(H instanceof k.Mesh||H instanceof k.Line){for(var De=0,le=me.geometryGroups.length;De<le;De++)$e=me.geometryGroups[De],(me.verticesNeedUpdate||me.elementsNeedUpdate||me.colorsNeedUpdate||me.normalsNeedUpdate)&&this.setBuffers($e,this._gl.STATIC_DRAW);me.verticesNeedUpdate=!1,me.elementsNeedUpdate=!1,me.normalsNeedUpdate=!1,me.colorsNeedUpdate=!1,me.buffersNeedUpdate=!1}}removeObject(H,me){H instanceof k.Mesh||H instanceof k.Line?this.removeInstances(me.__webglObjects,H):H instanceof k.Sprite&&this.removeInstancesDirect(me.__webglSprites,H),H.__webglActive=!1}removeInstances(H,me){for(var $e=H.length-1;$e>=0;--$e)H[$e].object===me&&H.splice($e,1)}removeInstancesDirect(H,me){for(var $e=H.length-1;$e>=0;--$e)H[$e]===me&&H.splice($e,1)}unrollBufferMaterial(H){var me=H.object,$e=me.material;if($e.volumetric)H.opaque=null,H.transparent=null,H.volumetric=$e;else if($e.transparent){if(H.opaque=null,H.volumetric=null,H.transparent=$e,!$e.wireframe){let De=$e.clone();De.opacity=0,H.transparentDepth=De}}else{if(H.opaque=$e,H.transparent=null,H.volumetric=null,!$e.wireframe){let De=$e.clone();De.opacity=0,H.opaqueDepth=De}$e.hasAO&&(H.hasAO=!0),(this._AOEnabled||H.hasAO)&&(H.opaqueShaded=$e.clone(),H.opaqueShaded.shaded=!0)}}setBuffers(H,me){var $e=H.vertexArray,De=H.colorArray;if(H.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,H.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,$e,me)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,H.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,$e,me)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,H.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,De,me),H.normalArray&&H.__webglNormalBuffer!==void 0){var le=H.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,H.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,le,me)}if(H.radiusArray&&H.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,H.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,H.radiusArray,me)),H.faceArray&&H.__webglFaceBuffer!==void 0){var Ce=H.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,H.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,Ce,me)}if(H.lineArray&&H.__webglLineBuffer!==void 0){var Me=H.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,H.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,Me,me)}}createMeshBuffers(H){H.radiusArray&&(H.__webglRadiusBuffer=this._gl.createBuffer()),H.useOffset&&(H.__webglOffsetBuffer=this._gl.createBuffer()),H.__webglVertexBuffer=this._gl.createBuffer(),H.__webglNormalBuffer=this._gl.createBuffer(),H.__webglColorBuffer=this._gl.createBuffer(),H.__webglFaceBuffer=this._gl.createBuffer(),H.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(H){H.__webglVertexBuffer=this._gl.createBuffer(),H.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(H,me,$e){H.push({buffer:me,object:$e,opaque:null,transparent:null})}setupMatrices(H,me){H._modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,H.matrixWorld),H._normalMatrix.getInverse(H._modelViewMatrix),H._normalMatrix.transpose()}filterFallback(H){return this._gl.LINEAR}setTextureParameters(H,me){H==this._gl.TEXTURE_2D?(this._gl.texParameteri(H,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(H,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(H,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(me.magFilter)),this._gl.texParameteri(H,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(me.minFilter))):(this._gl.texParameteri(H,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(H,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(H,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(H,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(H,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(H,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(H,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(H){return H===f.UnsignedByteType?this._gl.UNSIGNED_BYTE:H===f.RGBAFormat?this._gl.RGBA:H===f.NearestFilter?this._gl.NEAREST:0}setupLights(H,me){var $e,De,le,Ce=0,Me=0,_n=0,_i,ll,_l=this._lights,oa=_l.directional.colors,Ru=_l.directional.positions,ga=0,_s=0;for($e=0,De=me.length;$e<De;$e++)if(le=me[$e],_i=le.color,ll=le.intensity,le instanceof d.Light){if(this._direction.getPositionFromMatrix(le.matrixWorld),this._vector3.getPositionFromMatrix(le.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;Ru[_s]=this._direction.x,Ru[_s+1]=this._direction.y,Ru[_s+2]=this._direction.z,oa[_s]=_i.r*ll,oa[_s+1]=_i.g*ll,oa[_s+2]=_i.b*ll,_s+=3,ga++}_l.ambient[0]=Ce,_l.ambient[1]=Me,_l.ambient[2]=_n,_l.directional.length=ga}initGL(){try{if(OffscreenCanvas&&!(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null))(Z==null||Z.isContextLost())&&(G=new OffscreenCanvas(this._canvas.width,this._canvas.height),Z=G.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=G,this._gl=Z,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});else if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context.";var H=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(H[6])}catch(me){console.error(me)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(H,me,$e,De,le,Ce,Me){var _n,_i,ll,_l,oa,Ru,ga;me?(oa=H.length-1,Ru=-1,ga=-1):(oa=0,Ru=H.length,ga=1);for(var _s=oa;_s!==Ru;_s+=ga)if(_n=H[_s],_n.render){if(_i=_n.object,ll=_n.buffer,_l=_n[$e],(_n.hasAO||this._AOEnabled)&&_n[$e+"Shaded"]&&(_l=_n[$e+"Shaded"]),!_l)continue;this.setBlending(Me),this.setDepthTest(_l.depthTest),this.setDepthWrite(_l.depthWrite),this.setPolygonOffset(_l.polygonOffset,_l.polygonOffsetFactor,_l.polygonOffsetUnits);var Sa=_i._modelViewMatrix.isReflected();if(this.setMaterialFaces(_l,Sa),this.renderBuffer(De,le,Ce,_l,ll,_i),(this._outlineEnabled||_l.outline)&&!_l.wireframe&&_l.shaderID!=="basic"&&_l.opacity!==0){let Ra=this._outlineMaterial;_l.shaderID=="sphereimposter"?Ra=this._outlineSphereImposterMaterial:_l.shaderID=="stickimposter"&&(Ra=this._outlineStickImposterMaterial),this.renderBuffer(De,le,Ce,Ra,ll,_i)}}}renderSprites(H,me,$e){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(H,me,this._currentWidth,this._currentHeight,$e),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},"./src/WebGL/SpritePlugin.ts":(n,t,i)=>{i.r(t),i.d(t,{SpritePlugin:()=>o});var s=i("./src/WebGL/shaders/index.ts");class o{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(p){this.gl=p.context,this.renderer=p,this.precision=p.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var v=0;this.sprite.vertices[v++]=-1,this.sprite.vertices[v++]=-1,this.sprite.vertices[v++]=0,this.sprite.vertices[v++]=0,this.sprite.vertices[v++]=1,this.sprite.vertices[v++]=-1,this.sprite.vertices[v++]=1,this.sprite.vertices[v++]=0,this.sprite.vertices[v++]=1,this.sprite.vertices[v++]=1,this.sprite.vertices[v++]=1,this.sprite.vertices[v++]=1,this.sprite.vertices[v++]=-1,this.sprite.vertices[v++]=1,this.sprite.vertices[v++]=0,this.sprite.vertices[v++]=1,v=0,this.sprite.faces[v++]=0,this.sprite.faces[v++]=1,this.sprite.faces[v++]=2,this.sprite.faces[v++]=0,this.sprite.faces[v++]=2,this.sprite.faces[v++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(s.ShaderLib.sprite,this.precision||1),this.sprite.attributes={};const _={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),_.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),_.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),_.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),_.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),_.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),_.color=this.gl.getUniformLocation(this.sprite.program,"color"),_.map=this.gl.getUniformLocation(this.sprite.program,"map"),_.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),_.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),_.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),_.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),_.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),_.fogType=this.gl.getUniformLocation(this.sprite.program,"fogType"),_.fogDensity=this.gl.getUniformLocation(this.sprite.program,"fogDensity"),_.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),_.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),_.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),_.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=_}render(p,v,_,k,P){var L,G,Z,W,j,H,me,$e,De,le;if(!this.gl)throw new Error("WebGLRenderer not initialized");let Ce=[];(L=p==null?void 0:p.__webglSprites)===null||L===void 0||L.forEach(qc=>{(P&&qc.material.depthTest==!1||!P&&qc.material.depthTest)&&Ce.push(qc)});let Me=Ce.length;if(!Me)return;const _n=this.sprite.attributes,_i=this.sprite.uniforms;if(!_i)throw new Error("Uniforms not defined");var ll=_*.5,_l=k*.5;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(_n.position),this.gl.enableVertexAttribArray(_n.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(_n.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(_n.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(_i.projectionMatrix,!1,v.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(_i.map,0);var oa=0,Ru=0,ga=p.fog;ga?(this.gl.uniform3f(_i.fogColor,ga.color.r,ga.color.g,ga.color.b),this.gl.uniform1f(_i.fogNear,ga.near),this.gl.uniform1f(_i.fogFar,ga.far),this.gl.uniform1i(_i.fogType,1),oa=1,Ru=1):(this.gl.uniform1i(_i.fogType,0),oa=0,Ru=0);var _s;let Sa,Ra,Da,Fa,Na=[];for(_s=0;_s<Me;_s++)Sa=Ce[_s],Ra=Sa.material,Ra&&(Ra.depthTest==!1&&!P||!Sa.visible||Ra.opacity===0||(Ra.useScreenCoordinates?Sa.z=-Sa.position.z:(Sa._modelViewMatrix.multiplyMatrices(v.matrixWorldInverse,Sa.matrixWorld),Sa.z=-Sa._modelViewMatrix.elements[14])));for(Ce.sort(f),_s=0;_s<Me;_s++)if(Sa=Ce[_s],Ra=Sa.material,!!Ra&&!(!Sa.visible||Ra.opacity===0)&&Ra.map&&Ra.map.image&&Ra.map.image.width){this.gl.uniform1f((_i==null?void 0:_i.alphaTest)||null,Ra.alphaTest);var _a=Ra.map.image.width,Pa=Ra.map.image.height;Na[0]=_a*this.renderer.devicePixelRatio/_,Na[1]=Pa*this.renderer.devicePixelRatio/k,Ra.useScreenCoordinates===!0?(this.gl.uniform1i(_i.useScreenCoordinates,1),this.gl.uniform3f(_i.screenPosition,(Sa.position.x*this.renderer.devicePixelRatio-ll)/ll,(_l-Sa.position.y*this.renderer.devicePixelRatio)/_l,Math.max(0,Math.min(1,Sa.position.z)))):(this.gl.uniform1i(_i.useScreenCoordinates,0),this.gl.uniformMatrix4fv(_i.modelViewMatrix,!1,Sa._modelViewMatrix.elements)),p.fog&&Ra.fog?Fa=Ru:Fa=0,oa!==Fa&&(this.gl.uniform1i(_i.fogType,Fa),oa=Fa),Da=1/(Ra.scaleByViewport?k:1),Na[0]*=Da*Sa.scale.x,Na[1]*=Da*Sa.scale.y;let qc=(G=Ra==null?void 0:Ra.alignment)===null||G===void 0?void 0:G.x,uf=(Z=Ra==null?void 0:Ra.alignment)===null||Z===void 0?void 0:Z.y;Ra.screenOffset&&(qc=(qc||0)+2*Ra.screenOffset.x/_a,uf=(uf||0)+2*Ra.screenOffset.y/Pa),this.gl.uniform2f(_i.uvScale,((W=Ra==null?void 0:Ra.uvScale)===null||W===void 0?void 0:W.x)||1,((j=Ra==null?void 0:Ra.uvScale)===null||j===void 0?void 0:j.y)||1),this.gl.uniform2f(_i.uvOffset,((H=Ra==null?void 0:Ra.uvOffset)===null||H===void 0?void 0:H.x)||0,((me=Ra==null?void 0:Ra.uvOffset)===null||me===void 0?void 0:me.y)||0),this.gl.uniform2f(_i.alignment,qc||0,uf||0),this.gl.uniform1f(_i.opacity,Ra.opacity),this.gl.uniform3f(_i.color,(($e=Ra==null?void 0:Ra.color)===null||$e===void 0?void 0:$e.r)||0,((De=Ra==null?void 0:Ra.color)===null||De===void 0?void 0:De.g)||0,((le=Ra==null?void 0:Ra.color)===null||le===void 0?void 0:le.b)||0),this.gl.uniform1f(_i.rotation,Sa.rotation),this.gl.uniform2fv(_i.scale,Na),this.renderer.setDepthTest(Ra.depthTest),this.renderer.setDepthWrite(Ra.depthWrite),this.renderer.setTexture(Ra.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(p,v){if(!this.gl)throw new Error("WebGL Rendering context not found");var _=this.gl.createProgram();if(!_)throw new Error("Error creating webgl program");var k=this.gl.createShader(this.gl.FRAGMENT_SHADER),P=this.gl.createShader(this.gl.VERTEX_SHADER);if(!k)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!P)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var L="precision "+v+` float;
`;if(this.gl.shaderSource(k,L+p.fragmentShader),this.gl.shaderSource(P,L+p.vertexShader),this.gl.compileShader(k),this.gl.compileShader(P),!this.gl.getShaderParameter(k,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(P,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(k)} 
      ${this.gl.getShaderInfoLog(P)}`);return this.gl.attachShader(_,k),this.gl.attachShader(_,P),this.gl.linkProgram(_),this.gl.getProgramParameter(_,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),_}}function f(d,p){return d.z!==p.z?p.z-d.z:p.id-d.id}},"./src/WebGL/constants/Coloring.ts":(n,t,i)=>{i.r(t),i.d(t,{Coloring:()=>s});var s;(function(o){o[o.NoColors=0]="NoColors",o[o.FaceColors=1]="FaceColors",o[o.VertexColors=2]="VertexColors"})(s||(s={}))},"./src/WebGL/constants/Shading.ts":(n,t,i)=>{i.r(t),i.d(t,{Shading:()=>s});var s;(function(o){o[o.NoShading=0]="NoShading",o[o.FlatShading=1]="FlatShading",o[o.SmoothShading=2]="SmoothShading"})(s||(s={}))},"./src/WebGL/constants/Sides.ts":(n,t,i)=>{i.r(t),i.d(t,{BackSide:()=>o,DoubleSide:()=>f,FrontSide:()=>s});const s=0,o=1,f=2},"./src/WebGL/constants/SpriteAlignment.ts":(n,t,i)=>{i.r(t),i.d(t,{SpriteAlignment:()=>o});var s=i("./src/WebGL/math/index.ts");const o={topLeft:new s.Vector2(1,-1),topCenter:new s.Vector2(0,-1),topRight:new s.Vector2(-1,-1),centerLeft:new s.Vector2(1,0),center:new s.Vector2(0,0),centerRight:new s.Vector2(-1,0),bottomLeft:new s.Vector2(1,1),bottomCenter:new s.Vector2(0,1),bottomRight:new s.Vector2(-1,1)}},"./src/WebGL/constants/TextureConstants.ts":(n,t,i)=>{i.r(t),i.d(t,{ClampToEdgeWrapping:()=>s,FloatType:()=>v,LinearFilter:()=>o,LinearMipMapLinearFilter:()=>d,NearestFilter:()=>f,R32Format:()=>P,RFormat:()=>k,RGBAFormat:()=>_,UnsignedByteType:()=>p});const s=1001,o=1006,f=1007,d=1008,p=1009,v=1010,_=1021,k=1022,P=1023},"./src/WebGL/constants/TextureOperations.ts":(n,t,i)=>{i.r(t),i.d(t,{TextureOperations:()=>s});var s;(function(o){o[o.MultiplyOperation=0]="MultiplyOperation",o[o.MixOperation=1]="MixOperation",o[o.AddOperation=2]="AddOperation"})(s||(s={}))},"./src/WebGL/constants/index.ts":(n,t,i)=>{i.r(t),i.d(t,{BackSide:()=>o.BackSide,ClampToEdgeWrapping:()=>p.ClampToEdgeWrapping,Coloring:()=>s.Coloring,DoubleSide:()=>o.DoubleSide,FloatType:()=>p.FloatType,FrontSide:()=>o.FrontSide,LinearFilter:()=>p.LinearFilter,LinearMipMapLinearFilter:()=>p.LinearMipMapLinearFilter,NearestFilter:()=>p.NearestFilter,R32Format:()=>p.R32Format,RFormat:()=>p.RFormat,RGBAFormat:()=>p.RGBAFormat,Shading:()=>f.Shading,SpriteAlignment:()=>d.SpriteAlignment,TextureOperations:()=>v.TextureOperations,UnsignedByteType:()=>p.UnsignedByteType});var s=i("./src/WebGL/constants/Coloring.ts"),o=i("./src/WebGL/constants/Sides.ts"),f=i("./src/WebGL/constants/Shading.ts"),d=i("./src/WebGL/constants/SpriteAlignment.ts"),p=i("./src/WebGL/constants/TextureConstants.ts"),v=i("./src/WebGL/constants/TextureOperations.ts")},"./src/WebGL/core/EventDispatcher.ts":(n,t,i)=>{i.r(t),i.d(t,{EventDispatcher:()=>s});class s{constructor(){this.listeners={}}dispatchEvent(f){var d=this.listeners[f.type];if(d!==void 0){f.target=this;for(var p=0,v=d.length;p<v;p++)d[p].call(this,f)}}removeEventListener(f,d){if(!d)this.listeners[f]=[];else{var p=this.listeners[f].indexOf(d);p!==-1&&this.listeners[f].splice(p,1)}}addEventListener(f,d){this.listeners[f]===void 0&&(this.listeners[f]=[]),this.listeners[f].indexOf(d)===-1&&this.listeners[f].push(d)}}},"./src/WebGL/core/Geometry.ts":(n,t,i)=>{i.r(t),i.d(t,{Geometry:()=>_,GeometryGroup:()=>v,GeometryIDCount:()=>k});var s=i("./src/WebGL/materials/LineBasicMaterial.ts"),o=i("./src/WebGL/core/EventDispatcher.ts"),f=i("./src/WebGL/math/index.ts"),d=i("./src/colors.ts");const p=65535;class v{constructor(L=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=L}setColor(L){var G=this.vertexArray,Z=this.colorArray;if(!G)throw new Error("vertex array not initialized");if(!Z)throw new Error("color array not initialized");let W=d.CC.color(L);for(var j=0;j<G.length;j+=3)Z[j]=W.r,Z[j+1]=W.g,Z[j+2]=W.b}setColors(L){var G=this.vertexArray,Z=this.colorArray;if(!G)throw new Error("vertex array not initialized");if(!Z)throw new Error("color array not initialized");if(G.length!=Z.length){console.log("Cannot re-color geometry group due to mismatched lengths.");return}for(var W=0;W<G.length;W+=3){var j=L(G[W],G[W+1],G[W+2]);j instanceof d.Color||(j=d.CC.color(j)),Z[W]=j.r,Z[W+1]=j.g,Z[W+2]=j.b}}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var L=new f.Vector3,G,Z,W,j,H=0;H<this.vertices;++H)G=H*3,Z=this.vertexArray[G],W=this.vertexArray[G+1],j=this.vertexArray[G+2],L.x+=Z,L.y+=W,L.z+=j;return L.divideScalar(this.vertices),L}setNormals(){var L=this.faceArray,G=this.vertexArray,Z=this.normalArray;if(!(!this.vertices||!this.faceidx)){if(!L)throw new Error("face array not initialized");if(!G)throw new Error("vertex array not initialized");if(!Z)throw new Error("normal array not initialized");for(var W,j,H,me,$e,De,le,Ce=0;Ce<L.length/3;++Ce)W=L[Ce*3]*3,j=L[Ce*3+1]*3,H=L[Ce*3+2]*3,me=new f.Vector3(G[W],G[W+1],G[W+2]),$e=new f.Vector3(G[j],G[j+1],G[j+2]),De=new f.Vector3(G[H],G[H+1],G[H+2]),me.subVectors(me,$e),De.subVectors(De,$e),De.cross(me),le=De,le.normalize(),Z[W]+=le.x,Z[j]+=le.x,Z[H]+=le.x,Z[W+1]+=le.y,Z[j+1]+=le.y,Z[H+1]+=le.y,Z[W+2]+=le.z,Z[j+2]+=le.z,Z[H+2]+=le.z}}setLineIndices(){if(this.faceidx&&!(this.lineArray&&this.lineArray.length==this.faceidx*2&&this.lineidx==this.faceidx*2)){var L=this.faceArray,G=this.lineArray=new Uint16Array(this.faceidx*2);if(this.lineidx=this.faceidx*2,!L)throw new Error("face array not initialized");for(var Z=0;Z<this.faceidx/3;++Z){var W=Z*3,j=W*2,H=L[W],me=L[W+1],$e=L[W+2];G[j]=H,G[j+1]=me,G[j+2]=H,G[j+3]=$e,G[j+4]=me,G[j+5]=$e}}}vrml(L,G){var Z,W,j,H,me,$e,De,le,Ce,Me,_n,_i,ll,_l,oa,Ru,ga,_s,Sa="";if(Sa+=L+`Shape {
`+L+` appearance Appearance {
`+L+`  material Material {
`+L+"   diffuseColor "+((Z=G==null?void 0:G.color)===null||Z===void 0?void 0:Z.r)+" "+((W=G==null?void 0:G.color)===null||W===void 0?void 0:W.g)+" "+((j=G==null?void 0:G.color)===null||j===void 0?void 0:j.b)+`
`,G.wireframe&&this.colorArray){let Da=this.colorArray;Sa+=L+"    emissiveColor "+Da[0]+" "+Da[1]+" "+Da[2]+`
`}G!=null&&G.transparent&&(Sa+=L+"   transparency "+(1-G.opacity)+`
`),Sa+=L+`  }
`,Sa+=L+` }
`;var Ra=L;if(L+=" ",G instanceof s.LineBasicMaterial||G.wireframe){Sa+=L+`geometry IndexedLineSet {
`+L+` colorPerVertex TRUE
`+L+` coord Coordinate {
`+L+`  point [
`;let Da,Fa,Na;for(let _a=0;_a<this.vertices;++_a){let Pa=_a*3;Da=(H=this.vertexArray)===null||H===void 0?void 0:H[Pa],Fa=(me=this.vertexArray)===null||me===void 0?void 0:me[Pa+1],Na=($e=this.vertexArray)===null||$e===void 0?void 0:$e[Pa+2],Sa+=L+"   "+Da+" "+Fa+" "+Na+`,
`}if(Sa+=L+`  ]
`,Sa+=L+` }
`,this.colorArray&&!G.wireframe){Sa+=L+` color Color {
`+L+`  color [
`;for(let _a=0;_a<this.vertices;++_a){let Pa=_a*3;Da=this.colorArray[Pa],Fa=this.colorArray[Pa+1],Na=this.colorArray[Pa+2],Sa+=L+"   "+Da+" "+Fa+" "+Na+`,
`}Sa+=L+`  ]
`,Sa+=L+` }
`}if(Sa+=L+` coordIndex [
`,G.wireframe&&this.faceArray)for(let _a=0;_a<this.faceidx;_a+=3)Da=(De=this.faceArray)===null||De===void 0?void 0:De[_a],Fa=(le=this.faceArray)===null||le===void 0?void 0:le[_a+1],Na=(Ce=this.faceArray)===null||Ce===void 0?void 0:Ce[_a+2],Sa+=L+"  "+Da+", "+Fa+", "+Na+`, -1,
`;else for(let _a=0;_a<this.vertices-1;_a+=2)Sa+=L+"  "+_a+", "+(_a+1)+`, -1,
`;Sa+=L+` ]
`,Sa+=L+`}
`}else{Sa+=L+`geometry IndexedFaceSet {
`+L+` colorPerVertex TRUE
`+L+` normalPerVertex TRUE
`+L+` solid FALSE
`,Sa+=L+` coord Coordinate {
`+L+`  point [
`;let Da,Fa,Na;for(let _a=0;_a<this.vertices;++_a){let Pa=_a*3;Da=(Me=this.vertexArray)===null||Me===void 0?void 0:Me[Pa],Fa=(_n=this.vertexArray)===null||_n===void 0?void 0:_n[Pa+1],Na=(_i=this.vertexArray)===null||_i===void 0?void 0:_i[Pa+2],Sa+=L+"   "+Da+" "+Fa+" "+Na+`,
`}Sa+=L+`  ]
`,Sa+=L+` }
`,Sa+=L+` normal Normal {
`+L+`  vector [
`;for(let _a=0;_a<this.vertices;++_a){let Pa=_a*3;Da=(ll=this.normalArray)===null||ll===void 0?void 0:ll[Pa],Fa=(_l=this.normalArray)===null||_l===void 0?void 0:_l[Pa+1],Na=(oa=this.normalArray)===null||oa===void 0?void 0:oa[Pa+2],Sa+=L+"   "+Da+" "+Fa+" "+Na+`,
`}if(Sa+=L+`  ]
`,Sa+=L+` }
`,this.colorArray){Sa+=L+` color Color {
`+L+`  color [
`;for(let _a=0;_a<this.vertices;++_a){let Pa=_a*3;Da=this.colorArray[Pa],Fa=this.colorArray[Pa+1],Na=this.colorArray[Pa+2],Sa+=L+"   "+Da+" "+Fa+" "+Na+`,
`}Sa+=L+`  ]
`,Sa+=L+` }
`}Sa+=L+` coordIndex [
`;for(let _a=0;_a<this.faceidx;_a+=3)Da=(Ru=this.faceArray)===null||Ru===void 0?void 0:Ru[_a],Fa=(ga=this.faceArray)===null||ga===void 0?void 0:ga[_a+1],Na=(_s=this.faceArray)===null||_s===void 0?void 0:_s[_a+2],Sa+=L+"  "+Da+", "+Fa+", "+Na+`, -1,
`;Sa+=L+` ]
`,Sa+=L+`}
`}return Sa+=Ra+"}",Sa}truncateArrayBuffers(L=!0,G=!1){var Z=this.vertexArray,W=this.colorArray,j=this.normalArray,H=this.faceArray,me=this.lineArray,$e=this.radiusArray;this.vertexArray=(Z==null?void 0:Z.subarray(0,this.vertices*3))||null,this.colorArray=(W==null?void 0:W.subarray(0,this.vertices*3))||null,L?(this.normalArray=(j==null?void 0:j.subarray(0,this.vertices*3))||null,this.faceArray=(H==null?void 0:H.subarray(0,this.faceidx))||null,this.lineidx>0?this.lineArray=(me==null?void 0:me.subarray(0,this.lineidx))||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),$e&&(this.radiusArray=$e.subarray(0,this.vertices)),G&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class _ extends o.EventDispatcher{constructor(L=!1,G=!1,Z=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=k++,this.mesh=L,this.radii=G,this.offset=Z}updateGeoGroup(L=0){var G,Z=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!Z||Z.vertices+L>(((G=Z==null?void 0:Z.vertexArray)===null||G===void 0?void 0:G.length)||0)/3)&&(Z=this.addGeoGroup()),Z}vrml(L,G){for(var Z="",W=this.geometryGroups.length,j=0;j<W;j++){var H=this.geometryGroups[j];Z+=H.vrml(L,G)+`,
`}return Z}addGeoGroup(){var L=new v(this.geometryGroups.length);return this.geometryGroups.push(L),this.groups=this.geometryGroups.length,L.vertexArray=new Float32Array(p*3),L.colorArray=new Float32Array(p*3),this.mesh&&(L.normalArray=new Float32Array(p*3),L.faceArray=new Uint16Array(p*6),L.lineArray=new Uint16Array(p*6)),this.radii&&(L.radiusArray=new Float32Array(p)),L.useOffset=this.offset,L}setUpNormals(...L){for(var G=0;G<this.groups;G++){var Z=this.geometryGroups[G];Z.setNormals(...L)}}setColors(...L){for(var G=this.geometryGroups.length,Z=0;Z<G;Z++){var W=this.geometryGroups[Z];W.setColors(...L)}}setColor(...L){for(var G=this.geometryGroups.length,Z=0;Z<G;Z++){var W=this.geometryGroups[Z];W.setColor(...L)}}setUpWireframe(...L){for(var G=0;G<this.groups;G++){var Z=this.geometryGroups[G];Z.setLineIndices(...L)}}initTypedArrays(){for(var L=0;L<this.groups;L++){var G=this.geometryGroups[L];G.__inittedArrays!==!0&&G.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var L=0,G=0;G<this.groups;G++)L+=this.geometryGroups[G].vertices;return L}}let k=0},"./src/WebGL/core/Object3D.ts":(n,t,i)=>{i.r(t),i.d(t,{Light:()=>v,Object3D:()=>d,Object3DIDCount:()=>f,Scene:()=>p});var s=i("./src/WebGL/math/index.ts"),o=i("./src/colors.ts");let f=0;class d{constructor(){this.id=f++,this.name="",this.children=[],this.position=new s.Vector3,this.rotation=new s.Vector3,this.matrix=new s.Matrix4,this.matrixWorld=new s.Matrix4,this.quaternion=new s.Quaternion,this.eulerOrder="XYZ",this.up=new s.Vector3(0,1,0),this.scale=new s.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(k){this.matrix.lookAt(k,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof s.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(k){if(k===this){console.error("Can't add $3Dmol.Object3D to itself");return}k.parent=this,this.children.push(k);for(var P=this;P.parent!==void 0;)P=P.parent;P!==void 0&&P instanceof p&&P.__addObject(k)}remove(k){var P=this.children.indexOf(k);if(P!==-1){k.parent=void 0,this.children.splice(P,1);for(var L=this;L.parent!==void 0;)L=L.parent;L!==void 0&&L instanceof p&&L.__removeObject(k)}}vrml(k){k||(k=" ");var P=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),L=0,G=0,Z=0;if(P!=0){let H=Math.sin(P/2);L=this.quaternion.x/H,G=this.quaternion.y/H,Z=this.quaternion.z/H}var W=k+`Transform {
`+k+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+k+" rotation "+L+" "+G+" "+Z+" "+P+`
`+k+` children [
`;this.geometry&&(W+=this.geometry.vrml(k,this.material));for(var j=0;j<this.children.length;j++)W+=this.children[j].vrml(k+" ")+`,
`;return W+=` ]
`,W+="}",W}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof s.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(k){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||k===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var P=0;P<this.children.length;P++)this.children[P].updateMatrixWorld(!0)}clone(k){k===void 0&&(k=new d),k.name=this.name,k.up.copy(this.up),k.position.copy(this.position),k.rotation instanceof s.Vector3&&this.rotation instanceof s.Vector3?k.rotation.copy(this.rotation):k.rotation=this.rotation,k.eulerOrder=this.eulerOrder,k.scale.copy(this.scale),k.rotationAutoUpdate=this.rotationAutoUpdate,k.matrix.copy(this.matrix),k.matrixWorld.copy(this.matrixWorld),k.quaternion.copy(this.quaternion),k.matrixAutoUpdate=this.matrixAutoUpdate,k.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,k.useQuaternion=this.useQuaternion,k.visible=this.visible;for(var P=0;P<this.children.length;P++){var L=this.children[P];k.add(L.clone())}return k}setVisible(k){this.visible=k;for(var P=0;P<this.children.length;P++){var L=this.children[P];L.setVisible(k)}}}class p extends d{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(k){if(k instanceof v)this.__lights.indexOf(k)===-1&&this.__lights.push(k),k.target&&k.target.parent===void 0&&this.add(k.target);else if(this.__objects.indexOf(k)===-1){this.__objects.push(k),this.__objectsAdded.push(k);var P=this.__objectsRemoved.indexOf(k);P!==-1&&this.__objectsRemoved.splice(P,1)}for(var L=0;L<k.children.length;L++)this.__addObject(k.children[L])}__removeObject(k){var P;if(k instanceof v)P=this.__lights.indexOf(k),P!==-1&&this.__lights.splice(P,1);else if(P=this.__objects.indexOf(k),P!==-1){this.__objects.splice(P,1),this.__objectsRemoved.push(k);var L=this.__objectsAdded.indexOf(k);L!==-1&&this.__objectsAdded.splice(P,1)}for(var G=0;G<k.children.length;G++)this.__removeObject(k.children[G])}}class v extends d{constructor(k,P=1){super(),this.position=new s.Vector3(0,1,0),this.target=new d,this.castShadow=!1,this.onlyShadow=!1,this.color=new o.Color(k),this.intensity=P}}},"./src/WebGL/core/Projector.ts":(n,t,i)=>{i.r(t),i.d(t,{Projector:()=>f});var s=i("./src/WebGL/math/index.ts");const o=new s.Matrix4;class f{static unprojectVector(p,v){return v.projectionMatrixInverse.getInverse(v.projectionMatrix),o.multiplyMatrices(v.matrixWorld,v.projectionMatrixInverse),p.applyProjection(o)}static projectVector(p,v){return v.matrixWorldInverse.getInverse(v.matrixWorld),o.multiplyMatrices(v.projectionMatrix,v.matrixWorldInverse),p.applyProjection(o)}projectVector(p,v){return f.projectVector(p,v)}unprojectVector(p,v){return f.unprojectVector(p,v)}}},"./src/WebGL/core/Raycaster.ts":(n,t,i)=>{i.r(t),i.d(t,{Raycaster:()=>p,intersectObject:()=>H});var s=i("./src/WebGL/math/index.ts"),o=i("./src/WebGL/shapes/index.ts");const f=(me,$e)=>me.distance-$e.distance,d=new s.Matrix4;class p{constructor($e,De,le,Ce){this.precision=1e-4,this.linePrecision=.2,this.ray=new s.Ray($e,De),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=Ce||0,this.far=le||1/0}set($e,De){this.ray.set($e,De)}setFromCamera($e,De){De.ortho?(this.ray.origin.set($e.x,$e.y,(De.near+De.far)/(De.near-De.far)).unproject(De),this.ray.direction.set(0,0,-1).transformDirection(De.matrixWorld)):(this.ray.origin.setFromMatrixPosition(De.matrixWorld),this.ray.direction.set($e.x,$e.y,$e.z),De.projectionMatrixInverse.getInverse(De.projectionMatrix),d.multiplyMatrices(De.matrixWorld,De.projectionMatrixInverse),this.ray.direction.applyProjection(d),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects($e,De){for(var le=[],Ce=0,Me=De.length;Ce<Me;Ce++)H($e,De[Ce],this,le);return le.sort(f),le}}const v=me=>Math.min(Math.max(me,-1),1);var _=new o.Sphere,k=new o.Cylinder,P=new o.Triangle,L=new s.Vector3,G=new s.Vector3,Z=new s.Vector3,W=new s.Vector3,j=new s.Vector3;function H(me,$e,De,le){if(j.getPositionFromMatrix(me.matrixWorld),$e.intersectionShape===void 0)return le;var Ce=$e.intersectionShape,Me=De.linePrecision;Me*=me.matrixWorld.getMaxScaleOnAxis();var _n=Me*Me;if($e.boundingSphere!==void 0&&$e.boundingSphere instanceof o.Sphere&&(_.copy($e.boundingSphere),_.applyMatrix4(me.matrixWorld),!De.ray.isIntersectionSphere(_)))return le;var _i,ll,_l,oa,Ru,ga,_s,Sa,Ra,Da,Fa,Na,_a,Pa;for(_i=0,ll=Ce.triangle.length;_i<ll;_i++)if(Ce.triangle[_i]instanceof o.Triangle){if(P.copy(Ce.triangle[_i]),P.applyMatrix4(me.matrixWorld),_l=P.getNormal(),oa=De.ray.direction.dot(_l),oa>=0||(L.subVectors(P.a,De.ray.origin),_s=_l.dot(L)/oa,_s<0))continue;G.copy(De.ray.direction).multiplyScalar(_s).add(De.ray.origin),G.sub(P.a),Z.copy(P.b).sub(P.a),W.copy(P.c).sub(P.a);var qc=Z.dot(W),uf=Z.lengthSq(),_h=W.lengthSq();if(Na=(uf*G.dot(W)-qc*G.dot(Z))/(uf*_h-qc*qc),Na<0||Na>1||(Fa=(G.dot(Z)-Na*qc)/uf,Fa<0||Fa>1||Fa+Na>1))continue;le.push({clickable:$e,distance:_s})}for(_i=0,ll=Ce.cylinder.length;_i<ll;_i++)if(Ce.cylinder[_i]instanceof o.Cylinder){if(k.copy(Ce.cylinder[_i]),k.applyMatrix4(me.matrixWorld),L.subVectors(k.c1,De.ray.origin),Ru=L.dot(k.direction),ga=L.dot(De.ray.direction),oa=v(De.ray.direction.dot(k.direction)),Ra=1-oa*oa,Ra===0)continue;_a=(oa*ga-Ru)/Ra,Pa=(ga-oa*Ru)/Ra,G.copy(k.direction).multiplyScalar(_a).add(k.c1),Z.copy(De.ray.direction).multiplyScalar(Pa).add(De.ray.origin),Sa=W.subVectors(G,Z).lengthSq();var Uh=k.radius*k.radius;if(Sa<=Uh){if(Da=(oa*Ru-ga)*(oa*Ru-ga)-Ra*(L.lengthSq()-Ru*Ru-Uh),Da<=0?Na=_s=Math.sqrt(Sa):Na=_s=(ga-oa*Ru-Math.sqrt(Da))/Ra,Fa=oa*Na-Ru,Fa<0||Fa*Fa>k.lengthSq()||Na<0)continue;le.push({clickable:$e,distance:_s})}}for(_i=0,ll=Ce.line.length;_i<ll;_i+=2){G.copy(Ce.line[_i]),G.applyMatrix4(me.matrixWorld),Z.copy(Ce.line[_i+1]),Z.applyMatrix4(me.matrixWorld),W.subVectors(Z,G);var Kd=W.lengthSq();W.normalize(),L.subVectors(G,De.ray.origin);var ud=L.dot(W);ga=L.dot(De.ray.direction),oa=v(De.ray.direction.dot(W)),Ra=1-oa*oa,Ra!==0&&(_a=(oa*ga-ud)/Ra,Pa=(ga-oa*ud)/Ra,G.add(W.multiplyScalar(_a)),Z.copy(De.ray.direction).multiplyScalar(Pa).add(De.ray.origin),Sa=W.subVectors(Z,G).lengthSq(),Sa<_n&&_a*_a<Kd&&le.push({clickable:$e,distance:Pa}))}for(_i=0,ll=Ce.sphere.length;_i<ll;_i++)if(Ce.sphere[_i]instanceof o.Sphere&&(_.copy(Ce.sphere[_i]),_.applyMatrix4(me.matrixWorld),De.ray.isIntersectionSphere(_))){G.subVectors(_.center,De.ray.origin);var sc=G.dot(De.ray.direction);if(Da=sc*sc-(G.lengthSq()-_.radius*_.radius),sc<0)return le;Da<=0?_s=sc:_s=sc-Math.sqrt(Da),le.push({clickable:$e,distance:_s})}return le}},"./src/WebGL/core/Texture.ts":(n,t,i)=>{i.r(t),i.d(t,{Texture:()=>p,TextureIdCount:()=>v});var s=i("./src/WebGL/constants/TextureConstants.ts"),o=i("./src/WebGL/math/index.ts"),f=i("./src/WebGL/core/EventDispatcher.ts"),d=i("./src/WebGL/core/UVMapping.ts");class p extends f.EventDispatcher{constructor(k,P){super(),this.id=v++,this.name="",this.image=k,this.mapping=new d.UVMapping,this.wrapS=s.ClampToEdgeWrapping,this.wrapT=s.ClampToEdgeWrapping,this.anisotropy=1,P?(this.format=s.RFormat,this.type=s.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=s.NearestFilter,this.minFilter=s.NearestFilter):(this.format=s.RGBAFormat,this.type=s.UnsignedByteType,this.offset=new o.Vector2(0,0),this.repeat=new o.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=s.LinearFilter,this.minFilter=s.LinearMipMapLinearFilter),this.needsUpdate=!1,this.onUpdate=null}clone(k=new p){return k.image=this.image,k.mapping=this.mapping,k.wrapS=this.wrapS,k.wrapT=this.wrapT,k.magFilter=this.magFilter,k.minFilter=this.minFilter,k.anisotropy=this.anisotropy,k.format=this.format,k.type=this.type,k.offset.copy(this.offset),k.repeat.copy(this.repeat),k.premultiplyAlpha=this.premultiplyAlpha,k.flipY=this.flipY,k.unpackAlignment=this.unpackAlignment,k}dispose(){this.dispatchEvent({type:"dispose"})}}let v=0},"./src/WebGL/core/UVMapping.ts":(n,t,i)=>{i.r(t),i.d(t,{UVMapping:()=>s});class s{}},"./src/WebGL/core/index.ts":(n,t,i)=>{i.r(t),i.d(t,{EventDispatcher:()=>s.EventDispatcher,Geometry:()=>o.Geometry,GeometryGroup:()=>o.GeometryGroup,GeometryIDCount:()=>o.GeometryIDCount,Light:()=>f.Light,Object3D:()=>f.Object3D,Object3DIDCount:()=>f.Object3DIDCount,Projector:()=>d.Projector,Raycaster:()=>p.Raycaster,Scene:()=>f.Scene,Texture:()=>v.Texture,TextureIdCount:()=>v.TextureIdCount,UVMapping:()=>_.UVMapping,intersectObject:()=>p.intersectObject});var s=i("./src/WebGL/core/EventDispatcher.ts"),o=i("./src/WebGL/core/Geometry.ts"),f=i("./src/WebGL/core/Object3D.ts"),d=i("./src/WebGL/core/Projector.ts"),p=i("./src/WebGL/core/Raycaster.ts"),v=i("./src/WebGL/core/Texture.ts"),_=i("./src/WebGL/core/UVMapping.ts")},"./src/WebGL/index.ts":(n,t,i)=>{i.r(t),i.d(t,{BackSide:()=>s.BackSide,Camera:()=>k.Camera,ClampToEdgeWrapping:()=>s.ClampToEdgeWrapping,Coloring:()=>s.Coloring,Cylinder:()=>_.Cylinder,DoubleSide:()=>s.DoubleSide,EventDispatcher:()=>o.EventDispatcher,FloatType:()=>s.FloatType,Fog:()=>P.Fog,FrontSide:()=>s.FrontSide,Geometry:()=>o.Geometry,GeometryGroup:()=>o.GeometryGroup,GeometryIDCount:()=>o.GeometryIDCount,ImposterMaterial:()=>f.ImposterMaterial,InstancedMaterial:()=>f.InstancedMaterial,Light:()=>o.Light,Line:()=>p.Line,LineBasicMaterial:()=>f.LineBasicMaterial,LineStyle:()=>p.LineStyle,LinearFilter:()=>s.LinearFilter,LinearMipMapLinearFilter:()=>s.LinearMipMapLinearFilter,Material:()=>f.Material,MaterialIdCount:()=>f.MaterialIdCount,Matrix3:()=>d.Matrix3,Matrix4:()=>d.Matrix4,Mesh:()=>p.Mesh,MeshDoubleLambertMaterial:()=>f.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>f.MeshLambertMaterial,MeshOutlineMaterial:()=>f.MeshOutlineMaterial,NearestFilter:()=>s.NearestFilter,Object3D:()=>o.Object3D,Object3DIDCount:()=>o.Object3DIDCount,Projector:()=>o.Projector,Quaternion:()=>d.Quaternion,R32Format:()=>s.R32Format,RFormat:()=>s.RFormat,RGBAFormat:()=>s.RGBAFormat,Ray:()=>d.Ray,Raycaster:()=>o.Raycaster,Renderer:()=>L.Renderer,Scene:()=>o.Scene,ShaderLib:()=>v.ShaderLib,ShaderUtils:()=>v.ShaderUtils,Shading:()=>s.Shading,Sphere:()=>_.Sphere,SphereImposterMaterial:()=>f.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>f.SphereImposterOutlineMaterial,Sprite:()=>p.Sprite,SpriteAlignment:()=>s.SpriteAlignment,SpriteMaterial:()=>f.SpriteMaterial,SpritePlugin:()=>G.SpritePlugin,StickImposterMaterial:()=>f.StickImposterMaterial,StickImposterOutlineMaterial:()=>f.StickImposterOutlineMaterial,Texture:()=>o.Texture,TextureIdCount:()=>o.TextureIdCount,TextureOperations:()=>s.TextureOperations,Triangle:()=>_.Triangle,UVMapping:()=>o.UVMapping,UnsignedByteType:()=>s.UnsignedByteType,Vector2:()=>d.Vector2,Vector3:()=>d.Vector3,VolumetricMaterial:()=>f.VolumetricMaterial,basic:()=>v.basic,clamp:()=>d.clamp,clone:()=>v.clone,conversionMatrix3:()=>d.conversionMatrix3,degToRad:()=>d.degToRad,instanced:()=>v.instanced,intersectObject:()=>o.intersectObject,lambert:()=>v.lambert,lambertdouble:()=>v.lambertdouble,outline:()=>v.outline,screen:()=>v.screen,screenaa:()=>v.screenaa,sphereimposter:()=>v.sphereimposter,sphereimposteroutline:()=>v.sphereimposteroutline,sprite:()=>v.sprite,stickimposter:()=>v.stickimposter,stickimposteroutline:()=>v.stickimposteroutline,volumetric:()=>v.volumetric});var s=i("./src/WebGL/constants/index.ts"),o=i("./src/WebGL/core/index.ts"),f=i("./src/WebGL/materials/index.ts"),d=i("./src/WebGL/math/index.ts"),p=i("./src/WebGL/objects/index.ts"),v=i("./src/WebGL/shaders/index.ts"),_=i("./src/WebGL/shapes/index.ts"),k=i("./src/WebGL/Camera.ts"),P=i("./src/WebGL/Fog.ts"),L=i("./src/WebGL/Renderer.ts"),G=i("./src/WebGL/SpritePlugin.ts")},"./src/WebGL/materials/ImposterMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{ImposterMaterial:()=>v});var s=i("./src/WebGL/constants/Coloring.ts"),o=i("./src/WebGL/constants/Shading.ts"),f=i("./src/colors.ts"),d=i("./src/WebGL/math/index.ts"),p=i("./src/WebGL/materials/Material.ts");class v extends p.Material{constructor(k){super(),this.color=new f.Color(16777215),this.ambient=new f.Color(1048575),this.emissive=new f.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=o.Shading.SmoothShading,this.shaderID=null,this.vertexColors=s.Coloring.NoColors,this.skinning=!1,this.setValues(k)}clone(k=new v){return super.clone.call(this,k),k.color.copy(this.color),k.ambient.copy(this.ambient),k.emissive.copy(this.emissive),k.wrapAround=this.wrapAround,k.wrapRGB.copy(this.wrapRGB),k.map=this.map,k.lightMap=this.lightMap,k.specularMap=this.specularMap,k.envMap=this.envMap,k.combine=this.combine,k.reflectivity=this.reflectivity,k.refractionRatio=this.refractionRatio,k.fog=this.fog,k.shading=this.shading,k.shaderID=this.shaderID,k.vertexColors=this.vertexColors,k.skinning=this.skinning,k.morphTargets=this.morphTargets,k.morphNormals=this.morphNormals,k}}},"./src/WebGL/materials/InstancedMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{InstancedMaterial:()=>v});var s=i("./src/WebGL/constants/Coloring.ts"),o=i("./src/WebGL/constants/Shading.ts"),f=i("./src/colors.ts"),d=i("./src/WebGL/math/index.ts"),p=i("./src/WebGL/materials/Material.ts");class v extends p.Material{constructor(k){super(),this.color=new f.Color(16777215),this.ambient=new f.Color(1048575),this.emissive=new f.Color(0),this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=o.Shading.SmoothShading,this.shaderID="instanced",this.vertexColors=s.Coloring.NoColors,this.skinning=!1,this.sphere=null,this.setValues(k)}clone(k=new v){return super.clone.call(this,k),k.color.copy(this.color),k.ambient.copy(this.ambient),k.emissive.copy(this.emissive),k.wrapAround=this.wrapAround,k.wrapRGB.copy(this.wrapRGB),k.map=this.map,k.lightMap=this.lightMap,k.specularMap=this.specularMap,k.envMap=this.envMap,k.combine=this.combine,k.reflectivity=this.reflectivity,k.refractionRatio=this.refractionRatio,k.fog=this.fog,k.shading=this.shading,k.shaderID=this.shaderID,k.vertexColors=this.vertexColors,k.skinning=this.skinning,k.morphTargets=this.morphTargets,k.morphNormals=this.morphNormals,k.sphere=this.sphere,k}}},"./src/WebGL/materials/LineBasicMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{LineBasicMaterial:()=>f});var s=i("./src/colors.ts"),o=i("./src/WebGL/materials/Material.ts");class f extends o.Material{constructor(p){super(),this.color=new s.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(p)}clone(p=new f){return super.clone.call(this,p),p.color.copy(this.color),p}}},"./src/WebGL/materials/Material.ts":(n,t,i)=>{i.r(t),i.d(t,{Material:()=>p,MaterialIdCount:()=>v});var s=i("./src/WebGL/constants/Sides.ts"),o=i("./src/WebGL/core/index.ts"),f=i("./src/WebGL/math/index.ts"),d=i("./src/colors.ts");class p extends o.EventDispatcher{constructor(){super(...arguments),this.id=v++,this.name="",this.side=s.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(k={}){if(k!==void 0)for(var P in k){var L=k[P];if(L===void 0){console.warn("$3Dmol.Material: '"+P+"' parameter is undefined.");continue}if(P in this){var G=this[P];G instanceof d.Color&&L instanceof d.Color?G.copy(L):G instanceof d.Color?G.set(L):G instanceof f.Vector3&&L instanceof f.Vector3?G.copy(L):this[P]=L}}}clone(k=new p){return k.name=this.name,k.side=this.side,k.opacity=this.opacity,k.transparent=this.transparent,k.depthTest=this.depthTest,k.depthWrite=this.depthWrite,k.polygonOffset=this.polygonOffset,k.polygonOffsetFactor=this.polygonOffsetFactor,k.polygonOffsetUnits=this.polygonOffsetUnits,k.alphaTest=this.alphaTest,k.overdraw=this.overdraw,k.visible=this.visible,k}makeShaded(k){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:k},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let v=0},"./src/WebGL/materials/MeshDoubleLambertMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{MeshDoubleLambertMaterial:()=>f});var s=i("./src/WebGL/constants/Sides.ts"),o=i("./src/WebGL/materials/MeshLambertMaterial.ts");class f extends o.MeshLambertMaterial{constructor(p){super(p),this.shaderID="lambertdouble",this.side=s.DoubleSide,this.outline=!1}clone(p=new f){return super.clone.call(this,p),p}}},"./src/WebGL/materials/MeshLambertMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{MeshLambertMaterial:()=>v});var s=i("./src/WebGL/constants/Coloring.ts"),o=i("./src/WebGL/constants/Shading.ts"),f=i("./src/WebGL/materials/Material.ts"),d=i("./src/colors.ts"),p=i("./src/WebGL/math/index.ts");class v extends f.Material{constructor(k){super(),this.color=new d.Color(16777215),this.ambient=new d.Color(1048575),this.emissive=new d.Color(0),this.wrapAround=!1,this.wrapRGB=new p.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=o.Shading.SmoothShading,this.shaderID="lambert",this.vertexColors=s.Coloring.NoColors,this.skinning=!1,this.setValues(k)}clone(k=new v){return super.clone.call(this,k),k.color.copy(this.color),k.ambient.copy(this.ambient),k.emissive.copy(this.emissive),k.wrapAround=this.wrapAround,k.wrapRGB.copy(this.wrapRGB),k.map=this.map,k.lightMap=this.lightMap,k.specularMap=this.specularMap,k.envMap=this.envMap,k.combine=this.combine,k.reflectivity=this.reflectivity,k.refractionRatio=this.refractionRatio,k.fog=this.fog,k.shading=this.shading,k.shaderID=this.shaderID,k.vertexColors=this.vertexColors,k.skinning=this.skinning,k.morphTargets=this.morphTargets,k.morphNormals=this.morphNormals,k}}},"./src/WebGL/materials/MeshOutlineMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{MeshOutlineMaterial:()=>f});var s=i("./src/colors.ts"),o=i("./src/WebGL/materials/Material.ts");class f extends o.Material{constructor(p){super(),p=p||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=s.CC.color(p.color||new s.Color(0,0,0)),this.outlineWidth=p.width||.1,this.outlinePushback=p.pushback||1,this.outlineMaxPixels=p.maxpixels||0}clone(p=new f){return super.clone.call(this,p),p.fog=this.fog,p.shaderID=this.shaderID,p.wireframe=this.wireframe,p.outlineColor=this.outlineColor,p.outlineWidth=this.outlineWidth,p.outlinePushback=this.outlinePushback,p.outlineMaxPixels=this.outlineMaxPixels,p}}},"./src/WebGL/materials/SphereImposterMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{SphereImposterMaterial:()=>o});var s=i("./src/WebGL/materials/ImposterMaterial.ts");class o extends s.ImposterMaterial{constructor(d){super(d),this.shaderID="sphereimposter",this.setValues(d)}clone(d=new o){return super.clone.call(this,d),d}}},"./src/WebGL/materials/SphereImposterOutlineMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{SphereImposterOutlineMaterial:()=>f});var s=i("./src/colors.ts"),o=i("./src/WebGL/materials/ImposterMaterial.ts");class f extends o.ImposterMaterial{constructor(p){super(p),p=p||{},this.shaderID="sphereimposteroutline",this.outlineColor=s.CC.color(p.color||new s.Color(0,0,0)),this.outlineWidth=p.width||.1,this.outlinePushback=p.pushback||1,this.outlineMaxPixels=p.maxpixels||0,this.setValues(p)}clone(p=new f){return super.clone.call(this,p),p.outlineColor=this.outlineColor,p.outlineWidth=this.outlineWidth,p.outlinePushback=this.outlinePushback,p.outlineMaxPixels=this.outlineMaxPixels,p}}},"./src/WebGL/materials/SpriteMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{SpriteMaterial:()=>v});var s=i("./src/WebGL/constants/SpriteAlignment.ts"),o=i("./src/WebGL/core/Texture.ts"),f=i("./src/colors.ts"),d=i("./src/WebGL/math/index.ts"),p=i("./src/WebGL/materials/Material.ts");class v extends p.Material{constructor(k){super(),this.color=new f.Color(16777215),this.map=new o.Texture,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new d.Vector2(0,0),this.uvScale=new d.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=s.SpriteAlignment.center.clone(),this.setValues(k),k=k||{},k.depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),k.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),k.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(k=new v){return super.clone.call(this,k),k.color.copy(this.color),k.map=this.map,k.useScreenCoordinates=this.useScreenCoordinates,k.screenOffset=this.screenOffset,k.sizeAttenuation=this.sizeAttenuation,k.scaleByViewport=this.scaleByViewPort,k.alignment.copy(this.alignment),k.uvOffset.copy(this.uvOffset),k}}},"./src/WebGL/materials/StickImposterMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{StickImposterMaterial:()=>o});var s=i("./src/WebGL/materials/ImposterMaterial.ts");class o extends s.ImposterMaterial{constructor(d){super(d),this.shaderID="stickimposter",this.setValues(d)}clone(d=new o){return super.clone.call(this,d),d}}},"./src/WebGL/materials/StickImposterOutlineMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{StickImposterOutlineMaterial:()=>f});var s=i("./src/colors.ts"),o=i("./src/WebGL/materials/ImposterMaterial.ts");class f extends o.ImposterMaterial{constructor(p={}){super(p),this.shaderID="stickimposteroutline",this.outlineColor=new s.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,p.color&&(this.outlineColor=s.CC.color(p.color)),p.width&&(this.outlineWidth=p.width),p.pushback&&(this.outlinePushback=p.pushback),p.maxpixels&&(this.outlineMaxPixels=p.maxpixels),this.setValues(p)}clone(p=new f){return super.clone.call(this,p),p.outlineColor=this.outlineColor,p.outlineWidth=this.outlineWidth,p.outlinePushback=this.outlinePushback,p.outlineMaxPixels=this.outlineMaxPixels,p}}},"./src/WebGL/materials/VolumetricMaterial.ts":(n,t,i)=>{i.r(t),i.d(t,{VolumetricMaterial:()=>d});var s=i("./src/WebGL/constants/Sides.ts"),o=i("./src/colors.ts"),f=i("./src/WebGL/materials/Material.ts");class d extends f.Material{constructor(v){super(),this.transparent=!1,this.volumetric=!0,this.color=new o.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=s.FrontSide,this.setValues(v)}clone(v=new d){return super.clone.call(this,v),v.transparent=this.transparent,v.volumetric=this.volumetric,v.color=this.color,v.transferfn=this.transferfn,v.map=this.map,v.extent=this.extent,v.maxdepth=this.maxdepth,v.unit=this.unit,v.texmatrix=this.texmatrix,v.transfermin=this.transfermin,v.transfermax=this.transfermax,v.subsamples=this.subsamples,v.shaderID=this.shaderID,v.side=this.side,v}}},"./src/WebGL/materials/index.ts":(n,t,i)=>{i.r(t),i.d(t,{ImposterMaterial:()=>s.ImposterMaterial,InstancedMaterial:()=>o.InstancedMaterial,LineBasicMaterial:()=>f.LineBasicMaterial,Material:()=>d.Material,MaterialIdCount:()=>d.MaterialIdCount,MeshDoubleLambertMaterial:()=>p.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>v.MeshLambertMaterial,MeshOutlineMaterial:()=>_.MeshOutlineMaterial,SphereImposterMaterial:()=>k.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>P.SphereImposterOutlineMaterial,SpriteMaterial:()=>L.SpriteMaterial,StickImposterMaterial:()=>G.StickImposterMaterial,StickImposterOutlineMaterial:()=>Z.StickImposterOutlineMaterial,VolumetricMaterial:()=>W.VolumetricMaterial});var s=i("./src/WebGL/materials/ImposterMaterial.ts"),o=i("./src/WebGL/materials/InstancedMaterial.ts"),f=i("./src/WebGL/materials/LineBasicMaterial.ts"),d=i("./src/WebGL/materials/Material.ts"),p=i("./src/WebGL/materials/MeshDoubleLambertMaterial.ts"),v=i("./src/WebGL/materials/MeshLambertMaterial.ts"),_=i("./src/WebGL/materials/MeshOutlineMaterial.ts"),k=i("./src/WebGL/materials/SphereImposterMaterial.ts"),P=i("./src/WebGL/materials/SphereImposterOutlineMaterial.ts"),L=i("./src/WebGL/materials/SpriteMaterial.ts"),G=i("./src/WebGL/materials/StickImposterMaterial.ts"),Z=i("./src/WebGL/materials/StickImposterOutlineMaterial.ts"),W=i("./src/WebGL/materials/VolumetricMaterial.ts")},"./src/WebGL/math/Quaternion.ts":(n,t,i)=>{i.r(t),i.d(t,{Quaternion:()=>s});class s{constructor(f,d,p,v){this.x=f||0,this.y=d||0,this.z=p||0,this.w=v!==void 0?v:1}set(f,d,p,v){return this.x=f,this.y=d,this.z=p,this.w=v,this}copy(f){return this.x=f.x,this.y=f.y,this.z=f.z,this.w=f.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let f=this.length();return f===0?(this.x=0,this.y=0,this.z=0,this.w=1):(f=1/f,this.x*=f,this.y*=f,this.z*=f,this.w*=f),this}multiply(f){return this.multiplyQuaternions(this,f)}multiplyScalar(f){return this.x*=f,this.y*=f,this.z*=f,this.w*=f,this}multiplyQuaternions(f,d){const p=f.x,v=f.y,_=f.z,k=f.w,P=d.x,L=d.y,G=d.z,Z=d.w;return this.x=p*Z+k*P+v*G-_*L,this.y=v*Z+k*L+_*P-p*G,this.z=_*Z+k*G+p*L-v*P,this.w=k*Z-p*P-v*L-_*G,this}sub(f){return this.x-=f.x,this.y-=f.y,this.z-=f.z,this.w-=f.w,this}clone(){return new s(this.x,this.y,this.z,this.w)}setFromEuler(f){const d=Math.cos(f.x/2),p=Math.cos(f.y/2),v=Math.cos(f.z/2),_=Math.sin(f.x/2),k=Math.sin(f.y/2),P=Math.sin(f.z/2);return this.x=_*p*v+d*k*P,this.y=d*k*v-_*p*P,this.z=d*p*P+_*k*v,this.w=d*p*v-_*k*P,this}}},"./src/WebGL/math/Vector2.ts":(n,t,i)=>{i.r(t),i.d(t,{Vector2:()=>s});class s{constructor(f,d){this.x=f||0,this.y=d||0}set(f,d){return this.x=f,this.y=d,this}subVectors(f,d){return this.x=f.x-d.x,this.y=f.y-d.y,this}copy(f){return this.x=f.x,this.y=f.y,this}clone(){return new s(this.x,this.y)}}},"./src/WebGL/math/index.ts":(n,t,i)=>{i.r(t),i.d(t,{Matrix3:()=>v.Matrix3,Matrix4:()=>v.Matrix4,Quaternion:()=>s.Quaternion,Ray:()=>v.Ray,Vector2:()=>o.Vector2,Vector3:()=>v.Vector3,clamp:()=>f.clamp,conversionMatrix3:()=>d.conversionMatrix3,degToRad:()=>p.degToRad});var s=i("./src/WebGL/math/Quaternion.ts"),o=i("./src/WebGL/math/Vector2.ts"),f=i("./src/WebGL/math/utils/clamp.ts"),d=i("./src/WebGL/math/utils/conversionMatrix3.ts"),p=i("./src/WebGL/math/utils/degToRad.ts"),v=i("./src/WebGL/math/math.ts")},"./src/WebGL/math/math.ts":(n,t,i)=>{i.r(t),i.d(t,{Matrix3:()=>L,Matrix4:()=>k,Ray:()=>G,Vector3:()=>P});var s=i("./src/WebGL/math/utils/degToRad.ts"),o=i("./src/WebGL/math/utils/clamp.ts"),f,d,p,v,_;class k{constructor(W=1,j=0,H=0,me=0,$e=0,De=1,le=0,Ce=0,Me=0,_n=0,_i=1,ll=0,_l=0,oa=0,Ru=0,ga=1){typeof W<"u"&&typeof W!="number"?this.elements=new Float32Array(W):(this.elements=new Float32Array(16),this.elements[0]=W,this.elements[4]=j,this.elements[8]=H,this.elements[12]=me,this.elements[1]=$e,this.elements[5]=De,this.elements[9]=le,this.elements[13]=Ce,this.elements[2]=Me,this.elements[6]=_n,this.elements[10]=_i,this.elements[14]=ll,this.elements[3]=_l,this.elements[7]=oa,this.elements[11]=Ru,this.elements[15]=ga)}makeScale(W,j,H){throw new Error("Method not implemented.")}set(W,j,H,me,$e,De,le,Ce,Me,_n,_i,ll,_l,oa,Ru,ga){const _s=this.elements;return _s[0]=W,_s[4]=j,_s[8]=H,_s[12]=me,_s[1]=$e,_s[5]=De,_s[9]=le,_s[13]=Ce,_s[2]=Me,_s[6]=_n,_s[10]=_i,_s[14]=ll,_s[3]=_l,_s[7]=oa,_s[11]=Ru,_s[15]=ga,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(W){const j=W.elements;return this.set(j[0],j[4],j[8],j[12],j[1],j[5],j[9],j[13],j[2],j[6],j[10],j[14],j[3],j[7],j[11],j[15]),this}matrix3FromTopLeft(){const W=this.elements;return new L(W[0],W[4],W[8],W[1],W[5],W[9],W[2],W[6],W[10])}setRotationFromEuler(W,j){const H=this.elements,{x:me,y:$e,z:De}=W,le=Math.cos(me),Ce=Math.sin(me),Me=Math.cos($e),_n=Math.sin($e),_i=Math.cos(De),ll=Math.sin(De);if(j===void 0||j==="XYZ"){const _l=le*_i,oa=le*ll,Ru=Ce*_i,ga=Ce*ll;H[0]=Me*_i,H[4]=-Me*ll,H[8]=_n,H[1]=oa+Ru*_n,H[5]=_l-ga*_n,H[9]=-Ce*Me,H[2]=ga-_l*_n,H[6]=Ru+oa*_n,H[10]=le*Me}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${j}`);return this}setRotationFromQuaternion(W){const j=this.elements,{x:H,y:me,z:$e,w:De}=W,le=H+H,Ce=me+me,Me=$e+$e,_n=H*le,_i=H*Ce,ll=H*Me,_l=me*Ce,oa=me*Me,Ru=$e*Me,ga=De*le,_s=De*Ce,Sa=De*Me;return j[0]=1-(_l+Ru),j[4]=_i-Sa,j[8]=ll+_s,j[1]=_i+Sa,j[5]=1-(_n+Ru),j[9]=oa-ga,j[2]=ll-_s,j[6]=oa+ga,j[10]=1-(_n+_l),this}multiplyMatrices(W,j){const H=W.elements,me=j.elements,$e=this.elements,De=H[0],le=H[4],Ce=H[8],Me=H[12],_n=H[1],_i=H[5],ll=H[9],_l=H[13],oa=H[2],Ru=H[6],ga=H[10],_s=H[14],Sa=H[3],Ra=H[7],Da=H[11],Fa=H[15],Na=me[0],_a=me[4],Pa=me[8],qc=me[12],uf=me[1],_h=me[5],Uh=me[9],Kd=me[13],ud=me[2],sc=me[6],Yd=me[10],wg=me[14],Pf=me[3],ac=me[7],fc=me[11],nd=me[15];return $e[0]=De*Na+le*uf+Ce*ud+Me*Pf,$e[4]=De*_a+le*_h+Ce*sc+Me*ac,$e[8]=De*Pa+le*Uh+Ce*Yd+Me*fc,$e[12]=De*qc+le*Kd+Ce*wg+Me*nd,$e[1]=_n*Na+_i*uf+ll*ud+_l*Pf,$e[5]=_n*_a+_i*_h+ll*sc+_l*ac,$e[9]=_n*Pa+_i*Uh+ll*Yd+_l*fc,$e[13]=_n*qc+_i*Kd+ll*wg+_l*nd,$e[2]=oa*Na+Ru*uf+ga*ud+_s*Pf,$e[6]=oa*_a+Ru*_h+ga*sc+_s*ac,$e[10]=oa*Pa+Ru*Uh+ga*Yd+_s*fc,$e[14]=oa*qc+Ru*Kd+ga*wg+_s*nd,$e[3]=Sa*Na+Ra*uf+Da*ud+Fa*Pf,$e[7]=Sa*_a+Ra*_h+Da*sc+Fa*ac,$e[11]=Sa*Pa+Ra*Uh+Da*Yd+Fa*fc,$e[15]=Sa*qc+Ra*Kd+Da*wg+Fa*nd,this}multiplyScalar(W){const j=this.elements;return j[0]*=W,j[4]*=W,j[8]*=W,j[12]*=W,j[1]*=W,j[5]*=W,j[9]*=W,j[13]*=W,j[2]*=W,j[6]*=W,j[10]*=W,j[14]*=W,j[3]*=W,j[7]*=W,j[11]*=W,j[15]*=W,this}makeTranslation(W,j,H){return this.set(1,0,0,W,0,1,0,j,0,0,1,H,0,0,0,1),this}snap(W){const j=Math.pow(10,4),H=this.elements;for(let me=0;me<16;me++){const $e=Math.round(H[me]);$e===Math.round(H[me]*j)/j&&(H[me]=$e)}return this}transpose(){const W=this.elements;let j;return j=W[1],W[1]=W[4],W[4]=j,j=W[2],W[2]=W[8],W[8]=j,j=W[6],W[6]=W[9],W[9]=j,j=W[3],W[3]=W[12],W[12]=j,j=W[7],W[7]=W[13],W[13]=j,j=W[11],W[11]=W[14],W[14]=j,this}setPosition(W){const j=this.elements;return j[12]=W.x,j[13]=W.y,j[14]=W.z,this}translate(W){const j=this.elements;return j[12]+=W.x,j[13]+=W.y,j[14]+=W.z,this}getInverse(W,j){const H=this.elements,me=W.elements,$e=me[0],De=me[4],le=me[8],Ce=me[12],Me=me[1],_n=me[5],_i=me[9],ll=me[13],_l=me[2],oa=me[6],Ru=me[10],ga=me[14],_s=me[3],Sa=me[7],Ra=me[11],Da=me[15];H[0]=_i*ga*Sa-ll*Ru*Sa+ll*oa*Ra-_n*ga*Ra-_i*oa*Da+_n*Ru*Da,H[4]=Ce*Ru*Sa-le*ga*Sa-Ce*oa*Ra+De*ga*Ra+le*oa*Da-De*Ru*Da,H[8]=le*ll*Sa-Ce*_i*Sa+Ce*_n*Ra-De*ll*Ra-le*_n*Da+De*_i*Da,H[12]=Ce*_i*oa-le*ll*oa-Ce*_n*Ru+De*ll*Ru+le*_n*ga-De*_i*ga,H[1]=ll*Ru*_s-_i*ga*_s-ll*_l*Ra+Me*ga*Ra+_i*_l*Da-Me*Ru*Da,H[5]=le*ga*_s-Ce*Ru*_s+Ce*_l*Ra-$e*ga*Ra-le*_l*Da+$e*Ru*Da,H[9]=Ce*_i*_s-le*ll*_s-Ce*Me*Ra+$e*ll*Ra+le*Me*Da-$e*_i*Da,H[13]=le*ll*_l-Ce*_i*_l+Ce*Me*Ru-$e*ll*Ru-le*Me*ga+$e*_i*ga,H[2]=_n*ga*_s-ll*oa*_s+ll*_l*Sa-Me*ga*Sa-_n*_l*Da+Me*oa*Da,H[6]=Ce*oa*_s-De*ga*_s-Ce*_l*Sa+$e*ga*Sa+De*_l*Da-$e*oa*Da,H[10]=De*ll*_s-Ce*_n*_s+Ce*Me*Sa-$e*ll*Sa-De*Me*Da+$e*_n*Da,H[14]=Ce*_n*_l-De*ll*_l-Ce*Me*oa+$e*ll*oa+De*Me*ga-$e*_n*ga,H[3]=_i*oa*_s-_n*Ru*_s-_i*_l*Sa+Me*Ru*Sa+_n*_l*Ra-Me*oa*Ra,H[7]=De*Ru*_s-le*oa*_s+le*_l*Sa-$e*Ru*Sa-De*_l*Ra+$e*oa*Ra,H[11]=le*_n*_s-De*_i*_s-le*Me*Sa+$e*_i*Sa+De*Me*Ra-$e*_n*Ra,H[15]=De*_i*_l-le*_n*_l+le*Me*oa-$e*_i*oa-De*Me*Ru+$e*_n*Ru;const Fa=$e*H[0]+Me*H[4]+_l*H[8]+_s*H[12];if(Fa===0){const Na="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(j)throw new Error(Na);return console.warn(Na),this.identity(),this}return this.multiplyScalar(1/Fa),this}isReflected(){const W=this.elements,j=W[0],H=W[4],me=W[8],$e=W[1],De=W[5],le=W[9],Ce=W[2],Me=W[6],_n=W[10];return j*De*_n+$e*Me*me+Ce*H*le-Ce*De*me-$e*H*_n-j*Me*le<0}scale(W){const j=this.elements,{x:H}=W,{y:me}=W,{z:$e}=W;return j[0]*=H,j[4]*=me,j[8]*=$e,j[1]*=H,j[5]*=me,j[9]*=$e,j[2]*=H,j[6]*=me,j[10]*=$e,j[3]*=H,j[7]*=me,j[11]*=$e,this}getMaxScaleOnAxis(){const W=this.elements,j=W[0]*W[0]+W[1]*W[1]+W[2]*W[2],H=W[4]*W[4]+W[5]*W[5]+W[6]*W[6],me=W[8]*W[8]+W[9]*W[9]+W[10]*W[10];return Math.sqrt(Math.max(j,Math.max(H,me)))}makeFrustum(W,j,H,me,$e,De){const le=this.elements,Ce=2*$e/(j-W),Me=2*$e/(me-H),_n=(j+W)/(j-W),_i=(me+H)/(me-H),ll=-(De+$e)/(De-$e),_l=-2*De*$e/(De-$e);return le[0]=Ce,le[4]=0,le[8]=_n,le[12]=0,le[1]=0,le[5]=Me,le[9]=_i,le[13]=0,le[2]=0,le[6]=0,le[10]=ll,le[14]=_l,le[3]=0,le[7]=0,le[11]=-1,le[15]=0,this}makePerspective(W,j,H,me){const $e=H*Math.tan((0,s.degToRad)(W*.5)),De=-$e,le=De*j,Ce=$e*j;return this.makeFrustum(le,Ce,De,$e,H,me)}makeOrthographic(W,j,H,me,$e,De){const le=this.elements,Ce=1/(j-W),Me=1/(H-me),_n=1/(De-$e),_i=(j+W)*Ce,ll=(H+me)*Me,_l=(De+$e)*_n;return le[0]=2*Ce,le[4]=0,le[8]=0,le[12]=-_i,le[1]=0,le[5]=2*Me,le[9]=0,le[13]=-ll,le[2]=0,le[6]=0,le[10]=-2*_n,le[14]=-_l,le[3]=0,le[7]=0,le[11]=0,le[15]=1,this}isEqual(W){const j=W.elements,H=this.elements;return H[0]===j[0]&&H[4]===j[4]&&H[8]===j[8]&&H[12]===j[12]&&H[1]===j[1]&&H[5]===j[5]&&H[9]===j[9]&&H[13]===j[13]&&H[2]===j[2]&&H[6]===j[6]&&H[10]===j[10]&&H[14]===j[14]&&H[3]===j[3]&&H[7]===j[7]&&H[11]===j[11]&&H[15]===j[15]}clone(){const W=this.elements;return new k(W[0],W[4],W[8],W[12],W[1],W[5],W[9],W[13],W[2],W[6],W[10],W[14],W[3],W[7],W[11],W[15])}isIdentity(){const W=this.elements;return W[0]===1&&W[4]===0&&W[8]===0&&W[12]===0&&W[1]===0&&W[5]===1&&W[9]===0&&W[13]===0&&W[2]===0&&W[6]===0&&W[10]===1&&W[14]===0&&W[3]===0&&W[7]===0&&W[11]===0&&W[15]===1}isNearlyIdentity(W){return this.clone().snap(W).isIdentity()}getScale(W){const j=this.elements;return W=W||new P,p.set(j[0],j[1],j[2]),v.set(j[4],j[5],j[6]),_.set(j[8],j[9],j[10]),W.x=p.length(),W.y=v.length(),W.z=_.length(),W}lookAt(W,j,H){const me=this.elements;return _.subVectors(W,j).normalize(),_.length()===0&&(_.z=1),p.crossVectors(H,_).normalize(),p.length()===0&&(_.x+=1e-4,p.crossVectors(H,_).normalize()),v.crossVectors(_,p),me[0]=p.x,me[4]=v.x,me[8]=_.x,me[1]=p.y,me[5]=v.y,me[9]=_.y,me[2]=p.z,me[6]=v.z,me[10]=_.z,this}compose(W,j,H){const me=this.elements;return f.identity(),f.setRotationFromQuaternion(j),d.makeScale(H.x,H.y,H.z),this.multiplyMatrices(f,d),me[12]=W.x,me[13]=W.y,me[14]=W.z,this}}f=new k,d=new k;class P{constructor(W,j,H){this.x=W||0,this.y=j||0,this.z=H||0,this.atomid=void 0}set(W,j,H){return this.x=W,this.y=j,this.z=H,this}copy(W){return this.x=W.x,this.y=W.y,this.z=W.z,this}add(W){return this.x+=W.x,this.y+=W.y,this.z+=W.z,this}addVectors(W,j){return this.x=W.x+j.x,this.y=W.y+j.y,this.z=W.z+j.z,this}multiplyVectors(W,j){return this.x=W.x*j.x,this.y=W.y*j.y,this.z=W.z*j.z,this}sub(W){return this.x-=W.x,this.y-=W.y,this.z-=W.z,this}subVectors(W,j){return this.x=W.x-j.x,this.y=W.y-j.y,this.z=W.z-j.z,this}multiplyScalar(W){return this.x*=W,this.y*=W,this.z*=W,this}divideScalar(W){return W!==0?(this.x/=W,this.y/=W,this.z/=W):(this.x=0,this.y=0,this.z=0),this}max(W){return this.x=Math.max(this.x,W.x),this.y=Math.max(this.y,W.y),this.z=Math.max(this.z,W.z),this}min(W){return this.x=Math.min(this.x,W.x),this.y=Math.min(this.y,W.y),this.z=Math.min(this.z,W.z),this}distanceTo(W){return Math.sqrt(this.distanceToSquared(W))}distanceToSquared(W){const j=this.x-W.x,H=this.y-W.y,me=this.z-W.z;return j*j+H*H+me*me}applyMatrix3(W){const{x:j}=this,{y:H}=this,{z:me}=this,$e=W.elements;return this.x=$e[0]*j+$e[3]*H+$e[6]*me,this.y=$e[1]*j+$e[4]*H+$e[7]*me,this.z=$e[2]*j+$e[5]*H+$e[8]*me,this}applyMatrix4(W){const{x:j}=this,{y:H}=this,{z:me}=this,$e=W.elements;return this.x=$e[0]*j+$e[4]*H+$e[8]*me+$e[12],this.y=$e[1]*j+$e[5]*H+$e[9]*me+$e[13],this.z=$e[2]*j+$e[6]*H+$e[10]*me+$e[14],this}applyProjection(W){const{x:j}=this,{y:H}=this,{z:me}=this,$e=W.elements,De=$e[3]*j+$e[7]*H+$e[11]*me+$e[15];return this.x=($e[0]*j+$e[4]*H+$e[8]*me+$e[12])/De,this.y=($e[1]*j+$e[5]*H+$e[9]*me+$e[13])/De,this.z=($e[2]*j+$e[6]*H+$e[10]*me+$e[14])/De,this}applyQuaternion(W){const{x:j}=this,{y:H}=this,{z:me}=this,$e=W.x,De=W.y,le=W.z,Ce=W.w,Me={};Me.x=2*(H*le-me*De),Me.y=2*(me*$e-j*le),Me.z=2*(j*De-H*$e);const _n={};return _n.x=Me.y*le-Me.z*De,_n.y=Me.z*$e-Me.x*le,_n.z=Me.x*De-Me.y*$e,this.x=j+Ce*Me.x+_n.x,this.y=H+Ce*Me.y+_n.y,this.z=me+Ce*Me.z+_n.z,this}negate(){return this.multiplyScalar(-1)}dot(W){return this.x*W.x+this.y*W.y+this.z*W.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(W){const{x:j}=this,{y:H}=this,{z:me}=this;return this.x=H*W.z-me*W.y,this.y=me*W.x-j*W.z,this.z=j*W.y-H*W.x,this}crossVectors(W,j){return this.x=W.y*j.z-W.z*j.y,this.y=W.z*j.x-W.x*j.z,this.z=W.x*j.y-W.y*j.x,this}equals(W){return this.x==W.x&&this.y==W.y&&this.z==W.z}getPositionFromMatrix(W){return this.x=W.elements[12],this.y=W.elements[13],this.z=W.elements[14],this}setEulerFromRotationMatrix(W,j){const H=W.elements,me=H[0],$e=H[4],De=H[8],le=H[5],Ce=H[9],Me=H[6],_n=H[10];return j===void 0||j==="XYZ"?(this.y=Math.asin((0,o.clamp)(De,-1,1)),Math.abs(De)<.99999?(this.x=Math.atan2(-Ce,_n),this.z=Math.atan2(-$e,me)):(this.x=Math.atan2(Me,le),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${j}`),this}rotateAboutVector(W,j){W.normalize();const H=Math.cos(j),me=Math.sin(j),$e=this.clone().multiplyScalar(H),De=W.clone().cross(this).multiplyScalar(me),le=W.clone().multiplyScalar(W.clone().dot(this)).multiplyScalar(1-H),Ce=$e.add(De).add(le);return this.x=Ce.x,this.y=Ce.y,this.z=Ce.z,this}setFromMatrixPosition(W){const j=W.elements;return this.x=j[12],this.y=j[13],this.z=j[14],this}transformDirection(W){const{x:j}=this,{y:H}=this,{z:me}=this,$e=W.elements;return this.x=$e[0]*j+$e[4]*H+$e[8]*me,this.y=$e[1]*j+$e[5]*H+$e[9]*me,this.z=$e[2]*j+$e[6]*H+$e[10]*me,this.normalize()}clone(){return new P(this.x,this.y,this.z)}unproject(W){const j=f;return j.multiplyMatrices(W.matrixWorld,j.getInverse(W.projectionMatrix)),this.applyMatrix4(j)}}p=new P,v=new P,_=new P;class L{constructor(W=1,j=0,H=0,me=0,$e=1,De=0,le=0,Ce=0,Me=1){this.elements=new Float32Array(9),this.set(W,j,H,me,$e,De,le,Ce,Me)}set(W,j,H,me,$e,De,le,Ce,Me){const _n=this.elements;return _n[0]=W,_n[3]=j,_n[6]=H,_n[1]=me,_n[4]=$e,_n[7]=De,_n[2]=le,_n[5]=Ce,_n[8]=Me,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(W){const j=W.elements;this.set(j[0],j[3],j[6],j[1],j[4],j[7],j[2],j[5],j[8])}multiplyScalar(W){const j=this.elements;return j[0]*=W,j[3]*=W,j[6]*=W,j[1]*=W,j[4]*=W,j[7]*=W,j[2]*=W,j[5]*=W,j[8]*=W,this}getInverse3(W){const j=W.elements,H=this.elements;H[0]=j[4]*j[8]-j[5]*j[7],H[3]=j[6]*j[5]-j[3]*j[8],H[6]=j[3]*j[7]-j[6]*j[4],H[1]=j[7]*j[2]-j[1]*j[8],H[4]=j[0]*j[8]-j[6]*j[2],H[7]=j[1]*j[6]-j[0]*j[7],H[2]=j[1]*j[5]-j[2]*j[4],H[5]=j[2]*j[3]-j[0]*j[5],H[8]=j[0]*j[4]-j[1]*j[3];const me=j[0]*H[0]+j[3]*H[1]+j[6]*H[2];return this.multiplyScalar(1/me),this}getInverse(W,j){const H=W.elements,me=this.elements;me[0]=H[10]*H[5]-H[6]*H[9],me[1]=-H[10]*H[1]+H[2]*H[9],me[2]=H[6]*H[1]-H[2]*H[5],me[3]=-H[10]*H[4]+H[6]*H[8],me[4]=H[10]*H[0]-H[2]*H[8],me[5]=-H[6]*H[0]+H[2]*H[4],me[6]=H[9]*H[4]-H[5]*H[8],me[7]=-H[9]*H[0]+H[1]*H[8],me[8]=H[5]*H[0]-H[1]*H[4];const $e=H[0]*me[0]+H[1]*me[3]+H[2]*me[6];if($e===0){const De="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(j)throw new Error(De);return console.warn(De),this.identity(),this}return this.multiplyScalar(1/$e),this}getDeterminant(){const W=this.elements;return W[0]*W[4]*W[8]+W[1]*W[5]*W[6]+W[2]*W[3]*W[7]-W[2]*W[4]*W[6]-W[1]*W[3]*W[8]-W[0]*W[5]*W[7]}transpose(){let W;const j=this.elements;return W=j[1],j[1]=j[3],j[3]=W,W=j[2],j[2]=j[6],j[6]=W,W=j[5],j[5]=j[7],j[7]=W,this}clone(){const W=this.elements;return new L(W[0],W[3],W[6],W[1],W[4],W[7],W[2],W[5],W[8])}getMatrix4(){const W=this.elements;return new k(W[0],W[3],W[6],0,W[1],W[4],W[7],0,W[2],W[5],W[8],0)}}class G{constructor(W,j){this.origin=W!==void 0?W:new P,this.direction=j!==void 0?j:new P}set(W,j){return this.origin.copy(W),this.direction.copy(j),this}copy(W){return this.origin.copy(W.origin),this.direction.copy(W.direction),this}at(W,j){return(j||new P).copy(this.direction).multiplyScalar(W).add(this.origin)}recast(W){const j=p;return this.origin.copy(this.at(W,j)),this}closestPointToPoint(W,j){const H=j||new P;H.subVectors(W,this.origin);const me=H.dot(this.direction);return H.copy(this.direction).multiplyScalar(me).add(this.origin)}distanceToPoint(W){const j=p,H=j.subVectors(W,this.origin).dot(this.direction);return j.copy(this.direction).multiplyScalar(H).add(this.origin),j.distanceTo(W)}isIntersectionCylinder(){}isIntersectionSphere(W){return this.distanceToPoint(W.center)<=W.radius}isIntersectionPlane(W){return W.normal.dot(this.direction)!==0||W.distanceToPoint(this.origin)===0}distanceToPlane(W){const j=W.normal.dot(this.direction);return j===0?W.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(W.normal)+W.constant)/j}intersectPlane(W,j){const H=this.distanceToPlane(W);if(H!==void 0)return this.at(H,j)}applyMatrix4(W){return this.direction.add(this.origin).applyMatrix4(W),this.origin.applyMatrix4(W),this.direction.sub(this.origin),this}clone(){return new G().copy(this)}}},"./src/WebGL/math/utils/clamp.ts":(n,t,i)=>{i.r(t),i.d(t,{clamp:()=>s});function s(o,f,d){return Math.min(Math.max(o,f),d)}},"./src/WebGL/math/utils/conversionMatrix3.ts":(n,t,i)=>{i.r(t),i.d(t,{conversionMatrix3:()=>o});var s=i("./src/WebGL/math/math.ts");function o(f,d,p,v,_,k){v=v*Math.PI/180,_=_*Math.PI/180,k=k*Math.PI/180;const P=H=>H*H,L=Math.cos(v),G=Math.cos(_),Z=Math.cos(k),W=Math.sin(k);return new s.Matrix3(f,d*Z,p*G,0,d*W,p*(L-G*Z)/W,0,0,p*Math.sqrt(1-P(L)-P(G)-P(Z)+2*L*G*Z)/W)}},"./src/WebGL/math/utils/degToRad.ts":(n,t,i)=>{i.r(t),i.d(t,{degToRad:()=>o});const s=Math.PI/180;function o(f){return f*s}},"./src/WebGL/objects/Line.ts":(n,t,i)=>{i.r(t),i.d(t,{Line:()=>d,LineStyle:()=>f});var s=i("./src/WebGL/materials/index.ts"),o=i("./src/WebGL/core/index.ts"),f;(function(p){p[p.LineStrip=0]="LineStrip",p[p.LinePieces=1]="LinePieces"})(f||(f={}));class d extends o.Object3D{constructor(v,_=new s.LineBasicMaterial({color:Math.random()*16777215}),k=f.LineStrip){super(),this.geometry=v,this.material=_,this.type=k}clone(v=new d(this.geometry,this.material,this.type)){return super.clone.call(this,v),v}}},"./src/WebGL/objects/Mesh.ts":(n,t,i)=>{i.r(t),i.d(t,{Mesh:()=>o});var s=i("./src/WebGL/core/index.ts");class o extends s.Object3D{constructor(d,p){super(),this.geometry=d,this.material=p}clone(d){return d===void 0&&(d=new o(this.geometry,this.material)),super.clone.call(this,d),d}}},"./src/WebGL/objects/Sprite.ts":(n,t,i)=>{i.r(t),i.d(t,{Sprite:()=>f});var s=i("./src/WebGL/materials/index.ts"),o=i("./src/WebGL/core/index.ts");class f extends o.Object3D{constructor(p=new s.SpriteMaterial){super(),this.material=p,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(this.scale.x!==1||this.scale.y!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(p=new f(this.material)){return o.Object3D.prototype.clone.call(this,p),p}}},"./src/WebGL/objects/index.ts":(n,t,i)=>{i.r(t),i.d(t,{Line:()=>s.Line,LineStyle:()=>s.LineStyle,Mesh:()=>o.Mesh,Sprite:()=>f.Sprite});var s=i("./src/WebGL/objects/Line.ts"),o=i("./src/WebGL/objects/Mesh.ts"),f=i("./src/WebGL/objects/Sprite.ts")},"./src/WebGL/shaders/ShaderType.ts":(n,t,i)=>{i.r(t)},"./src/WebGL/shaders/index.ts":(n,t,i)=>{i.r(t),i.d(t,{ShaderLib:()=>s.ShaderLib,ShaderUtils:()=>o.ShaderUtils,basic:()=>s.basic,clone:()=>o.clone,instanced:()=>s.instanced,lambert:()=>s.lambert,lambertdouble:()=>s.lambertdouble,outline:()=>s.outline,screen:()=>s.screen,screenaa:()=>s.screenaa,sphereimposter:()=>s.sphereimposter,sphereimposteroutline:()=>s.sphereimposteroutline,sprite:()=>s.sprite,stickimposter:()=>s.stickimposter,stickimposteroutline:()=>s.stickimposteroutline,volumetric:()=>s.volumetric});var s=i("./src/WebGL/shaders/lib/index.ts"),o=i("./src/WebGL/shaders/utils/index.ts");i("./src/WebGL/shaders/ShaderType.ts")},"./src/WebGL/shaders/lib/basic/index.ts":(n,t,i)=>{i.r(t),i.d(t,{basic:()=>d});var s=i("./src/WebGL/shaders/lib/basic/uniforms.ts"),o=i("./src/WebGL/shaders/lib/basic/basic.frag"),f=i("./src/WebGL/shaders/lib/basic/basic.vert");const d={vertexShader:f.default.replace("#define GLSLIFY 1",""),fragmentShader:o.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/basic/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>o});var s=i("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}},"./src/WebGL/shaders/lib/blur/index.ts":(n,t,i)=>{i.r(t),i.d(t,{blur:()=>d});var s=i("./src/WebGL/shaders/lib/blur/uniforms.ts"),o=i("./src/WebGL/shaders/lib/blur/blur.frag"),f=i("./src/WebGL/shaders/lib/blur/blur.vert");const d={fragmentShader:o.default,vertexShader:f.default,uniforms:s.uniforms}},"./src/WebGL/shaders/lib/blur/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>s});const s={}},"./src/WebGL/shaders/lib/index.ts":(n,t,i)=>{i.r(t),i.d(t,{ShaderLib:()=>me,basic:()=>s.basic,instanced:()=>o.instanced,lambert:()=>f.lambert,lambertdouble:()=>d.lambertdouble,outline:()=>p.outline,screen:()=>v.screen,screenaa:()=>_.screenaa,sphereimposter:()=>k.sphereimposter,sphereimposteroutline:()=>P.sphereimposteroutline,sprite:()=>L.sprite,stickimposter:()=>G.stickimposter,stickimposteroutline:()=>Z.stickimposteroutline,volumetric:()=>W.volumetric});var s=i("./src/WebGL/shaders/lib/basic/index.ts"),o=i("./src/WebGL/shaders/lib/instanced/index.ts"),f=i("./src/WebGL/shaders/lib/lambert/index.ts"),d=i("./src/WebGL/shaders/lib/lambertdouble/index.ts"),p=i("./src/WebGL/shaders/lib/outline/index.ts"),v=i("./src/WebGL/shaders/lib/screen/index.ts"),_=i("./src/WebGL/shaders/lib/screenaa/index.ts"),k=i("./src/WebGL/shaders/lib/sphereimposter/index.ts"),P=i("./src/WebGL/shaders/lib/sphereimposteroutline/index.ts"),L=i("./src/WebGL/shaders/lib/sprite/index.ts"),G=i("./src/WebGL/shaders/lib/stickimposter/index.ts"),Z=i("./src/WebGL/shaders/lib/stickimposteroutline/index.ts"),W=i("./src/WebGL/shaders/lib/volumetric/index.ts"),j=i("./src/WebGL/shaders/lib/ssao/index.ts"),H=i("./src/WebGL/shaders/lib/blur/index.ts");const me={basic:s.basic,blur:H.blur,instanced:o.instanced,lambert:f.lambert,lambertdouble:d.lambertdouble,outline:p.outline,screen:v.screen,screenaa:_.screenaa,ssao:j.ssao,sphereimposter:k.sphereimposter,sphereimposteroutline:P.sphereimposteroutline,sprite:L.sprite,stickimposter:G.stickimposter,stickimposteroutline:Z.stickimposteroutline,volumetric:W.volumetric}},"./src/WebGL/shaders/lib/instanced/index.ts":(n,t,i)=>{i.r(t),i.d(t,{instanced:()=>d});var s=i("./src/WebGL/shaders/lib/instanced/uniforms.ts"),o=i("./src/WebGL/shaders/lib/instanced/instanced.frag"),f=i("./src/WebGL/shaders/lib/instanced/instanced.vert");const d={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:f.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/instanced/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>o});var s=i("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambert/index.ts":(n,t,i)=>{i.r(t),i.d(t,{lambert:()=>d});var s=i("./src/WebGL/shaders/lib/lambert/uniforms.ts"),o=i("./src/WebGL/shaders/lib/lambert/lambert.frag"),f=i("./src/WebGL/shaders/lib/lambert/lambert.vert");const d={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:f.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/lambert/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>o});var s=i("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambertdouble/index.ts":(n,t,i)=>{i.r(t),i.d(t,{lambertdouble:()=>d});var s=i("./src/WebGL/shaders/lib/lambertdouble/uniforms.ts"),o=i("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag"),f=i("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert");const d={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:f.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/lambertdouble/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>o});var s=i("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/outline/index.ts":(n,t,i)=>{i.r(t),i.d(t,{outline:()=>d});var s=i("./src/WebGL/shaders/lib/outline/uniforms.ts"),o=i("./src/WebGL/shaders/lib/outline/outline.frag"),f=i("./src/WebGL/shaders/lib/outline/outline.vert");const d={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:f.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/outline/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>o});var s=i("./src/colors.ts");const o={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new s.Color(0,0,0)},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/screen/index.ts":(n,t,i)=>{i.r(t),i.d(t,{screen:()=>d});var s=i("./src/WebGL/shaders/lib/screen/uniforms.ts"),o=i("./src/WebGL/shaders/lib/screen/screen.frag"),f=i("./src/WebGL/shaders/lib/screen/screen.vert");const d={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:f.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/screen/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>s});const s={}},"./src/WebGL/shaders/lib/screenaa/index.ts":(n,t,i)=>{i.r(t),i.d(t,{screenaa:()=>d});var s=i("./src/WebGL/shaders/lib/screenaa/uniforms.ts"),o=i("./src/WebGL/shaders/lib/screenaa/screenaa.frag"),f=i("./src/WebGL/shaders/lib/screenaa/screenaa.vert");const d={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:f.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/screenaa/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>s});const s={}},"./src/WebGL/shaders/lib/sphereimposter/index.ts":(n,t,i)=>{i.r(t),i.d(t,{sphereimposter:()=>d});var s=i("./src/WebGL/shaders/lib/sphereimposter/uniforms.ts"),o=i("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag"),f=i("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert");const d={vertexShader:f.default.replace("#define GLSLIFY 1",""),fragmentShader:o.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/sphereimposter/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>o});var s=i("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/sphereimposteroutline/index.ts":(n,t,i)=>{i.r(t),i.d(t,{sphereimposteroutline:()=>d});var s=i("./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts"),o=i("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag"),f=i("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert");const d={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:f.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>o});var s=i("./src/colors.ts");const o={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new s.Color(0,0,0)},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/sprite/index.ts":(n,t,i)=>{i.r(t),i.d(t,{sprite:()=>d});var s=i("./src/WebGL/shaders/lib/sprite/uniforms.ts"),o=i("./src/WebGL/shaders/lib/sprite/sprite.frag"),f=i("./src/WebGL/shaders/lib/sprite/sprite.vert");const d={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:f.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/sprite/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>s});const s={}},"./src/WebGL/shaders/lib/ssao/index.ts":(n,t,i)=>{i.r(t),i.d(t,{ssao:()=>d});var s=i("./src/WebGL/shaders/lib/ssao/uniforms.ts"),o=i("./src/WebGL/shaders/lib/ssao/ssao.frag"),f=i("./src/WebGL/shaders/lib/ssao/ssao.vert");const d={fragmentShader:o.default,vertexShader:f.default,uniforms:s.uniforms}},"./src/WebGL/shaders/lib/ssao/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>s});const s={total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/stickimposter/index.ts":(n,t,i)=>{i.r(t),i.d(t,{stickimposter:()=>v});var s=i("./src/WebGL/shaders/lib/stickimposter/uniforms.ts"),o=i("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),f=i("./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag"),d=i("./src/WebGL/shaders/lib/stickimposter/stickimposter.vert");const v={fragmentShader:[o.default,f.default].join(`
`),vertexShader:d.default,uniforms:s.uniforms}},"./src/WebGL/shaders/lib/stickimposter/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>o});var s=i("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/stickimposteroutline/index.ts":(n,t,i)=>{i.r(t),i.d(t,{stickimposteroutline:()=>p});var s=i("./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts"),o=i("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),f=i("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert");const p={fragmentShader:o.default+"gl_FragColor = vec4(color,1.0);}",vertexShader:f.default,uniforms:s.uniforms}},"./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>o});var s=i("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new s.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/volumetric/index.ts":(n,t,i)=>{i.r(t),i.d(t,{volumetric:()=>d});var s=i("./src/WebGL/shaders/lib/volumetric/uniforms.ts"),o=i("./src/WebGL/shaders/lib/volumetric/volumetric.frag"),f=i("./src/WebGL/shaders/lib/volumetric/volumetric.vert");const d={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:f.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/volumetric/uniforms.ts":(n,t,i)=>{i.r(t),i.d(t,{uniforms:()=>o});var s=i("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}},"./src/WebGL/shaders/utils/clone.ts":(n,t,i)=>{i.r(t),i.d(t,{clone:()=>o});var s=i("./src/colors.ts");function o(f){let d={};for(const v in f){d[v]={},d[v].type=f[v].type;var p=f[v].value;p instanceof s.Color?d[v].value=p.clone():typeof p=="number"?d[v].value=p:p instanceof Array?d[v].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return d}},"./src/WebGL/shaders/utils/index.ts":(n,t,i)=>{i.r(t),i.d(t,{ShaderUtils:()=>o,clone:()=>s.clone});var s=i("./src/WebGL/shaders/utils/clone.ts");const o={clone:s.clone}},"./src/WebGL/shapes/Cylinder.ts":(n,t,i)=>{i.r(t),i.d(t,{Cylinder:()=>f});var s=i("./src/WebGL/math/index.ts");let o=new s.Vector3;class f{constructor(p=new s.Vector3,v=new s.Vector3,_=0){this.c1=p,this.c2=v,this.radius=_,this.direction=new s.Vector3().subVectors(this.c2,this.c1).normalize()}copy(p){return this.c1.copy(p.c1),this.c2.copy(p.c2),this.direction.copy(p.direction),this.radius=p.radius,this}lengthSq(){return o.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(p){return this.direction.add(this.c1).applyMatrix4(p),this.c1.applyMatrix4(p),this.c2.applyMatrix4(p),this.direction.sub(this.c1).normalize(),this.radius=this.radius*p.getMaxScaleOnAxis(),this}}},"./src/WebGL/shapes/Sphere.ts":(n,t,i)=>{i.r(t),i.d(t,{Sphere:()=>o});var s=i("./src/WebGL/math/index.ts");class o{constructor(d={x:0,y:0,z:0},p=0){this.center=new s.Vector3(d.x,d.y,d.z),this.radius=p}set(d,p){return this.center.copy(d),this.radius=p,this}copy(d){return this.center.copy(d.center),this.radius=d.radius,this}applyMatrix4(d){return this.center.applyMatrix4(d),this.radius=this.radius*d.getMaxScaleOnAxis(),this}translate(d){return this.center.add(d),this}equals(d){return d.center.equals(this.center)&&d.radius===this.radius}clone(){return new o().copy(this)}}},"./src/WebGL/shapes/Triangle.ts":(n,t,i)=>{i.r(t),i.d(t,{Triangle:()=>f});var s=i("./src/WebGL/math/index.ts");const o=new s.Vector3;class f{constructor(p=new s.Vector3,v=new s.Vector3,_=new s.Vector3){this.a=p,this.b=v,this.c=_}copy(p){return this.a.copy(p.a),this.b.copy(p.b),this.c.copy(p.c),this}applyMatrix4(p){return this.a.applyMatrix4(p),this.b.applyMatrix4(p),this.c.applyMatrix4(p),this}getNormal(){var p=this.a.clone();return p.sub(this.b),o.subVectors(this.c,this.b),p.cross(o),p.normalize(),p}}},"./src/WebGL/shapes/index.ts":(n,t,i)=>{i.r(t),i.d(t,{Cylinder:()=>o.Cylinder,Sphere:()=>s.Sphere,Triangle:()=>f.Triangle});var s=i("./src/WebGL/shapes/Sphere.ts"),o=i("./src/WebGL/shapes/Cylinder.ts"),f=i("./src/WebGL/shapes/Triangle.ts")},"./src/autoload.ts":(n,t,i)=>{i.r(t),i.d(t,{autoinit:()=>p,autoload:()=>k,processing_autoinit:()=>v,viewers:()=>_});var s=i("./src/GLViewer.ts"),o=i("./src/ProteinSurface4.ts"),f=i("./src/utilities.ts"),d=i("./src/colors.ts"),p=!1,v=!1,_={};function k(P,L){var G,Z,W;if(document.querySelector(".viewer_3Dmoljs")!=null&&(p=!0),p){v=!0,P=P??null;var j=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(H=>{var me=[],$e=[],De="";H.style.position=="static"&&(H.style.position="relative");var le=null;if(W=null,H.dataset.pdb)me.push("https://files.rcsb.org/view/"+H.dataset.pdb+".pdb"),$e.push("pdb");else if(H.dataset.cid)$e.push("sdf"),me.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+H.dataset.cid+"/SDF?record_type=3d");else if(H.dataset.href||H.dataset.url){if(H.dataset.href?De=H.dataset.href:De=H.dataset.url,me.push(De),W=De.substring(De.lastIndexOf(".")+1),W=="gz"){let ac=De.substring(0,De.lastIndexOf(".")).lastIndexOf(".");W=De.substring(ac+1)}$e.push(W);var Ce=De.substring(De.lastIndexOf("/")+1,De.lastIndexOf("."));Ce=="/"&&(Ce=De.substring(De.lastIndexOf("/")+1)),H.dataset[$e[$e.length-1]]=Ce}let Me=H.dataset;for(G in Me)G.substring(0,3)==="pdb"&&G!=="pdb"?(me.push("https://files.rcsb.org/view/"+Me[G]+".pdb"),$e.push("pdb")):G.substring(0,4)==="href"&&G!=="href"?(De=Me[G],me.push(De),$e.push(De.substring(De.lastIndexOf(".")+1))):G.substring(0,3)==="cid"&&G!=="cid"&&(me.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+Me[G]+"/SDF?record_type=3d"),$e.push("sdf"));var _n={};H.dataset.options&&(_n=(0,f.specStringToObject)(H.dataset.options));var _i=d.CC.color(H.dataset.backgroundcolor),ll=H.dataset.backgroundalpha;ll=ll==null?1:parseFloat(ll);var _l={line:{}};H.dataset.style&&(_l=(0,f.specStringToObject)(H.dataset.style));var oa={};H.dataset.select&&(oa=(0,f.specStringToObject)(H.dataset.select));var Ru=[],ga=[],_s=[],Sa={},Ra=null,Da=H.dataset,Fa=/style(.+)/,Na=/surface(.*)/,_a=/labelres(.*)/,Pa=[];for(Z in Da)Object.prototype.hasOwnProperty.call(Da,Z)&&Pa.push(Z);for(Pa.sort(),G=0;G<Pa.length;G++){Z=Pa[G];var qc=Fa.exec(Z),uf,_h,Uh;qc&&(uf="select"+qc[1],_h=(0,f.specStringToObject)(Da[uf]),Uh=(0,f.specStringToObject)(Da[Z]),Ru.push([_h,Uh])),qc=Na.exec(Z),qc&&(uf="select"+qc[1],_h=(0,f.specStringToObject)(Da[uf]),Uh=(0,f.specStringToObject)(Da[Z]),ga.push([_h,Uh])),qc=_a.exec(Z),qc&&(uf="select"+qc[1],_h=(0,f.specStringToObject)(Da[uf]),Uh=(0,f.specStringToObject)(Da[Z]),_s.push([_h,Uh])),Z=="zoomto"&&(Sa=(0,f.specStringToObject)(Da[Z])),Z=="spin"&&(Ra=(0,f.specStringToObject)(Da[Z]))}var Kd=function(ac){for(ac.setStyle(oa,_l),le&&le.createSelectionAndStyle(oa,_l),G=0;G<Ru.length;G++){let fc=Ru[G][0]||{},nd=Ru[G][1]||{line:{}};ac.setStyle(fc,nd),le&&le.createSelectionAndStyle(oa,_l)}for(G=0;G<ga.length;G++){let fc=ga[G][0]||{},nd=ga[G][1]||{};le?ac.addSurface(o.SurfaceType.VDW,nd,fc,fc).then(_1=>{le.loadSurface("VDW",fc,nd,_1)}):ac.addSurface(o.SurfaceType.VDW,nd,fc,fc)}for(G=0;G<_s.length;G++){let fc=_s[G][0]||{},nd=_s[G][1]||{};ac.addResLabels(fc,nd)}ac.render(),ac.zoomTo(Sa),Ra&&ac.spin(Ra.axis,Ra.speed)};let ud=P;try{var sc=(0,f.specStringToObject)(H.dataset.config)||{};sc.backgroundColor===void 0&&(sc.backgroundColor=_i),sc.backgroundAlpha===void 0&&(sc.backgroundAlpha=ll),ud==null?ud=_[H.id||j++]=(0,s.createViewer)(H,sc):(ud.setBackgroundColor(_i,ll),ud.setConfig(sc),le&&le.initiateUI()),H.dataset.ui&&$3Dmol.StateManager&&(le=new $3Dmol.StateManager(ud))}catch(ac){console.log(ac),H.textContent="WebGL appears to be disabled."}if(me.length!=0){let ac=0,fc=((nd,a0)=>function(_1){De=me[ac];var _$=nd.dataset.type||nd.dataset.datatype||$e[ac];if(a0.addModel(_1,_$,_n),le){var $b=nd.dataset[$e[ac]];le.setModelTitle($b)}ac+=1,ac<me.length?(0,f.get)(me[ac]).then(fc):(Kd(a0),nd.dataset.callback&&(0,f.makeFunction)(nd.dataset.callback)(a0),v=!1,L&&L(a0))})(H,ud);W&&W.endsWith("gz")?(0,f.getbin)(me[0]).then(fc):(0,f.get)(me[0]).then(fc)}else{if(H.dataset.element){var Yd="#"+H.dataset.element,wg=document.querySelector(Yd),Pf=wg?wg.textContent:"";W=H.dataset.type||H.dataset.datatype,ud.addModel(Pf,W,_n)}Kd(ud),H.dataset.callback&&(0,f.makeFunction)(H.dataset.callback)(ud),v=!1,L&&L(ud)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&k()}},"./src/colors.ts":(n,t,i)=>{i.r(t),i.d(t,{CC:()=>o,Color:()=>s,builtinColorSchemes:()=>P,chains:()=>k,elementColors:()=>v,htmlColors:()=>f,residues:()=>_,ssColors:()=>d});class s{constructor(G,Z,W){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof G=="number"?(this.r=G||0,this.g=Z||0,this.b=W||0,this):this.set(G||0)}set(G){return G instanceof s?G.clone():(typeof G=="number"?this.setHex(G):typeof G=="object"&&(this.r=(G==null?void 0:G.r)||0,this.g=(G==null?void 0:G.g)||0,this.b=(G==null?void 0:G.b)||0),this)}setHex(G){return G=Math.floor(G),this.r=(G>>16&255)/255,this.g=(G>>8&255)/255,this.b=(G&255)/255,this}getHex(){var G=Math.round(this.r*255),Z=Math.round(this.g*255),W=Math.round(this.b*255);return G<<16|Z<<8|W}clone(){return new s(this.r,this.g,this.b)}copy(G){return this.r=G.r,this.g=G.g,this.b=G.b,this}scaled(){var G={};return G.r=Math.round(this.r*255),G.g=Math.round(this.g*255),G.b=Math.round(this.b*255),G.a=1,G}}class o{static color(G){if(!G)return o.cache[0];if(G instanceof s)return G;if(typeof G=="number"&&typeof o.cache[G]<"u")return o.cache[G];if(G&&Array.isArray(G))return G.map(o.color);let Z=o.getHex(G),W=new s(Z);return o.cache[Z]=W,W}static getHex(G){var Z;if(Array.isArray(G))return G.map(o.getHex);if(typeof G=="string"){let W=G;if(!isNaN(parseInt(W)))return parseInt(W);if(W=W.trim(),W.length==4&&W[0]=="#"&&(W="#"+W[1]+W[1]+W[2]+W[2]+W[3]+W[3]),W.length==7&&W[0]=="#")return parseInt(W.substring(1),16);let j=o.rgbRegEx.exec(W);if(j){j[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let H=0;for(let me=2;me<5;me++){H*=256;let $e=j[me].endsWith("%")?255*parseFloat(j[me])/100:parseFloat(j[me]);H+=Math.round($e)}return H}return((Z=window==null?void 0:window.$3Dmol)===null||Z===void 0?void 0:Z.htmlColors[G.toLowerCase()])||0}return G}}o.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,o.cache={0:new s(0)};const f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},d={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},p={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},v={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:p,defaultColors:Object.assign({},p),greenCarbon:Object.assign(Object.assign({},p),{C:65280}),cyanCarbon:Object.assign(Object.assign({},p),{C:65535}),magentaCarbon:Object.assign(Object.assign({},p),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},p),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},p),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},p),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},p),{C:8388736}),blueCarbon:Object.assign(Object.assign({},p),{C:255})},_={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},k={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},P={ssPyMol:{prop:"ss",map:d.pyMol},ssJmol:{prop:"ss",map:d.Jmol},Jmol:{prop:"elem",map:v.Jmol},amino:{prop:"resn",map:_.amino},shapely:{prop:"resn",map:_.shapely},nucleic:{prop:"resn",map:_.nucleic},chain:{prop:"chain",map:k.atom},rasmol:{prop:"elem",map:v.rasmol},default:{prop:"elem",map:v.defaultColors},greenCarbon:{prop:"elem",map:v.greenCarbon},chainHetatm:{prop:"chain",map:k.hetatm},cyanCarbon:{prop:"elem",map:v.cyanCarbon},magentaCarbon:{prop:"elem",map:v.magentaCarbon},purpleCarbon:{prop:"elem",map:v.purpleCarbon},whiteCarbon:{prop:"elem",map:v.whiteCarbon},orangeCarbon:{prop:"elem",map:v.orangeCarbon},yellowCarbon:{prop:"elem",map:v.yellowCarbon},blueCarbon:{prop:"elem",map:v.blueCarbon}}},"./src/glcartoon.ts":(n,t,i)=>{i.r(t),i.d(t,{drawCartoon:()=>oa,subdivide_spline:()=>k});var s=i("./src/WebGL/math/index.ts"),o=i("./src/WebGL/shapes/index.ts"),f=i("./src/WebGL/index.ts"),d=i("./src/Gradient.ts"),p=i("./src/colors.ts"),v=i("./src/GLDraw.ts"),_=i("./src/utilities.ts");function k(Ru,ga){var _s=[],Sa=Ru;Sa=[],Sa.push(Ru[0]);var Ra,Da,Fa,Na,_a,Pa,qc,uf,_h;for(Ra=1,Da=Ru.length-1;Ra<Da;Ra++)if(_a=Ru[Ra],Pa=Ru[Ra+1],_a.smoothen){var Uh=new s.Vector3((_a.x+Pa.x)/2,(_a.y+Pa.y)/2,(_a.z+Pa.z)/2);Uh.atom=_a.atom,Sa.push(Uh)}else Sa.push(_a);for(Sa.push(Ru[Ru.length-1]),Ra=-1,Fa=Sa.length;Ra<=Fa-3;Ra++)if(Na=Sa[Ra===-1?0:Ra],_a=Sa[Ra+1],Pa=Sa[Ra+2],qc=Sa[Ra===Fa-3?Fa-1:Ra+3],uf=new s.Vector3().subVectors(Pa,Na).multiplyScalar(.5),_h=new s.Vector3().subVectors(qc,_a).multiplyScalar(.5),!Pa.skip)for(var Kd=0;Kd<ga;Kd++){var ud=1/ga*Kd,sc=_a.x+ud*uf.x+ud*ud*(-3*_a.x+3*Pa.x-2*uf.x-_h.x)+ud*ud*ud*(2*_a.x-2*Pa.x+uf.x+_h.x),Yd=_a.y+ud*uf.y+ud*ud*(-3*_a.y+3*Pa.y-2*uf.y-_h.y)+ud*ud*ud*(2*_a.y-2*Pa.y+uf.y+_h.y),wg=_a.z+ud*uf.z+ud*ud*(-3*_a.z+3*Pa.z-2*uf.z-_h.z)+ud*ud*ud*(2*_a.z-2*Pa.z+uf.z+_h.z),Pf=new s.Vector3(sc,Yd,wg);Kd<ga/2?Pf.atom=_a.atom:Pf.atom=Pa.atom,_s.push(Pf)}return _s.push(Sa[Sa.length-1]),_s}const P=.5,L=1.3,G=.8,Z=.4,W=.4;function j(Ru,ga,_s,Sa){for(var Ra,Da,Fa,Na,_a=0,Pa=ga.length;_a<Pa;_a++){Na=Math.round(_a*(Sa.length-1)/Pa),Fa=p.CC.color(Sa[Na]);var qc=Ru.updateGeoGroup(2),uf=qc.vertexArray,_h=qc.colorArray,Uh=qc.faceArray;Ra=qc.vertices,Da=Ra*3,uf[Da]=ga[_a].x,uf[Da+1]=ga[_a].y,uf[Da+2]=ga[_a].z,uf[Da+3]=_s[_a].x,uf[Da+4]=_s[_a].y,uf[Da+5]=_s[_a].z;for(var Kd=0;Kd<6;++Kd)_h[Da+3*Kd]=Fa.r,_h[Da+1+3*Kd]=Fa.g,_h[Da+2+3*Kd]=Fa.b;if(_a>0){var ud=[Ra,Ra+1,Ra-1,Ra-2],sc=qc.faceidx;Uh[sc]=ud[0],Uh[sc+1]=ud[1],Uh[sc+2]=ud[3],Uh[sc+3]=ud[1],Uh[sc+4]=ud[2],Uh[sc+5]=ud[3],qc.faceidx+=6}qc.vertices+=2}}function H(Ru,ga,_s,Sa,Ra,Da,Fa){var Na,_a,Pa,qc;if(Pa=ga.length,Pa<2||ga[0].length<2)return;for(Na=0;Na<Pa;Na++)ga[Na]=k(ga[Na],Sa);if(qc=ga[0].length,!Ra)return j(Ru,ga[0],ga[Pa-1],_s);var uf,_h,Uh,Kd,ud,sc,Yd=[],wg=[],Pf=[];for(_a=0;_a<Pa;_a++)Yd.push(.25+1.5*Math.sqrt((Pa-1)*_a-Math.pow(_a,2))/(Pa-1)),wg.push(.5),Pf.push(2*(Math.pow(_a/Pa,2)-_a/Pa)+.6);var ac=[];for(_a=0;_a<Pa*2-1;_a++)ac[_a]=[_a,_a+1,_a+1-2*Pa,_a-2*Pa];ac[Pa*2-1]=[_a,_a+1-2*Pa,_a+1-4*Pa,_a-2*Pa];var fc,nd,a0,_1,_$,$b,Z_,_b,cb,ib;let _2=Ru.updateGeoGroup();for(Na=0;Na<qc;Na++){let Jc=Ru.groups,ih=!1;_2=Ru.updateGeoGroup(2*Pa),Jc!=Ru.groups&&Na>0&&(Na=Na-1,ih=!0),$b=Math.round(Na*(_s.length-1)/qc),_$=p.CC.color(_s[$b]),ud=Uh,sc=Kd,Uh=[],Kd=[],uf=[],ga[0][Na].atom!==void 0&&(_1=ga[0][Na].atom,Fa==="oval"?_h=Yd:Fa==="rectangle"?_h=wg:Fa==="parabola"&&(_h=Pf)),_h||(_h=wg);var Nb,_D;for(_a=0;_a<Pa;_a++)Na<qc-1?Nb=ga[_a][Na+1].clone().sub(ga[_a][Na]):Nb=ga[_a][Na-1].clone().sub(ga[_a][Na]).negate(),_a<Pa-1?_D=ga[_a+1][Na].clone().sub(ga[_a][Na]):_D=ga[_a-1][Na].clone().sub(ga[_a][Na]).negate(),uf[_a]=_D.cross(Nb).normalize().multiplyScalar(Ra*_h[_a]);for(_a=0;_a<Pa;_a++)Uh[_a]=ga[_a][Na].clone().add(uf[_a].clone().negate());for(_a=0;_a<Pa;_a++)Kd[_a]=ga[_a][Na].clone().add(uf[_a]);for(Z_=_2.vertexArray,_b=_2.colorArray,cb=_2.faceArray,fc=_2.vertices,nd=fc*3,_a=0;_a<Pa;_a++)Z_[nd+3*_a+0]=Uh[_a].x,Z_[nd+3*_a+1]=Uh[_a].y,Z_[nd+3*_a+2]=Uh[_a].z;for(_a=0;_a<Pa;_a++)Z_[nd+3*_a+0+3*Pa]=Kd[Pa-1-_a].x,Z_[nd+3*_a+1+3*Pa]=Kd[Pa-1-_a].y,Z_[nd+3*_a+2+3*Pa]=Kd[Pa-1-_a].z;for(_a=0;_a<2*Pa;++_a)_b[nd+3*_a+0]=_$.r,_b[nd+3*_a+1]=_$.g,_b[nd+3*_a+2]=_$.b;if(Na>0&&!ih){for(_a=0;_a<Pa*2;_a++)ib=[fc+ac[_a][0],fc+ac[_a][1],fc+ac[_a][2],fc+ac[_a][3]],a0=_2.faceidx,cb[a0]=ib[0],cb[a0+1]=ib[1],cb[a0+2]=ib[3],cb[a0+3]=ib[1],cb[a0+4]=ib[2],cb[a0+5]=ib[3],_2.faceidx+=6;if(_1.clickable||_1.hoverable){var ec=[];ec.push(new o.Triangle(ud[0],Uh[0],Uh[Pa-1])),ec.push(new o.Triangle(ud[0],Uh[Pa-1],ud[Pa-1])),ec.push(new o.Triangle(ud[Pa-1],Uh[Pa-1],Kd[Pa-1])),ec.push(new o.Triangle(ud[Pa-1],Kd[Pa-1],sc[Pa-1])),ec.push(new o.Triangle(Kd[0],sc[0],sc[Pa-1])),ec.push(new o.Triangle(Kd[Pa-1],Kd[0],sc[Pa-1])),ec.push(new o.Triangle(Uh[0],ud[0],sc[0])),ec.push(new o.Triangle(Kd[0],Uh[0],sc[0]));for(_a in ec)_1.intersectionShape.triangle.push(ec[_a])}}_2.vertices+=2*Pa}for(Z_=_2.vertexArray,_b=_2.colorArray,cb=_2.faceArray,fc=_2.vertices,nd=fc*3,a0=_2.faceidx,Na=0;Na<Pa-1;Na++)ib=[Na,Na+1,2*Pa-2-Na,2*Pa-1-Na],a0=_2.faceidx,cb[a0]=ib[0],cb[a0+1]=ib[1],cb[a0+2]=ib[3],cb[a0+3]=ib[1],cb[a0+4]=ib[2],cb[a0+5]=ib[3],_2.faceidx+=6;for(Na=0;Na<Pa-1;Na++)ib=[fc-1-Na,fc-2-Na,fc-2*Pa+Na+1,fc-2*Pa+Na],a0=_2.faceidx,cb[a0]=ib[0],cb[a0+1]=ib[1],cb[a0+2]=ib[3],cb[a0+3]=ib[1],cb[a0+4]=ib[2],cb[a0+5]=ib[3],_2.faceidx+=6}function me(Ru,ga,_s,Sa,Ra,Da){if(!(ga.length<2)){var Fa,Na;if(Fa=ga[0],Na=ga[ga.length-1],Fa=k(Fa,Sa),Na=k(Na,Sa),!Ra)return j(Ru,Fa,Na,_s);var _a=[],Pa,qc,uf,_h,Uh,Kd=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]],ud,sc,Yd,wg,Pf,ac,fc,nd,a0,_1,_$,$b,Z_,_b,cb,ib,_2;for(nd=0,a0=Fa.length;nd<a0;nd++){if(Pf=Math.round(nd*(_s.length-1)/a0),wg=p.CC.color(_s[Pf]),_a.push(qc=Fa[nd]),_a.push(qc),_a.push(uf=Na[nd]),_a.push(uf),nd<a0-1){var Nb=Fa[nd+1].clone().sub(Fa[nd]),_D=Na[nd].clone().sub(Fa[nd]);Pa=_D.cross(Nb).normalize().multiplyScalar(Ra)}for(_a.push(_h=Fa[nd].clone().add(Pa)),_a.push(_h),_a.push(Uh=Na[nd].clone().add(Pa)),_a.push(Uh),qc.atom!==void 0&&(ac=qc.atom),_b=Ru.updateGeoGroup(8),cb=_b.vertexArray,ib=_b.colorArray,_2=_b.faceArray,ud=_b.vertices,sc=ud*3,cb[sc]=qc.x,cb[sc+1]=qc.y,cb[sc+2]=qc.z,cb[sc+3]=qc.x,cb[sc+4]=qc.y,cb[sc+5]=qc.z,cb[sc+6]=uf.x,cb[sc+7]=uf.y,cb[sc+8]=uf.z,cb[sc+9]=uf.x,cb[sc+10]=uf.y,cb[sc+11]=uf.z,cb[sc+12]=_h.x,cb[sc+13]=_h.y,cb[sc+14]=_h.z,cb[sc+15]=_h.x,cb[sc+16]=_h.y,cb[sc+17]=_h.z,cb[sc+18]=Uh.x,cb[sc+19]=Uh.y,cb[sc+20]=Uh.z,cb[sc+21]=Uh.x,cb[sc+22]=Uh.y,cb[sc+23]=Uh.z,_1=0;_1<8;++_1)ib[sc+3*_1]=wg.r,ib[sc+1+3*_1]=wg.g,ib[sc+2+3*_1]=wg.b;if(nd>0){var ec=fc!==void 0&&ac!==void 0&&fc.serial!==ac.serial;for(_1=0;_1<4;_1++){var Jc=[ud+Kd[_1][0],ud+Kd[_1][1],ud+Kd[_1][2],ud+Kd[_1][3]];if(Yd=_b.faceidx,_2[Yd]=Jc[0],_2[Yd+1]=Jc[1],_2[Yd+2]=Jc[3],_2[Yd+3]=Jc[1],_2[Yd+4]=Jc[2],_2[Yd+5]=Jc[3],_b.faceidx+=6,ac.clickable||fc.clickable||ac.hoverable||fc.hoverable){var ih=_a[Jc[3]].clone(),Bd=_a[Jc[0]].clone(),xg=_a[Jc[2]].clone(),hb=_a[Jc[1]].clone();if(ih.atom=_a[Jc[3]].atom||null,xg.atom=_a[Jc[2]].atom||null,Bd.atom=_a[Jc[0]].atom||null,hb.atom=_a[Jc[1]].atom||null,ec){var _S=ih.clone().add(Bd).multiplyScalar(.5),rc=xg.clone().add(hb).multiplyScalar(.5),e0=ih.clone().add(hb).multiplyScalar(.5);_1%2===0?((fc.clickable||fc.hoverable)&&(_$=new o.Triangle(_S,e0,ih),$b=new o.Triangle(rc,xg,e0),Z_=new o.Triangle(e0,xg,ih),fc.intersectionShape.triangle.push(_$),fc.intersectionShape.triangle.push($b),fc.intersectionShape.triangle.push(Z_)),(ac.clickable||ac.hoverable)&&(_$=new o.Triangle(Bd,hb,e0),$b=new o.Triangle(hb,rc,e0),Z_=new o.Triangle(Bd,e0,_S),ac.intersectionShape.triangle.push(_$),ac.intersectionShape.triangle.push($b),ac.intersectionShape.triangle.push(Z_))):((ac.clickable||ac.hoverable)&&(_$=new o.Triangle(_S,e0,ih),$b=new o.Triangle(rc,xg,e0),Z_=new o.Triangle(e0,xg,ih),ac.intersectionShape.triangle.push(_$),ac.intersectionShape.triangle.push($b),ac.intersectionShape.triangle.push(Z_)),(fc.clickable||fc.hoverable)&&(_$=new o.Triangle(Bd,hb,e0),$b=new o.Triangle(hb,rc,e0),Z_=new o.Triangle(Bd,e0,_S),fc.intersectionShape.triangle.push(_$),fc.intersectionShape.triangle.push($b),fc.intersectionShape.triangle.push(Z_)))}else(ac.clickable||ac.hoverable)&&(_$=new o.Triangle(Bd,hb,ih),$b=new o.Triangle(hb,xg,ih),ac.intersectionShape.triangle.push(_$),ac.intersectionShape.triangle.push($b))}}}_b.vertices+=8,fc=ac}var b0=_a.length-8;for(_b=Ru.updateGeoGroup(8),cb=_b.vertexArray,ib=_b.colorArray,_2=_b.faceArray,ud=_b.vertices,sc=ud*3,Yd=_b.faceidx,nd=0;nd<4;nd++){_a.push(_a[nd*2]),_a.push(_a[b0+nd*2]);var nb=_a[nd*2],vf=_a[b0+nd*2];cb[sc+6*nd]=nb.x,cb[sc+1+6*nd]=nb.y,cb[sc+2+6*nd]=nb.z,cb[sc+3+6*nd]=vf.x,cb[sc+4+6*nd]=vf.y,cb[sc+5+6*nd]=vf.z,ib[sc+6*nd]=wg.r,ib[sc+1+6*nd]=wg.g,ib[sc+2+6*nd]=wg.b,ib[sc+3+6*nd]=wg.r,ib[sc+4+6*nd]=wg.g,ib[sc+5+6*nd]=wg.b}b0+=8,_$=[ud,ud+2,ud+6,ud+4],$b=[ud+1,ud+5,ud+7,ud+3],_2[Yd]=_$[0],_2[Yd+1]=_$[1],_2[Yd+2]=_$[3],_2[Yd+3]=_$[1],_2[Yd+4]=_$[2],_2[Yd+5]=_$[3],_2[Yd+6]=$b[0],_2[Yd+7]=$b[1],_2[Yd+8]=$b[3],_2[Yd+9]=$b[1],_2[Yd+10]=$b[2],_2[Yd+11]=$b[3],_b.faceidx+=12,_b.vertices+=8}}function $e(Ru,ga,_s,Sa,Ra,Da,Fa){(!Fa||Fa==="default")&&(Fa="rectangle"),Fa==="edged"?me(Ru,ga,_s,Sa,Ra):(Fa==="rectangle"||Fa==="oval"||Fa==="parabola")&&H(Ru,ga,_s,Sa,Ra,Da,Fa)}function De(Ru){return Ru&&Ru.elem==="C"&&Ru.atom==="CA"}function le(Ru,ga){if(Ru&&ga&&Ru.chain===ga.chain){if(!Ru.hetflag&&!ga.hetflag&&Ru.reschain===ga.reschain&&(Ru.resi===ga.resi||Ru.resi===ga.resi-1))return!0;if(Ru.resi<ga.resi){var _s=Ru.x-ga.x,Sa=Ru.y-ga.y,Ra=Ru.z-ga.z,Da=_s*_s+Sa*Sa+Ra*Ra;if(Ru.atom=="CA"&&ga.atom=="CA"&&Da<16)return!0;if((Ru.atom=="P"||ga.atom=="P")&&Da<64)return!0}}return!1}function Ce(Ru,ga,_s,Sa,Ra){if(!(ga==null||ga.vertices==0)){Ra&&(ga.initTypedArrays(),ga.setUpNormals());var Da=new f.MeshDoubleLambertMaterial;Da.vertexColors=f.Coloring.FaceColors,typeof _s=="number"&&_s>=0&&_s<1&&(Da.transparent=!0,Da.opacity=_s),Da.outline=Sa;var Fa=new f.Mesh(ga,Da);Ru.add(Fa)}}function Me(Ru,ga,_s,Sa,Ra,Da,Fa,Na,_a){var Pa,qc,uf,_h,Uh,Kd;if(!(!Sa||!Ra||!Fa)){var ud=Ra.sub(Sa);ud.normalize();var sc=Na[_a];for(qc=_a+1;qc<Na.length&&(sc=Na[qc],sc.atom!=Fa.atom);qc++);if(sc=sc?new s.Vector3(sc.x,sc.y,sc.z):new s.Vector3(0,0,0),sc.sub(Sa),Fa.ss==="arrow start"){var Yd=sc.clone().multiplyScalar(.3).cross(Ra);Sa.add(Yd);var wg=sc.clone().cross(ud).normalize();ud.rotateAboutVector(wg,.43)}for(Fa.style.cartoon.ribbon?Pa=Fa.style.cartoon.thickness||Z:Fa.style.cartoon.width?Pa=Fa.style.cartoon.width:Fa.ss==="c"?Fa.atom==="P"?Pa=G:Pa=P:Fa.ss==="arrow start"?(Pa=L,Uh=!0):Fa.ss==="arrow end"||Fa.ss==="h"&&Fa.style.cartoon.tubes||Fa.ss==="tube start"?Pa=P:Pa=L,Da!=null&&ud.dot(Da)<0&&ud.negate(),ud.multiplyScalar(Pa),qc=0;qc<ga;qc++)uf=-1+qc*2/(ga-1),_h=new s.Vector3(Sa.x+uf*ud.x,Sa.y+uf*ud.y,Sa.z+uf*ud.z),_h.atom=Fa,Fa.ss==="s"&&(_h.smoothen=!0),Ru[qc].push(_h);if(Uh)for(ud.multiplyScalar(2),qc=0;qc<ga;qc++)uf=-1+qc*2/(ga-1),_h=new s.Vector3(Sa.x+uf*ud.x,Sa.y+uf*ud.y,Sa.z+uf*ud.z),_h.atom=Fa,_h.smoothen=!1,_h.skip=!0,Ru[qc].push(_h);return Kd=Fa.style.cartoon.style||"default",Ru.style?Ru.style!=Kd&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),Ru.style="default"):Ru.style=Kd,(Fa.ss==="arrow start"||Fa.ss==="arrow end")&&(Fa.ss="s"),Uh}}const _n={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},_i={DA:!0,DG:!0,A:!0,G:!0},ll={DT:!0,DC:!0,U:!0,C:!0,T:!0},_l={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function oa(Ru,ga,_s,Sa=10){let Ra=Sa,Da=Sa;var Fa,Na,_a,Pa,qc,uf,_h,Uh,Kd,ud,sc,Yd,wg,Pf,ac,fc,nd,a0,_1=new f.Geometry(!0),_$=new f.Geometry(!0),$b=[],Z_=[],_b=1,cb=!1,ib={};for(var _2 in d.Gradient.builtinGradients)d.Gradient.builtinGradients.hasOwnProperty(_2)&&(ib[_2]=new d.Gradient.builtinGradients[_2](_s[1],_s[0]));var Nb=function(Ba,$_){return _s&&$_.color==="spectrum"?$_.colorscheme in ib?ib[$_.colorscheme].valueToHex(Ba.resi):ib.sinebow.valueToHex(Ba.resi):(0,_.getColorFromStyle)(Ba,$_).getHex()};for(Uh=0;Uh<Ra;Uh++)Z_[Uh]=[];var _D=!1,ec=!1,Jc=[];for(Uh in ga){if(Pa=ga[Uh],Pa.elem==="C"&&Pa.atom==="CA"){var ih=le(_a,Pa);ih&&Pa.ss==="s"?_D=!0:_D&&(_a&&Na&&_a.style.cartoon.arrows&&Na.style.cartoon.arrows&&(_a.ss="arrow end",Na.ss="arrow start"),_D=!1),ih&&(_a.ss==="h"||_a.ss=="tube start")&&_a.style.cartoon.tubes?!ec&&_a.ss!="tube start"&&Pa.style.cartoon.tubes&&(Pa.ss="tube start",ec=!0):ec&&(_a.ss==="tube start"?_a.ss="tube end":Na&&Na.style.cartoon.tubes&&(Na.ss="tube end"),ec=!1),Na=_a,_a=Pa}Pa&&Pa.atom in _n&&Jc.push(Pa)}ec&&_a.style.cartoon.tubes&&(_a.ss="tube end",ec=!1);var Bd=function(Ba){Z_[0].length>0&&$e(_$,Z_,$b,Da,_h,_b,Z_.style);var $_=[],_A=null;if(Ba){for(Uh=0;Uh<Ra;Uh++)$_[Uh]=Z_[Uh][Z_[Uh].length-1];_A=$b[$b.length-1]}for(Z_=[],Uh=0;Uh<Ra;Uh++)Z_[Uh]=[];if($b=[],Ba){for(Uh=0;Uh<Ra;Uh++)Z_[Uh].push($_[Uh]);$b.push(_A)}Ce(Ru,_$,_b,cb,!0),Ce(Ru,_1,_b,cb,!1),_$=new f.Geometry(!0),_1=new f.Geometry(!0)};_a=void 0;for(var xg=0;xg<Jc.length;xg++){Pa=Jc[xg];var hb=Pa.resn.trim(),_S=hb in _l;if(_b=1,Fa=Pa.style.cartoon,_a&&_a.style.cartoon&&(_b=_a.style.cartoon.opacity),_a&&_a.style.cartoon&&_a.style.cartoon.outline&&(cb=_a.style.cartoon.outline),_a&&_a.style.cartoon&&(!Pa.style.cartoon||_a.style.cartoon.opacity!=Pa.style.cartoon.opacity)&&Bd(_a.chain==Pa.chain),Fa.style==="trace"){if(!Pa.hetflag){if(Pa.elem==="C"&&Pa.atom==="CA"||_S&&Pa.atom==="P"||Pa.atom==="BB"){if(uf=Nb(Pa,Fa),(0,_.isNumeric)(Fa.thickness)?_h=Fa.thickness:_h=Z,le(_a,Pa))if(uf==qc){var rc=p.CC.color(uf);v.GLDraw.drawCylinder(_1,_a,Pa,_h,rc,2,2)}else{var e0=new s.Vector3().addVectors(_a,Pa).multiplyScalar(.5),b0=p.CC.color(qc),nb=p.CC.color(uf);v.GLDraw.drawCylinder(_1,_a,e0,_h,b0,2,0),v.GLDraw.drawCylinder(_1,e0,Pa,_h,nb,0,2)}if((Pa.clickable===!0||Pa.hoverable)&&Pa.intersectionShape!==void 0){var vf=new s.Vector3(Pa.x,Pa.y,Pa.z);Pa.intersectionShape.sphere.push(new o.Sphere(vf,_h))}_a=Pa,qc=uf}}}else{if(De(Pa)||_S&&(Pa.atom==="P"||Pa.atom.indexOf("O5")==0)){if(a0)if(Pa.ss==="tube end")a0=!1,nd=new s.Vector3(Pa.x,Pa.y,Pa.z),v.GLDraw.drawCylinder(_1,fc,nd,2,p.CC.color(qc),1,1),Pa.ss="h";else if(_a.chain!=Pa.chain||_a.ss==="tube end")a0=!1,_a.ss="h",nd=new s.Vector3(_a.x,_a.y,_a.z),v.GLDraw.drawCylinder(_1,fc,nd,2,p.CC.color(qc),1,1);else continue;if(_a&&(!le(_a,Pa)||_a.ss==="tube start")){for(_a.ss==="tube start"&&(a0=!0,fc=new s.Vector3(_a.x,_a.y,_a.z),_a.ss="h"),ac&&(Yd?Pf=new s.Vector3().addVectors(_a,Yd).multiplyScalar(.5):Pf=new s.Vector3(_a.x,_a.y,_a.z),v.GLDraw.drawCylinder(_1,Pf,ac,W,p.CC.color(ac.color),0,2),Me(Z_,Ra,!0,Yd,wg,sc,_a,Jc,xg),$b.push(uf),Pf=null,ac=null),Z_[0].length>0&&$e(_$,Z_,$b,Da,_h,_b,Z_.style),Z_=[],Uh=0;Uh<Ra;Uh++)Z_[Uh]=[];$b=[]}if(_a===void 0||_a.rescode!=Pa.rescode||_a.resi!=Pa.resi){if(ac&&_a!=null){Pf=new s.Vector3().addVectors(_a,Pa).multiplyScalar(.5);var c0=Pf.clone().sub(ac).multiplyScalar(.02);Pf.add(c0),v.GLDraw.drawCylinder(_1,Pf,ac,W,p.CC.color(ac.color),0,2),Pf=null,ac=null}uf=Nb(Pa,Fa),$b.push(uf),(0,_.isNumeric)(Fa.thickness)?_h=Fa.thickness:_h=Z,_a=Pa,Kd=new s.Vector3(_a.x,_a.y,_a.z),Kd.resi=_a.resi,qc=uf}(Pa.clickable===!0||Pa.hoverable===!0)&&(Pa.intersectionShape===void 0||Pa.intersectionShape.triangle===void 0)&&(Pa.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else _a!=null&&(De(_a)&&Pa.atom==="O"||_S&&_a.atom==="P"&&(Pa.atom==="OP2"||Pa.atom==="O2P")||_S&&_a.atom.indexOf("O5")==0&&Pa.atom.indexOf("C5")==0)?(ud=new s.Vector3(Pa.x,Pa.y,Pa.z),ud.resi=Pa.resi,(Pa.atom==="OP2"||Pa.atom==="O2P")&&(wg=new s.Vector3(Pa.x,Pa.y,Pa.z))):_S&&Pa.atom.indexOf("O3")==0?Yd=new s.Vector3(Pa.x,Pa.y,Pa.z):(Pa.atom==="N1"&&hb in _i||Pa.atom==="N3"&&hb in ll)&&(ac=new s.Vector3(Pa.x,Pa.y,Pa.z),ac.color=(0,_.getColorFromStyle)(Pa,Fa).getHex());ud&&Kd&&ud.resi===Kd.resi&&(Me(Z_,Ra,!0,Kd,ud,sc,_a,Jc,xg),sc=ud,Kd=null,ud=null,$b.push(uf))}}ac&&(Yd?Pf=new s.Vector3().addVectors(_a,Yd).multiplyScalar(.5):Pf=new s.Vector3(_a.x,_a.y,_a.z),v.GLDraw.drawCylinder(_1,Pf,ac,W,p.CC.color(ac.color),0,2),Me(Z_,Ra,!0,Yd,wg,sc,_a,Jc,xg),$b.push(uf)),Bd(!1)}},"./src/index.ts":(n,t,i)=>{i.r(t),i.d(t,{CAP:()=>W.CAP,CC:()=>o.CC,CONTEXTS_PER_VIEWPORT:()=>me.CONTEXTS_PER_VIEWPORT,Color:()=>o.Color,CustomLinear:()=>s.CustomLinear,Cylinder:()=>_.Cylinder,GLDraw:()=>W.GLDraw,GLModel:()=>H.GLModel,GLShape:()=>Z.GLShape,GLViewer:()=>me.GLViewer,GLVolumetricRender:()=>G.GLVolumetricRender,Gradient:()=>s.Gradient,GradientType:()=>s.GradientType,Label:()=>f.Label,LabelCount:()=>f.LabelCount,MarchingCube:()=>P.MarchingCube,MarchingCubeInitializer:()=>P.MarchingCubeInitializer,Matrix3:()=>v.Matrix3,Matrix4:()=>v.Matrix4,Parsers:()=>p.Parsers,PausableTimer:()=>k.PausableTimer,PointGrid:()=>P.PointGrid,ProteinSurface:()=>P.ProteinSurface,Quaternion:()=>v.Quaternion,ROYGB:()=>s.ROYGB,RWB:()=>s.RWB,Ray:()=>v.Ray,Sinebow:()=>s.Sinebow,Sphere:()=>_.Sphere,SurfaceType:()=>P.SurfaceType,Triangle:()=>_.Triangle,Vector2:()=>v.Vector2,Vector3:()=>v.Vector3,VolumeData:()=>L.VolumeData,adjustVolumeStyle:()=>k.adjustVolumeStyle,applyPartialCharges:()=>d.applyPartialCharges,autoinit:()=>$e.autoinit,autoload:()=>$e.autoload,base64ToArray:()=>k.base64ToArray,bondLength:()=>p.bondLength,builtinColorSchemes:()=>o.builtinColorSchemes,builtinGradients:()=>s.builtinGradients,chains:()=>o.chains,clamp:()=>v.clamp,conversionMatrix3:()=>v.conversionMatrix3,createStereoViewer:()=>me.createStereoViewer,createViewer:()=>me.createViewer,createViewerGrid:()=>me.createViewerGrid,deepCopy:()=>k.deepCopy,degToRad:()=>v.degToRad,download:()=>k.download,drawCartoon:()=>j.drawCartoon,elementColors:()=>o.elementColors,extend:()=>k.extend,get:()=>k.get,getAtomProperty:()=>k.getAtomProperty,getColorFromStyle:()=>k.getColorFromStyle,getElement:()=>k.getElement,getExtent:()=>k.getExtent,getGradient:()=>s.getGradient,getPropertyRange:()=>k.getPropertyRange,getbin:()=>k.getbin,htmlColors:()=>o.htmlColors,inflateString:()=>k.inflateString,isEmptyObject:()=>k.isEmptyObject,isNumeric:()=>k.isNumeric,makeFunction:()=>k.makeFunction,mergeGeos:()=>k.mergeGeos,normalizeValue:()=>s.normalizeValue,partialCharges:()=>d.partialCharges,processing_autoinit:()=>$e.processing_autoinit,residues:()=>o.residues,setBondLength:()=>p.setBondLength,setSyncSurface:()=>P.setSyncSurface,specStringToObject:()=>k.specStringToObject,splitMesh:()=>Z.splitMesh,ssColors:()=>o.ssColors,subdivide_spline:()=>j.subdivide_spline,syncSurface:()=>P.syncSurface,viewers:()=>$e.viewers});var s=i("./src/Gradient.ts"),o=i("./src/colors.ts"),f=i("./src/Label.ts"),d=i("./src/partialCharges.ts"),p=i("./src/parsers/index.ts"),v=i("./src/WebGL/math/index.ts"),_=i("./src/WebGL/shapes/index.ts"),k=i("./src/utilities.ts"),P=i("./src/ProteinSurface4.ts"),L=i("./src/VolumeData.ts"),G=i("./src/VolumetricRender.ts"),Z=i("./src/GLShape.ts"),W=i("./src/GLDraw.ts"),j=i("./src/glcartoon.ts"),H=i("./src/GLModel.ts"),me=i("./src/GLViewer.ts"),$e=i("./src/autoload.ts");i("./src/specs.ts"),window&&(window.$3Dmol=t)},"./src/parsers/BCIF.ts":(n,t,i)=>{i.r(t),i.d(t,{BCIF:()=>Z});var s=i("./src/utilities.ts"),o=i("./src/parsers/utils/computeSecondaryStructure.ts"),f=i("./src/parsers/utils/processSymmetries.ts"),d=i("./src/parsers/cifutils/category.ts"),p=i("./src/parsers/utils/assignPDBBonds.ts"),v=i("./src/WebGL/index.ts"),_=i("./src/parsers/utils/isEmpty.ts"),k=i("./src/vendor/mmtf.js");class P{constructor(j){if(this.C={},j){let H=j.getField("comp_id"),me=j.getField("atom_id_1"),$e=j.getField("atom_id_2"),De=j.getField("value_order");for(let le=0;le<H.length;le++){let Ce=H[le],Me=me[le],_n=$e[le],_i=De[le],ll=1;_i=="doub"?ll=2:_i=="trip"&&(ll=3),this.C[Ce]==null&&(this.C[Ce]={}),this.C[Ce][Me]==null&&(this.C[Ce][Me]={}),this.C[Ce][_n]==null&&(this.C[Ce][_n]={}),this.C[Ce][Me][_n]=ll,this.C[Ce][_n][Me]=ll}}}order(j,H,me){return this.C[j]!==void 0&&this.C[j][H]!==void 0&&this.C[j][H][me]!==void 0?this.C[j][H][me]:0}}class L{constructor(j){if(this.C=[],j){let H=j.getField("conn_type_id"),me=j.getField("ptnr1_label_asym_id"),$e=j.getField("ptnr1_label_seq_id"),De=j.getField("ptnr1_label_comp_id"),le=j.getField("ptnr1_label_atom_id"),Ce=j.getField("ptnr2_label_asym_id"),Me=j.getField("ptnr2_label_seq_id"),_n=j.getField("ptnr2_label_comp_id"),_i=j.getField("ptnr2_label_atom_id"),ll=j.getField("pdbx_value_order");for(let _l=0;_l<H.length;_l++)if(H[_l]=="disulf"||H[_l]=="covale"){let oa=ll?ll[_l]==""?1:parseInt(ll[_l]):1;this.C.push([[me[_l],$e[_l],De[_l],le[_l]],[Ce[_l],Me[_l],_n[_l],_i[_l]],oa])}}}}class G{constructor(){this.R={}}add(j){this.R[j.lchain]==null&&(this.R[j.lchain]={}),this.R[j.lchain][j.lresi]==null&&(this.R[j.lchain][j.lresi]={}),this.R[j.lchain][j.lresi][j.lresn]==null&&(this.R[j.lchain][j.lresi][j.lresn]=[]),this.R[j.lchain][j.lresi][j.lresn].push(j),this.R[j.lchain][j.lresi][j.lresn][j.atom]=j}geta([j,H,me,$e]){if(this.R[j]!==void 0&&this.R[j][H]!==void 0&&this.R[j][H][me]!==void 0)return this.R[j][H][me][$e]}setBonds(j,H){for(let me in this.R)for(let $e in this.R[me])for(let De in this.R[me][$e]){let le=this.R[me][$e][De];for(let Ce=0;Ce<le.length;Ce++)for(let Me=Ce+1;Me<le.length;Me++){let _n=le[Ce],_i=le[Me],ll=j.order(De,_n.atom,_i.atom);_n.altLoc!=_i.altLoc&&_n.altLoc!=""&&_i.altLoc!=""&&(ll=0),ll>0&&(_n.bonds.push(_i.index),_i.bonds.push(_n.index),_n.bondOrder.push(ll),_i.bondOrder.push(ll))}}for(let me of H.C){let $e=me[0],De=me[1],le=me[2],Ce=this.geta($e),Me=this.geta(De);Ce!=null&&Me!=null&&(Ce.bonds.push(Me.index),Me.bonds.push(Ce.index),Ce.bondOrder.push(le),Me.bondOrder.push(le))}}}function Z(W,j){var H=!j.keepH,me=j.altLoc?j.altLoc:"A",$e=!j.noComputeSecondaryStructure;const De=!j.doAssembly,le=j.assignBonds===void 0?!0:j.assignBonds;if(typeof W=="string")try{W=(0,s.base64ToArray)(W)}catch{W=new TextEncoder().encode(W)}else W=new Uint8Array(W);var Ce=k.decodeMsgpack(W);Ce==31&&(W=(0,s.inflateString)(W,!1),Ce=k.decodeMsgpack(W));var Me=[],_n=Me.modelData=[],_i=Ce.dataBlocks.length;if(_i==0)return Me;j.multimodel||(_i=1);for(let ll=0;ll<_i;ll++){let _l=Me.length;const oa=[];_n.push({symmetries:[]}),Me.push([]);const Ru=Ce.dataBlocks[ll],ga=Object.create(null);for(const ib of Ru.categories)ga[ib.name.substr(1)]=(0,d.Category)(ib);let _s={},Sa=ga.struct_conf;if(Sa){let ib=Sa.getField("conf_type_id"),_2=Sa.getField("beg_label_asym_id"),Nb=Sa.getField("beg_label_seq_id"),_D=Sa.getField("end_label_seq_id");for(let ec=0;ec<ib.length;ec++)if(ib[ec].startsWith("H")){let Jc=_2[ec],ih=Nb[ec],Bd=_D[ec];Jc in _s||(_s[Jc]={}),_s[Jc][ih]="h1";for(let xg=ih+1;xg<Bd;xg++)_s[Jc][xg]="h";_s[Jc][Bd]="h2"}}let Ra=ga.struct_sheet_range;if(Ra){let ib=Ra.getField("id"),_2=Ra.getField("beg_label_asym_id"),Nb=Ra.getField("beg_label_seq_id"),_D=Ra.getField("end_label_seq_id");for(let ec=0;ec<ib.length;ec++){let Jc=_2[ec],ih=Nb[ec],Bd=_D[ec];Jc in _s||(_s[Jc]={}),_s[Jc][ih]="s1";for(let xg=ih+1;xg<Bd;xg++)_s[Jc][xg]="s";_s[Jc][Bd]="s2"}}let Da=ga.pdbx_struct_oper_list,Fa=Da.getField("id");if(Fa&&!De){let ib=Da.getField("matrix[1][1]"),_2=Da.getField("matrix[1][2]"),Nb=Da.getField("matrix[1][3]"),_D=Da.getField("matrix[2][1]"),ec=Da.getField("matrix[2][2]"),Jc=Da.getField("matrix[2][3]"),ih=Da.getField("matrix[3][1]"),Bd=Da.getField("matrix[3][2]"),xg=Da.getField("matrix[3][3]"),hb=Da.getField("vector[1]"),_S=Da.getField("vector[2]"),rc=Da.getField("vector[3]");for(let e0=0;e0<Fa.length;e0++){const b0=new v.Matrix4(ib[e0],_2[e0],Nb[e0],hb[e0],_D[e0],ec[e0],Jc[e0],_S[e0],ih[e0],Bd[e0],xg[e0],rc[e0]);_n[_n.length-1].symmetries.push(b0)}}let Na=new P(ga.chem_comp_bond),_a=new G,Pa=new L(ga.struct_conn),qc=ga.atom_site,uf=qc.rowCount,_h=qc.getField("group_PDB"),Uh=qc.getField("Cartn_x"),Kd=qc.getField("Cartn_y"),ud=qc.getField("Cartn_z"),sc=qc.getField("auth_asym_id"),Yd=qc.getField("label_asym_id"),wg=qc.getField("auth_seq_id"),Pf=qc.getField("label_seq_id"),ac=qc.getField("auth_comp_id"),fc=qc.getField("label_comp_id"),nd=qc.getField("auth_atom_id"),a0=qc.getField("label_atom_id"),_1=qc.getField("type_symbol"),_$=qc.getField("B_iso_or_equiv"),$b=qc.getField("id"),Z_=qc.getField("label_alt_id"),_b=qc.getField("pdbx_PDB_model_num"),cb=_b?_b[0]:0;for(let ib=0;ib<uf;ib++){if(_h!==void 0&&_h[ib]==="TER")continue;if(_b&&_b[ib]!=cb)if(cb=_b[ib],j.multimodel)j.onemol||(Me.push([]),_n.push(_n[_n.length-1]),cb=_b[ib],_a.setBonds(Na,Pa),_a=new G);else break;const _2={};_2.x=Uh[ib],_2.y=Kd[ib],_2.z=ud[ib],_2.chain=sc?sc[ib]:Yd?Yd[ib]:void 0,_2.lchain=Yd?Yd[ib]:void 0,_2.resi=wg?wg[ib]:Pf?Pf[ib]:void 0,_2.lresi=Pf?Pf[ib]:void 0,_2.resn=ac?ac[ib].trim():fc?fc[ib].trim():void 0,_2.lresn=fc?fc[ib].trim():void 0,_2.atom=nd?nd[ib].replace(/"/gm,""):a0?a0[ib].replace(/"/gm,""):void 0,_2.icode=Z_?Z_[ib]:void 0,_2.altLoc=_2.icode,_2.hetflag=!_h||_h[ib]==="HETA"||_h[ib]==="HETATM";let Nb="X";_1&&(Nb=_1[ib].replace(/\(?\+?\d+.*/,"")),_2.elem=Nb[0].toUpperCase()+Nb.substring(1,2).toLowerCase(),_$&&(_2.b=_$[ib]),!(H&&_2.elem=="H")&&(_2.altLoc!=""&&_2.altLoc!=me&&me!="*"||(_2.bonds=[],_2.ss="c",_2.serial=$b[ib],_2.model=cb,_2.bondOrder=[],_2.properties={},_2.index=Me[Me.length-1].length,oa[_2.serial]=[Me.length,_2.index],Me[Me.length-1].push(_2),_a.add(_2)))}if(_a.setBonds(Na,Pa),!(0,_.isEmpty)(_s))for(let ib=_l;ib<Me.length;ib++){let _2=Me[ib];for(let Nb=0;Nb<_2.length;Nb++){const _D=_2[Nb];if(_D!==void 0&&_D.lchain in _s&&_D.lresi in _s[_D.lchain]){const ec=_s[_D.lchain][_D.lresi];_D.ss=ec[0],ec.length>1&&(ec[1]=="1"?_D.ssbegin=!0:ec[1]=="2"&&(_D.ssend=!0))}}}j.multimodel&&ll<_i-1&&(j.onemol||(Me.push([]),_n.push({symmetries:[]})))}for(let ll=0;ll<Me.length;ll++)le&&!(j.duplicateAssemblyAtoms&&!j.dontConnectDuplicatedAtoms)&&(0,p.assignPDBBonds)(Me[ll],j),$e&&(0,o.computeSecondaryStructure)(Me[ll],j.hbondCutoff),(0,f.processSymmetries)(_n[ll].symmetries,Me[ll],j,_n[ll].cryst),j.duplicateAssemblyAtoms&&!j.dontConnectDuplicatedAtoms&&le&&(0,p.assignPDBBonds)(Me[ll],j);return Me}},"./src/parsers/CDJSON.ts":(n,t,i)=>{i.r(t),i.d(t,{CDJSON:()=>s});function s(o,f){var d=[[]];typeof o=="string"&&(o=JSON.parse(o));for(var p=o.m,v=p[0].a,_=p[0].b,k=p[0].s,P=f!==void 0&&f.parseStyle!==void 0?f.parseStyle:k!==void 0,L=d[d.length-1].length,G=0;G<v.length;G++){var Z=v[G],W={};W.id=Z.i,W.x=Z.x,W.y=Z.y,W.z=Z.z||0,W.bonds=[],W.bondOrder=[];var j=Z.l||"C";W.elem=j[0].toUpperCase()+j.substring(1).toLowerCase(),W.serial=d[d.length-1].length,P&&(W.style=k[Z.s||0]),d[d.length-1].push(W)}for(let H=0;H<_.length;H++){let me=_[H],$e=me.b+L,De=me.e+L,le=me.o||1,Ce=d[d.length-1][$e],Me=d[d.length-1][De];Ce.bonds.push(De),Ce.bondOrder.push(le),Me.bonds.push($e),Me.bondOrder.push(le)}return d}},"./src/parsers/CIF.ts":(n,t,i)=>{i.r(t),i.d(t,{CIF:()=>v});var s=i("./src/parsers/utils/computeSecondaryStructure.ts"),o=i("./src/parsers/utils/processSymmetries.ts"),f=i("./src/WebGL/index.ts"),d=i("./src/parsers/utils/assignPDBBonds.ts");const p=function(_,k,P,L){return new f.Vector3(k,P,L).applyMatrix3(_)};function v(_,k={}){const P=[],L=!k.doAssembly,G=P.modelData=[],Z=k.assignBonds===void 0?!0:k.assignBonds;function W(le,Ce){const Me=[];let _n=0,_i=0;for(;_i<le.length;){for(;le.substring(_i,_i+Ce.length)!==Ce&&_i<le.length;)if(le[_i]==="'"){for(_i++;_i<le.length&&le[_i]!=="'";)_i++;for(;le.substring(_i,_i+Ce.length)!==Ce&&_i<le.length;)_i++}else if(le[_i]==='"'){for(_i++;_i<le.length&&le[_i]!=='"';)_i++;_i++}else _i++;Me.push(le.substring(_n,_i)),_n=_i=_i+Ce.length}return Me}const j=_.split(/\r?\n|\r/),H=[];let me=!1;for(let le=0;le<j.length;le++){var $e=j[le].split("#")[0];if(me?$e[0]===";"&&(me=!1):$e[0]===";"&&(me=!0),me||$e!==""){if(!me&&($e=$e.trim(),$e[0]==="_")){const Ce=$e.split(/\s/)[0].indexOf(".");if(Ce>-1){let Me=$e.split("");Me[Ce]="_",$e=Me.join(""),$e=$e.substring(0,Ce)+"_"+$e.substring(Ce+1)}}H.push($e)}}let De=0;for(;De<H.length;){for(;!H[De].startsWith("data_")||H[De]==="data_global";)De++;De++;const le={};for(;De<H.length&&!H[De].startsWith("data_");)if(H[De][0]===void 0)De++;else if(H[De][0]==="_"){const _i=H[De].split(/\s/)[0].toLowerCase(),ll=le[_i]=le[_i]||[],_l=H[De].substring(H[De].indexOf(_i)+_i.length);if(_l==="")if(De++,H[De][0]===";"){let oa=H[De].substring(1);for(De++;H[De]!==";";)oa=oa+`
`+H[De],De++;ll.push(oa)}else ll.push(H[De]);else ll.push(_l.trim());De++}else if(H[De].substring(0,5)==="loop_"){De++;const _i=[];for(;H[De]===""||H[De][0]==="_";){if(H[De]!==""){let _l=H[De].split(/\s/)[0].toLowerCase(),oa=le[_l]=le[_l]||[];_i.push(oa)}De++}let ll=0;for(;De<H.length&&H[De][0]!=="_"&&!H[De].startsWith("loop_")&&!H[De].startsWith("data_");){let _l=W(H[De]," ");for(let oa=0;oa<_l.length;oa++)_l[oa]!==""&&(_i[ll].push(_l[oa]),ll=(ll+1)%_i.length);De++}}else De++;G.push({symmetries:[]}),P.push([]);const Ce=le._atom_site_id!==void 0?le._atom_site_id.length:le._atom_site_label.length;let Me;if(le._cell_length_a!==void 0){const _i=parseFloat(le._cell_length_a),ll=parseFloat(le._cell_length_b),_l=parseFloat(le._cell_length_c),oa=parseFloat(le._cell_angle_alpha)||90,Ru=parseFloat(le._cell_angle_beta)||90,ga=parseFloat(le._cell_angle_gamma)||90;Me=(0,f.conversionMatrix3)(_i,ll,_l,oa,Ru,ga),G[G.length-1].cryst={a:_i,b:ll,c:_l,alpha:oa,beta:Ru,gamma:ga}}for(let _i=0;_i<Ce;_i++){if(le._atom_site_group_pdb!==void 0&&le._atom_site_group_pdb[_i]==="TER")continue;const ll={};if(le._atom_site_cartn_x!==void 0)ll.x=parseFloat(le._atom_site_cartn_x[_i]),ll.y=parseFloat(le._atom_site_cartn_y[_i]),ll.z=parseFloat(le._atom_site_cartn_z[_i]);else{const oa=p(Me,parseFloat(le._atom_site_fract_x[_i]),parseFloat(le._atom_site_fract_y[_i]),parseFloat(le._atom_site_fract_z[_i]));ll.x=oa.x,ll.y=oa.y,ll.z=oa.z}ll.chain=le._atom_site_auth_asym_id?le._atom_site_auth_asym_id[_i]:le._atom_site_label_asym_id?le._atom_site_label_asym_id[_i]:void 0,ll.resi=le._atom_site_auth_seq_id?parseInt(le._atom_site_auth_seq_id[_i]):le._atom_site_label_seq_id?le._atom_site_label_seq_id[_i]:void 0,ll.resn=le._atom_site_auth_comp_id?le._atom_site_auth_comp_id[_i].trim():le._atom_site_label_comp_id?le._atom_site_label_comp_id[_i].trim():void 0,ll.atom=le._atom_site_auth_atom_id?le._atom_site_auth_atom_id[_i].replace(/"/gm,""):le._atom_site_label_atom_id?le._atom_site_label_atom_id[_i].replace(/"/gm,""):void 0,ll.hetflag=!le._atom_site_group_pdb||le._atom_site_group_pdb[_i]==="HETA"||le._atom_site_group_pdb[_i]==="HETATM",le._atom_site_b_iso_or_equiv&&(ll.b=parseFloat(le._atom_site_b_iso_or_equiv[_i]));let _l="X";le._atom_site_type_symbol?_l=le._atom_site_type_symbol[_i].replace(/\(?\+?\d+.*/,""):le._atom_site_label&&(_l=le._atom_site_label[_i].split("_")[0].replace(/\(?\d+.*/,"")),ll.elem=_l[0].toUpperCase()+_l.substring(1,2).toLowerCase(),ll.bonds=[],ll.ss="c",ll.serial=_i,ll.bondOrder=[],ll.properties={},P[P.length-1].push(ll)}if(le._pdbx_struct_oper_list_id!==void 0&&!L)for(let _i=0;_i<le._pdbx_struct_oper_list_id.length;_i++){const ll=parseFloat(le["_pdbx_struct_oper_list_matrix[1][1]"][_i]),_l=parseFloat(le["_pdbx_struct_oper_list_matrix[1][2]"][_i]),oa=parseFloat(le["_pdbx_struct_oper_list_matrix[1][3]"][_i]),Ru=parseFloat(le["_pdbx_struct_oper_list_vector[1]"][_i]),ga=parseFloat(le["_pdbx_struct_oper_list_matrix[2][1]"][_i]),_s=parseFloat(le["_pdbx_struct_oper_list_matrix[2][2]"][_i]),Sa=parseFloat(le["_pdbx_struct_oper_list_matrix[2][3]"][_i]),Ra=parseFloat(le["_pdbx_struct_oper_list_vector[2]"][_i]),Da=parseFloat(le["_pdbx_struct_oper_list_matrix[3][1]"][_i]),Fa=parseFloat(le["_pdbx_struct_oper_list_matrix[3][2]"][_i]),Na=parseFloat(le["_pdbx_struct_oper_list_matrix[3][3]"][_i]),_a=parseFloat(le["_pdbx_struct_oper_list_vector[3]"][_i]),Pa=new f.Matrix4(ll,_l,oa,Ru,ga,_s,Sa,Ra,Da,Fa,Na,_a);G[G.length-1].symmetries.push(Pa)}const _n=function(_i){const ll=_i.match("-");_i=_i.replace(/[-xyz]/g,"");const _l=_i.split("/");let oa,Ru;return _l[1]===void 0?Ru=1:Ru=parseInt(_l[1]),_l[0]===""?oa=1:oa=parseInt(_l[0]),oa/Ru*(ll?-1:1)};if(le._symmetry_equiv_pos_as_xyz!==void 0&&!L)for(let _i=0;_i<le._symmetry_equiv_pos_as_xyz.length;_i++){const _l=le._symmetry_equiv_pos_as_xyz[_i].replace(/["' ]/g,"").split(",").map(function(_s){return _s.replace(/-/g,"+-")});let oa=new f.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let _s=0;_s<3;_s++){const Sa=_l[_s].split("+");for(let Ra=0;Ra<Sa.length;Ra++){const Da=Sa[Ra];if(Da==="")continue;const Fa=_n(Da);Da.match("x")?oa.elements[_s+0]=Fa:Da.match("y")?oa.elements[_s+4]=Fa:Da.match("z")?oa.elements[_s+8]=Fa:oa.elements[_s+12]=Fa}}const Ru=Me.getMatrix4(),ga=new f.Matrix4().getInverse(Ru,!0);oa=new f.Matrix4().multiplyMatrices(oa,ga),oa=new f.Matrix4().multiplyMatrices(Ru,oa),G[G.length-1].symmetries.push(oa)}}for(let le=0;le<P.length;le++)Z&&!(k.duplicateAssemblyAtoms&&!k.dontConnectDuplicatedAtoms)&&(0,d.assignPDBBonds)(P[le],k),(0,s.computeSecondaryStructure)(P[le],k.hbondCutoff),(0,o.processSymmetries)(G[le].symmetries,P[le],k,G[le].cryst),k.duplicateAssemblyAtoms&&!k.dontConnectDuplicatedAtoms&&Z&&(0,d.assignPDBBonds)(P[le],k);return P}},"./src/parsers/CUBE.ts":(n,t,i)=>{i.r(t),i.d(t,{CUBE:()=>d});var s=i("./src/WebGL/index.ts"),o=i("./src/parsers/utils/assignBonds.ts"),f=i("./src/parsers/utils/anumToSymbol.ts");function d(p,v){v=v||{};const _=[[]];let k=p.split(/\r?\n/);const P=v.assignBonds===void 0?!0:v.assignBonds;if(k.length<6)return _;let L=k[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const G=Math.abs(parseFloat(L[0]));let Z={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const W=Z.origin=new s.Vector3(parseFloat(L[1]),parseFloat(L[2]),parseFloat(L[3]));L=k[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),L=k[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const j=L[0]>0?.529177:1;W.multiplyScalar(j);const H=Math.abs(L[0]),me=new s.Vector3(parseFloat(L[1]),parseFloat(L[2]),parseFloat(L[3])).multiplyScalar(j);L=k[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const $e=Math.abs(L[0]),De=new s.Vector3(parseFloat(L[1]),parseFloat(L[2]),parseFloat(L[3])).multiplyScalar(j);L=k[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const le=Math.abs(L[0]),Ce=new s.Vector3(parseFloat(L[1]),parseFloat(L[2]),parseFloat(L[3])).multiplyScalar(j);if(Z.size={x:H,y:$e,z:le},Z.unit=new s.Vector3(me.x,De.y,Ce.z),me.y!=0||me.z!=0||De.x!=0||De.z!=0||Ce.x!=0||Ce.y!=0){Z.matrix4=new s.Matrix4(me.x,De.x,Ce.x,0,me.y,De.y,Ce.y,0,me.z,De.z,Ce.z,0,0,0,0,1);let Ru=new s.Matrix4().makeTranslation(W.x,W.y,W.z);Z.matrix4=Z.matrix4.multiplyMatrices(Ru,Z.matrix4),Z.matrix=Z.matrix4.matrix3FromTopLeft(),Z.origin=new s.Vector3(0,0,0),Z.unit=new s.Vector3(1,1,1)}_.modelData=[{cryst:Z}],k=k.splice(6,G);for(var Me=_[_.length-1].length,_n=Me+k.length,_i=Me;_i<_n;++_i){var ll={};ll.serial=_i;var _l=k[_i-Me],oa=_l.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");ll.elem=f.anumToSymbol[oa[0]],ll.x=parseFloat(oa[2])*j,ll.y=parseFloat(oa[3])*j,ll.z=parseFloat(oa[4])*j,ll.hetflag=!0,ll.bonds=[],ll.bondOrder=[],ll.properties={},_[_.length-1].push(ll)}if(P)for(let Ru=0;Ru<_.length;Ru++)(0,o.assignBonds)(_[Ru],v);return _}},"./src/parsers/GRO.ts":(n,t,i)=>{i.r(t),i.d(t,{GRO:()=>f});var s=i("./src/parsers/utils/assignPDBBonds.ts"),o=i("./src/parsers/utils/atomNameToElem.ts");function f(d,p){const v=[],_=d.split(/\r?\n|\r/);for(;_.length>0;){const k=parseInt(_[1]);if(_.length<3||isNaN(k)||k<=0||_.length<k+3)break;const L=[];v.push(L);let G=2;const Z=L.length,W=Z+k;for(let j=Z;j<W;j++){const H=_[G++],me={};me.serial=j,me.atom=H.slice(10,15).trim(),me.elem=(0,o.atomNameToElem)(me.atom,!0),me.x=10*parseFloat(H.slice(20,28)),me.y=10*parseFloat(H.slice(28,36)),me.z=10*parseFloat(H.slice(36,44)),me.resi=parseInt(H.slice(0,5)),me.resn=H.slice(5,10).trim(),me.bonds=[],me.bondOrder=[],me.properties={},H.length>44&&(me.dx=10*parseFloat(H.slice(44,52)),me.dy=10*parseFloat(H.slice(52,60)),me.dz=10*parseFloat(H.slice(60,68))),L[j]=me}if(_.length<=G+3){const H=_[G++].trim().split(/\s+/);if(H.length===3){for(let me=0;me<3;me++)H[me]=(parseFloat(H[me])*10).toString();v.box=H}}_.splice(0,++G)}for(let k=0;k<v.length;k++)(0,s.assignPDBBonds)(v[k],p);return v}},"./src/parsers/LAMMPSTRJ.ts":(n,t,i)=>{i.r(t),i.d(t,{LAMMPSTRJ:()=>f});var s=i("./src/parsers/utils/assignBonds.ts");const o={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function f(d,p){const v=[],_=d.split(/\r?\n|\r/);let k=0,P=0,L=0;for(;L<_.length-9;){for(var G=L;G<_.length;G++)if(_[G].match(/ITEM: NUMBER OF ATOMS/)&&(P=parseInt(_[G+1])),_[G].match(/ITEM: ATOMS/)){k=G+1;break}const Z=_[k-1].replace("ITEM: ATOMS ","").split(" ");v.push([]);for(let W=k;W<k+P;W++){const j={},H={},me=_[W].split(" ");for(let $e=0;$e<me.length;$e++){const De=o[Z[$e]];De!==void 0&&(De==="serial"?j[De]=parseInt(me[$e]):De==="x"||De==="y"||De==="z"?j[De]=parseFloat(me[$e]):De==="charge"||De==="radius"?H[De]=parseFloat(me[$e]):j[De]=me[$e]),j.properties=H,j.bonds=[],j.bondOrder=[]}v[v.length-1][W-k]=j}L=k+P-1}if(p.assignBonds)for(let Z=0;Z<v.length;Z++)(0,s.assignBonds)(v[Z],p);return v}},"./src/parsers/MMTF.ts":(n,t,i)=>{i.r(t),i.d(t,{MMTFparser:()=>P});var s=i("./src/utilities.ts"),o=i("./src/WebGL/index.ts"),f=i("./src/parsers/utils/computeSecondaryStructure.ts"),d=i("./src/parsers/utils/processSymmetries.ts"),p=i("./src/vendor/mmtf.js"),v=function(L){return String.fromCharCode.apply(null,L).replace(/\0/g,"")},_=function(L){return L==0||L==2||L==4?"h":L==3?"s":"c"};let k=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function P(L,G){var Z=!G.keepH,W=G.altLoc?G.altLoc:"A",j=!!G.noSecondaryStructure,H=!G.noComputeSecondaryStructure,me=!G.doAssembly,$e=G.assemblyIndex?G.assemblyIndex:0;typeof L=="string"?L=(0,s.base64ToArray)(L):L=new Uint8Array(L);var De=p.decode(L),le=[[]],Ce=le.modelData=[],Me=0,_n=0,_i=0,ll=De.secStructList,_l=De.bFactorList,oa=De.altLocList,Ru=De.occupancyList,ga=De.bondAtomList,_s=De.bondOrderList,Sa=De.numModels;if(Sa==0)return le;G.multimodel||(Sa=1);var Ra,Da,Fa,Na,_a,Pa,qc=[];if(!me&&De.bioAssemblyList&&De.bioAssemblyList.length>0){var uf=De.bioAssemblyList[$e].transformList;for(Ra=0,Pa=uf.length;Ra<Pa;Ra++){var _h=new o.Matrix4(uf[Ra].matrix);_h.transpose(),qc.push(_h)}}var Uh=null;if(De.unitCell){var Kd=De.unitCell;Uh={a:Kd[0],b:Kd[1],c:Kd[2],alpha:Kd[3],beta:Kd[4],gamma:Kd[5]}}let ud=[];De.entityList.forEach(_0=>{_0.chainIndexList.forEach(Oc=>{ud[Oc]=_0.type=="polymer"})});var sc=0;for(_a=0;_a<Sa;_a++){var Yd=De.chainsPerModel[_a],wg=le[le.length-1],Pf=[];for(Ce.push({symmetries:qc,cryst:Uh}),Ra=0;Ra<Yd;++Ra){var ac=De.groupsPerChain[Me],fc=v(De.chainIdList.subarray(Me*4,Me*4+4));De.chainNameList&&(fc=v(De.chainNameList.subarray(Me*4,Me*4+4)));var nd=_n,a0="";for(Da=0;Da<ac;++Da){var _1=De.groupList[De.groupTypeList[_n]],_$=_1.atomNameList.length,$b=0,Z_=!1,_b=!1;if(ll){$b=ll[_n];var cb=_($b);(_n==0||cb!=a0)&&(Z_=!0),a0=cb;var ib=_n+1;(ib>=ll.length||_(ll[ib]!=cb))&&(_b=!0)}var _2=De.groupIdList[_n],Nb=_1.groupName;let _0=_1.chemCompType;var _D=_i;let Oc=k.has(_0)||!ud[Me];for(Fa=0;Fa<_$;++Fa){var ec=_1.elementList[Fa];if(Z&&ec=="H"){_i+=1;continue}var Jc="";_l&&(Jc=_l[_i]);var ih="";oa&&oa[_i]&&(ih=String.fromCharCode(oa[_i]));var Bd="";if(Ru&&(Bd=Ru[_i]),ih!=""&&ih!=W&&W!="*"){_i+=1;continue}var xg=De.atomIdList[_i],hb=_1.atomNameList[Fa],_S=0;_1.atomChargeList&&(_S=_1.atomChargeList[Fa]);var rc=De.xCoordList[_i],e0=De.yCoordList[_i],b0=De.zCoordList[_i];Pf[_i]=wg.length,wg.push({resn:Nb,x:rc,y:e0,z:b0,elem:ec,hetflag:Oc,chain:fc,resi:_2,icode:ih,rescode:_2+(ih!=" "?"^"+ih:""),serial:xg,altLoc:ih,index:_i,atom:hb,bonds:[],ss:_($b),ssbegin:Z_,ssend:_b,bondOrder:[],properties:{charge:_S,occupancy:Bd},b:Jc}),_i+=1}var nb=_1.bondAtomList;for(Fa=0,Na=_1.bondOrderList.length;Fa<Na;++Fa){var vf=_D+nb[Fa*2],c0=_D+nb[Fa*2+1],Ba=_1.bondOrderList[Fa],$_=Pf[vf],_A=Pf[c0],ka=wg[$_],Pp=wg[_A];ka&&Pp&&(ka.bonds.push(_A),ka.bondOrder.push(Ba),Pp.bonds.push($_),Pp.bondOrder.push(Ba))}_n+=1}for(_n=nd,Da=0;Da<ac;++Da)_n+=1;Me+=1}if(ga)for(let _0=sc,Oc=ga.length;_0<Oc;_0+=2){let zg=ga[_0],_p=ga[_0+1],_O=_s?_s[_0/2]:1;if(zg>=_i){sc=_0;break}let _M=Pf[zg],_T=Pf[_p],_9=wg[_M],_q=wg[_T];_9&&_q&&(_9.bonds.push(_T),_9.bondOrder.push(_O),_q.bonds.push(_M),_q.bondOrder.push(_O))}G.multimodel&&(G.onemol||le.push([]))}if(!me)for(let _0=0;_0<le.length;_0++)(0,d.processSymmetries)(Ce[_0].symmetries,le[_0],G,Ce[_0].cryst);return H&&!j&&(0,f.computeSecondaryStructure)(le,G.hbondCutoff),le}},"./src/parsers/MOL2.ts":(n,t,i)=>{i.r(t),i.d(t,{MOL2:()=>o});let s={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function o(f,d){var p=[[]],v=!1;typeof d.keepH<"u"&&(v=!d.keepH);var _=f.search(/@<TRIPOS>MOLECULE/),k=f.search(/@<TRIPOS>ATOM/);if(_==-1||k==-1)return p;for(var P=f.substring(_).split(/\r?\n|\r/);P.length>0;){var L=[],G=P[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Z=parseInt(G[0]),W=0;G.length>1&&(W=parseInt(G[1]));var j=4,H;for(H=3;H<P.length;H++)if(P[H]=="@<TRIPOS>ATOM"){j=H+1;break}var me=p[p.length-1].length,$e=me+Z,De;for(H=me;H<$e;H++){De=P[j++],G=De.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var le={},Ce=G[5];if(s[Ce]!==void 0?Ce=s[Ce]:(Ce=Ce.split(".")[0],Ce=Ce[0].toUpperCase()+Ce.substring(1).toLowerCase()),le.atom=G[1],le.elem=Ce,!(le.elem=="H"&&v)){var Me=p[p.length-1].length,_n=parseInt(G[0]);le.serial=_n,le.x=parseFloat(G[2]),le.y=parseFloat(G[3]),le.z=parseFloat(G[4]),le.atom=G[5];var _i=parseFloat(G[8]);le.index=Me,le.bonds=[],le.bondOrder=[],le.properties={charge:_i,partialCharge:_i},L[_n]=Me,p[p.length-1].push(le)}}for(var ll=!1;j<P.length;)if(P[j++]=="@<TRIPOS>BOND"){ll=!0;break}if(ll&&W)for(H=0;H<W;H++){De=P[j++],G=De.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var _l=parseInt(G[1]),oa=p[p.length-1][L[_l]],Ru=parseInt(G[2]),ga=p[p.length-1][L[Ru]],_s=parseInt(G[3]);isNaN(_s)&&(_s=1),oa!==void 0&&ga!==void 0&&(oa.bonds.push(L[Ru]),oa.bondOrder.push(_s),ga.bonds.push(L[_l]),ga.bondOrder.push(_s))}if(d.multimodel){d.onemol||p.push([]),P.splice(0,j),f=P.join(`
`);continue}else break}return p}},"./src/parsers/PDB.ts":(n,t,i)=>{i.r(t),i.d(t,{PDB:()=>o});var s=i("./src/parsers/utils/getSinglePDB.ts");function o(f,d){d=d||{};var p=[],v={};p.modelData=[];for(var _=f.split(/\r?\n|\r/);_.length>0;){var k=(0,s.getSinglePDB)(_,d,v),P=k[0],L=k[1];if(_=k[2],P.length!=0){if(d.multimodel&&d.onemol&&p.length>0)for(var G=p[0].length,Z=0;Z<P.length;Z++){var W=P[Z];W.index=Z;for(var j=0;j<W.bonds.length;j++)W.bonds[j]+=G;p[0].push(W)}else p.modelData.push(L),p.push(P);if(!d.multimodel)break}}return p}},"./src/parsers/PQR.ts":(n,t,i)=>{i.r(t),i.d(t,{PQR:()=>f});var s=i("./src/parsers/utils/assignPDBBonds.ts"),o=i("./src/parsers/utils/computeSecondaryStructure.ts");function f(d,p){var v=[[]],_=!p.noSecondaryStructure;v.modelData=[{symmetries:[]}];var k=[],P=d.split(/\r?\n|\r/),L;for(let ll=0;ll<P.length;ll++){L=P[ll].replace(/^\s*/,"");var G=L.substring(0,6);if(G.indexOf("END")==0)if(p.multimodel){p.onemol||v.push([]);continue}else break;else if(G=="ATOM  "||G=="HETATM"){var Z;let _l=parseInt(L.substring(6,11)),oa=L.substring(12,16).replace(/ /g,""),Ru=L.substring(17,20).trim(),ga=L.substring(21,22),_s=parseInt(L.substring(22,26));var W=L.substring(30).trim().split(/\s+/),j=parseFloat(W[0]),H=parseFloat(W[1]),me=parseFloat(W[2]),$e=parseFloat(W[3]),De=parseFloat(W[4]),le=oa[0];oa.length>1&&oa[1].toUpperCase()!=oa[1]&&(le=oa.substring(0,2)),L[0]=="H"?Z=!0:Z=!1,k[_l]=v[v.length-1].length,v[v.length-1].push({resn:Ru,x:j,y:H,z:me,elem:le,hetflag:Z,chain:ga,resi:_s,serial:_l,atom:oa,bonds:[],ss:"c",bondOrder:[],properties:{charge:$e,partialCharge:$e,radius:De},pdbline:L})}else if(G=="CONECT"){var Ce=parseInt(L.substring(6,11)),Me=v[v.length-1][k[Ce]];for(let _l=0;_l<4;_l++){var _n=parseInt(L.substring([11,16,21,26][_l],[11,16,21,26][_l]+5)),_i=v[v.length-1][k[_n]];Me!==void 0&&_i!==void 0&&(Me.bonds.push(k[_n]),Me.bondOrder.push(1))}}}for(let ll=0;ll<v.length;ll++)(0,s.assignPDBBonds)(v[ll],p),_&&(0,o.computeSecondaryStructure)(v[ll],p.hbondCutoff);return v}},"./src/parsers/PRMTOP.ts":(n,t,i)=>{i.r(t),i.d(t,{PRMTOP:()=>s});function s(o){var f=[],d,p=0,v=o.split(/\r?\n|\r/);if(v.length>0&&v[0].includes("VERSION")){var _=v.filter(function(j){return j.includes("POINTERS")||j.includes("ATOM_NAME")||j.includes("CHARGE")||j.includes("RADII")||j.includes("BONDS_INC_HYDROGEN")||j.includes("BONDS_WITHOUT_HYDROGEN")}),k=Z("POINTERS");if(k==-1)return[];var P=W(k),L=parseInt(v[k+1].slice(0,P[1]));if(isNaN(L)||L<=0)return[];if(k=Z("ATOM_NAME"),k==-1)return[];P=W(k);var G=P[0];for(let j=0;j<L/P[0];j++){j==parseInt(L/P[0])&&(G=L%P[0]);for(let H=0;H<G;H++){let me={},$e={charge:"",radii:""};me.serial=p,me.x=0,me.y=0,me.z=0,me.atom=v[k+1].slice(P[1]*H,P[1]*(H+1)).trim(),me.elem=v[k+1].slice(P[1]*H,P[1]*H+1).trim(),me.properties=$e,me.bonds=[],me.bondOrder=[],f.push(me),p++}k++}if(k=Z("CHARGE"),k!=-1){P=W(k),p=0,G=P[0];for(let j=0;j<L/P[0];j++){j==parseInt(L/P[0])&&(G=L%P[0]);for(let H=0;H<G;H++)f[p].properties.charge=parseFloat(v[k+1].slice(P[1]*H,P[1]*(H+1))),p++;k++}}if(k=Z("RADII"),k!=-1){P=W(k),p=0,G=P[0];for(let j=0;j<L/P[0];j++){j==parseInt(L/P[0])&&(G=L%P[0]);for(let H=0;H<G;H++)f[p].properties.radii=parseFloat(v[k+1].slice(P[1]*H,P[1]*(H+1))),p++;k++}}if(k=Z("BONDS_WITHOUT_HYDROGEN"),k!=-1)for(P=W(k),p=0,G=P[0],k=k+1;!v[k].match(/^%FLAG/);){v[k+1].match(/^%FLAG/)&&(G=L%P[0]);for(let j=0;j<G;j++)p%3==0?d=parseInt(v[k].slice(P[1]*j,P[1]*(j+1))/3):p%3==1&&f[d].bonds.push(parseInt(v[k].slice(P[1]*j,P[1]*(j+1))/3)),p++;k++}if(k=Z("BONDS_INC_HYDROGEN"),k!=-1)for(P=W(k),p=0,G=P[0],k=k+1;!v[k].match(/^%FLAG/);){v[k+1].match(/^%FLAG/)&&(G=L%P[0]);for(let j=0;j<G;j++)p%3==0?d=parseInt(v[k].slice(P[1]*j,P[1]*(j+1))/3):p%3==1&&f[d].bonds.push(parseInt(v[k].slice(P[1]*j,P[1]*(j+1))/3)),p++;k++}}else return[];function Z(j){var H=v.indexOf(_.filter(function(me){return me.includes(j)})[0]);if(Number.isInteger(H)&&H>0){for(;!v[H].includes("FORMAT");)H++;return H}else return-1}function W(j){var H=v[j].match(/\((\d*)\S*/),me=v[j].match(/[a-zA-Z](\d*)\)\s*/);return me==null&&(me=v[j].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[H[1],me[1]]}return[f]}},"./src/parsers/SDF.ts":(n,t,i)=>{i.r(t),i.d(t,{SDF:()=>f});var s=function(d,p){var v=[[]],_=!1;for(typeof p.keepH<"u"&&(_=!p.keepH);d.length>0&&!(d.length<4);){var k=parseInt(d[3].substring(0,3));if(isNaN(k)||k<=0)break;var P=parseInt(d[3].substring(3,6)),L=4;if(d.length<4+k+P)break;var G=[],Z=v[v.length-1].length,W=Z+k,j,H;for(j=Z;j<W;j++,L++){H=d[L];var me={},$e=H.substring(31,34).replace(/ /g,"");me.atom=me.elem=$e[0].toUpperCase()+$e.substring(1).toLowerCase(),(me.elem!=="H"||!_)&&(me.serial=j,G[j]=v[v.length-1].length,me.x=parseFloat(H.substring(0,10)),me.y=parseFloat(H.substring(10,20)),me.z=parseFloat(H.substring(20,30)),me.hetflag=!0,me.bonds=[],me.bondOrder=[],me.properties={},me.index=v[v.length-1].length,v[v.length-1].push(me))}for(j=0;j<P;j++,L++){H=d[L];var De=G[parseInt(H.substring(0,3))-1+Z],le=G[parseInt(H.substring(3,6))-1+Z],Ce=parseFloat(H.substring(6));typeof De<"u"&&typeof le<"u"&&(v[v.length-1][De].bonds.push(le),v[v.length-1][De].bondOrder.push(Ce),v[v.length-1][le].bonds.push(De),v[v.length-1][le].bondOrder.push(Ce))}if(p.multimodel){for(p.onemol||v.push([]);d[L]!=="$$$$"&&L<d.length;)L++;d.splice(0,++L)}else break}return v},o=function(d,p){var v=[[]],_=!1;for(typeof p.keepH<"u"&&(_=!p.keepH);d.length>0&&!(d.length<8||!d[4].startsWith("M  V30 BEGIN CTAB")||!d[5].startsWith("M  V30 COUNTS")||d[5].length<14);){var k=d[5].substring(13).match(/\S+/g);if(k.length<2)break;var P=parseInt(k[0]);if(isNaN(P)||P<=0)break;var L=parseInt(k[1]),G=7;if(d.length<8+P+L)break;var Z=[],W=v[v.length-1].length,j=W+P,H,me;for(H=W;H<j;H++,G++){me=d[G];var $e=me.substring(6).match(/\S+/g);if($e.length>4){var De={},le=$e[1].replace(/ /g,"");De.atom=De.elem=le[0].toUpperCase()+le.substring(1).toLowerCase(),(De.elem!=="H"||!_)&&(De.serial=H,Z[H]=v[v.length-1].length,De.x=parseFloat($e[2]),De.y=parseFloat($e[3]),De.z=parseFloat($e[4]),De.hetflag=!0,De.bonds=[],De.bondOrder=[],De.properties={},De.index=v[v.length-1].length,v[v.length-1].push(De))}}if(d[G]==="M  V30 END ATOM")G++;else break;if(L!==0&&d[G]==="M  V30 BEGIN BOND")G++;else break;for(H=0;H<L;H++,G++){me=d[G];var Ce=me.substring(6).match(/\S+/g);if(Ce.length>3){var Me=Z[parseInt(Ce[2])-1+W],_n=Z[parseInt(Ce[3])-1+W],_i=parseFloat(Ce[1]);typeof Me<"u"&&typeof _n<"u"&&(v[v.length-1][Me].bonds.push(_n),v[v.length-1][Me].bondOrder.push(_i),v[v.length-1][_n].bonds.push(Me),v[v.length-1][_n].bondOrder.push(_i))}}if(p.multimodel){for(p.onemol||v.push([]);d[G]!=="$$$$"&&G<d.length;)G++;d.splice(0,++G)}else break}return v};function f(d,p){var v="V2000",_=d.split(/\r?\n|\r/);return _.length>3&&_[3].length>38&&(v=_[3].substring(34,39)),v==="V2000"?s(_,p):v==="V3000"?o(_,p):[[""]]}},"./src/parsers/VASP.ts":(n,t,i)=>{i.r(t),i.d(t,{VASP:()=>f});var s=i("./src/WebGL/index.ts"),o=i("./src/parsers/utils/assignBonds.ts");function f(d,p={}){var v=[[]],_={};const k=p.assignBonds===void 0?!0:p.assignBonds;var P=d.replace(/^\s+/,"").split(/\r?\n/);if(P.length<3)return v;if(P[1].match(/\d+/))_.length=parseFloat(P[1]);else return console.log("Warning: second line of the vasp structure file must be a number"),v;if(_.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),v;_.xVec=new Float32Array(P[2].replace(/^\s+/,"").split(/\s+/)),_.yVec=new Float32Array(P[3].replace(/^\s+/,"").split(/\s+/)),_.zVec=new Float32Array(P[4].replace(/^\s+/,"").split(/\s+/));var L=new s.Matrix3(_.xVec[0],_.xVec[1],_.xVec[2],_.yVec[0],_.yVec[1],_.yVec[2],_.zVec[0],_.zVec[1],_.zVec[2]);L.multiplyScalar(_.length),v.modelData=[{symmetries:[],cryst:{matrix:L}}];var G=P[5].trim().split(/\s+/),Z=new Int16Array(P[6].trim().split(/\s+/)),W=P[7].trim(),j=!1;if(W.match(/S/)&&(j=!0,W=P[8].trim()),W.toLowerCase()[0]=="c")W="cartesian";else if(W.toLowerCase()[0]=="d")W="direct";else return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),v;if(G.length!=Z.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(G),console.log(Z),v;j?P.splice(0,9):P.splice(0,8);for(var H=0,me=0,$e=G.length;me<$e;me++){for(var De=G[me],le=0,Ce=Z[me];le<Ce;le++){var Me=new Float32Array(P[H+le].trim().split(/\s+/)),_n={};_n.elem=De,W=="cartesian"?(_n.x=_.length*Me[0],_n.y=_.length*Me[1],_n.z=_.length*Me[2]):(_n.x=_.length*(Me[0]*_.xVec[0]+Me[1]*_.yVec[0]+Me[2]*_.zVec[0]),_n.y=_.length*(Me[0]*_.xVec[1]+Me[1]*_.yVec[1]+Me[2]*_.zVec[1]),_n.z=_.length*(Me[0]*_.xVec[2]+Me[1]*_.yVec[2]+Me[2]*_.zVec[2])),_n.bonds=[],_n.bondOrder=[],v[0].push(_n)}H+=Z[me]}if(k)for(let _i=0;_i<v.length;_i++)(0,o.assignBonds)(v[_i],p);return v}},"./src/parsers/XYZ.ts":(n,t,i)=>{i.r(t),i.d(t,{XYZ:()=>f});var s=i("./src/WebGL/index.ts"),o=i("./src/parsers/utils/assignBonds.ts");function f(d,p){p=p||{};for(var v=[[]],_=p.assignBonds===void 0?!0:p.assignBonds,k=d.trimStart().split(/\r?\n|\r/);k.length>0&&!(k.length<3);){var P=parseInt(k[0]);if(isNaN(P)||P<=0||k.length<P+2)break;var L=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi,G=L.exec(k[1]);if(G!=null&&G.length>1){var Z=new Float32Array(G[1].split(/\s+/)),W=new s.Matrix3(Z[0],Z[3],Z[6],Z[1],Z[4],Z[7],Z[2],Z[5],Z[8]);v.modelData=[{cryst:{matrix:W}}]}for(var j=2,H=v[v.length-1].length,me=H+P,$e=H;$e<me;$e++){var De=k[j++],le=De.trim().split(/\s+/),Ce={};Ce.serial=$e;var Me=le[0];Ce.atom=Ce.elem=Me[0].toUpperCase()+Me.substring(1,2).toLowerCase(),Ce.x=parseFloat(le[1]),Ce.y=parseFloat(le[2]),Ce.z=parseFloat(le[3]),Ce.hetflag=!0,Ce.bonds=[],Ce.bondOrder=[],Ce.properties={},v[v.length-1][$e]=Ce,le.length>=7&&(Ce.dx=parseFloat(le[4]),Ce.dy=parseFloat(le[5]),Ce.dz=parseFloat(le[6]))}if(p.multimodel)v.push([]),k.splice(0,j);else break}if(_)for(let _i=0;_i<v.length;_i++)(0,o.assignBonds)(v[_i],p);if(p.onemol){var _n=v;v=[],v.push(_n[0]);for(let _i=1;_i<_n.length;_i++){let ll=v[0].length;for(let _l=0;_l<_n[_i].length;_l++){let oa=_n[_i][_l];for(let Ru=0;Ru<oa.bonds.length;Ru++)oa.bonds[Ru]=oa.bonds[Ru]+ll;oa.index=v[0].length,oa.serial=v[0].length,v[0].push(oa)}}}return v}},"./src/parsers/cifutils/category.ts":(n,t,i)=>{i.r(t),i.d(t,{Category:()=>o});var s=i("./src/parsers/cifutils/decoder.ts");function o(f){const d=Object.create(null),p=Object.create(null);for(const v of f.columns)d[v.name]=v;return{rowCount:f.rowCount,name:f.name.substring(1),fieldNames:f.columns.map(v=>v.name),getField(v){const _=d[v];if(_)return p[v]||(p[v]=(0,s.decode)(_.data)),p[v]}}}},"./src/parsers/cifutils/decoder.ts":(n,t,i)=>{i.r(t),i.d(t,{decode:()=>d});var s=i("./src/parsers/cifutils/encoding.ts");const o=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function f(ll,_l){const oa=new ArrayBuffer(ll.length),Ru=new Uint8Array(oa);for(let ga=0,_s=ll.length;ga<_s;ga+=_l)for(let Sa=0;Sa<_l;Sa++)Ru[ga+_l-Sa-1]=ll[ga+Sa];return oa}function d(ll){let _l=ll.data;for(let oa=ll.encoding.length-1;oa>=0;oa--)_l=p(_l,ll.encoding[oa]);return _l}function p(ll,_l){switch(_l.kind){case"ByteArray":switch(_l.type){case s.Encoding.IntDataType.Uint8:return ll;case s.Encoding.IntDataType.Int8:return k(ll);case s.Encoding.IntDataType.Int16:return L(ll);case s.Encoding.IntDataType.Uint16:return G(ll);case s.Encoding.IntDataType.Int32:return Z(ll);case s.Encoding.IntDataType.Uint32:return W(ll);case s.Encoding.FloatDataType.Float32:return j(ll);case s.Encoding.FloatDataType.Float64:return H(ll);default:throw new Error("unreachable")}case"FixedPoint":return me(ll,_l);case"IntervalQuantization":return $e(ll,_l);case"RunLength":return De(ll,_l);case"Delta":return le(ll,_l);case"IntegerPacking":return _n(ll,_l);case"StringArray":return _i(ll,_l)}}function v(ll,_l){switch(ll){case s.Encoding.IntDataType.Int8:return new Int8Array(_l);case s.Encoding.IntDataType.Int16:return new Int16Array(_l);case s.Encoding.IntDataType.Int32:return new Int32Array(_l);case s.Encoding.IntDataType.Uint8:return new Uint8Array(_l);case s.Encoding.IntDataType.Uint16:return new Uint16Array(_l);case s.Encoding.IntDataType.Uint32:return new Uint32Array(_l);default:return new Int32Array(_l)}}function _(ll,_l){switch(ll){case s.Encoding.FloatDataType.Float32:return new Float32Array(_l);case s.Encoding.FloatDataType.Float64:return new Float64Array(_l);default:return new Float64Array(_l)}}function k(ll){return new Int8Array(ll.buffer,ll.byteOffset)}function P(ll,_l,oa){return(ll.byteOffset!=0||ll.byteLength!=ll.buffer.byteLength)&&(ll=new Uint8Array(ll)),o?new oa(ll.buffer):new oa(f(ll,_l))}function L(ll){return P(ll,2,Int16Array)}function G(ll){return P(ll,2,Uint16Array)}function Z(ll){return P(ll,4,Int32Array)}function W(ll){return P(ll,4,Uint32Array)}function j(ll){return P(ll,4,Float32Array)}function H(ll){return P(ll,8,Float64Array)}function me(ll,_l){const oa=ll.length,Ru=_(_l.srcType,oa),ga=1/_l.factor;for(let _s=0;_s<oa;_s++)Ru[_s]=ga*ll[_s];return Ru}function $e(ll,_l){const oa=ll.length,Ru=_(_l.srcType,oa),ga=(_l.max-_l.min)/(_l.numSteps-1),_s=_l.min;for(let Sa=0;Sa<oa;Sa++)Ru[Sa]=_s+ga*ll[Sa];return Ru}function De(ll,_l){const oa=v(_l.srcType,_l.srcSize);let Ru=0;for(let ga=0,_s=ll.length;ga<_s;ga+=2){const Sa=ll[ga],Ra=ll[ga+1];for(let Da=0;Da<Ra;++Da)oa[Ru++]=Sa}return oa}function le(ll,_l){const oa=ll.length,Ru=v(_l.srcType,oa);if(!oa)return ll;Ru[0]=ll[0]+(_l.origin|0);for(let ga=1;ga<oa;++ga)Ru[ga]=ll[ga]+Ru[ga-1];return Ru}function Ce(ll,_l){const oa=_l.byteCount===1?127:32767,Ru=-oa-1,ga=ll.length,_s=new Int32Array(_l.srcSize);let Sa=0,Ra=0;for(;Sa<ga;){let Da=0,Fa=ll[Sa];for(;Fa===oa||Fa===Ru;)Da+=Fa,Sa++,Fa=ll[Sa];Da+=Fa,_s[Ra]=Da,Sa++,Ra++}return _s}function Me(ll,_l){const oa=_l.byteCount===1?255:65535,Ru=ll.length,ga=new Int32Array(_l.srcSize);let _s=0,Sa=0;for(;_s<Ru;){let Ra=0,Da=ll[_s];for(;Da===oa;)Ra+=Da,_s++,Da=ll[_s];Ra+=Da,ga[Sa]=Ra,_s++,Sa++}return ga}function _n(ll,_l){return ll.length===_l.srcSize?ll:_l.isUnsigned?Me(ll,_l):Ce(ll,_l)}function _i(ll,_l){const oa=d({encoding:_l.offsetEncoding,data:_l.offsets}),Ru=d({encoding:_l.dataEncoding,data:ll}),ga=_l.stringData,_s=new Array(oa.length);_s[0]="";for(let Da=1,Fa=oa.length;Da<Fa;Da++)_s[Da]=ga.substring(oa[Da-1],oa[Da]);let Sa=0;const Ra=new Array(Ru.length);for(let Da=0,Fa=Ru.length;Da<Fa;Da++)Ra[Sa++]=_s[Ru[Da]+1];return Ra}},"./src/parsers/cifutils/encoding.ts":(n,t,i)=>{i.r(t),i.d(t,{Encoding:()=>o,VERSION:()=>s});const s="0.3.0";var o;(function(f){(function(v){v[v.Int8=1]="Int8",v[v.Int16=2]="Int16",v[v.Int32=3]="Int32",v[v.Uint8=4]="Uint8",v[v.Uint16=5]="Uint16",v[v.Uint32=6]="Uint32"})(f.IntDataType||(f.IntDataType={})),function(v){v[v.Float32=32]="Float32",v[v.Float64=33]="Float64"}(f.FloatDataType||(f.FloatDataType={}));function d(v){let _;return v instanceof Int8Array?_=f.IntDataType.Int8:v instanceof Int16Array?_=f.IntDataType.Int16:v instanceof Int32Array?_=f.IntDataType.Int32:v instanceof Uint8Array?_=f.IntDataType.Uint8:v instanceof Uint16Array?_=f.IntDataType.Uint16:v instanceof Uint32Array?_=f.IntDataType.Uint32:v instanceof Float32Array?_=f.FloatDataType.Float32:v instanceof Float64Array?_=f.FloatDataType.Float64:_=f.IntDataType.Int32,_}f.getDataType=d;function p(v){if(v instanceof Int8Array||v instanceof Int16Array||v instanceof Int32Array)return!0;for(let _=0,k=v.length;_<k;_++)if(_<0)return!1;return!0}f.isSignedIntegerDataType=p})(o||(o={}))},"./src/parsers/index.ts":(n,t,i)=>{i.r(t),i.d(t,{Parsers:()=>me,bondLength:()=>H.bondLength,setBondLength:()=>H.setBondLength});var s=i("./src/parsers/VASP.ts"),o=i("./src/parsers/CUBE.ts"),f=i("./src/parsers/XYZ.ts"),d=i("./src/parsers/SDF.ts"),p=i("./src/parsers/CDJSON.ts"),v=i("./src/parsers/CIF.ts"),_=i("./src/parsers/MOL2.ts"),k=i("./src/parsers/PDB.ts"),P=i("./src/parsers/PQR.ts"),L=i("./src/parsers/MMTF.ts"),G=i("./src/parsers/PRMTOP.ts"),Z=i("./src/parsers/GRO.ts"),W=i("./src/parsers/LAMMPSTRJ.ts"),j=i("./src/parsers/BCIF.ts"),H=i("./src/parsers/utils/bondLength.ts");const me={vasp:s.VASP,VASP:s.VASP,cube:o.CUBE,CUBE:o.CUBE,xyz:f.XYZ,XYZ:f.XYZ,sdf:d.SDF,SDF:d.SDF,json:p.CDJSON,cdjson:p.CDJSON,CDJSON:p.CDJSON,mcif:v.CIF,cif:v.CIF,CIF:v.CIF,mol2:_.MOL2,MOL2:_.MOL2,pdb:k.PDB,PDB:k.PDB,pdbqt:k.PDB,PDBQT:k.PDB,pqr:P.PQR,PQR:P.PQR,mmtf:L.MMTFparser,MMTF:L.MMTFparser,prmtop:G.PRMTOP,PRMTOP:G.PRMTOP,gro:Z.GRO,GRO:Z.GRO,lammpstrj:W.LAMMPSTRJ,LAMMPSTRJ:W.LAMMPSTRJ,bcif:j.BCIF,BCIF:j.BCIF}},"./src/parsers/utils/anumToSymbol.ts":(n,t,i)=>{i.r(t),i.d(t,{anumToSymbol:()=>s});const s={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"}},"./src/parsers/utils/areConnected.ts":(n,t,i)=>{i.r(t),i.d(t,{areConnected:()=>f});var s=i("./src/parsers/utils/bondLength.ts");const o=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function f(d,p,v){if(v&&v.unboundCations&&(o.has(d.elem)||o.has(p.elem)))return!1;let _=(0,s.bondLength)(d.elem)+(0,s.bondLength)(p.elem);_+=.25,_*=_;let k=d.x-p.x;if(k*=k,k>_)return!1;let P=d.y-p.y;if(P*=P,P>_)return!1;let L=d.z-p.z;if(L*=L,L>_)return!1;const G=k+P+L;return!(isNaN(G)||G<.5||G>_||d.altLoc!==p.altLoc&&d.altLoc.trim()!==""&&p.altLoc.trim()!=="")}},"./src/parsers/utils/assignBackboneHBonds.ts":(n,t,i)=>{i.r(t),i.d(t,{assignBackboneHBonds:()=>s});function s(o,f){const d=f||3.2,p=d*d,v=[];for(let _=0,k=o.length;_<k;_++){o[_].index=_;const P=o[_];!P.hetflag&&(P.atom==="N"||P.atom==="O")&&(v.push(P),P.hbondOther=null,P.hbondDistanceSq=Number.POSITIVE_INFINITY)}v.sort(function(_,k){return _.z-k.z});for(let _=0,k=v.length;_<k;_++){const P=v[_];for(let L=_+1;L<k;L++){const G=v[L],Z=G.z-P.z;if(Z>d)break;if(G.atom==P.atom)continue;const W=Math.abs(G.y-P.y);if(W>d)continue;const j=Math.abs(G.x-P.x);if(j>d)continue;const H=j*j+W*W+Z*Z;H>p||G.chain==P.chain&&Math.abs(G.resi-P.resi)<4||(H<P.hbondDistanceSq&&(P.hbondOther=G,P.hbondDistanceSq=H),H<G.hbondDistanceSq&&(G.hbondOther=P,G.hbondDistanceSq=H))}}}},"./src/parsers/utils/assignBonds.ts":(n,t,i)=>{i.r(t),i.d(t,{assignBonds:()=>d});var s=i("./src/parsers/utils/areConnected.ts");const o=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],f=4.95;function d(p,v){for(let P=0,L=p.length;P<L;P++)p[P].index||(p[P].index=P);const _={x:{y:{z:[]}}};for(let P=0;P<p.length;P++){const L=p[P],G=Math.floor(L.x/f),Z=Math.floor(L.y/f),W=Math.floor(L.z/f);_[G]||(_[G]={}),_[G][Z]||(_[G][Z]={}),_[G][Z][W]||(_[G][Z][W]=[]),_[G][Z][W].push(L)}function k(P,L){for(let G=0;G<P.length;G++){const Z=P[G];for(let W=0;W<L.length;W++){const j=L[W];if((0,s.areConnected)(Z,j,v)){const H=Z.bonds.indexOf(j.index),me=j.bonds.indexOf(Z.index);H===-1&&me===-1?(Z.bonds.push(j.index),Z.bondOrder.push(1),j.bonds.push(Z.index),j.bondOrder.push(1)):H===-1?(Z.bonds.push(j.index),Z.bondOrder.push(j.bondOrder[me])):me===-1&&(j.bonds.push(Z.index),j.bondOrder.push(Z.bondOrder[H]))}}}}for(let P in _){const L=parseInt(P);for(let G in _[L]){const Z=parseInt(G);for(let W in _[L][Z]){const j=parseInt(W),H=_[L][Z][j];for(let me=0;me<H.length;me++){const $e=H[me];for(let De=me+1;De<H.length;De++){const le=H[De];(0,s.areConnected)($e,le,v)&&$e.bonds.indexOf(le.index)==-1&&($e.bonds.push(le.index),$e.bondOrder.push(1),le.bonds.push($e.index),le.bondOrder.push(1))}}for(let me=0;me<o.length;me++){const $e=o[me];if(!_[L+$e.x]||!_[L+$e.x][Z+$e.y]||!_[L+$e.x][Z+$e.y][j+$e.z])continue;const De=_[L+$e.x][Z+$e.y][j+$e.z];k(H,De)}}}}}},"./src/parsers/utils/assignPDBBonds.ts":(n,t,i)=>{i.r(t),i.d(t,{assignPDBBonds:()=>d});var s=i("./src/parsers/utils/areConnected.ts"),o=i("./src/parsers/utils/assignBonds.ts"),f=i("./src/parsers/utils/standardResidues.ts");function d(p,v){const _=[],k=[];for(let Z=0,W=p.length;Z<W;Z++){const j=p[Z];j.index=Z,j.hetflag||!f.standardResidues.has(j.resn)?k.push(j):_.push(j)}(0,o.assignBonds)(k,v),_.sort(function(Z,W){return Z.chain!==W.chain?Z.chain<W.chain?-1:1:Z.resi-W.resi});let P=-1,L=-1,G;for(let Z=0,W=_.length;Z<W;Z++){const j=_[Z];j.resi!==P&&(P=j.resi,G||L++,G=!1),j.reschain=L;for(let H=Z+1;H<_.length;H++){const me=_[H];if(me.chain!==j.chain||me.resi-j.resi>1)break;(0,s.areConnected)(j,me,v)&&(j.bonds.indexOf(me.index)===-1&&(j.bonds.push(me.index),j.bondOrder.push(1),me.bonds.push(j.index),me.bondOrder.push(1)),j.resi!==me.resi&&(G=!0))}}}},"./src/parsers/utils/atomNameToElem.ts":(n,t,i)=>{i.r(t),i.d(t,{atomNameToElem:()=>o});var s=i("./src/parsers/utils/bondLength.ts");function o(f,d){let p=f.replace(/ /g,"");return p.length>0&&p[0]==="H"&&p!=="Hg"&&p!=="He"&&p!=="Hf"&&p!=="Hs"&&p!=="Ho"&&(p="H"),p.length>1&&(p=p[0].toUpperCase()+p.substring(1).toLowerCase(),s.bondTable[p]===void 0?p=p[0]:d&&(p==="Ca"||p==="Cd")&&(p="C")),p}},"./src/parsers/utils/bondLength.ts":(n,t,i)=>{i.r(t),i.d(t,{bondLength:()=>o,bondTable:()=>s,setBondLength:()=>f});let s={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function o(d){return s[d]||1.6}function f(d,p){p<0&&(p=0),s[d]=p}},"./src/parsers/utils/computeSecondaryStructure.ts":(n,t,i)=>{i.r(t),i.d(t,{computeSecondaryStructure:()=>o});var s=i("./src/parsers/utils/assignBackboneHBonds.ts");function o(f,d){(0,s.assignBackboneHBonds)(f,d);const p={};let v,_,k,P,L,G;for(v=0,_=f.length;v<_;v++)if(L=f[v],p[L.chain]===void 0&&(p[L.chain]=[]),isFinite(L.hbondDistanceSq)){const Z=L.hbondOther;p[Z.chain]===void 0&&(p[Z.chain]=[]),Math.abs(Z.resi-L.resi)===4&&(p[L.chain][L.resi]="h")}for(k in p)for(P=1;P<p[k].length-1;P++){const Z=p[k][P-1],W=p[k][P+1];G=p[k][P],Z=="h"&&Z==W&&G!=Z&&(p[k][P]=Z)}for(v=0,_=f.length;v<_;v++)L=f[v],isFinite(L.hbondDistanceSq)&&p[L.chain][L.resi]!="h"&&L.ss!=="h"&&(p[L.chain][L.resi]="maybesheet");for(let Z=0,W=f.length;Z<W;Z++)if(L=f[Z],isFinite(L.hbondDistanceSq)&&p[L.chain][L.resi]=="maybesheet"){let j=L.hbondOther,H=p[j.chain][j.resi];(H=="maybesheet"||H=="s")&&(p[L.chain][L.resi]="s",p[j.chain][j.resi]="s")}for(let Z in p){for(let W=1;W<p[Z].length-1;W++){const j=p[Z][W-1],H=p[Z][W+1];G=p[Z][W],j=="s"&&j==H&&G!=j&&(p[Z][W]=j)}for(let W=0;W<p[Z].length;W++){const j=p[Z][W];(j=="h"||j=="s")&&p[Z][W-1]!=j&&p[Z][W+1]!=j&&delete p[Z][W]}}for(v=0,_=f.length;v<_;v++)L=f[v],G=p[L.chain][L.resi],delete L.hbondOther,delete L.hbondDistanceSq,!(G===void 0||G==="maybesheet")&&(L.ss=G,p[L.chain][L.resi-1]!=G&&(L.ssbegin=!0),p[L.chain][L.resi+1]!=G&&(L.ssend=!0))}},"./src/parsers/utils/getSinglePDB.ts":(n,t,i)=>{i.r(t),i.d(t,{getSinglePDB:()=>P});var s=i("./src/WebGL/index.ts"),o=i("./src/parsers/utils/atomNameToElem.ts"),f=i("./src/parsers/utils/bondLength.ts"),d=i("./src/parsers/utils/computeSecondaryStructure.ts"),p=i("./src/parsers/utils/isEmpty.ts"),v=i("./src/parsers/utils/processSymmetries.ts"),_=i("./src/parsers/utils/assignPDBBonds.ts"),k=i("./src/parsers/utils/validateBonds.ts");function P(L,G,Z){const W=[],j=G.assignBonds===void 0?!0:G.assignBonds,H=!G.keepH,me=!!G.noSecondaryStructure,$e=!G.noComputeSecondaryStructure,De=!G.doAssembly,le=G.altLoc?G.altLoc:"A",Ce={symmetries:[],cryst:void 0};let Me,_n=[];const _i=[];let ll;const _l={};for(let oa=0;oa<L.length;oa++){ll=L[oa].replace(/^\s*/,"");const Ru=ll.substring(0,6);let ga,_s,Sa;if(Ru.indexOf("END")===0){if(_n=L.slice(oa+1),Ru==="END")for(const Ra in Z)Z.hasOwnProperty(Ra)&&delete Z[Ra];break}else if(Ru==="ATOM  "||Ru==="HETATM"){let Ra,Da,Fa,Na,_a,Pa,qc,uf,_h,Uh,Kd,ud;if(Kd=ll.substring(16,17),Kd!==" "&&Kd!==le&&le!=="*"||(Uh=parseInt(ll.substring(6,11)),Me=ll.substring(12,16).replace(/ /g,""),Ra=ll.substring(17,20).replace(/ /g,""),Da=ll.substring(21,22),Fa=parseInt(ll.substring(22,26)),Na=ll.substring(26,27),_a=parseFloat(ll.substring(30,38)),Pa=parseFloat(ll.substring(38,46)),qc=parseFloat(ll.substring(46,54)),ud=parseFloat(ll.substring(60,68)),_h=ll.substring(76,78).replace(/ /g,""),_h===""||f.bondTable[_h]===void 0?_h=(0,o.atomNameToElem)(ll.substring(12,14),ll[0]=="A"):_h=_h[0].toUpperCase()+_h.substring(1).toLowerCase(),_h==="H"&&H))continue;Ru[0]=="H"?uf=!0:uf=!1,_i[Uh]=W.length,W.push({resn:Ra,x:_a,y:Pa,z:qc,elem:_h,hetflag:uf,altLoc:Kd,chain:Da,resi:Fa,icode:Na,rescode:Fa+(Na!==" "?"^"+Na:""),serial:Uh,atom:Me,bonds:[],ss:"c",bondOrder:[],properties:{},b:ud,pdbline:ll})}else if(Ru==="SHEET "){ga=ll.substring(21,22),_s=parseInt(ll.substring(22,26)),Sa=parseInt(ll.substring(33,37)),ga in Z||(Z[ga]={}),Z[ga][_s]="s1";for(let Ra=_s+1;Ra<Sa;Ra++)Z[ga][Ra]="s";Z[ga][Sa]="s2"}else if(Ru==="CONECT"){const Ra=parseInt(ll.substring(6,11)),Da=_i[Ra],Fa=W[Da],Na=[11,16,21,26];for(let _a=0;_a<4;_a++){const Pa=parseInt(ll.substring(Na[_a],Na[_a]+5)),qc=_i[Pa];let uf=Da+":"+qc;const _h=W[qc];if(Fa!==void 0&&_h!==void 0)if(!_l[uf])_l[uf]=1,(Fa.bonds.length==0||Fa.bonds[Fa.bonds.length-1]!==qc)&&(Fa.bonds.push(qc),Fa.bondOrder.push(1));else{_l[uf]+=1;for(let Uh=0;Uh<Fa.bonds.length;Uh++)if(Fa.bonds[Uh]==qc){const Kd=_l[uf];Kd>=4?Fa.bondOrder[Uh]=1:Fa.bondOrder[Uh]=Kd}}}}else if(Ru==="HELIX "){ga=ll.substring(19,20),_s=parseInt(ll.substring(21,25)),Sa=parseInt(ll.substring(33,37)),ga in Z||(Z[ga]={}),Z[ga][_s]="h1";for(let Ra=_s+1;Ra<Sa;Ra++)Z[ga][Ra]="h";Z[ga][Sa]="h2"}else if(!De&&Ru==="REMARK"&&ll.substring(13,18)==="BIOMT"){let Ra,Da=new s.Matrix4;for(Ra=1;Ra<=3;Ra++)if(ll=L[oa].replace(/^\s*/,""),parseInt(ll.substring(18,19))==Ra)Da.elements[Ra-1]=parseFloat(ll.substring(23,33)),Da.elements[Ra-1+4]=parseFloat(ll.substring(33,43)),Da.elements[Ra-1+8]=parseFloat(ll.substring(43,53)),Da.elements[Ra-1+12]=parseFloat(ll.substring(53)),oa++;else for(;ll.substring(13,18)==="BIOMT";)oa++,ll=L[oa].replace(/^\s*/,"");Da.elements[3]=0,Da.elements[7]=0,Da.elements[11]=0,Da.elements[15]=1,Ce.symmetries.push(Da),oa--}else if(Ru==="CRYST1"){let Ra,Da,Fa,Na,_a,Pa;Ra=parseFloat(ll.substring(7,15)),Da=parseFloat(ll.substring(16,24)),Fa=parseFloat(ll.substring(25,33)),Na=parseFloat(ll.substring(34,40)),_a=parseFloat(ll.substring(41,47)),Pa=parseFloat(ll.substring(48,54)),Ce.cryst={a:Ra,b:Da,c:Fa,alpha:Na,beta:_a,gamma:Pa}}else if(Ru==="ANISOU"){const Ra=parseInt(ll.substring(6,11)),Da=_i[Ra],Fa=W[Da];if(Fa){const Na=ll.substring(30).trim().split(/\s+/),_a={u11:parseInt(Na[0]),u22:parseInt(Na[1]),u33:parseInt(Na[2]),u12:parseInt(Na[3]),u13:parseInt(Na[4]),u23:parseInt(Na[5])};Fa.uMat=_a}}}if((0,k.validateBonds)(W,_i),j&&(0,_.assignPDBBonds)(W,G),De||(0,v.processSymmetries)(Ce.symmetries,W,G,Ce.cryst),$e&&!me&&(0,d.computeSecondaryStructure)(W,G.hbondCutoff),!(0,p.isEmpty)(Z))for(let oa=0;oa<W.length;oa++){const Ru=W[oa];if(Ru!==void 0&&Ru.chain in Z&&Ru.resi in Z[Ru.chain]){const ga=Z[Ru.chain][Ru.resi];Ru.ss=ga[0],ga.length>1&&(ga[1]=="1"?Ru.ssbegin=!0:ga[1]=="2"&&(Ru.ssend=!0))}}return[W,Ce,_n]}},"./src/parsers/utils/isEmpty.ts":(n,t,i)=>{i.r(t),i.d(t,{isEmpty:()=>s});function s(o){for(const f in o)return!1;return!0}},"./src/parsers/utils/processSymmetries.ts":(n,t,i)=>{i.r(t),i.d(t,{processSymmetries:()=>o});var s=i("./src/WebGL/index.ts");function o(f,d,p,v){const _=!p.duplicateAssemblyAtoms,k=d.length;let P=k,L=-1,G=null,Z=null;(p.normalizeAssembly||p.wrapAtoms)&&v&&(G=(0,s.conversionMatrix3)(v.a,v.b,v.c,v.alpha,v.beta,v.gamma),Z=new s.Matrix3,Z.getInverse3(G));let W=function(me){let $e=me.clone().applyMatrix3(Z);const De=[$e.x,$e.y,$e.z],le=[0,0,0];for(let Me=0;Me<3;Me++){for(;De[Me]<-.001;)De[Me]+=1,le[Me]+=1;for(;De[Me]>1.001;)De[Me]-=1,le[Me]-=1}const Ce=new s.Vector3(le[0],le[1],le[2]);return Ce.applyMatrix3(G),Ce};if(p.normalizeAssembly&&v)for(let me=0;me<f.length;me++){const $e=new s.Vector3(0,0,0);for(let le=0;le<k;le++){const Ce=new s.Vector3(d[le].x,d[le].y,d[le].z);Ce.applyMatrix4(f[me]),$e.add(Ce)}$e.divideScalar(k);const De=W($e);f[me].isNearlyIdentity()&&De.lengthSq()>.001&&(L=me),f[me].translate(De)}if(_){if(f.length>1)for(let me=0;me<d.length;me++){var j=[];for(let $e=0;$e<f.length;$e++)if(!f[$e].isNearlyIdentity()){var H=new s.Vector3;H.set(d[me].x,d[me].y,d[me].z),H.applyMatrix4(f[$e]),j.push(H)}d[me].symmetries=j}}else{for(let me=0;me<k;me++)d[me].sym=-1;for(let me=0;me<f.length;me++)if(!f[me].isNearlyIdentity()&&L!=me){let $e=new s.Vector3;for(let De=0;De<k;De++){const le=[];for(let Me=0;Me<d[De].bonds.length;Me++)le.push(d[De].bonds[Me]+P);if($e.set(d[De].x,d[De].y,d[De].z),$e.applyMatrix4(f[me]),p.wrapAtoms&&v){let Me=W($e);$e.add(Me)}const Ce={};for(const Me in d[De])Ce[Me]=d[De][Me];Ce.x=$e.x,Ce.y=$e.y,Ce.z=$e.z,Ce.bonds=le,Ce.sym=me,Ce.index=d.length,d.push(Ce)}P=d.length}else for(let $e=0;$e<k;$e++)d[$e].sym=me;if(p.wrapAtoms&&v){let me=new s.Vector3;for(let $e=0;$e<k;$e++){me.set(d[$e].x,d[$e].y,d[$e].z);let De=W(me);me.add(De),d[$e].x=me.x,d[$e].y=me.y,d[$e].z=me.z}}if(L>=0){const me=new s.Vector3;for(let $e=0;$e<k;$e++)me.set(d[$e].x,d[$e].y,d[$e].z),me.applyMatrix4(f[L]),d[$e].x=me.x,d[$e].y=me.y,d[$e].z=me.z}f.length=0}}},"./src/parsers/utils/standardResidues.ts":(n,t,i)=>{i.r(t),i.d(t,{standardResidues:()=>s});const s=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"])},"./src/parsers/utils/validateBonds.ts":(n,t,i)=>{i.r(t),i.d(t,{validateBonds:()=>s});function s(o,f){for(let d=0,p=o.length;d<p;d++){const v=o[d];for(let _=0;_<v.bonds.length;_++){const k=v.bonds[_],P=o[k],L=f[v.serial];P&&L&&P.bonds.indexOf(L)<0&&(P.bonds.push(L),P.bondOrder.push(v.bondOrder[_]))}}}},"./src/partialCharges.ts":(n,t,i)=>{i.r(t),i.d(t,{applyPartialCharges:()=>o,partialCharges:()=>s});const s={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function o(f,d){if((!d||typeof f.partialCharge>"u")&&f.resn&&f.atom){var p=f.resn+":"+f.atom;f.properties.partialCharge=s[p]}}},"./src/specs.ts":(n,t,i)=>{i.r(t)},"./src/utilities.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/Gradient.ts"),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/VolumeData.ts"),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/colors.ts"),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/pako/dist/pako.esm.mjs");function extend(n,t){for(var i in t)t.hasOwnProperty(i)&&t[i]!==void 0&&(n[i]=t[i]);return n}function deepCopy(n){let t,i,s;if(n==null)return{};if(typeof n!="object"||n===null)return n;t=Array.isArray(n)?[]:{};for(s in n)i=n[s],t[s]=deepCopy(i);return t}function isNumeric(n){var t=typeof n;return(t==="number"||t==="string")&&!isNaN(n-parseFloat(n))}function isEmptyObject(n){var t;for(t in n)return!1;return!0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(n){n&&(n.volformat&&!(n.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData)&&(n.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(n.voldata,n.volformat)),n.volscheme&&(n.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(n.volscheme)))}function getExtent(n,t){var i,s,o,f,d,p,v,_,k,P,L=!t;if(i=s=o=9999,f=d=p=-9999,v=_=k=P=0,n.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var G=0;G<n.length;G++){var Z=n[G];if(!(typeof Z>"u"||!isFinite(Z.x)||!isFinite(Z.y)||!isFinite(Z.z))&&(P++,v+=Z.x,_+=Z.y,k+=Z.z,i=i<Z.x?i:Z.x,s=s<Z.y?s:Z.y,o=o<Z.z?o:Z.z,f=f>Z.x?f:Z.x,d=d>Z.y?d:Z.y,p=p>Z.z?p:Z.z,Z.symmetries&&L))for(var W=0;W<Z.symmetries.length;W++)P++,v+=Z.symmetries[W].x,_+=Z.symmetries[W].y,k+=Z.symmetries[W].z,i=i<Z.symmetries[W].x?i:Z.symmetries[W].x,s=s<Z.symmetries[W].y?s:Z.symmetries[W].y,o=o<Z.symmetries[W].z?o:Z.symmetries[W].z,f=f>Z.symmetries[W].x?f:Z.symmetries[W].x,d=d>Z.symmetries[W].y?d:Z.symmetries[W].y,p=p>Z.symmetries[W].z?p:Z.symmetries[W].z}return[[i,s,o],[f,d,p],[v/P,_/P,k/P]]}function getPropertyRange(n,t){for(var i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=0,f=n.length;o<f;o++){var d=n[o],p=getAtomProperty(d,t);p!=null&&(p<i&&(i=p),p>s&&(s=p))}return!isFinite(i)&&!isFinite(s)?i=s=0:isFinite(i)?isFinite(s)||(s=i):i=s,[i,s]}class PausableTimer{constructor(t,i,s){this.total_time_run=0,this.fn=t,this.arg=s,this.countdown=i,this.start_time=new Date().getTime(),this.ident=setTimeout(t,i,s)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(n){for(var t=window.atob(n),i=t.length,s=new Uint8Array(i),o=0;o<i;o++)s[o]=t.charCodeAt(o);return s}function getAtomProperty(n,t){var i=null;return n.properties&&typeof n.properties[t]<"u"?i=n.properties[t]:typeof n[t]<"u"&&(i=n[t]),i}function mergeGeos(n,t){var i=t.geometry;i!==void 0&&n.geometryGroups.push(i.geometryGroups[0])}function specStringToObject(n){if(typeof n=="object")return n;if(typeof n>"u"||n==null)return n;try{return JSON.parse(n)}catch{}n=n.replace(/%7E/g,"~");var t=function(L){return isNumeric(L)?Math.floor(parseFloat(L))==parseInt(L)||L.indexOf(".")>=0?parseFloat(L):parseInt(L):L==="true"?!0:L==="false"?!1:L},i={};if(n==="all")return i;for(var s=n.split(";"),o=0;o<s.length;o++){var f=s[o].split(":"),d=f[0],p={},v=f[1];if(v)if(v=v.replace(/~/g,"="),v.indexOf("=")!==-1)for(var _=v.split(","),k=0;k<_.length;k++){var P=_[k].split("=",2);p[P[0]]=t(P[1])}else v.indexOf(",")!==-1?p=v.split(","):p=t(v);i[d]=p}return i}function checkStatus(n){if(!n.ok)throw new Error(`HTTP ${n.status} - ${n.statusText}`);return n}function get(n,t){var i=fetch(n).then(checkStatus).then(s=>s.text());return t?i.then(t):i}function getbin(n,t,i,s){var o;return i=="POST"?o=fetch(n,{method:"POST",body:s}).then(f=>checkStatus(f)).then(f=>f.arrayBuffer()):o=fetch(n).then(f=>checkStatus(f)).then(f=>f.arrayBuffer()),t?o.then(t):o}function download(n,t,i,s){var o="",f="",d="",p=null,v=t.addModel();if(n.indexOf(":")<0&&(n.length==4?n="pdb:"+n:isNaN(n)?n="url:"+n:n="cid:"+n),n.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),n="bcif:"+n.slice(5)),n.substring(0,5)==="bcif:")n=n.substring(5).toUpperCase(),d="https://models.rcsb.org/"+n+".bcif.gz",i&&typeof i.noComputeSecondaryStructure>"u"&&(i.noComputeSecondaryStructure=!0),p=new Promise(function(k){getbin(d).then(function(P){v.addMolData(P,"bcif.gz",i),t.zoomTo(),t.render(),k(v)},function(){console.error("fetch of "+d+" failed.")})});else{if(n.substring(0,4)==="pdb:"){if(o="bcif",i&&i.format&&(o=i.format),i&&typeof i.noComputeSecondaryStructure>"u"&&(i.noComputeSecondaryStructure=!0),n=n.substring(4).toUpperCase(),!n.match(/^[1-9][A-Za-z0-9]{3}$/)){alert("Wrong PDB ID");return}o=="bcif"?d="https://models.rcsb.org/"+n.toUpperCase()+".bcif.gz":(f=i&&i.pdbUri?i.pdbUri:"https://files.rcsb.org/view/",d=f+n+"."+o)}else if(n.substring(0,4)=="cid:"){if(o="sdf",n=n.substring(4),!n.match(/^[0-9]+$/)){alert("Wrong Compound ID");return}d="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+n+"/SDF?record_type=3d"}else n.substring(0,4)=="url:"&&(d=n.substring(4),o=d);var _=function(k){v.addMolData(k,o,i),t.zoomTo(),t.render()};p=new Promise(function(k){o=="bcif"?getbin(d).then(function(P){_(P),k(v)}).catch(function(){f=i&&i.pdbUri?i.pdbUri:"https://files.rcsb.org/view/",d=f+n+".pdb",o="pdb",console.warn("falling back to pdb format"),get(d).then(function(P){_(P),k(v)}).catch(function(P){_(""),k(v),console.error("fetch of "+d+" failed: "+P.statusText)})}):get(d).then(function(P){_(P),k(v)}).catch(function(P){_(""),k(v),console.error("fetch of "+d+" failed: "+P.statusText)})})}return s?(p.then(function(k){s(k)}),v):p}function getColorFromStyle(n,t){let i=t.colorscheme;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[i]<"u")i=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[i];else if(typeof i=="string"&&i.endsWith("Carbon")){let d=i.substring(0,i.lastIndexOf("Carbon")).toLowerCase();if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[d]<"u"){let p=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);p.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[d],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[i]={prop:"elem",map:p},i=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[i]}}let s=n.color;if(typeof t.color<"u"&&t.color!="spectrum"&&(s=t.color),typeof i<"u"){let d,p;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[i]<"u")i=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[i],typeof i[n[i.prop]]<"u"&&(s=i.map[n[i.prop]]);else if(typeof i[n[i.prop]]<"u")s=i.map[n[i.prop]];else if(typeof i.prop<"u"&&typeof i.gradient<"u"){d=i.prop;var o=i.gradient;o instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(o=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(i));let v=o.range()||[-1,1];p=getAtomProperty(n,d),p!=null&&(s=o.valueToHex(p,v))}else typeof i.prop<"u"&&typeof i.map<"u"?(d=i.prop,p=getAtomProperty(n,d),typeof i.map[p]<"u"&&(s=i.map[p])):typeof t.colorscheme[n.elem]<"u"?s=t.colorscheme[n.elem]:console.warn("Could not interpret colorscheme "+i)}else typeof t.colorfunc<"u"&&(s=t.colorfunc(n));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(s)}function getElement(n){let t=n;return typeof n=="string"?t=document.querySelector("#"+n):typeof n=="object"&&n.get&&(t=n.get(0)),t}function inflateString(n,t=!0){let i;return typeof n=="string"?i=new TextEncoder().encode(n):i=new Uint8Array(n),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(i,{to:t?"string":null})}},"./node_modules/upng-js/UPNG.js":(n,t,i)=>{(function(){var s={},o;n.exports=s,o=i("./node_modules/upng-js/node_modules/pako/index.js"),function(f,d){f.toRGBA8=function(p){var v=p.width,_=p.height;if(p.tabs.acTL==null)return[f.toRGBA8.decodeImage(p.data,v,_,p).buffer];var k=[];p.frames[0].data==null&&(p.frames[0].data=p.data);for(var P,L=new Uint8Array(v*_*4),G=0;G<p.frames.length;G++){var Z=p.frames[G],W=Z.rect.x,j=Z.rect.y,H=Z.rect.width,me=Z.rect.height,$e=f.toRGBA8.decodeImage(Z.data,H,me,p);if(G==0?P=$e:Z.blend==0?f._copyTile($e,H,me,P,v,_,W,j,0):Z.blend==1&&f._copyTile($e,H,me,P,v,_,W,j,1),k.push(P.buffer),P=P.slice(0),Z.dispose!=0){if(Z.dispose==1)f._copyTile(L,H,me,P,v,_,W,j,0);else if(Z.dispose==2){for(var De=G-1;p.frames[De].dispose==2;)De--;P=new Uint8Array(k[De]).slice(0)}}}return k},f.toRGBA8.decodeImage=function(p,v,_,k){var P=v*_,L=f.decode._getBPP(k),G=Math.ceil(v*L/8),Z=new Uint8Array(P*4),W=new Uint32Array(Z.buffer),j=k.ctype,H=k.depth,me=f._bin.readUshort;if(j==6){var $e=P<<2;if(H==8)for(var De=0;De<$e;De++)Z[De]=p[De];if(H==16)for(var De=0;De<$e;De++)Z[De]=p[De<<1]}else if(j==2){var le=k.tabs.tRNS,Ce=-1,Me=-1,_n=-1;if(le&&(Ce=le[0],Me=le[1],_n=le[2]),H==8)for(var De=0;De<P;De++){var _i=De<<2,ll=De*3;Z[_i]=p[ll],Z[_i+1]=p[ll+1],Z[_i+2]=p[ll+2],Z[_i+3]=255,Ce!=-1&&p[ll]==Ce&&p[ll+1]==Me&&p[ll+2]==_n&&(Z[_i+3]=0)}if(H==16)for(var De=0;De<P;De++){var _i=De<<2,ll=De*6;Z[_i]=p[ll],Z[_i+1]=p[ll+2],Z[_i+2]=p[ll+4],Z[_i+3]=255,Ce!=-1&&me(p,ll)==Ce&&me(p,ll+2)==Me&&me(p,ll+4)==_n&&(Z[_i+3]=0)}}else if(j==3){var _l=k.tabs.PLTE,oa=k.tabs.tRNS,Ru=oa?oa.length:0;if(H==1)for(var ga=0;ga<_;ga++)for(var _s=ga*G,Sa=ga*v,De=0;De<v;De++){var _i=Sa+De<<2,Ra=p[_s+(De>>3)]>>7-((De&7)<<0)&1,Da=3*Ra;Z[_i]=_l[Da],Z[_i+1]=_l[Da+1],Z[_i+2]=_l[Da+2],Z[_i+3]=Ra<Ru?oa[Ra]:255}if(H==2)for(var ga=0;ga<_;ga++)for(var _s=ga*G,Sa=ga*v,De=0;De<v;De++){var _i=Sa+De<<2,Ra=p[_s+(De>>2)]>>6-((De&3)<<1)&3,Da=3*Ra;Z[_i]=_l[Da],Z[_i+1]=_l[Da+1],Z[_i+2]=_l[Da+2],Z[_i+3]=Ra<Ru?oa[Ra]:255}if(H==4)for(var ga=0;ga<_;ga++)for(var _s=ga*G,Sa=ga*v,De=0;De<v;De++){var _i=Sa+De<<2,Ra=p[_s+(De>>1)]>>4-((De&1)<<2)&15,Da=3*Ra;Z[_i]=_l[Da],Z[_i+1]=_l[Da+1],Z[_i+2]=_l[Da+2],Z[_i+3]=Ra<Ru?oa[Ra]:255}if(H==8)for(var De=0;De<P;De++){var _i=De<<2,Ra=p[De],Da=3*Ra;Z[_i]=_l[Da],Z[_i+1]=_l[Da+1],Z[_i+2]=_l[Da+2],Z[_i+3]=Ra<Ru?oa[Ra]:255}}else if(j==4){if(H==8)for(var De=0;De<P;De++){var _i=De<<2,Fa=De<<1,Na=p[Fa];Z[_i]=Na,Z[_i+1]=Na,Z[_i+2]=Na,Z[_i+3]=p[Fa+1]}if(H==16)for(var De=0;De<P;De++){var _i=De<<2,Fa=De<<2,Na=p[Fa];Z[_i]=Na,Z[_i+1]=Na,Z[_i+2]=Na,Z[_i+3]=p[Fa+2]}}else if(j==0){var Ce=k.tabs.tRNS?k.tabs.tRNS:-1;if(H==1)for(var De=0;De<P;De++){var Na=255*(p[De>>3]>>7-(De&7)&1),_a=Na==Ce*255?0:255;W[De]=_a<<24|Na<<16|Na<<8|Na}if(H==2)for(var De=0;De<P;De++){var Na=85*(p[De>>2]>>6-((De&3)<<1)&3),_a=Na==Ce*85?0:255;W[De]=_a<<24|Na<<16|Na<<8|Na}if(H==4)for(var De=0;De<P;De++){var Na=17*(p[De>>1]>>4-((De&1)<<2)&15),_a=Na==Ce*17?0:255;W[De]=_a<<24|Na<<16|Na<<8|Na}if(H==8)for(var De=0;De<P;De++){var Na=p[De],_a=Na==Ce?0:255;W[De]=_a<<24|Na<<16|Na<<8|Na}if(H==16)for(var De=0;De<P;De++){var Na=p[De<<1],_a=me(p,De<<1)==Ce?0:255;W[De]=_a<<24|Na<<16|Na<<8|Na}}return Z},f.decode=function(p){for(var v=new Uint8Array(p),_=8,k=f._bin,P=k.readUshort,L=k.readUint,G={tabs:{},frames:[]},Z=new Uint8Array(v.length),W=0,j,H=0,me=[137,80,78,71,13,10,26,10],$e=0;$e<8;$e++)if(v[$e]!=me[$e])throw"The input is not a PNG file!";for(;_<v.length;){var De=k.readUint(v,_);_+=4;var le=k.readASCII(v,_,4);if(_+=4,le=="IHDR")f.decode._IHDR(v,_,G);else if(le=="IDAT"){for(var $e=0;$e<De;$e++)Z[W+$e]=v[_+$e];W+=De}else if(le=="acTL")G.tabs[le]={num_frames:L(v,_),num_plays:L(v,_+4)},j=new Uint8Array(v.length);else if(le=="fcTL"){if(H!=0){var Ce=G.frames[G.frames.length-1];Ce.data=f.decode._decompress(G,j.slice(0,H),Ce.rect.width,Ce.rect.height),H=0}var Me={x:L(v,_+12),y:L(v,_+16),width:L(v,_+4),height:L(v,_+8)},_n=P(v,_+22);_n=P(v,_+20)/(_n==0?100:_n);var _i={rect:Me,delay:Math.round(_n*1e3),dispose:v[_+24],blend:v[_+25]};G.frames.push(_i)}else if(le=="fdAT"){for(var $e=0;$e<De-4;$e++)j[H+$e]=v[_+$e+4];H+=De-4}else if(le=="pHYs")G.tabs[le]=[k.readUint(v,_),k.readUint(v,_+4),v[_+8]];else if(le=="cHRM"){G.tabs[le]=[];for(var $e=0;$e<8;$e++)G.tabs[le].push(k.readUint(v,_+$e*4))}else if(le=="tEXt"){G.tabs[le]==null&&(G.tabs[le]={});var ll=k.nextZero(v,_),_l=k.readASCII(v,_,ll-_),oa=k.readASCII(v,ll+1,_+De-ll-1);G.tabs[le][_l]=oa}else if(le=="iTXt"){G.tabs[le]==null&&(G.tabs[le]={});var ll=0,Ru=_;ll=k.nextZero(v,Ru);var _l=k.readASCII(v,Ru,ll-Ru);Ru=ll+1,v[Ru],v[Ru+1],Ru+=2,ll=k.nextZero(v,Ru),k.readASCII(v,Ru,ll-Ru),Ru=ll+1,ll=k.nextZero(v,Ru),k.readUTF8(v,Ru,ll-Ru),Ru=ll+1;var oa=k.readUTF8(v,Ru,De-(Ru-_));G.tabs[le][_l]=oa}else if(le=="PLTE")G.tabs[le]=k.readBytes(v,_,De);else if(le=="hIST"){var ga=G.tabs.PLTE.length/3;G.tabs[le]=[];for(var $e=0;$e<ga;$e++)G.tabs[le].push(P(v,_+$e*2))}else if(le=="tRNS")G.ctype==3?G.tabs[le]=k.readBytes(v,_,De):G.ctype==0?G.tabs[le]=P(v,_):G.ctype==2&&(G.tabs[le]=[P(v,_),P(v,_+2),P(v,_+4)]);else if(le=="gAMA")G.tabs[le]=k.readUint(v,_)/1e5;else if(le=="sRGB")G.tabs[le]=v[_];else if(le=="bKGD")G.ctype==0||G.ctype==4?G.tabs[le]=[P(v,_)]:G.ctype==2||G.ctype==6?G.tabs[le]=[P(v,_),P(v,_+2),P(v,_+4)]:G.ctype==3&&(G.tabs[le]=v[_]);else if(le=="IEND"){if(H!=0){var Ce=G.frames[G.frames.length-1];Ce.data=f.decode._decompress(G,j.slice(0,H),Ce.rect.width,Ce.rect.height),H=0}G.data=f.decode._decompress(G,Z,G.width,G.height);break}_+=De,k.readUint(v,_),_+=4}return delete G.compress,delete G.interlace,delete G.filter,G},f.decode._decompress=function(p,v,_,k){return p.compress==0&&(v=f.decode._inflate(v)),p.interlace==0?v=f.decode._filterZero(v,p,0,_,k):p.interlace==1&&(v=f.decode._readInterlace(v,p)),v},f.decode._inflate=function(p){return d.inflate(p)},f.decode._readInterlace=function(p,v){for(var _=v.width,k=v.height,P=f.decode._getBPP(v),L=P>>3,G=Math.ceil(_*P/8),Z=new Uint8Array(k*G),W=0,j=[0,0,4,0,2,0,1],H=[0,4,0,2,0,1,0],me=[8,8,8,4,4,2,2],$e=[8,8,4,4,2,2,1],De=0;De<7;){for(var le=me[De],Ce=$e[De],Me=0,_n=0,_i=j[De];_i<k;)_i+=le,_n++;for(var ll=H[De];ll<_;)ll+=Ce,Me++;var _l=Math.ceil(Me*P/8);f.decode._filterZero(p,v,W,Me,_n);for(var oa=0,Ru=j[De];Ru<k;){for(var ga=H[De],_s=W+oa*_l<<3;ga<_;){if(P==1){var Sa=p[_s>>3];Sa=Sa>>7-(_s&7)&1,Z[Ru*G+(ga>>3)]|=Sa<<7-((ga&3)<<0)}if(P==2){var Sa=p[_s>>3];Sa=Sa>>6-(_s&7)&3,Z[Ru*G+(ga>>2)]|=Sa<<6-((ga&3)<<1)}if(P==4){var Sa=p[_s>>3];Sa=Sa>>4-(_s&7)&15,Z[Ru*G+(ga>>1)]|=Sa<<4-((ga&1)<<2)}if(P>=8)for(var Ra=Ru*G+ga*L,Da=0;Da<L;Da++)Z[Ra+Da]=p[(_s>>3)+Da];_s+=P,ga+=Ce}oa++,Ru+=le}Me*_n!=0&&(W+=_n*(1+_l)),De=De+1}return Z},f.decode._getBPP=function(p){var v=[1,null,3,1,2,null,4][p.ctype];return v*p.depth},f.decode._filterZero=function(p,v,_,k,P){var L=f.decode._getBPP(v),G=Math.ceil(k*L/8),Z=f.decode._paeth;L=Math.ceil(L/8);for(var W=0;W<P;W++){var j=_+W*G,H=j+W+1,me=p[H-1];if(me==0)for(var $e=0;$e<G;$e++)p[j+$e]=p[H+$e];else if(me==1){for(var $e=0;$e<L;$e++)p[j+$e]=p[H+$e];for(var $e=L;$e<G;$e++)p[j+$e]=p[H+$e]+p[j+$e-L]&255}else if(W==0){for(var $e=0;$e<L;$e++)p[j+$e]=p[H+$e];if(me==2)for(var $e=L;$e<G;$e++)p[j+$e]=p[H+$e]&255;if(me==3)for(var $e=L;$e<G;$e++)p[j+$e]=p[H+$e]+(p[j+$e-L]>>1)&255;if(me==4)for(var $e=L;$e<G;$e++)p[j+$e]=p[H+$e]+Z(p[j+$e-L],0,0)&255}else{if(me==2)for(var $e=0;$e<G;$e++)p[j+$e]=p[H+$e]+p[j+$e-G]&255;if(me==3){for(var $e=0;$e<L;$e++)p[j+$e]=p[H+$e]+(p[j+$e-G]>>1)&255;for(var $e=L;$e<G;$e++)p[j+$e]=p[H+$e]+(p[j+$e-G]+p[j+$e-L]>>1)&255}if(me==4){for(var $e=0;$e<L;$e++)p[j+$e]=p[H+$e]+Z(0,p[j+$e-G],0)&255;for(var $e=L;$e<G;$e++)p[j+$e]=p[H+$e]+Z(p[j+$e-L],p[j+$e-G],p[j+$e-L-G])&255}}}return p},f.decode._paeth=function(p,v,_){var k=p+v-_,P=Math.abs(k-p),L=Math.abs(k-v),G=Math.abs(k-_);return P<=L&&P<=G?p:L<=G?v:_},f.decode._IHDR=function(p,v,_){var k=f._bin;_.width=k.readUint(p,v),v+=4,_.height=k.readUint(p,v),v+=4,_.depth=p[v],v++,_.ctype=p[v],v++,_.compress=p[v],v++,_.filter=p[v],v++,_.interlace=p[v],v++},f._bin={nextZero:function(p,v){for(;p[v]!=0;)v++;return v},readUshort:function(p,v){return p[v]<<8|p[v+1]},writeUshort:function(p,v,_){p[v]=_>>8&255,p[v+1]=_&255},readUint:function(p,v){return p[v]*16777216+(p[v+1]<<16|p[v+2]<<8|p[v+3])},writeUint:function(p,v,_){p[v]=_>>24&255,p[v+1]=_>>16&255,p[v+2]=_>>8&255,p[v+3]=_&255},readASCII:function(p,v,_){for(var k="",P=0;P<_;P++)k+=String.fromCharCode(p[v+P]);return k},writeASCII:function(p,v,_){for(var k=0;k<_.length;k++)p[v+k]=_.charCodeAt(k)},readBytes:function(p,v,_){for(var k=[],P=0;P<_;P++)k.push(p[v+P]);return k},pad:function(p){return p.length<2?"0"+p:p},readUTF8:function(p,v,_){for(var k="",P,L=0;L<_;L++)k+="%"+f._bin.pad(p[v+L].toString(16));try{P=decodeURIComponent(k)}catch{return f._bin.readASCII(p,v,_)}return P}},f._copyTile=function(p,v,_,k,P,L,G,Z,W){for(var j=Math.min(v,P),H=Math.min(_,L),me=0,$e=0,De=0;De<H;De++)for(var le=0;le<j;le++)if(G>=0&&Z>=0?(me=De*v+le<<2,$e=(Z+De)*P+G+le<<2):(me=(-Z+De)*v-G+le<<2,$e=De*P+le<<2),W==0)k[$e]=p[me],k[$e+1]=p[me+1],k[$e+2]=p[me+2],k[$e+3]=p[me+3];else if(W==1){var Ce=p[me+3]*.00392156862745098,Me=p[me]*Ce,_n=p[me+1]*Ce,_i=p[me+2]*Ce,ll=k[$e+3]*(1/255),_l=k[$e]*ll,oa=k[$e+1]*ll,Ru=k[$e+2]*ll,ga=1-Ce,_s=Ce+ll*ga,Sa=_s==0?0:1/_s;k[$e+3]=255*_s,k[$e+0]=(Me+_l*ga)*Sa,k[$e+1]=(_n+oa*ga)*Sa,k[$e+2]=(_i+Ru*ga)*Sa}else if(W==2){var Ce=p[me+3],Me=p[me],_n=p[me+1],_i=p[me+2],ll=k[$e+3],_l=k[$e],oa=k[$e+1],Ru=k[$e+2];Ce==ll&&Me==_l&&_n==oa&&_i==Ru?(k[$e]=0,k[$e+1]=0,k[$e+2]=0,k[$e+3]=0):(k[$e]=Me,k[$e+1]=_n,k[$e+2]=_i,k[$e+3]=Ce)}else if(W==3){var Ce=p[me+3],Me=p[me],_n=p[me+1],_i=p[me+2],ll=k[$e+3],_l=k[$e],oa=k[$e+1],Ru=k[$e+2];if(Ce==ll&&Me==_l&&_n==oa&&_i==Ru)continue;if(Ce<220&&ll>20)return!1}return!0},f.encode=function(p,v,_,k,P,L){k==null&&(k=0),L==null&&(L=!1);for(var G=new Uint8Array(p[0].byteLength*p.length+100),Z=[137,80,78,71,13,10,26,10],W=0;W<8;W++)G[W]=Z[W];var j=8,H=f._bin,me=f.crc.crc,$e=H.writeUint,De=H.writeUshort,le=H.writeASCII,Ce=f.encode.compressPNG(p,v,_,k,L);$e(G,j,13),j+=4,le(G,j,"IHDR"),j+=4,$e(G,j,v),j+=4,$e(G,j,_),j+=4,G[j]=Ce.depth,j++,G[j]=Ce.ctype,j++,G[j]=0,j++,G[j]=0,j++,G[j]=0,j++,$e(G,j,me(G,j-17,17)),j+=4,$e(G,j,1),j+=4,le(G,j,"sRGB"),j+=4,G[j]=1,j++,$e(G,j,me(G,j-5,5)),j+=4;var Me=p.length>1;if(Me&&($e(G,j,8),j+=4,le(G,j,"acTL"),j+=4,$e(G,j,p.length),j+=4,$e(G,j,0),j+=4,$e(G,j,me(G,j-12,12)),j+=4),Ce.ctype==3){var _n=Ce.plte.length;$e(G,j,_n*3),j+=4,le(G,j,"PLTE"),j+=4;for(var W=0;W<_n;W++){var _i=W*3,ll=Ce.plte[W],_l=ll&255,oa=ll>>8&255,Ru=ll>>16&255;G[j+_i+0]=_l,G[j+_i+1]=oa,G[j+_i+2]=Ru}if(j+=_n*3,$e(G,j,me(G,j-_n*3-4,_n*3+4)),j+=4,Ce.gotAlpha){$e(G,j,_n),j+=4,le(G,j,"tRNS"),j+=4;for(var W=0;W<_n;W++)G[j+W]=Ce.plte[W]>>24&255;j+=_n,$e(G,j,me(G,j-_n-4,_n+4)),j+=4}}for(var ga=0,_s=0;_s<Ce.frames.length;_s++){var Sa=Ce.frames[_s];Me&&($e(G,j,26),j+=4,le(G,j,"fcTL"),j+=4,$e(G,j,ga++),j+=4,$e(G,j,Sa.rect.width),j+=4,$e(G,j,Sa.rect.height),j+=4,$e(G,j,Sa.rect.x),j+=4,$e(G,j,Sa.rect.y),j+=4,De(G,j,P[_s]),j+=2,De(G,j,1e3),j+=2,G[j]=Sa.dispose,j++,G[j]=Sa.blend,j++,$e(G,j,me(G,j-30,30)),j+=4);var Ra=Sa.cimg,_n=Ra.length;$e(G,j,_n+(_s==0?0:4)),j+=4;var Da=j;le(G,j,_s==0?"IDAT":"fdAT"),j+=4,_s!=0&&($e(G,j,ga++),j+=4);for(var W=0;W<_n;W++)G[j+W]=Ra[W];j+=_n,$e(G,j,me(G,Da,j-Da)),j+=4}return $e(G,j,0),j+=4,le(G,j,"IEND"),j+=4,$e(G,j,me(G,j-4,4)),j+=4,G.buffer.slice(0,j)},f.encode.compressPNG=function(p,v,_,k,P){for(var L=f.encode.compress(p,v,_,k,!1,P),G=0;G<p.length;G++){var Z=L.frames[G];Z.rect.width;var W=Z.rect.height,j=Z.bpl,H=Z.bpp,me=new Uint8Array(W*j+W);Z.cimg=f.encode._filterZero(Z.img,W,H,j,me)}return L},f.encode.compress=function(p,v,_,k,P,L){L==null&&(L=!1);for(var G=6,Z=8,W=4,j=255,H=0;H<p.length;H++)for(var me=new Uint8Array(p[H]),$e=me.length,De=0;De<$e;De+=4)j&=me[De+3];var le=j!=255,Ce={},Me=[];if(p.length!=0&&(Ce[0]=0,Me.push(0),k!=0&&k--),k!=0){var _n=f.quantize(p,k,P);p=_n.bufs;for(var De=0;De<_n.plte.length;De++){var _i=_n.plte[De].est.rgba;Ce[_i]==null&&(Ce[_i]=Me.length,Me.push(_i))}}else for(var H=0;H<p.length;H++)for(var ll=new Uint32Array(p[H]),$e=ll.length,De=0;De<$e;De++){var _i=ll[De];if((De<v||_i!=ll[De-1]&&_i!=ll[De-v])&&Ce[_i]==null&&(Ce[_i]=Me.length,Me.push(_i),Me.length>=300))break}var _l=le?P:!1,oa=Me.length;oa<=256&&L==!1&&(oa<=2?Z=1:oa<=4?Z=2:oa<=16?Z=4:Z=8,P&&(Z=8),le=!0);for(var Ru=[],H=0;H<p.length;H++){var ga=new Uint8Array(p[H]),_s=new Uint32Array(ga.buffer),Sa=0,Ra=0,Da=v,Fa=_,Na=0;if(H!=0&&!_l){for(var _a=P||H==1||Ru[Ru.length-2].dispose==2?1:2,Pa=0,qc=1e9,uf=0;uf<_a;uf++){for(var ac=new Uint8Array(p[H-1-uf]),_h=new Uint32Array(p[H-1-uf]),Uh=v,Kd=_,ud=-1,sc=-1,Yd=0;Yd<_;Yd++)for(var wg=0;wg<v;wg++){var De=Yd*v+wg;_s[De]!=_h[De]&&(wg<Uh&&(Uh=wg),wg>ud&&(ud=wg),Yd<Kd&&(Kd=Yd),Yd>sc&&(sc=Yd))}var Pf=ud==-1?1:(ud-Uh+1)*(sc-Kd+1);Pf<qc&&(qc=Pf,Pa=uf,ud==-1?(Sa=Ra=0,Da=Fa=1):(Sa=Uh,Ra=Kd,Da=ud-Uh+1,Fa=sc-Kd+1))}var ac=new Uint8Array(p[H-1-Pa]);Pa==1&&(Ru[Ru.length-1].dispose=2);var fc=new Uint8Array(Da*Fa*4);new Uint32Array(fc.buffer),f._copyTile(ac,v,_,fc,Da,Fa,-Sa,-Ra,0),f._copyTile(ga,v,_,fc,Da,Fa,-Sa,-Ra,3)?(f._copyTile(ga,v,_,fc,Da,Fa,-Sa,-Ra,2),Na=1):(f._copyTile(ga,v,_,fc,Da,Fa,-Sa,-Ra,0),Na=0),ga=fc,_s=new Uint32Array(ga.buffer)}var nd=4*Da;if(oa<=256&&L==!1){nd=Math.ceil(Z*Da/8);for(var fc=new Uint8Array(nd*Fa),Yd=0;Yd<Fa;Yd++){var De=Yd*nd,a0=Yd*Da;if(Z==8)for(var wg=0;wg<Da;wg++)fc[De+wg]=Ce[_s[a0+wg]];else if(Z==4)for(var wg=0;wg<Da;wg++)fc[De+(wg>>1)]|=Ce[_s[a0+wg]]<<4-(wg&1)*4;else if(Z==2)for(var wg=0;wg<Da;wg++)fc[De+(wg>>2)]|=Ce[_s[a0+wg]]<<6-(wg&3)*2;else if(Z==1)for(var wg=0;wg<Da;wg++)fc[De+(wg>>3)]|=Ce[_s[a0+wg]]<<7-(wg&7)*1}ga=fc,G=3,W=1}else if(le==!1&&p.length==1){for(var fc=new Uint8Array(Da*Fa*3),_1=Da*Fa,De=0;De<_1;De++){var _$=De*3,$b=De*4;fc[_$]=ga[$b],fc[_$+1]=ga[$b+1],fc[_$+2]=ga[$b+2]}ga=fc,G=2,W=3,nd=3*Da}Ru.push({rect:{x:Sa,y:Ra,width:Da,height:Fa},img:ga,bpl:nd,bpp:W,blend:Na,dispose:_l?1:0})}return{ctype:G,depth:Z,plte:Me,gotAlpha:le,frames:Ru}},f.encode._filterZero=function(p,v,_,k,P){for(var L=[],G=0;G<5;G++)if(!(v*k>5e5&&(G==2||G==3||G==4))){for(var Z=0;Z<v;Z++)f.encode._filterLine(P,p,Z,k,_,G);if(L.push(d.deflate(P)),_==1)break}for(var W,j=1e9,H=0;H<L.length;H++)L[H].length<j&&(W=H,j=L[H].length);return L[W]},f.encode._filterLine=function(p,v,_,k,P,L){var G=_*k,Z=G+_,W=f.decode._paeth;if(p[Z]=L,Z++,L==0)for(var j=0;j<k;j++)p[Z+j]=v[G+j];else if(L==1){for(var j=0;j<P;j++)p[Z+j]=v[G+j];for(var j=P;j<k;j++)p[Z+j]=v[G+j]-v[G+j-P]+256&255}else if(_==0){for(var j=0;j<P;j++)p[Z+j]=v[G+j];if(L==2)for(var j=P;j<k;j++)p[Z+j]=v[G+j];if(L==3)for(var j=P;j<k;j++)p[Z+j]=v[G+j]-(v[G+j-P]>>1)+256&255;if(L==4)for(var j=P;j<k;j++)p[Z+j]=v[G+j]-W(v[G+j-P],0,0)+256&255}else{if(L==2)for(var j=0;j<k;j++)p[Z+j]=v[G+j]+256-v[G+j-k]&255;if(L==3){for(var j=0;j<P;j++)p[Z+j]=v[G+j]+256-(v[G+j-k]>>1)&255;for(var j=P;j<k;j++)p[Z+j]=v[G+j]+256-(v[G+j-k]+v[G+j-P]>>1)&255}if(L==4){for(var j=0;j<P;j++)p[Z+j]=v[G+j]+256-W(0,v[G+j-k],0)&255;for(var j=P;j<k;j++)p[Z+j]=v[G+j]+256-W(v[G+j-P],v[G+j-k],v[G+j-P-k])&255}}},f.crc={table:function(){for(var p=new Uint32Array(256),v=0;v<256;v++){for(var _=v,k=0;k<8;k++)_&1?_=3988292384^_>>>1:_=_>>>1;p[v]=_}return p}(),update:function(p,v,_,k){for(var P=0;P<k;P++)p=f.crc.table[(p^v[_+P])&255]^p>>>8;return p},crc:function(p,v,_){return f.crc.update(4294967295,p,v,_)^4294967295}},f.quantize=function(p,v,_){for(var k=[],P=0,L=0;L<p.length;L++)k.push(f.encode.alphaMul(new Uint8Array(p[L]),_)),P+=p[L].byteLength;for(var G=new Uint8Array(P),Z=new Uint32Array(G.buffer),W=0,L=0;L<k.length;L++){for(var j=k[L],H=j.length,me=0;me<H;me++)G[W+me]=j[me];W+=H}var $e={i0:0,i1:G.length,bst:null,est:null,tdst:0,left:null,right:null};$e.bst=f.quantize.stats(G,$e.i0,$e.i1),$e.est=f.quantize.estats($e.bst);for(var De=[$e];De.length<v;){for(var le=0,Ce=0,L=0;L<De.length;L++)De[L].est.L>le&&(le=De[L].est.L,Ce=L);if(le<.001)break;var Me=De[Ce],_n=f.quantize.splitPixels(G,Z,Me.i0,Me.i1,Me.est.e,Me.est.eMq255),_i={i0:Me.i0,i1:_n,bst:null,est:null,tdst:0,left:null,right:null};_i.bst=f.quantize.stats(G,_i.i0,_i.i1),_i.est=f.quantize.estats(_i.bst);var ll={i0:_n,i1:Me.i1,bst:null,est:null,tdst:0,left:null,right:null};ll.bst={R:[],m:[],N:Me.bst.N-_i.bst.N};for(var L=0;L<16;L++)ll.bst.R[L]=Me.bst.R[L]-_i.bst.R[L];for(var L=0;L<4;L++)ll.bst.m[L]=Me.bst.m[L]-_i.bst.m[L];ll.est=f.quantize.estats(ll.bst),Me.left=_i,Me.right=ll,De[Ce]=_i,De.push(ll)}De.sort(function(_a,Pa){return Pa.bst.N-_a.bst.N});for(var _l=0;_l<k.length;_l++){for(var oa=f.quantize.planeDst,Ru=new Uint8Array(k[_l].buffer),ga=new Uint32Array(k[_l].buffer),_s=Ru.length,L=0;L<_s;L+=4){for(var Sa=Ru[L]*.00392156862745098,Ra=Ru[L+1]*(1/255),Da=Ru[L+2]*(1/255),Fa=Ru[L+3]*(1/255),Na=$e;Na.left;)Na=oa(Na.est,Sa,Ra,Da,Fa)<=0?Na.left:Na.right;ga[L>>2]=Na.est.rgba}k[_l]=ga.buffer}return{bufs:k,plte:De}},f.quantize.getNearest=function(p,v,_,k,P){if(p.left==null)return p.tdst=f.quantize.dist(p.est.q,v,_,k,P),p;var L=f.quantize.planeDst(p.est,v,_,k,P),G=p.left,Z=p.right;L>0&&(G=p.right,Z=p.left);var W=f.quantize.getNearest(G,v,_,k,P);if(W.tdst<=L*L)return W;var j=f.quantize.getNearest(Z,v,_,k,P);return j.tdst<W.tdst?j:W},f.quantize.planeDst=function(p,v,_,k,P){var L=p.e;return L[0]*v+L[1]*_+L[2]*k+L[3]*P-p.eMq},f.quantize.dist=function(p,v,_,k,P){var L=v-p[0],G=_-p[1],Z=k-p[2],W=P-p[3];return L*L+G*G+Z*Z+W*W},f.quantize.splitPixels=function(p,v,_,k,P,L){var G=f.quantize.vecDot;for(k-=4;_<k;){for(;G(p,_,P)<=L;)_+=4;for(;G(p,k,P)>L;)k-=4;if(_>=k)break;var Z=v[_>>2];v[_>>2]=v[k>>2],v[k>>2]=Z,_+=4,k-=4}for(;G(p,_,P)>L;)_-=4;return _+4},f.quantize.vecDot=function(p,v,_){return p[v]*_[0]+p[v+1]*_[1]+p[v+2]*_[2]+p[v+3]*_[3]},f.quantize.stats=function(p,v,_){for(var k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=[0,0,0,0],L=_-v>>2,G=v;G<_;G+=4){var Z=p[G]*.00392156862745098,W=p[G+1]*(1/255),j=p[G+2]*(1/255),H=p[G+3]*(1/255);P[0]+=Z,P[1]+=W,P[2]+=j,P[3]+=H,k[0]+=Z*Z,k[1]+=Z*W,k[2]+=Z*j,k[3]+=Z*H,k[5]+=W*W,k[6]+=W*j,k[7]+=W*H,k[10]+=j*j,k[11]+=j*H,k[15]+=H*H}return k[4]=k[1],k[8]=k[2],k[12]=k[3],k[9]=k[6],k[13]=k[7],k[14]=k[11],{R:k,m:P,N:L}},f.quantize.estats=function(p){var v=p.R,_=p.m,k=p.N,P=_[0],L=_[1],G=_[2],Z=_[3],W=k==0?0:1/k,j=[v[0]-P*P*W,v[1]-P*L*W,v[2]-P*G*W,v[3]-P*Z*W,v[4]-L*P*W,v[5]-L*L*W,v[6]-L*G*W,v[7]-L*Z*W,v[8]-G*P*W,v[9]-G*L*W,v[10]-G*G*W,v[11]-G*Z*W,v[12]-Z*P*W,v[13]-Z*L*W,v[14]-Z*G*W,v[15]-Z*Z*W],H=j,me=f.M4,$e=[.5,.5,.5,.5],De=0,le=0;if(k!=0)for(var Ce=0;Ce<10&&($e=me.multVec(H,$e),le=Math.sqrt(me.dot($e,$e)),$e=me.sml(1/le,$e),!(Math.abs(le-De)<1e-9));Ce++)De=le;var Me=[P*W,L*W,G*W,Z*W],_n=me.dot(me.sml(255,Me),$e),_i=Me[3]<.001?0:1/Me[3];return{Cov:j,q:Me,e:$e,L:De,eMq255:_n,eMq:me.dot($e,Me),rgba:(Math.round(255*Me[3])<<24|Math.round(255*Me[2]*_i)<<16|Math.round(255*Me[1]*_i)<<8|Math.round(255*Me[0]*_i)<<0)>>>0}},f.M4={multVec:function(p,v){return[p[0]*v[0]+p[1]*v[1]+p[2]*v[2]+p[3]*v[3],p[4]*v[0]+p[5]*v[1]+p[6]*v[2]+p[7]*v[3],p[8]*v[0]+p[9]*v[1]+p[10]*v[2]+p[11]*v[3],p[12]*v[0]+p[13]*v[1]+p[14]*v[2]+p[15]*v[3]]},dot:function(p,v){return p[0]*v[0]+p[1]*v[1]+p[2]*v[2]+p[3]*v[3]},sml:function(p,v){return[p*v[0],p*v[1],p*v[2],p*v[3]]}},f.encode.alphaMul=function(p,v){for(var _=new Uint8Array(p.length),k=p.length>>2,P=0;P<k;P++){var L=P<<2,G=p[L+3];v&&(G=G<128?0:255);var Z=G*(1/255);_[L+0]=p[L+0]*Z,_[L+1]=p[L+1]*Z,_[L+2]=p[L+2]*Z,_[L+3]=G}return _}}(s,o)})()},"./node_modules/upng-js/node_modules/pako/index.js":(n,t,i)=>{var s=i("./node_modules/upng-js/node_modules/pako/lib/utils/common.js").assign,o=i("./node_modules/upng-js/node_modules/pako/lib/deflate.js"),f=i("./node_modules/upng-js/node_modules/pako/lib/inflate.js"),d=i("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),p={};s(p,o,f,d),n.exports=p},"./node_modules/upng-js/node_modules/pako/lib/deflate.js":(n,t,i)=>{var s=i("./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js"),o=i("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),f=i("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),d=i("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),p=i("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),v=Object.prototype.toString,_=0,k=4,P=0,L=1,G=2,Z=-1,W=0,j=8;function H(le){if(!(this instanceof H))return new H(le);this.options=o.assign({level:Z,method:j,chunkSize:16384,windowBits:15,memLevel:8,strategy:W,to:""},le||{});var Ce=this.options;Ce.raw&&Ce.windowBits>0?Ce.windowBits=-Ce.windowBits:Ce.gzip&&Ce.windowBits>0&&Ce.windowBits<16&&(Ce.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var Me=s.deflateInit2(this.strm,Ce.level,Ce.method,Ce.windowBits,Ce.memLevel,Ce.strategy);if(Me!==P)throw new Error(d[Me]);if(Ce.header&&s.deflateSetHeader(this.strm,Ce.header),Ce.dictionary){var _n;if(typeof Ce.dictionary=="string"?_n=f.string2buf(Ce.dictionary):v.call(Ce.dictionary)==="[object ArrayBuffer]"?_n=new Uint8Array(Ce.dictionary):_n=Ce.dictionary,Me=s.deflateSetDictionary(this.strm,_n),Me!==P)throw new Error(d[Me]);this._dict_set=!0}}H.prototype.push=function(le,Ce){var Me=this.strm,_n=this.options.chunkSize,_i,ll;if(this.ended)return!1;ll=Ce===~~Ce?Ce:Ce===!0?k:_,typeof le=="string"?Me.input=f.string2buf(le):v.call(le)==="[object ArrayBuffer]"?Me.input=new Uint8Array(le):Me.input=le,Me.next_in=0,Me.avail_in=Me.input.length;do{if(Me.avail_out===0&&(Me.output=new o.Buf8(_n),Me.next_out=0,Me.avail_out=_n),_i=s.deflate(Me,ll),_i!==L&&_i!==P)return this.onEnd(_i),this.ended=!0,!1;(Me.avail_out===0||Me.avail_in===0&&(ll===k||ll===G))&&(this.options.to==="string"?this.onData(f.buf2binstring(o.shrinkBuf(Me.output,Me.next_out))):this.onData(o.shrinkBuf(Me.output,Me.next_out)))}while((Me.avail_in>0||Me.avail_out===0)&&_i!==L);return ll===k?(_i=s.deflateEnd(this.strm),this.onEnd(_i),this.ended=!0,_i===P):(ll===G&&(this.onEnd(P),Me.avail_out=0),!0)},H.prototype.onData=function(le){this.chunks.push(le)},H.prototype.onEnd=function(le){le===P&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=le,this.msg=this.strm.msg};function me(le,Ce){var Me=new H(Ce);if(Me.push(le,!0),Me.err)throw Me.msg||d[Me.err];return Me.result}function $e(le,Ce){return Ce=Ce||{},Ce.raw=!0,me(le,Ce)}function De(le,Ce){return Ce=Ce||{},Ce.gzip=!0,me(le,Ce)}t.Deflate=H,t.deflate=me,t.deflateRaw=$e,t.gzip=De},"./node_modules/upng-js/node_modules/pako/lib/inflate.js":(n,t,i)=>{var s=i("./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js"),o=i("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),f=i("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),d=i("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),p=i("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),v=i("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),_=i("./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js"),k=Object.prototype.toString;function P(Z){if(!(this instanceof P))return new P(Z);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},Z||{});var W=this.options;W.raw&&W.windowBits>=0&&W.windowBits<16&&(W.windowBits=-W.windowBits,W.windowBits===0&&(W.windowBits=-15)),W.windowBits>=0&&W.windowBits<16&&!(Z&&Z.windowBits)&&(W.windowBits+=32),W.windowBits>15&&W.windowBits<48&&(W.windowBits&15)===0&&(W.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var j=s.inflateInit2(this.strm,W.windowBits);if(j!==d.Z_OK)throw new Error(p[j]);if(this.header=new _,s.inflateGetHeader(this.strm,this.header),W.dictionary&&(typeof W.dictionary=="string"?W.dictionary=f.string2buf(W.dictionary):k.call(W.dictionary)==="[object ArrayBuffer]"&&(W.dictionary=new Uint8Array(W.dictionary)),W.raw&&(j=s.inflateSetDictionary(this.strm,W.dictionary),j!==d.Z_OK)))throw new Error(p[j])}P.prototype.push=function(Z,W){var j=this.strm,H=this.options.chunkSize,me=this.options.dictionary,$e,De,le,Ce,Me,_n=!1;if(this.ended)return!1;De=W===~~W?W:W===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof Z=="string"?j.input=f.binstring2buf(Z):k.call(Z)==="[object ArrayBuffer]"?j.input=new Uint8Array(Z):j.input=Z,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new o.Buf8(H),j.next_out=0,j.avail_out=H),$e=s.inflate(j,d.Z_NO_FLUSH),$e===d.Z_NEED_DICT&&me&&($e=s.inflateSetDictionary(this.strm,me)),$e===d.Z_BUF_ERROR&&_n===!0&&($e=d.Z_OK,_n=!1),$e!==d.Z_STREAM_END&&$e!==d.Z_OK)return this.onEnd($e),this.ended=!0,!1;j.next_out&&(j.avail_out===0||$e===d.Z_STREAM_END||j.avail_in===0&&(De===d.Z_FINISH||De===d.Z_SYNC_FLUSH))&&(this.options.to==="string"?(le=f.utf8border(j.output,j.next_out),Ce=j.next_out-le,Me=f.buf2string(j.output,le),j.next_out=Ce,j.avail_out=H-Ce,Ce&&o.arraySet(j.output,j.output,le,Ce,0),this.onData(Me)):this.onData(o.shrinkBuf(j.output,j.next_out))),j.avail_in===0&&j.avail_out===0&&(_n=!0)}while((j.avail_in>0||j.avail_out===0)&&$e!==d.Z_STREAM_END);return $e===d.Z_STREAM_END&&(De=d.Z_FINISH),De===d.Z_FINISH?($e=s.inflateEnd(this.strm),this.onEnd($e),this.ended=!0,$e===d.Z_OK):(De===d.Z_SYNC_FLUSH&&(this.onEnd(d.Z_OK),j.avail_out=0),!0)},P.prototype.onData=function(Z){this.chunks.push(Z)},P.prototype.onEnd=function(Z){Z===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=Z,this.msg=this.strm.msg};function L(Z,W){var j=new P(W);if(j.push(Z,!0),j.err)throw j.msg||p[j.err];return j.result}function G(Z,W){return W=W||{},W.raw=!0,L(Z,W)}t.Inflate=P,t.inflate=L,t.inflateRaw=G,t.ungzip=L},"./node_modules/upng-js/node_modules/pako/lib/utils/common.js":(n,t)=>{var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function s(d,p){return Object.prototype.hasOwnProperty.call(d,p)}t.assign=function(d){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var v=p.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var _ in v)s(v,_)&&(d[_]=v[_])}}return d},t.shrinkBuf=function(d,p){return d.length===p?d:d.subarray?d.subarray(0,p):(d.length=p,d)};var o={arraySet:function(d,p,v,_,k){if(p.subarray&&d.subarray){d.set(p.subarray(v,v+_),k);return}for(var P=0;P<_;P++)d[k+P]=p[v+P]},flattenChunks:function(d){var p,v,_,k,P,L;for(_=0,p=0,v=d.length;p<v;p++)_+=d[p].length;for(L=new Uint8Array(_),k=0,p=0,v=d.length;p<v;p++)P=d[p],L.set(P,k),k+=P.length;return L}},f={arraySet:function(d,p,v,_,k){for(var P=0;P<_;P++)d[k+P]=p[v+P]},flattenChunks:function(d){return[].concat.apply([],d)}};t.setTyped=function(d){d?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,f))},t.setTyped(i)},"./node_modules/upng-js/node_modules/pako/lib/utils/strings.js":(n,t,i)=>{var s=i("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=!0,f=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f=!1}for(var d=new s.Buf8(256),p=0;p<256;p++)d[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;d[254]=d[254]=1,t.string2buf=function(_){var k,P,L,G,Z,W=_.length,j=0;for(G=0;G<W;G++)P=_.charCodeAt(G),(P&64512)===55296&&G+1<W&&(L=_.charCodeAt(G+1),(L&64512)===56320&&(P=65536+(P-55296<<10)+(L-56320),G++)),j+=P<128?1:P<2048?2:P<65536?3:4;for(k=new s.Buf8(j),Z=0,G=0;Z<j;G++)P=_.charCodeAt(G),(P&64512)===55296&&G+1<W&&(L=_.charCodeAt(G+1),(L&64512)===56320&&(P=65536+(P-55296<<10)+(L-56320),G++)),P<128?k[Z++]=P:P<2048?(k[Z++]=192|P>>>6,k[Z++]=128|P&63):P<65536?(k[Z++]=224|P>>>12,k[Z++]=128|P>>>6&63,k[Z++]=128|P&63):(k[Z++]=240|P>>>18,k[Z++]=128|P>>>12&63,k[Z++]=128|P>>>6&63,k[Z++]=128|P&63);return k};function v(_,k){if(k<65534&&(_.subarray&&f||!_.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(_,k));for(var P="",L=0;L<k;L++)P+=String.fromCharCode(_[L]);return P}t.buf2binstring=function(_){return v(_,_.length)},t.binstring2buf=function(_){for(var k=new s.Buf8(_.length),P=0,L=k.length;P<L;P++)k[P]=_.charCodeAt(P);return k},t.buf2string=function(_,k){var P,L,G,Z,W=k||_.length,j=new Array(W*2);for(L=0,P=0;P<W;){if(G=_[P++],G<128){j[L++]=G;continue}if(Z=d[G],Z>4){j[L++]=65533,P+=Z-1;continue}for(G&=Z===2?31:Z===3?15:7;Z>1&&P<W;)G=G<<6|_[P++]&63,Z--;if(Z>1){j[L++]=65533;continue}G<65536?j[L++]=G:(G-=65536,j[L++]=55296|G>>10&1023,j[L++]=56320|G&1023)}return v(j,L)},t.utf8border=function(_,k){var P;for(k=k||_.length,k>_.length&&(k=_.length),P=k-1;P>=0&&(_[P]&192)===128;)P--;return P<0||P===0?k:P+d[_[P]]>k?P:k}},"./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js":n=>{function t(i,s,o,f){for(var d=i&65535|0,p=i>>>16&65535|0,v=0;o!==0;){v=o>2e3?2e3:o,o-=v;do d=d+s[f++]|0,p=p+d|0;while(--v);d%=65521,p%=65521}return d|p<<16|0}n.exports=t},"./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js":n=>{n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js":n=>{function t(){for(var o,f=[],d=0;d<256;d++){o=d;for(var p=0;p<8;p++)o=o&1?3988292384^o>>>1:o>>>1;f[d]=o}return f}var i=t();function s(o,f,d,p){var v=i,_=p+d;o^=-1;for(var k=p;k<_;k++)o=o>>>8^v[(o^f[k])&255];return o^-1}n.exports=s},"./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js":(n,t,i)=>{var s=i("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=i("./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js"),f=i("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),d=i("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),p=i("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),v=0,_=1,k=3,P=4,L=5,G=0,Z=1,W=-2,j=-3,H=-5,me=-1,$e=1,De=2,le=3,Ce=4,Me=0,_n=2,_i=8,ll=9,_l=15,oa=8,Ru=29,ga=256,_s=ga+1+Ru,Sa=30,Ra=19,Da=2*_s+1,Fa=15,Na=3,_a=258,Pa=_a+Na+1,qc=32,uf=42,_h=69,Uh=73,Kd=91,ud=103,sc=113,Yd=666,wg=1,Pf=2,ac=3,fc=4,nd=3;function a0(ka,Pp){return ka.msg=p[Pp],Pp}function _1(ka){return(ka<<1)-(ka>4?9:0)}function _$(ka){for(var Pp=ka.length;--Pp>=0;)ka[Pp]=0}function $b(ka){var Pp=ka.state,_0=Pp.pending;_0>ka.avail_out&&(_0=ka.avail_out),_0!==0&&(s.arraySet(ka.output,Pp.pending_buf,Pp.pending_out,_0,ka.next_out),ka.next_out+=_0,Pp.pending_out+=_0,ka.total_out+=_0,ka.avail_out-=_0,Pp.pending-=_0,Pp.pending===0&&(Pp.pending_out=0))}function Z_(ka,Pp){o._tr_flush_block(ka,ka.block_start>=0?ka.block_start:-1,ka.strstart-ka.block_start,Pp),ka.block_start=ka.strstart,$b(ka.strm)}function _b(ka,Pp){ka.pending_buf[ka.pending++]=Pp}function cb(ka,Pp){ka.pending_buf[ka.pending++]=Pp>>>8&255,ka.pending_buf[ka.pending++]=Pp&255}function ib(ka,Pp,_0,Oc){var zg=ka.avail_in;return zg>Oc&&(zg=Oc),zg===0?0:(ka.avail_in-=zg,s.arraySet(Pp,ka.input,ka.next_in,zg,_0),ka.state.wrap===1?ka.adler=f(ka.adler,Pp,zg,_0):ka.state.wrap===2&&(ka.adler=d(ka.adler,Pp,zg,_0)),ka.next_in+=zg,ka.total_in+=zg,zg)}function _2(ka,Pp){var _0=ka.max_chain_length,Oc=ka.strstart,zg,_p,_O=ka.prev_length,_M=ka.nice_match,_T=ka.strstart>ka.w_size-Pa?ka.strstart-(ka.w_size-Pa):0,_9=ka.window,_q=ka.w_mask,Ez=ka.prev,_z=ka.strstart+_a,xz=_9[Oc+_O-1],Vj=_9[Oc+_O];ka.prev_length>=ka.good_match&&(_0>>=2),_M>ka.lookahead&&(_M=ka.lookahead);do if(zg=Pp,!(_9[zg+_O]!==Vj||_9[zg+_O-1]!==xz||_9[zg]!==_9[Oc]||_9[++zg]!==_9[Oc+1])){Oc+=2,zg++;do;while(_9[++Oc]===_9[++zg]&&_9[++Oc]===_9[++zg]&&_9[++Oc]===_9[++zg]&&_9[++Oc]===_9[++zg]&&_9[++Oc]===_9[++zg]&&_9[++Oc]===_9[++zg]&&_9[++Oc]===_9[++zg]&&_9[++Oc]===_9[++zg]&&Oc<_z);if(_p=_a-(_z-Oc),Oc=_z-_a,_p>_O){if(ka.match_start=Pp,_O=_p,_p>=_M)break;xz=_9[Oc+_O-1],Vj=_9[Oc+_O]}}while((Pp=Ez[Pp&_q])>_T&&--_0!==0);return _O<=ka.lookahead?_O:ka.lookahead}function Nb(ka){var Pp=ka.w_size,_0,Oc,zg,_p,_O;do{if(_p=ka.window_size-ka.lookahead-ka.strstart,ka.strstart>=Pp+(Pp-Pa)){s.arraySet(ka.window,ka.window,Pp,Pp,0),ka.match_start-=Pp,ka.strstart-=Pp,ka.block_start-=Pp,Oc=ka.hash_size,_0=Oc;do zg=ka.head[--_0],ka.head[_0]=zg>=Pp?zg-Pp:0;while(--Oc);Oc=Pp,_0=Oc;do zg=ka.prev[--_0],ka.prev[_0]=zg>=Pp?zg-Pp:0;while(--Oc);_p+=Pp}if(ka.strm.avail_in===0)break;if(Oc=ib(ka.strm,ka.window,ka.strstart+ka.lookahead,_p),ka.lookahead+=Oc,ka.lookahead+ka.insert>=Na)for(_O=ka.strstart-ka.insert,ka.ins_h=ka.window[_O],ka.ins_h=(ka.ins_h<<ka.hash_shift^ka.window[_O+1])&ka.hash_mask;ka.insert&&(ka.ins_h=(ka.ins_h<<ka.hash_shift^ka.window[_O+Na-1])&ka.hash_mask,ka.prev[_O&ka.w_mask]=ka.head[ka.ins_h],ka.head[ka.ins_h]=_O,_O++,ka.insert--,!(ka.lookahead+ka.insert<Na)););}while(ka.lookahead<Pa&&ka.strm.avail_in!==0)}function _D(ka,Pp){var _0=65535;for(_0>ka.pending_buf_size-5&&(_0=ka.pending_buf_size-5);;){if(ka.lookahead<=1){if(Nb(ka),ka.lookahead===0&&Pp===v)return wg;if(ka.lookahead===0)break}ka.strstart+=ka.lookahead,ka.lookahead=0;var Oc=ka.block_start+_0;if((ka.strstart===0||ka.strstart>=Oc)&&(ka.lookahead=ka.strstart-Oc,ka.strstart=Oc,Z_(ka,!1),ka.strm.avail_out===0)||ka.strstart-ka.block_start>=ka.w_size-Pa&&(Z_(ka,!1),ka.strm.avail_out===0))return wg}return ka.insert=0,Pp===P?(Z_(ka,!0),ka.strm.avail_out===0?ac:fc):(ka.strstart>ka.block_start&&(Z_(ka,!1),ka.strm.avail_out===0),wg)}function ec(ka,Pp){for(var _0,Oc;;){if(ka.lookahead<Pa){if(Nb(ka),ka.lookahead<Pa&&Pp===v)return wg;if(ka.lookahead===0)break}if(_0=0,ka.lookahead>=Na&&(ka.ins_h=(ka.ins_h<<ka.hash_shift^ka.window[ka.strstart+Na-1])&ka.hash_mask,_0=ka.prev[ka.strstart&ka.w_mask]=ka.head[ka.ins_h],ka.head[ka.ins_h]=ka.strstart),_0!==0&&ka.strstart-_0<=ka.w_size-Pa&&(ka.match_length=_2(ka,_0)),ka.match_length>=Na)if(Oc=o._tr_tally(ka,ka.strstart-ka.match_start,ka.match_length-Na),ka.lookahead-=ka.match_length,ka.match_length<=ka.max_lazy_match&&ka.lookahead>=Na){ka.match_length--;do ka.strstart++,ka.ins_h=(ka.ins_h<<ka.hash_shift^ka.window[ka.strstart+Na-1])&ka.hash_mask,_0=ka.prev[ka.strstart&ka.w_mask]=ka.head[ka.ins_h],ka.head[ka.ins_h]=ka.strstart;while(--ka.match_length!==0);ka.strstart++}else ka.strstart+=ka.match_length,ka.match_length=0,ka.ins_h=ka.window[ka.strstart],ka.ins_h=(ka.ins_h<<ka.hash_shift^ka.window[ka.strstart+1])&ka.hash_mask;else Oc=o._tr_tally(ka,0,ka.window[ka.strstart]),ka.lookahead--,ka.strstart++;if(Oc&&(Z_(ka,!1),ka.strm.avail_out===0))return wg}return ka.insert=ka.strstart<Na-1?ka.strstart:Na-1,Pp===P?(Z_(ka,!0),ka.strm.avail_out===0?ac:fc):ka.last_lit&&(Z_(ka,!1),ka.strm.avail_out===0)?wg:Pf}function Jc(ka,Pp){for(var _0,Oc,zg;;){if(ka.lookahead<Pa){if(Nb(ka),ka.lookahead<Pa&&Pp===v)return wg;if(ka.lookahead===0)break}if(_0=0,ka.lookahead>=Na&&(ka.ins_h=(ka.ins_h<<ka.hash_shift^ka.window[ka.strstart+Na-1])&ka.hash_mask,_0=ka.prev[ka.strstart&ka.w_mask]=ka.head[ka.ins_h],ka.head[ka.ins_h]=ka.strstart),ka.prev_length=ka.match_length,ka.prev_match=ka.match_start,ka.match_length=Na-1,_0!==0&&ka.prev_length<ka.max_lazy_match&&ka.strstart-_0<=ka.w_size-Pa&&(ka.match_length=_2(ka,_0),ka.match_length<=5&&(ka.strategy===$e||ka.match_length===Na&&ka.strstart-ka.match_start>4096)&&(ka.match_length=Na-1)),ka.prev_length>=Na&&ka.match_length<=ka.prev_length){zg=ka.strstart+ka.lookahead-Na,Oc=o._tr_tally(ka,ka.strstart-1-ka.prev_match,ka.prev_length-Na),ka.lookahead-=ka.prev_length-1,ka.prev_length-=2;do++ka.strstart<=zg&&(ka.ins_h=(ka.ins_h<<ka.hash_shift^ka.window[ka.strstart+Na-1])&ka.hash_mask,_0=ka.prev[ka.strstart&ka.w_mask]=ka.head[ka.ins_h],ka.head[ka.ins_h]=ka.strstart);while(--ka.prev_length!==0);if(ka.match_available=0,ka.match_length=Na-1,ka.strstart++,Oc&&(Z_(ka,!1),ka.strm.avail_out===0))return wg}else if(ka.match_available){if(Oc=o._tr_tally(ka,0,ka.window[ka.strstart-1]),Oc&&Z_(ka,!1),ka.strstart++,ka.lookahead--,ka.strm.avail_out===0)return wg}else ka.match_available=1,ka.strstart++,ka.lookahead--}return ka.match_available&&(Oc=o._tr_tally(ka,0,ka.window[ka.strstart-1]),ka.match_available=0),ka.insert=ka.strstart<Na-1?ka.strstart:Na-1,Pp===P?(Z_(ka,!0),ka.strm.avail_out===0?ac:fc):ka.last_lit&&(Z_(ka,!1),ka.strm.avail_out===0)?wg:Pf}function ih(ka,Pp){for(var _0,Oc,zg,_p,_O=ka.window;;){if(ka.lookahead<=_a){if(Nb(ka),ka.lookahead<=_a&&Pp===v)return wg;if(ka.lookahead===0)break}if(ka.match_length=0,ka.lookahead>=Na&&ka.strstart>0&&(zg=ka.strstart-1,Oc=_O[zg],Oc===_O[++zg]&&Oc===_O[++zg]&&Oc===_O[++zg])){_p=ka.strstart+_a;do;while(Oc===_O[++zg]&&Oc===_O[++zg]&&Oc===_O[++zg]&&Oc===_O[++zg]&&Oc===_O[++zg]&&Oc===_O[++zg]&&Oc===_O[++zg]&&Oc===_O[++zg]&&zg<_p);ka.match_length=_a-(_p-zg),ka.match_length>ka.lookahead&&(ka.match_length=ka.lookahead)}if(ka.match_length>=Na?(_0=o._tr_tally(ka,1,ka.match_length-Na),ka.lookahead-=ka.match_length,ka.strstart+=ka.match_length,ka.match_length=0):(_0=o._tr_tally(ka,0,ka.window[ka.strstart]),ka.lookahead--,ka.strstart++),_0&&(Z_(ka,!1),ka.strm.avail_out===0))return wg}return ka.insert=0,Pp===P?(Z_(ka,!0),ka.strm.avail_out===0?ac:fc):ka.last_lit&&(Z_(ka,!1),ka.strm.avail_out===0)?wg:Pf}function Bd(ka,Pp){for(var _0;;){if(ka.lookahead===0&&(Nb(ka),ka.lookahead===0)){if(Pp===v)return wg;break}if(ka.match_length=0,_0=o._tr_tally(ka,0,ka.window[ka.strstart]),ka.lookahead--,ka.strstart++,_0&&(Z_(ka,!1),ka.strm.avail_out===0))return wg}return ka.insert=0,Pp===P?(Z_(ka,!0),ka.strm.avail_out===0?ac:fc):ka.last_lit&&(Z_(ka,!1),ka.strm.avail_out===0)?wg:Pf}function xg(ka,Pp,_0,Oc,zg){this.good_length=ka,this.max_lazy=Pp,this.nice_length=_0,this.max_chain=Oc,this.func=zg}var hb;hb=[new xg(0,0,0,0,_D),new xg(4,4,8,4,ec),new xg(4,5,16,8,ec),new xg(4,6,32,32,ec),new xg(4,4,16,16,Jc),new xg(8,16,32,32,Jc),new xg(8,16,128,128,Jc),new xg(8,32,128,256,Jc),new xg(32,128,258,1024,Jc),new xg(32,258,258,4096,Jc)];function _S(ka){ka.window_size=2*ka.w_size,_$(ka.head),ka.max_lazy_match=hb[ka.level].max_lazy,ka.good_match=hb[ka.level].good_length,ka.nice_match=hb[ka.level].nice_length,ka.max_chain_length=hb[ka.level].max_chain,ka.strstart=0,ka.block_start=0,ka.lookahead=0,ka.insert=0,ka.match_length=ka.prev_length=Na-1,ka.match_available=0,ka.ins_h=0}function rc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_i,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(Da*2),this.dyn_dtree=new s.Buf16((2*Sa+1)*2),this.bl_tree=new s.Buf16((2*Ra+1)*2),_$(this.dyn_ltree),_$(this.dyn_dtree),_$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(Fa+1),this.heap=new s.Buf16(2*_s+1),_$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*_s+1),_$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function e0(ka){var Pp;return!ka||!ka.state?a0(ka,W):(ka.total_in=ka.total_out=0,ka.data_type=_n,Pp=ka.state,Pp.pending=0,Pp.pending_out=0,Pp.wrap<0&&(Pp.wrap=-Pp.wrap),Pp.status=Pp.wrap?uf:sc,ka.adler=Pp.wrap===2?0:1,Pp.last_flush=v,o._tr_init(Pp),G)}function b0(ka){var Pp=e0(ka);return Pp===G&&_S(ka.state),Pp}function nb(ka,Pp){return!ka||!ka.state||ka.state.wrap!==2?W:(ka.state.gzhead=Pp,G)}function vf(ka,Pp,_0,Oc,zg,_p){if(!ka)return W;var _O=1;if(Pp===me&&(Pp=6),Oc<0?(_O=0,Oc=-Oc):Oc>15&&(_O=2,Oc-=16),zg<1||zg>ll||_0!==_i||Oc<8||Oc>15||Pp<0||Pp>9||_p<0||_p>Ce)return a0(ka,W);Oc===8&&(Oc=9);var _M=new rc;return ka.state=_M,_M.strm=ka,_M.wrap=_O,_M.gzhead=null,_M.w_bits=Oc,_M.w_size=1<<_M.w_bits,_M.w_mask=_M.w_size-1,_M.hash_bits=zg+7,_M.hash_size=1<<_M.hash_bits,_M.hash_mask=_M.hash_size-1,_M.hash_shift=~~((_M.hash_bits+Na-1)/Na),_M.window=new s.Buf8(_M.w_size*2),_M.head=new s.Buf16(_M.hash_size),_M.prev=new s.Buf16(_M.w_size),_M.lit_bufsize=1<<zg+6,_M.pending_buf_size=_M.lit_bufsize*4,_M.pending_buf=new s.Buf8(_M.pending_buf_size),_M.d_buf=1*_M.lit_bufsize,_M.l_buf=3*_M.lit_bufsize,_M.level=Pp,_M.strategy=_p,_M.method=_0,b0(ka)}function c0(ka,Pp){return vf(ka,Pp,_i,_l,oa,Me)}function Ba(ka,Pp){var _0,Oc,zg,_p;if(!ka||!ka.state||Pp>L||Pp<0)return ka?a0(ka,W):W;if(Oc=ka.state,!ka.output||!ka.input&&ka.avail_in!==0||Oc.status===Yd&&Pp!==P)return a0(ka,ka.avail_out===0?H:W);if(Oc.strm=ka,_0=Oc.last_flush,Oc.last_flush=Pp,Oc.status===uf)if(Oc.wrap===2)ka.adler=0,_b(Oc,31),_b(Oc,139),_b(Oc,8),Oc.gzhead?(_b(Oc,(Oc.gzhead.text?1:0)+(Oc.gzhead.hcrc?2:0)+(Oc.gzhead.extra?4:0)+(Oc.gzhead.name?8:0)+(Oc.gzhead.comment?16:0)),_b(Oc,Oc.gzhead.time&255),_b(Oc,Oc.gzhead.time>>8&255),_b(Oc,Oc.gzhead.time>>16&255),_b(Oc,Oc.gzhead.time>>24&255),_b(Oc,Oc.level===9?2:Oc.strategy>=De||Oc.level<2?4:0),_b(Oc,Oc.gzhead.os&255),Oc.gzhead.extra&&Oc.gzhead.extra.length&&(_b(Oc,Oc.gzhead.extra.length&255),_b(Oc,Oc.gzhead.extra.length>>8&255)),Oc.gzhead.hcrc&&(ka.adler=d(ka.adler,Oc.pending_buf,Oc.pending,0)),Oc.gzindex=0,Oc.status=_h):(_b(Oc,0),_b(Oc,0),_b(Oc,0),_b(Oc,0),_b(Oc,0),_b(Oc,Oc.level===9?2:Oc.strategy>=De||Oc.level<2?4:0),_b(Oc,nd),Oc.status=sc);else{var _O=_i+(Oc.w_bits-8<<4)<<8,_M=-1;Oc.strategy>=De||Oc.level<2?_M=0:Oc.level<6?_M=1:Oc.level===6?_M=2:_M=3,_O|=_M<<6,Oc.strstart!==0&&(_O|=qc),_O+=31-_O%31,Oc.status=sc,cb(Oc,_O),Oc.strstart!==0&&(cb(Oc,ka.adler>>>16),cb(Oc,ka.adler&65535)),ka.adler=1}if(Oc.status===_h)if(Oc.gzhead.extra){for(zg=Oc.pending;Oc.gzindex<(Oc.gzhead.extra.length&65535)&&!(Oc.pending===Oc.pending_buf_size&&(Oc.gzhead.hcrc&&Oc.pending>zg&&(ka.adler=d(ka.adler,Oc.pending_buf,Oc.pending-zg,zg)),$b(ka),zg=Oc.pending,Oc.pending===Oc.pending_buf_size));)_b(Oc,Oc.gzhead.extra[Oc.gzindex]&255),Oc.gzindex++;Oc.gzhead.hcrc&&Oc.pending>zg&&(ka.adler=d(ka.adler,Oc.pending_buf,Oc.pending-zg,zg)),Oc.gzindex===Oc.gzhead.extra.length&&(Oc.gzindex=0,Oc.status=Uh)}else Oc.status=Uh;if(Oc.status===Uh)if(Oc.gzhead.name){zg=Oc.pending;do{if(Oc.pending===Oc.pending_buf_size&&(Oc.gzhead.hcrc&&Oc.pending>zg&&(ka.adler=d(ka.adler,Oc.pending_buf,Oc.pending-zg,zg)),$b(ka),zg=Oc.pending,Oc.pending===Oc.pending_buf_size)){_p=1;break}Oc.gzindex<Oc.gzhead.name.length?_p=Oc.gzhead.name.charCodeAt(Oc.gzindex++)&255:_p=0,_b(Oc,_p)}while(_p!==0);Oc.gzhead.hcrc&&Oc.pending>zg&&(ka.adler=d(ka.adler,Oc.pending_buf,Oc.pending-zg,zg)),_p===0&&(Oc.gzindex=0,Oc.status=Kd)}else Oc.status=Kd;if(Oc.status===Kd)if(Oc.gzhead.comment){zg=Oc.pending;do{if(Oc.pending===Oc.pending_buf_size&&(Oc.gzhead.hcrc&&Oc.pending>zg&&(ka.adler=d(ka.adler,Oc.pending_buf,Oc.pending-zg,zg)),$b(ka),zg=Oc.pending,Oc.pending===Oc.pending_buf_size)){_p=1;break}Oc.gzindex<Oc.gzhead.comment.length?_p=Oc.gzhead.comment.charCodeAt(Oc.gzindex++)&255:_p=0,_b(Oc,_p)}while(_p!==0);Oc.gzhead.hcrc&&Oc.pending>zg&&(ka.adler=d(ka.adler,Oc.pending_buf,Oc.pending-zg,zg)),_p===0&&(Oc.status=ud)}else Oc.status=ud;if(Oc.status===ud&&(Oc.gzhead.hcrc?(Oc.pending+2>Oc.pending_buf_size&&$b(ka),Oc.pending+2<=Oc.pending_buf_size&&(_b(Oc,ka.adler&255),_b(Oc,ka.adler>>8&255),ka.adler=0,Oc.status=sc)):Oc.status=sc),Oc.pending!==0){if($b(ka),ka.avail_out===0)return Oc.last_flush=-1,G}else if(ka.avail_in===0&&_1(Pp)<=_1(_0)&&Pp!==P)return a0(ka,H);if(Oc.status===Yd&&ka.avail_in!==0)return a0(ka,H);if(ka.avail_in!==0||Oc.lookahead!==0||Pp!==v&&Oc.status!==Yd){var _T=Oc.strategy===De?Bd(Oc,Pp):Oc.strategy===le?ih(Oc,Pp):hb[Oc.level].func(Oc,Pp);if((_T===ac||_T===fc)&&(Oc.status=Yd),_T===wg||_T===ac)return ka.avail_out===0&&(Oc.last_flush=-1),G;if(_T===Pf&&(Pp===_?o._tr_align(Oc):Pp!==L&&(o._tr_stored_block(Oc,0,0,!1),Pp===k&&(_$(Oc.head),Oc.lookahead===0&&(Oc.strstart=0,Oc.block_start=0,Oc.insert=0))),$b(ka),ka.avail_out===0))return Oc.last_flush=-1,G}return Pp!==P?G:Oc.wrap<=0?Z:(Oc.wrap===2?(_b(Oc,ka.adler&255),_b(Oc,ka.adler>>8&255),_b(Oc,ka.adler>>16&255),_b(Oc,ka.adler>>24&255),_b(Oc,ka.total_in&255),_b(Oc,ka.total_in>>8&255),_b(Oc,ka.total_in>>16&255),_b(Oc,ka.total_in>>24&255)):(cb(Oc,ka.adler>>>16),cb(Oc,ka.adler&65535)),$b(ka),Oc.wrap>0&&(Oc.wrap=-Oc.wrap),Oc.pending!==0?G:Z)}function $_(ka){var Pp;return!ka||!ka.state?W:(Pp=ka.state.status,Pp!==uf&&Pp!==_h&&Pp!==Uh&&Pp!==Kd&&Pp!==ud&&Pp!==sc&&Pp!==Yd?a0(ka,W):(ka.state=null,Pp===sc?a0(ka,j):G))}function _A(ka,Pp){var _0=Pp.length,Oc,zg,_p,_O,_M,_T,_9,_q;if(!ka||!ka.state||(Oc=ka.state,_O=Oc.wrap,_O===2||_O===1&&Oc.status!==uf||Oc.lookahead))return W;for(_O===1&&(ka.adler=f(ka.adler,Pp,_0,0)),Oc.wrap=0,_0>=Oc.w_size&&(_O===0&&(_$(Oc.head),Oc.strstart=0,Oc.block_start=0,Oc.insert=0),_q=new s.Buf8(Oc.w_size),s.arraySet(_q,Pp,_0-Oc.w_size,Oc.w_size,0),Pp=_q,_0=Oc.w_size),_M=ka.avail_in,_T=ka.next_in,_9=ka.input,ka.avail_in=_0,ka.next_in=0,ka.input=Pp,Nb(Oc);Oc.lookahead>=Na;){zg=Oc.strstart,_p=Oc.lookahead-(Na-1);do Oc.ins_h=(Oc.ins_h<<Oc.hash_shift^Oc.window[zg+Na-1])&Oc.hash_mask,Oc.prev[zg&Oc.w_mask]=Oc.head[Oc.ins_h],Oc.head[Oc.ins_h]=zg,zg++;while(--_p);Oc.strstart=zg,Oc.lookahead=Na-1,Nb(Oc)}return Oc.strstart+=Oc.lookahead,Oc.block_start=Oc.strstart,Oc.insert=Oc.lookahead,Oc.lookahead=0,Oc.match_length=Oc.prev_length=Na-1,Oc.match_available=0,ka.next_in=_T,ka.input=_9,ka.avail_in=_M,Oc.wrap=_O,G}t.deflateInit=c0,t.deflateInit2=vf,t.deflateReset=b0,t.deflateResetKeep=e0,t.deflateSetHeader=nb,t.deflate=Ba,t.deflateEnd=$_,t.deflateSetDictionary=_A,t.deflateInfo="pako deflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js":n=>{function t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}n.exports=t},"./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js":n=>{var t=30,i=12;n.exports=function(o,f){var d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De,le,Ce,Me,_n,_i,ll,_l,oa,Ru,ga;d=o.state,p=o.next_in,Ru=o.input,v=p+(o.avail_in-5),_=o.next_out,ga=o.output,k=_-(f-o.avail_out),P=_+(o.avail_out-257),L=d.dmax,G=d.wsize,Z=d.whave,W=d.wnext,j=d.window,H=d.hold,me=d.bits,$e=d.lencode,De=d.distcode,le=(1<<d.lenbits)-1,Ce=(1<<d.distbits)-1;e:do{me<15&&(H+=Ru[p++]<<me,me+=8,H+=Ru[p++]<<me,me+=8),Me=$e[H&le];n:for(;;){if(_n=Me>>>24,H>>>=_n,me-=_n,_n=Me>>>16&255,_n===0)ga[_++]=Me&65535;else if(_n&16){_i=Me&65535,_n&=15,_n&&(me<_n&&(H+=Ru[p++]<<me,me+=8),_i+=H&(1<<_n)-1,H>>>=_n,me-=_n),me<15&&(H+=Ru[p++]<<me,me+=8,H+=Ru[p++]<<me,me+=8),Me=De[H&Ce];t:for(;;){if(_n=Me>>>24,H>>>=_n,me-=_n,_n=Me>>>16&255,_n&16){if(ll=Me&65535,_n&=15,me<_n&&(H+=Ru[p++]<<me,me+=8,me<_n&&(H+=Ru[p++]<<me,me+=8)),ll+=H&(1<<_n)-1,ll>L){o.msg="invalid distance too far back",d.mode=t;break e}if(H>>>=_n,me-=_n,_n=_-k,ll>_n){if(_n=ll-_n,_n>Z&&d.sane){o.msg="invalid distance too far back",d.mode=t;break e}if(_l=0,oa=j,W===0){if(_l+=G-_n,_n<_i){_i-=_n;do ga[_++]=j[_l++];while(--_n);_l=_-ll,oa=ga}}else if(W<_n){if(_l+=G+W-_n,_n-=W,_n<_i){_i-=_n;do ga[_++]=j[_l++];while(--_n);if(_l=0,W<_i){_n=W,_i-=_n;do ga[_++]=j[_l++];while(--_n);_l=_-ll,oa=ga}}}else if(_l+=W-_n,_n<_i){_i-=_n;do ga[_++]=j[_l++];while(--_n);_l=_-ll,oa=ga}for(;_i>2;)ga[_++]=oa[_l++],ga[_++]=oa[_l++],ga[_++]=oa[_l++],_i-=3;_i&&(ga[_++]=oa[_l++],_i>1&&(ga[_++]=oa[_l++]))}else{_l=_-ll;do ga[_++]=ga[_l++],ga[_++]=ga[_l++],ga[_++]=ga[_l++],_i-=3;while(_i>2);_i&&(ga[_++]=ga[_l++],_i>1&&(ga[_++]=ga[_l++]))}}else if((_n&64)===0){Me=De[(Me&65535)+(H&(1<<_n)-1)];continue t}else{o.msg="invalid distance code",d.mode=t;break e}break}}else if((_n&64)===0){Me=$e[(Me&65535)+(H&(1<<_n)-1)];continue n}else if(_n&32){d.mode=i;break e}else{o.msg="invalid literal/length code",d.mode=t;break e}break}}while(p<v&&_<P);_i=me>>3,p-=_i,me-=_i<<3,H&=(1<<me)-1,o.next_in=p,o.next_out=_,o.avail_in=p<v?5+(v-p):5-(p-v),o.avail_out=_<P?257+(P-_):257-(_-P),d.hold=H,d.bits=me}},"./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js":(n,t,i)=>{var s=i("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=i("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),f=i("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),d=i("./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js"),p=i("./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js"),v=0,_=1,k=2,P=4,L=5,G=6,Z=0,W=1,j=2,H=-2,me=-3,$e=-4,De=-5,le=8,Ce=1,Me=2,_n=3,_i=4,ll=5,_l=6,oa=7,Ru=8,ga=9,_s=10,Sa=11,Ra=12,Da=13,Fa=14,Na=15,_a=16,Pa=17,qc=18,uf=19,_h=20,Uh=21,Kd=22,ud=23,sc=24,Yd=25,wg=26,Pf=27,ac=28,fc=29,nd=30,a0=31,_1=32,_$=852,$b=592,Z_=15,_b=Z_;function cb(vf){return(vf>>>24&255)+(vf>>>8&65280)+((vf&65280)<<8)+((vf&255)<<24)}function ib(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _2(vf){var c0;return!vf||!vf.state?H:(c0=vf.state,vf.total_in=vf.total_out=c0.total=0,vf.msg="",c0.wrap&&(vf.adler=c0.wrap&1),c0.mode=Ce,c0.last=0,c0.havedict=0,c0.dmax=32768,c0.head=null,c0.hold=0,c0.bits=0,c0.lencode=c0.lendyn=new s.Buf32(_$),c0.distcode=c0.distdyn=new s.Buf32($b),c0.sane=1,c0.back=-1,Z)}function Nb(vf){var c0;return!vf||!vf.state?H:(c0=vf.state,c0.wsize=0,c0.whave=0,c0.wnext=0,_2(vf))}function _D(vf,c0){var Ba,$_;return!vf||!vf.state||($_=vf.state,c0<0?(Ba=0,c0=-c0):(Ba=(c0>>4)+1,c0<48&&(c0&=15)),c0&&(c0<8||c0>15))?H:($_.window!==null&&$_.wbits!==c0&&($_.window=null),$_.wrap=Ba,$_.wbits=c0,Nb(vf))}function ec(vf,c0){var Ba,$_;return vf?($_=new ib,vf.state=$_,$_.window=null,Ba=_D(vf,c0),Ba!==Z&&(vf.state=null),Ba):H}function Jc(vf){return ec(vf,_b)}var ih=!0,Bd,xg;function hb(vf){if(ih){var c0;for(Bd=new s.Buf32(512),xg=new s.Buf32(32),c0=0;c0<144;)vf.lens[c0++]=8;for(;c0<256;)vf.lens[c0++]=9;for(;c0<280;)vf.lens[c0++]=7;for(;c0<288;)vf.lens[c0++]=8;for(p(_,vf.lens,0,288,Bd,0,vf.work,{bits:9}),c0=0;c0<32;)vf.lens[c0++]=5;p(k,vf.lens,0,32,xg,0,vf.work,{bits:5}),ih=!1}vf.lencode=Bd,vf.lenbits=9,vf.distcode=xg,vf.distbits=5}function _S(vf,c0,Ba,$_){var _A,ka=vf.state;return ka.window===null&&(ka.wsize=1<<ka.wbits,ka.wnext=0,ka.whave=0,ka.window=new s.Buf8(ka.wsize)),$_>=ka.wsize?(s.arraySet(ka.window,c0,Ba-ka.wsize,ka.wsize,0),ka.wnext=0,ka.whave=ka.wsize):(_A=ka.wsize-ka.wnext,_A>$_&&(_A=$_),s.arraySet(ka.window,c0,Ba-$_,_A,ka.wnext),$_-=_A,$_?(s.arraySet(ka.window,c0,Ba-$_,$_,0),ka.wnext=$_,ka.whave=ka.wsize):(ka.wnext+=_A,ka.wnext===ka.wsize&&(ka.wnext=0),ka.whave<ka.wsize&&(ka.whave+=_A))),0}function rc(vf,c0){var Ba,$_,_A,ka,Pp,_0,Oc,zg,_p,_O,_M,_T,_9,_q,Ez=0,_z,xz,Vj,Kz,_ee,dee,zz,$j,Gz=new s.Buf8(4),nee,_V,Ree=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!vf||!vf.state||!vf.output||!vf.input&&vf.avail_in!==0)return H;Ba=vf.state,Ba.mode===Ra&&(Ba.mode=Da),Pp=vf.next_out,_A=vf.output,Oc=vf.avail_out,ka=vf.next_in,$_=vf.input,_0=vf.avail_in,zg=Ba.hold,_p=Ba.bits,_O=_0,_M=Oc,$j=Z;e:for(;;)switch(Ba.mode){case Ce:if(Ba.wrap===0){Ba.mode=Da;break}for(;_p<16;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}if(Ba.wrap&2&&zg===35615){Ba.check=0,Gz[0]=zg&255,Gz[1]=zg>>>8&255,Ba.check=f(Ba.check,Gz,2,0),zg=0,_p=0,Ba.mode=Me;break}if(Ba.flags=0,Ba.head&&(Ba.head.done=!1),!(Ba.wrap&1)||(((zg&255)<<8)+(zg>>8))%31){vf.msg="incorrect header check",Ba.mode=nd;break}if((zg&15)!==le){vf.msg="unknown compression method",Ba.mode=nd;break}if(zg>>>=4,_p-=4,zz=(zg&15)+8,Ba.wbits===0)Ba.wbits=zz;else if(zz>Ba.wbits){vf.msg="invalid window size",Ba.mode=nd;break}Ba.dmax=1<<zz,vf.adler=Ba.check=1,Ba.mode=zg&512?_s:Ra,zg=0,_p=0;break;case Me:for(;_p<16;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}if(Ba.flags=zg,(Ba.flags&255)!==le){vf.msg="unknown compression method",Ba.mode=nd;break}if(Ba.flags&57344){vf.msg="unknown header flags set",Ba.mode=nd;break}Ba.head&&(Ba.head.text=zg>>8&1),Ba.flags&512&&(Gz[0]=zg&255,Gz[1]=zg>>>8&255,Ba.check=f(Ba.check,Gz,2,0)),zg=0,_p=0,Ba.mode=_n;case _n:for(;_p<32;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}Ba.head&&(Ba.head.time=zg),Ba.flags&512&&(Gz[0]=zg&255,Gz[1]=zg>>>8&255,Gz[2]=zg>>>16&255,Gz[3]=zg>>>24&255,Ba.check=f(Ba.check,Gz,4,0)),zg=0,_p=0,Ba.mode=_i;case _i:for(;_p<16;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}Ba.head&&(Ba.head.xflags=zg&255,Ba.head.os=zg>>8),Ba.flags&512&&(Gz[0]=zg&255,Gz[1]=zg>>>8&255,Ba.check=f(Ba.check,Gz,2,0)),zg=0,_p=0,Ba.mode=ll;case ll:if(Ba.flags&1024){for(;_p<16;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}Ba.length=zg,Ba.head&&(Ba.head.extra_len=zg),Ba.flags&512&&(Gz[0]=zg&255,Gz[1]=zg>>>8&255,Ba.check=f(Ba.check,Gz,2,0)),zg=0,_p=0}else Ba.head&&(Ba.head.extra=null);Ba.mode=_l;case _l:if(Ba.flags&1024&&(_T=Ba.length,_T>_0&&(_T=_0),_T&&(Ba.head&&(zz=Ba.head.extra_len-Ba.length,Ba.head.extra||(Ba.head.extra=new Array(Ba.head.extra_len)),s.arraySet(Ba.head.extra,$_,ka,_T,zz)),Ba.flags&512&&(Ba.check=f(Ba.check,$_,_T,ka)),_0-=_T,ka+=_T,Ba.length-=_T),Ba.length))break e;Ba.length=0,Ba.mode=oa;case oa:if(Ba.flags&2048){if(_0===0)break e;_T=0;do zz=$_[ka+_T++],Ba.head&&zz&&Ba.length<65536&&(Ba.head.name+=String.fromCharCode(zz));while(zz&&_T<_0);if(Ba.flags&512&&(Ba.check=f(Ba.check,$_,_T,ka)),_0-=_T,ka+=_T,zz)break e}else Ba.head&&(Ba.head.name=null);Ba.length=0,Ba.mode=Ru;case Ru:if(Ba.flags&4096){if(_0===0)break e;_T=0;do zz=$_[ka+_T++],Ba.head&&zz&&Ba.length<65536&&(Ba.head.comment+=String.fromCharCode(zz));while(zz&&_T<_0);if(Ba.flags&512&&(Ba.check=f(Ba.check,$_,_T,ka)),_0-=_T,ka+=_T,zz)break e}else Ba.head&&(Ba.head.comment=null);Ba.mode=ga;case ga:if(Ba.flags&512){for(;_p<16;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}if(zg!==(Ba.check&65535)){vf.msg="header crc mismatch",Ba.mode=nd;break}zg=0,_p=0}Ba.head&&(Ba.head.hcrc=Ba.flags>>9&1,Ba.head.done=!0),vf.adler=Ba.check=0,Ba.mode=Ra;break;case _s:for(;_p<32;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}vf.adler=Ba.check=cb(zg),zg=0,_p=0,Ba.mode=Sa;case Sa:if(Ba.havedict===0)return vf.next_out=Pp,vf.avail_out=Oc,vf.next_in=ka,vf.avail_in=_0,Ba.hold=zg,Ba.bits=_p,j;vf.adler=Ba.check=1,Ba.mode=Ra;case Ra:if(c0===L||c0===G)break e;case Da:if(Ba.last){zg>>>=_p&7,_p-=_p&7,Ba.mode=Pf;break}for(;_p<3;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}switch(Ba.last=zg&1,zg>>>=1,_p-=1,zg&3){case 0:Ba.mode=Fa;break;case 1:if(hb(Ba),Ba.mode=_h,c0===G){zg>>>=2,_p-=2;break e}break;case 2:Ba.mode=Pa;break;case 3:vf.msg="invalid block type",Ba.mode=nd}zg>>>=2,_p-=2;break;case Fa:for(zg>>>=_p&7,_p-=_p&7;_p<32;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}if((zg&65535)!==(zg>>>16^65535)){vf.msg="invalid stored block lengths",Ba.mode=nd;break}if(Ba.length=zg&65535,zg=0,_p=0,Ba.mode=Na,c0===G)break e;case Na:Ba.mode=_a;case _a:if(_T=Ba.length,_T){if(_T>_0&&(_T=_0),_T>Oc&&(_T=Oc),_T===0)break e;s.arraySet(_A,$_,ka,_T,Pp),_0-=_T,ka+=_T,Oc-=_T,Pp+=_T,Ba.length-=_T;break}Ba.mode=Ra;break;case Pa:for(;_p<14;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}if(Ba.nlen=(zg&31)+257,zg>>>=5,_p-=5,Ba.ndist=(zg&31)+1,zg>>>=5,_p-=5,Ba.ncode=(zg&15)+4,zg>>>=4,_p-=4,Ba.nlen>286||Ba.ndist>30){vf.msg="too many length or distance symbols",Ba.mode=nd;break}Ba.have=0,Ba.mode=qc;case qc:for(;Ba.have<Ba.ncode;){for(;_p<3;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}Ba.lens[Ree[Ba.have++]]=zg&7,zg>>>=3,_p-=3}for(;Ba.have<19;)Ba.lens[Ree[Ba.have++]]=0;if(Ba.lencode=Ba.lendyn,Ba.lenbits=7,nee={bits:Ba.lenbits},$j=p(v,Ba.lens,0,19,Ba.lencode,0,Ba.work,nee),Ba.lenbits=nee.bits,$j){vf.msg="invalid code lengths set",Ba.mode=nd;break}Ba.have=0,Ba.mode=uf;case uf:for(;Ba.have<Ba.nlen+Ba.ndist;){for(;Ez=Ba.lencode[zg&(1<<Ba.lenbits)-1],_z=Ez>>>24,xz=Ez>>>16&255,Vj=Ez&65535,!(_z<=_p);){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}if(Vj<16)zg>>>=_z,_p-=_z,Ba.lens[Ba.have++]=Vj;else{if(Vj===16){for(_V=_z+2;_p<_V;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}if(zg>>>=_z,_p-=_z,Ba.have===0){vf.msg="invalid bit length repeat",Ba.mode=nd;break}zz=Ba.lens[Ba.have-1],_T=3+(zg&3),zg>>>=2,_p-=2}else if(Vj===17){for(_V=_z+3;_p<_V;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}zg>>>=_z,_p-=_z,zz=0,_T=3+(zg&7),zg>>>=3,_p-=3}else{for(_V=_z+7;_p<_V;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}zg>>>=_z,_p-=_z,zz=0,_T=11+(zg&127),zg>>>=7,_p-=7}if(Ba.have+_T>Ba.nlen+Ba.ndist){vf.msg="invalid bit length repeat",Ba.mode=nd;break}for(;_T--;)Ba.lens[Ba.have++]=zz}}if(Ba.mode===nd)break;if(Ba.lens[256]===0){vf.msg="invalid code -- missing end-of-block",Ba.mode=nd;break}if(Ba.lenbits=9,nee={bits:Ba.lenbits},$j=p(_,Ba.lens,0,Ba.nlen,Ba.lencode,0,Ba.work,nee),Ba.lenbits=nee.bits,$j){vf.msg="invalid literal/lengths set",Ba.mode=nd;break}if(Ba.distbits=6,Ba.distcode=Ba.distdyn,nee={bits:Ba.distbits},$j=p(k,Ba.lens,Ba.nlen,Ba.ndist,Ba.distcode,0,Ba.work,nee),Ba.distbits=nee.bits,$j){vf.msg="invalid distances set",Ba.mode=nd;break}if(Ba.mode=_h,c0===G)break e;case _h:Ba.mode=Uh;case Uh:if(_0>=6&&Oc>=258){vf.next_out=Pp,vf.avail_out=Oc,vf.next_in=ka,vf.avail_in=_0,Ba.hold=zg,Ba.bits=_p,d(vf,_M),Pp=vf.next_out,_A=vf.output,Oc=vf.avail_out,ka=vf.next_in,$_=vf.input,_0=vf.avail_in,zg=Ba.hold,_p=Ba.bits,Ba.mode===Ra&&(Ba.back=-1);break}for(Ba.back=0;Ez=Ba.lencode[zg&(1<<Ba.lenbits)-1],_z=Ez>>>24,xz=Ez>>>16&255,Vj=Ez&65535,!(_z<=_p);){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}if(xz&&(xz&240)===0){for(Kz=_z,_ee=xz,dee=Vj;Ez=Ba.lencode[dee+((zg&(1<<Kz+_ee)-1)>>Kz)],_z=Ez>>>24,xz=Ez>>>16&255,Vj=Ez&65535,!(Kz+_z<=_p);){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}zg>>>=Kz,_p-=Kz,Ba.back+=Kz}if(zg>>>=_z,_p-=_z,Ba.back+=_z,Ba.length=Vj,xz===0){Ba.mode=wg;break}if(xz&32){Ba.back=-1,Ba.mode=Ra;break}if(xz&64){vf.msg="invalid literal/length code",Ba.mode=nd;break}Ba.extra=xz&15,Ba.mode=Kd;case Kd:if(Ba.extra){for(_V=Ba.extra;_p<_V;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}Ba.length+=zg&(1<<Ba.extra)-1,zg>>>=Ba.extra,_p-=Ba.extra,Ba.back+=Ba.extra}Ba.was=Ba.length,Ba.mode=ud;case ud:for(;Ez=Ba.distcode[zg&(1<<Ba.distbits)-1],_z=Ez>>>24,xz=Ez>>>16&255,Vj=Ez&65535,!(_z<=_p);){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}if((xz&240)===0){for(Kz=_z,_ee=xz,dee=Vj;Ez=Ba.distcode[dee+((zg&(1<<Kz+_ee)-1)>>Kz)],_z=Ez>>>24,xz=Ez>>>16&255,Vj=Ez&65535,!(Kz+_z<=_p);){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}zg>>>=Kz,_p-=Kz,Ba.back+=Kz}if(zg>>>=_z,_p-=_z,Ba.back+=_z,xz&64){vf.msg="invalid distance code",Ba.mode=nd;break}Ba.offset=Vj,Ba.extra=xz&15,Ba.mode=sc;case sc:if(Ba.extra){for(_V=Ba.extra;_p<_V;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}Ba.offset+=zg&(1<<Ba.extra)-1,zg>>>=Ba.extra,_p-=Ba.extra,Ba.back+=Ba.extra}if(Ba.offset>Ba.dmax){vf.msg="invalid distance too far back",Ba.mode=nd;break}Ba.mode=Yd;case Yd:if(Oc===0)break e;if(_T=_M-Oc,Ba.offset>_T){if(_T=Ba.offset-_T,_T>Ba.whave&&Ba.sane){vf.msg="invalid distance too far back",Ba.mode=nd;break}_T>Ba.wnext?(_T-=Ba.wnext,_9=Ba.wsize-_T):_9=Ba.wnext-_T,_T>Ba.length&&(_T=Ba.length),_q=Ba.window}else _q=_A,_9=Pp-Ba.offset,_T=Ba.length;_T>Oc&&(_T=Oc),Oc-=_T,Ba.length-=_T;do _A[Pp++]=_q[_9++];while(--_T);Ba.length===0&&(Ba.mode=Uh);break;case wg:if(Oc===0)break e;_A[Pp++]=Ba.length,Oc--,Ba.mode=Uh;break;case Pf:if(Ba.wrap){for(;_p<32;){if(_0===0)break e;_0--,zg|=$_[ka++]<<_p,_p+=8}if(_M-=Oc,vf.total_out+=_M,Ba.total+=_M,_M&&(vf.adler=Ba.check=Ba.flags?f(Ba.check,_A,_M,Pp-_M):o(Ba.check,_A,_M,Pp-_M)),_M=Oc,(Ba.flags?zg:cb(zg))!==Ba.check){vf.msg="incorrect data check",Ba.mode=nd;break}zg=0,_p=0}Ba.mode=ac;case ac:if(Ba.wrap&&Ba.flags){for(;_p<32;){if(_0===0)break e;_0--,zg+=$_[ka++]<<_p,_p+=8}if(zg!==(Ba.total&4294967295)){vf.msg="incorrect length check",Ba.mode=nd;break}zg=0,_p=0}Ba.mode=fc;case fc:$j=W;break e;case nd:$j=me;break e;case a0:return $e;case _1:default:return H}return vf.next_out=Pp,vf.avail_out=Oc,vf.next_in=ka,vf.avail_in=_0,Ba.hold=zg,Ba.bits=_p,(Ba.wsize||_M!==vf.avail_out&&Ba.mode<nd&&(Ba.mode<Pf||c0!==P))&&_S(vf,vf.output,vf.next_out,_M-vf.avail_out),_O-=vf.avail_in,_M-=vf.avail_out,vf.total_in+=_O,vf.total_out+=_M,Ba.total+=_M,Ba.wrap&&_M&&(vf.adler=Ba.check=Ba.flags?f(Ba.check,_A,_M,vf.next_out-_M):o(Ba.check,_A,_M,vf.next_out-_M)),vf.data_type=Ba.bits+(Ba.last?64:0)+(Ba.mode===Ra?128:0)+(Ba.mode===_h||Ba.mode===Na?256:0),(_O===0&&_M===0||c0===P)&&$j===Z&&($j=De),$j}function e0(vf){if(!vf||!vf.state)return H;var c0=vf.state;return c0.window&&(c0.window=null),vf.state=null,Z}function b0(vf,c0){var Ba;return!vf||!vf.state||(Ba=vf.state,(Ba.wrap&2)===0)?H:(Ba.head=c0,c0.done=!1,Z)}function nb(vf,c0){var Ba=c0.length,$_,_A,ka;return!vf||!vf.state||($_=vf.state,$_.wrap!==0&&$_.mode!==Sa)?H:$_.mode===Sa&&(_A=1,_A=o(_A,c0,Ba,0),_A!==$_.check)?me:(ka=_S(vf,c0,Ba,Ba),ka?($_.mode=a0,$e):($_.havedict=1,Z))}t.inflateReset=Nb,t.inflateReset2=_D,t.inflateResetKeep=_2,t.inflateInit=Jc,t.inflateInit2=ec,t.inflate=rc,t.inflateEnd=e0,t.inflateGetHeader=b0,t.inflateSetDictionary=nb,t.inflateInfo="pako inflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js":(n,t,i)=>{var s=i("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=15,f=852,d=592,p=0,v=1,_=2,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],P=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],G=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(W,j,H,me,$e,De,le,Ce){var Me=Ce.bits,_n=0,_i=0,ll=0,_l=0,oa=0,Ru=0,ga=0,_s=0,Sa=0,Ra=0,Da,Fa,Na,_a,Pa,qc=null,uf=0,_h,Uh=new s.Buf16(o+1),Kd=new s.Buf16(o+1),ud=null,sc=0,Yd,wg,Pf;for(_n=0;_n<=o;_n++)Uh[_n]=0;for(_i=0;_i<me;_i++)Uh[j[H+_i]]++;for(oa=Me,_l=o;_l>=1&&Uh[_l]===0;_l--);if(oa>_l&&(oa=_l),_l===0)return $e[De++]=20971520,$e[De++]=20971520,Ce.bits=1,0;for(ll=1;ll<_l&&Uh[ll]===0;ll++);for(oa<ll&&(oa=ll),_s=1,_n=1;_n<=o;_n++)if(_s<<=1,_s-=Uh[_n],_s<0)return-1;if(_s>0&&(W===p||_l!==1))return-1;for(Kd[1]=0,_n=1;_n<o;_n++)Kd[_n+1]=Kd[_n]+Uh[_n];for(_i=0;_i<me;_i++)j[H+_i]!==0&&(le[Kd[j[H+_i]]++]=_i);if(W===p?(qc=ud=le,_h=19):W===v?(qc=k,uf-=257,ud=P,sc-=257,_h=256):(qc=L,ud=G,_h=-1),Ra=0,_i=0,_n=ll,Pa=De,Ru=oa,ga=0,Na=-1,Sa=1<<oa,_a=Sa-1,W===v&&Sa>f||W===_&&Sa>d)return 1;for(;;){Yd=_n-ga,le[_i]<_h?(wg=0,Pf=le[_i]):le[_i]>_h?(wg=ud[sc+le[_i]],Pf=qc[uf+le[_i]]):(wg=96,Pf=0),Da=1<<_n-ga,Fa=1<<Ru,ll=Fa;do Fa-=Da,$e[Pa+(Ra>>ga)+Fa]=Yd<<24|wg<<16|Pf|0;while(Fa!==0);for(Da=1<<_n-1;Ra&Da;)Da>>=1;if(Da!==0?(Ra&=Da-1,Ra+=Da):Ra=0,_i++,--Uh[_n]===0){if(_n===_l)break;_n=j[H+le[_i]]}if(_n>oa&&(Ra&_a)!==Na){for(ga===0&&(ga=oa),Pa+=ll,Ru=_n-ga,_s=1<<Ru;Ru+ga<_l&&(_s-=Uh[Ru+ga],!(_s<=0));)Ru++,_s<<=1;if(Sa+=1<<Ru,W===v&&Sa>f||W===_&&Sa>d)return 1;Na=Ra&_a,$e[Na]=oa<<24|Ru<<16|Pa-De|0}}return Ra!==0&&($e[Pa+Ra]=_n-ga<<24|4194304|0),Ce.bits=oa,0}},"./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js":n=>{n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js":(n,t,i)=>{var s=i("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=4,f=0,d=1,p=2;function v(rc){for(var e0=rc.length;--e0>=0;)rc[e0]=0}var _=0,k=1,P=2,L=3,G=258,Z=29,W=256,j=W+1+Z,H=30,me=19,$e=2*j+1,De=15,le=16,Ce=7,Me=256,_n=16,_i=17,ll=18,_l=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],oa=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ru=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ga=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_s=512,Sa=new Array((j+2)*2);v(Sa);var Ra=new Array(H*2);v(Ra);var Da=new Array(_s);v(Da);var Fa=new Array(G-L+1);v(Fa);var Na=new Array(Z);v(Na);var _a=new Array(H);v(_a);function Pa(rc,e0,b0,nb,vf){this.static_tree=rc,this.extra_bits=e0,this.extra_base=b0,this.elems=nb,this.max_length=vf,this.has_stree=rc&&rc.length}var qc,uf,_h;function Uh(rc,e0){this.dyn_tree=rc,this.max_code=0,this.stat_desc=e0}function Kd(rc){return rc<256?Da[rc]:Da[256+(rc>>>7)]}function ud(rc,e0){rc.pending_buf[rc.pending++]=e0&255,rc.pending_buf[rc.pending++]=e0>>>8&255}function sc(rc,e0,b0){rc.bi_valid>le-b0?(rc.bi_buf|=e0<<rc.bi_valid&65535,ud(rc,rc.bi_buf),rc.bi_buf=e0>>le-rc.bi_valid,rc.bi_valid+=b0-le):(rc.bi_buf|=e0<<rc.bi_valid&65535,rc.bi_valid+=b0)}function Yd(rc,e0,b0){sc(rc,b0[e0*2],b0[e0*2+1])}function wg(rc,e0){var b0=0;do b0|=rc&1,rc>>>=1,b0<<=1;while(--e0>0);return b0>>>1}function Pf(rc){rc.bi_valid===16?(ud(rc,rc.bi_buf),rc.bi_buf=0,rc.bi_valid=0):rc.bi_valid>=8&&(rc.pending_buf[rc.pending++]=rc.bi_buf&255,rc.bi_buf>>=8,rc.bi_valid-=8)}function ac(rc,e0){var b0=e0.dyn_tree,nb=e0.max_code,vf=e0.stat_desc.static_tree,c0=e0.stat_desc.has_stree,Ba=e0.stat_desc.extra_bits,$_=e0.stat_desc.extra_base,_A=e0.stat_desc.max_length,ka,Pp,_0,Oc,zg,_p,_O=0;for(Oc=0;Oc<=De;Oc++)rc.bl_count[Oc]=0;for(b0[rc.heap[rc.heap_max]*2+1]=0,ka=rc.heap_max+1;ka<$e;ka++)Pp=rc.heap[ka],Oc=b0[b0[Pp*2+1]*2+1]+1,Oc>_A&&(Oc=_A,_O++),b0[Pp*2+1]=Oc,!(Pp>nb)&&(rc.bl_count[Oc]++,zg=0,Pp>=$_&&(zg=Ba[Pp-$_]),_p=b0[Pp*2],rc.opt_len+=_p*(Oc+zg),c0&&(rc.static_len+=_p*(vf[Pp*2+1]+zg)));if(_O!==0){do{for(Oc=_A-1;rc.bl_count[Oc]===0;)Oc--;rc.bl_count[Oc]--,rc.bl_count[Oc+1]+=2,rc.bl_count[_A]--,_O-=2}while(_O>0);for(Oc=_A;Oc!==0;Oc--)for(Pp=rc.bl_count[Oc];Pp!==0;)_0=rc.heap[--ka],!(_0>nb)&&(b0[_0*2+1]!==Oc&&(rc.opt_len+=(Oc-b0[_0*2+1])*b0[_0*2],b0[_0*2+1]=Oc),Pp--)}}function fc(rc,e0,b0){var nb=new Array(De+1),vf=0,c0,Ba;for(c0=1;c0<=De;c0++)nb[c0]=vf=vf+b0[c0-1]<<1;for(Ba=0;Ba<=e0;Ba++){var $_=rc[Ba*2+1];$_!==0&&(rc[Ba*2]=wg(nb[$_]++,$_))}}function nd(){var rc,e0,b0,nb,vf,c0=new Array(De+1);for(b0=0,nb=0;nb<Z-1;nb++)for(Na[nb]=b0,rc=0;rc<1<<_l[nb];rc++)Fa[b0++]=nb;for(Fa[b0-1]=nb,vf=0,nb=0;nb<16;nb++)for(_a[nb]=vf,rc=0;rc<1<<oa[nb];rc++)Da[vf++]=nb;for(vf>>=7;nb<H;nb++)for(_a[nb]=vf<<7,rc=0;rc<1<<oa[nb]-7;rc++)Da[256+vf++]=nb;for(e0=0;e0<=De;e0++)c0[e0]=0;for(rc=0;rc<=143;)Sa[rc*2+1]=8,rc++,c0[8]++;for(;rc<=255;)Sa[rc*2+1]=9,rc++,c0[9]++;for(;rc<=279;)Sa[rc*2+1]=7,rc++,c0[7]++;for(;rc<=287;)Sa[rc*2+1]=8,rc++,c0[8]++;for(fc(Sa,j+1,c0),rc=0;rc<H;rc++)Ra[rc*2+1]=5,Ra[rc*2]=wg(rc,5);qc=new Pa(Sa,_l,W+1,j,De),uf=new Pa(Ra,oa,0,H,De),_h=new Pa(new Array(0),Ru,0,me,Ce)}function a0(rc){var e0;for(e0=0;e0<j;e0++)rc.dyn_ltree[e0*2]=0;for(e0=0;e0<H;e0++)rc.dyn_dtree[e0*2]=0;for(e0=0;e0<me;e0++)rc.bl_tree[e0*2]=0;rc.dyn_ltree[Me*2]=1,rc.opt_len=rc.static_len=0,rc.last_lit=rc.matches=0}function _1(rc){rc.bi_valid>8?ud(rc,rc.bi_buf):rc.bi_valid>0&&(rc.pending_buf[rc.pending++]=rc.bi_buf),rc.bi_buf=0,rc.bi_valid=0}function _$(rc,e0,b0,nb){_1(rc),ud(rc,b0),ud(rc,~b0),s.arraySet(rc.pending_buf,rc.window,e0,b0,rc.pending),rc.pending+=b0}function $b(rc,e0,b0,nb){var vf=e0*2,c0=b0*2;return rc[vf]<rc[c0]||rc[vf]===rc[c0]&&nb[e0]<=nb[b0]}function Z_(rc,e0,b0){for(var nb=rc.heap[b0],vf=b0<<1;vf<=rc.heap_len&&(vf<rc.heap_len&&$b(e0,rc.heap[vf+1],rc.heap[vf],rc.depth)&&vf++,!$b(e0,nb,rc.heap[vf],rc.depth));)rc.heap[b0]=rc.heap[vf],b0=vf,vf<<=1;rc.heap[b0]=nb}function _b(rc,e0,b0){var nb,vf,c0=0,Ba,$_;if(rc.last_lit!==0)do nb=rc.pending_buf[rc.d_buf+c0*2]<<8|rc.pending_buf[rc.d_buf+c0*2+1],vf=rc.pending_buf[rc.l_buf+c0],c0++,nb===0?Yd(rc,vf,e0):(Ba=Fa[vf],Yd(rc,Ba+W+1,e0),$_=_l[Ba],$_!==0&&(vf-=Na[Ba],sc(rc,vf,$_)),nb--,Ba=Kd(nb),Yd(rc,Ba,b0),$_=oa[Ba],$_!==0&&(nb-=_a[Ba],sc(rc,nb,$_)));while(c0<rc.last_lit);Yd(rc,Me,e0)}function cb(rc,e0){var b0=e0.dyn_tree,nb=e0.stat_desc.static_tree,vf=e0.stat_desc.has_stree,c0=e0.stat_desc.elems,Ba,$_,_A=-1,ka;for(rc.heap_len=0,rc.heap_max=$e,Ba=0;Ba<c0;Ba++)b0[Ba*2]!==0?(rc.heap[++rc.heap_len]=_A=Ba,rc.depth[Ba]=0):b0[Ba*2+1]=0;for(;rc.heap_len<2;)ka=rc.heap[++rc.heap_len]=_A<2?++_A:0,b0[ka*2]=1,rc.depth[ka]=0,rc.opt_len--,vf&&(rc.static_len-=nb[ka*2+1]);for(e0.max_code=_A,Ba=rc.heap_len>>1;Ba>=1;Ba--)Z_(rc,b0,Ba);ka=c0;do Ba=rc.heap[1],rc.heap[1]=rc.heap[rc.heap_len--],Z_(rc,b0,1),$_=rc.heap[1],rc.heap[--rc.heap_max]=Ba,rc.heap[--rc.heap_max]=$_,b0[ka*2]=b0[Ba*2]+b0[$_*2],rc.depth[ka]=(rc.depth[Ba]>=rc.depth[$_]?rc.depth[Ba]:rc.depth[$_])+1,b0[Ba*2+1]=b0[$_*2+1]=ka,rc.heap[1]=ka++,Z_(rc,b0,1);while(rc.heap_len>=2);rc.heap[--rc.heap_max]=rc.heap[1],ac(rc,e0),fc(b0,_A,rc.bl_count)}function ib(rc,e0,b0){var nb,vf=-1,c0,Ba=e0[0*2+1],$_=0,_A=7,ka=4;for(Ba===0&&(_A=138,ka=3),e0[(b0+1)*2+1]=65535,nb=0;nb<=b0;nb++)c0=Ba,Ba=e0[(nb+1)*2+1],!(++$_<_A&&c0===Ba)&&($_<ka?rc.bl_tree[c0*2]+=$_:c0!==0?(c0!==vf&&rc.bl_tree[c0*2]++,rc.bl_tree[_n*2]++):$_<=10?rc.bl_tree[_i*2]++:rc.bl_tree[ll*2]++,$_=0,vf=c0,Ba===0?(_A=138,ka=3):c0===Ba?(_A=6,ka=3):(_A=7,ka=4))}function _2(rc,e0,b0){var nb,vf=-1,c0,Ba=e0[0*2+1],$_=0,_A=7,ka=4;for(Ba===0&&(_A=138,ka=3),nb=0;nb<=b0;nb++)if(c0=Ba,Ba=e0[(nb+1)*2+1],!(++$_<_A&&c0===Ba)){if($_<ka)do Yd(rc,c0,rc.bl_tree);while(--$_!==0);else c0!==0?(c0!==vf&&(Yd(rc,c0,rc.bl_tree),$_--),Yd(rc,_n,rc.bl_tree),sc(rc,$_-3,2)):$_<=10?(Yd(rc,_i,rc.bl_tree),sc(rc,$_-3,3)):(Yd(rc,ll,rc.bl_tree),sc(rc,$_-11,7));$_=0,vf=c0,Ba===0?(_A=138,ka=3):c0===Ba?(_A=6,ka=3):(_A=7,ka=4)}}function Nb(rc){var e0;for(ib(rc,rc.dyn_ltree,rc.l_desc.max_code),ib(rc,rc.dyn_dtree,rc.d_desc.max_code),cb(rc,rc.bl_desc),e0=me-1;e0>=3&&rc.bl_tree[ga[e0]*2+1]===0;e0--);return rc.opt_len+=3*(e0+1)+5+5+4,e0}function _D(rc,e0,b0,nb){var vf;for(sc(rc,e0-257,5),sc(rc,b0-1,5),sc(rc,nb-4,4),vf=0;vf<nb;vf++)sc(rc,rc.bl_tree[ga[vf]*2+1],3);_2(rc,rc.dyn_ltree,e0-1),_2(rc,rc.dyn_dtree,b0-1)}function ec(rc){var e0=4093624447,b0;for(b0=0;b0<=31;b0++,e0>>>=1)if(e0&1&&rc.dyn_ltree[b0*2]!==0)return f;if(rc.dyn_ltree[18]!==0||rc.dyn_ltree[20]!==0||rc.dyn_ltree[26]!==0)return d;for(b0=32;b0<W;b0++)if(rc.dyn_ltree[b0*2]!==0)return d;return f}var Jc=!1;function ih(rc){Jc||(nd(),Jc=!0),rc.l_desc=new Uh(rc.dyn_ltree,qc),rc.d_desc=new Uh(rc.dyn_dtree,uf),rc.bl_desc=new Uh(rc.bl_tree,_h),rc.bi_buf=0,rc.bi_valid=0,a0(rc)}function Bd(rc,e0,b0,nb){sc(rc,(_<<1)+(nb?1:0),3),_$(rc,e0,b0)}function xg(rc){sc(rc,k<<1,3),Yd(rc,Me,Sa),Pf(rc)}function hb(rc,e0,b0,nb){var vf,c0,Ba=0;rc.level>0?(rc.strm.data_type===p&&(rc.strm.data_type=ec(rc)),cb(rc,rc.l_desc),cb(rc,rc.d_desc),Ba=Nb(rc),vf=rc.opt_len+3+7>>>3,c0=rc.static_len+3+7>>>3,c0<=vf&&(vf=c0)):vf=c0=b0+5,b0+4<=vf&&e0!==-1?Bd(rc,e0,b0,nb):rc.strategy===o||c0===vf?(sc(rc,(k<<1)+(nb?1:0),3),_b(rc,Sa,Ra)):(sc(rc,(P<<1)+(nb?1:0),3),_D(rc,rc.l_desc.max_code+1,rc.d_desc.max_code+1,Ba+1),_b(rc,rc.dyn_ltree,rc.dyn_dtree)),a0(rc),nb&&_1(rc)}function _S(rc,e0,b0){return rc.pending_buf[rc.d_buf+rc.last_lit*2]=e0>>>8&255,rc.pending_buf[rc.d_buf+rc.last_lit*2+1]=e0&255,rc.pending_buf[rc.l_buf+rc.last_lit]=b0&255,rc.last_lit++,e0===0?rc.dyn_ltree[b0*2]++:(rc.matches++,e0--,rc.dyn_ltree[(Fa[b0]+W+1)*2]++,rc.dyn_dtree[Kd(e0)*2]++),rc.last_lit===rc.lit_bufsize-1}t._tr_init=ih,t._tr_stored_block=Bd,t._tr_flush_block=hb,t._tr_tally=_S,t._tr_align=xg},"./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js":n=>{function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}n.exports=t},"./src/SurfaceWorker.js":()=>{$3Dmol.workerString=(function(){self.onmessage=function(n){var t=n.data,i=t.type;if(i<0)self.atomData=t.atoms,self.volume=t.volume,self.ps=new ProteinSurface;else{var s=self.ps;s.initparm(t.expandedExtent,i!=1,self.volume),s.fillvoxels(self.atomData,t.extendedAtoms),s.buildboundary(),(i===4||i===2)&&(s.fastdistancemap(),s.boundingatom(!1),s.fillvoxelswaals(self.atomData,t.extendedAtoms)),s.marchingcube(i);var o=s.getFacesAndVertices(t.atomsToShow);self.postMessage(o)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},"./src/exporter.js":n=>{typeof n.exports=="object"&&(n.exports=window.$3Dmol)},"./src/vendor/mmtf.js":function(n,t){(function(i,s){s(t)})(this,function(i){function s(ec,Jc,ih){for(var Bd=(ec.byteLength,0),xg=ih.length;xg>Bd;Bd++){var hb=ih.charCodeAt(Bd);if(128>hb)ec.setUint8(Jc++,hb>>>0&127|0);else if(2048>hb)ec.setUint8(Jc++,hb>>>6&31|192),ec.setUint8(Jc++,hb>>>0&63|128);else if(65536>hb)ec.setUint8(Jc++,hb>>>12&15|224),ec.setUint8(Jc++,hb>>>6&63|128),ec.setUint8(Jc++,hb>>>0&63|128);else{if(!(1114112>hb))throw new Error("bad codepoint "+hb);ec.setUint8(Jc++,hb>>>18&7|240),ec.setUint8(Jc++,hb>>>12&63|128),ec.setUint8(Jc++,hb>>>6&63|128),ec.setUint8(Jc++,hb>>>0&63|128)}}}function o(ec){for(var Jc=0,ih=0,Bd=ec.length;Bd>ih;ih++){var xg=ec.charCodeAt(ih);if(128>xg)Jc+=1;else if(2048>xg)Jc+=2;else if(65536>xg)Jc+=3;else{if(!(1114112>xg))throw new Error("bad codepoint "+xg);Jc+=4}}return Jc}function f(ec,Jc,ih){var Bd=typeof ec;if(Bd==="string"){var xg=o(ec);if(32>xg)return Jc.setUint8(ih,160|xg),s(Jc,ih+1,ec),1+xg;if(256>xg)return Jc.setUint8(ih,217),Jc.setUint8(ih+1,xg),s(Jc,ih+2,ec),2+xg;if(65536>xg)return Jc.setUint8(ih,218),Jc.setUint16(ih+1,xg),s(Jc,ih+3,ec),3+xg;if(4294967296>xg)return Jc.setUint8(ih,219),Jc.setUint32(ih+1,xg),s(Jc,ih+5,ec),5+xg}if(ec instanceof Uint8Array){var xg=ec.byteLength,hb=new Uint8Array(Jc.buffer);if(256>xg)return Jc.setUint8(ih,196),Jc.setUint8(ih+1,xg),hb.set(ec,ih+2),2+xg;if(65536>xg)return Jc.setUint8(ih,197),Jc.setUint16(ih+1,xg),hb.set(ec,ih+3),3+xg;if(4294967296>xg)return Jc.setUint8(ih,198),Jc.setUint32(ih+1,xg),hb.set(ec,ih+5),5+xg}if(Bd==="number"){if(!isFinite(ec))throw new Error("Number not finite: "+ec);if(Math.floor(ec)!==ec)return Jc.setUint8(ih,203),Jc.setFloat64(ih+1,ec),9;if(ec>=0){if(128>ec)return Jc.setUint8(ih,ec),1;if(256>ec)return Jc.setUint8(ih,204),Jc.setUint8(ih+1,ec),2;if(65536>ec)return Jc.setUint8(ih,205),Jc.setUint16(ih+1,ec),3;if(4294967296>ec)return Jc.setUint8(ih,206),Jc.setUint32(ih+1,ec),5;throw new Error("Number too big 0x"+ec.toString(16))}if(ec>=-32)return Jc.setInt8(ih,ec),1;if(ec>=-128)return Jc.setUint8(ih,208),Jc.setInt8(ih+1,ec),2;if(ec>=-32768)return Jc.setUint8(ih,209),Jc.setInt16(ih+1,ec),3;if(ec>=-2147483648)return Jc.setUint8(ih,210),Jc.setInt32(ih+1,ec),5;throw new Error("Number too small -0x"+(-ec).toString(16).substr(1))}if(ec===null)return Jc.setUint8(ih,192),1;if(Bd==="boolean")return Jc.setUint8(ih,ec?195:194),1;if(Bd==="object"){var xg,e0=0,_S=Array.isArray(ec);if(_S)xg=ec.length;else{var rc=Object.keys(ec);xg=rc.length}var e0;if(16>xg?(Jc.setUint8(ih,xg|(_S?144:128)),e0=1):65536>xg?(Jc.setUint8(ih,_S?220:222),Jc.setUint16(ih+1,xg),e0=3):4294967296>xg&&(Jc.setUint8(ih,_S?221:223),Jc.setUint32(ih+1,xg),e0=5),_S)for(var b0=0;xg>b0;b0++)e0+=f(ec[b0],Jc,ih+e0);else for(var b0=0;xg>b0;b0++){var nb=rc[b0];e0+=f(nb,Jc,ih+e0),e0+=f(ec[nb],Jc,ih+e0)}return e0}throw new Error("Unknown type "+Bd)}function d(ec){var Jc=typeof ec;if(Jc==="string"){var ih=o(ec);if(32>ih)return 1+ih;if(256>ih)return 2+ih;if(65536>ih)return 3+ih;if(4294967296>ih)return 5+ih}if(ec instanceof Uint8Array){var ih=ec.byteLength;if(256>ih)return 2+ih;if(65536>ih)return 3+ih;if(4294967296>ih)return 5+ih}if(Jc==="number"){if(Math.floor(ec)!==ec)return 9;if(ec>=0){if(128>ec)return 1;if(256>ec)return 2;if(65536>ec)return 3;if(4294967296>ec)return 5;throw new Error("Number too big 0x"+ec.toString(16))}if(ec>=-32)return 1;if(ec>=-128)return 2;if(ec>=-32768)return 3;if(ec>=-2147483648)return 5;throw new Error("Number too small -0x"+ec.toString(16).substr(1))}if(Jc==="boolean"||ec===null)return 1;if(Jc==="object"){var ih,Bd=0;if(Array.isArray(ec)){ih=ec.length;for(var xg=0;ih>xg;xg++)Bd+=d(ec[xg])}else{var hb=Object.keys(ec);ih=hb.length;for(var xg=0;ih>xg;xg++){var _S=hb[xg];Bd+=d(_S)+d(ec[_S])}}if(16>ih)return 1+Bd;if(65536>ih)return 3+Bd;if(4294967296>ih)return 5+Bd;throw new Error("Array or object too long 0x"+ih.toString(16))}throw new Error("Unknown type "+Jc)}function p(ec){var Jc=new ArrayBuffer(d(ec)),ih=new DataView(Jc);return f(ec,ih,0),new Uint8Array(Jc)}function v(ec,Jc,ih){return Jc?new ec(Jc.buffer,Jc.byteOffset,Jc.byteLength/(ih||1)):void 0}function _(ec){return v(DataView,ec)}function k(ec){return v(Uint8Array,ec)}function P(ec){return v(Int8Array,ec)}function L(ec){return v(Int32Array,ec,4)}function G(ec){return v(Float32Array,ec,4)}function Z(ec,Jc){var ih=ec.length/2;Jc||(Jc=new Int16Array(ih));for(var Bd=0,xg=0;ih>Bd;++Bd,xg+=2)Jc[Bd]=ec[xg]<<8^ec[xg+1]<<0;return Jc}function W(ec,Jc){var ih=ec.length;Jc||(Jc=new Uint8Array(2*ih));for(var Bd=_(Jc),xg=0;ih>xg;++xg)Bd.setInt16(2*xg,ec[xg]);return k(Jc)}function j(ec,Jc){var ih=ec.length/4;Jc||(Jc=new Int32Array(ih));for(var Bd=0,xg=0;ih>Bd;++Bd,xg+=4)Jc[Bd]=ec[xg]<<24^ec[xg+1]<<16^ec[xg+2]<<8^ec[xg+3]<<0;return Jc}function H(ec,Jc){var ih=ec.length;Jc||(Jc=new Uint8Array(4*ih));for(var Bd=_(Jc),xg=0;ih>xg;++xg)Bd.setInt32(4*xg,ec[xg]);return k(Jc)}function me(ec,Jc){var ih=ec.length;Jc||(Jc=new Float32Array(ih/4));for(var Bd=_(Jc),xg=_(ec),hb=0,_S=0,rc=ih/4;rc>hb;++hb,_S+=4)Bd.setFloat32(_S,xg.getFloat32(_S),!0);return Jc}function $e(ec,Jc,ih){var Bd=ec.length,xg=1/Jc;ih||(ih=new Float32Array(Bd));for(var hb=0;Bd>hb;++hb)ih[hb]=ec[hb]*xg;return ih}function De(ec,Jc,ih){var Bd=ec.length;ih||(ih=new Int32Array(Bd));for(var xg=0;Bd>xg;++xg)ih[xg]=Math.round(ec[xg]*Jc);return ih}function le(ec,Jc){var ih,Bd;if(!Jc){var xg=0;for(ih=0,Bd=ec.length;Bd>ih;ih+=2)xg+=ec[ih+1];Jc=new ec.constructor(xg)}var hb=0;for(ih=0,Bd=ec.length;Bd>ih;ih+=2)for(var _S=ec[ih],rc=ec[ih+1],e0=0;rc>e0;++e0)Jc[hb]=_S,++hb;return Jc}function Ce(ec){if(ec.length===0)return new Int32Array;var Jc,ih,Bd=2;for(Jc=1,ih=ec.length;ih>Jc;++Jc)ec[Jc-1]!==ec[Jc]&&(Bd+=2);var xg=new Int32Array(Bd),hb=0,_S=1;for(Jc=1,ih=ec.length;ih>Jc;++Jc)ec[Jc-1]!==ec[Jc]?(xg[hb]=ec[Jc-1],xg[hb+1]=_S,_S=1,hb+=2):++_S;return xg[hb]=ec[ec.length-1],xg[hb+1]=_S,xg}function Me(ec,Jc){var ih=ec.length;Jc||(Jc=new ec.constructor(ih)),ih&&(Jc[0]=ec[0]);for(var Bd=1;ih>Bd;++Bd)Jc[Bd]=ec[Bd]+Jc[Bd-1];return Jc}function _n(ec,Jc){var ih=ec.length;Jc||(Jc=new ec.constructor(ih)),Jc[0]=ec[0];for(var Bd=1;ih>Bd;++Bd)Jc[Bd]=ec[Bd]-ec[Bd-1];return Jc}function _i(ec,Jc){var ih,Bd,xg=ec instanceof Int8Array?127:32767,hb=-xg-1,_S=ec.length;if(!Jc){var rc=0;for(ih=0;_S>ih;++ih)ec[ih]<xg&&ec[ih]>hb&&++rc;Jc=new Int32Array(rc)}for(ih=0,Bd=0;_S>ih;){for(var e0=0;ec[ih]===xg||ec[ih]===hb;)e0+=ec[ih],++ih;e0+=ec[ih],++ih,Jc[Bd]=e0,++Bd}return Jc}function ll(ec,Jc){var ih,Bd=32767,xg=-32768,hb=ec.length,_S=0;for(ih=0;hb>ih;++ih){var rc=ec[ih];rc===0?++_S:rc>0?(_S+=Math.ceil(rc/Bd),rc%Bd===0&&(_S+=1)):(_S+=Math.ceil(rc/xg),rc%xg===0&&(_S+=1))}var e0=new Int16Array(_S),b0=0;for(ih=0;hb>ih;++ih){var rc=ec[ih];if(rc>=0)for(;rc>=Bd;)e0[b0]=Bd,++b0,rc-=Bd;else for(;xg>=rc;)e0[b0]=xg,++b0,rc-=xg;e0[b0]=rc,++b0}return e0}function _l(ec,Jc){return Me(le(ec),Jc)}function oa(ec){return Ce(_n(ec))}function Ru(ec,Jc,ih){return $e(le(ec,L(ih)),Jc,ih)}function ga(ec,Jc){return Ce(De(ec,Jc))}function _s(ec,Jc,ih){return $e(Me(ec,L(ih)),Jc,ih)}function Sa(ec,Jc,ih){return _n(De(ec,Jc),ih)}function Ra(ec,Jc,ih){return $e(_i(ec,L(ih)),Jc,ih)}function Da(ec,Jc,ih){var Bd=_i(ec,L(ih));return _s(Bd,Jc,G(Bd))}function Fa(ec,Jc,ih){return ll(Sa(ec,Jc))}function Na(hb){var Jc=_(hb),ih=Jc.getInt32(0),Bd=Jc.getInt32(4),xg=hb.subarray(8,12),hb=hb.subarray(12);return[ih,hb,Bd,xg]}function _a(ec,Jc,ih,Bd){var xg=new ArrayBuffer(12+Bd.byteLength),hb=new Uint8Array(xg),_S=new DataView(xg);return _S.setInt32(0,ec),_S.setInt32(4,Jc),ih&&hb.set(ih,8),hb.set(Bd,12),hb}function Pa(ec){var Jc=ec.length,ih=k(ec);return _a(2,Jc,void 0,ih)}function qc(ec){var Jc=ec.length,ih=H(ec);return _a(4,Jc,void 0,ih)}function uf(ec,Jc){var ih=ec.length/Jc,Bd=H([Jc]),xg=k(ec);return _a(5,ih,Bd,xg)}function _h(ec){var Jc=ec.length,ih=H(Ce(ec));return _a(6,Jc,void 0,ih)}function Uh(ec){var Jc=ec.length,ih=H(oa(ec));return _a(8,Jc,void 0,ih)}function Kd(ec,Jc){var ih=ec.length,Bd=H([Jc]),xg=H(ga(ec,Jc));return _a(9,ih,Bd,xg)}function ud(ec,Jc){var ih=ec.length,Bd=H([Jc]),xg=W(Fa(ec,Jc));return _a(10,ih,Bd,xg)}function sc(ec){var Jc={};return Z_.forEach(function(ih){ec[ih]!==void 0&&(Jc[ih]=ec[ih])}),ec.bondAtomList&&(Jc.bondAtomList=qc(ec.bondAtomList)),ec.bondOrderList&&(Jc.bondOrderList=Pa(ec.bondOrderList)),Jc.xCoordList=ud(ec.xCoordList,1e3),Jc.yCoordList=ud(ec.yCoordList,1e3),Jc.zCoordList=ud(ec.zCoordList,1e3),ec.bFactorList&&(Jc.bFactorList=ud(ec.bFactorList,100)),ec.atomIdList&&(Jc.atomIdList=Uh(ec.atomIdList)),ec.altLocList&&(Jc.altLocList=_h(ec.altLocList)),ec.occupancyList&&(Jc.occupancyList=Kd(ec.occupancyList,100)),Jc.groupIdList=Uh(ec.groupIdList),Jc.groupTypeList=qc(ec.groupTypeList),ec.secStructList&&(Jc.secStructList=Pa(ec.secStructList)),ec.insCodeList&&(Jc.insCodeList=_h(ec.insCodeList)),ec.sequenceIndexList&&(Jc.sequenceIndexList=Uh(ec.sequenceIndexList)),Jc.chainIdList=uf(ec.chainIdList,4),ec.chainNameList&&(Jc.chainNameList=uf(ec.chainNameList,4)),Jc}function Yd(ec){function Jc(e0){for(var b0={},nb=0;e0>nb;nb++){var vf=hb();b0[vf]=hb()}return b0}function ih(e0){var b0=ec.subarray(_S,_S+e0);return _S+=e0,b0}function Bd(e0){var b0=ec.subarray(_S,_S+e0);_S+=e0;var nb=65535;if(e0>nb){for(var vf=[],c0=0;c0<b0.length;c0+=nb)vf.push(String.fromCharCode.apply(null,b0.subarray(c0,c0+nb)));return vf.join("")}return String.fromCharCode.apply(null,b0)}function xg(e0){for(var b0=new Array(e0),nb=0;e0>nb;nb++)b0[nb]=hb();return b0}function hb(){var e0,b0,nb=ec[_S];if((128&nb)===0)return _S++,nb;if((240&nb)===128)return b0=15&nb,_S++,Jc(b0);if((240&nb)===144)return b0=15&nb,_S++,xg(b0);if((224&nb)===160)return b0=31&nb,_S++,Bd(b0);if((224&nb)===224)return e0=rc.getInt8(_S),_S++,e0;switch(nb){case 192:return _S++,null;case 194:return _S++,!1;case 195:return _S++,!0;case 196:return b0=rc.getUint8(_S+1),_S+=2,ih(b0);case 197:return b0=rc.getUint16(_S+1),_S+=3,ih(b0);case 198:return b0=rc.getUint32(_S+1),_S+=5,ih(b0);case 202:return e0=rc.getFloat32(_S+1),_S+=5,e0;case 203:return e0=rc.getFloat64(_S+1),_S+=9,e0;case 204:return e0=ec[_S+1],_S+=2,e0;case 205:return e0=rc.getUint16(_S+1),_S+=3,e0;case 206:return e0=rc.getUint32(_S+1),_S+=5,e0;case 208:return e0=rc.getInt8(_S+1),_S+=2,e0;case 209:return e0=rc.getInt16(_S+1),_S+=3,e0;case 210:return e0=rc.getInt32(_S+1),_S+=5,e0;case 217:return b0=rc.getUint8(_S+1),_S+=2,Bd(b0);case 218:return b0=rc.getUint16(_S+1),_S+=3,Bd(b0);case 219:return b0=rc.getUint32(_S+1),_S+=5,Bd(b0);case 220:return b0=rc.getUint16(_S+1),_S+=3,xg(b0);case 221:return b0=rc.getUint32(_S+1),_S+=5,xg(b0);case 222:return b0=rc.getUint16(_S+1),_S+=3,Jc(b0);case 223:return b0=rc.getUint32(_S+1),_S+=5,Jc(b0)}throw new Error("Unknown type 0x"+nb.toString(16))}var _S=0,rc=new DataView(ec.buffer);return hb()}function wg(ec,Jc,ih,Bd){switch(ec){case 1:return me(Jc);case 2:return P(Jc);case 3:return Z(Jc);case 4:return j(Jc);case 5:return k(Jc);case 6:return le(j(Jc),new Uint8Array(ih));case 7:return le(j(Jc));case 8:return _l(j(Jc));case 9:return Ru(j(Jc),j(Bd)[0]);case 10:return Da(Z(Jc),j(Bd)[0]);case 11:return $e(Z(Jc),j(Bd)[0]);case 12:return Ra(Z(Jc),j(Bd)[0]);case 13:return Ra(P(Jc),j(Bd)[0]);case 14:return _i(Z(Jc));case 15:return _i(P(Jc))}}function Pf(ec,Jc){Jc=Jc||{};var ih=Jc.ignoreFields,Bd={};return cb.forEach(function(xg){var hb=ih?ih.indexOf(xg)!==-1:!1,_S=ec[xg];hb||_S===void 0||(_S instanceof Uint8Array?Bd[xg]=wg.apply(null,Na(_S)):Bd[xg]=_S)}),Bd}function ac(ec){return String.fromCharCode.apply(null,ec).replace(/\0/g,"")}function fc(ec,Jc,ih){ih=ih||{};var Bd,xg,hb,_S,rc,e0,b0=ih.firstModelOnly,nb=Jc.onModel,vf=Jc.onChain,c0=Jc.onGroup,Ba=Jc.onAtom,$_=Jc.onBond,_A=0,ka=0,Pp=0,_0=0,Oc=0,zg=-1,_p=ec.chainNameList,_O=ec.secStructList,_M=ec.insCodeList,_T=ec.sequenceIndexList,_9=ec.atomIdList,_q=ec.bFactorList,Ez=ec.altLocList,_z=ec.occupancyList,xz=ec.bondAtomList,Vj=ec.bondOrderList;for(Bd=0,xg=ec.chainsPerModel.length;xg>Bd&&!(b0&&_A>0);++Bd){var Kz=ec.chainsPerModel[_A];for(nb&&nb({chainCount:Kz,modelIndex:_A}),hb=0;Kz>hb;++hb){var _ee=ec.groupsPerChain[ka];if(vf){var dee=ac(ec.chainIdList.subarray(4*ka,4*ka+4)),zz=null;_p&&(zz=ac(_p.subarray(4*ka,4*ka+4))),vf({groupCount:_ee,chainIndex:ka,modelIndex:_A,chainId:dee,chainName:zz})}for(_S=0;_ee>_S;++_S){var $j=ec.groupList[ec.groupTypeList[Pp]],Gz=$j.atomNameList.length;if(c0){var nee=null;_O&&(nee=_O[Pp]);var _V=null;ec.insCodeList&&(_V=String.fromCharCode(_M[Pp]));var Ree=null;_T&&(Ree=_T[Pp]),c0({atomCount:Gz,groupIndex:Pp,chainIndex:ka,modelIndex:_A,groupId:ec.groupIdList[Pp],groupType:ec.groupTypeList[Pp],groupName:$j.groupName,singleLetterCode:$j.singleLetterCode,chemCompType:$j.chemCompType,secStruct:nee,insCode:_V,sequenceIndex:Ree})}for(rc=0;Gz>rc;++rc){if(Ba){var Sne=null;_9&&(Sne=_9[_0]);var Lee=null;_q&&(Lee=_q[_0]);var Bne=null;Ez&&(Bne=String.fromCharCode(Ez[_0]));var Une=null;_z&&(Une=_z[_0]),Ba({atomIndex:_0,groupIndex:Pp,chainIndex:ka,modelIndex:_A,atomId:Sne,element:$j.elementList[rc],atomName:$j.atomNameList[rc],formalCharge:$j.formalChargeList[rc],xCoord:ec.xCoordList[_0],yCoord:ec.yCoordList[_0],zCoord:ec.zCoordList[_0],bFactor:Lee,altLoc:Bne,occupancy:Une})}_0+=1}if($_){var _B=$j.bondAtomList;for(rc=0,e0=$j.bondOrderList.length;e0>rc;++rc)$_({atomIndex1:_0-Gz+_B[2*rc],atomIndex2:_0-Gz+_B[2*rc+1],bondOrder:$j.bondOrderList[rc]})}Pp+=1}ka+=1}if(Oc=zg+1,zg=_0-1,$_&&xz)for(rc=0,e0=xz.length;e0>rc;rc+=2){var Kne=xz[rc],sne=xz[rc+1];(Kne>=Oc&&zg>=Kne||sne>=Oc&&zg>=sne)&&$_({atomIndex1:Kne,atomIndex2:sne,bondOrder:Vj?Vj[rc/2]:null})}_A+=1}}function nd(ec){return p(sc(ec))}function a0(ec,Jc){ec instanceof ArrayBuffer&&(ec=new Uint8Array(ec));var ih;return ih=ec instanceof Uint8Array?Yd(ec):ec,Pf(ih,Jc)}function _1(ec,Jc,ih,Bd){function xg(){try{var _S=a0(hb.response);ih(_S)}catch(rc){Bd(rc)}}var hb=new XMLHttpRequest;hb.addEventListener("load",xg,!0),hb.addEventListener("error",Bd,!0),hb.responseType="arraybuffer",hb.open("GET",Jc+ec.toUpperCase()),hb.send()}function _$(ec,Jc,ih){_1(ec,Nb,Jc,ih)}function $b(ec,Jc,ih){_1(ec,_D,Jc,ih)}var Z_=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],_b=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],cb=Z_.concat(_b),ib="v1.0.1",_2="//mmtf.rcsb.org/v1.0/",Nb=_2+"full/",_D=_2+"reduced/";i.encode=nd,i.decode=a0,i.traverse=fc,i.fetch=_$,i.fetchReduced=$b,i.version=ib,i.fetchUrl=Nb,i.fetchReducedUrl=_D,i.encodeMsgpack=p,i.encodeMmtf=sc,i.decodeMsgpack=Yd,i.decodeMmtf=Pf})},"./node_modules/pako/dist/pako.esm.mjs":(n,t,i)=>{i.r(t),i.d(t,{Deflate:()=>sie,Inflate:()=>oie,constants:()=>kne,default:()=>Sre,deflate:()=>Uee,deflateRaw:()=>Lte,gzip:()=>xre,inflate:()=>nle,inflateRaw:()=>nne,ungzip:()=>One});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const s=4,o=0,f=1,d=2;function p(kl){let ja=kl.length;for(;--ja>=0;)kl[ja]=0}const v=0,_=1,k=2,P=3,L=258,G=29,Z=256,W=Z+1+G,j=30,H=19,me=2*W+1,$e=15,De=16,le=7,Ce=256,Me=16,_n=17,_i=18,ll=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_l=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),oa=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ru=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ga=512,_s=new Array((W+2)*2);p(_s);const Sa=new Array(j*2);p(Sa);const Ra=new Array(ga);p(Ra);const Da=new Array(L-P+1);p(Da);const Fa=new Array(G);p(Fa);const Na=new Array(j);p(Na);function _a(kl,ja,xa,af,Ld){this.static_tree=kl,this.extra_bits=ja,this.extra_base=xa,this.elems=af,this.max_length=Ld,this.has_stree=kl&&kl.length}let Pa,qc,uf;function _h(kl,ja){this.dyn_tree=kl,this.max_code=0,this.stat_desc=ja}const Uh=kl=>kl<256?Ra[kl]:Ra[256+(kl>>>7)],Kd=(kl,ja)=>{kl.pending_buf[kl.pending++]=ja&255,kl.pending_buf[kl.pending++]=ja>>>8&255},ud=(kl,ja,xa)=>{kl.bi_valid>De-xa?(kl.bi_buf|=ja<<kl.bi_valid&65535,Kd(kl,kl.bi_buf),kl.bi_buf=ja>>De-kl.bi_valid,kl.bi_valid+=xa-De):(kl.bi_buf|=ja<<kl.bi_valid&65535,kl.bi_valid+=xa)},sc=(kl,ja,xa)=>{ud(kl,xa[ja*2],xa[ja*2+1])},Yd=(kl,ja)=>{let xa=0;do xa|=kl&1,kl>>>=1,xa<<=1;while(--ja>0);return xa>>>1},wg=kl=>{kl.bi_valid===16?(Kd(kl,kl.bi_buf),kl.bi_buf=0,kl.bi_valid=0):kl.bi_valid>=8&&(kl.pending_buf[kl.pending++]=kl.bi_buf&255,kl.bi_buf>>=8,kl.bi_valid-=8)},Pf=(kl,ja)=>{const xa=ja.dyn_tree,af=ja.max_code,Ld=ja.stat_desc.static_tree,Cd=ja.stat_desc.has_stree,_E=ja.stat_desc.extra_bits,_m=ja.stat_desc.extra_base,_6=ja.stat_desc.max_length;let d0,_v,Dz,XR,Vb,_7,_H=0;for(XR=0;XR<=$e;XR++)kl.bl_count[XR]=0;for(xa[kl.heap[kl.heap_max]*2+1]=0,d0=kl.heap_max+1;d0<me;d0++)_v=kl.heap[d0],XR=xa[xa[_v*2+1]*2+1]+1,XR>_6&&(XR=_6,_H++),xa[_v*2+1]=XR,!(_v>af)&&(kl.bl_count[XR]++,Vb=0,_v>=_m&&(Vb=_E[_v-_m]),_7=xa[_v*2],kl.opt_len+=_7*(XR+Vb),Cd&&(kl.static_len+=_7*(Ld[_v*2+1]+Vb)));if(_H!==0){do{for(XR=_6-1;kl.bl_count[XR]===0;)XR--;kl.bl_count[XR]--,kl.bl_count[XR+1]+=2,kl.bl_count[_6]--,_H-=2}while(_H>0);for(XR=_6;XR!==0;XR--)for(_v=kl.bl_count[XR];_v!==0;)Dz=kl.heap[--d0],!(Dz>af)&&(xa[Dz*2+1]!==XR&&(kl.opt_len+=(XR-xa[Dz*2+1])*xa[Dz*2],xa[Dz*2+1]=XR),_v--)}},ac=(kl,ja,xa)=>{const af=new Array($e+1);let Ld=0,Cd,_E;for(Cd=1;Cd<=$e;Cd++)Ld=Ld+xa[Cd-1]<<1,af[Cd]=Ld;for(_E=0;_E<=ja;_E++){let _m=kl[_E*2+1];_m!==0&&(kl[_E*2]=Yd(af[_m]++,_m))}},fc=()=>{let kl,ja,xa,af,Ld;const Cd=new Array($e+1);for(xa=0,af=0;af<G-1;af++)for(Fa[af]=xa,kl=0;kl<1<<ll[af];kl++)Da[xa++]=af;for(Da[xa-1]=af,Ld=0,af=0;af<16;af++)for(Na[af]=Ld,kl=0;kl<1<<_l[af];kl++)Ra[Ld++]=af;for(Ld>>=7;af<j;af++)for(Na[af]=Ld<<7,kl=0;kl<1<<_l[af]-7;kl++)Ra[256+Ld++]=af;for(ja=0;ja<=$e;ja++)Cd[ja]=0;for(kl=0;kl<=143;)_s[kl*2+1]=8,kl++,Cd[8]++;for(;kl<=255;)_s[kl*2+1]=9,kl++,Cd[9]++;for(;kl<=279;)_s[kl*2+1]=7,kl++,Cd[7]++;for(;kl<=287;)_s[kl*2+1]=8,kl++,Cd[8]++;for(ac(_s,W+1,Cd),kl=0;kl<j;kl++)Sa[kl*2+1]=5,Sa[kl*2]=Yd(kl,5);Pa=new _a(_s,ll,Z+1,W,$e),qc=new _a(Sa,_l,0,j,$e),uf=new _a(new Array(0),oa,0,H,le)},nd=kl=>{let ja;for(ja=0;ja<W;ja++)kl.dyn_ltree[ja*2]=0;for(ja=0;ja<j;ja++)kl.dyn_dtree[ja*2]=0;for(ja=0;ja<H;ja++)kl.bl_tree[ja*2]=0;kl.dyn_ltree[Ce*2]=1,kl.opt_len=kl.static_len=0,kl.sym_next=kl.matches=0},a0=kl=>{kl.bi_valid>8?Kd(kl,kl.bi_buf):kl.bi_valid>0&&(kl.pending_buf[kl.pending++]=kl.bi_buf),kl.bi_buf=0,kl.bi_valid=0},_1=(kl,ja,xa,af)=>{const Ld=ja*2,Cd=xa*2;return kl[Ld]<kl[Cd]||kl[Ld]===kl[Cd]&&af[ja]<=af[xa]},_$=(kl,ja,xa)=>{const af=kl.heap[xa];let Ld=xa<<1;for(;Ld<=kl.heap_len&&(Ld<kl.heap_len&&_1(ja,kl.heap[Ld+1],kl.heap[Ld],kl.depth)&&Ld++,!_1(ja,af,kl.heap[Ld],kl.depth));)kl.heap[xa]=kl.heap[Ld],xa=Ld,Ld<<=1;kl.heap[xa]=af},$b=(kl,ja,xa)=>{let af,Ld,Cd=0,_E,_m;if(kl.sym_next!==0)do af=kl.pending_buf[kl.sym_buf+Cd++]&255,af+=(kl.pending_buf[kl.sym_buf+Cd++]&255)<<8,Ld=kl.pending_buf[kl.sym_buf+Cd++],af===0?sc(kl,Ld,ja):(_E=Da[Ld],sc(kl,_E+Z+1,ja),_m=ll[_E],_m!==0&&(Ld-=Fa[_E],ud(kl,Ld,_m)),af--,_E=Uh(af),sc(kl,_E,xa),_m=_l[_E],_m!==0&&(af-=Na[_E],ud(kl,af,_m)));while(Cd<kl.sym_next);sc(kl,Ce,ja)},Z_=(kl,ja)=>{const xa=ja.dyn_tree,af=ja.stat_desc.static_tree,Ld=ja.stat_desc.has_stree,Cd=ja.stat_desc.elems;let _E,_m,_6=-1,d0;for(kl.heap_len=0,kl.heap_max=me,_E=0;_E<Cd;_E++)xa[_E*2]!==0?(kl.heap[++kl.heap_len]=_6=_E,kl.depth[_E]=0):xa[_E*2+1]=0;for(;kl.heap_len<2;)d0=kl.heap[++kl.heap_len]=_6<2?++_6:0,xa[d0*2]=1,kl.depth[d0]=0,kl.opt_len--,Ld&&(kl.static_len-=af[d0*2+1]);for(ja.max_code=_6,_E=kl.heap_len>>1;_E>=1;_E--)_$(kl,xa,_E);d0=Cd;do _E=kl.heap[1],kl.heap[1]=kl.heap[kl.heap_len--],_$(kl,xa,1),_m=kl.heap[1],kl.heap[--kl.heap_max]=_E,kl.heap[--kl.heap_max]=_m,xa[d0*2]=xa[_E*2]+xa[_m*2],kl.depth[d0]=(kl.depth[_E]>=kl.depth[_m]?kl.depth[_E]:kl.depth[_m])+1,xa[_E*2+1]=xa[_m*2+1]=d0,kl.heap[1]=d0++,_$(kl,xa,1);while(kl.heap_len>=2);kl.heap[--kl.heap_max]=kl.heap[1],Pf(kl,ja),ac(xa,_6,kl.bl_count)},_b=(kl,ja,xa)=>{let af,Ld=-1,Cd,_E=ja[0*2+1],_m=0,_6=7,d0=4;for(_E===0&&(_6=138,d0=3),ja[(xa+1)*2+1]=65535,af=0;af<=xa;af++)Cd=_E,_E=ja[(af+1)*2+1],!(++_m<_6&&Cd===_E)&&(_m<d0?kl.bl_tree[Cd*2]+=_m:Cd!==0?(Cd!==Ld&&kl.bl_tree[Cd*2]++,kl.bl_tree[Me*2]++):_m<=10?kl.bl_tree[_n*2]++:kl.bl_tree[_i*2]++,_m=0,Ld=Cd,_E===0?(_6=138,d0=3):Cd===_E?(_6=6,d0=3):(_6=7,d0=4))},cb=(kl,ja,xa)=>{let af,Ld=-1,Cd,_E=ja[0*2+1],_m=0,_6=7,d0=4;for(_E===0&&(_6=138,d0=3),af=0;af<=xa;af++)if(Cd=_E,_E=ja[(af+1)*2+1],!(++_m<_6&&Cd===_E)){if(_m<d0)do sc(kl,Cd,kl.bl_tree);while(--_m!==0);else Cd!==0?(Cd!==Ld&&(sc(kl,Cd,kl.bl_tree),_m--),sc(kl,Me,kl.bl_tree),ud(kl,_m-3,2)):_m<=10?(sc(kl,_n,kl.bl_tree),ud(kl,_m-3,3)):(sc(kl,_i,kl.bl_tree),ud(kl,_m-11,7));_m=0,Ld=Cd,_E===0?(_6=138,d0=3):Cd===_E?(_6=6,d0=3):(_6=7,d0=4)}},ib=kl=>{let ja;for(_b(kl,kl.dyn_ltree,kl.l_desc.max_code),_b(kl,kl.dyn_dtree,kl.d_desc.max_code),Z_(kl,kl.bl_desc),ja=H-1;ja>=3&&kl.bl_tree[Ru[ja]*2+1]===0;ja--);return kl.opt_len+=3*(ja+1)+5+5+4,ja},_2=(kl,ja,xa,af)=>{let Ld;for(ud(kl,ja-257,5),ud(kl,xa-1,5),ud(kl,af-4,4),Ld=0;Ld<af;Ld++)ud(kl,kl.bl_tree[Ru[Ld]*2+1],3);cb(kl,kl.dyn_ltree,ja-1),cb(kl,kl.dyn_dtree,xa-1)},Nb=kl=>{let ja=4093624447,xa;for(xa=0;xa<=31;xa++,ja>>>=1)if(ja&1&&kl.dyn_ltree[xa*2]!==0)return o;if(kl.dyn_ltree[9*2]!==0||kl.dyn_ltree[10*2]!==0||kl.dyn_ltree[13*2]!==0)return f;for(xa=32;xa<Z;xa++)if(kl.dyn_ltree[xa*2]!==0)return f;return o};let _D=!1;const ec=kl=>{_D||(fc(),_D=!0),kl.l_desc=new _h(kl.dyn_ltree,Pa),kl.d_desc=new _h(kl.dyn_dtree,qc),kl.bl_desc=new _h(kl.bl_tree,uf),kl.bi_buf=0,kl.bi_valid=0,nd(kl)},Jc=(kl,ja,xa,af)=>{ud(kl,(v<<1)+(af?1:0),3),a0(kl),Kd(kl,xa),Kd(kl,~xa),xa&&kl.pending_buf.set(kl.window.subarray(ja,ja+xa),kl.pending),kl.pending+=xa},ih=kl=>{ud(kl,_<<1,3),sc(kl,Ce,_s),wg(kl)},Bd=(kl,ja,xa,af)=>{let Ld,Cd,_E=0;kl.level>0?(kl.strm.data_type===d&&(kl.strm.data_type=Nb(kl)),Z_(kl,kl.l_desc),Z_(kl,kl.d_desc),_E=ib(kl),Ld=kl.opt_len+3+7>>>3,Cd=kl.static_len+3+7>>>3,Cd<=Ld&&(Ld=Cd)):Ld=Cd=xa+5,xa+4<=Ld&&ja!==-1?Jc(kl,ja,xa,af):kl.strategy===s||Cd===Ld?(ud(kl,(_<<1)+(af?1:0),3),$b(kl,_s,Sa)):(ud(kl,(k<<1)+(af?1:0),3),_2(kl,kl.l_desc.max_code+1,kl.d_desc.max_code+1,_E+1),$b(kl,kl.dyn_ltree,kl.dyn_dtree)),nd(kl),af&&a0(kl)},xg=(kl,ja,xa)=>(kl.pending_buf[kl.sym_buf+kl.sym_next++]=ja,kl.pending_buf[kl.sym_buf+kl.sym_next++]=ja>>8,kl.pending_buf[kl.sym_buf+kl.sym_next++]=xa,ja===0?kl.dyn_ltree[xa*2]++:(kl.matches++,ja--,kl.dyn_ltree[(Da[xa]+Z+1)*2]++,kl.dyn_dtree[Uh(ja)*2]++),kl.sym_next===kl.sym_end);var hb=ec,_S=Jc,rc=Bd,e0=xg,b0=ih,nb={_tr_init:hb,_tr_stored_block:_S,_tr_flush_block:rc,_tr_tally:e0,_tr_align:b0},c0=(kl,ja,xa,af)=>{let Ld=kl&65535|0,Cd=kl>>>16&65535|0,_E=0;for(;xa!==0;){_E=xa>2e3?2e3:xa,xa-=_E;do Ld=Ld+ja[af++]|0,Cd=Cd+Ld|0;while(--_E);Ld%=65521,Cd%=65521}return Ld|Cd<<16|0};const Ba=()=>{let kl,ja=[];for(var xa=0;xa<256;xa++){kl=xa;for(var af=0;af<8;af++)kl=kl&1?3988292384^kl>>>1:kl>>>1;ja[xa]=kl}return ja},$_=new Uint32Array(Ba());var ka=(kl,ja,xa,af)=>{const Ld=$_,Cd=af+xa;kl^=-1;for(let _E=af;_E<Cd;_E++)kl=kl>>>8^Ld[(kl^ja[_E])&255];return kl^-1},Pp={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},_0={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Oc,_tr_stored_block:zg,_tr_flush_block:_p,_tr_tally:_O,_tr_align:_M}=nb,{Z_NO_FLUSH:_T,Z_PARTIAL_FLUSH:_9,Z_FULL_FLUSH:_q,Z_FINISH:Ez,Z_BLOCK:_z,Z_OK:xz,Z_STREAM_END:Vj,Z_STREAM_ERROR:Kz,Z_DATA_ERROR:_ee,Z_BUF_ERROR:dee,Z_DEFAULT_COMPRESSION:zz,Z_FILTERED:$j,Z_HUFFMAN_ONLY:Gz,Z_RLE:nee,Z_FIXED:_V,Z_DEFAULT_STRATEGY:Ree,Z_UNKNOWN:Sne,Z_DEFLATED:Lee}=_0,Bne=9,Une=15,_B=8,une=256+1+29,Gne=30,Fle=19,Eie=2*une+1,qte=15,Az=3,ane=258,_Y=ane+Az+1,Mle=32,Wne=42,Tre=57,Hne=69,qne=73,Ene=91,Vne=103,_ne=113,_te=666,ree=1,$ne=2,qee=3,zee=4,Ole=3,Vee=(kl,ja)=>(kl.msg=Pp[ja],ja),Uj=kl=>kl*2-(kl>4?9:0),Jee=kl=>{let ja=kl.length;for(;--ja>=0;)kl[ja]=0},_ie=kl=>{let ja,xa,af,Ld=kl.w_size;ja=kl.hash_size,af=ja;do xa=kl.head[--af],kl.head[af]=xa>=Ld?xa-Ld:0;while(--ja);ja=Ld,af=ja;do xa=kl.prev[--af],kl.prev[af]=xa>=Ld?xa-Ld:0;while(--ja)};let Xee=(kl,ja,xa)=>(ja<<kl.hash_shift^xa)&kl.hash_mask;const gee=kl=>{const ja=kl.state;let xa=ja.pending;xa>kl.avail_out&&(xa=kl.avail_out),xa!==0&&(kl.output.set(ja.pending_buf.subarray(ja.pending_out,ja.pending_out+xa),kl.next_out),kl.next_out+=xa,ja.pending_out+=xa,kl.total_out+=xa,kl.avail_out-=xa,ja.pending-=xa,ja.pending===0&&(ja.pending_out=0))},pee=(kl,ja)=>{_p(kl,kl.block_start>=0?kl.block_start:-1,kl.strstart-kl.block_start,ja),kl.block_start=kl.strstart,gee(kl.strm)},Bz=(kl,ja)=>{kl.pending_buf[kl.pending++]=ja},cne=(kl,ja)=>{kl.pending_buf[kl.pending++]=ja>>>8&255,kl.pending_buf[kl.pending++]=ja&255},jee=(kl,ja,xa,af)=>{let Ld=kl.avail_in;return Ld>af&&(Ld=af),Ld===0?0:(kl.avail_in-=Ld,ja.set(kl.input.subarray(kl.next_in,kl.next_in+Ld),xa),kl.state.wrap===1?kl.adler=c0(kl.adler,ja,Ld,xa):kl.state.wrap===2&&(kl.adler=ka(kl.adler,ja,Ld,xa)),kl.next_in+=Ld,kl.total_in+=Ld,Ld)},Yee=(kl,ja)=>{let xa=kl.max_chain_length,af=kl.strstart,Ld,Cd,_E=kl.prev_length,_m=kl.nice_match;const _6=kl.strstart>kl.w_size-_Y?kl.strstart-(kl.w_size-_Y):0,d0=kl.window,_v=kl.w_mask,Dz=kl.prev,XR=kl.strstart+ane;let Vb=d0[af+_E-1],_7=d0[af+_E];kl.prev_length>=kl.good_match&&(xa>>=2),_m>kl.lookahead&&(_m=kl.lookahead);do if(Ld=ja,!(d0[Ld+_E]!==_7||d0[Ld+_E-1]!==Vb||d0[Ld]!==d0[af]||d0[++Ld]!==d0[af+1])){af+=2,Ld++;do;while(d0[++af]===d0[++Ld]&&d0[++af]===d0[++Ld]&&d0[++af]===d0[++Ld]&&d0[++af]===d0[++Ld]&&d0[++af]===d0[++Ld]&&d0[++af]===d0[++Ld]&&d0[++af]===d0[++Ld]&&d0[++af]===d0[++Ld]&&af<XR);if(Cd=ane-(XR-af),af=XR-ane,Cd>_E){if(kl.match_start=ja,_E=Cd,Cd>=_m)break;Vb=d0[af+_E-1],_7=d0[af+_E]}}while((ja=Dz[ja&_v])>_6&&--xa!==0);return _E<=kl.lookahead?_E:kl.lookahead},$ee=kl=>{const ja=kl.w_size;let xa,af,Ld;do{if(af=kl.window_size-kl.lookahead-kl.strstart,kl.strstart>=ja+(ja-_Y)&&(kl.window.set(kl.window.subarray(ja,ja+ja-af),0),kl.match_start-=ja,kl.strstart-=ja,kl.block_start-=ja,kl.insert>kl.strstart&&(kl.insert=kl.strstart),_ie(kl),af+=ja),kl.strm.avail_in===0)break;if(xa=jee(kl.strm,kl.window,kl.strstart+kl.lookahead,af),kl.lookahead+=xa,kl.lookahead+kl.insert>=Az)for(Ld=kl.strstart-kl.insert,kl.ins_h=kl.window[Ld],kl.ins_h=Xee(kl,kl.ins_h,kl.window[Ld+1]);kl.insert&&(kl.ins_h=Xee(kl,kl.ins_h,kl.window[Ld+Az-1]),kl.prev[Ld&kl.w_mask]=kl.head[kl.ins_h],kl.head[kl.ins_h]=Ld,Ld++,kl.insert--,!(kl.lookahead+kl.insert<Az)););}while(kl.lookahead<_Y&&kl.strm.avail_in!==0)},Jne=(kl,ja)=>{let xa=kl.pending_buf_size-5>kl.w_size?kl.w_size:kl.pending_buf_size-5,af,Ld,Cd,_E=0,_m=kl.strm.avail_in;do{if(af=65535,Cd=kl.bi_valid+42>>3,kl.strm.avail_out<Cd||(Cd=kl.strm.avail_out-Cd,Ld=kl.strstart-kl.block_start,af>Ld+kl.strm.avail_in&&(af=Ld+kl.strm.avail_in),af>Cd&&(af=Cd),af<xa&&(af===0&&ja!==Ez||ja===_T||af!==Ld+kl.strm.avail_in)))break;_E=ja===Ez&&af===Ld+kl.strm.avail_in?1:0,zg(kl,0,0,_E),kl.pending_buf[kl.pending-4]=af,kl.pending_buf[kl.pending-3]=af>>8,kl.pending_buf[kl.pending-2]=~af,kl.pending_buf[kl.pending-1]=~af>>8,gee(kl.strm),Ld&&(Ld>af&&(Ld=af),kl.strm.output.set(kl.window.subarray(kl.block_start,kl.block_start+Ld),kl.strm.next_out),kl.strm.next_out+=Ld,kl.strm.avail_out-=Ld,kl.strm.total_out+=Ld,kl.block_start+=Ld,af-=Ld),af&&(jee(kl.strm,kl.strm.output,kl.strm.next_out,af),kl.strm.next_out+=af,kl.strm.avail_out-=af,kl.strm.total_out+=af)}while(_E===0);return _m-=kl.strm.avail_in,_m&&(_m>=kl.w_size?(kl.matches=2,kl.window.set(kl.strm.input.subarray(kl.strm.next_in-kl.w_size,kl.strm.next_in),0),kl.strstart=kl.w_size,kl.insert=kl.strstart):(kl.window_size-kl.strstart<=_m&&(kl.strstart-=kl.w_size,kl.window.set(kl.window.subarray(kl.w_size,kl.w_size+kl.strstart),0),kl.matches<2&&kl.matches++,kl.insert>kl.strstart&&(kl.insert=kl.strstart)),kl.window.set(kl.strm.input.subarray(kl.strm.next_in-_m,kl.strm.next_in),kl.strstart),kl.strstart+=_m,kl.insert+=_m>kl.w_size-kl.insert?kl.w_size-kl.insert:_m),kl.block_start=kl.strstart),kl.high_water<kl.strstart&&(kl.high_water=kl.strstart),_E?zee:ja!==_T&&ja!==Ez&&kl.strm.avail_in===0&&kl.strstart===kl.block_start?$ne:(Cd=kl.window_size-kl.strstart,kl.strm.avail_in>Cd&&kl.block_start>=kl.w_size&&(kl.block_start-=kl.w_size,kl.strstart-=kl.w_size,kl.window.set(kl.window.subarray(kl.w_size,kl.w_size+kl.strstart),0),kl.matches<2&&kl.matches++,Cd+=kl.w_size,kl.insert>kl.strstart&&(kl.insert=kl.strstart)),Cd>kl.strm.avail_in&&(Cd=kl.strm.avail_in),Cd&&(jee(kl.strm,kl.window,kl.strstart,Cd),kl.strstart+=Cd,kl.insert+=Cd>kl.w_size-kl.insert?kl.w_size-kl.insert:Cd),kl.high_water<kl.strstart&&(kl.high_water=kl.strstart),Cd=kl.bi_valid+42>>3,Cd=kl.pending_buf_size-Cd>65535?65535:kl.pending_buf_size-Cd,xa=Cd>kl.w_size?kl.w_size:Cd,Ld=kl.strstart-kl.block_start,(Ld>=xa||(Ld||ja===Ez)&&ja!==_T&&kl.strm.avail_in===0&&Ld<=Cd)&&(af=Ld>Cd?Cd:Ld,_E=ja===Ez&&kl.strm.avail_in===0&&af===Ld?1:0,zg(kl,kl.block_start,af,_E),kl.block_start+=af,gee(kl.strm)),_E?qee:ree)},bne=(kl,ja)=>{let xa,af;for(;;){if(kl.lookahead<_Y){if($ee(kl),kl.lookahead<_Y&&ja===_T)return ree;if(kl.lookahead===0)break}if(xa=0,kl.lookahead>=Az&&(kl.ins_h=Xee(kl,kl.ins_h,kl.window[kl.strstart+Az-1]),xa=kl.prev[kl.strstart&kl.w_mask]=kl.head[kl.ins_h],kl.head[kl.ins_h]=kl.strstart),xa!==0&&kl.strstart-xa<=kl.w_size-_Y&&(kl.match_length=Yee(kl,xa)),kl.match_length>=Az)if(af=_O(kl,kl.strstart-kl.match_start,kl.match_length-Az),kl.lookahead-=kl.match_length,kl.match_length<=kl.max_lazy_match&&kl.lookahead>=Az){kl.match_length--;do kl.strstart++,kl.ins_h=Xee(kl,kl.ins_h,kl.window[kl.strstart+Az-1]),xa=kl.prev[kl.strstart&kl.w_mask]=kl.head[kl.ins_h],kl.head[kl.ins_h]=kl.strstart;while(--kl.match_length!==0);kl.strstart++}else kl.strstart+=kl.match_length,kl.match_length=0,kl.ins_h=kl.window[kl.strstart],kl.ins_h=Xee(kl,kl.ins_h,kl.window[kl.strstart+1]);else af=_O(kl,0,kl.window[kl.strstart]),kl.lookahead--,kl.strstart++;if(af&&(pee(kl,!1),kl.strm.avail_out===0))return ree}return kl.insert=kl.strstart<Az-1?kl.strstart:Az-1,ja===Ez?(pee(kl,!0),kl.strm.avail_out===0?qee:zee):kl.sym_next&&(pee(kl,!1),kl.strm.avail_out===0)?ree:$ne},bee=(kl,ja)=>{let xa,af,Ld;for(;;){if(kl.lookahead<_Y){if($ee(kl),kl.lookahead<_Y&&ja===_T)return ree;if(kl.lookahead===0)break}if(xa=0,kl.lookahead>=Az&&(kl.ins_h=Xee(kl,kl.ins_h,kl.window[kl.strstart+Az-1]),xa=kl.prev[kl.strstart&kl.w_mask]=kl.head[kl.ins_h],kl.head[kl.ins_h]=kl.strstart),kl.prev_length=kl.match_length,kl.prev_match=kl.match_start,kl.match_length=Az-1,xa!==0&&kl.prev_length<kl.max_lazy_match&&kl.strstart-xa<=kl.w_size-_Y&&(kl.match_length=Yee(kl,xa),kl.match_length<=5&&(kl.strategy===$j||kl.match_length===Az&&kl.strstart-kl.match_start>4096)&&(kl.match_length=Az-1)),kl.prev_length>=Az&&kl.match_length<=kl.prev_length){Ld=kl.strstart+kl.lookahead-Az,af=_O(kl,kl.strstart-1-kl.prev_match,kl.prev_length-Az),kl.lookahead-=kl.prev_length-1,kl.prev_length-=2;do++kl.strstart<=Ld&&(kl.ins_h=Xee(kl,kl.ins_h,kl.window[kl.strstart+Az-1]),xa=kl.prev[kl.strstart&kl.w_mask]=kl.head[kl.ins_h],kl.head[kl.ins_h]=kl.strstart);while(--kl.prev_length!==0);if(kl.match_available=0,kl.match_length=Az-1,kl.strstart++,af&&(pee(kl,!1),kl.strm.avail_out===0))return ree}else if(kl.match_available){if(af=_O(kl,0,kl.window[kl.strstart-1]),af&&pee(kl,!1),kl.strstart++,kl.lookahead--,kl.strm.avail_out===0)return ree}else kl.match_available=1,kl.strstart++,kl.lookahead--}return kl.match_available&&(af=_O(kl,0,kl.window[kl.strstart-1]),kl.match_available=0),kl.insert=kl.strstart<Az-1?kl.strstart:Az-1,ja===Ez?(pee(kl,!0),kl.strm.avail_out===0?qee:zee):kl.sym_next&&(pee(kl,!1),kl.strm.avail_out===0)?ree:$ne},kle=(kl,ja)=>{let xa,af,Ld,Cd;const _E=kl.window;for(;;){if(kl.lookahead<=ane){if($ee(kl),kl.lookahead<=ane&&ja===_T)return ree;if(kl.lookahead===0)break}if(kl.match_length=0,kl.lookahead>=Az&&kl.strstart>0&&(Ld=kl.strstart-1,af=_E[Ld],af===_E[++Ld]&&af===_E[++Ld]&&af===_E[++Ld])){Cd=kl.strstart+ane;do;while(af===_E[++Ld]&&af===_E[++Ld]&&af===_E[++Ld]&&af===_E[++Ld]&&af===_E[++Ld]&&af===_E[++Ld]&&af===_E[++Ld]&&af===_E[++Ld]&&Ld<Cd);kl.match_length=ane-(Cd-Ld),kl.match_length>kl.lookahead&&(kl.match_length=kl.lookahead)}if(kl.match_length>=Az?(xa=_O(kl,1,kl.match_length-Az),kl.lookahead-=kl.match_length,kl.strstart+=kl.match_length,kl.match_length=0):(xa=_O(kl,0,kl.window[kl.strstart]),kl.lookahead--,kl.strstart++),xa&&(pee(kl,!1),kl.strm.avail_out===0))return ree}return kl.insert=0,ja===Ez?(pee(kl,!0),kl.strm.avail_out===0?qee:zee):kl.sym_next&&(pee(kl,!1),kl.strm.avail_out===0)?ree:$ne},bie=(kl,ja)=>{let xa;for(;;){if(kl.lookahead===0&&($ee(kl),kl.lookahead===0)){if(ja===_T)return ree;break}if(kl.match_length=0,xa=_O(kl,0,kl.window[kl.strstart]),kl.lookahead--,kl.strstart++,xa&&(pee(kl,!1),kl.strm.avail_out===0))return ree}return kl.insert=0,ja===Ez?(pee(kl,!0),kl.strm.avail_out===0?qee:zee):kl.sym_next&&(pee(kl,!1),kl.strm.avail_out===0)?ree:$ne};function mee(kl,ja,xa,af,Ld){this.good_length=kl,this.max_lazy=ja,this.nice_length=xa,this.max_chain=af,this.func=Ld}const $te=[new mee(0,0,0,0,Jne),new mee(4,4,8,4,bne),new mee(4,5,16,8,bne),new mee(4,6,32,32,bne),new mee(4,4,16,16,bee),new mee(8,16,32,32,bee),new mee(8,16,128,128,bee),new mee(8,32,128,256,bee),new mee(32,128,258,1024,bee),new mee(32,258,258,4096,bee)],Cie=kl=>{kl.window_size=2*kl.w_size,Jee(kl.head),kl.max_lazy_match=$te[kl.level].max_lazy,kl.good_match=$te[kl.level].good_length,kl.nice_match=$te[kl.level].nice_length,kl.max_chain_length=$te[kl.level].max_chain,kl.strstart=0,kl.block_start=0,kl.lookahead=0,kl.insert=0,kl.match_length=kl.prev_length=Az-1,kl.match_available=0,kl.ins_h=0};function Vte(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Lee,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Eie*2),this.dyn_dtree=new Uint16Array((2*Gne+1)*2),this.bl_tree=new Uint16Array((2*Fle+1)*2),Jee(this.dyn_ltree),Jee(this.dyn_dtree),Jee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(qte+1),this.heap=new Uint16Array(2*une+1),Jee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*une+1),Jee(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Xne=kl=>{if(!kl)return 1;const ja=kl.state;return!ja||ja.strm!==kl||ja.status!==Wne&&ja.status!==Tre&&ja.status!==Hne&&ja.status!==qne&&ja.status!==Ene&&ja.status!==Vne&&ja.status!==_ne&&ja.status!==_te?1:0},Aie=kl=>{if(Xne(kl))return Vee(kl,Kz);kl.total_in=kl.total_out=0,kl.data_type=Sne;const ja=kl.state;return ja.pending=0,ja.pending_out=0,ja.wrap<0&&(ja.wrap=-ja.wrap),ja.status=ja.wrap===2?Tre:ja.wrap?Wne:_ne,kl.adler=ja.wrap===2?0:1,ja.last_flush=-2,Oc(ja),xz},Yne=kl=>{const ja=Aie(kl);return ja===xz&&Cie(kl.state),ja},bte=(kl,ja)=>Xne(kl)||kl.state.wrap!==2?Kz:(kl.state.gzhead=ja,xz),Cne=(kl,ja,xa,af,Ld,Cd)=>{if(!kl)return Kz;let _E=1;if(ja===zz&&(ja=6),af<0?(_E=0,af=-af):af>15&&(_E=2,af-=16),Ld<1||Ld>Bne||xa!==Lee||af<8||af>15||ja<0||ja>9||Cd<0||Cd>_V||af===8&&_E!==1)return Vee(kl,Kz);af===8&&(af=9);const _m=new Vte;return kl.state=_m,_m.strm=kl,_m.status=Wne,_m.wrap=_E,_m.gzhead=null,_m.w_bits=af,_m.w_size=1<<_m.w_bits,_m.w_mask=_m.w_size-1,_m.hash_bits=Ld+7,_m.hash_size=1<<_m.hash_bits,_m.hash_mask=_m.hash_size-1,_m.hash_shift=~~((_m.hash_bits+Az-1)/Az),_m.window=new Uint8Array(_m.w_size*2),_m.head=new Uint16Array(_m.hash_size),_m.prev=new Uint16Array(_m.w_size),_m.lit_bufsize=1<<Ld+6,_m.pending_buf_size=_m.lit_bufsize*4,_m.pending_buf=new Uint8Array(_m.pending_buf_size),_m.sym_buf=_m.lit_bufsize,_m.sym_end=(_m.lit_bufsize-1)*3,_m.level=ja,_m.strategy=Cd,_m.method=xa,Yne(kl)},Jte=(kl,ja)=>Cne(kl,ja,Lee,Une,_B,Ree),Ile=(kl,ja)=>{if(Xne(kl)||ja>_z||ja<0)return kl?Vee(kl,Kz):Kz;const xa=kl.state;if(!kl.output||kl.avail_in!==0&&!kl.input||xa.status===_te&&ja!==Ez)return Vee(kl,kl.avail_out===0?dee:Kz);const af=xa.last_flush;if(xa.last_flush=ja,xa.pending!==0){if(gee(kl),kl.avail_out===0)return xa.last_flush=-1,xz}else if(kl.avail_in===0&&Uj(ja)<=Uj(af)&&ja!==Ez)return Vee(kl,dee);if(xa.status===_te&&kl.avail_in!==0)return Vee(kl,dee);if(xa.status===Wne&&xa.wrap===0&&(xa.status=_ne),xa.status===Wne){let Ld=Lee+(xa.w_bits-8<<4)<<8,Cd=-1;if(xa.strategy>=Gz||xa.level<2?Cd=0:xa.level<6?Cd=1:xa.level===6?Cd=2:Cd=3,Ld|=Cd<<6,xa.strstart!==0&&(Ld|=Mle),Ld+=31-Ld%31,cne(xa,Ld),xa.strstart!==0&&(cne(xa,kl.adler>>>16),cne(xa,kl.adler&65535)),kl.adler=1,xa.status=_ne,gee(kl),xa.pending!==0)return xa.last_flush=-1,xz}if(xa.status===Tre){if(kl.adler=0,Bz(xa,31),Bz(xa,139),Bz(xa,8),xa.gzhead)Bz(xa,(xa.gzhead.text?1:0)+(xa.gzhead.hcrc?2:0)+(xa.gzhead.extra?4:0)+(xa.gzhead.name?8:0)+(xa.gzhead.comment?16:0)),Bz(xa,xa.gzhead.time&255),Bz(xa,xa.gzhead.time>>8&255),Bz(xa,xa.gzhead.time>>16&255),Bz(xa,xa.gzhead.time>>24&255),Bz(xa,xa.level===9?2:xa.strategy>=Gz||xa.level<2?4:0),Bz(xa,xa.gzhead.os&255),xa.gzhead.extra&&xa.gzhead.extra.length&&(Bz(xa,xa.gzhead.extra.length&255),Bz(xa,xa.gzhead.extra.length>>8&255)),xa.gzhead.hcrc&&(kl.adler=ka(kl.adler,xa.pending_buf,xa.pending,0)),xa.gzindex=0,xa.status=Hne;else if(Bz(xa,0),Bz(xa,0),Bz(xa,0),Bz(xa,0),Bz(xa,0),Bz(xa,xa.level===9?2:xa.strategy>=Gz||xa.level<2?4:0),Bz(xa,Ole),xa.status=_ne,gee(kl),xa.pending!==0)return xa.last_flush=-1,xz}if(xa.status===Hne){if(xa.gzhead.extra){let Ld=xa.pending,Cd=(xa.gzhead.extra.length&65535)-xa.gzindex;for(;xa.pending+Cd>xa.pending_buf_size;){let _m=xa.pending_buf_size-xa.pending;if(xa.pending_buf.set(xa.gzhead.extra.subarray(xa.gzindex,xa.gzindex+_m),xa.pending),xa.pending=xa.pending_buf_size,xa.gzhead.hcrc&&xa.pending>Ld&&(kl.adler=ka(kl.adler,xa.pending_buf,xa.pending-Ld,Ld)),xa.gzindex+=_m,gee(kl),xa.pending!==0)return xa.last_flush=-1,xz;Ld=0,Cd-=_m}let _E=new Uint8Array(xa.gzhead.extra);xa.pending_buf.set(_E.subarray(xa.gzindex,xa.gzindex+Cd),xa.pending),xa.pending+=Cd,xa.gzhead.hcrc&&xa.pending>Ld&&(kl.adler=ka(kl.adler,xa.pending_buf,xa.pending-Ld,Ld)),xa.gzindex=0}xa.status=qne}if(xa.status===qne){if(xa.gzhead.name){let Ld=xa.pending,Cd;do{if(xa.pending===xa.pending_buf_size){if(xa.gzhead.hcrc&&xa.pending>Ld&&(kl.adler=ka(kl.adler,xa.pending_buf,xa.pending-Ld,Ld)),gee(kl),xa.pending!==0)return xa.last_flush=-1,xz;Ld=0}xa.gzindex<xa.gzhead.name.length?Cd=xa.gzhead.name.charCodeAt(xa.gzindex++)&255:Cd=0,Bz(xa,Cd)}while(Cd!==0);xa.gzhead.hcrc&&xa.pending>Ld&&(kl.adler=ka(kl.adler,xa.pending_buf,xa.pending-Ld,Ld)),xa.gzindex=0}xa.status=Ene}if(xa.status===Ene){if(xa.gzhead.comment){let Ld=xa.pending,Cd;do{if(xa.pending===xa.pending_buf_size){if(xa.gzhead.hcrc&&xa.pending>Ld&&(kl.adler=ka(kl.adler,xa.pending_buf,xa.pending-Ld,Ld)),gee(kl),xa.pending!==0)return xa.last_flush=-1,xz;Ld=0}xa.gzindex<xa.gzhead.comment.length?Cd=xa.gzhead.comment.charCodeAt(xa.gzindex++)&255:Cd=0,Bz(xa,Cd)}while(Cd!==0);xa.gzhead.hcrc&&xa.pending>Ld&&(kl.adler=ka(kl.adler,xa.pending_buf,xa.pending-Ld,Ld))}xa.status=Vne}if(xa.status===Vne){if(xa.gzhead.hcrc){if(xa.pending+2>xa.pending_buf_size&&(gee(kl),xa.pending!==0))return xa.last_flush=-1,xz;Bz(xa,kl.adler&255),Bz(xa,kl.adler>>8&255),kl.adler=0}if(xa.status=_ne,gee(kl),xa.pending!==0)return xa.last_flush=-1,xz}if(kl.avail_in!==0||xa.lookahead!==0||ja!==_T&&xa.status!==_te){let Ld=xa.level===0?Jne(xa,ja):xa.strategy===Gz?bie(xa,ja):xa.strategy===nee?kle(xa,ja):$te[xa.level].func(xa,ja);if((Ld===qee||Ld===zee)&&(xa.status=_te),Ld===ree||Ld===qee)return kl.avail_out===0&&(xa.last_flush=-1),xz;if(Ld===$ne&&(ja===_9?_M(xa):ja!==_z&&(zg(xa,0,0,!1),ja===_q&&(Jee(xa.head),xa.lookahead===0&&(xa.strstart=0,xa.block_start=0,xa.insert=0))),gee(kl),kl.avail_out===0))return xa.last_flush=-1,xz}return ja!==Ez?xz:xa.wrap<=0?Vj:(xa.wrap===2?(Bz(xa,kl.adler&255),Bz(xa,kl.adler>>8&255),Bz(xa,kl.adler>>16&255),Bz(xa,kl.adler>>24&255),Bz(xa,kl.total_in&255),Bz(xa,kl.total_in>>8&255),Bz(xa,kl.total_in>>16&255),Bz(xa,kl.total_in>>24&255)):(cne(xa,kl.adler>>>16),cne(xa,kl.adler&65535)),gee(kl),xa.wrap>0&&(xa.wrap=-xa.wrap),xa.pending!==0?xz:Vj)},Nle=kl=>{if(Xne(kl))return Kz;const ja=kl.state.status;return kl.state=null,ja===_ne?Vee(kl,_ee):xz},Fre=(kl,ja)=>{let xa=ja.length;if(Xne(kl))return Kz;const af=kl.state,Ld=af.wrap;if(Ld===2||Ld===1&&af.status!==Wne||af.lookahead)return Kz;if(Ld===1&&(kl.adler=c0(kl.adler,ja,xa,0)),af.wrap=0,xa>=af.w_size){Ld===0&&(Jee(af.head),af.strstart=0,af.block_start=0,af.insert=0);let _6=new Uint8Array(af.w_size);_6.set(ja.subarray(xa-af.w_size,xa),0),ja=_6,xa=af.w_size}const Cd=kl.avail_in,_E=kl.next_in,_m=kl.input;for(kl.avail_in=xa,kl.next_in=0,kl.input=ja,$ee(af);af.lookahead>=Az;){let _6=af.strstart,d0=af.lookahead-(Az-1);do af.ins_h=Xee(af,af.ins_h,af.window[_6+Az-1]),af.prev[_6&af.w_mask]=af.head[af.ins_h],af.head[af.ins_h]=_6,_6++;while(--d0);af.strstart=_6,af.lookahead=Az-1,$ee(af)}return af.strstart+=af.lookahead,af.block_start=af.strstart,af.insert=af.lookahead,af.lookahead=0,af.match_length=af.prev_length=Az-1,af.match_available=0,kl.next_in=_E,kl.input=_m,kl.avail_in=Cd,af.wrap=Ld,xz};var Xte=Jte,Mre=Cne,Die=Yne,fne=Aie,Ore=bte,Yte=Ile,Rie=Nle,Qte=Fre,Zte="pako deflate (from Nodeca project)",Qne={deflateInit:Xte,deflateInit2:Mre,deflateReset:Die,deflateResetKeep:fne,deflateSetHeader:Ore,deflate:Yte,deflateEnd:Rie,deflateSetDictionary:Qte,deflateInfo:Zte};const Cee=(kl,ja)=>Object.prototype.hasOwnProperty.call(kl,ja);var Zne=function(kl){const ja=Array.prototype.slice.call(arguments,1);for(;ja.length;){const xa=ja.shift();if(xa){if(typeof xa!="object")throw new TypeError(xa+"must be non-object");for(const af in xa)Cee(xa,af)&&(kl[af]=xa[af])}}return kl},kre=kl=>{let ja=0;for(let af=0,Ld=kl.length;af<Ld;af++)ja+=kl[af].length;const xa=new Uint8Array(ja);for(let af=0,Ld=0,Cd=kl.length;af<Cd;af++){let _E=kl[af];xa.set(_E,Ld),Ld+=_E.length}return xa},hne={assign:Zne,flattenChunks:kre};let Tie=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Tie=!1}const Ane=new Uint8Array(256);for(let kl=0;kl<256;kl++)Ane[kl]=kl>=252?6:kl>=248?5:kl>=240?4:kl>=224?3:kl>=192?2:1;Ane[254]=Ane[254]=1;var Ire=kl=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(kl);let ja,xa,af,Ld,Cd,_E=kl.length,_m=0;for(Ld=0;Ld<_E;Ld++)xa=kl.charCodeAt(Ld),(xa&64512)===55296&&Ld+1<_E&&(af=kl.charCodeAt(Ld+1),(af&64512)===56320&&(xa=65536+(xa-55296<<10)+(af-56320),Ld++)),_m+=xa<128?1:xa<2048?2:xa<65536?3:4;for(ja=new Uint8Array(_m),Cd=0,Ld=0;Cd<_m;Ld++)xa=kl.charCodeAt(Ld),(xa&64512)===55296&&Ld+1<_E&&(af=kl.charCodeAt(Ld+1),(af&64512)===56320&&(xa=65536+(xa-55296<<10)+(af-56320),Ld++)),xa<128?ja[Cd++]=xa:xa<2048?(ja[Cd++]=192|xa>>>6,ja[Cd++]=128|xa&63):xa<65536?(ja[Cd++]=224|xa>>>12,ja[Cd++]=128|xa>>>6&63,ja[Cd++]=128|xa&63):(ja[Cd++]=240|xa>>>18,ja[Cd++]=128|xa>>>12&63,ja[Cd++]=128|xa>>>6&63,ja[Cd++]=128|xa&63);return ja};const Cte=(kl,ja)=>{if(ja<65534&&kl.subarray&&Tie)return String.fromCharCode.apply(null,kl.length===ja?kl:kl.subarray(0,ja));let xa="";for(let af=0;af<ja;af++)xa+=String.fromCharCode(kl[af]);return xa};var ere=(kl,ja)=>{const xa=ja||kl.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(kl.subarray(0,ja));let af,Ld;const Cd=new Array(xa*2);for(Ld=0,af=0;af<xa;){let _E=kl[af++];if(_E<128){Cd[Ld++]=_E;continue}let _m=Ane[_E];if(_m>4){Cd[Ld++]=65533,af+=_m-1;continue}for(_E&=_m===2?31:_m===3?15:7;_m>1&&af<xa;)_E=_E<<6|kl[af++]&63,_m--;if(_m>1){Cd[Ld++]=65533;continue}_E<65536?Cd[Ld++]=_E:(_E-=65536,Cd[Ld++]=55296|_E>>10&1023,Cd[Ld++]=56320|_E&1023)}return Cte(Cd,Ld)},Fie=(kl,ja)=>{ja=ja||kl.length,ja>kl.length&&(ja=kl.length);let xa=ja-1;for(;xa>=0&&(kl[xa]&192)===128;)xa--;return xa<0||xa===0?ja:xa+Ane[kl[xa]]>ja?xa:ja},Ate={string2buf:Ire,buf2string:ere,utf8border:Fie};function Ple(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Mie=Ple;const nre=Object.prototype.toString,{Z_NO_FLUSH:Lle,Z_SYNC_FLUSH:zle,Z_FULL_FLUSH:jle,Z_FINISH:Ble,Z_OK:tre,Z_STREAM_END:Oie,Z_DEFAULT_COMPRESSION:Ule,Z_DEFAULT_STRATEGY:Kle,Z_DEFLATED:Gle}=_0;function Dte(kl){this.options=hne.assign({level:Ule,method:Gle,chunkSize:16384,windowBits:15,memLevel:8,strategy:Kle},kl||{});let ja=this.options;ja.raw&&ja.windowBits>0?ja.windowBits=-ja.windowBits:ja.gzip&&ja.windowBits>0&&ja.windowBits<16&&(ja.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Mie,this.strm.avail_out=0;let xa=Qne.deflateInit2(this.strm,ja.level,ja.method,ja.windowBits,ja.memLevel,ja.strategy);if(xa!==tre)throw new Error(Pp[xa]);if(ja.header&&Qne.deflateSetHeader(this.strm,ja.header),ja.dictionary){let af;if(typeof ja.dictionary=="string"?af=Ate.string2buf(ja.dictionary):nre.call(ja.dictionary)==="[object ArrayBuffer]"?af=new Uint8Array(ja.dictionary):af=ja.dictionary,xa=Qne.deflateSetDictionary(this.strm,af),xa!==tre)throw new Error(Pp[xa]);this._dict_set=!0}}Dte.prototype.push=function(kl,ja){const xa=this.strm,af=this.options.chunkSize;let Ld,Cd;if(this.ended)return!1;for(ja===~~ja?Cd=ja:Cd=ja===!0?Ble:Lle,typeof kl=="string"?xa.input=Ate.string2buf(kl):nre.call(kl)==="[object ArrayBuffer]"?xa.input=new Uint8Array(kl):xa.input=kl,xa.next_in=0,xa.avail_in=xa.input.length;;){if(xa.avail_out===0&&(xa.output=new Uint8Array(af),xa.next_out=0,xa.avail_out=af),(Cd===zle||Cd===jle)&&xa.avail_out<=6){this.onData(xa.output.subarray(0,xa.next_out)),xa.avail_out=0;continue}if(Ld=Qne.deflate(xa,Cd),Ld===Oie)return xa.next_out>0&&this.onData(xa.output.subarray(0,xa.next_out)),Ld=Qne.deflateEnd(this.strm),this.onEnd(Ld),this.ended=!0,Ld===tre;if(xa.avail_out===0){this.onData(xa.output);continue}if(Cd>0&&xa.next_out>0){this.onData(xa.output.subarray(0,xa.next_out)),xa.avail_out=0;continue}if(xa.avail_in===0)break}return!0},Dte.prototype.onData=function(kl){this.chunks.push(kl)},Dte.prototype.onEnd=function(kl){kl===tre&&(this.result=hne.flattenChunks(this.chunks)),this.chunks=[],this.err=kl,this.msg=this.strm.msg};function Rte(kl,ja){const xa=new Dte(ja);if(xa.push(kl,!0),xa.err)throw xa.msg||Pp[xa.err];return xa.result}function Wle(kl,ja){return ja=ja||{},ja.raw=!0,Rte(kl,ja)}function Hle(kl,ja){return ja=ja||{},ja.gzip=!0,Rte(kl,ja)}var qle=Dte,kie=Rte,Vle=Wle,Jle=Hle,Xle={Deflate:qle,deflate:kie,deflateRaw:Vle,gzip:Jle};const rre=16209,Yle=16191;var Qle=function(ja,xa){let af,Ld,Cd,_E,_m,_6,d0,_v,Dz,XR,Vb,_7,_H,Nz,Mz,Hz,Oz,_4,Pz,_Q,vz,Jz,Iz,Fz;const Lz=ja.state;af=ja.next_in,Iz=ja.input,Ld=af+(ja.avail_in-5),Cd=ja.next_out,Fz=ja.output,_E=Cd-(xa-ja.avail_out),_m=Cd+(ja.avail_out-257),_6=Lz.dmax,d0=Lz.wsize,_v=Lz.whave,Dz=Lz.wnext,XR=Lz.window,Vb=Lz.hold,_7=Lz.bits,_H=Lz.lencode,Nz=Lz.distcode,Mz=(1<<Lz.lenbits)-1,Hz=(1<<Lz.distbits)-1;e:do{_7<15&&(Vb+=Iz[af++]<<_7,_7+=8,Vb+=Iz[af++]<<_7,_7+=8),Oz=_H[Vb&Mz];n:for(;;){if(_4=Oz>>>24,Vb>>>=_4,_7-=_4,_4=Oz>>>16&255,_4===0)Fz[Cd++]=Oz&65535;else if(_4&16){Pz=Oz&65535,_4&=15,_4&&(_7<_4&&(Vb+=Iz[af++]<<_7,_7+=8),Pz+=Vb&(1<<_4)-1,Vb>>>=_4,_7-=_4),_7<15&&(Vb+=Iz[af++]<<_7,_7+=8,Vb+=Iz[af++]<<_7,_7+=8),Oz=Nz[Vb&Hz];t:for(;;){if(_4=Oz>>>24,Vb>>>=_4,_7-=_4,_4=Oz>>>16&255,_4&16){if(_Q=Oz&65535,_4&=15,_7<_4&&(Vb+=Iz[af++]<<_7,_7+=8,_7<_4&&(Vb+=Iz[af++]<<_7,_7+=8)),_Q+=Vb&(1<<_4)-1,_Q>_6){ja.msg="invalid distance too far back",Lz.mode=rre;break e}if(Vb>>>=_4,_7-=_4,_4=Cd-_E,_Q>_4){if(_4=_Q-_4,_4>_v&&Lz.sane){ja.msg="invalid distance too far back",Lz.mode=rre;break e}if(vz=0,Jz=XR,Dz===0){if(vz+=d0-_4,_4<Pz){Pz-=_4;do Fz[Cd++]=XR[vz++];while(--_4);vz=Cd-_Q,Jz=Fz}}else if(Dz<_4){if(vz+=d0+Dz-_4,_4-=Dz,_4<Pz){Pz-=_4;do Fz[Cd++]=XR[vz++];while(--_4);if(vz=0,Dz<Pz){_4=Dz,Pz-=_4;do Fz[Cd++]=XR[vz++];while(--_4);vz=Cd-_Q,Jz=Fz}}}else if(vz+=Dz-_4,_4<Pz){Pz-=_4;do Fz[Cd++]=XR[vz++];while(--_4);vz=Cd-_Q,Jz=Fz}for(;Pz>2;)Fz[Cd++]=Jz[vz++],Fz[Cd++]=Jz[vz++],Fz[Cd++]=Jz[vz++],Pz-=3;Pz&&(Fz[Cd++]=Jz[vz++],Pz>1&&(Fz[Cd++]=Jz[vz++]))}else{vz=Cd-_Q;do Fz[Cd++]=Fz[vz++],Fz[Cd++]=Fz[vz++],Fz[Cd++]=Fz[vz++],Pz-=3;while(Pz>2);Pz&&(Fz[Cd++]=Fz[vz++],Pz>1&&(Fz[Cd++]=Fz[vz++]))}}else if((_4&64)===0){Oz=Nz[(Oz&65535)+(Vb&(1<<_4)-1)];continue t}else{ja.msg="invalid distance code",Lz.mode=rre;break e}break}}else if((_4&64)===0){Oz=_H[(Oz&65535)+(Vb&(1<<_4)-1)];continue n}else if(_4&32){Lz.mode=Yle;break e}else{ja.msg="invalid literal/length code",Lz.mode=rre;break e}break}}while(af<Ld&&Cd<_m);Pz=_7>>3,af-=Pz,_7-=Pz<<3,Vb&=(1<<_7)-1,ja.next_in=af,ja.next_out=Cd,ja.avail_in=af<Ld?5+(Ld-af):5-(af-Ld),ja.avail_out=Cd<_m?257+(_m-Cd):257-(Cd-_m),Lz.hold=Vb,Lz.bits=_7};const ete=15,ire=852,nte=592,Iie=0,lre=1,Nre=2,Nie=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Lie=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),zie=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tte=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Tte=(kl,ja,xa,af,Ld,Cd,_E,_m)=>{const _6=_m.bits;let d0=0,_v=0,Dz=0,XR=0,Vb=0,_7=0,_H=0,Nz=0,Mz=0,Hz=0,Oz,_4,Pz,_Q,vz,Jz=null,Iz;const Fz=new Uint16Array(ete+1),Lz=new Uint16Array(ete+1);let Fee=null,uie,Ine,Nne;for(d0=0;d0<=ete;d0++)Fz[d0]=0;for(_v=0;_v<af;_v++)Fz[ja[xa+_v]]++;for(Vb=_6,XR=ete;XR>=1&&Fz[XR]===0;XR--);if(Vb>XR&&(Vb=XR),XR===0)return Ld[Cd++]=1<<24|64<<16|0,Ld[Cd++]=1<<24|64<<16|0,_m.bits=1,0;for(Dz=1;Dz<XR&&Fz[Dz]===0;Dz++);for(Vb<Dz&&(Vb=Dz),Nz=1,d0=1;d0<=ete;d0++)if(Nz<<=1,Nz-=Fz[d0],Nz<0)return-1;if(Nz>0&&(kl===Iie||XR!==1))return-1;for(Lz[1]=0,d0=1;d0<ete;d0++)Lz[d0+1]=Lz[d0]+Fz[d0];for(_v=0;_v<af;_v++)ja[xa+_v]!==0&&(_E[Lz[ja[xa+_v]]++]=_v);if(kl===Iie?(Jz=Fee=_E,Iz=20):kl===lre?(Jz=Nie,Fee=Lie,Iz=257):(Jz=zie,Fee=tte,Iz=0),Hz=0,_v=0,d0=Dz,vz=Cd,_7=Vb,_H=0,Pz=-1,Mz=1<<Vb,_Q=Mz-1,kl===lre&&Mz>ire||kl===Nre&&Mz>nte)return 1;for(;;){uie=d0-_H,_E[_v]+1<Iz?(Ine=0,Nne=_E[_v]):_E[_v]>=Iz?(Ine=Fee[_E[_v]-Iz],Nne=Jz[_E[_v]-Iz]):(Ine=96,Nne=0),Oz=1<<d0-_H,_4=1<<_7,Dz=_4;do _4-=Oz,Ld[vz+(Hz>>_H)+_4]=uie<<24|Ine<<16|Nne|0;while(_4!==0);for(Oz=1<<d0-1;Hz&Oz;)Oz>>=1;if(Oz!==0?(Hz&=Oz-1,Hz+=Oz):Hz=0,_v++,--Fz[d0]===0){if(d0===XR)break;d0=ja[xa+_E[_v]]}if(d0>Vb&&(Hz&_Q)!==Pz){for(_H===0&&(_H=Vb),vz+=Dz,_7=d0-_H,Nz=1<<_7;_7+_H<XR&&(Nz-=Fz[_7+_H],!(Nz<=0));)_7++,Nz<<=1;if(Mz+=1<<_7,kl===lre&&Mz>ire||kl===Nre&&Mz>nte)return 1;Pz=Hz&_Q,Ld[Pz]=Vb<<24|_7<<16|vz-Cd|0}}return Hz!==0&&(Ld[vz+Hz]=d0-_H<<24|64<<16|0),_m.bits=Vb,0};const Zle=0,Pre=1,Lre=2,{Z_FINISH:rte,Z_BLOCK:Fte,Z_TREES:sre,Z_OK:Bee,Z_STREAM_END:ese,Z_NEED_DICT:jie,Z_STREAM_ERROR:vee,Z_DATA_ERROR:ore,Z_MEM_ERROR:zre,Z_BUF_ERROR:Bie,Z_DEFLATED:jre}=_0,ure=16180,Uie=16181,Kie=16182,Gie=16183,Wie=16184,Tee=16185,ite=16186,Bre=16187,Ure=16188,Kre=16189,Mte=16190,Iee=16191,Gre=16192,Hie=16193,dne=16194,are=16195,lte=16196,cre=16197,Wre=16198,Dne=16199,Qee=16200,fre=16201,Hre=16202,Ote=16203,qre=16204,Vre=16205,hre=16206,Jre=16207,Xre=16208,_G=16209,Zee=16210,dre=16211,Yre=852,nse=592,kte=15,qie=kl=>(kl>>>24&255)+(kl>>>8&65280)+((kl&65280)<<8)+((kl&255)<<24);function Vie(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const gne=kl=>{if(!kl)return 1;const ja=kl.state;return!ja||ja.strm!==kl||ja.mode<ure||ja.mode>dre?1:0},_U=kl=>{if(gne(kl))return vee;const ja=kl.state;return kl.total_in=kl.total_out=ja.total=0,kl.msg="",ja.wrap&&(kl.adler=ja.wrap&1),ja.mode=ure,ja.last=0,ja.havedict=0,ja.flags=-1,ja.dmax=32768,ja.head=null,ja.hold=0,ja.bits=0,ja.lencode=ja.lendyn=new Int32Array(Yre),ja.distcode=ja.distdyn=new Int32Array(nse),ja.sane=1,ja.back=-1,Bee},gre=kl=>{if(gne(kl))return vee;const ja=kl.state;return ja.wsize=0,ja.whave=0,ja.wnext=0,_U(kl)},Ite=(kl,ja)=>{let xa;if(gne(kl))return vee;const af=kl.state;return ja<0?(xa=0,ja=-ja):(xa=(ja>>4)+5,ja<48&&(ja&=15)),ja&&(ja<8||ja>15)?vee:(af.window!==null&&af.wbits!==ja&&(af.window=null),af.wrap=xa,af.wbits=ja,gre(kl))},ste=(kl,ja)=>{if(!kl)return vee;const xa=new Vie;kl.state=xa,xa.strm=kl,xa.window=null,xa.mode=ure;const af=Ite(kl,ja);return af!==Bee&&(kl.state=null),af},Jie=kl=>ste(kl,kte);let pre=!0,Rne,ote;const ute=kl=>{if(pre){Rne=new Int32Array(512),ote=new Int32Array(32);let ja=0;for(;ja<144;)kl.lens[ja++]=8;for(;ja<256;)kl.lens[ja++]=9;for(;ja<280;)kl.lens[ja++]=7;for(;ja<288;)kl.lens[ja++]=8;for(Tte(Pre,kl.lens,0,288,Rne,0,kl.work,{bits:9}),ja=0;ja<32;)kl.lens[ja++]=5;Tte(Lre,kl.lens,0,32,ote,0,kl.work,{bits:5}),pre=!1}kl.lencode=Rne,kl.lenbits=9,kl.distcode=ote,kl.distbits=5},Qre=(kl,ja,xa,af)=>{let Ld;const Cd=kl.state;return Cd.window===null&&(Cd.wsize=1<<Cd.wbits,Cd.wnext=0,Cd.whave=0,Cd.window=new Uint8Array(Cd.wsize)),af>=Cd.wsize?(Cd.window.set(ja.subarray(xa-Cd.wsize,xa),0),Cd.wnext=0,Cd.whave=Cd.wsize):(Ld=Cd.wsize-Cd.wnext,Ld>af&&(Ld=af),Cd.window.set(ja.subarray(xa-af,xa-af+Ld),Cd.wnext),af-=Ld,af?(Cd.window.set(ja.subarray(xa-af,xa),0),Cd.wnext=af,Cd.whave=Cd.wsize):(Cd.wnext+=Ld,Cd.wnext===Cd.wsize&&(Cd.wnext=0),Cd.whave<Cd.wsize&&(Cd.whave+=Ld))),0},tse=(kl,ja)=>{let xa,af,Ld,Cd,_E,_m,_6,d0,_v,Dz,XR,Vb,_7,_H,Nz=0,Mz,Hz,Oz,_4,Pz,_Q,vz,Jz;const Iz=new Uint8Array(4);let Fz,Lz;const Fee=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(gne(kl)||!kl.output||!kl.input&&kl.avail_in!==0)return vee;xa=kl.state,xa.mode===Iee&&(xa.mode=Gre),_E=kl.next_out,Ld=kl.output,_6=kl.avail_out,Cd=kl.next_in,af=kl.input,_m=kl.avail_in,d0=xa.hold,_v=xa.bits,Dz=_m,XR=_6,Jz=Bee;e:for(;;)switch(xa.mode){case ure:if(xa.wrap===0){xa.mode=Gre;break}for(;_v<16;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}if(xa.wrap&2&&d0===35615){xa.wbits===0&&(xa.wbits=15),xa.check=0,Iz[0]=d0&255,Iz[1]=d0>>>8&255,xa.check=ka(xa.check,Iz,2,0),d0=0,_v=0,xa.mode=Uie;break}if(xa.head&&(xa.head.done=!1),!(xa.wrap&1)||(((d0&255)<<8)+(d0>>8))%31){kl.msg="incorrect header check",xa.mode=_G;break}if((d0&15)!==jre){kl.msg="unknown compression method",xa.mode=_G;break}if(d0>>>=4,_v-=4,vz=(d0&15)+8,xa.wbits===0&&(xa.wbits=vz),vz>15||vz>xa.wbits){kl.msg="invalid window size",xa.mode=_G;break}xa.dmax=1<<xa.wbits,xa.flags=0,kl.adler=xa.check=1,xa.mode=d0&512?Kre:Iee,d0=0,_v=0;break;case Uie:for(;_v<16;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}if(xa.flags=d0,(xa.flags&255)!==jre){kl.msg="unknown compression method",xa.mode=_G;break}if(xa.flags&57344){kl.msg="unknown header flags set",xa.mode=_G;break}xa.head&&(xa.head.text=d0>>8&1),xa.flags&512&&xa.wrap&4&&(Iz[0]=d0&255,Iz[1]=d0>>>8&255,xa.check=ka(xa.check,Iz,2,0)),d0=0,_v=0,xa.mode=Kie;case Kie:for(;_v<32;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}xa.head&&(xa.head.time=d0),xa.flags&512&&xa.wrap&4&&(Iz[0]=d0&255,Iz[1]=d0>>>8&255,Iz[2]=d0>>>16&255,Iz[3]=d0>>>24&255,xa.check=ka(xa.check,Iz,4,0)),d0=0,_v=0,xa.mode=Gie;case Gie:for(;_v<16;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}xa.head&&(xa.head.xflags=d0&255,xa.head.os=d0>>8),xa.flags&512&&xa.wrap&4&&(Iz[0]=d0&255,Iz[1]=d0>>>8&255,xa.check=ka(xa.check,Iz,2,0)),d0=0,_v=0,xa.mode=Wie;case Wie:if(xa.flags&1024){for(;_v<16;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}xa.length=d0,xa.head&&(xa.head.extra_len=d0),xa.flags&512&&xa.wrap&4&&(Iz[0]=d0&255,Iz[1]=d0>>>8&255,xa.check=ka(xa.check,Iz,2,0)),d0=0,_v=0}else xa.head&&(xa.head.extra=null);xa.mode=Tee;case Tee:if(xa.flags&1024&&(Vb=xa.length,Vb>_m&&(Vb=_m),Vb&&(xa.head&&(vz=xa.head.extra_len-xa.length,xa.head.extra||(xa.head.extra=new Uint8Array(xa.head.extra_len)),xa.head.extra.set(af.subarray(Cd,Cd+Vb),vz)),xa.flags&512&&xa.wrap&4&&(xa.check=ka(xa.check,af,Vb,Cd)),_m-=Vb,Cd+=Vb,xa.length-=Vb),xa.length))break e;xa.length=0,xa.mode=ite;case ite:if(xa.flags&2048){if(_m===0)break e;Vb=0;do vz=af[Cd+Vb++],xa.head&&vz&&xa.length<65536&&(xa.head.name+=String.fromCharCode(vz));while(vz&&Vb<_m);if(xa.flags&512&&xa.wrap&4&&(xa.check=ka(xa.check,af,Vb,Cd)),_m-=Vb,Cd+=Vb,vz)break e}else xa.head&&(xa.head.name=null);xa.length=0,xa.mode=Bre;case Bre:if(xa.flags&4096){if(_m===0)break e;Vb=0;do vz=af[Cd+Vb++],xa.head&&vz&&xa.length<65536&&(xa.head.comment+=String.fromCharCode(vz));while(vz&&Vb<_m);if(xa.flags&512&&xa.wrap&4&&(xa.check=ka(xa.check,af,Vb,Cd)),_m-=Vb,Cd+=Vb,vz)break e}else xa.head&&(xa.head.comment=null);xa.mode=Ure;case Ure:if(xa.flags&512){for(;_v<16;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}if(xa.wrap&4&&d0!==(xa.check&65535)){kl.msg="header crc mismatch",xa.mode=_G;break}d0=0,_v=0}xa.head&&(xa.head.hcrc=xa.flags>>9&1,xa.head.done=!0),kl.adler=xa.check=0,xa.mode=Iee;break;case Kre:for(;_v<32;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}kl.adler=xa.check=qie(d0),d0=0,_v=0,xa.mode=Mte;case Mte:if(xa.havedict===0)return kl.next_out=_E,kl.avail_out=_6,kl.next_in=Cd,kl.avail_in=_m,xa.hold=d0,xa.bits=_v,jie;kl.adler=xa.check=1,xa.mode=Iee;case Iee:if(ja===Fte||ja===sre)break e;case Gre:if(xa.last){d0>>>=_v&7,_v-=_v&7,xa.mode=hre;break}for(;_v<3;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}switch(xa.last=d0&1,d0>>>=1,_v-=1,d0&3){case 0:xa.mode=Hie;break;case 1:if(ute(xa),xa.mode=Dne,ja===sre){d0>>>=2,_v-=2;break e}break;case 2:xa.mode=lte;break;case 3:kl.msg="invalid block type",xa.mode=_G}d0>>>=2,_v-=2;break;case Hie:for(d0>>>=_v&7,_v-=_v&7;_v<32;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}if((d0&65535)!==(d0>>>16^65535)){kl.msg="invalid stored block lengths",xa.mode=_G;break}if(xa.length=d0&65535,d0=0,_v=0,xa.mode=dne,ja===sre)break e;case dne:xa.mode=are;case are:if(Vb=xa.length,Vb){if(Vb>_m&&(Vb=_m),Vb>_6&&(Vb=_6),Vb===0)break e;Ld.set(af.subarray(Cd,Cd+Vb),_E),_m-=Vb,Cd+=Vb,_6-=Vb,_E+=Vb,xa.length-=Vb;break}xa.mode=Iee;break;case lte:for(;_v<14;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}if(xa.nlen=(d0&31)+257,d0>>>=5,_v-=5,xa.ndist=(d0&31)+1,d0>>>=5,_v-=5,xa.ncode=(d0&15)+4,d0>>>=4,_v-=4,xa.nlen>286||xa.ndist>30){kl.msg="too many length or distance symbols",xa.mode=_G;break}xa.have=0,xa.mode=cre;case cre:for(;xa.have<xa.ncode;){for(;_v<3;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}xa.lens[Fee[xa.have++]]=d0&7,d0>>>=3,_v-=3}for(;xa.have<19;)xa.lens[Fee[xa.have++]]=0;if(xa.lencode=xa.lendyn,xa.lenbits=7,Fz={bits:xa.lenbits},Jz=Tte(Zle,xa.lens,0,19,xa.lencode,0,xa.work,Fz),xa.lenbits=Fz.bits,Jz){kl.msg="invalid code lengths set",xa.mode=_G;break}xa.have=0,xa.mode=Wre;case Wre:for(;xa.have<xa.nlen+xa.ndist;){for(;Nz=xa.lencode[d0&(1<<xa.lenbits)-1],Mz=Nz>>>24,Hz=Nz>>>16&255,Oz=Nz&65535,!(Mz<=_v);){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}if(Oz<16)d0>>>=Mz,_v-=Mz,xa.lens[xa.have++]=Oz;else{if(Oz===16){for(Lz=Mz+2;_v<Lz;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}if(d0>>>=Mz,_v-=Mz,xa.have===0){kl.msg="invalid bit length repeat",xa.mode=_G;break}vz=xa.lens[xa.have-1],Vb=3+(d0&3),d0>>>=2,_v-=2}else if(Oz===17){for(Lz=Mz+3;_v<Lz;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}d0>>>=Mz,_v-=Mz,vz=0,Vb=3+(d0&7),d0>>>=3,_v-=3}else{for(Lz=Mz+7;_v<Lz;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}d0>>>=Mz,_v-=Mz,vz=0,Vb=11+(d0&127),d0>>>=7,_v-=7}if(xa.have+Vb>xa.nlen+xa.ndist){kl.msg="invalid bit length repeat",xa.mode=_G;break}for(;Vb--;)xa.lens[xa.have++]=vz}}if(xa.mode===_G)break;if(xa.lens[256]===0){kl.msg="invalid code -- missing end-of-block",xa.mode=_G;break}if(xa.lenbits=9,Fz={bits:xa.lenbits},Jz=Tte(Pre,xa.lens,0,xa.nlen,xa.lencode,0,xa.work,Fz),xa.lenbits=Fz.bits,Jz){kl.msg="invalid literal/lengths set",xa.mode=_G;break}if(xa.distbits=6,xa.distcode=xa.distdyn,Fz={bits:xa.distbits},Jz=Tte(Lre,xa.lens,xa.nlen,xa.ndist,xa.distcode,0,xa.work,Fz),xa.distbits=Fz.bits,Jz){kl.msg="invalid distances set",xa.mode=_G;break}if(xa.mode=Dne,ja===sre)break e;case Dne:xa.mode=Qee;case Qee:if(_m>=6&&_6>=258){kl.next_out=_E,kl.avail_out=_6,kl.next_in=Cd,kl.avail_in=_m,xa.hold=d0,xa.bits=_v,Qle(kl,XR),_E=kl.next_out,Ld=kl.output,_6=kl.avail_out,Cd=kl.next_in,af=kl.input,_m=kl.avail_in,d0=xa.hold,_v=xa.bits,xa.mode===Iee&&(xa.back=-1);break}for(xa.back=0;Nz=xa.lencode[d0&(1<<xa.lenbits)-1],Mz=Nz>>>24,Hz=Nz>>>16&255,Oz=Nz&65535,!(Mz<=_v);){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}if(Hz&&(Hz&240)===0){for(_4=Mz,Pz=Hz,_Q=Oz;Nz=xa.lencode[_Q+((d0&(1<<_4+Pz)-1)>>_4)],Mz=Nz>>>24,Hz=Nz>>>16&255,Oz=Nz&65535,!(_4+Mz<=_v);){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}d0>>>=_4,_v-=_4,xa.back+=_4}if(d0>>>=Mz,_v-=Mz,xa.back+=Mz,xa.length=Oz,Hz===0){xa.mode=Vre;break}if(Hz&32){xa.back=-1,xa.mode=Iee;break}if(Hz&64){kl.msg="invalid literal/length code",xa.mode=_G;break}xa.extra=Hz&15,xa.mode=fre;case fre:if(xa.extra){for(Lz=xa.extra;_v<Lz;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}xa.length+=d0&(1<<xa.extra)-1,d0>>>=xa.extra,_v-=xa.extra,xa.back+=xa.extra}xa.was=xa.length,xa.mode=Hre;case Hre:for(;Nz=xa.distcode[d0&(1<<xa.distbits)-1],Mz=Nz>>>24,Hz=Nz>>>16&255,Oz=Nz&65535,!(Mz<=_v);){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}if((Hz&240)===0){for(_4=Mz,Pz=Hz,_Q=Oz;Nz=xa.distcode[_Q+((d0&(1<<_4+Pz)-1)>>_4)],Mz=Nz>>>24,Hz=Nz>>>16&255,Oz=Nz&65535,!(_4+Mz<=_v);){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}d0>>>=_4,_v-=_4,xa.back+=_4}if(d0>>>=Mz,_v-=Mz,xa.back+=Mz,Hz&64){kl.msg="invalid distance code",xa.mode=_G;break}xa.offset=Oz,xa.extra=Hz&15,xa.mode=Ote;case Ote:if(xa.extra){for(Lz=xa.extra;_v<Lz;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}xa.offset+=d0&(1<<xa.extra)-1,d0>>>=xa.extra,_v-=xa.extra,xa.back+=xa.extra}if(xa.offset>xa.dmax){kl.msg="invalid distance too far back",xa.mode=_G;break}xa.mode=qre;case qre:if(_6===0)break e;if(Vb=XR-_6,xa.offset>Vb){if(Vb=xa.offset-Vb,Vb>xa.whave&&xa.sane){kl.msg="invalid distance too far back",xa.mode=_G;break}Vb>xa.wnext?(Vb-=xa.wnext,_7=xa.wsize-Vb):_7=xa.wnext-Vb,Vb>xa.length&&(Vb=xa.length),_H=xa.window}else _H=Ld,_7=_E-xa.offset,Vb=xa.length;Vb>_6&&(Vb=_6),_6-=Vb,xa.length-=Vb;do Ld[_E++]=_H[_7++];while(--Vb);xa.length===0&&(xa.mode=Qee);break;case Vre:if(_6===0)break e;Ld[_E++]=xa.length,_6--,xa.mode=Qee;break;case hre:if(xa.wrap){for(;_v<32;){if(_m===0)break e;_m--,d0|=af[Cd++]<<_v,_v+=8}if(XR-=_6,kl.total_out+=XR,xa.total+=XR,xa.wrap&4&&XR&&(kl.adler=xa.check=xa.flags?ka(xa.check,Ld,XR,_E-XR):c0(xa.check,Ld,XR,_E-XR)),XR=_6,xa.wrap&4&&(xa.flags?d0:qie(d0))!==xa.check){kl.msg="incorrect data check",xa.mode=_G;break}d0=0,_v=0}xa.mode=Jre;case Jre:if(xa.wrap&&xa.flags){for(;_v<32;){if(_m===0)break e;_m--,d0+=af[Cd++]<<_v,_v+=8}if(xa.wrap&4&&d0!==(xa.total&4294967295)){kl.msg="incorrect length check",xa.mode=_G;break}d0=0,_v=0}xa.mode=Xre;case Xre:Jz=ese;break e;case _G:Jz=ore;break e;case Zee:return zre;case dre:default:return vee}return kl.next_out=_E,kl.avail_out=_6,kl.next_in=Cd,kl.avail_in=_m,xa.hold=d0,xa.bits=_v,(xa.wsize||XR!==kl.avail_out&&xa.mode<_G&&(xa.mode<hre||ja!==rte))&&Qre(kl,kl.output,kl.next_out,XR-kl.avail_out),Dz-=kl.avail_in,XR-=kl.avail_out,kl.total_in+=Dz,kl.total_out+=XR,xa.total+=XR,xa.wrap&4&&XR&&(kl.adler=xa.check=xa.flags?ka(xa.check,Ld,XR,kl.next_out-XR):c0(xa.check,Ld,XR,kl.next_out-XR)),kl.data_type=xa.bits+(xa.last?64:0)+(xa.mode===Iee?128:0)+(xa.mode===Dne||xa.mode===dne?256:0),(Dz===0&&XR===0||ja===rte)&&Jz===Bee&&(Jz=Bie),Jz},rse=kl=>{if(gne(kl))return vee;let ja=kl.state;return ja.window&&(ja.window=null),kl.state=null,Bee},Xie=(kl,ja)=>{if(gne(kl))return vee;const xa=kl.state;return(xa.wrap&2)===0?vee:(xa.head=ja,ja.done=!1,Bee)},mre=(kl,ja)=>{const xa=ja.length;let af,Ld,Cd;return gne(kl)||(af=kl.state,af.wrap!==0&&af.mode!==Mte)?vee:af.mode===Mte&&(Ld=1,Ld=c0(Ld,ja,xa,0),Ld!==af.check)?ore:(Cd=Qre(kl,ja,xa,xa),Cd?(af.mode=Zee,zre):(af.havedict=1,Bee))};var vre=gre,Zre=Ite,eie=_U,nie=Jie,tie=ste,ise=tse,Yie=rse,lse=Xie,sse=mre,rie="pako inflate (from Nodeca project)",see={inflateReset:vre,inflateReset2:Zre,inflateResetKeep:eie,inflateInit:nie,inflateInit2:tie,inflate:ise,inflateEnd:Yie,inflateGetHeader:lse,inflateSetDictionary:sse,inflateInfo:rie};function Qie(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ate=Qie;const Nee=Object.prototype.toString,{Z_NO_FLUSH:Nte,Z_FINISH:ene,Z_OK:Tne,Z_STREAM_END:iie,Z_NEED_DICT:lie,Z_STREAM_ERROR:Fne,Z_DATA_ERROR:cte,Z_MEM_ERROR:fte}=_0;function pne(kl){this.options=hne.assign({chunkSize:65536,windowBits:15,to:""},kl||{});const ja=this.options;ja.raw&&ja.windowBits>=0&&ja.windowBits<16&&(ja.windowBits=-ja.windowBits,ja.windowBits===0&&(ja.windowBits=-15)),ja.windowBits>=0&&ja.windowBits<16&&!(kl&&kl.windowBits)&&(ja.windowBits+=32),ja.windowBits>15&&ja.windowBits<48&&(ja.windowBits&15)===0&&(ja.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Mie,this.strm.avail_out=0;let xa=see.inflateInit2(this.strm,ja.windowBits);if(xa!==Tne)throw new Error(Pp[xa]);if(this.header=new ate,see.inflateGetHeader(this.strm,this.header),ja.dictionary&&(typeof ja.dictionary=="string"?ja.dictionary=Ate.string2buf(ja.dictionary):Nee.call(ja.dictionary)==="[object ArrayBuffer]"&&(ja.dictionary=new Uint8Array(ja.dictionary)),ja.raw&&(xa=see.inflateSetDictionary(this.strm,ja.dictionary),xa!==Tne)))throw new Error(Pp[xa])}pne.prototype.push=function(kl,ja){const xa=this.strm,af=this.options.chunkSize,Ld=this.options.dictionary;let Cd,_E,_m;if(this.ended)return!1;for(ja===~~ja?_E=ja:_E=ja===!0?ene:Nte,Nee.call(kl)==="[object ArrayBuffer]"?xa.input=new Uint8Array(kl):xa.input=kl,xa.next_in=0,xa.avail_in=xa.input.length;;){for(xa.avail_out===0&&(xa.output=new Uint8Array(af),xa.next_out=0,xa.avail_out=af),Cd=see.inflate(xa,_E),Cd===lie&&Ld&&(Cd=see.inflateSetDictionary(xa,Ld),Cd===Tne?Cd=see.inflate(xa,_E):Cd===cte&&(Cd=lie));xa.avail_in>0&&Cd===iie&&xa.state.wrap>0&&kl[xa.next_in]!==0;)see.inflateReset(xa),Cd=see.inflate(xa,_E);switch(Cd){case Fne:case cte:case lie:case fte:return this.onEnd(Cd),this.ended=!0,!1}if(_m=xa.avail_out,xa.next_out&&(xa.avail_out===0||Cd===iie))if(this.options.to==="string"){let _6=Ate.utf8border(xa.output,xa.next_out),d0=xa.next_out-_6,_v=Ate.buf2string(xa.output,_6);xa.next_out=d0,xa.avail_out=af-d0,d0&&xa.output.set(xa.output.subarray(_6,_6+d0),0),this.onData(_v)}else this.onData(xa.output.length===xa.next_out?xa.output:xa.output.subarray(0,xa.next_out));if(!(Cd===Tne&&_m===0)){if(Cd===iie)return Cd=see.inflateEnd(this.strm),this.onEnd(Cd),this.ended=!0,!0;if(xa.avail_in===0)break}}return!0},pne.prototype.onData=function(kl){this.chunks.push(kl)},pne.prototype.onEnd=function(kl){kl===Tne&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=hne.flattenChunks(this.chunks)),this.chunks=[],this.err=kl,this.msg=this.strm.msg};function Pte(kl,ja){const xa=new pne(ja);if(xa.push(kl),xa.err)throw xa.msg||Pp[xa.err];return xa.result}function hte(kl,ja){return ja=ja||{},ja.raw=!0,Pte(kl,ja)}var mne=pne,_W=Pte,_K=hte,vne=Pte,oee={Inflate:mne,inflate:_W,inflateRaw:_K,ungzip:vne};const{Deflate:wee,deflate:Mne,deflateRaw:dte,gzip:yee}=Xle,{Inflate:wre,inflate:Zie,inflateRaw:ele,ungzip:yre}=oee;var sie=wee,Uee=Mne,Lte=dte,xre=yee,oie=wre,nle=Zie,nne=ele,One=yre,kne=_0,Sre={Deflate:sie,deflate:Uee,deflateRaw:Lte,gzip:xre,Inflate:oie,inflate:nle,inflateRaw:nne,ungzip:One,constants:kne}}},__webpack_module_cache__={};function __webpack_require__(n){var t=__webpack_module_cache__[n];if(t!==void 0)return t.exports;var i=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(n,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})},__webpack_require__.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),__webpack_require__.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},__webpack_require__("./src/index.ts"),__webpack_require__("./src/SurfaceWorker.js");var __webpack_exports__=__webpack_require__("./src/exporter.js");return __webpack_exports__})())}(_3Dmol$1)),_3Dmol$1.exports}var _3DmolExports=require_3Dmol();const{min:min$4,max:max$4}=Math,limit=(n,t=0,i=1)=>min$4(max$4(t,n),i),clip_rgb=n=>{n._clipped=!1,n._unclipped=n.slice(0);for(let t=0;t<=3;t++)t<3?((n[t]<0||n[t]>255)&&(n._clipped=!0),n[t]=limit(n[t],0,255)):t===3&&(n[t]=limit(n[t],0,1));return n},classToType={};for(let n of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])classToType[`[object ${n}]`]=n.toLowerCase();function type(n){return classToType[Object.prototype.toString.call(n)]||"object"}const unpack=(n,t=null)=>n.length>=3?Array.prototype.slice.call(n):type(n[0])=="object"&&t?t.split("").filter(i=>n[0][i]!==void 0).map(i=>n[0][i]):n[0].slice(0),last=n=>{if(n.length<2)return null;const t=n.length-1;return type(n[t])=="string"?n[t].toLowerCase():null},{PI:PI$3,min:min$3,max:max$3}=Math,rnd2=n=>Math.round(n*100)/100,rnd3=n=>Math.round(n*100)/100,TWOPI=PI$3*2,PITHIRD=PI$3/3,DEG2RAD=PI$3/180,RAD2DEG=180/PI$3;function reverse3(n){return[...n.slice(0,3).reverse(),...n.slice(3)]}const input={format:{},autodetect:[]};class Color{constructor(...t){const i=this;if(type(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let s=last(t),o=!1;if(!s){o=!0,input.sorted||(input.autodetect=input.autodetect.sort((f,d)=>d.p-f.p),input.sorted=!0);for(let f of input.autodetect)if(s=f.test(...t),s)break}if(input.format[s]){const f=input.format[s].apply(null,o?t:t.slice(0,-1));i._rgb=clip_rgb(f)}else throw new Error("unknown format: "+t);i._rgb.length===3&&i._rgb.push(1)}toString(){return type(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const version="3.1.2",chroma=(...n)=>new Color(...n);chroma.version=version;const w3cx11={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},RE_HEX=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,RE_HEXA=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,hex2rgb=n=>{if(n.match(RE_HEX)){(n.length===4||n.length===7)&&(n=n.substr(1)),n.length===3&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);const t=parseInt(n,16),i=t>>16,s=t>>8&255,o=t&255;return[i,s,o,1]}if(n.match(RE_HEXA)){(n.length===5||n.length===9)&&(n=n.substr(1)),n.length===4&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);const t=parseInt(n,16),i=t>>24&255,s=t>>16&255,o=t>>8&255,f=Math.round((t&255)/255*100)/100;return[i,s,o,f]}throw new Error(`unknown hex color: ${n}`)},{round:round$5}=Math,rgb2hex=(...n)=>{let[t,i,s,o]=unpack(n,"rgba"),f=last(n)||"auto";o===void 0&&(o=1),f==="auto"&&(f=o<1?"rgba":"rgb"),t=round$5(t),i=round$5(i),s=round$5(s);let p="000000"+(t<<16|i<<8|s).toString(16);p=p.substr(p.length-6);let v="0"+round$5(o*255).toString(16);switch(v=v.substr(v.length-2),f.toLowerCase()){case"rgba":return`#${p}${v}`;case"argb":return`#${v}${p}`;default:return`#${p}`}};Color.prototype.name=function(){const n=rgb2hex(this._rgb,"rgb");for(let t of Object.keys(w3cx11))if(w3cx11[t]===n)return t.toLowerCase();return n};input.format.named=n=>{if(n=n.toLowerCase(),w3cx11[n])return hex2rgb(w3cx11[n]);throw new Error("unknown color name: "+n)};input.autodetect.push({p:5,test:(n,...t)=>{if(!t.length&&type(n)==="string"&&w3cx11[n.toLowerCase()])return"named"}});Color.prototype.alpha=function(n,t=!1){return n!==void 0&&type(n)==="number"?t?(this._rgb[3]=n,this):new Color([this._rgb[0],this._rgb[1],this._rgb[2],n],"rgb"):this._rgb[3]};Color.prototype.clipped=function(){return this._rgb._clipped||!1};const labConstants={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},ILLUMINANTS=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function setLabWhitePoint(n){const t=ILLUMINANTS.get(String(n).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+n);labConstants.labWhitePoint=n,labConstants.Xn=t[0],labConstants.Zn=t[1]}function getLabWhitePoint(){return labConstants.labWhitePoint}const lab2rgb=(...n)=>{n=unpack(n,"lab");const[t,i,s]=n,[o,f,d]=lab2xyz(t,i,s),[p,v,_]=xyz2rgb(o,f,d);return[p,v,_,n.length>3?n[3]:1]},lab2xyz=(n,t,i)=>{const{kE:s,kK:o,kKE:f,Xn:d,Yn:p,Zn:v}=labConstants,_=(n+16)/116,k=.002*t+_,P=_-.005*i,L=k*k*k,G=P*P*P,Z=L>s?L:(116*k-16)/o,W=n>f?Math.pow((n+16)/116,3):n/o,j=G>s?G:(116*P-16)/o,H=Z*d,me=W*p,$e=j*v;return[H,me,$e]},compand=n=>{const t=Math.sign(n);return n=Math.abs(n),(n<=.0031308?n*12.92:1.055*Math.pow(n,1/2.4)-.055)*t},xyz2rgb=(n,t,i)=>{const{MtxAdaptMa:s,MtxAdaptMaI:o,MtxXYZ2RGB:f,RefWhiteRGB:d,Xn:p,Yn:v,Zn:_}=labConstants,k=p*s.m00+v*s.m10+_*s.m20,P=p*s.m01+v*s.m11+_*s.m21,L=p*s.m02+v*s.m12+_*s.m22,G=d.X*s.m00+d.Y*s.m10+d.Z*s.m20,Z=d.X*s.m01+d.Y*s.m11+d.Z*s.m21,W=d.X*s.m02+d.Y*s.m12+d.Z*s.m22,j=(n*s.m00+t*s.m10+i*s.m20)*(G/k),H=(n*s.m01+t*s.m11+i*s.m21)*(Z/P),me=(n*s.m02+t*s.m12+i*s.m22)*(W/L),$e=j*o.m00+H*o.m10+me*o.m20,De=j*o.m01+H*o.m11+me*o.m21,le=j*o.m02+H*o.m12+me*o.m22,Ce=compand($e*f.m00+De*f.m10+le*f.m20),Me=compand($e*f.m01+De*f.m11+le*f.m21),_n=compand($e*f.m02+De*f.m12+le*f.m22);return[Ce*255,Me*255,_n*255]},rgb2lab=(...n)=>{const[t,i,s,...o]=unpack(n,"rgb"),[f,d,p]=rgb2xyz(t,i,s),[v,_,k]=xyz2lab(f,d,p);return[v,_,k,...o.length>0&&o[0]<1?[o[0]]:[]]};function xyz2lab(n,t,i){const{Xn:s,Yn:o,Zn:f,kE:d,kK:p}=labConstants,v=n/s,_=t/o,k=i/f,P=v>d?Math.pow(v,1/3):(p*v+16)/116,L=_>d?Math.pow(_,1/3):(p*_+16)/116,G=k>d?Math.pow(k,1/3):(p*k+16)/116;return[116*L-16,500*(P-L),200*(L-G)]}function gammaAdjustSRGB(n){const t=Math.sign(n);return n=Math.abs(n),(n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4))*t}const rgb2xyz=(n,t,i)=>{n=gammaAdjustSRGB(n/255),t=gammaAdjustSRGB(t/255),i=gammaAdjustSRGB(i/255);const{MtxRGB2XYZ:s,MtxAdaptMa:o,MtxAdaptMaI:f,Xn:d,Yn:p,Zn:v,As:_,Bs:k,Cs:P}=labConstants;let L=n*s.m00+t*s.m10+i*s.m20,G=n*s.m01+t*s.m11+i*s.m21,Z=n*s.m02+t*s.m12+i*s.m22;const W=d*o.m00+p*o.m10+v*o.m20,j=d*o.m01+p*o.m11+v*o.m21,H=d*o.m02+p*o.m12+v*o.m22;let me=L*o.m00+G*o.m10+Z*o.m20,$e=L*o.m01+G*o.m11+Z*o.m21,De=L*o.m02+G*o.m12+Z*o.m22;return me*=W/_,$e*=j/k,De*=H/P,L=me*f.m00+$e*f.m10+De*f.m20,G=me*f.m01+$e*f.m11+De*f.m21,Z=me*f.m02+$e*f.m12+De*f.m22,[L,G,Z]};Color.prototype.lab=function(){return rgb2lab(this._rgb)};const lab$1=(...n)=>new Color(...n,"lab");Object.assign(chroma,{lab:lab$1,getLabWhitePoint,setLabWhitePoint});input.format.lab=lab2rgb;input.autodetect.push({p:2,test:(...n)=>{if(n=unpack(n,"lab"),type(n)==="array"&&n.length===3)return"lab"}});Color.prototype.darken=function(n=1){const t=this,i=t.lab();return i[0]-=labConstants.Kn*n,new Color(i,"lab").alpha(t.alpha(),!0)};Color.prototype.brighten=function(n=1){return this.darken(-n)};Color.prototype.darker=Color.prototype.darken;Color.prototype.brighter=Color.prototype.brighten;Color.prototype.get=function(n){const[t,i]=n.split("."),s=this[t]();if(i){const o=t.indexOf(i)-(t.substr(0,2)==="ok"?2:0);if(o>-1)return s[o];throw new Error(`unknown channel ${i} in mode ${t}`)}else return s};const{pow:pow$6}=Math,EPS=1e-7,MAX_ITER=20;Color.prototype.luminance=function(n,t="rgb"){if(n!==void 0&&type(n)==="number"){if(n===0)return new Color([0,0,0,this._rgb[3]],"rgb");if(n===1)return new Color([255,255,255,this._rgb[3]],"rgb");let i=this.luminance(),s=MAX_ITER;const o=(d,p)=>{const v=d.interpolate(p,.5,t),_=v.luminance();return Math.abs(n-_)<EPS||!s--?v:_>n?o(d,v):o(v,p)},f=(i>n?o(new Color([0,0,0]),this):o(this,new Color([255,255,255]))).rgb();return new Color([...f,this._rgb[3]])}return rgb2luminance(...this._rgb.slice(0,3))};const rgb2luminance=(n,t,i)=>(n=luminance_x(n),t=luminance_x(t),i=luminance_x(i),.2126*n+.7152*t+.0722*i),luminance_x=n=>(n/=255,n<=.03928?n/12.92:pow$6((n+.055)/1.055,2.4)),index={},mix=(n,t,i=.5,...s)=>{let o=s[0]||"lrgb";if(!index[o]&&!s.length&&(o=Object.keys(index)[0]),!index[o])throw new Error(`interpolation mode ${o} is not defined`);return type(n)!=="object"&&(n=new Color(n)),type(t)!=="object"&&(t=new Color(t)),index[o](n,t,i).alpha(n.alpha()+i*(t.alpha()-n.alpha()))};Color.prototype.mix=Color.prototype.interpolate=function(n,t=.5,...i){return mix(this,n,t,...i)};Color.prototype.premultiply=function(n=!1){const t=this._rgb,i=t[3];return n?(this._rgb=[t[0]*i,t[1]*i,t[2]*i,i],this):new Color([t[0]*i,t[1]*i,t[2]*i,i],"rgb")};const{sin:sin$3,cos:cos$4}=Math,lch2lab=(...n)=>{let[t,i,s]=unpack(n,"lch");return isNaN(s)&&(s=0),s=s*DEG2RAD,[t,cos$4(s)*i,sin$3(s)*i]},lch2rgb=(...n)=>{n=unpack(n,"lch");const[t,i,s]=n,[o,f,d]=lch2lab(t,i,s),[p,v,_]=lab2rgb(o,f,d);return[p,v,_,n.length>3?n[3]:1]},hcl2rgb=(...n)=>{const t=reverse3(unpack(n,"hcl"));return lch2rgb(...t)},{sqrt:sqrt$4,atan2:atan2$2,round:round$4}=Math,lab2lch=(...n)=>{const[t,i,s]=unpack(n,"lab"),o=sqrt$4(i*i+s*s);let f=(atan2$2(s,i)*RAD2DEG+360)%360;return round$4(o*1e4)===0&&(f=Number.NaN),[t,o,f]},rgb2lch=(...n)=>{const[t,i,s,...o]=unpack(n,"rgb"),[f,d,p]=rgb2lab(t,i,s),[v,_,k]=lab2lch(f,d,p);return[v,_,k,...o.length>0&&o[0]<1?[o[0]]:[]]};Color.prototype.lch=function(){return rgb2lch(this._rgb)};Color.prototype.hcl=function(){return reverse3(rgb2lch(this._rgb))};const lch$1=(...n)=>new Color(...n,"lch"),hcl=(...n)=>new Color(...n,"hcl");Object.assign(chroma,{lch:lch$1,hcl});input.format.lch=lch2rgb;input.format.hcl=hcl2rgb;["lch","hcl"].forEach(n=>input.autodetect.push({p:2,test:(...t)=>{if(t=unpack(t,n),type(t)==="array"&&t.length===3)return n}}));Color.prototype.saturate=function(n=1){const t=this,i=t.lch();return i[1]+=labConstants.Kn*n,i[1]<0&&(i[1]=0),new Color(i,"lch").alpha(t.alpha(),!0)};Color.prototype.desaturate=function(n=1){return this.saturate(-n)};Color.prototype.set=function(n,t,i=!1){const[s,o]=n.split("."),f=this[s]();if(o){const d=s.indexOf(o)-(s.substr(0,2)==="ok"?2:0);if(d>-1){if(type(t)=="string")switch(t.charAt(0)){case"+":f[d]+=+t;break;case"-":f[d]+=+t;break;case"*":f[d]*=+t.substr(1);break;case"/":f[d]/=+t.substr(1);break;default:f[d]=+t}else if(type(t)==="number")f[d]=t;else throw new Error("unsupported value for Color.set");const p=new Color(f,s);return i?(this._rgb=p._rgb,this):p}throw new Error(`unknown channel ${o} in mode ${s}`)}else return f};Color.prototype.tint=function(n=.5,...t){return mix(this,"white",n,...t)};Color.prototype.shade=function(n=.5,...t){return mix(this,"black",n,...t)};const rgb$1=(n,t,i)=>{const s=n._rgb,o=t._rgb;return new Color(s[0]+i*(o[0]-s[0]),s[1]+i*(o[1]-s[1]),s[2]+i*(o[2]-s[2]),"rgb")};index.rgb=rgb$1;const{sqrt:sqrt$3,pow:pow$5}=Math,lrgb=(n,t,i)=>{const[s,o,f]=n._rgb,[d,p,v]=t._rgb;return new Color(sqrt$3(pow$5(s,2)*(1-i)+pow$5(d,2)*i),sqrt$3(pow$5(o,2)*(1-i)+pow$5(p,2)*i),sqrt$3(pow$5(f,2)*(1-i)+pow$5(v,2)*i),"rgb")};index.lrgb=lrgb;const lab=(n,t,i)=>{const s=n.lab(),o=t.lab();return new Color(s[0]+i*(o[0]-s[0]),s[1]+i*(o[1]-s[1]),s[2]+i*(o[2]-s[2]),"lab")};index.lab=lab;const interpolate_hsx=(n,t,i,s)=>{let o,f;s==="hsl"?(o=n.hsl(),f=t.hsl()):s==="hsv"?(o=n.hsv(),f=t.hsv()):s==="hcg"?(o=n.hcg(),f=t.hcg()):s==="hsi"?(o=n.hsi(),f=t.hsi()):s==="lch"||s==="hcl"?(s="hcl",o=n.hcl(),f=t.hcl()):s==="oklch"&&(o=n.oklch().reverse(),f=t.oklch().reverse());let d,p,v,_,k,P;(s.substr(0,1)==="h"||s==="oklch")&&([d,v,k]=o,[p,_,P]=f);let L,G,Z,W;return!isNaN(d)&&!isNaN(p)?(p>d&&p-d>180?W=p-(d+360):p<d&&d-p>180?W=p+360-d:W=p-d,G=d+i*W):isNaN(d)?isNaN(p)?G=Number.NaN:(G=p,(k==1||k==0)&&s!="hsv"&&(L=_)):(G=d,(P==1||P==0)&&s!="hsv"&&(L=v)),L===void 0&&(L=v+i*(_-v)),Z=k+i*(P-k),s==="oklch"?new Color([Z,L,G],s):new Color([G,L,Z],s)},lch=(n,t,i)=>interpolate_hsx(n,t,i,"lch");index.lch=lch;index.hcl=lch;const num2rgb=n=>{if(type(n)=="number"&&n>=0&&n<=16777215){const t=n>>16,i=n>>8&255,s=n&255;return[t,i,s,1]}throw new Error("unknown num color: "+n)},rgb2num=(...n)=>{const[t,i,s]=unpack(n,"rgb");return(t<<16)+(i<<8)+s};Color.prototype.num=function(){return rgb2num(this._rgb)};const num$1=(...n)=>new Color(...n,"num");Object.assign(chroma,{num:num$1});input.format.num=num2rgb;input.autodetect.push({p:5,test:(...n)=>{if(n.length===1&&type(n[0])==="number"&&n[0]>=0&&n[0]<=16777215)return"num"}});const num=(n,t,i)=>{const s=n.num(),o=t.num();return new Color(s+i*(o-s),"num")};index.num=num;const{floor:floor$3}=Math,hcg2rgb=(...n)=>{n=unpack(n,"hcg");let[t,i,s]=n,o,f,d;s=s*255;const p=i*255;if(i===0)o=f=d=s;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const v=floor$3(t),_=t-v,k=s*(1-i),P=k+p*(1-_),L=k+p*_,G=k+p;switch(v){case 0:[o,f,d]=[G,L,k];break;case 1:[o,f,d]=[P,G,k];break;case 2:[o,f,d]=[k,G,L];break;case 3:[o,f,d]=[k,P,G];break;case 4:[o,f,d]=[L,k,G];break;case 5:[o,f,d]=[G,k,P];break}}return[o,f,d,n.length>3?n[3]:1]},rgb2hcg=(...n)=>{const[t,i,s]=unpack(n,"rgb"),o=min$3(t,i,s),f=max$3(t,i,s),d=f-o,p=d*100/255,v=o/(255-d)*100;let _;return d===0?_=Number.NaN:(t===f&&(_=(i-s)/d),i===f&&(_=2+(s-t)/d),s===f&&(_=4+(t-i)/d),_*=60,_<0&&(_+=360)),[_,p,v]};Color.prototype.hcg=function(){return rgb2hcg(this._rgb)};const hcg$1=(...n)=>new Color(...n,"hcg");chroma.hcg=hcg$1;input.format.hcg=hcg2rgb;input.autodetect.push({p:1,test:(...n)=>{if(n=unpack(n,"hcg"),type(n)==="array"&&n.length===3)return"hcg"}});const hcg=(n,t,i)=>interpolate_hsx(n,t,i,"hcg");index.hcg=hcg;const{cos:cos$3}=Math,hsi2rgb=(...n)=>{n=unpack(n,"hsi");let[t,i,s]=n,o,f,d;return isNaN(t)&&(t=0),isNaN(i)&&(i=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(d=(1-i)/3,o=(1+i*cos$3(TWOPI*t)/cos$3(PITHIRD-TWOPI*t))/3,f=1-(d+o)):t<2/3?(t-=1/3,o=(1-i)/3,f=(1+i*cos$3(TWOPI*t)/cos$3(PITHIRD-TWOPI*t))/3,d=1-(o+f)):(t-=2/3,f=(1-i)/3,d=(1+i*cos$3(TWOPI*t)/cos$3(PITHIRD-TWOPI*t))/3,o=1-(f+d)),o=limit(s*o*3),f=limit(s*f*3),d=limit(s*d*3),[o*255,f*255,d*255,n.length>3?n[3]:1]},{min:min$2,sqrt:sqrt$2,acos}=Math,rgb2hsi=(...n)=>{let[t,i,s]=unpack(n,"rgb");t/=255,i/=255,s/=255;let o;const f=min$2(t,i,s),d=(t+i+s)/3,p=d>0?1-f/d:0;return p===0?o=NaN:(o=(t-i+(t-s))/2,o/=sqrt$2((t-i)*(t-i)+(t-s)*(i-s)),o=acos(o),s>i&&(o=TWOPI-o),o/=TWOPI),[o*360,p,d]};Color.prototype.hsi=function(){return rgb2hsi(this._rgb)};const hsi$1=(...n)=>new Color(...n,"hsi");chroma.hsi=hsi$1;input.format.hsi=hsi2rgb;input.autodetect.push({p:2,test:(...n)=>{if(n=unpack(n,"hsi"),type(n)==="array"&&n.length===3)return"hsi"}});const hsi=(n,t,i)=>interpolate_hsx(n,t,i,"hsi");index.hsi=hsi;const hsl2rgb=(...n)=>{n=unpack(n,"hsl");const[t,i,s]=n;let o,f,d;if(i===0)o=f=d=s*255;else{const p=[0,0,0],v=[0,0,0],_=s<.5?s*(1+i):s+i-s*i,k=2*s-_,P=t/360;p[0]=P+1/3,p[1]=P,p[2]=P-1/3;for(let L=0;L<3;L++)p[L]<0&&(p[L]+=1),p[L]>1&&(p[L]-=1),6*p[L]<1?v[L]=k+(_-k)*6*p[L]:2*p[L]<1?v[L]=_:3*p[L]<2?v[L]=k+(_-k)*(2/3-p[L])*6:v[L]=k;[o,f,d]=[v[0]*255,v[1]*255,v[2]*255]}return n.length>3?[o,f,d,n[3]]:[o,f,d,1]},rgb2hsl$1=(...n)=>{n=unpack(n,"rgba");let[t,i,s]=n;t/=255,i/=255,s/=255;const o=min$3(t,i,s),f=max$3(t,i,s),d=(f+o)/2;let p,v;return f===o?(p=0,v=Number.NaN):p=d<.5?(f-o)/(f+o):(f-o)/(2-f-o),t==f?v=(i-s)/(f-o):i==f?v=2+(s-t)/(f-o):s==f&&(v=4+(t-i)/(f-o)),v*=60,v<0&&(v+=360),n.length>3&&n[3]!==void 0?[v,p,d,n[3]]:[v,p,d]};Color.prototype.hsl=function(){return rgb2hsl$1(this._rgb)};const hsl$1=(...n)=>new Color(...n,"hsl");chroma.hsl=hsl$1;input.format.hsl=hsl2rgb;input.autodetect.push({p:2,test:(...n)=>{if(n=unpack(n,"hsl"),type(n)==="array"&&n.length===3)return"hsl"}});const hsl=(n,t,i)=>interpolate_hsx(n,t,i,"hsl");index.hsl=hsl;const{floor:floor$2}=Math,hsv2rgb=(...n)=>{n=unpack(n,"hsv");let[t,i,s]=n,o,f,d;if(s*=255,i===0)o=f=d=s;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const p=floor$2(t),v=t-p,_=s*(1-i),k=s*(1-i*v),P=s*(1-i*(1-v));switch(p){case 0:[o,f,d]=[s,P,_];break;case 1:[o,f,d]=[k,s,_];break;case 2:[o,f,d]=[_,s,P];break;case 3:[o,f,d]=[_,k,s];break;case 4:[o,f,d]=[P,_,s];break;case 5:[o,f,d]=[s,_,k];break}}return[o,f,d,n.length>3?n[3]:1]},{min:min$1,max:max$2}=Math,rgb2hsl=(...n)=>{n=unpack(n,"rgb");let[t,i,s]=n;const o=min$1(t,i,s),f=max$2(t,i,s),d=f-o;let p,v,_;return _=f/255,f===0?(p=Number.NaN,v=0):(v=d/f,t===f&&(p=(i-s)/d),i===f&&(p=2+(s-t)/d),s===f&&(p=4+(t-i)/d),p*=60,p<0&&(p+=360)),[p,v,_]};Color.prototype.hsv=function(){return rgb2hsl(this._rgb)};const hsv$1=(...n)=>new Color(...n,"hsv");chroma.hsv=hsv$1;input.format.hsv=hsv2rgb;input.autodetect.push({p:2,test:(...n)=>{if(n=unpack(n,"hsv"),type(n)==="array"&&n.length===3)return"hsv"}});const hsv=(n,t,i)=>interpolate_hsx(n,t,i,"hsv");index.hsv=hsv;function multiplyMatrices(n,t){let i=n.length;Array.isArray(n[0])||(n=[n]),Array.isArray(t[0])||(t=t.map(d=>[d]));let s=t[0].length,o=t[0].map((d,p)=>t.map(v=>v[p])),f=n.map(d=>o.map(p=>Array.isArray(d)?d.reduce((v,_,k)=>v+_*(p[k]||0),0):p.reduce((v,_)=>v+_*d,0)));return i===1&&(f=f[0]),s===1?f.map(d=>d[0]):f}const oklab2rgb=(...n)=>{n=unpack(n,"lab");const[t,i,s,...o]=n,[f,d,p]=OKLab_to_XYZ([t,i,s]),[v,_,k]=xyz2rgb(f,d,p);return[v,_,k,...o.length>0&&o[0]<1?[o[0]]:[]]};function OKLab_to_XYZ(n){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],i=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],s=multiplyMatrices(i,n);return multiplyMatrices(t,s.map(o=>o**3))}const rgb2oklab=(...n)=>{const[t,i,s,...o]=unpack(n,"rgb"),f=rgb2xyz(t,i,s);return[...XYZ_to_OKLab(f),...o.length>0&&o[0]<1?[o[0]]:[]]};function XYZ_to_OKLab(n){const t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],i=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],s=multiplyMatrices(t,n);return multiplyMatrices(i,s.map(o=>Math.cbrt(o)))}Color.prototype.oklab=function(){return rgb2oklab(this._rgb)};const oklab$1=(...n)=>new Color(...n,"oklab");Object.assign(chroma,{oklab:oklab$1});input.format.oklab=oklab2rgb;input.autodetect.push({p:2,test:(...n)=>{if(n=unpack(n,"oklab"),type(n)==="array"&&n.length===3)return"oklab"}});const oklab=(n,t,i)=>{const s=n.oklab(),o=t.oklab();return new Color(s[0]+i*(o[0]-s[0]),s[1]+i*(o[1]-s[1]),s[2]+i*(o[2]-s[2]),"oklab")};index.oklab=oklab;const oklch$1=(n,t,i)=>interpolate_hsx(n,t,i,"oklch");index.oklch=oklch$1;const{pow:pow$4,sqrt:sqrt$1,PI:PI$2,cos:cos$2,sin:sin$2,atan2:atan2$1}=Math,average=(n,t="lrgb",i=null)=>{const s=n.length;i||(i=Array.from(new Array(s)).map(()=>1));const o=s/i.reduce(function(P,L){return P+L});if(i.forEach((P,L)=>{i[L]*=o}),n=n.map(P=>new Color(P)),t==="lrgb")return _average_lrgb(n,i);const f=n.shift(),d=f.get(t),p=[];let v=0,_=0;for(let P=0;P<d.length;P++)if(d[P]=(d[P]||0)*i[0],p.push(isNaN(d[P])?0:i[0]),t.charAt(P)==="h"&&!isNaN(d[P])){const L=d[P]/180*PI$2;v+=cos$2(L)*i[0],_+=sin$2(L)*i[0]}let k=f.alpha()*i[0];n.forEach((P,L)=>{const G=P.get(t);k+=P.alpha()*i[L+1];for(let Z=0;Z<d.length;Z++)if(!isNaN(G[Z]))if(p[Z]+=i[L+1],t.charAt(Z)==="h"){const W=G[Z]/180*PI$2;v+=cos$2(W)*i[L+1],_+=sin$2(W)*i[L+1]}else d[Z]+=G[Z]*i[L+1]});for(let P=0;P<d.length;P++)if(t.charAt(P)==="h"){let L=atan2$1(_/p[P],v/p[P])/PI$2*180;for(;L<0;)L+=360;for(;L>=360;)L-=360;d[P]=L}else d[P]=d[P]/p[P];return k/=s,new Color(d,t).alpha(k>.99999?1:k,!0)},_average_lrgb=(n,t)=>{const i=n.length,s=[0,0,0,0];for(let o=0;o<n.length;o++){const f=n[o],d=t[o]/i,p=f._rgb;s[0]+=pow$4(p[0],2)*d,s[1]+=pow$4(p[1],2)*d,s[2]+=pow$4(p[2],2)*d,s[3]+=p[3]*d}return s[0]=sqrt$1(s[0]),s[1]=sqrt$1(s[1]),s[2]=sqrt$1(s[2]),s[3]>.9999999&&(s[3]=1),new Color(clip_rgb(s))},{pow:pow$3}=Math;function scale(n){let t="rgb",i=chroma("#ccc"),s=0,o=[0,1],f=[],d=[0,0],p=!1,v=[],_=!1,k=0,P=1,L=!1,G={},Z=!0,W=1;const j=function(Me){if(Me=Me||["#fff","#000"],Me&&type(Me)==="string"&&chroma.brewer&&chroma.brewer[Me.toLowerCase()]&&(Me=chroma.brewer[Me.toLowerCase()]),type(Me)==="array"){Me.length===1&&(Me=[Me[0],Me[0]]),Me=Me.slice(0);for(let _n=0;_n<Me.length;_n++)Me[_n]=chroma(Me[_n]);f.length=0;for(let _n=0;_n<Me.length;_n++)f.push(_n/(Me.length-1))}return le(),v=Me},H=function(Me){if(p!=null){const _n=p.length-1;let _i=0;for(;_i<_n&&Me>=p[_i];)_i++;return _i-1}return 0};let me=Me=>Me,$e=Me=>Me;const De=function(Me,_n){let _i,ll;if(_n==null&&(_n=!1),isNaN(Me)||Me===null)return i;_n?ll=Me:p&&p.length>2?ll=H(Me)/(p.length-2):P!==k?ll=(Me-k)/(P-k):ll=1,ll=$e(ll),_n||(ll=me(ll)),W!==1&&(ll=pow$3(ll,W)),ll=d[0]+ll*(1-d[0]-d[1]),ll=limit(ll,0,1);const _l=Math.floor(ll*1e4);if(Z&&G[_l])_i=G[_l];else{if(type(v)==="array")for(let oa=0;oa<f.length;oa++){const Ru=f[oa];if(ll<=Ru){_i=v[oa];break}if(ll>=Ru&&oa===f.length-1){_i=v[oa];break}if(ll>Ru&&ll<f[oa+1]){ll=(ll-Ru)/(f[oa+1]-Ru),_i=chroma.interpolate(v[oa],v[oa+1],ll,t);break}}else type(v)==="function"&&(_i=v(ll));Z&&(G[_l]=_i)}return _i};var le=()=>G={};j(n);const Ce=function(Me){const _n=chroma(De(Me));return _&&_n[_]?_n[_]():_n};return Ce.classes=function(Me){if(Me!=null){if(type(Me)==="array")p=Me,o=[Me[0],Me[Me.length-1]];else{const _n=chroma.analyze(o);Me===0?p=[_n.min,_n.max]:p=chroma.limits(_n,"e",Me)}return Ce}return p},Ce.domain=function(Me){if(!arguments.length)return o;k=Me[0],P=Me[Me.length-1],f=[];const _n=v.length;if(Me.length===_n&&k!==P)for(let _i of Array.from(Me))f.push((_i-k)/(P-k));else{for(let _i=0;_i<_n;_i++)f.push(_i/(_n-1));if(Me.length>2){const _i=Me.map((_l,oa)=>oa/(Me.length-1)),ll=Me.map(_l=>(_l-k)/(P-k));ll.every((_l,oa)=>_i[oa]===_l)||($e=_l=>{if(_l<=0||_l>=1)return _l;let oa=0;for(;_l>=ll[oa+1];)oa++;const Ru=(_l-ll[oa])/(ll[oa+1]-ll[oa]);return _i[oa]+Ru*(_i[oa+1]-_i[oa])})}}return o=[k,P],Ce},Ce.mode=function(Me){return arguments.length?(t=Me,le(),Ce):t},Ce.range=function(Me,_n){return j(Me),Ce},Ce.out=function(Me){return _=Me,Ce},Ce.spread=function(Me){return arguments.length?(s=Me,Ce):s},Ce.correctLightness=function(Me){return Me==null&&(Me=!0),L=Me,le(),L?me=function(_n){const _i=De(0,!0).lab()[0],ll=De(1,!0).lab()[0],_l=_i>ll;let oa=De(_n,!0).lab()[0];const Ru=_i+(ll-_i)*_n;let ga=oa-Ru,_s=0,Sa=1,Ra=20;for(;Math.abs(ga)>.01&&Ra-- >0;)(function(){return _l&&(ga*=-1),ga<0?(_s=_n,_n+=(Sa-_n)*.5):(Sa=_n,_n+=(_s-_n)*.5),oa=De(_n,!0).lab()[0],ga=oa-Ru})();return _n}:me=_n=>_n,Ce},Ce.padding=function(Me){return Me!=null?(type(Me)==="number"&&(Me=[Me,Me]),d=Me,Ce):d},Ce.colors=function(Me,_n){arguments.length<2&&(_n="hex");let _i=[];if(arguments.length===0)_i=v.slice(0);else if(Me===1)_i=[Ce(.5)];else if(Me>1){const ll=o[0],_l=o[1]-ll;_i=__range__(0,Me).map(oa=>Ce(ll+oa/(Me-1)*_l))}else{n=[];let ll=[];if(p&&p.length>2)for(let _l=1,oa=p.length,Ru=1<=oa;Ru?_l<oa:_l>oa;Ru?_l++:_l--)ll.push((p[_l-1]+p[_l])*.5);else ll=o;_i=ll.map(_l=>Ce(_l))}return chroma[_n]&&(_i=_i.map(ll=>ll[_n]())),_i},Ce.cache=function(Me){return Me!=null?(Z=Me,Ce):Z},Ce.gamma=function(Me){return Me!=null?(W=Me,Ce):W},Ce.nodata=function(Me){return Me!=null?(i=chroma(Me),Ce):i},Ce}function __range__(n,t,i){let s=[],o=n<t,f=t;for(let d=n;o?d<f:d>f;o?d++:d--)s.push(d);return s}const binom_row=function(n){let t=[1,1];for(let i=1;i<n;i++){let s=[1];for(let o=1;o<=t.length;o++)s[o]=(t[o]||0)+t[o-1];t=s}return t},bezier=function(n){let t,i,s,o;if(n=n.map(f=>new Color(f)),n.length===2)[i,s]=n.map(f=>f.lab()),t=function(f){const d=[0,1,2].map(p=>i[p]+f*(s[p]-i[p]));return new Color(d,"lab")};else if(n.length===3)[i,s,o]=n.map(f=>f.lab()),t=function(f){const d=[0,1,2].map(p=>(1-f)*(1-f)*i[p]+2*(1-f)*f*s[p]+f*f*o[p]);return new Color(d,"lab")};else if(n.length===4){let f;[i,s,o,f]=n.map(d=>d.lab()),t=function(d){const p=[0,1,2].map(v=>(1-d)*(1-d)*(1-d)*i[v]+3*(1-d)*(1-d)*d*s[v]+3*(1-d)*d*d*o[v]+d*d*d*f[v]);return new Color(p,"lab")}}else if(n.length>=5){let f,d,p;f=n.map(v=>v.lab()),p=n.length-1,d=binom_row(p),t=function(v){const _=1-v,k=[0,1,2].map(P=>f.reduce((L,G,Z)=>L+d[Z]*_**(p-Z)*v**Z*G[P],0));return new Color(k,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return t},bezier$1=n=>{const t=bezier(n);return t.scale=()=>scale(t),t},{round:round$3}=Math;Color.prototype.rgb=function(n=!0){return n===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(round$3)};Color.prototype.rgba=function(n=!0){return this._rgb.slice(0,4).map((t,i)=>i<3?n===!1?t:round$3(t):t)};const rgb=(...n)=>new Color(...n,"rgb");Object.assign(chroma,{rgb});input.format.rgb=(...n)=>{const t=unpack(n,"rgba");return t[3]===void 0&&(t[3]=1),t};input.autodetect.push({p:3,test:(...n)=>{if(n=unpack(n,"rgba"),type(n)==="array"&&(n.length===3||n.length===4&&type(n[3])=="number"&&n[3]>=0&&n[3]<=1))return"rgb"}});const blend=(n,t,i)=>{if(!blend[i])throw new Error("unknown blend mode "+i);return blend[i](n,t)},blend_f=n=>(t,i)=>{const s=chroma(i).rgb(),o=chroma(t).rgb();return chroma.rgb(n(s,o))},each=n=>(t,i)=>{const s=[];return s[0]=n(t[0],i[0]),s[1]=n(t[1],i[1]),s[2]=n(t[2],i[2]),s},normal=n=>n,multiply=(n,t)=>n*t/255,darken=(n,t)=>n>t?t:n,lighten=(n,t)=>n>t?n:t,screen=(n,t)=>255*(1-(1-n/255)*(1-t/255)),overlay=(n,t)=>t<128?2*n*t/255:255*(1-2*(1-n/255)*(1-t/255)),burn=(n,t)=>255*(1-(1-t/255)/(n/255)),dodge=(n,t)=>n===255?255:(n=255*(t/255)/(1-n/255),n>255?255:n);blend.normal=blend_f(each(normal));blend.multiply=blend_f(each(multiply));blend.screen=blend_f(each(screen));blend.overlay=blend_f(each(overlay));blend.darken=blend_f(each(darken));blend.lighten=blend_f(each(lighten));blend.dodge=blend_f(each(dodge));blend.burn=blend_f(each(burn));const{pow:pow$2,sin:sin$1,cos:cos$1}=Math;function cubehelix(n=300,t=-1.5,i=1,s=1,o=[0,1]){let f=0,d;type(o)==="array"?d=o[1]-o[0]:(d=0,o=[o,o]);const p=function(v){const _=TWOPI*((n+120)/360+t*v),k=pow$2(o[0]+d*v,s),L=(f!==0?i[0]+v*f:i)*k*(1-k)/2,G=cos$1(_),Z=sin$1(_),W=k+L*(-.14861*G+1.78277*Z),j=k+L*(-.29227*G-.90649*Z),H=k+L*(1.97294*G);return chroma(clip_rgb([W*255,j*255,H*255,1]))};return p.start=function(v){return v==null?n:(n=v,p)},p.rotations=function(v){return v==null?t:(t=v,p)},p.gamma=function(v){return v==null?s:(s=v,p)},p.hue=function(v){return v==null?i:(i=v,type(i)==="array"?(f=i[1]-i[0],f===0&&(i=i[1])):f=0,p)},p.lightness=function(v){return v==null?o:(type(v)==="array"?(o=v,d=v[1]-v[0]):(o=[v,v],d=0),p)},p.scale=()=>chroma.scale(p),p.hue(i),p}const digits="0123456789abcdef",{floor:floor$1,random}=Math,random$1=()=>{let n="#";for(let t=0;t<6;t++)n+=digits.charAt(floor$1(random()*16));return new Color(n,"hex")},{log:log$1,pow:pow$1,floor,abs:abs$1}=Math;function analyze(n,t=null){const i={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return type(n)==="object"&&(n=Object.values(n)),n.forEach(s=>{t&&type(s)==="object"&&(s=s[t]),s!=null&&!isNaN(s)&&(i.values.push(s),i.sum+=s,s<i.min&&(i.min=s),s>i.max&&(i.max=s),i.count+=1)}),i.domain=[i.min,i.max],i.limits=(s,o)=>limits(i,s,o),i}function limits(n,t="equal",i=7){type(n)=="array"&&(n=analyze(n));const{min:s,max:o}=n,f=n.values.sort((p,v)=>p-v);if(i===1)return[s,o];const d=[];if(t.substr(0,1)==="c"&&(d.push(s),d.push(o)),t.substr(0,1)==="e"){d.push(s);for(let p=1;p<i;p++)d.push(s+p/i*(o-s));d.push(o)}else if(t.substr(0,1)==="l"){if(s<=0)throw new Error("Logarithmic scales are only possible for values > 0");const p=Math.LOG10E*log$1(s),v=Math.LOG10E*log$1(o);d.push(s);for(let _=1;_<i;_++)d.push(pow$1(10,p+_/i*(v-p)));d.push(o)}else if(t.substr(0,1)==="q"){d.push(s);for(let p=1;p<i;p++){const v=(f.length-1)*p/i,_=floor(v);if(_===v)d.push(f[_]);else{const k=v-_;d.push(f[_]*(1-k)+f[_+1]*k)}}d.push(o)}else if(t.substr(0,1)==="k"){let p;const v=f.length,_=new Array(v),k=new Array(i);let P=!0,L=0,G=null;G=[],G.push(s);for(let j=1;j<i;j++)G.push(s+j/i*(o-s));for(G.push(o);P;){for(let H=0;H<i;H++)k[H]=0;for(let H=0;H<v;H++){const me=f[H];let $e=Number.MAX_VALUE,De;for(let le=0;le<i;le++){const Ce=abs$1(G[le]-me);Ce<$e&&($e=Ce,De=le),k[De]++,_[H]=De}}const j=new Array(i);for(let H=0;H<i;H++)j[H]=null;for(let H=0;H<v;H++)p=_[H],j[p]===null?j[p]=f[H]:j[p]+=f[H];for(let H=0;H<i;H++)j[H]*=1/k[H];P=!1;for(let H=0;H<i;H++)if(j[H]!==G[H]){P=!0;break}G=j,L++,L>200&&(P=!1)}const Z={};for(let j=0;j<i;j++)Z[j]=[];for(let j=0;j<v;j++)p=_[j],Z[p].push(f[j]);let W=[];for(let j=0;j<i;j++)W.push(Z[j][0]),W.push(Z[j][Z[j].length-1]);W=W.sort((j,H)=>j-H),d.push(W[0]);for(let j=1;j<W.length;j+=2){const H=W[j];!isNaN(H)&&d.indexOf(H)===-1&&d.push(H)}}return d}const contrast=(n,t)=>{n=new Color(n),t=new Color(t);const i=n.luminance(),s=t.luminance();return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const W_offset=.027,P_in=5e-4,P_out=.1,R_scale=1.14,B_threshold=.022,B_exp=1.414,contrastAPCA=(n,t)=>{n=new Color(n),t=new Color(t),n.alpha()<1&&(n=mix(t,n,n.alpha(),"rgb"));const i=lum(...n.rgb()),s=lum(...t.rgb()),o=i>=B_threshold?i:i+Math.pow(B_threshold-i,B_exp),f=s>=B_threshold?s:s+Math.pow(B_threshold-s,B_exp),d=Math.pow(f,.56)-Math.pow(o,.57),p=Math.pow(f,.65)-Math.pow(o,.62),v=Math.abs(f-o)<P_in?0:o<f?d*R_scale:p*R_scale;return(Math.abs(v)<P_out?0:v>0?v-W_offset:v+W_offset)*100};function lum(n,t,i){return .2126729*Math.pow(n/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(i/255,2.4)}const{sqrt,pow,min,max:max$1,atan2,abs,cos,sin,exp,PI:PI$1}=Math;function deltaE(n,t,i=1,s=1,o=1){var f=function(qc){return 360*qc/(2*PI$1)},d=function(qc){return 2*PI$1*qc/360};n=new Color(n),t=new Color(t);const[p,v,_]=Array.from(n.lab()),[k,P,L]=Array.from(t.lab()),G=(p+k)/2,Z=sqrt(pow(v,2)+pow(_,2)),W=sqrt(pow(P,2)+pow(L,2)),j=(Z+W)/2,H=.5*(1-sqrt(pow(j,7)/(pow(j,7)+pow(25,7)))),me=v*(1+H),$e=P*(1+H),De=sqrt(pow(me,2)+pow(_,2)),le=sqrt(pow($e,2)+pow(L,2)),Ce=(De+le)/2,Me=f(atan2(_,me)),_n=f(atan2(L,$e)),_i=Me>=0?Me:Me+360,ll=_n>=0?_n:_n+360,_l=abs(_i-ll)>180?(_i+ll+360)/2:(_i+ll)/2,oa=1-.17*cos(d(_l-30))+.24*cos(d(2*_l))+.32*cos(d(3*_l+6))-.2*cos(d(4*_l-63));let Ru=ll-_i;Ru=abs(Ru)<=180?Ru:ll<=_i?Ru+360:Ru-360,Ru=2*sqrt(De*le)*sin(d(Ru)/2);const ga=k-p,_s=le-De,Sa=1+.015*pow(G-50,2)/sqrt(20+pow(G-50,2)),Ra=1+.045*Ce,Da=1+.015*Ce*oa,Fa=30*exp(-pow((_l-275)/25,2)),_a=-(2*sqrt(pow(Ce,7)/(pow(Ce,7)+pow(25,7))))*sin(2*d(Fa)),Pa=sqrt(pow(ga/(i*Sa),2)+pow(_s/(s*Ra),2)+pow(Ru/(o*Da),2)+_a*(_s/(s*Ra))*(Ru/(o*Da)));return max$1(0,min(100,Pa))}function distance(n,t,i="lab"){n=new Color(n),t=new Color(t);const s=n.get(i),o=t.get(i);let f=0;for(let d in s){const p=(s[d]||0)-(o[d]||0);f+=p*p}return Math.sqrt(f)}const valid=(...n)=>{try{return new Color(...n),!0}catch{return!1}},scales={cool(){return scale([chroma.hsl(180,1,.9),chroma.hsl(250,.7,.4)])},hot(){return scale(["#000","#f00","#ff0","#fff"]).mode("rgb")}},colorbrewer={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},colorbrewerTypes=Object.keys(colorbrewer),typeMap=new Map(colorbrewerTypes.map(n=>[n.toLowerCase(),n])),colorbrewerProxy=typeof Proxy=="function"?new Proxy(colorbrewer,{get(n,t){const i=t.toLowerCase();if(typeMap.has(i))return n[typeMap.get(i)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(colorbrewerTypes)}}):colorbrewer,cmyk2rgb=(...n)=>{n=unpack(n,"cmyk");const[t,i,s,o]=n,f=n.length>4?n[4]:1;return o===1?[0,0,0,f]:[t>=1?0:255*(1-t)*(1-o),i>=1?0:255*(1-i)*(1-o),s>=1?0:255*(1-s)*(1-o),f]},{max}=Math,rgb2cmyk=(...n)=>{let[t,i,s]=unpack(n,"rgb");t=t/255,i=i/255,s=s/255;const o=1-max(t,max(i,s)),f=o<1?1/(1-o):0,d=(1-t-o)*f,p=(1-i-o)*f,v=(1-s-o)*f;return[d,p,v,o]};Color.prototype.cmyk=function(){return rgb2cmyk(this._rgb)};const cmyk=(...n)=>new Color(...n,"cmyk");Object.assign(chroma,{cmyk});input.format.cmyk=cmyk2rgb;input.autodetect.push({p:2,test:(...n)=>{if(n=unpack(n,"cmyk"),type(n)==="array"&&n.length===4)return"cmyk"}});const hsl2css=(...n)=>{const t=unpack(n,"hsla");let i=last(n)||"lsa";return t[0]=rnd2(t[0]||0)+"deg",t[1]=rnd2(t[1]*100)+"%",t[2]=rnd2(t[2]*100)+"%",i==="hsla"||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),i="hsla"):t.length=3,`${i.substr(0,3)}(${t.join(" ")})`},lab2css=(...n)=>{const t=unpack(n,"lab");let i=last(n)||"lab";return t[0]=rnd2(t[0])+"%",t[1]=rnd2(t[1]),t[2]=rnd2(t[2]),i==="laba"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},lch2css=(...n)=>{const t=unpack(n,"lch");let i=last(n)||"lab";return t[0]=rnd2(t[0])+"%",t[1]=rnd2(t[1]),t[2]=isNaN(t[2])?"none":rnd2(t[2])+"deg",i==="lcha"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},oklab2css=(...n)=>{const t=unpack(n,"lab");return t[0]=rnd2(t[0]*100)+"%",t[1]=rnd3(t[1]),t[2]=rnd3(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},rgb2oklch=(...n)=>{const[t,i,s,...o]=unpack(n,"rgb"),[f,d,p]=rgb2oklab(t,i,s),[v,_,k]=lab2lch(f,d,p);return[v,_,k,...o.length>0&&o[0]<1?[o[0]]:[]]},oklch2css=(...n)=>{const t=unpack(n,"lch");return t[0]=rnd2(t[0]*100)+"%",t[1]=rnd3(t[1]),t[2]=isNaN(t[2])?"none":rnd2(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},{round:round$2}=Math,rgb2css=(...n)=>{const t=unpack(n,"rgba");let i=last(n)||"rgb";if(i.substr(0,3)==="hsl")return hsl2css(rgb2hsl$1(t),i);if(i.substr(0,3)==="lab"){const s=getLabWhitePoint();setLabWhitePoint("d50");const o=lab2css(rgb2lab(t),i);return setLabWhitePoint(s),o}if(i.substr(0,3)==="lch"){const s=getLabWhitePoint();setLabWhitePoint("d50");const o=lch2css(rgb2lch(t),i);return setLabWhitePoint(s),o}return i.substr(0,5)==="oklab"?oklab2css(rgb2oklab(t)):i.substr(0,5)==="oklch"?oklch2css(rgb2oklch(t)):(t[0]=round$2(t[0]),t[1]=round$2(t[1]),t[2]=round$2(t[2]),(i==="rgba"||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),i="rgba"),`${i.substr(0,3)}(${t.slice(0,i==="rgb"?3:4).join(" ")})`)},oklch2rgb=(...n)=>{n=unpack(n,"lch");const[t,i,s,...o]=n,[f,d,p]=lch2lab(t,i,s),[v,_,k]=oklab2rgb(f,d,p);return[v,_,k,...o.length>0&&o[0]<1?[o[0]]:[]]},INT_OR_PCT=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,FLOAT_OR_PCT=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,PCT=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,RE_S=/\s*/.source,SEP=/\s+/.source,COMMA=/\s*,\s*/.source,ANLGE=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,ALPHA=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,RE_RGB=new RegExp("^rgba?\\("+RE_S+[INT_OR_PCT,INT_OR_PCT,INT_OR_PCT].join(SEP)+ALPHA+"\\)$"),RE_RGB_LEGACY=new RegExp("^rgb\\("+RE_S+[INT_OR_PCT,INT_OR_PCT,INT_OR_PCT].join(COMMA)+RE_S+"\\)$"),RE_RGBA_LEGACY=new RegExp("^rgba\\("+RE_S+[INT_OR_PCT,INT_OR_PCT,INT_OR_PCT,FLOAT_OR_PCT].join(COMMA)+RE_S+"\\)$"),RE_HSL=new RegExp("^hsla?\\("+RE_S+[ANLGE,PCT,PCT].join(SEP)+ALPHA+"\\)$"),RE_HSL_LEGACY=new RegExp("^hsl?\\("+RE_S+[ANLGE,PCT,PCT].join(COMMA)+RE_S+"\\)$"),RE_HSLA_LEGACY=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,RE_LAB=new RegExp("^lab\\("+RE_S+[FLOAT_OR_PCT,FLOAT_OR_PCT,FLOAT_OR_PCT].join(SEP)+ALPHA+"\\)$"),RE_LCH=new RegExp("^lch\\("+RE_S+[FLOAT_OR_PCT,FLOAT_OR_PCT,ANLGE].join(SEP)+ALPHA+"\\)$"),RE_OKLAB=new RegExp("^oklab\\("+RE_S+[FLOAT_OR_PCT,FLOAT_OR_PCT,FLOAT_OR_PCT].join(SEP)+ALPHA+"\\)$"),RE_OKLCH=new RegExp("^oklch\\("+RE_S+[FLOAT_OR_PCT,FLOAT_OR_PCT,ANLGE].join(SEP)+ALPHA+"\\)$"),{round:round$1}=Math,roundRGB=n=>n.map((t,i)=>i<=2?limit(round$1(t),0,255):t),percentToAbsolute=(n,t=0,i=100,s=!1)=>(typeof n=="string"&&n.endsWith("%")&&(n=parseFloat(n.substring(0,n.length-1))/100,s?n=t+(n+1)*.5*(i-t):n=t+n*(i-t)),+n),noneToValue=(n,t)=>n==="none"?t:n,css2rgb=n=>{if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];let t;if(input.format.named)try{return input.format.named(n)}catch{}if((t=n.match(RE_RGB))||(t=n.match(RE_RGB_LEGACY))){let i=t.slice(1,4);for(let o=0;o<3;o++)i[o]=+percentToAbsolute(noneToValue(i[o],0),0,255);i=roundRGB(i);const s=t[4]!==void 0?+percentToAbsolute(t[4],0,1):1;return i[3]=s,i}if(t=n.match(RE_RGBA_LEGACY)){const i=t.slice(1,5);for(let s=0;s<4;s++)i[s]=+percentToAbsolute(i[s],0,255);return i}if((t=n.match(RE_HSL))||(t=n.match(RE_HSL_LEGACY))){const i=t.slice(1,4);i[0]=+noneToValue(i[0].replace("deg",""),0),i[1]=+percentToAbsolute(noneToValue(i[1],0),0,100)*.01,i[2]=+percentToAbsolute(noneToValue(i[2],0),0,100)*.01;const s=roundRGB(hsl2rgb(i)),o=t[4]!==void 0?+percentToAbsolute(t[4],0,1):1;return s[3]=o,s}if(t=n.match(RE_HSLA_LEGACY)){const i=t.slice(1,4);i[1]*=.01,i[2]*=.01;const s=hsl2rgb(i);for(let o=0;o<3;o++)s[o]=round$1(s[o]);return s[3]=+t[4],s}if(t=n.match(RE_LAB)){const i=t.slice(1,4);i[0]=percentToAbsolute(noneToValue(i[0],0),0,100),i[1]=percentToAbsolute(noneToValue(i[1],0),-125,125,!0),i[2]=percentToAbsolute(noneToValue(i[2],0),-125,125,!0);const s=getLabWhitePoint();setLabWhitePoint("d50");const o=roundRGB(lab2rgb(i));setLabWhitePoint(s);const f=t[4]!==void 0?+percentToAbsolute(t[4],0,1):1;return o[3]=f,o}if(t=n.match(RE_LCH)){const i=t.slice(1,4);i[0]=percentToAbsolute(i[0],0,100),i[1]=percentToAbsolute(noneToValue(i[1],0),0,150,!1),i[2]=+noneToValue(i[2].replace("deg",""),0);const s=getLabWhitePoint();setLabWhitePoint("d50");const o=roundRGB(lch2rgb(i));setLabWhitePoint(s);const f=t[4]!==void 0?+percentToAbsolute(t[4],0,1):1;return o[3]=f,o}if(t=n.match(RE_OKLAB)){const i=t.slice(1,4);i[0]=percentToAbsolute(noneToValue(i[0],0),0,1),i[1]=percentToAbsolute(noneToValue(i[1],0),-.4,.4,!0),i[2]=percentToAbsolute(noneToValue(i[2],0),-.4,.4,!0);const s=roundRGB(oklab2rgb(i)),o=t[4]!==void 0?+percentToAbsolute(t[4],0,1):1;return s[3]=o,s}if(t=n.match(RE_OKLCH)){const i=t.slice(1,4);i[0]=percentToAbsolute(noneToValue(i[0],0),0,1),i[1]=percentToAbsolute(noneToValue(i[1],0),0,.4,!1),i[2]=+noneToValue(i[2].replace("deg",""),0);const s=roundRGB(oklch2rgb(i)),o=t[4]!==void 0?+percentToAbsolute(t[4],0,1):1;return s[3]=o,s}};css2rgb.test=n=>RE_RGB.test(n)||RE_HSL.test(n)||RE_LAB.test(n)||RE_LCH.test(n)||RE_OKLAB.test(n)||RE_OKLCH.test(n)||RE_RGB_LEGACY.test(n)||RE_RGBA_LEGACY.test(n)||RE_HSL_LEGACY.test(n)||RE_HSLA_LEGACY.test(n)||n==="transparent";Color.prototype.css=function(n){return rgb2css(this._rgb,n)};const css=(...n)=>new Color(...n,"css");chroma.css=css;input.format.css=css2rgb;input.autodetect.push({p:5,test:(n,...t)=>{if(!t.length&&type(n)==="string"&&css2rgb.test(n))return"css"}});input.format.gl=(...n)=>{const t=unpack(n,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};const gl$1=(...n)=>new Color(...n,"gl");chroma.gl=gl$1;Color.prototype.gl=function(){const n=this._rgb;return[n[0]/255,n[1]/255,n[2]/255,n[3]]};Color.prototype.hex=function(n){return rgb2hex(this._rgb,n)};const hex=(...n)=>new Color(...n,"hex");chroma.hex=hex;input.format.hex=hex2rgb;input.autodetect.push({p:4,test:(n,...t)=>{if(!t.length&&type(n)==="string"&&[3,4,5,6,7,8,9].indexOf(n.length)>=0)return"hex"}});const{log}=Math,temperature2rgb=n=>{const t=n/100;let i,s,o;return t<66?(i=255,s=t<6?0:-155.25485562709179-.44596950469579133*(s=t-2)+104.49216199393888*log(s),o=t<20?0:-254.76935184120902+.8274096064007395*(o=t-10)+115.67994401066147*log(o)):(i=351.97690566805693+.114206453784165*(i=t-55)-40.25366309332127*log(i),s=325.4494125711974+.07943456536662342*(s=t-50)-28.0852963507957*log(s),o=255),[i,s,o,1]},{round}=Math,rgb2temperature=(...n)=>{const t=unpack(n,"rgb"),i=t[0],s=t[2];let o=1e3,f=4e4;const d=.4;let p;for(;f-o>d;){p=(f+o)*.5;const v=temperature2rgb(p);v[2]/v[0]>=s/i?f=p:o=p}return round(p)};Color.prototype.temp=Color.prototype.kelvin=Color.prototype.temperature=function(){return rgb2temperature(this._rgb)};const temp=(...n)=>new Color(...n,"temp");Object.assign(chroma,{temp,kelvin:temp,temperature:temp});input.format.temp=input.format.kelvin=input.format.temperature=temperature2rgb;Color.prototype.oklch=function(){return rgb2oklch(this._rgb)};const oklch=(...n)=>new Color(...n,"oklch");Object.assign(chroma,{oklch});input.format.oklch=oklch2rgb;input.autodetect.push({p:2,test:(...n)=>{if(n=unpack(n,"oklch"),type(n)==="array"&&n.length===3)return"oklch"}});Object.assign(chroma,{analyze,average,bezier:bezier$1,blend,brewer:colorbrewerProxy,Color,colors:w3cx11,contrast,contrastAPCA,cubehelix,deltaE,distance,input,interpolate:mix,limits,mix,random:random$1,scale,scales,valid});var g,aa=function(n){var t=typeof n;return t!="object"?t:n?Array.isArray(n)?"array":t:"null"},ba=function(n){var t=aa(n);return t=="array"||t=="object"&&typeof n.length=="number"},ca=function(n){var t=typeof n;return t=="object"&&n!=null||t=="function"},fa=function(n){return Object.prototype.hasOwnProperty.call(n,da)&&n[da]||(n[da]=++ea)},ha=function(n,t,i){return n.call.apply(n.bind,arguments)},ia=function(n,t,i){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,s),n.apply(t,o)}}return function(){return n.apply(t,arguments)}},la=function(n,t,i){return la=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ha:ia,la.apply(null,arguments)},na=function(n,t){function i(){}i.prototype=t.prototype,n.Ff=t.prototype,n.prototype=new i,n.prototype.constructor=n,n.Ud=function(s,o,f){for(var d=Array(arguments.length-2),p=2;p<arguments.length;p++)d[p-2]=arguments[p];return t.prototype[o].apply(s,d)}},qa=function(n){return n},ta=function(n){return ta[" "](n),n},va=function(n,t){return new ua(n,t)},Ea=function(n){return 0<n?9223372036854776e3<=n?wa:new ua(n,n/4294967296):0>n?-9223372036854776e3>=n?ya:Aa(new ua(-n,-n/4294967296)):Ca},Ga=function(n,t){if(n.charAt(0)=="-")return Aa(Ga(n.substring(1),t));var i=parseInt(n,t||10);if(9007199254740991>=i)return new ua(i%4294967296|0,i/4294967296|0);if(n.length==0)throw Error("number format error: empty string");if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character: '+n);if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);i=Ea(Math.pow(t,8));for(var s=Ca,o=0;o<n.length;o+=8){var f=Math.min(8,n.length-o),d=parseInt(n.substring(o,o+f),t);8>f?(f=Ea(Math.pow(t,f)),s=s.multiply(f).add(Ea(d))):(s=s.multiply(i),s=s.add(Ea(d)))}return s},Aa=function(n){var t=~n.wa+1|0;return va(t,~n.la+!t|0)},Ha=function(n){return 4294967296*n.la+(n.wa>>>0)},La=function(n,t){if(Ia(t))throw Error("division by zero");if(0>n.la){if(n.equals(ya)){if(t.equals(Ja)||t.equals(Ka))return ya;if(t.equals(ya))return Ja;var i=1;if(i==0)i=n;else{var s=n.la;i=32>i?va(n.wa>>>i|s<<32-i,s>>i):va(s>>i-32,0<=s?0:-1)}return i=La(i,t).shiftLeft(1),i.equals(Ca)?0>t.la?Ja:Ka:(s=t.multiply(i),n=n.add(Aa(s)),i.add(La(n,t)))}return 0>t.la?La(Aa(n),Aa(t)):Aa(La(Aa(n),t))}if(Ia(n))return Ca;if(0>t.la)return t.equals(ya)?Ca:Aa(La(n,Aa(t)));for(s=Ca;0<=n.compare(t);){i=Math.max(1,Math.floor(Ha(n)/Ha(t)));var o=Math.ceil(Math.log(i)/Math.LN2);o=48>=o?1:Math.pow(2,o-48);for(var f=Ea(i),d=f.multiply(t);0>d.la||0<d.compare(n);)i-=o,f=Ea(i),d=f.multiply(t);Ia(f)&&(f=Ja),s=s.add(f),n=n.add(Aa(d))}return s},Ia=function(n){return n.wa==0&&n.la==0},Oa=function(n,t){if(t&=63,t==0)return n;var i=n.la;return 32>t?va(n.wa>>>t|i<<32-t,i>>>t):t==32?va(i,0):va(i>>>t-32,0)},Qa=function(n,t){const i=n.length-t.length;return 0<=i&&n.indexOf(t,i)==i},Ta=function(n){return/^[\s\xa0]*$/.test(n)},Va=function(n,t){const i={};for(const s in n)i[s]=t.call(void 0,n[s],s,n);return i},Wa=function(n){const t=[];let i=0;for(const s in n)t[i++]=s;return t},Xa=function(n,t){return n!==null&&t in n?n[t]:void 0},Za=function(n,t){let i,s;for(let o=1;o<arguments.length;o++){s=arguments[o];for(i in s)n[i]=s[i];for(let f=0;f<Ya.length;f++)i=Ya[f],Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])}},ab=function(){var n=$a.navigator;return n&&(n=n.userAgent)?n:""},bb=function(n){return ab().indexOf(n)!=-1},db=function(n){const t=n.length;if(0<t){const i=Array(t);for(let s=0;s<t;s++)i[s]=n[s];return i}return[]},fb=function(n,t){n.sort(t||eb)},gb=function(n,t){const i=Array(n.length);for(let o=0;o<n.length;o++)i[o]={index:o,value:n[o]};const s=t||eb;for(fb(i,function(o,f){return s(o.value,f.value)||o.index-f.index}),t=0;t<n.length;t++)n[t]=i[t].value},eb=function(n,t){return n>t?1:n<t?-1:0},kb=function(n){return n instanceof jb&&n.constructor===jb?n.qg:"type_error:SafeHtml"},ra=function(n){return n.length==1&&" "<=n&&"~">=n||"Â€"<=n&&"ï¿½">=n},lb=function(){const n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};let t;return t=$a.document.createElement("div"),"&nbsp;".replace(pb,function(i,s){var o=n[i];if(o)return o;if(s.charAt(0)=="#"&&(s=+("0"+s.slice(1)),isNaN(s)||(o=String.fromCharCode(s))),!o){if(o=i+" ",qb===void 0){s=null;var f=$a.trustedTypes;if(f&&f.createPolicy)try{s=f.createPolicy("goog#html",{createHTML:qa,createScript:qa,createScriptURL:qa})}catch(d){$a.console&&$a.console.error(d.message)}qb=s}if(o=(s=qb)?s.createHTML(o):o,o=new jb(o,rb),sb())for(;t.lastChild;)t.removeChild(t.lastChild);t.innerHTML=kb(o),o=t.firstChild.nodeValue.slice(0,-1)}return n[i]=o})},mb=function(){return"&nbsp;".replace(/&([^;]+);/g,function(n,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return t.charAt(0)!="#"||(t=+("0"+t.slice(1)),isNaN(t))?n:String.fromCharCode(t)}})},tb=function(n){return n==null?"":String(n)},ub=function(n){var t=1;n=n.split(":");const i=[];for(;0<t&&n.length;)i.push(n.shift()),t--;return n.length&&i.push(n.join(":")),i},vb=function(n){if(n.Mc&&typeof n.Mc=="function")return n.Mc();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(ba(n)){for(var t=[],i=n.length,s=0;s<i;s++)t.push(n[s]);return t}t=[],i=0;for(s in n)t[i++]=n[s];return t},wb=function(n){if(n.Lc&&typeof n.Lc=="function")return n.Lc();if(!n.Mc||typeof n.Mc!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ba(n)||typeof n=="string"){var t=[];n=n.length;for(var i=0;i<n;i++)t.push(i);return t}return Wa(n)}}},xb=function(n,t,i){if(n.forEach&&typeof n.forEach=="function")n.forEach(t,i);else if(ba(n)||typeof n=="string")Array.prototype.forEach.call(n,t,i);else for(var s=wb(n),o=vb(n),f=o.length,d=0;d<f;d++)t.call(i,o[d],s&&s[d],n)},yb=function(n,t){if(n){n=n.split("&");for(var i=0;i<n.length;i++){var s=n[i].indexOf("="),o=null;if(0<=s){var f=n[i].substring(0,s);o=n[i].substring(s+1)}else f=n[i];t(f,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}},zb=function(n){if(this.$b=this.Sc=this.pc="",this.gd=null,this.Bc=this.fd="",this.Db=this.bh=!1,n instanceof zb){this.Db=n.Db,Ab(this,n.pc);var t=n.Sc;Bb(this),this.Sc=t,t=n.$b,Bb(this),this.$b=t,Cb(this,n.gd),t=n.getPath(),Bb(this),this.fd=t,Db(this,n.Sb.clone()),n=n.Bc,Bb(this),this.Bc=n}else n&&(t=String(n).match(Eb))?(this.Db=!1,Ab(this,t[1]||"",!0),n=t[2]||"",Bb(this),this.Sc=Fb(n),n=t[3]||"",Bb(this),this.$b=Fb(n,!0),Cb(this,t[4]),n=t[5]||"",Bb(this),this.fd=Fb(n,!0),Db(this,t[6]||"",!0),n=t[7]||"",Bb(this),this.Bc=Fb(n)):(this.Db=!1,this.Sb=new Gb(null,this.Db))},Ab=function(n,t,i){Bb(n),n.pc=i?Fb(t,!0):t,n.pc&&(n.pc=n.pc.replace(/:$/,""))},Cb=function(n,t){if(Bb(n),t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.gd=t}else n.gd=null},Db=function(n,t,i){Bb(n),t instanceof Gb?(n.Sb=t,n.Sb.Df(n.Db)):(i||(t=Hb(t,Ib)),n.Sb=new Gb(t,n.Db))},Bb=function(n){if(n.bh)throw Error("Tried to modify a read-only Uri")},Jb=function(n){return n instanceof zb?n.clone():new zb(n)},Fb=function(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""},Hb=function(n,t,i){return typeof n=="string"?(n=encodeURI(n).replace(t,Kb),i&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null},Kb=function(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)},Gb=function(n,t){this.nb=this.Ja=null,this.wb=n||null,this.Db=!!t},Lb=function(n){n.Ja||(n.Ja=new Map,n.nb=0,n.wb&&yb(n.wb,function(t,i){n.add(decodeURIComponent(t.replace(/\+/g," ")),i)}))},Ob=function(n,t){return Lb(n),t=Mb(n,t),n.Ja.has(t)},Mb=function(n,t){return t=String(t),n.Db&&(t=t.toLowerCase()),t},Pb=function(n,t){n!=null&&this.append.apply(this,arguments)},Wb=function(){return new h(null,5,[Qb,!0,Rb,Ua,Sb,!1,Tb,!1,Ub,ob],null)},Zb=function(){Xb=!1,Yb=function(){var n=arguments;return console.log.apply(console,db(n))}},l=function(n){return n!=null&&n!==!1},cc=function(n){return n==null},dc=function(n){return n instanceof Array},gc=function(n){return n==null?!0:n===!1},hc=function(n){return n!=null},Ud=function(n){return aa(n)==="string"},ic=function(n,t){return n[aa(t??null)]?!0:!!n._},jc=function(n){return n==null?null:n.constructor},kc=function(n,t){var i=jc(t);return Error(["No protocol method ",n," defined for type ",l(l(i)?i.$f:i)?i.he:aa(t),": ",t].join(""))},lc=function(n){var t=n.he;return l(t)?t:m.g(n)},mc=function(n){for(var t=n.length,i=Array(t),s=0;s<t;)i[s]=n[s],s+=1;return i},pc=function(n){function t(s,o){return s.push(o),s}var i=[];return nc?nc(t,i,n):oc.call(null,t,i,n)},tc=function(){},uc=function(){},vc=function(n){if(n!=null&&n.Ea!=null)n=n.Ea(n);else{var t=vc[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=vc._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("ICloneable.-clone",n)}return n},wc=function(){},xc=function(n){if(n!=null&&n.ba!=null)n=n.ba(n);else{var t=xc[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=xc._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("ICounted.-count",n)}return n},yc=function(){},zc=function(n){if(n!=null&&n.ka!=null)n=n.ka(n);else{var t=zc[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=zc._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IEmptyableCollection.-empty",n)}return n},Ac=function(){},Bc=function(n,t){if(n!=null&&n.ga!=null)n=n.ga(n,t);else{var i=Bc[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=Bc._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("ICollection.-conj",n)}return n},Cc=function(){},Dc=function(){},Ec=function(n){if(n!=null&&n.va!=null)n=n.va(n);else{var t=Ec[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Ec._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("ISeq.-first",n)}return n},Fc=function(n){if(n!=null&&n.Ba!=null)n=n.Ba(n);else{var t=Fc[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Fc._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("ISeq.-rest",n)}return n},Gc=function(){},Hc=function(n){if(n!=null&&n.xa!=null)n=n.xa(n);else{var t=Hc[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Hc._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("INext.-next",n)}return n},Ic=function(){},Kc=function(){},Lc=function(n,t){if(n!=null&&n.Ua!=null)n=n.Ua(n,t);else{var i=Lc[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=Lc._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("IAssociative.-contains-key?",n)}return n},Mc=function(n,t,i){if(n!=null&&n.ua!=null)n=n.ua(n,t,i);else{var s=Mc[aa(n??null)];if(s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else if(s=Mc._,s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else throw kc("IAssociative.-assoc",n)}return n},Nc=function(n,t){if(n!=null&&n.hc!=null)n=n.hc(n,t);else{var i=Nc[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=Nc._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("IFind.-find",n)}return n},Pc=function(){},Qc=function(n,t){if(n!=null&&n.zb!=null)n=n.zb(n,t);else{var i=Qc[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=Qc._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("IMap.-dissoc",n)}return n},Rc=function(n){if(n!=null&&n.cf!=null)n=n.key;else{var t=Rc[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Rc._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IMapEntry.-key",n)}return n},Sc=function(n){if(n!=null&&n.df!=null)n=n.F;else{var t=Sc[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Sc._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IMapEntry.-val",n)}return n},Tc=function(){},Uc=function(n,t){if(n!=null&&n.ff!=null)n=n.ff(n,t);else{var i=Uc[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=Uc._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("ISet.-disjoin",n)}return n},Vc=function(n){if(n!=null&&n.jc!=null)n=n.jc(n);else{var t=Vc[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Vc._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IStack.-peek",n)}return n},Wc=function(n){if(n!=null&&n.kc!=null)n=n.kc(n);else{var t=Wc[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Wc._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IStack.-pop",n)}return n},Xc=function(){},Yc=function(n,t,i){if(n!=null&&n.Ib!=null)n=n.Ib(n,t,i);else{var s=Yc[aa(n??null)];if(s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else if(s=Yc._,s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else throw kc("IVector.-assoc-n",n)}return n},Zc=function(){},q=function(n){if(n!=null&&n.pb!=null)n=n.pb(n);else{var t=q[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=q._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IDeref.-deref",n)}return n},$c=function(){},ad=function(n){if(n!=null&&n.Y!=null)n=n.Y(n);else{var t=ad[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=ad._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IMeta.-meta",n)}return n},bd=function(n,t){if(n!=null&&n.Z!=null)n=n.Z(n,t);else{var i=bd[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=bd._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("IWithMeta.-with-meta",n)}return n},cd=function(){},dd=function(){},ed=function(n,t,i){if(n!=null&&n.qb!=null)n=n.qb(n,t,i);else{var s=ed[aa(n??null)];if(s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else if(s=ed._,s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else throw kc("IKVReduce.-kv-reduce",n)}return n},fd=function(n,t){if(n!=null&&n.M!=null)n=n.M(n,t);else{var i=fd[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=fd._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("IEquiv.-equiv",n)}return n},gd=function(n){if(n!=null&&n.X!=null)n=n.X(n);else{var t=gd[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=gd._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IHash.-hash",n)}return n},hd=function(){},id=function(n){if(n!=null&&n.aa!=null)n=n.aa(n);else{var t=id[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=id._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("ISeqable.-seq",n)}return n},jd=function(){},kd=function(){},ld=function(){},od=function(){},pd=function(n){if(n!=null&&n.ic!=null)n=n.ic(n);else{var t=pd[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=pd._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IReversible.-rseq",n)}return n},qd=function(n,t){if(n!=null&&n.Yf!=null)n=n.Yf(n,t);else{var i=qd[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=qd._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("IWriter.-write",n)}return n},ae=function(n){if(n!=null&&n.hi!=null)n=n.hi(n);else{var t=ae[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=ae._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IWriter.-flush",n)}return n},rd=function(){},sd=function(n,t,i){if(n!=null&&n.W!=null)n=n.W(n,t,i);else{var s=sd[aa(n??null)];if(s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else if(s=sd._,s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else throw kc("IPrintWithWriter.-pr-writer",n)}return n},qf=function(){},rf=function(n){if(n!=null&&n.li!=null)n=n.li(n);else{var t=rf[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=rf._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IPending.-realized?",n)}return n},td=function(n,t,i){if(n!=null&&n.vd!=null)n.vd(n,t,i);else{var s=td[aa(n??null)];if(s!=null)s.l?s.l(n,t,i):s.call(null,n,t,i);else if(s=td._,s!=null)s.l?s.l(n,t,i):s.call(null,n,t,i);else throw kc("IWatchable.-add-watch",n)}},vd=function(n,t){if(n!=null&&n.wd!=null)n.wd(n,t);else{var i=vd[aa(n??null)];if(i!=null)i.h?i.h(n,t):i.call(null,n,t);else if(i=vd._,i!=null)i.h?i.h(n,t):i.call(null,n,t);else throw kc("IWatchable.-remove-watch",n)}},wd=function(n){if(n!=null&&n.Yc!=null)n=n.Yc(n);else{var t=wd[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=wd._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IEditableCollection.-as-transient",n)}return n},xd=function(n,t){if(n!=null&&n.ad!=null)n=n.ad(n,t);else{var i=xd[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=xd._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("ITransientCollection.-conj!",n)}return n},yd=function(n){if(n!=null&&n.ud!=null)n=n.ud(n);else{var t=yd[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=yd._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("ITransientCollection.-persistent!",n)}return n},zd=function(n,t,i){if(n!=null&&n.$c!=null)n=n.$c(n,t,i);else{var s=zd[aa(n??null)];if(s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else if(s=zd._,s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else throw kc("ITransientAssociative.-assoc!",n)}return n},Ad=function(){},Dd=function(n,t){if(n!=null&&n.yb!=null)n=n.yb(n,t);else{var i=Dd[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=Dd._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("IComparable.-compare",n)}return n},Ed=function(n){if(n!=null&&n.Ze!=null)n=n.Ze(n);else{var t=Ed[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Ed._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IChunk.-drop-first",n)}return n},Fd=function(n){if(n!=null&&n.qd!=null)n=n.qd(n);else{var t=Fd[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Fd._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IChunkedSeq.-chunked-first",n)}return n},Gd=function(n){if(n!=null&&n.zc!=null)n=n.zc(n);else{var t=Gd[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Gd._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IChunkedSeq.-chunked-rest",n)}return n},Hd=function(n){if(n!=null&&n.rd!=null)n=n.rd(n);else{var t=Hd[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Hd._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("INamed.-name",n)}return n},Id=function(n){if(n!=null&&n.sd!=null)n=n.sd(n);else{var t=Id[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Id._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("INamed.-namespace",n)}return n},Jd=function(n,t){if(n!=null&&n.$a!=null)n=n.$a(n,t);else{var i=Jd[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=Jd._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("IReset.-reset!",n)}return n},Md=function(){},Nd=function(n){if(n!=null&&n.Fa!=null)n=n.Fa(n);else{var t=Nd[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Nd._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IIterable.-iterator",n)}return n},Od=function(n){this.wh=n,this.A=1073741824,this.N=0},Pd=function(n){var t=new Pb,i=new Od(t);return n.W(null,i,Wb()),i.hi(null),m.g(t)},Rd=function(n){return n=Qd(n|0,-862048943),Qd(n<<15|n>>>-15,461845907)},Sd=function(n,t){return n=(n|0)^(t|0),Qd(n<<13|n>>>-13,5)+-430675100|0},Td=function(n,t){return n=(n|0)^t,n=Qd(n^n>>>16,-2048144789),n=Qd(n^n>>>13,-1028477387),n^n>>>16},Xd=function(n){if(255<Vd&&(Wd={},Vd=0),n==null)return 0;var t=Wd[n];if(typeof t=="number")n=t;else{e:if(n!=null)if(t=n.length,0<t)for(var i=0,s=0;;)if(i<t)s=Qd(31,s)+n.charCodeAt(i),i+=1;else{t=s;break e}else t=0;else t=0;Wd[n]=t,Vd+=1,n=t}return n},$d=function(n){if(n!=null&&(n.A&4194304||Zd===n.bf))return n.X(null)^0;if(typeof n=="number"){if(isFinite(n))return Math.floor(n)%2147483647;switch(n){case 1/0:return 2146435072;case-1/0:return-1048576;default:return 2146959360}}else return n===!0?n=1231:n===!1?n=1237:typeof n=="string"?(n=Xd(n),n=n===0?n:Td(Sd(0,Rd(n)),4)):n=n instanceof Date?n.valueOf()^0:n==null?0:gd(n)^0,n},be=function(n,t){return t instanceof n},sf=function(n){var t=n.name;e:for(var i=1,s=0;;)if(i<t.length)s=Sd(s,Rd(t.charCodeAt(i-1)|t.charCodeAt(i)<<16)),i+=2;else{i=s;break e}return t=Td((t.length&1)===1?i^Rd(t.charCodeAt(t.length-1)):i,Qd(2,t.length)),n=Xd(n.Va),t^n+2654435769+(t<<6)+(t>>2)},ce=function(n,t){if(n.Za===t.Za)return 0;var i=gc(n.Va);return l(i&&t.Va)?-1:l(n.Va)?gc(t.Va)?1:(i=eb(n.Va,t.Va),i===0?eb(n.name,t.name):i):eb(n.name,t.name)},r=function(n,t,i,s,o){this.Va=n,this.name=t,this.Za=i,this.Uc=s,this.Xb=o,this.A=2154168321,this.N=4096},gg=function(n,t,i){this.F=n,this.ii=t,this.Xb=i,this.A=6717441,this.N=0},de=function(n){return n!=null?n.N&131072||Zd===n.Gh?!0:n.N?!1:ic(Md,n):ic(Md,n)},w=function(n){if(n==null)return null;if(n!=null&&(n.A&8388608||Zd===n.Wf))return n.aa(null);if(dc(n)||typeof n=="string")return n.length===0?null:new u(n,0,null);if(n!=null&&n[ee]!=null)return n=Xa(n,ee).call(n),fe.g?fe.g(n):fe.call(null,n);if(ic(hd,n))return id(n);throw Error([m.g(n)," is not ISeqable"].join(""))},z=function(n){return n==null?null:n!=null&&(n.A&64||Zd===n.Zc)?n.va(null):(n=w(n),n==null?null:Ec(n))},he=function(n){return n!=null&&(n!=null&&(n.A&64||Zd===n.Zc)||(n=w(n)))?n.Ba(null):ge},C=function(n){return n==null?null:n!=null&&(n.A&128||Zd===n.td)?n.xa(null):w(he(n))},ie=function(n){this.ea=n},je=function(n){return new ie(w(n))},ke=function(n,t){this.value=n,this.dd=t,this.Ne=null,this.A=8388672,this.N=0},fe=function(n){var t=n.next();return l(t.done)?null:new ke(t.value,n)},oe=function(n){var t=0,i=1;for(n=w(n);;)if(n!=null)t+=1,i=Qd(31,i)+$d(z(n))|0,n=C(n);else return Td(Sd(0,Rd(i)),t)},pe=function(n){var t=0,i=0;for(n=w(n);;)if(n!=null)t+=1,i=i+$d(z(n))|0,n=C(n);else return Td(Sd(0,Rd(i)),t)},qe=function(n){return n+1},re=function(n){this.F=n,this.A=32768,this.N=0},se=function(n){return n instanceof re},ue=function(n){return se(n)?te.g?te.g(n):te.call(null,n):n},te=function(n){return q(n)},ve=function(n,t){var i=n.ba(null);if(i===0)return t.G?t.G():t.call(null);for(var s=n.S(null,0),o=1;;)if(o<i){var f=n.S(null,o);if(s=t.h?t.h(s,f):t.call(null,s,f),se(s))return q(s);o+=1}else return s},we=function(n,t,i){var s=n.ba(null),o=i;for(i=0;;)if(i<s){var f=n.S(null,i);if(o=t.h?t.h(o,f):t.call(null,o,f),se(o))return q(o);i+=1}else return o},xe=function(n,t){var i=n.length;if(n.length===0)return t.G?t.G():t.call(null);for(var s=n[0],o=1;;)if(o<i){var f=n[o];if(s=t.h?t.h(s,f):t.call(null,s,f),se(s))return q(s);o+=1}else return s},ye=function(n,t,i){var s=n.length,o=i;for(i=0;;)if(i<s){var f=n[i];if(o=t.h?t.h(o,f):t.call(null,o,f),se(o))return q(o);i+=1}else return o},ze=function(n,t,i,s){for(var o=n.length;;)if(s<o){var f=n[s];if(i=t.h?t.h(i,f):t.call(null,i,f),se(i))return q(i);s+=1}else return i},Ae=function(n){return n!=null?n.A&2||Zd===n.Fg?!0:n.A?!1:ic(wc,n):ic(wc,n)},Be=function(n){return n!=null?n.A&16||Zd===n.Uf?!0:n.A?!1:ic(Cc,n):ic(Cc,n)},Ge=function(n,t,i){var s=D.g?D.g(n):D.call(null,n);if(i>=s)return-1;for(!(0<i)&&0>i&&(i+=s,i=0>i?0:i);;)if(i<s){if(E.h(Ee?Ee(n,i):Fe.call(null,n,i),t))return i;i+=1}else return-1},He=function(n,t,i){var s=D.g?D.g(n):D.call(null,n);if(s===0)return-1;for(0<i?(--s,i=s<i?s:i):i=0>i?s+i:i;;)if(0<=i){if(E.h(Ee?Ee(n,i):Fe.call(null,n,i),t))return i;--i}else return-1},Ie=function(n,t){this.o=n,this.J=t},u=function(n,t,i){this.o=n,this.J=t,this.D=i,this.A=166592766,this.N=139264},F=function(n){return 0<n.length?new u(n,0,null):null},Je=function(n,t,i){this.pd=n,this.J=t,this.D=i,this.A=32374990,this.N=8192},Ke=function(n){return z(C(n))},Le=function(n){for(;;){var t=C(n);if(t!=null)n=t;else return z(n)}},Ne=function(n){return n==null?null:n!=null&&(n.A&4||Zd===n.Hg)?n.ka(null):(n!=null?n.A&4||Zd===n.Hg||!n.A&&ic(yc,n):ic(yc,n))?zc(n):null},D=function(n){if(n!=null)if(n!=null&&(n.A&2||Zd===n.Fg))n=n.ba(null);else if(dc(n))n=n.length;else if(typeof n=="string")n=n.length;else if(n!=null&&(n.A&8388608||Zd===n.Wf))e:{n=w(n);for(var t=0;;){if(Ae(n)){n=t+xc(n);break e}n=C(n),t+=1}}else n=xc(n);else n=0;return n},Pe=function(n,t,i){for(;;){if(n==null)return i;if(t===0)return w(n)?z(n):i;if(Be(n))return Oe(n,t,i);if(w(n))n=C(n),--t;else return i}},Fe=function(n){switch(arguments.length){case 2:return Ee(arguments[0],arguments[1]);case 3:return I(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}},Ee=function(n,t){if(typeof t!="number")throw Error("Index argument to nth must be a number");if(n==null)return n;if(n!=null&&(n.A&16||Zd===n.Uf))return n.S(null,t);if(dc(n)){if(-1<t&&t<n.length)return n[t|0];throw Error("Index out of bounds")}if(typeof n=="string"){if(-1<t&&t<n.length)return n.charAt(t|0);throw Error("Index out of bounds")}if(n!=null&&(n.A&64||Zd===n.Zc)||n!=null&&(n.A&16777216||Zd===n.ef)){if(0>t)throw Error("Index out of bounds");e:for(;;){if(n==null)throw Error("Index out of bounds");if(t===0){if(w(n)){n=z(n);break e}throw Error("Index out of bounds")}if(Be(n)){n=Oe(n,t);break e}if(w(n))n=C(n),--t;else throw Error("Index out of bounds")}return n}if(ic(Cc,n))return Oe(n,t);throw Error(["nth not supported on this type ",m.g(lc(jc(n)))].join(""))},I=function(n,t,i){if(typeof t!="number")throw Error("Index argument to nth must be a number.");if(n==null)return i;if(n!=null&&(n.A&16||Zd===n.Uf))return n.Ca(null,t,i);if(dc(n))return-1<t&&t<n.length?n[t|0]:i;if(typeof n=="string")return-1<t&&t<n.length?n.charAt(t|0):i;if(n!=null&&(n.A&64||Zd===n.Zc)||n!=null&&(n.A&16777216||Zd===n.ef))return 0>t?i:Pe(n,t,i);if(ic(Cc,n))return Oe(n,t,i);throw Error(["nth not supported on this type ",m.g(lc(jc(n)))].join(""))},Qe=function(n){var t=typeof n=="function";return t||(n!=null?Zd===n.Dg?!0:n.ie?!1:ic(tc,n):ic(tc,n))},Re=function(n,t){this.R=n,this.D=t,this.A=393217,this.N=0},Se=function(n,t){return typeof n=="function"?new Re(n,t):n==null?null:bd(n,t)},Te=function(n){var t=n!=null;return t&&(n!=null?n.A&131072||Zd===n.Og||!n.A&&ic($c,n):ic($c,n))?ad(n):null},Ue=function(n){return n==null?null:Vc(n)},Ve=function(n){return n==null||gc(w(n))},We=function(n){return n==null?!1:n!=null?n.A&8||Zd===n.Dh?!0:n.A?!1:ic(Ac,n):ic(Ac,n)},Xe=function(n){return n==null?!1:n!=null?n.A&4096||Zd===n.Qg?!0:n.A?!1:ic(Tc,n):ic(Tc,n)},Ye=function(n){return n!=null?n.A&16777216||Zd===n.ef?!0:n.A?!1:ic(jd,n):ic(jd,n)},Ze=function(n){return n==null?!1:n!=null?n.A&1024||Zd===n.Ng?!0:n.A?!1:ic(Pc,n):ic(Pc,n)},bf=function(n){return n!=null?n.A&67108864||Zd===n.Kh?!0:n.A?!1:ic(ld,n):ic(ld,n)},cf=function(n){return n!=null?n.A&16384||Zd===n.Mh?!0:n.A?!1:ic(Xc,n):ic(Xc,n)},df=function(n){return n!=null?!!(n.N&512||Zd===n.Ch):!1},ef=function(n,t,i,s,o){for(;;){if(o===0)return i;i[s]=n[t],s+=1,--o,t+=1}},mh=function(n){return n===!1},ff=function(n){return n==null?!1:n!=null?n.A&64||Zd===n.Zc?!0:n.A?!1:ic(Dc,n):ic(Dc,n)},gf=function(n){return n==null?!1:n!==!1},hf=function(n){var t=Qe(n);return t||(n!=null?n.A&1||Zd===n.Fh?!0:n.A?!1:ic(uc,n):ic(uc,n))},jf=function(n){return typeof n=="number"&&!isNaN(n)&&n!==1/0&&parseFloat(n)===parseInt(n,10)},lf=function(n,t){return n!=null&&(n.A&512||Zd===n.Eg)?n.Ua(null,t):ic(Kc,n)?Lc(n,t):J.l(n,t,kf)!==kf},mf=function(n,t){if(n===t)return 0;if(n==null)return-1;if(t==null)return 1;if(typeof n=="number"){if(typeof t=="number")return eb(n,t);throw Error(["Cannot compare ",m.g(n)," to ",m.g(t)].join(""))}if(n!=null?n.N&2048||Zd===n.Zb||!n.N&&ic(Ad,n):ic(Ad,n))return Dd(n,t);if(typeof n!="string"&&!dc(n)&&n!==!0&&n!==!1||jc(n)!==jc(t))throw Error(["Cannot compare ",m.g(n)," to ",m.g(t)].join(""));return eb(n,t)},nf=function(n,t){var i=D(n),s=D(t);if(i<s)n=-1;else if(i>s)n=1;else if(i===0)n=0;else e:for(s=0;;){var o=mf(Ee(n,s),Ee(t,s));if(o===0&&s+1<i)s+=1;else{n=o;break e}}return n},of=function(n){return E.h(n,mf)?mf:function(t,i){var s=n.h?n.h(t,i):n.call(null,t,i);return typeof s=="number"?s:l(s)?-1:l(n.h?n.h(i,t):n.call(null,i,t))?1:0}},xf=function(n){switch(arguments.length){case 2:return tf(arguments[0],arguments[1]);case 3:return wf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}},tf=function(n,t){var i=w(t);return i?(t=z(i),i=C(i),nc?nc(n,t,i):oc.call(null,n,t,i)):n.G?n.G():n.call(null)},wf=function(n,t,i){for(i=w(i);;)if(i){var s=z(i);if(t=n.h?n.h(t,s):n.call(null,t,s),se(t))return q(t);i=C(i)}else return t},yf=function(n,t){if(n=Nd(n),l(n.na()))for(var i=n.next();;)if(n.na()){var s=n.next();if(i=t.h?t.h(i,s):t.call(null,i,s),se(i))return q(i)}else return i;else return t.G?t.G():t.call(null)},zf=function(n,t,i){for(n=Nd(n);;)if(n.na()){var s=n.next();if(i=t.h?t.h(i,s):t.call(null,i,s),se(i))return q(i)}else return i},oc=function(n){switch(arguments.length){case 2:return Af(arguments[0],arguments[1]);case 3:return nc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}},Af=function(n,t){return t!=null&&(t.A&524288||Zd===t.Pg)?t.ya(null,n):dc(t)||typeof t=="string"?xe(t,n):ic(cd,t)?Bf(t,n):de(t)?yf(t,n):tf(n,t)},nc=function(n,t,i){return i!=null&&(i.A&524288||Zd===i.Pg)?i.za(null,n,t):dc(i)||typeof i=="string"?ye(i,n,t):ic(cd,i)?Bf(i,n,t):de(i)?zf(i,n,t):wf(n,t,i)},Cf=function(n,t,i){return i!=null?ed(i,n,t):t},Df=function(n){return n},Ef=function(n){return function(){function t(f,d){return n.h?n.h(f,d):n.call(null,f,d)}function i(f){return Df.g?Df.g(f):Df.call(null,f)}function s(){return n.G?n.G():n.call(null)}var o=null;return o=function(f,d){switch(arguments.length){case 0:return s.call(this);case 1:return i.call(this,f);case 2:return t.call(this,f,d)}throw Error("Invalid arity: "+arguments.length)},o.G=s,o.g=i,o.h=t,o}()},Ff=function(n,t,i,s){return n=n.g?n.g(t):n.call(null,t),i=nc(n,i,s),n.g?n.g(i):n.call(null,i)},nh=function(n){if(typeof n=="number")return String.fromCharCode(n);if(typeof n=="string"&&n.length===1)return n;throw Error("Argument to char must be a character or number")},Gf=function(n){return 0<=n?Math.floor(n):Math.ceil(n)},Hf=function(n){return Gf(n)},If=function(n,t){return(n%t+t)%t},Jf=function(n,t){return Gf((n-n%t)/t)},zj=function(n,t){return n-t*Jf(n,t)},Kf=function(n){return n-=n>>1&1431655765,n=(n&858993459)+(n>>2&858993459),16843009*(n+(n>>4)&252645135)>>24},ok=function(n){switch(arguments.length){case 1:return!0;case 2:return fd(arguments[0],arguments[1]);default:for(var t=[],i=arguments.length,s=0;s<i;)t.push(arguments[s]),s+=1;e:for(i=arguments[0],s=arguments[1],t=new u(t.slice(2),0,null);;)if(i===s)if(C(t))i=s,s=z(t),t=C(t);else{i=s===z(t);break e}else{i=!1;break e}return i}},Ak=function(n,t){return fd(n,t)},Ck=function(n){return n===0},Lf=function(n,t){if(Ye(t))if(Ae(n)&&Ae(t)&&D(n)!==D(t))n=!1;else e:for(n=w(n),t=w(t);;){if(n==null){n=t==null;break e}if(t!=null&&E.h(z(n),z(t)))n=C(n),t=C(t);else{n=!1;break e}}else n=null;return gf(n)},Mf=function(n,t,i,s,o){this.D=n,this.first=t,this.Tb=i,this.count=s,this.C=o,this.A=65937646,this.N=8192},Nf=function(n){return n!=null?n.A&33554432||Zd===n.Ih?!0:n.A?!1:ic(kd,n):ic(kd,n)},Of=function(n){this.D=n,this.A=65937614,this.N=8192},Rf=function(n){return(n!=null?n.A&134217728||Zd===n.Lh||!n.A&&ic(od,n):ic(od,n))?(n=pd(n))?n:ge:nc(Qf,ge,n)},Sf=function(n,t,i,s){this.D=n,this.first=t,this.Tb=i,this.C=s,this.A=65929452,this.N=8192},Tf=function(n,t){return t==null?new Mf(null,n,null,1,null):t!=null&&(t.A&64||Zd===t.Zc)?new Sf(null,n,t,null):new Sf(null,n,w(t),null)},Uf=function(n,t){if(n.U===t.U)return 0;var i=gc(n.Va);return l(i&&t.Va)?-1:l(n.Va)?gc(t.Va)?1:(i=eb(n.Va,t.Va),i===0?eb(n.name,t.name):i):eb(n.name,t.name)},K=function(n,t,i,s){this.Va=n,this.name=t,this.U=i,this.Uc=s,this.A=2153775105,this.N=4096},Vf=function(n,t){return n===t?!0:n instanceof K&&t instanceof K?n.U===t.U:!1},Wf=function(n){if(n!=null&&(n.N&4096||Zd===n.Vf))return n.sd(null);throw Error(["Doesn't support namespace: ",m.g(n)].join(""))},Xf=function(n){var t=n instanceof K;return t?(n=Wf(n),n=l(n)?!0:n):n=t,gf(n)},Yf=function(n,t,i,s){this.D=n,this.Cd=t,this.ea=i,this.C=s,this.A=32374988,this.N=1},Zf=function(n){return n.Cd!=null&&(n.ea=n.Cd.G?n.Cd.G():n.Cd.call(null),n.Cd=null),n.ea},$f=function(n){this.ha=n,this.end=0,this.A=2,this.N=0},ag=function(n){return new $f(Array(n))},bg=function(n,t,i){this.o=n,this.Qa=t,this.end=i,this.A=524306,this.N=0},cg=function(n,t,i,s){this.fa=n,this.Ob=t,this.D=i,this.C=s,this.A=31850732,this.N=1536},dg=function(n,t){return xc(n)===0?t:new cg(n,t,null,null)},eg=function(n,t){n.add(t)},pf=function(n){var t=[];for(n=w(n);;)if(n!=null)t.push(z(n)),n=C(n);else return t},fg=function(n,t){if(Ae(t))return D(t);var i=0;for(t=w(t);;)if(t!=null&&i<n)i+=1,t=C(t);else return i},Jk=function(n,t,i){return zd(n,t,i)},hg=function(n,t,i){var s=w(i);if(t===0)return n.G?n.G():n.call(null);i=Ec(s);var o=Fc(s);if(t===1)return n.g?n.g(i):n.call(null,i);s=Ec(o);var f=Fc(o);if(t===2)return n.h?n.h(i,s):n.call(null,i,s);o=Ec(f);var d=Fc(f);if(t===3)return n.l?n.l(i,s,o):n.call(null,i,s,o);f=Ec(d);var p=Fc(d);if(t===4)return n.K?n.K(i,s,o,f):n.call(null,i,s,o,f);d=Ec(p);var v=Fc(p);if(t===5)return n.O?n.O(i,s,o,f,d):n.call(null,i,s,o,f,d);p=Ec(v);var _=Fc(v);if(t===6)return n.Ka?n.Ka(i,s,o,f,d,p):n.call(null,i,s,o,f,d,p);v=Ec(_);var k=Fc(_);if(t===7)return n.Wa?n.Wa(i,s,o,f,d,p,v):n.call(null,i,s,o,f,d,p,v);_=Ec(k);var P=Fc(k);if(t===8)return n.Ra?n.Ra(i,s,o,f,d,p,v,_):n.call(null,i,s,o,f,d,p,v,_);k=Ec(P);var L=Fc(P);if(t===9)return n.mb?n.mb(i,s,o,f,d,p,v,_,k):n.call(null,i,s,o,f,d,p,v,_,k);P=Ec(L);var G=Fc(L);if(t===10)return n.ab?n.ab(i,s,o,f,d,p,v,_,k,P):n.call(null,i,s,o,f,d,p,v,_,k,P);L=Ec(G);var Z=Fc(G);if(t===11)return n.bb?n.bb(i,s,o,f,d,p,v,_,k,P,L):n.call(null,i,s,o,f,d,p,v,_,k,P,L);G=Ec(Z);var W=Fc(Z);if(t===12)return n.cb?n.cb(i,s,o,f,d,p,v,_,k,P,L,G):n.call(null,i,s,o,f,d,p,v,_,k,P,L,G);Z=Ec(W);var j=Fc(W);if(t===13)return n.eb?n.eb(i,s,o,f,d,p,v,_,k,P,L,G,Z):n.call(null,i,s,o,f,d,p,v,_,k,P,L,G,Z);W=Ec(j);var H=Fc(j);if(t===14)return n.fb?n.fb(i,s,o,f,d,p,v,_,k,P,L,G,Z,W):n.call(null,i,s,o,f,d,p,v,_,k,P,L,G,Z,W);j=Ec(H);var me=Fc(H);if(t===15)return n.gb?n.gb(i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j):n.call(null,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j);H=Ec(me);var $e=Fc(me);if(t===16)return n.hb?n.hb(i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H):n.call(null,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H);me=Ec($e);var De=Fc($e);if(t===17)return n.ib?n.ib(i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me):n.call(null,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me);$e=Ec(De);var le=Fc(De);if(t===18)return n.jb?n.jb(i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e):n.call(null,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e);if(De=Ec(le),le=Fc(le),t===19)return n.kb?n.kb(i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De):n.call(null,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De);var Ce=Ec(le);if(Fc(le),t===20)return n.lb?n.lb(i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De,Ce):n.call(null,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De,Ce);throw Error("Only up to 20 arguments supported on functions")},ig=function(n){return n!=null&&(n.A&128||Zd===n.td)?n.xa(null):w(he(n))},kg=function(n,t,i){return i==null?n.g?n.g(t):n.call(n,t):jg(n,t,Ec(i),ig(i))},jg=function(n,t,i,s){return s==null?n.h?n.h(t,i):n.call(n,t,i):lg(n,t,i,Ec(s),ig(s))},lg=function(n,t,i,s,o){return o==null?n.l?n.l(t,i,s):n.call(n,t,i,s):mg(n,t,i,s,Ec(o),ig(o))},mg=function(n,t,i,s,o,f){if(f==null)return n.K?n.K(t,i,s,o):n.call(n,t,i,s,o);var d=Ec(f),p=C(f);if(p==null)return n.O?n.O(t,i,s,o,d):n.call(n,t,i,s,o,d);f=Ec(p);var v=C(p);if(v==null)return n.Ka?n.Ka(t,i,s,o,d,f):n.call(n,t,i,s,o,d,f);p=Ec(v);var _=C(v);if(_==null)return n.Wa?n.Wa(t,i,s,o,d,f,p):n.call(n,t,i,s,o,d,f,p);v=Ec(_);var k=C(_);if(k==null)return n.Ra?n.Ra(t,i,s,o,d,f,p,v):n.call(n,t,i,s,o,d,f,p,v);_=Ec(k);var P=C(k);if(P==null)return n.mb?n.mb(t,i,s,o,d,f,p,v,_):n.call(n,t,i,s,o,d,f,p,v,_);k=Ec(P);var L=C(P);if(L==null)return n.ab?n.ab(t,i,s,o,d,f,p,v,_,k):n.call(n,t,i,s,o,d,f,p,v,_,k);P=Ec(L);var G=C(L);if(G==null)return n.bb?n.bb(t,i,s,o,d,f,p,v,_,k,P):n.call(n,t,i,s,o,d,f,p,v,_,k,P);L=Ec(G);var Z=C(G);if(Z==null)return n.cb?n.cb(t,i,s,o,d,f,p,v,_,k,P,L):n.call(n,t,i,s,o,d,f,p,v,_,k,P,L);G=Ec(Z);var W=C(Z);if(W==null)return n.eb?n.eb(t,i,s,o,d,f,p,v,_,k,P,L,G):n.call(n,t,i,s,o,d,f,p,v,_,k,P,L,G);Z=Ec(W);var j=C(W);if(j==null)return n.fb?n.fb(t,i,s,o,d,f,p,v,_,k,P,L,G,Z):n.call(n,t,i,s,o,d,f,p,v,_,k,P,L,G,Z);W=Ec(j);var H=C(j);if(H==null)return n.gb?n.gb(t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W):n.call(n,t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W);j=Ec(H);var me=C(H);if(me==null)return n.hb?n.hb(t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W,j):n.call(n,t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W,j);H=Ec(me);var $e=C(me);if($e==null)return n.ib?n.ib(t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W,j,H):n.call(n,t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W,j,H);me=Ec($e);var De=C($e);if(De==null)return n.jb?n.jb(t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W,j,H,me):n.call(n,t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W,j,H,me);$e=Ec(De);var le=C(De);if(le==null)return n.kb?n.kb(t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W,j,H,me,$e):n.call(n,t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W,j,H,me,$e);if(De=Ec(le),le=C(le),le==null)return n.lb?n.lb(t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De):n.call(n,t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De);for(t=[t,i,s,o,d,f,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De],i=le;i;)t.push(Ec(i)),i=C(i);return n.apply(n,t)},M=function(n){return n!=null&&(n.A&64||Zd===n.Zc)?C(n)?ng(pf(n)):w(n)?z(n):og:n},pg=function(n){return w(n)?n:null},qg=function(n){this.lh=n,this.A=393216,this.N=0},rg=function(){return new qg(og)},sg=function(n){this.ea=n,this.J=0},tg=function(n){this.o=n,this.J=0},vg=function(n){this.kd=ug,this.ub=n},Ag=function(n){if(de(n))return Nd(n);if(n==null)return rg();if(typeof n=="string")return new sg(n);if(dc(n))return new tg(n);var t=n==null;if(t||(t=(t=n!=null?n.A&8388608||Zd===n.Wf?!0:n.A?!1:ic(hd,n):ic(hd,n))?t:dc(n)||typeof n=="string"),t)return new vg(n);throw Error(["Cannot create iterator from ",m.g(n)].join(""))},Bg=function(n){this.Ie=n},Cg=function(n){this.F=n},Dg=function(){},Gg=function(n){this.buffer=Eg,this.ub=Fg,this.kf=!1,this.Wb=null,this.Ef=n,this.nh=!1},Hg=function(n,t){var i=new Gg(t);return i.Wb=function(){var s=function(){function o(d,p){return i.buffer=i.buffer.add(p),d}var f=null;return f=function(d,p){switch(arguments.length){case 0:return null;case 1:return d;case 2:return o.call(this,d,p)}throw Error("Invalid arity: "+arguments.length)},f.G=function(){return null},f.g=function(d){return d},f.h=o,f}();return n.g?n.g(s):n.call(null,s)}(),i},Ig=function(n,t){for(;;){if(w(t)==null)return!0;var i=z(t);if(i=n.g?n.g(i):n.call(null,i),l(i))t=C(t);else return!1}},Jg=function(n,t){for(;;)if(t=w(t)){var i=z(t);if(i=n.g?n.g(i):n.call(null,i),l(i))return i;t=C(t)}else return null},$k=function(n){if(jf(n))return(n&1)===0;throw Error(["Argument must be an integer: ",m.g(n)].join(""))},Lg=function(n){return function(){function t(d,p){return gc(n.h?n.h(d,p):n.call(null,d,p))}function i(d){return gc(n.g?n.g(d):n.call(null,d))}function s(){return gc(n.G?n.G():n.call(null))}var o=null,f=function(){function d(v,_,k){var P=null;if(2<arguments.length){P=0;for(var L=Array(arguments.length-2);P<L.length;)L[P]=arguments[P+2],++P;P=new u(L,0,null)}return p.call(this,v,_,P)}function p(v,_,k){return gc(Kg.K(n,v,_,k))}return d.v=2,d.B=function(v){var _=z(v);v=C(v);var k=z(v);return v=he(v),p(_,k,v)},d.j=p,d}();return o=function(d,p,v){switch(arguments.length){case 0:return s.call(this);case 1:return i.call(this,d);case 2:return t.call(this,d,p);default:var _=null;if(2<arguments.length){_=0;for(var k=Array(arguments.length-2);_<k.length;)k[_]=arguments[_+2],++_;_=new u(k,0,null)}return f.j(d,p,_)}},o.v=2,o.B=f.B,o.G=s,o.g=i,o.h=t,o.j=f.j,o}()},Mg=function(n){return function(){function t(i){if(0<arguments.length)for(var s=0,o=Array(arguments.length-0);s<o.length;)o[s]=arguments[s+0],++s;return n}return t.v=0,t.B=function(i){return w(i),n},t.j=function(){return n},t}()},Pg=function(){var n=Ng,t=Og;return function(){function i(p,v,_){return p=p??t,n.l?n.l(p,v,_):n.call(null,p,v,_)}function s(p,v){return p=p??t,n.h?n.h(p,v):n.call(null,p,v)}function o(p){return p=p??t,n.g?n.g(p):n.call(null,p)}var f=null,d=function(){function p(_,k,P,L){var G=null;if(3<arguments.length){G=0;for(var Z=Array(arguments.length-3);G<Z.length;)Z[G]=arguments[G+3],++G;G=new u(Z,0,null)}return v.call(this,_,k,P,G)}function v(_,k,P,L){return Kg.O(n,_??t,k,P,L)}return p.v=3,p.B=function(_){var k=z(_);_=C(_);var P=z(_);_=C(_);var L=z(_);return _=he(_),v(k,P,L,_)},p.j=v,p}();return f=function(p,v,_,k){switch(arguments.length){case 1:return o.call(this,p);case 2:return s.call(this,p,v);case 3:return i.call(this,p,v,_);default:var P=null;if(3<arguments.length){P=0;for(var L=Array(arguments.length-3);P<L.length;)L[P]=arguments[P+3],++P;P=new u(L,0,null)}return d.j(p,v,_,P)}},f.v=3,f.B=d.B,f.g=o,f.h=s,f.l=i,f.j=d.j,f}()},Qg=function(n,t){return function i(s,o){return new Yf(null,function(){var f=w(o);if(f){if(df(f)){for(var d=Fd(f),p=D(d),v=ag(p),_=0;_<p;)eg(v,function(){var k=s+_,P=Oe(d,_);return n.h?n.h(k,P):n.call(null,k,P)}()),_+=1;return dg(v.fa(),i(s+p,Gd(f)))}return Tf(function(){var k=z(f);return n.h?n.h(s,k):n.call(null,s,k)}(),i(s+1,he(f)))}return null},null,null)}(0,t)},Rg=function(n,t){return new Yf(null,function(){var i=w(t);if(i){if(df(i)){for(var s=Fd(i),o=D(s),f=ag(o),d=0;d<o;){var p=function(){var v=Oe(s,d);return n.g?n.g(v):n.call(null,v)}();p!=null&&f.add(p),d+=1}return dg(f.fa(),Rg(n,Gd(i)))}return o=function(){var v=z(i);return n.g?n.g(v):n.call(null,v)}(),o==null?Rg(n,he(i)):Tf(o,Rg(n,he(i)))}return null},null,null)},Sg=function(n){this.state=n,this.Na=this.If=this.D=null,this.N=16386,this.A=6455296},Tg=function(n){return new Sg(n)},N=function(n,t){if(n instanceof Sg){var i=n.If;if(i!=null&&!l(i.g?i.g(t):i.call(null,t)))throw Error("Validator rejected reference state");return i=n.state,n.state=t,n.Na!=null&&n.fe(i,t),t}return Jd(n,t)},Ug=function(n,t){return function i(s,o){return new Yf(null,function(){var f=w(o);if(f){if(df(f)){for(var d=Fd(f),p=D(d),v=ag(p),_=0;_<p;){var k=function(){var P=s+_,L=Oe(d,_);return n.h?n.h(P,L):n.call(null,P,L)}();k!=null&&v.add(k),_+=1}return dg(v.fa(),i(s+p,Gd(f)))}return p=function(){var P=z(f);return n.h?n.h(s,P):n.call(null,s,P)}(),p==null?i(s+1,he(f)):Tf(p,i(s+1,he(f)))}return null},null,null)}(0,t)},cl=function(n,t,i){return function(){function s(v,_,k){var P=n.g?n.g(v):n.call(null,v);return l(P)||(P=n.g?n.g(_):n.call(null,_),l(P))||(P=n.g?n.g(k):n.call(null,k),l(P))||(P=t.g?t.g(v):t.call(null,v),l(P))||(P=t.g?t.g(_):t.call(null,_),l(P))||(P=t.g?t.g(k):t.call(null,k),l(P))?P:(v=i.g?i.g(v):i.call(null,v),l(v)?v:(_=i.g?i.g(_):i.call(null,_),l(_)?_:i.g?i.g(k):i.call(null,k)))}function o(v,_){var k=n.g?n.g(v):n.call(null,v);return l(k)||(k=n.g?n.g(_):n.call(null,_),l(k))||(k=t.g?t.g(v):t.call(null,v),l(k))||(k=t.g?t.g(_):t.call(null,_),l(k))?k:(v=i.g?i.g(v):i.call(null,v),l(v)?v:i.g?i.g(_):i.call(null,_))}function f(v){var _=n.g?n.g(v):n.call(null,v);return l(_)?_:(_=t.g?t.g(v):t.call(null,v),l(_)?_:i.g?i.g(v):i.call(null,v))}var d=null,p=function(){function v(k,P,L,G){var Z=null;if(3<arguments.length){Z=0;for(var W=Array(arguments.length-3);Z<W.length;)W[Z]=arguments[Z+3],++Z;Z=new u(W,0,null)}return _.call(this,k,P,L,Z)}function _(k,P,L,G){return k=d.l(k,P,L),l(k)?k:Jg(function(Z){var W=n.g?n.g(Z):n.call(null,Z);return l(W)?W:(W=t.g?t.g(Z):t.call(null,Z),l(W)?W:i.g?i.g(Z):i.call(null,Z))},G)}return v.v=3,v.B=function(k){var P=z(k);k=C(k);var L=z(k);k=C(k);var G=z(k);return k=he(k),_(P,L,G,k)},v.j=_,v}();return d=function(v,_,k,P){switch(arguments.length){case 0:return null;case 1:return f.call(this,v);case 2:return o.call(this,v,_);case 3:return s.call(this,v,_,k);default:var L=null;if(3<arguments.length){L=0;for(var G=Array(arguments.length-3);L<G.length;)G[L]=arguments[L+3],++L;L=new u(G,0,null)}return p.j(v,_,k,L)}},d.v=3,d.B=p.B,d.G=function(){return null},d.g=f,d.h=o,d.l=s,d.j=p.j,d}()},Ll=function(){Tf(Ze,Tf(Ud,Tf(cf,F([hf,cc]))))},Vg=function(n,t){return new Yf(null,function(){if(0<n){var i=w(t);return i?Tf(z(i),Vg(n-1,he(i))):null}return null},null,null)},Wg=function(n,t){return new Yf(null,function(){e:for(var i=n,s=t;;)if(s=w(s),0<i&&s)--i,s=he(s);else break e;return s},null,null)},Xg=function(n,t){return O.l(function(i){return i},t,Wg(n,t))},Yg=function(n){var t=w(n);for(n=w(Wg(2,n));;)if(n)t=C(t),n=C(n);else return t},Zg=function(n,t){return new Yf(null,function(){e:for(var i=n,s=t;;){s=w(s);var o;if((o=s)&&(o=z(s),o=i.g?i.g(o):i.call(null,o)),l(o))s=he(s);else break e}return s},null,null)},$g=function(n,t,i,s,o){this.D=n,this.count=t,this.F=i,this.next=s,this.C=o,this.A=32374988,this.N=1},ah=function(n,t){return 0<n?new $g(null,n,t,null,null):ge},bh=function(n){return new Yf(null,function(){return Tf(n.G?n.G():n.call(null),bh(n))},null,null)},ch=function(n,t,i,s,o){this.D=n,this.f=t,this.zf=i,this.seed=s,this.next=o,this.A=26083532,this.N=1},eh=function(n,t){return Wg(1,dh.h(new $g(null,-1,n,null,null),t))},gh=function(n,t){return Kg.h(fh,Kg.l(O,n,t))},hh=function(n){return function t(i){return new Yf(null,function(){return Tf(i,l(Ye.g?Ye.g(i):Ye.call(null,i))?gh(t,F([w.g?w.g(i):w.call(null,i)])):null)},null,null)}(n)},kh=function(n){return jh.h(function(t){return!Ye(t)},he(hh(n)))},Vl=function(n,t){return yd(nc(function(i,s){return l(n.g?n.g(s):n.call(null,s))?xd(i,s):i},wd(lh),t))},oh=function(n,t,i){return new Yf(null,function(){var s=w(i);if(s){var o=Vg(n,s);return n===D(o)?Tf(o,oh(n,t,Wg(t,s))):null}return null},null,null)},Q=function(n,t){return nc(J,n,t)},ph=function(n,t,i){var s=kf;for(t=w(t);;)if(t!=null){if(n=J.l(n,z(t),s),s===n)return i;t=C(t)}else return n},qh=function(n,t){this.qa=n,this.o=t},rh=function(n){return new qh(n,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])},sh=function(n){return new qh(n.qa,mc(n.o))},th=function(n){return n=n.H,32>n?0:n-1>>>5<<5},uh=function(n,t,i){for(;;){if(t===0)return i;var s=rh(n);s.o[0]=i,i=s,t-=5}},vh=function(n,t){throw Error(["No item ",m.g(n)," in vector of length ",m.g(t)].join(""))},wh=function(n,t){if(t>=th(n))return n.ma;var i=n.root;for(n=n.shift;;)if(0<n){var s=n-5;i=i.o[t>>>n&31],n=s}else return i.o},xh=function(n,t){return 0<=t&&t<n.H?wh(n,t):vh(t,n.H)},yh=function(n,t,i,s,o,f){this.J=n,this.Ud=t,this.o=i,this.Ha=s,this.start=o,this.end=f},zh=function(n,t,i){return new yh(t,t-t%32,t<D(n)?wh(n,t):null,n,t,i)},Bh=function(n,t,i,s){return i<s?Ah(n,t,Ee(n,i),i+1,s):t.G?t.G():t.call(null)},Ah=function(n,t,i,s,o){var f=i;for(i=s,s=wh(n,s);;)if(i<o){var d=i&31;if(s=d===0?wh(n,i):s,d=s[d],f=t.h?t.h(f,d):t.call(null,f,d),se(f))return q(f);i+=1}else return f},R=function(n,t,i,s,o,f){this.D=n,this.H=t,this.shift=i,this.root=s,this.ma=o,this.C=f,this.A=167666463,this.N=139268},Ch=function(n,t){var i=n.length;if(n=t?n:mc(n),32>i)return new R(null,i,5,S,n,null);t=32;for(var s=new R(null,32,5,S,n.slice(0,32),null).Yc(null);;)if(t<i){var o=t+1;s=xd(s,n[t]),t=o}else return yd(s)},Gh=function(n){return l(Dh.g?Dh.g(n):Dh.call(null,n))?new R(null,2,5,S,[Eh.g?Eh.g(n):Eh.call(null,n),Fh.g?Fh.g(n):Fh.call(null,n)],null):cf(n)?Se(n,null):dc(n)?Ch(n,!0):yd(nc(xd,wd(lh),n))},Hh=function(n,t,i,s,o,f){this.tb=n,this.node=t,this.J=i,this.Qa=s,this.D=o,this.C=f,this.A=32375020,this.N=1536},Kh=function(n){switch(arguments.length){case 3:var t=arguments[0],i=arguments[1],s=arguments[2];return new Hh(t,xh(t,i),i,s,null,null);case 4:return Ih(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Jh(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}},Ih=function(n,t,i,s){return new Hh(n,t,i,s,null,null)},Jh=function(n,t,i,s,o){return new Hh(n,t,i,s,o,null)},Lh=function(n,t,i,s,o){this.D=n,this.Ha=t,this.start=i,this.end=s,this.C=o,this.A=167666463,this.N=139264},Mh=function(n,t,i,s,o){for(;;)if(t instanceof Lh)i=t.start+i,s=t.start+s,t=t.Ha;else{if(!cf(t))throw Error("v must satisfy IVector");if(0>i||s<i||s>D(t))throw Error("Index out of bounds");return new Lh(n,t,i,s,o)}},Nh=function(n,t){return n===t.qa?t:new qh(n,mc(t.o))},Oh=function(n){return new qh({},mc(n.o))},Ph=function(n){var t=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];return ef(n,0,t,0,n.length),t},Qh=function(n,t,i,s){this.H=n,this.shift=t,this.root=i,this.ma=s,this.N=88,this.A=275},Rh=function(n,t,i){if(n.root.qa){if(0<=t&&t<n.H){if(th(n)<=t)n.ma[t&31]=i;else{var s=function o(f,d){if(d=Nh(n.root.qa,d),f===0)d.o[t&31]=i;else{var p=t>>>f&31;f=o(f-5,d.o[p]),d.o[p]=f}return d}(n.shift,n.root);n.root=s}return n}if(t===n.H)return n.ad(null,i);throw Error(["Index ",m.g(t)," out of bounds for TransientVector of length",m.g(n.H)].join(""))}throw Error("assoc! after persistent!")},Sh=function(n,t){this.cd=n,this.Pd=t},Th=function(n,t,i,s){this.D=n,this.Ya=t,this.ob=i,this.C=s,this.A=31850700,this.N=0},Vh=function(n,t,i,s,o){this.D=n,this.count=t,this.Ya=i,this.ob=s,this.C=o,this.N=139264,this.A=31858766},Wh=function(){this.A=2097152,this.N=0},Yh=function(n,t){return gf(Ze(t)&&!bf(t)&&D(n)===D(t)?(n!=null?n.A&1048576||Zd===n.Hh||!n.A&&ic(dd,n):ic(dd,n))?Cf(function(i,s,o){return E.h(J.l(t,s,Xh),o)?!0:new re(!1)},!0,n):Ig(function(i){return E.h(J.l(t,z(i),Xh),Ke(i))},n):null)},Zh=function(n,t,i,s){this.J=0,this.vh=n,this.Qf=t,this.$g=i,this.cg=s},$h=function(n){this.ea=n},ai=function(n){this.ea=n},bi=function(n,t){if(t instanceof K)e:{var i=n.length;t=t.U;for(var s=0;;){if(i<=s){n=-1;break e}if(n[s]instanceof K&&t===n[s].U){n=s;break e}s+=2}}else if(typeof t=="string"||typeof t=="number")e:for(i=n.length,s=0;;){if(i<=s){n=-1;break e}if(t===n[s]){n=s;break e}s+=2}else if(t instanceof r)e:for(i=n.length,t=t.Za,s=0;;){if(i<=s){n=-1;break e}if(n[s]instanceof r&&t===n[s].Za){n=s;break e}s+=2}else if(t==null)e:for(t=n.length,i=0;;){if(t<=i){n=-1;break e}if(n[i]==null){n=i;break e}i+=2}else e:for(i=n.length,s=0;;){if(i<=s){n=-1;break e}if(E.h(t,n[s])){n=s;break e}s+=2}return n},ci=function(n,t,i){this.key=n,this.F=t,this.C=i,this.A=166619935,this.N=0},Dh=function(n){return n!=null?!!(n.A&2048||Zd===n.Jh):!1},di=function(n,t,i){this.o=n,this.J=t,this.Xb=i,this.A=32374990,this.N=0},ei=function(n,t){this.o=n,this.J=0,this.H=t},h=function(n,t,i,s){this.D=n,this.H=t,this.o=i,this.C=s,this.A=16647951,this.N=139268},fi=function(n,t,i){if(n=t?n:mc(n),!i){for(i=[],t=0;t<n.length;){var s=n[t],o=n[t+1];bi(i,s)===-1&&(i.push(s),i.push(o)),t+=2}n=i}return new h(null,n.length/2,n,null)},gi=function(n,t){return n===t||Vf(n,t)?!0:E.h(n,t)},hi=function(n){for(var t=0,i=0;;)if(t<n.length){var s;e:for(s=0;;)if(s<t){var o=gi(n[t],n[s]);if(o){s=o;break e}s=2+s}else{s=!1;break e}i=s?i:i+2,t=2+t}else return i},ii=function(n,t){var i=n.length-1,s=w(t);for(t=Array(i+2*D(s)),n=ef(n,0,t,0,i),t=i;;)if(s){var o=z(s);n[t]=Rc(o),n[t+1]=Sc(o),t=2+i,s=C(s)}else return n},ng=function(n){var t=n.length,i=(t&1)===1,s;if(!(s=i))e:for(s=0;;)if(s<n.length){var o;n:for(o=0;;)if(o<s){var f=gi(n[s],n[o]);if(f){o=f;break n}o=2+o}else{o=!1;break n}if(o){s=o;break e}s=2+s}else{s=!1;break e}return s?ji(n,i):new h(null,t/2,n,null)},ji=function(n,t){var i=t?ii(n,Ng.h(og,n[n.length-1])):n;n=hi(i);var s=i.length;if(n<s){n=Array(n);for(var o=0,f=0;o<s;)(function(){for(var d=0;;)if(d<f){var p=gi(i[o],i[d]);if(p)return p;d=2+d}else return!1})()?(t=f,o=2+o,f=t):(t=function(){for(var d=s-2;;)if(d>=o){if(gi(i[o],i[d]))return d;d-=2}else return d}(),n[f]=i[o],n[f+1]=i[t+1],t=2+f,o=2+o,f=t);return new h(null,n.length/2,n,null)}return new h(null,i.length/2,i,null)},ki=function(n,t){this.bd={},this.Qc=n,this.o=t,this.A=259,this.N=56},mi=function(n,t){for(var i=wd(li),s=0;;)if(s<n)i=zd(i,t[s],t[s+1]),s+=2;else return i},ni=function(){this.F=!1},oi=function(n,t,i){return n=mc(n),n[t]=i,n},pi=function(n,t){var i=Array(n.length-2);return ef(n,0,i,0,2*t),ef(n,2*(t+1),i,2*t,i.length-2*t),i},qi=function(n,t,i,s){return n=n.Gc(t),n.o[i]=s,n},ri=function(n,t,i){for(var s=n.length,o=0,f=i;;)if(o<s){if(i=n[o],i!=null){var d=n[o+1];i=t.l?t.l(f,i,d):t.call(null,f,i,d)}else i=n[o+1],i=i!=null?i.Oc(t,f):f;if(se(i))return i;o+=2,f=i}else return f},si=function(n){this.o=n,this.J=0,this.Pb=this.Kd=null},ti=function(n,t,i){this.qa=n,this.ta=t,this.o=i,this.N=131072,this.A=0},ui=function(n){this.o=n,this.J=0,this.Pb=null},vi=function(n,t,i){this.qa=n,this.H=t,this.o=i,this.N=131072,this.A=0},wi=function(n,t,i){t*=2;for(var s=0;;)if(s<t){if(gi(i,n[s]))return s;s+=2}else return-1},xi=function(n,t,i,s){this.qa=n,this.lc=t,this.H=i,this.o=s,this.N=131072,this.A=0},Ai=function(n){switch(arguments.length){case 6:return yi(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return zi(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}},yi=function(n,t,i,s,o,f){var d=$d(t);if(d===s)return new xi(null,d,2,[t,i,o,f]);var p=new ni;return Bi.Lb(n,d,t,i,p).Lb(n,s,o,f,p)},zi=function(n,t,i,s,o,f,d){var p=$d(i);if(p===o)return new xi(null,p,2,[i,s,f,d]);var v=new ni;return Bi.Mb(n,t,p,i,s,v).Mb(n,t,o,f,d,v)},Ci=function(n,t,i,s,o){this.D=n,this.Qb=t,this.J=i,this.ea=s,this.C=o,this.A=32374988,this.N=0},Gi=function(n){switch(arguments.length){case 1:return Di(arguments[0]);case 3:return Fi(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}},Di=function(n){return Fi(n,0,null)},Fi=function(n,t,i){if(i==null)for(i=n.length;;)if(t<i){if(n[t]!=null)return new Ci(null,n,t,null,null);var s=n[t+1];if(l(s)&&(s=s.Id(),l(s)))return new Ci(null,n,t+2,s,null);t+=2}else return null;else return new Ci(null,n,t,i,null)},Hi=function(n,t,i,s,o){this.D=n,this.Qb=t,this.J=i,this.ea=s,this.C=o,this.A=32374988,this.N=0},Ki=function(n){switch(arguments.length){case 1:return Ii(arguments[0]);case 3:return Ji(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}},Ii=function(n){return Ji(n,0,null)},Ji=function(n,t,i){if(i==null)for(i=n.length;;)if(t<i){var s=n[t];if(l(s)&&(s=s.Id(),l(s)))return new Hi(null,n,t+1,s,null);t+=1}else return null;else return new Hi(null,n,t,i,null)},Li=function(n,t){this.Pa=n,this.zg=t,this.Cf=!1},Mi=function(n,t,i,s,o,f){this.D=n,this.H=t,this.root=i,this.Oa=s,this.Pa=o,this.C=f,this.A=16123663,this.N=139268},Ni=function(n,t){for(var i=n.length,s=0,o=wd(li);;)if(s<i){if(t.length<=s)throw Error(["No value supplied for key: ",m.g(n[s])].join(""));var f=s+1;o=zd(o,n[s],t[s]),s=f}else return yd(o)},Oi=function(n,t,i,s){this.qa={},this.root=n,this.count=t,this.Oa=i,this.Pa=s,this.A=259,this.N=56},Pi=function(n,t,i){if(n.qa){if(t==null)n.Pa!==i&&(n.Pa=i),n.Oa||(n.count+=1,n.Oa=!0);else{var s=new ni;t=(n.root==null?Bi:n.root).Mb(n.qa,0,$d(t),t,i,s),t!==n.root&&(n.root=t),s.F&&(n.count+=1)}return n}throw Error("assoc! after persistent!")},Qi=function(n,t,i){for(var s=t;;)if(n!=null)t=i?n.left:n.right,s=Qf.h(s,n),n=t;else return s},Ri=function(n,t,i,s,o){this.D=n,this.stack=t,this.Ec=i,this.H=s,this.C=o,this.A=32374990,this.N=0},Si=function(n,t,i){return new Ri(null,Qi(n,null,t),t,i,null)},Vi=function(n,t,i,s){return i instanceof Ti?i.left instanceof Ti?new Ti(i.key,i.F,i.left.fc(),new Ui(n,t,i.right,s,null),null):i.right instanceof Ti?new Ti(i.right.key,i.right.F,new Ui(i.key,i.F,i.left,i.right.left,null),new Ui(n,t,i.right.right,s,null),null):new Ui(n,t,i,s,null):new Ui(n,t,i,s,null)},Wi=function(n,t,i,s){return s instanceof Ti?s.right instanceof Ti?new Ti(s.key,s.F,new Ui(n,t,i,s.left,null),s.right.fc(),null):s.left instanceof Ti?new Ti(s.left.key,s.left.F,new Ui(n,t,i,s.left.left,null),new Ui(s.key,s.F,s.left.right,s.right,null),null):new Ui(n,t,i,s,null):new Ui(n,t,i,s,null)},Xi=function(n,t,i,s){if(i instanceof Ti)return new Ti(n,t,i.fc(),s,null);if(s instanceof Ui)return Wi(n,t,i,s.Nd());if(s instanceof Ti&&s.left instanceof Ui)return new Ti(s.left.key,s.left.F,new Ui(n,t,i,s.left.left,null),Wi(s.key,s.F,s.left.right,s.right.Nd()),null);throw Error("red-black tree invariant violation")},Yi=function(n,t,i,s){if(s instanceof Ti)return new Ti(n,t,i,s.fc(),null);if(i instanceof Ui)return Vi(n,t,i.Nd(),s);if(i instanceof Ti&&i.right instanceof Ui)return new Ti(i.right.key,i.right.F,Vi(i.key,i.F,i.left.Nd(),i.right.left),new Ui(n,t,i.right.right,s,null),null);throw Error("red-black tree invariant violation")},Ui=function(n,t,i,s,o){this.key=n,this.F=t,this.left=i,this.right=s,this.C=o,this.A=166619935,this.N=0},Ti=function(n,t,i,s,o){this.key=n,this.F=t,this.left=i,this.right=s,this.C=o,this.A=166619935,this.N=0},Zi=function(n,t,i,s,o){this.vb=n,this.ec=t,this.H=i,this.D=s,this.C=o,this.A=418776847,this.N=8192},$i=function(n,t){for(var i=n.ec;;)if(i!=null){var s=i.key;if(s=n.vb.h?n.vb.h(t,s):n.vb.call(null,t,s),s===0)return i;i=0>s?i.left:i.right}else return null},aj=function(n,t){this.ia=n,this.Xb=t,this.A=32374988,this.N=0},bj=function(n){return(n=w(n))?new aj(n,null):null},Eh=function(n){return Rc(n)},cj=function(n,t){this.ia=n,this.Xb=t,this.A=32374988,this.N=0},dj=function(n){return(n=w(n))?new cj(n,null):null},Fh=function(n){return Sc(n)},hj=function(n,t){var i=og;for(t=w(t);;)if(t){var s=z(t),o=J.l(n,s,ej);i=fj.h(o,ej)?gj.l(i,s,o):i,t=C(t)}else return bd(i,Te(n))},ij=function(n){this.dd=n},jj=function(n,t,i){this.D=n,this.ac=t,this.C=i,this.A=15077647,this.N=139268},lj=function(n){for(var t=n.length,i=wd(kj),s=0;s<t;)xd(i,n[s]),s+=1;return yd(i)},mj=function(n){this.Rc=n,this.N=136,this.A=259},nj=function(n,t,i){this.D=n,this.Ub=t,this.C=i,this.A=417730831,this.N=8192},oj=function(n){if(Xe(n))return Se(n,null);if(n=w(n),n==null)return kj;if(n instanceof u&&n.J===0)return lj(n.o);for(var t=wd(kj);;)if(n!=null){var i=C(n);t=xd(t,Ec(n)),n=i}else return yd(t)},pj=function(n){for(var t=lh;;)if(C(n))t=Qf.h(t,z(n)),n=C(n);else return w(t)},qj=function(n){if(n!=null&&(n.N&4096||Zd===n.Vf))return n.rd(null);if(typeof n=="string")return n;throw Error(["Doesn't support name: ",m.g(n)].join(""))},rj=function(n,t){var i=wd(og);for(n=w(n),t=w(t);;)if(n&&t)i=Jk(i,z(n),z(t)),n=C(n),t=C(t);else return yd(i)},sj=function(n,t){return new Yf(null,function(){var i=w(t);if(i){var s=z(i);s=n.g?n.g(s):n.call(null,s),i=l(s)?Tf(z(i),sj(n,he(i))):null}else i=null;return i},null,null)},tj=function(n,t,i){this.start=n,this.step=t,this.count=i,this.A=82,this.N=0},uj=function(n,t,i){this.J=n,this.end=t,this.step=i},vj=function(n,t,i,s,o,f,d){this.D=n,this.start=t,this.end=i,this.step=s,this.fa=o,this.Hb=f,this.C=d,this.A=32375006,this.N=140800},wj=function(n,t,i,s,o,f,d){this.D=n,this.start=t,this.end=i,this.step=s,this.fa=o,this.Hb=f,this.C=d,this.N=140800,this.A=32374988},Wl=function(n,t){return xj(n,t)},xj=function(n,t){return t<=n?ge:jf(n)&&jf(t)&&jf(1)?new vj(null,n,t,1,null,null,null):new wj(null,n,t,1,null,null,null)},yj=function(n,t){return new Yf(null,function(){var i=w(t);if(i){var s=z(i),o=n.g?n.g(s):n.call(null,s),f=Tf(s,sj(function(d){return E.h(o,n.g?n.g(d):n.call(null,d))},C(i)));return Tf(f,yj(n,new Yf(null,function(){return Wg(D(f),i)},null,null)))}return null},null,null)},Aj=function(n){e:for(var t=n;;)if(t=w(t))t=C(t);else break e;return n},Bj=function(n,t){if(typeof t=="string")return n=n.exec(t),n!=null&&E.h(n[0],t)?n.length===1?n[0]:Gh(n):null;throw new TypeError("re-matches must match against a string.")},Cj=function(n,t){if(typeof t=="string")return n=n.exec(t),n==null?null:n.length===1?n[0]:Gh(n);throw new TypeError("re-find must match against a string.")},Dj=function(n){if(n instanceof RegExp)return n;var t=Cj(/^\(\?([idmsux]*)\)/,n),i=I(t,0,null);return t=I(t,1,null),new RegExp(n.substring(i==null?0:i.length),l(t)?t:"")},Gj=function(n,t,i,s,o,f,d){var p=Ej;Ej=Ej==null?null:Ej-1;try{if(Ej!=null&&0>Ej)return qd(n,"#");if(qd(n,i),Ub.g(f)===0)w(d)&&qd(n,function(){var G=Fj.g(f);return l(G)?G:"..."}());else{if(w(d)){var v=z(d);t.l?t.l(v,n,f):t.call(null,v,n,f)}for(var _=C(d),k=Ub.g(f)-1;;)if(!_||k!=null&&k===0){w(_)&&k===0&&(qd(n,s),qd(n,function(){var G=Fj.g(f);return l(G)?G:"..."}()));break}else{qd(n,s);var P=z(_);i=n,d=f,t.l?t.l(P,i,d):t.call(null,P,i,d);var L=C(_);i=k-1,_=L,k=i}}return qd(n,o)}finally{Ej=p}},Hj=function(n,t){t=w(t);for(var i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o);qd(n,f),o+=1}else if(t=w(t))i=t,df(i)?(t=Fd(i),s=Gd(i),i=t,f=D(t),t=s,s=f):(f=z(i),qd(n,f),t=C(i),i=null,s=0),o=0;else return null},Ij=function(n){if(Yb==null)throw Error("No *print-fn* fn set for evaluation environment");return Yb.call(null,n),null},Kj=function(n){return['"',m.g(n.replace(RegExp(`[\\\\"\b\f
\r	]`,"g"),function(t){return Jj[t]})),'"'].join("")},Lj=function(n,t){return(n=gf(J.h(n,Sb)))&&(n=t!=null?!!(t.A&131072||Zd===t.Og):!1)?Te(t)!=null:n},Pj=function(n,t,i){if(n==null)return qd(t,"nil");if(Lj(i,n)){qd(t,"^");var s=Te(n);Mj.l?Mj.l(s,t,i):Mj.call(null,s,t,i),qd(t," ")}if(n.$f)return n.Rg(t);if(n!=null?n.A&2147483648||Zd===n.ja||!n.A&&ic(rd,n):ic(rd,n))return sd(n,t,i);if(n===!0||n===!1)return qd(t,m.g(n));if(typeof n=="number")return qd(t,isNaN(n)?"##NaN":n===Number.POSITIVE_INFINITY?"##Inf":n===Number.NEGATIVE_INFINITY?"##-Inf":m.g(n));if(n!=null&&n.constructor===Object)return qd(t,"#js "),s=O.h(function(f){return new ci(Bj(/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/,f)!=null?Nj.g(f):f,n[f],null)},Wa(n)),Oj.K?Oj.K(s,Mj,t,i):Oj.call(null,s,Mj,t,i);if(dc(n))return Gj(t,Mj,"#js ["," ","]",i,n);if(typeof n=="string")return l(Rb.g(i))?qd(t,Kj(n)):qd(t,n);if(typeof n=="function"){var o=n.name;return i=l(function(){var f=o==null;return f||Ta(o)}())?"Function":o,Hj(t,F(["#object[",i,l(!1)?[' "',m.g(n),'"'].join(""):"","]"]))}return n instanceof Date?(i=function(f,d){for(f=m.g(f);;)if(f.length<d)f=["0",f].join("");else return f},Hj(t,F(['#inst "',i(n.getUTCFullYear(),4),"-",i(n.getUTCMonth()+1,2),"-",i(n.getUTCDate(),2),"T",i(n.getUTCHours(),2),":",i(n.getUTCMinutes(),2),":",i(n.getUTCSeconds(),2),".",i(n.getUTCMilliseconds(),3),"-",'00:00"']))):n instanceof RegExp?Hj(t,F(['#"',n.source,'"'])):aa(n)==="symbol"||typeof Symbol<"u"&&n instanceof Symbol?Hj(t,F(["#object[",n.toString(),"]"])):l(function(){var f=n==null?null:n.constructor;return f==null?null:f.he}())?Hj(t,F(["#object[",n.constructor.he.replace(RegExp("/","g"),"."),"]"])):(o=function(){var f=n==null?null:n.constructor;return f==null?null:f.name}(),i=l(function(){var f=o==null;return f||Ta(o)}())?"Object":o,n.constructor==null?Hj(t,F(["#object[",i,"]"])):Hj(t,F(["#object[",i," ",m.g(n),"]"])))},Mj=function(n,t,i){var s=Qj.g(i);return l(s)?(i=gj.l(i,Rj,Pj),s.l?s.l(n,t,i):s.call(null,n,t,i)):Pj(n,t,i)},Sj=function(n,t){if(Ve(n))t="";else{var i=m,s=i.g,o=new Pb,f=new Od(o);Mj(z(n),f,t),n=w(C(n));for(var d=null,p=0,v=0;;)if(v<p){var _=d.S(null,v);qd(f," "),Mj(_,f,t),v+=1}else if(n=w(n))d=n,df(d)?(n=Fd(d),p=Gd(d),d=n,_=D(n),n=p,p=_):(_=z(d),qd(f," "),Mj(_,f,t),n=C(d),d=null,p=0),v=0;else break;f.hi(null),t=s.call(i,o)}return t},Tj=function(n){Ij(Sj(n,Wb())),l(Xb)&&(n=Wb(),Ij(`
`),J.h(n,Qb))},Yj=function(n){return n instanceof r?Xj.h(null,qj(n)):Nj.h(null,qj(n))},Zj=function(n){if(l(!1)){var t=w(n),i=w(t),s=z(i);for(C(i),I(s,0,null),I(s,1,null),i=Ne(n),n=null;;){s=n,t=w(t),n=z(t);var o=C(t),f=n;if(n=I(f,0,null),t=I(f,1,null),l(f))if(n instanceof K||n instanceof r)if(l(s))if(E.h(s,Wf(n)))i=gj.l(i,Yj(n),t),n=s,t=o;else return null;else if(s=Wf(n),l(s))i=gj.l(i,Yj(n),t),n=s,t=o;else return null;else return null;else return new R(null,2,5,S,[s,i],null)}}else return null},ak=function(n,t,i,s,o){return Gj(s,function(f,d,p){var v=Rc(f);return i.l?i.l(v,d,p):i.call(null,v,d,p),qd(d," "),f=Sc(f),i.l?i.l(f,d,p):i.call(null,f,d,p)},[m.g(n),"{"].join(""),", ","}",o,w(t))},Oj=function(n,t,i,s){var o=Ze(n)?Zj(n):null,f=I(o,0,null);return o=I(o,1,null),l(f)?ak(["#:",m.g(f)].join(""),o,t,i,s):ak(null,n,t,i,s)},bk=function(n,t,i){td(n,t,i)},ek=function(n){return ck==null&&(ck=Tg(0)),Xj.g([m.g(n),m.g(dk.h(ck,qe))].join(""))},fk=function(n,t){this.Je=n,this.ke=t,this.A=2173173760,this.N=131072},gk=function(){},hk=function(n){if(n!=null&&n.Kg!=null)n=n.Kg(n);else{var t=hk[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=hk._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IEncodeJS.-clj->js",n)}return n},ik=function(n,t){return(n!=null?Zd===n.Jg||!n.ie&&ic(gk,n):ic(gk,n))?hk(n):typeof n=="string"||typeof n=="number"||n instanceof K||n instanceof r?t.g?t.g(n):t.call(null,n):im.j(F([n]))},jk=function(){},kk=function(n,t){if(n!=null&&n.Ig!=null)n=n.Ig(n,t);else{var i=kk[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=kk._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("IEncodeClojure.-js->clj",n)}return n},nk=function(n){var t=F([lk,!1]),i=M(t);i=J.h(i,lk);var s=l(i)?Nj:m;return function o(f){return(f!=null?Zd===f.Eh||!f.ie&&ic(jk,f):ic(jk,f))?kk(f,Kg.h(mk,t)):ff(f)?Aj(O.h(o,f)):Dh(f)?new ci(o(Rc(f)),o(Sc(f)),null):We(f)?Ng.l(Ne(f),O.g(o),f):dc(f)?yd(nc(function(d,p){return p=o(p),xd(d,p)},wd(lh),f)):jc(f)===Object?yd(nc(function(d,p){return Jk(d,s.g?s.g(p):s.call(null,p),o(Xa(f,p)))},wd(og),Wa(f))):f}(n)},jm=function(n){var t=Tg(og);return function(){function i(o){var f=null;if(0<arguments.length){f=0;for(var d=Array(arguments.length-0);f<d.length;)d[f]=arguments[f+0],++f;f=new u(d,0,null)}return s.call(this,f)}function s(o){var f=J.l(q(t),o,kf);return f===kf&&(f=Kg.h(n,o),dk.K(t,gj,o,f)),f}return i.v=0,i.B=function(o){return o=w(o),s(o)},i.j=s,i}()},km=function(n,t){return yd(nc(function(i,s){var o=n.g?n.g(s):n.call(null,s);return Jk(i,o,Qf.h(J.l(i,o,lh),s))},wd(og),t))},tk=function(){return pk==null&&(pk=Tg(new h(null,3,[qk,og,rk,og,sk,og],null))),pk},uk=function(n,t,i){var s=E.h(t,i);if(s)return s;if(s=sk.g(n),s=s.g?s.g(t):s.call(null,t),!(s=lf(s,i))&&(s=cf(i)))if(s=cf(t))if(s=D(i)===D(t)){s=!0;for(var o=0;;)if(s&&o!==D(i))s=uk(n,t.g?t.g(o):t.call(null,o),i.g?i.g(o):i.call(null,o)),o+=1;else return s}else return s;else return s;else return s},vk=function(n){var t=q(tk());return pg(J.h(qk.g(t),n))},wk=function(n,t,i,s){dk.h(n,function(){return q(t)}),dk.h(i,function(){return q(s)})},yk=function(n,t,i,s){return i=xk(n,t,i),l(i)?i:uk(s,n,t)},lm=function(n,t,i){if(n!=null&&n.Nh!=null)n.Nh(n,t,i);else{var s=lm[aa(n??null)];if(s!=null)s.l?s.l(n,t,i):s.call(null,n,t,i);else if(s=lm._,s!=null)s.l?s.l(n,t,i):s.call(null,n,t,i);else throw kc("IMultiFn.-add-method",n)}},zk=function(n,t){throw Error(["No method in multimethod '",m.g(n),"' for dispatch value: ",m.g(t)].join(""))},Bk=function(n,t,i,s,o,f,d){var p=sm;this.name=n,this.P=t,this.Zg=p,this.pe=i,this.ve=s,this.sh=o,this.ue=f,this.Zd=d,this.A=4194305,this.N=4352},Ek=function(n,t){E.h(q(n.Zd),q(n.pe))||wk(n.ue,n.ve,n.Zd,n.pe);var i=q(n.ue);return i=i.g?i.g(t):i.call(null,t),l(i)?i:Dk(n.name,t,n.pe,n.ve,n.sh,n.ue,n.Zd,n.Zg)},Fk=function(n,t){this.Vb=n,this.C=t,this.A=2153775104,this.N=2048},Gk=function(n){return new Fk(n.toLowerCase(),null)},Hk=function(n,t,i){var s=Error(n);return this.message=n,this.data=t,this.cause=i,this.name=s.name,this.description=s.description,this.number=s.number,this.fileName=s.fileName,this.lineNumber=s.lineNumber,this.columnNumber=s.columnNumber,this.stack=s.stack,this},Ik=function(n,t){return new Hk(n,t,null)},Kk=function(n,t,i){var s=l(t.ignoreCase)?"gi":"g";return s=l(t.multiline)?[s,"m"].join(""):s,n.replace(new RegExp(t.source,l(t.unicode)?[s,"u"].join(""):s),i)},Lk=function(n){return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){return s=Xg(2,s),E.h(D(s),1)?(s=z(s),n.g?n.g(s):n.call(null,s)):(s=Gh(s),n.g?n.g(s):n.call(null,s))}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()},Mk=function(n,t,i){if(typeof t=="string")return n.replace(new RegExp(String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),i);if(t instanceof RegExp)return typeof i=="string"?Kk(n,t,i):Kk(n,t,Lk(i));throw["Invalid match arg: ",m.g(t)].join("")},Nk=function(n,t){var i=new Pb;for(t=w(t);;)if(t!=null)i.append(m.g(z(t))),t=C(t),t!=null&&i.append(n);else return i.toString()},tm=function(n,t){return 0>=t||t>=2+D(n)?Qf.h(Gh(Tf("",O.h(m,w(n)))),""):l(Ak?fd(1,t):ok.call(null,1,t))?new R(null,1,5,S,[n],null):l(Ak?fd(2,t):ok.call(null,2,t))?new R(null,2,5,S,["",n],null):(t-=2,Qf.h(Gh(Tf("",Um.l(Gh(O.h(m,w(n))),0,t))),n.substring(t)))},Ok=function(n,t){return Bm(n,t,0)},Bm=function(n,t,i){if(m.g(t)==="/(?:)/")t=tm(n,i);else if(1>i)t=Gh(m.g(n).split(t));else e:for(var s=i,o=lh;;){if(s===1){t=Qf.h(o,n);break e}var f=Cj(t,n);if(f!=null){var d=n.indexOf(f);f=n.substring(d+D(f)),--s,o=Qf.h(o,n.substring(0,d)),n=f}else{t=Qf.h(o,n);break e}}if(i===0&&1<D(t))e:for(i=t;;)if(Ue(i)==="")i=i==null?null:Wc(i);else break e;else i=t;return i},Ym=function(n){for(var t=[],i=arguments.length,s=0;s<i;)t.push(arguments[s]),s+=1;Kg.h(Hm,0<t.length?new u(t.slice(0),0,null):null),qd(Sm,`
`)},Zm=function(n){if(typeof n=="number")return n;if(typeof n=="string"&&n.length===1)return n.charCodeAt(0);throw Error("Argument to char must be a character or number")},ln=function(n,t,i){var s=i;for(i=lh;;){if(Ve(s))return new R(null,2,5,S,[i,t],null);var o=z(s);s=C(s),o=Kg.h(n,new R(null,2,5,S,[o,t],null)),t=I(o,0,null),o=I(o,1,null),i=Qf.h(i,t),t=o}},mn=function(n,t){var i=t;for(t=lh;;){var s=Kg.h(n,new R(null,1,5,S,[i],null));if(i=I(s,0,null),s=I(s,1,null),gc(i))return new R(null,2,5,S,[t,s],null);t=Qf.h(t,i),i=s}},nn=function(n){return new R(null,2,5,S,[Ng.h(og,function(){return function t(i){return new Yf(null,function(){for(;;){var s=w(i);if(s){if(df(s)){var o=Fd(s),f=D(o),d=ag(f);e:for(var p=0;;)if(p<f){var v=Oe(o,p),_=I(v,0,null);v=I(v,1,null);var k=I(v,0,null);I(v,1,null),d.add(new R(null,2,5,S,[_,k],null)),p+=1}else{o=!0;break e}return o?dg(d.fa(),t(Gd(s))):dg(d.fa(),null)}return o=z(s),d=I(o,0,null),o=I(o,1,null),f=I(o,0,null),I(o,1,null),Tf(new R(null,2,5,S,[d,f],null),t(he(s)))}return null}},null,null)}(n)}()),Ng.h(og,function(){return function t(i){return new Yf(null,function(){for(;;){var s=w(i);if(s){if(df(s)){var o=Fd(s),f=D(o),d=ag(f);e:for(var p=0;;)if(p<f){var v=Oe(o,p),_=I(v,0,null);v=I(v,1,null),I(v,0,null),v=I(v,1,null),d.add(new R(null,2,5,S,[_,v],null)),p+=1}else{o=!0;break e}return o?dg(d.fa(),t(Gd(s))):dg(d.fa(),null)}return o=z(s),d=I(o,0,null),o=I(o,1,null),I(o,0,null),o=I(o,1,null),Tf(new R(null,2,5,S,[d,o],null),t(he(s)))}return null}},null,null)}(n)}())],null)},on=function(n,t){return Ng.h(og,function(){return function i(s){return new Yf(null,function(){for(;;){var o=w(s);if(o){if(df(o)){var f=Fd(o),d=D(f),p=ag(d);e:for(var v=0;;)if(v<d){var _=Oe(f,v),k=I(_,0,null);_=I(_,1,null),p.add(new R(null,2,5,S,[k,new R(null,2,5,S,[_,t],null)],null)),v+=1}else{f=!0;break e}return f?dg(p.fa(),i(Gd(o))):dg(p.fa(),null)}return f=z(o),p=I(f,0,null),f=I(f,1,null),Tf(new R(null,2,5,S,[p,new R(null,2,5,S,[f,t],null)],null),i(he(o)))}return null}},null,null)}(n)}())},pn=function(){var n=Sm;if(n!=null&&n.mi!=null)n=n.mi(n);else{var t=pn[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=pn._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IPrettyFlush.-ppflush",n)}return n},rn=function(n,t){return n=q(q(n)),t.g?t.g(n):t.call(null,n)},sn=function(n,t,i){dk.K(q(n),gj,t,i)},wn=function(n,t){return E.h(t,`
`)?(sn(n,tn,0),sn(n,un,rn(n,un)+1)):sn(n,tn,rn(n,tn)+1),qd(rn(n,vn),t)},xn=function(n,t,i,s){this.Sh=n,this.ni=t,this.$g=i,this.si=s,this.A=1074167808,this.N=0},Cn=function(n,t,i,s,o,f,d,p,v,_,k,P,L){this.parent=n,this.Zh=t,this.Uh=i,this.Th=s,this.Vh=o,this.Wh=f,this.prefix=d,this.Yh=p,this.$h=v,this.Xh=_,this.T=k,this.I=P,this.C=L,this.A=2230716170,this.N=139264},Jn=function(n,t){for(t=Hn.g(t);;){if(t==null)return!1;if(n===t)return!0;t=Hn.g(t)}},Kn=function(n,t,i,s,o,f,d,p){this.Qh=n,this.data=t,this.bi=i,this.Ph=s,this.Oh=o,this.T=f,this.I=d,this.C=p,this.A=2230716170,this.N=139264},Ln=function(n,t,i,s,o,f,d,p){this.Qh=n,this.type=t,this.Rh=i,this.Ph=s,this.Oh=o,this.T=f,this.I=d,this.C=p,this.A=2230716170,this.N=139264},On=function(n,t,i,s,o,f,d){this.Qh=n,this.Rh=t,this.Ph=i,this.Oh=s,this.T=o,this.I=f,this.C=d,this.A=2230716170,this.N=139264},Pn=function(n,t,i,s,o,f,d){this.Qh=n,this.Rh=t,this.Ph=i,this.Oh=s,this.T=o,this.I=f,this.C=d,this.A=2230716170,this.N=139264},Rn=function(n,t,i,s,o,f,d,p,v){this.Qh=n,this.Rh=t,this.ai=i,this.offset=s,this.Ph=o,this.Oh=f,this.T=d,this.I=p,this.C=v,this.A=2230716170,this.N=139264},$n=function(n,t,i){t=w(t);for(var s=null,o=0,f=0;;)if(f<o){var d=s.S(null,f);if(!E.h(Sn.g(d),Un)){var p=Vn.g(q(q(n)));l(p)&&qd(vn.g(q(q(n))),p)}Zn.h(n,d),dk.K(q(n),gj,Vn,Vn.g(d)),d=Vn.g(q(q(n))),l(l(i)?d:i)&&(qd(vn.g(q(q(n))),d),dk.K(q(n),gj,Vn,null)),f+=1}else if(t=w(t))df(t)?(s=Fd(t),t=Gd(t),d=s,o=D(s),s=d):(d=z(t),E.h(Sn.g(d),Un)||(s=Vn.g(q(q(n))),l(s)&&qd(vn.g(q(q(n))),s)),Zn.h(n,d),dk.K(q(n),gj,Vn,Vn.g(d)),d=Vn.g(q(q(n))),l(l(i)?d:i)&&(qd(vn.g(q(q(n))),d),dk.K(q(n),gj,Vn,null)),t=C(t),s=null,o=0),f=0;else break},eo=function(n,t){var i=rn(vn.g(q(q(n))),ao),s;return(s=i==null)||(n=rn(vn.g(q(q(n))),tn),t=(t=w(t))?bo.g(Le(t))-co.g(z(t)):0,s=n+t<i),s},go=function(n,t,i){return t=q(fo.g(t)),l(t)?t:!eo(n,i)},jo=function(n,t,i){var s=ho.g(q(q(n))),o=rn(vn.g(q(q(n))),ao);return l(s)?l(o)?(s=q(io.g(t))>=o-s)?go(n,t,i):s:o:s},lo=function(n){var t=z(n),i=ko.g(t);return t=w(sj(function(s){return!(E.h(Sn.g(s),Un)&&Jn(ko.g(s),i))},C(n))),new R(null,2,5,S,[t,w(Wg(D(t)+1,n))],null)},mo=function(n){var t=z(n),i=ko.g(t);return w(sj(function(s){var o=ko.g(s);return!(E.h(Sn.g(s),Un)&&(E.h(o,i)||Jn(o,i)))},C(n)))},qo=function(n,t){qd(vn.g(q(q(n))),`
`),dk.K(q(n),gj,Vn,null),t=ko.g(t);var i=no.g(t);l(i)&&qd(vn.g(q(q(n))),i),i=Kg.h(m,ah(q(oo.g(t))-D(i)," ")),qd(vn.g(q(q(n))),i);e:for(N(po.g(t),!0),N(fo.g(t),!0),n=Hn.g(t);;)if(l(n))N(fo.g(n),!0),N(po.g(n),!0),n=Hn.g(n);else break e;return null},ro=function(n){var t=w(sj(function(i){return!E.h(Sn.g(i),Un)},n));return new R(null,2,5,S,[t,w(Wg(D(t),n))],null)},uo=function(n){for(var t=so.g(q(q(n)));;){if(dk.K(q(n),gj,so,Ng.h(lh,t)),eo(n,t))return null;var i=to(n,t);if(t!==i)t=i;else return null}},vo=function(n,t){return dk.K(q(n),gj,so,Qf.h(so.g(q(q(n))),t)),eo(n,so.g(q(q(n))))?null:uo(n)},wo=function(n){var t=Vn.g(q(q(n)));return l(t)?(qd(vn.g(q(q(n))),t),dk.K(q(n),gj,Vn,null)):null},Do=function(n,t){var i=Bm(t,`
`,-1);if(E.h(D(i),1))return t;t=no.g(z(xo.g(q(q(n)))));var s=z(i);if(E.h(yo,zo.g(q(q(n))))){var o=Ao.g(q(q(n))),f=o+D(s);dk.K(q(n),gj,Ao,f),vo(n,new Kn(Bo,s,null,o,f,null,null,null)),uo(n),s=so.g(q(q(n))),l(s)&&($n(n,s,!0),dk.K(q(n),gj,so,lh))}else wo(n),qd(vn.g(q(q(n))),s);qd(vn.g(q(q(n))),`
`),s=w(C(pj(i))),o=null;for(var d=f=0;;)if(d<f){var p=o.S(null,d);qd(vn.g(q(q(n))),p),qd(vn.g(q(q(n))),`
`),l(t)&&qd(vn.g(q(q(n))),t),d+=1}else if(s=w(s))o=s,df(o)?(s=Fd(o),d=Gd(o),o=s,f=D(s),s=d):(s=z(o),qd(vn.g(q(q(n))),s),qd(vn.g(q(q(n))),`
`),l(t)&&qd(vn.g(q(q(n))),t),s=C(o),o=null,f=0),d=0;else break;return dk.K(q(n),gj,yo,Co),Le(i)},Eo=function(n,t,i,s,o,f){this.Sh=n,this.ni=t,this.yi=i,this.ri=s,this.$g=o,this.ti=f,this.A=1074167808,this.N=0},Mo=function(n){var t=Fo,i=Go,s=new Cn(null,null,Tg(0),Tg(0),Tg(!1),Tg(!1),null,null,null,null,null,null,null),o=Tg(Ni([xo,ho,Io,Jo,Ko,zo,Ao,Vn,vn,Lo,so],[s,i,s,!0,null,Co,0,null,new xn(n,t,Tg(new h(null,4,[ao,t,tn,0,un,0,vn,n],null)),og),1,lh]));return new Eo(n,t,i,s,o,og)},Qo=function(n,t){var i=Sm;if(t=new Cn(xo.g(q(q(i))),null,Tg(0),Tg(0),Tg(!1),Tg(!1),n,null,t,null,null,null,null),dk.K(q(i),gj,xo,t),E.h(zo.g(q(q(i))),Co)){wo(i);var s=No.g(q(q(i)));l(s)&&(s.g?s.g(Oo):s.call(null,Oo)),l(n)&&qd(vn.g(q(q(i))),n),i=rn(vn.g(q(q(i))),tn),N(t.Uh,i),N(t.Th,i)}else s=Ao.g(q(q(i))),n=s+(l(n)?D(n):0),dk.K(q(i),gj,Ao,n),vo(i,new On(Po,t,s,n,null,null,null))},Vo=function(){var n=Sm,t=xo.g(q(q(n))),i=Ro.g(t);if(E.h(zo.g(q(q(n))),Co)){wo(n),l(i)&&qd(vn.g(q(q(n))),i);var s=No.g(q(q(n)));l(s)&&(s.g?s.g(To):s.call(null,To))}else s=Ao.g(q(q(n))),i=s+(l(i)?D(i):0),dk.K(q(n),gj,Ao,i),vo(n,new Pn(Uo,t,s,i,null,null,null));dk.K(q(n),gj,xo,Hn.g(t))},Xo=function(n){var t=n!=null?n.A&32768||Zd===n.$e?!0:n.A?!1:ic(Zc,n):ic(Zc,n);return t&&Jo.g(q(q(n)))},ap=function(n){var t=Yo;return l(t)&&(t=ob,t=l(t)?Yo>=ob:t),gc(Zo)?Hm.call(null,n):l(t)?qd(Sm,"..."):(l(Yo)&&(Yo+=1),$o.call(null,n)),t},bp=function(n,t){if(gc(t.g?t.g(n):t.call(null,n)))throw Error(["Bad argument: ",m.g(n),". It must be one of ",m.g(t)].join(""))},dp=function(){var n=Ej;return l(n)?cp>=Ej:n},mp=function(n){bp(n,new jj(null,new h(null,4,[ep,null,fp,null,jp,null,kp,null],null),null));var t=Sm;dk.K(q(t),gj,zo,yo);var i=Ao.g(q(q(t))),s=xo.g(q(q(t)));vo(t,new Ln(Un,n,s,i,i,null,null,null))},qp=function(n,t){bp(n,new jj(null,new h(null,2,[np,null,op,null],null),null));var i=Sm,s=xo.g(q(q(i)));if(E.h(zo.g(q(q(i))),Co)){wo(i);var o=oo.g(s);if(l(E.h?E.h(np,n):E.call(null,np,n)))n=q(io.g(s));else if(l(E.h?E.h(op,n):E.call(null,op,n)))n=rn(vn.g(q(q(i))),tn);else throw Error(["No matching clause: ",m.g(n)].join(""));N(o,t+n)}else o=Ao.g(q(q(i))),vo(i,new Rn(pp,s,n,t,o,o,null,null,null))},vp=function(n,t,i){t=typeof t=="string"?rp(t):t,i=sp(i);e:{var s=new Pb,o=gc(n)||n===!0?new Od(s):n,f=tp(t)&&gc(Xo(o))?l(Xo(o))?o:Mo(o):o,d=Sm;Sm=f;try{try{up(t,i)}finally{o!==f&&ae(f)}var p=gc(n)?m.g(s):n===!0?Ij(m.g(s)):null;break e}finally{Sm=d}p=void 0}return p},yp=function(n,t){throw n=[m.g(n),`
`,m.g(xp),`
`,m.g(Kg.h(m,ah(t," "))),`^
`].join(""),Error(n)},zp=function(n,t,i,s,o,f){this.gi=n,this.Tb=t,this.fi=i,this.T=s,this.I=o,this.C=f,this.A=2230716170,this.N=139264},sp=function(n){return n=w(n),new zp(n,n,0,null,null,null)},Cp=function(n){var t=Ap.g(n);if(l(t))return new R(null,2,5,S,[z(t),new zp(Bp.g(n),C(t),Ao.g(n)+1,null,null,null)],null);throw Error("Not enough arguments for format definition")},Dp=function(n){var t=Cp(n);return n=I(t,0,null),t=I(t,1,null),n=typeof n=="string"?rp(n):n,new R(null,2,5,S,[n,t],null)},Gp=function(n,t){return t>=Ao.g(n)?(t=Ao.g(n)-t,Fp.h?Fp.h(n,t):Fp.call(null,n,t)):new zp(Bp.g(n),Wg(t,Bp.g(n)),t,null,null,null)},Fp=function(n,t){var i=Ao.g(n)+t;return 0>t?Gp(n,i):new zp(Bp.g(n),Wg(t,Ap.g(n)),i,null,null,null)},Hp=function(n,t,i,s,o,f,d){this.di=n,this.ci=t,this.ei=i,this.offset=s,this.T=o,this.I=f,this.C=d,this.A=2230716170,this.N=139264},Rp=function(n,t){var i=I(n,0,null);n=I(n,1,null);var s=I(n,0,null);return n=I(n,1,null),s=lf(new jj(null,new h(null,2,[Jp,null,Kp,null],null),null),i)?new R(null,2,5,S,[s,t],null):E.h(s,Mp)?Cp(t):E.h(s,Op)?new R(null,2,5,S,[D(Ap.g(t)),t],null):new R(null,2,5,S,[s,t],null),t=I(s,0,null),s=I(s,1,null),new R(null,2,5,S,[new R(null,2,5,S,[i,new R(null,2,5,S,[t,n],null)],null),s],null)},Sp=function(n,t){return t=ln(Rp,t,n),n=I(t,0,null),t=I(t,1,null),new R(null,2,5,S,[Ng.h(og,n),t],null)},dq=function(n,t,i){i=Cp(i);var s=I(i,0,null);if(i=I(i,1,null),jf(s))if(E.h(Tp,10))var o=[m.g(s),l(Up)?".":null].join("");else{o=m;var f=o.g;if(l(Up)){var d=J.h(Vp,Tp);d=l(d)?d:["#",m.g(Tp),"r"].join("")}else d=null;o=[f.call(o,d),m.g(Wp(Tp,s))].join("")}else o=null;return n=l(o)?o:n.g?n.g(s):n.call(null,s),s=n.length,o=s+Xp.g(t),o=o>=Yp.g(t)?o:o+(Jf(Yp.g(t)-o-1,Zp.g(t))+1)*Zp.g(t),s=Kg.h(m,ah(o-s,aq.g(t))),l(Kp.g(t))?bq.j(F([[m.g(s),m.g(n)].join("")])):bq.j(F([[m.g(n),m.g(s)].join("")])),i},eq=function(n,t){return Rf(z(mn(function(i){return 0<i?new R(null,2,5,S,[zj(i,n),Jf(i,n)],null):new R(null,2,5,S,[null,null],null)},t)))},Wp=function(n,t){return t===0?"0":Kg.h(m,O.h(function(i){return 10>i?nh(Zm("0")+i):nh(Zm("a")+(i-10))},eq(n,t)))},hq=function(n,t){return Rf(z(mn(function(i){return new R(null,2,5,S,[w(Rf(Vg(n,i))),w(Wg(n,i))],null)},Rf(t))))},nq=function(n,t,i){i=Cp(i);var s=I(i,0,null);if(i=I(i,1,null),jf(s)||typeof s=="number"&&!isNaN(s)&&s!==1/0&&parseFloat(s)!==parseInt(s,10)&&E.h(s,Math.floor(s))){var o=0>s,f=Wp(n,o?-s:s);n=l(Jp.g(t))?function(){var d=O.h(function(v){return Kg.h(m,v)},hq(iq.g(t),f)),p=ah(D(d),kq.g(t));return Kg.h(m,C(dh.h(p,d)))}():f,n=o?["-",m.g(n)].join(""):l(Kp.g(t))?["+",m.g(n)].join(""):n,n=n.length<Yp.g(t)?[m.g(Kg.h(m,ah(Yp.g(t)-n.length,aq.g(t)))),m.g(n)].join(""):n,bq.j(F([n]))}else dq(lq,new h(null,5,[Yp,Yp.g(t),Zp,1,Xp,0,aq,aq.g(t),Kp,!0],null),sp(new R(null,1,5,S,[s],null)));return i},vq=function(n){var t=Jf(n,100);n=zj(n,100);var i=0<t?[m.g(Ee(pq,t))," hundred"].join(""):null,s=m,o=s.g;if(0<n)if(20>n)var f=Ee(pq,n);else{f=Jf(n,10);var d=zj(n,10);f=[m.g(0<f?Ee(rq,f):null),0<f&&0<d?"-":null,m.g(0<d?Ee(pq,d):null)].join("")}else f=null;return[i,0<t&&0<n?" ":null,o.call(s,f)].join("")},xq=function(n,t){var i=D(n),s=lh;--i;var o=z(n);for(n=C(n);;){if(n==null)return[m.g(Kg.h(m,eh(", ",s))),Ve(o)||Ve(s)?null:", ",m.g(o),!Ve(o)&&0<i+t?[" ",m.g(Ee(wq,i+t))].join(""):null].join("");s=Ve(o)?s:Qf.h(s,[m.g(o)," ",m.g(Ee(wq,i+t))].join("")),--i,o=z(n),n=C(n)}},yq=function(n,t){t=Cp(t);var i=I(t,0,null);if(t=I(t,1,null),typeof i=="number"&&0<i&&4e3>i){var s=eq(10,i);i=lh;for(var o=D(s)-1;;)if(Ve(s)){bq.j(F([Kg.h(m,i)]));break}else{var f=z(s);i=E.h(0,f)?i:Qf.h(i,Ee(Ee(n,o),f-1)),--o,s=C(s)}}else nq(10,new h(null,5,[Yp,0,aq," ",kq,",",iq,3,Jp,!0],null),sp(new R(null,1,5,S,[i],null)));return t},Dq=function(n,t){n=Cp(t),t=I(n,0,null),n=I(n,1,null);var i=Zm(t);t=i&127,i&=128;var s=J.h(Aq,t);return 0<i&&bq.j(F(["Meta-"])),bq.j(F([l(s)?s:32>t?["Control-",m.g(nh(t+64))].join(""):E.h(t,127)?"Control-?":nh(t)])),n},Fq=function(n,t){var i=Cp(t);if(t=I(i,0,null),i=I(i,1,null),n=Eq.g(n),l(E.h?E.h("o",n):E.call(null,"o",n)))vp(!0,"\\o~3,'0o",F([Zm(t)]));else if(l(E.h?E.h("u",n):E.call(null,"u",n)))vp(!0,"\\u~4,'0x",F([Zm(t)]));else if(l(E.h?E.h(null,n):E.call(null,null,n)))qd(Sm,l(E.h?E.h("\b",t):E.call(null,"\b",t))?"\\backspace":l(E.h?E.h(" ",t):E.call(null," ",t))?"\\space":l(E.h?E.h("	",t):E.call(null,"	",t))?"\\tab":l(E.h?E.h(`
`,t):E.call(null,`
`,t))?"\\newline":l(E.h?E.h("\f",t):E.call(null,"\f",t))?"\\formfeed":l(E.h?E.h("\r",t):E.call(null,"\r",t))?"\\return":l(E.h?E.h('"',t):E.call(null,'"',t))?'\\"':l(E.h?E.h("\\",t):E.call(null,"\\",t))?"\\\\":["\\",m.g(t)].join(""));else throw Error(["No matching clause: ",m.g(n)].join(""));return i},Gq=function(n,t){return t=Cp(t),n=I(t,0,null),t=I(t,1,null),bq.j(F([n])),t},Mq=function(n){return n=z(n),E.h(Hq,n)||E.h(Iq,n)},Qq=function(n,t,i){return Ke(ln(function(s,o){if(Mq(o))return new R(null,2,5,S,[null,o],null);o=Sp(Nq.g(s),o);var f=I(o,0,null);o=I(o,1,null);var d=nn(f);return f=I(d,0,null),d=I(d,1,null),f=gj.l(f,Oq,i),new R(null,2,5,S,[null,Kg.h(Pq.g(s),new R(null,3,5,S,[f,o,d],null))],null)},t,n))},Tq=function(n){n=m.g(n).toLowerCase();var t=n.indexOf("e"),i=n.indexOf(".");n=0>t?0>i?new R(null,2,5,S,[n,m.g(n.length-1)],null):new R(null,2,5,S,[[n.substring(0,i),n.substring(i+1)].join(""),m.g(i-1)],null):0>i?new R(null,2,5,S,[n.substring(0,t),n.substring(t+1)],null):new R(null,2,5,S,[[n.substring(0,1),n.substring(2,t)].join(""),n.substring(t+1)],null),t=I(n,0,null),n=I(n,1,null);e:if(i=D(t),0<i&&E.h(Ee(t,D(t)-1),"0"))for(--i;;){if(0>i){t="";break e}if(E.h(Ee(t,i),"0"))--i;else{t=t.substring(0,i+1);break e}}e:{i=t;var s=D(i);if(0<s&&E.h(Ee(i,0),"0"))for(var o=0;;){if(E.h(o,s)||!E.h(Ee(i,o),"0")){i=i.substring(o);break e}o+=1}}return t=D(t)-D(i),n=0<D(n)&&E.h(Ee(n,0),"+")?n.substring(1):n,Ve(i)?new R(null,2,5,S,["0",0],null):new R(null,2,5,S,[i,parseInt(n,10)-t],null)},Uq=function(n,t,i,s){if(l(l(i)?i:s)){var o=D(n);s=l(s)?2>s?2:s:0,l(i)?i=t+i+1:0<=t?(i=t+1,--s,i=i>s?i:s):i=s+t;var f=E.h(i,0)?new R(null,4,5,S,[["0",m.g(n)].join(""),t+1,1,o+1],null):new R(null,4,5,S,[n,t,i,o],null);if(i=I(f,0,null),o=I(f,1,null),s=I(f,2,null),f=I(f,3,null),l(s)){if(0>s)return new R(null,3,5,S,["0",0,!1],null);if(f>s){if(t=Ee(i,s),n=i.substring(0,s),Zm(t)>=Zm("5")){e:for(t=D(n)-1,i=t|0;;){if(0>i){t=Kg.l(m,"1",ah(t+1,"0"));break e}if(E.h("9",n.charAt(i)))--i;else{t=Kg.K(m,n.substring(0,i),nh(Zm(n.charAt(i))+1),ah(t-i,"0"));break e}}return n=D(t)>n.length,i=S,n&&(s=D(t)-1,t=t.substring(0,s)),new R(null,3,5,i,[t,o,n],null)}return new R(null,3,5,S,[n,o,!1],null)}}}return new R(null,3,5,S,[n,t,!1],null)},Vq=function(n,t,i){var s=0>t?new R(null,2,5,S,[[m.g(Kg.h(m,ah(-t-1,"0"))),m.g(n)].join(""),-1],null):new R(null,2,5,S,[n,t],null);n=I(s,0,null);var o=I(s,1,null);return s=D(n),i=l(i)?o+i+1:o+1,i=s<i?[m.g(n),m.g(Kg.h(m,ah(i-s,"0")))].join(""):n,0>t?t=[".",m.g(i)].join(""):(t+=1,t=[i.substring(0,t),".",i.substring(t)].join("")),t},Wq=function(n,t){return 0>t?[".",m.g(n)].join(""):[n.substring(0,t),".",n.substring(t)].join("")},cs=function(n,t){var i=Xq.g(n),s=Yq.g(n);t=Cp(t);var o=I(t,0,null);t=I(t,1,null);var f=0>o?new R(null,2,5,S,["-",-o],null):new R(null,2,5,S,["+",o],null),d=I(f,0,null);f=I(f,1,null),f=Tq(f);var p=I(f,0,null),v=I(f,1,null)+Nr.g(n);f=function(){var L=Kp.g(n);return l(L)?L:0>o}();var _=gc(s)&&D(p)-1<=v,k=Uq(p,v,s,l(i)?i-(l(f)?1:0):null);if(p=I(k,0,null),v=I(k,1,null),k=I(k,2,null),p=Vq(p,l(k)?v+1:v,s),s=l(l(i)?l(s)?1<=s&&E.h(p.charAt(0),"0")&&E.h(p.charAt(1),".")&&p.length>i-(l(f)?1:0):s:i)?p.substring(1):p,v=E.h(z(s),"."),l(i)){p=s.length,p=l(f)?p+1:p,v=v&&!(p>=i),_=_&&!(p>=i);var P=v||_?p+1:p;l(function(){var L=P>i;return L&&Zr.g(n)}())?bq.j(F([Kg.h(m,ah(i,Zr.g(n)))])):bq.j(F([[m.g(Kg.h(m,ah(i-P,aq.g(n)))),m.g(l(f)?d:null),v?"0":null,s,_?"0":null].join("")]))}else bq.j(F([[m.g(l(f)?d:null),v?"0":null,s,_?"0":null].join("")]));return t},fs=function(n,t){t=Cp(t);var i=I(t,0,null);t=I(t,1,null);var s=Tq(0>i?-i:i);for(I(s,0,null),I(s,1,null);;){var o=I(s,0,null),f=I(s,1,null),d=Xq.g(n),p=Yq.g(n),v=ds.g(n),_=Nr.g(n),k=function(){var j=es.g(n);return l(j)?j:"E"}();s=function(){var j=Kp.g(n);return l(j)?j:0>i}();var P=0>=_,L=f-(_-1),G=m.g(Math.abs(L));k=[m.g(k),0>L?"-":"+",m.g(l(v)?Kg.h(m,ah(v-G.length,"0")):null),G].join("");var Z=k.length;if(L=D(o),o=[m.g(Kg.h(m,ah(-_,"0"))),m.g(o),m.g(l(p)?Kg.h(m,ah(p-(L-1)-(0>_?-_:0),"0")):null)].join(""),L=l(d)?d-Z:null,o=Uq(o,0,E.h(_,0)?p-1:0<_?p:0>_?p-1:null,l(L)?L-(l(s)?1:0):null),L=I(o,0,null),I(o,1,null),G=I(o,2,null),o=Wq(L,_),p=E.h(_,D(L))&&p==null,gc(G)){if(l(d)){f=o.length+Z,f=l(s)?f+1:f;var W=(P=P&&!E.h(f,d))?f+1:f;f=p&&W<d,l(function(){var j=W>d;return j||(j=v,j=l(j)?Z-2>v:j),l(j)?Zr.g(n):j}())?bq.j(F([Kg.h(m,ah(d,Zr.g(n)))])):bq.j(F([[m.g(Kg.h(m,ah(d-W-(f?1:0),aq.g(n)))),l(s)?0>i?"-":"+":null,P?"0":null,o,f?"0":null,k].join("")]))}else bq.j(F([[l(s)?0>i?"-":"+":null,P?"0":null,o,p?"0":null,k].join("")]));break}else s=new R(null,2,5,S,[L,f+1],null)}return t},gs=function(n,t,i){var s=Cp(t),o=I(s,0,null);I(s,1,null),s=Tq(0>o?-o:o);var f=I(s,0,null);s=I(s,1,null);var d=Xq.g(n),p=Yq.g(n),v=ds.g(n);return s=E.h(o,0)?0:s+1,o=l(v)?v+2:4,d=l(d)?d-o:null,l(p)?f=p:(f=D(f),p=7>s?s:7,f=f>p?f:p),s=f-s,0<=s&&s<=f?(n=cs(new h(null,6,[Xq,d,Yq,s,Nr,0,Zr,Zr.g(n),aq,aq.g(n),Kp,Kp.g(n)],null),t),bq.j(F([Kg.h(m,ah(o," "))])),n):fs(n,t)},is=function(n,t){t=Cp(t);var i=I(t,0,null);t=I(t,1,null);var s=Tq(Math.abs(i)),o=I(s,0,null),f=I(s,1,null),d=Yq.g(n),p=hs.g(n);s=Xq.g(n);var v=function(){var k=Kp.g(n);return l(k)?k:0>i}(),_=Uq(o,f,d,null);return o=I(_,0,null),f=I(_,1,null),_=I(_,2,null),d=Vq(o,l(_)?f+1:f,d),p=[m.g(Kg.h(m,ah(p-d.indexOf("."),"0"))),d].join(""),d=p.length+(l(v)?1:0),bq.j(F([[l(function(){var k=Jp.g(n);return l(k)?v:k}())?0>i?"-":"+":null,m.g(Kg.h(m,ah(s-d,aq.g(n)))),l(function(){var k=gc(Jp.g(n));return k&&v}())?0>i?"-":"+":null,p].join("")])),t},ms=function(n,t){var i=js.g(n);i=l(i)?new R(null,2,5,S,[i,t],null):Cp(t),t=I(i,0,null),i=I(i,1,null);var s=ks.g(n);return t=0>t||t>=D(s)?z(ls.g(n)):Ee(s,t),l(t)?Qq(t,i,Oq.g(n)):i},ns=function(n,t){var i=Cp(t);t=I(i,0,null),i=I(i,1,null);var s=ks.g(n);return t=l(t)?Ke(s):z(s),l(t)?Qq(t,i,Oq.g(n)):i},os=function(n,t){var i=Cp(t),s=I(i,0,null);i=I(i,1,null);var o=ks.g(n);return o=l(s)?z(o):null,l(s)?l(o)?Qq(o,t,Oq.g(n)):t:i},ws=function(n,t){var i=ps.g(n),s=z(ks.g(n));s=Ve(s)?Dp(t):new R(null,2,5,S,[s,t],null),t=I(s,0,null),s=I(s,1,null),s=Cp(s);var o=I(s,0,null);s=I(s,1,null);var f=0;o=sp(o);for(var d=-1;;){if(gc(i)&&E.h(Ao.g(o),d)&&1<f)throw Error("%{ construct not consuming any arguments: Infinite loop!");if(d=Ve(Ap.g(o))&&(gc(Jp.g(qs.g(n)))||0<f),l(d||(l(i)?f>=i:i))||(d=Qq(t,o,Oq.g(n)),E.h(Hq,z(d))))return s;f+=1;var p=Ao.g(o);o=d,d=p}},ys=function(n,t){var i=ps.g(n),s=z(ks.g(n));s=Ve(s)?Dp(t):new R(null,2,5,S,[s,t],null),t=I(s,0,null),s=I(s,1,null),s=Cp(s);var o=I(s,0,null);s=I(s,1,null);for(var f=0;;){var d=Ve(o)&&(gc(Jp.g(qs.g(n)))||0<f);if(l(d||(l(i)?f>=i:i))||(d=Qq(t,sp(z(o)),sp(C(o))),E.h(Iq,z(d))))return s;f+=1,o=C(o)}},Es=function(n,t){var i=ps.g(n),s=z(ks.g(n)),o=Ve(s)?Dp(t):new R(null,2,5,S,[s,t],null);t=I(o,0,null),s=0,o=I(o,1,null);for(var f=-1;;){if(gc(i)&&E.h(Ao.g(o),f)&&1<s)throw Error("%@{ construct not consuming any arguments: Infinite loop!");if(f=Ve(Ap.g(o))&&(gc(Jp.g(qs.g(n)))||0<s),l(f||(l(i)?s>=i:i)))return o;if(f=Qq(t,o,Oq.g(n)),E.h(Hq,z(f)))return Ke(f);s+=1;var d=Ao.g(o);o=f,f=d}},Hs=function(n,t){var i=ps.g(n),s=z(ks.g(n)),o=Ve(s)?Dp(t):new R(null,2,5,S,[s,t],null);for(t=I(o,0,null),s=0,o=I(o,1,null);;){var f=Ve(Ap.g(o))&&(gc(Jp.g(qs.g(n)))||0<s);if(l(f||(l(i)?s>=i:i)))return o;if(f=Ap.g(o),f=l(f)?new R(null,2,5,S,[z(f),new zp(Bp.g(o),C(f),Ao.g(o)+1,null,null,null)],null):new R(null,2,5,S,[null,o],null),o=I(f,0,null),f=I(f,1,null),o=Qq(t,sp(o),f),E.h(Iq,z(o)))return f;o=f,s+=1}},Ws=function(n,t){if(l(Jp.g(qs.g(n)))){var i=ks.g(n),s=D(i),o=1<s?Ts.g(Nq.g(z(z(i)))):l(Jp.g(n))?"(":null,f=Ee(i,1<s?1:0);if(i=2<s?Ts.g(Nq.g(z(Ee(i,2)))):l(Jp.g(n))?")":null,s=Cp(t),t=I(s,0,null),s=I(s,1,null),l(dp()))qd(Sm,"#");else{var d=cp,p=Yo;cp+=1,Yo=0;try{Qo(o,i),Qq(f,sp(t),Oq.g(n)),Vo()}finally{Yo=p,cp=d}}n=s}else n=Us(n,t);return n},Xs=function(n,t,i){for(var s=lh;;){if(Ve(n))return new R(null,2,5,S,[s,t],null);var o=z(n);e:{var f=new Pb,d=Sm;Sm=new Od(f);try{var p=new R(null,2,5,S,[Qq(o,t,i),m.g(f)],null);break e}finally{Sm=d}p=void 0}if(t=I(p,0,null),o=I(p,1,null),E.h(Hq,z(t)))return new R(null,2,5,S,[s,Ke(t)],null);n=C(n),s=Qf.h(s,o)}},Us=function(n,t){var i=function(){var me=ls.g(n);return l(me)?Xs(me,t,Oq.g(n)):null}(),s=I(i,0,null);s=I(s,0,null),i=I(i,1,null);var o=l(i)?i:t;i=function(){var me=Ys.g(n);return l(me)?Sp(me,o):null}();var f=I(i,0,null);i=I(i,1,null);var d=l(i)?i:o;i=function(){var me=z($s.g(f));return l(me)?me:0}();var p=function(){var me=z(at.g(f));return l(me)?me:rn(Sm,ao)}(),v=ks.g(n);d=Xs(v,d,Oq.g(n));var _=I(d,0,null);d=I(d,1,null);var k=function(){var me=D(_)-1+(l(Jp.g(n))?1:0)+(l(Kp.g(n))?1:0);return 1>me?1:me}();v=Af(gK,O.h(D,_));var P=Yp.g(n),L=Xp.g(n),G=Zp.g(n),Z=v+k*L;P=Z<=P?P:P+G*(1+Jf(Z-P-1,G));var W=P-v;v=function(){var me=Jf(W,k);return L>me?L:me}(),G=W-v*k,v=Kg.h(m,ah(v,aq.g(n))),l(l(s)?rn(vn.g(q(q(Sm))),tn)+i+P>p:s)&&bq.j(F([s])),i=G;for(var j=_,H=function(){var me=Jp.g(n);return l(me)?me:E.h(D(j),1)&&gc(Kp.g(n))}();w(j);)bq.j(F([[m.g(gc(H)?z(j):null),m.g(l(function(){var me=H;return l(me)||(me=C(j))?me:Kp.g(n)}())?v:null),m.g(0<i?aq.g(n):null)].join("")])),--i,j=s=l(H)?j:C(j),H=!1;return d},bt=function(n,t){this.Sh=n,this.ui=t,this.A=1074135040,this.N=0},ct=function(n){return new bt(n,og)},dt=function(n,t){this.Sh=n,this.vi=t,this.A=1074135040,this.N=0},et=function(n){return new dt(n,og)},ft=function(n,t){var i=z(n);return Kg.h(m,z(mn(function(s){if(Ve(s))return new R(null,2,5,S,[null,null],null);var o=RegExp("\\W\\w","g").exec(s);return o=l(o)?o.index+1:o,l(o)?new R(null,2,5,S,[[s.substring(0,o),Ee(s,o).toUpperCase()].join(""),s.substring(o+1)],null):new R(null,2,5,S,[s,null],null)},l(l(t)?l(i)?ra(i):i:t)?[i.toUpperCase(),n.substring(1)].join(""):n)))},ht=function(n,t,i){this.Sh=n,this.ki=t,this.wi=i,this.A=1074135040,this.N=0},it=function(n){return new ht(n,Tg(!0),og)},jt=function(n,t,i){this.Sh=n,this.ji=t,this.xi=i,this.A=1074135040,this.N=0},lt=function(n){return new jt(n,Tg(!1),og)},nt=function(n,t){var i=l(Jp.g(n))?op:np;return qp(i,hs.g(n)),t},qt=function(n,t){return n=l(Jp.g(n))?l(Kp.g(n))?ep:jp:l(Kp.g(n))?fp:kp,mp(n),t},ut=function(n){var t=I(n,0,null),i=I(n,1,null),s=I(n,2,null);n=new RegExp(rt.source,"g");var o=n.exec(t);return l(o)?(s=z(o),t=t.substring(n.lastIndex),n=i+n.lastIndex,E.h(",",Ee(t,0))?new R(null,2,5,S,[new R(null,2,5,S,[s,i],null),new R(null,3,5,S,[t.substring(1),n+1,!0],null)],null):new R(null,2,5,S,[new R(null,2,5,S,[s,i],null),new R(null,3,5,S,[t,n,!1],null)],null)):l(s)?yp("Badly formed parameters in format directive",i):new R(null,2,5,S,[null,new R(null,2,5,S,[t,i],null)],null)},vt=function(n){var t=I(n,0,null);return n=I(n,1,null),new R(null,2,5,S,[E.h(t.length,0)?null:E.h(t.length,1)&&lf(new jj(null,new h(null,2,["V",null,"v",null],null),null),Ee(t,0))?Mp:E.h(t.length,1)&&E.h("#",Ee(t,0))?Op:E.h(t.length,2)&&E.h("'",Ee(t,0))?Ee(t,1):parseInt(t,10),n],null)},Jt=function(n,t){return mn(function(i){var s=I(i,0,null),o=I(i,1,null);if(i=I(i,2,null),Ve(s))return new R(null,2,5,S,[null,new R(null,3,5,S,[s,o,i],null)],null);var f=J.h(Ft,z(s));return l(f)?lf(i,f)?yp(['Flag "',m.g(z(s)),'" appears more than once in a directive'].join(""),o):new R(null,2,5,S,[!0,new R(null,3,5,S,[s.substring(1),o+1,gj.l(i,f,new R(null,2,5,S,[!0,o],null))],null)],null):new R(null,2,5,S,[null,new R(null,3,5,S,[s,o,i],null)],null)},new R(null,3,5,S,[n,t,og],null))},Wt=function(n,t){var i=Mt.g(n);l(function(){var s=gc(Kp.g(i));return s&&Kp.g(t)}())&&yp(['"@" is an illegal flag for format directive "',m.g(Ut.g(n)),'"'].join(""),Ee(Kp.g(t),1)),l(function(){var s=gc(Jp.g(i));return s&&Jp.g(t)}())&&yp(['":" is an illegal flag for format directive "',m.g(Ut.g(n)),'"'].join(""),Ee(Jp.g(t),1)),l(function(){var s=gc(Vt.g(i));return s&&(s=Kp.g(t),l(s)?Jp.g(t):s)}())&&yp(['Cannot combine "@" and ":" flags for format directive "',m.g(Ut.g(n)),'"'].join(""),function(){var s=Ee(Jp.g(t),1),o=Ee(Kp.g(t),1);return s<o?s:o}())},Yt=function(n,t,i,s){return Wt(n,i),D(t)>D(Nq.g(n))&&yp(vp(null,'Too many parameters for directive "~C": ~D~:* ~[were~;was~:;were~] specified but only ~D~:* ~[are~;is~:;are~] allowed',F([Ut.g(n),D(t),D(Nq.g(n))])),Ke(z(t))),Aj(O.l(function(o,f){var d=z(o);return d==null||lf(Xt,d)||E.h(Ke(Ke(f)),jc(d))?null:yp(["Parameter ",qj(z(f)),' has bad type in directive "',m.g(Ut.g(n)),'": ',m.g(jc(d))].join(""),Ke(o))},t,Nq.g(n))),Al.j(F([Ng.h(og,Rf(function(){return function o(f){return new Yf(null,function(){for(;;){var d=w(f);if(d){if(df(d)){var p=Fd(d),v=D(p),_=ag(v);e:for(var k=0;;)if(k<v){var P=Oe(p,k),L=I(P,0,null);P=I(P,1,null),P=I(P,0,null),_.add(new R(null,2,5,S,[L,new R(null,2,5,S,[P,s],null)],null)),k+=1}else{p=!0;break e}return p?dg(_.fa(),o(Gd(d))):dg(_.fa(),null)}return p=z(d),_=I(p,0,null),p=I(p,1,null),p=I(p,0,null),Tf(new R(null,2,5,S,[_,new R(null,2,5,S,[p,s],null)],null),o(he(d)))}return null}},null,null)}(Nq.g(n))}())),nc(function(o,f){return Kg.l(gj,o,f)},og,jh.h(function(o){return z(Ee(o,1))},rj(bj(Nq.g(n)),t))),i]))},au=function(n,t){t=mn(ut,new R(null,3,5,S,[n,t,!1],null)),n=I(t,0,null);var i=I(t,1,null);t=I(i,0,null),i=I(i,1,null),t=Jt(t,i),I(t,0,null),t=I(t,1,null);var s=I(t,0,null),o=I(t,1,null);t=I(t,2,null),i=z(s);var f=J.h(Zt,i.toUpperCase()),d=l(f)?Yt(f,O.h(vt,n),t,o):null;return gc(i)&&yp("Format string ended in the middle of a directive",o),gc(f)&&yp(['Directive "',m.g(i),'" is undefined'].join(""),o),new R(null,2,5,S,[new Hp(function(){var p=$t.g(f);return p.h?p.h(d,o):p.call(null,d,o)}(),f,d,o,null,null,null),function(){var p=s.substring(1),v=o+1;if(E.h(`
`,Ut.g(f))&&gc(Jp.g(d)))e:{var _=new R(null,2,5,S,[" ","	"],null);_=We(_)?oj(_):lj([_]);for(var k=0;;){var P;if((P=E.h(k,D(p)))||(P=Ee(p,k),P=_.g?_.g(P):_.call(null,P),P=gc(P)),P){_=k;break e}k+=1}}else _=0;return new R(null,2,5,S,[p.substring(_),v+_],null)}()],null)},bu=function(n,t){return new Hp(function(i,s){return bq.j(F([n])),s},null,new h(null,1,[Ts,n],null),t,null,null,null)},ju=function(n,t){var i=fu(gu.g(hu.g(n)),iu.g(n),t);return t=I(i,0,null),i=I(i,1,null),new R(null,2,5,S,[new Hp(Pq.g(n),hu.g(n),Al.j(F([Nq.g(n),on(t,iu.g(n))])),iu.g(n),null,null,null),i],null)},nu=function(n,t,i){return mn(function(s){if(Ve(s))return yp("No closing bracket found.",t);var o=z(s);if(s=C(s),l(ku.g(gu.g(hu.g(o)))))o=ju(o,s);else if(E.h(ku.g(n),Ut.g(hu.g(o))))o=new R(null,2,5,S,[null,new R(null,4,5,S,[lu,Nq.g(o),null,s],null)],null);else{var f=mu.g(gu.g(hu.g(o)));f=l(f)?Jp.g(Nq.g(o)):f,o=l(f)?new R(null,2,5,S,[null,new R(null,4,5,S,[ls,null,Nq.g(o),s],null)],null):l(mu.g(gu.g(hu.g(o))))?new R(null,2,5,S,[null,new R(null,4,5,S,[mu,null,null,s],null)],null):new R(null,2,5,S,[o,s],null)}return o},i)},fu=function(n,t,i){return Ke(mn(function(s){var o=I(s,0,null),f=I(s,1,null);s=I(s,2,null);var d=nu(n,t,s);s=I(d,0,null);var p=I(d,1,null);d=I(p,0,null);var v=I(p,1,null),_=I(p,2,null);return p=I(p,3,null),E.h(d,lu)?new R(null,2,5,S,[null,new R(null,2,5,S,[ou.j(fh,F([o,ng([l(f)?ls:ks,new R(null,1,5,S,[s],null),qs,v])])),p],null)],null):E.h(d,ls)?l(ls.g(o))?yp('Two else clauses ("~:;") inside bracket construction.',t):gc(ls.g(n))?yp(`An else clause ("~:;") is in a bracket type that doesn't support it.`,t):E.h(qu,ls.g(n))&&w(ks.g(o))?yp('The else clause ("~:;") is only allowed in the first position for this directive.',t):E.h(qu,ls.g(n))?new R(null,2,5,S,[!0,new R(null,3,5,S,[ou.j(fh,F([o,new h(null,2,[ls,new R(null,1,5,S,[s],null),Ys,_],null)])),!1,p],null)],null):new R(null,2,5,S,[!0,new R(null,3,5,S,[ou.j(fh,F([o,new h(null,1,[ks,new R(null,1,5,S,[s],null)],null)])),!0,p],null)],null):E.h(d,mu)?l(f)?yp('A plain clause (with "~;") follows an else clause ("~:;") inside bracket construction.',t):gc(ru.g(n))?yp(`A separator ("~;") is in a bracket type that doesn't support it.`,t):new R(null,2,5,S,[!0,new R(null,3,5,S,[ou.j(fh,F([o,new h(null,1,[ks,new R(null,1,5,S,[s],null)],null)])),!1,p],null)],null):null},new R(null,3,5,S,[new h(null,1,[ks,lh],null),!1,i],null)))},su=function(n){return z(mn(function(t){var i=z(t);t=C(t);var s=gu.g(hu.g(i));return l(ku.g(s))?ju(i,t):new R(null,2,5,S,[i,t],null)},n))},rp=function(n){var t=xp;xp=n;try{return su(z(mn(function(i){var s=I(i,0,null);if(i=I(i,1,null),Ve(s))return new R(null,2,5,S,[null,s],null);var o=s.indexOf("~");return 0>o?new R(null,2,5,S,[bu(s,i),new R(null,2,5,S,["",i+s.length],null)],null):o===0?au(s.substring(1),i+1):new R(null,2,5,S,[bu(s.substring(0,o),i),new R(null,2,5,S,[s.substring(o),o+i],null)],null)},new R(null,2,5,S,[n,0],null))))}finally{xp=t}},up=function(n,t){return ln(function(i,s){if(Mq(s))return new R(null,2,5,S,[null,s],null);s=Sp(Nq.g(i),s);var o=I(s,0,null);s=I(s,1,null);var f=nn(o);return o=I(f,0,null),f=I(f,1,null),o=gj.l(o,Oq,s),new R(null,2,5,S,[null,Kg.h(Pq.g(i),new R(null,3,5,S,[o,s,f],null))],null)},t,n),null},fv=function(n){var t=z(n);return t=uu.g?uu.g(t):uu.call(null,t),l(l(t)?E.h(2,D(n)):t)?(qd(Sm,t),ap(Ke(n)),!0):null},iv=function(n){if(l(dp()))qd(Sm,"#");else{var t=cp,i=Yo;cp+=1,Yo=0;try{Qo("[","]");for(var s=0,o=w(n);;){if(gc(ob)||s<ob){if(o&&(ap(z(o)),C(o))){qd(Sm," "),mp(kp),n=s+1;var f=C(o);s=n,o=f;continue}}else qd(Sm,"...");break}Vo()}finally{Yo=i,cp=t}}return null},Nv=function(n){var t=bf(n)?null:function(){var v=new gg(function(){return Zj},jv,Ni([kv,lv,mv,rv,tv,uv,un,vv,wv,xv,Fv],[!0,Hv,Kv,"cljs/core.cljs",15,1,10543,10543,ux(new R(null,1,5,S,[Mv],null)),"Returns [lifted-ns lifted-map] or nil if m can't be lifted.",l(Zj)?Zj.Ai:null]));return v.g?v.g(n):v.call(null,n)}(),i=I(t,0,null);t=I(t,1,null);var s=l(t)?t:n,o=l(i)?["#:",m.g(i),"{"].join(""):"{";if(l(dp()))qd(Sm,"#");else{i=cp,t=Yo,cp+=1,Yo=0;try{Qo(o,"}"),o=0;for(var f=w(s);;){if(gc(ob)||o<ob){if(f){if(l(dp()))qd(Sm,"#");else{s=cp;var d=Yo;cp+=1,Yo=0;try{Qo(null,null),ap(z(z(f))),qd(Sm," "),mp(kp),Yo=0,ap(z(C(z(f)))),Vo()}finally{Yo=d,cp=s}}if(C(f)){qd(Sm,", "),mp(kp),s=o+1;var p=C(f);o=s,f=p;continue}}}else qd(Sm,"...");break}Vo()}finally{Yo=t,cp=i}}return null},Ov=function(n){return qd(Sm,im.j(F([n])))},$v=function(n){return n instanceof Vh?Pv:(n!=null?n.A&32768||Zd===n.$e||!n.A&&ic(Zc,n):ic(Zc,n))?Qv:n instanceof r?Rv:ff(n)?Tv:Ze(n)?Uv:cf(n)?Vv:Xe(n)?Zv:n==null?null:sm},nw=function(n){return cf(n)?new R(null,2,5,S,["[","]"],null):new R(null,2,5,S,["(",")"],null)},pw=function(n){if(Ye(n)){var t=nw(n),i=I(t,0,null),s=I(t,1,null),o=w(n),f=z(o),d=C(o);if(l(dp()))qd(Sm,"#");else{var p=cp,v=Yo,_=cp+1;cp=_,Yo=0;try{Qo(i,s),function(){var Ce=ow("~w~:i");return function(){function Me(_i){var ll=null;if(0<arguments.length){ll=0;for(var _l=Array(arguments.length-0);ll<_l.length;)_l[ll]=arguments[ll+0],++ll;ll=new u(_l,0,null)}return _n.call(this,ll)}function _n(_i){return _i=sp(_i),up(Ce,_i)}return Me.v=0,Me.B=function(_i){return _i=w(_i),_n(_i)},Me.j=_n,Me}()}()(f);for(var k=d;w(k);){(function(){var Ce=ow(" ");return function(Me,_n,_i){return function(){function ll(oa){var Ru=null;if(0<arguments.length){Ru=0;for(var ga=Array(arguments.length-0);Ru<ga.length;)ga[Ru]=arguments[Ru+0],++Ru;Ru=new u(ga,0,null)}return _l.call(this,Ru)}function _l(oa){return oa=sp(oa),up(_i,oa)}return ll.v=0,ll.B=function(oa){return oa=w(oa),_l(oa)},ll.j=_l,ll}()}(k," ",Ce,p,v,_,0,t,i,s,n,o,f,d,f,d)})()();var P=z(k);if(Ye(P)){var L=nw(P),G=I(L,0,null),Z=I(L,1,null);if(l(dp()))qd(Sm,"#");else{var W=cp,j=Yo,H=cp+1;cp=H,Yo=0;try{if(Qo(G,Z),E.h(D(P),3)&&Ke(P)instanceof K){var me=P,$e=I(me,0,null),De=I(me,1,null),le=I(me,2,null);(function(){var Ce=ow("~w ~w ");return function(Me,_n,_i){return function(){function ll(oa){var Ru=null;if(0<arguments.length){Ru=0;for(var ga=Array(arguments.length-0);Ru<ga.length;)ga[Ru]=arguments[Ru+0],++Ru;Ru=new u(ga,0,null)}return _l.call(this,Ru)}function _l(oa){return oa=sp(oa),up(_i,oa)}return ll.v=0,ll.B=function(oa){return oa=w(oa),_l(oa)},ll.j=_l,ll}()}(k,"~w ~w ",Ce,me,$e,De,le,W,j,H,0,L,G,Z,P,p,v,_,0,t,i,s,n,o,f,d,f,d)})()($e,De),Ye(le)?function(){var Ce=cf(le)?"~<[~;~@{~w~^ ~:_~}~;]~:>":"~<(~;~@{~w~^ ~:_~}~;)~:>",Me=typeof Ce=="string"?ow(Ce):Ce;return function(_n,_i,ll){return function(){function _l(Ru){var ga=null;if(0<arguments.length){ga=0;for(var _s=Array(arguments.length-0);ga<_s.length;)_s[ga]=arguments[ga+0],++ga;ga=new u(_s,0,null)}return oa.call(this,ga)}function oa(Ru){return Ru=sp(Ru),up(ll,Ru)}return _l.v=0,_l.B=function(Ru){return Ru=w(Ru),oa(Ru)},_l.j=oa,_l}()}(k,Ce,Me,me,$e,De,le,W,j,H,0,L,G,Z,P,p,v,_,0,t,i,s,n,o,f,d,f,d)}()(le):ap(le)}else Kg.h(function(){var Ce=ow("~w ~:i~@{~w~^ ~:_~}");return function(Me,_n,_i){return function(){function ll(oa){var Ru=null;if(0<arguments.length){Ru=0;for(var ga=Array(arguments.length-0);Ru<ga.length;)ga[Ru]=arguments[Ru+0],++Ru;Ru=new u(ga,0,null)}return _l.call(this,Ru)}function _l(oa){return oa=sp(oa),up(_i,oa)}return ll.v=0,ll.B=function(oa){return oa=w(oa),_l(oa)},ll.j=_l,ll}()}(k,"~w ~:i~@{~w~^ ~:_~}",Ce,W,j,H,0,L,G,Z,P,p,v,_,0,t,i,s,n,o,f,d,f,d)}(),P);Vo()}finally{Yo=j,cp=W}}C(k)&&function(){var Ce=ow("~_");return function(Me,_n,_i){return function(){function ll(oa){var Ru=null;if(0<arguments.length){Ru=0;for(var ga=Array(arguments.length-0);Ru<ga.length;)ga[Ru]=arguments[Ru+0],++Ru;Ru=new u(ga,0,null)}return _l.call(this,Ru)}function _l(oa){return oa=sp(oa),up(_i,oa)}return ll.v=0,ll.B=function(oa){return oa=w(oa),_l(oa)},ll.j=_l,ll}()}(k,"~_",Ce,L,G,Z,P,p,v,_,0,t,i,s,n,o,f,d,f,d)}()()}else ap(P),C(k)&&function(){var Ce=ow("~:_");return function(Me,_n,_i){return function(){function ll(oa){var Ru=null;if(0<arguments.length){Ru=0;for(var ga=Array(arguments.length-0);Ru<ga.length;)ga[Ru]=arguments[Ru+0],++Ru;Ru=new u(ga,0,null)}return _l.call(this,Ru)}function _l(oa){return oa=sp(oa),up(_i,oa)}return ll.v=0,ll.B=function(oa){return oa=w(oa),_l(oa)},ll.j=_l,ll}()}(k,"~:_",Ce,P,p,v,_,0,t,i,s,n,o,f,d,f,d)}()();k=C(k)}Vo()}finally{Yo=v,cp=p}}}else ap(n)},rw=function(n,t){w(n)&&(l(t)?function(){var i=ow(" ~_");return function(){function s(f){var d=null;if(0<arguments.length){d=0;for(var p=Array(arguments.length-0);d<p.length;)p[d]=arguments[d+0],++d;d=new u(p,0,null)}return o.call(this,d)}function o(f){return f=sp(f),up(i,f)}return s.v=0,s.B=function(f){return f=w(f),o(f)},s.j=o,s}()}()():function(){var i=ow(" ~@_");return function(){function s(f){var d=null;if(0<arguments.length){d=0;for(var p=Array(arguments.length-0);d<p.length;)p[d]=arguments[d+0],++d;d=new u(p,0,null)}return o.call(this,d)}function o(f){return f=sp(f),up(i,f)}return s.v=0,s.B=function(f){return f=w(f),o(f)},s.j=o,s}()}()(),function(){var i=ow("~{~w~^ ~_~}");return function(){function s(f){var d=null;if(0<arguments.length){d=0;for(var p=Array(arguments.length-0);d<p.length;)p[d]=arguments[d+0],++d;d=new u(p,0,null)}return o.call(this,d)}function o(f){return f=sp(f),up(i,f)}return s.v=0,s.B=function(f){return f=w(f),o(f)},s.j=o,s}()}()(n))},Hw=function(n){w(n)&&function(){var t=ow(" ~_~{~w~^ ~_~}");return function(){function i(o){var f=null;if(0<arguments.length){f=0;for(var d=Array(arguments.length-0);f<d.length;)d[f]=arguments[f+0],++f;f=new u(d,0,null)}return s.call(this,f)}function s(o){return o=sp(o),up(t,o)}return i.v=0,i.B=function(o){return o=w(o),s(o)},i.j=s,i}()}()(n)},Kw=function(n){if(C(n)){var t=w(n);n=z(t);var i=C(t);t=z(i),i=C(i);var s=typeof z(i)=="string"?new R(null,2,5,S,[z(i),C(i)],null):new R(null,2,5,S,[null,i],null);i=I(s,0,null),s=I(s,1,null);var o=Ze(z(s))?new R(null,2,5,S,[z(s),C(s)],null):new R(null,2,5,S,[null,s],null);if(s=I(o,0,null),o=I(o,1,null),l(dp()))qd(Sm,"#");else{var f=cp,d=Yo;cp+=1,Yo=0;try{Qo("(",")"),function(){var p=ow("~w ~1I~@_~w");return function(){function v(k){var P=null;if(0<arguments.length){P=0;for(var L=Array(arguments.length-0);P<L.length;)L[P]=arguments[P+0],++P;P=new u(L,0,null)}return _.call(this,P)}function _(k){return k=sp(k),up(p,k)}return v.v=0,v.B=function(k){return k=w(k),_(k)},v.j=_,v}()}()(n,t),l(i)&&function(){var p=ow(" ~_~w");return function(){function v(k){var P=null;if(0<arguments.length){P=0;for(var L=Array(arguments.length-0);P<L.length;)L[P]=arguments[P+0],++P;P=new u(L,0,null)}return _.call(this,P)}function _(k){return k=sp(k),up(p,k)}return v.v=0,v.B=function(k){return k=w(k),_(k)},v.j=_,v}()}()(i),l(s)&&function(){var p=ow(" ~_~w");return function(){function v(k){var P=null;if(0<arguments.length){P=0;for(var L=Array(arguments.length-0);P<L.length;)L[P]=arguments[P+0],++P;P=new u(L,0,null)}return _.call(this,P)}function _(k){return k=sp(k),up(p,k)}return v.v=0,v.B=function(k){return k=w(k),_(k)},v.j=_,v}()}()(s),cf(z(o))?rw(o,l(i)?i:s):Hw(o),Vo()}finally{Yo=d,cp=f}}return null}return Iw(n)},Rw=function(n){if(l(dp()))qd(Sm,"#");else{var t=cp,i=Yo;cp+=1,Yo=0;try{Qo("[","]");for(var s=0;;){if(gc(ob)||s<ob){if(w(n)){if(l(dp()))qd(Sm,"#");else{var o=cp,f=Yo;cp+=1,Yo=0;try{Qo(null,null),ap(z(n)),C(n)&&(qd(Sm," "),mp(fp),ap(Ke(n))),Vo()}finally{Yo=f,cp=o}}if(C(he(n))){qd(Sm," "),mp(kp),o=s+1;var d=C(he(n));s=o,n=d;continue}}}else qd(Sm,"...");break}Vo()}finally{Yo=i,cp=t}}},cx=function(n){var t=z(n);if(l(dp()))qd(Sm,"#");else{var i=cp,s=Yo;cp+=1,Yo=0;try{Qo("(",")"),C(n)&&cf(Ke(n))?(function(){var o=ow("~w ~1I~@_");return function(){function f(p){var v=null;if(0<arguments.length){v=0;for(var _=Array(arguments.length-0);v<_.length;)_[v]=arguments[v+0],++v;v=new u(_,0,null)}return d.call(this,v)}function d(p){return p=sp(p),up(o,p)}return f.v=0,f.B=function(p){return p=w(p),d(p)},f.j=d,f}()}()(t),Rw(Ke(n)),function(){var o=ow(" ~_~{~w~^ ~_~}");return function(){function f(p){var v=null;if(0<arguments.length){v=0;for(var _=Array(arguments.length-0);v<_.length;)_[v]=arguments[v+0],++v;v=new u(_,0,null)}return d.call(this,v)}function d(p){return p=sp(p),up(o,p)}return f.v=0,f.B=function(p){return p=w(p),d(p)},f.j=d,f}()}()(C(he(n)))):Iw(n),Vo()}finally{Yo=s,cp=i}}return null},Iw=function(n){if(l(dp()))qd(Sm,"#");else{var t=cp,i=Yo;cp+=1,Yo=0;try{Qo("(",")"),qp(np,1);for(var s=0,o=w(n);;){if(gc(ob)||s<ob){if(o&&(ap(z(o)),C(o))){qd(Sm," "),mp(kp),n=s+1;var f=C(o);s=n,o=f;continue}}else qd(Sm,"...");break}Vo()}finally{Yo=i,cp=t}}return null},Rk=function(n,t,i,s){var o=D(t);return n=l(n)?0:10<o?10:o,t=O.h(Pk.h(Qk,!0),Vg(n,t)),t=Kg.h(m,eh(" ",t)),o=n<o?"...":null,[m.g(i),m.g(t),o,m.g(s)].join("")},Sk=function(n){return n=parseInt(n,10),gc(isNaN(n))?n:null},Tk=function(n,t,i,s){if(!(n<=t&&t<=i))throw Error([m.g(s)," Failed:  ",m.g(n),"<=",m.g(t),"<=",m.g(i)].join(""));return t},Wk=function(n){var t=Bj(Uk,n);I(t,0,null);var i=I(t,1,null),s=I(t,2,null),o=I(t,3,null),f=I(t,4,null),d=I(t,5,null),p=I(t,6,null),v=I(t,7,null),_=I(t,8,null),k=I(t,9,null),P=I(t,10,null);if(gc(t))throw Error(["Unrecognized date/time syntax: ",m.g(n)].join(""));n=Sk(i),t=function(){var j=Sk(s);return l(j)?j:1}(),i=function(){var j=Sk(o);return l(j)?j:1}();var L=function(){var j=Sk(f);return l(j)?j:0}(),G=function(){var j=Sk(d);return l(j)?j:0}(),Z=function(){var j=Sk(p);return l(j)?j:0}(),W=function(){e:if(E.h(3,D(v)))var j=v;else if(3<D(v))j=v.substring(0,3);else for(j=new Pb(v);;)if(3>j.getLength())j=j.append("0");else{j=j.toString();break e}return j=Sk(j),l(j)?j:0}();return _=(E.h(_,"-")?-1:1)*(60*function(){var j=Sk(k);return l(j)?j:0}()+function(){var j=Sk(P);return l(j)?j:0}()),new R(null,8,5,S,[n,Tk(1,t,12,"timestamp month field must be in range 1..12"),Tk(1,i,Vk(t,If(n,4)===0&&(If(n,100)!==0||If(n,400)===0)),"timestamp day field must be in range 1..last day in month"),Tk(0,L,23,"timestamp hour field must be in range 0..23"),Tk(0,G,59,"timestamp minute field must be in range 0..59"),Tk(0,Z,E.h(G,59)?60:59,"timestamp second field must be in range 0..60"),Tk(0,W,999,"timestamp millisecond field must be in range 0..999"),_],null)},Xk=function(n){return 2>D(n)?n.toUpperCase():[n.substring(0,1).toUpperCase(),n.substring(1)].join("")},Zk=function(n){if(typeof n=="string")return n;n=qj(n);var t=Ok(n,/-/),i=w(t);return t=z(i),i=C(i),l(Yk.g?Yk.g(t):Yk.call(null,t))?n:Kg.l(m,t,O.h(Xk,i))},al=function(n){var t=function(){var i=function(){var s=Qe(n);return s&&(s=n.displayName,l(s)?s:(s=n.name,typeof s=="string"&&w(s)?s:null))}();return l(i)||(i=function(){var s=n!=null?!!(n.N&4096||Zd===n.Vf):!1;return s&&qj(n)}(),l(i))?i:(i=Te(n),Ze(i)?mv.g(i):null)}();return l(t)?Mk(m.g(t),"$","."):null},bl=function(n){return n instanceof K||n instanceof r},dl=function(n){if(Ze(n))try{var t=J.h(n,fx)}catch{t=null}else t=null;return t},el=function(n){var t=fx.g(Te(n));if(l(t)||(t=dl(I(n,1,null)),l(t)))return t;switch(t=I(n,0,null),t instanceof K?t.U:null){case">":case"f>":return dl(I(n,2,null));case"r>":return n=I(n,2,null),n==null?null:n.key;default:return null}},fl=function(n){return setTimeout(n,16)},gl=function(n,t){return n.jf-t.jf},hl=function(){return null},il=function(n){for(var t=n.length,i=0;;)if(i<t){var s=n[i];s.G?s.G():s.call(null),i+=1}else return null},jl=function(n,t,i){return t.push(i),n.schedule()},ml=function(){this.De=!1},ol=function(n){return l(n.cljsIsDirty)?null:(n.cljsIsDirty=!0,nl.queue_render(n))},pl=function(n){if(n!=null&&n.th!=null)n=n.id;else{var t=pl[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=pl._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("Compiler.get-id",n)}return n},ql=function(n,t,i){if(n!=null&&n.vg!=null)n=n.vg(n,t,i);else{var s=ql[aa(n??null)];if(s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else if(s=ql._,s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else throw kc("Compiler.parse-tag",n)}return n},rl=function(n,t){if(n!=null&&n.tg!=null)n=n.tg(n,t);else{var i=rl[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=rl._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("Compiler.as-element",n)}return n},sl=function(n,t,i,s,o){if(n!=null&&n.ug!=null)n=n.ug(n,t,i,s,o);else{var f=sl[aa(n??null)];if(f!=null)n=f.O?f.O(n,t,i,s,o):f.call(null,n,t,i,s,o);else if(f=sl._,f!=null)n=f.O?f.O(n,t,i,s,o):f.call(null,n,t,i,s,o);else throw kc("Compiler.make-element",n)}return n},vl=function(n,t){var i=Kg.l(tl,n,t);return Tf(i,ul.h(function(s){return i===s},t))},xl=function(n,t){return nc(function(i,s){var o=I(s,0,null);return s=I(s,1,null),lf(n,o)?gj.l(i,s,J.h(n,o)):i},Kg.l(wl,n,bj(t)),t)},yl=function(n,t){return nc(function(i,s){var o=hj(s,t);return gj.l(i,o,Qf.h(J.l(i,o,kj),s))},og,n)},Bl=function(n,t){if(w(n)&&w(t)){var i=zl.h(oj(bj(z(n))),oj(bj(z(t))));t=D(n)<=D(t)?new R(null,2,5,S,[n,t],null):new R(null,2,5,S,[t,n],null),n=I(t,0,null),t=I(t,1,null);var s=yl(n,i);return nc(function(o,f){var d=function(){var p=hj(f,i);return s.g?s.g(p):s.call(null,p)}();return l(d)?nc(function(p,v){return Qf.h(p,Al.j(F([v,f])))},o,d):o},kj,t)}return kj},Dl=function(n,t){t.We=null;e:{var i=Cl;Cl=t;try{var s=n.G?n.G():n.call(null);break e}finally{Cl=i}s=void 0}n=t.We,t.Ac=!1;e:{i=t.Tc;var o=n==null?0:n.length,f=o===(i==null?0:i.length);if(f)for(f=0;;){var d=f===o;if(d){i=d;break e}if(n[f]===i[f])f+=1;else{i=!1;break e}}else i=f}return i||t._update_watching(n),s},El=function(n){var t=Cl;if(t!=null){var i=t.We;i==null?t.We=[n]:i.push(n)}},Fl=function(n,t,i){return n.Na=gj.l(n.Na,t,i),n.Jf=null},Gl=function(n,t){return n.Na=wl.h(n.Na,t),n.Jf=null},Hl=function(n,t,i){var s=n.Jf;s=s??(n.Jf=Cf(function(v,_,k){return v.push(_),v.push(k),v},[],n.Na));for(var o=s.length,f=0;;)if(f<o){var d=s[f],p=s[f+1];p.K?p.K(d,n,t,i):p.call(null,d,n,t,i),f=2+f}else return null},Il=function(n,t,i,s){qd(n,["#object[reagent.ratom.",m.g(i)," "].join(""));e:{i=Cl,Cl=null;try{var o=s;break e}finally{Cl=i}o=void 0}return Mj(o,n,t),qd(n,"]")},Jl=function(n,t,i,s){this.state=n,this.D=t,this.If=i,this.Na=s,this.A=2154201088,this.N=114690},Ml=function(n,t,i,s){var o=t.Af;o=o??og;var f=o.h?o.h(i,null):o.call(null,i,null);if(f!=null)return q(f);if(Cl==null)return n.G?n.G():n.call(null);f=function(){function p(){var v=wl.h(t.Af,i);return t.Af=v,s!=null&&(s.Md=null),null}return Kl.l?Kl.l(n,gx,p):Kl.call(null,n,gx,p)}();var d=q(f);return t.Af=gj.l(o,i,f),s!=null&&(s.Md=f),d},Nl=function(n,t,i){this.f=n,this.nd=t,this.Md=i,this.A=2153807872,this.N=0},Ol=function(n,t,i,s,o){this.Da=n,this.path=t,this.Md=i,this.state=s,this.Na=o,this.A=2153807872,this.N=114690},Pl=function(n){if(n!=null&&n.Bf!=null)n=n.Bf(n);else{var t=Pl[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Pl._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IDisposable.dispose!",n)}return n},Ql=function(n,t){if(n!=null&&n.wg!=null)n.wg(n,t);else{var i=Ql[aa(n??null)];if(i!=null)i.h?i.h(n,t):i.call(null,n,t);else if(i=Ql._,i!=null)i.h?i.h(n,t):i.call(null,n,t);else throw kc("IDisposable.add-on-dispose!",n)}},Rl=function(n,t,i,s){return n._handle_change(t,i,s)},Sl=function(n,t,i,s,o,f,d,p){this.f=n,this.state=t,this.Ac=i,this.jg=s,this.Tc=o,this.Na=f,this.Yb=d,this.Xe=p,this.A=2153807872,this.N=114690},Ul=function(){for(;;){var n=Tl;if(n==null)return null;Tl=null;for(var t=n.length,i=0;i<t;)n[i]._queued_run(),i+=1}},Kl=function(n){for(var t=[],i=arguments.length,s=0;s<i;)t.push(arguments[s]),s+=1;i=arguments[0];var o=M(1<t.length?new u(t.slice(1),0,null):null);return t=J.h(o,hx),s=J.h(o,ix),o=J.h(o,gx),i=new Sl(i,null,!0,!1,null,null,null,null),i._set_opts(new h(null,3,[hx,t,ix,s,gx,o],null)),i},Zl=function(n,t){var i=Xl,s=Yl,o=Dl(n,s);return s.Tc!=null&&(Yl=Kl(null),s._set_opts(i),s.f=n,s.Yb=function(){return ol.g?ol.g(t):ol.call(null,t)},t.cljsRatom=s),o},$l=function(n,t){var i=t.argv;if(i==null){i=S,n=n.constructor;e:for(var s=Wa(t),o=s.length,f=og,d=0;;)if(d<o){var p=s[d];f=gj.l(f,Nj.g(p),Xa(t,p)),d+=1}else break e;t=new R(null,2,5,i,[n,f],null)}else t=i;return t},am=function(n){var t;return(t=Qe(n))&&(n=n==null?null:n.prototype,t=(n==null?null:n.Dc)!=null),t},cm=function(n){var t=n.Ug;return t??(n.Ug=bm.g(null))},em=function(n,t){for(;;){var i=n.Dc,s=n.Sg===!0?i.call(n,n):function(){var o=$l(n,n.props);switch(D(o)){case 1:return i.call(n);case 2:return i.call(n,Ee(o,1));case 3:return i.call(n,Ee(o,1),Ee(o,2));case 4:return i.call(n,Ee(o,1),Ee(o,2),Ee(o,3));case 5:return i.call(n,Ee(o,1),Ee(o,2),Ee(o,3),Ee(o,4));default:return i.apply(n,pc(o).slice(1))}}();if(cf(s))return rl(t,s);if(hf(s))n.Dc=am(s)?function(o,f,d,p,v){return function(){function _(P){var L=null;if(0<arguments.length){L=0;for(var G=Array(arguments.length-0);L<G.length;)G[L]=arguments[L+0],++L;L=new u(G,0,null)}return k.call(this,L)}function k(P){return rl(f,Kg.l(dm,v,P))}return _.v=0,_.B=function(P){return P=w(P),k(P)},_.j=k,_}()}(n,t,i,null,s):s;else return s}},fm=function(n,t){switch(n instanceof K?n.U:null){case"getDefaultProps":throw Error("getDefaultProps not supported");case"getDerivedStateFromProps":return function(i,s){var o=t.call,f=i.argv;return f!=null&&(i=I(f,1,null),i=Ze(i)?i:null),o.call(t,null,i,s)};case"getInitialState":return function(i){return N(cm(i),t.call(i,i))};case"getSnapshotBeforeUpdate":return function(i,s){return t.call(this,this,$l(this,i),s)};case"componentWillReceiveProps":return function(i){return t.call(this,this,$l(this,i))};case"UNSAFE_componentWillReceiveProps":return function(i){return t.call(this,this,$l(this,i))};case"shouldComponentUpdate":return function(i){if(l(!1))return!1;var s=this.props.argv,o=i.argv,f=s==null||o==null;if(t==null){if(f)return f;try{return fj.h(s,o)}catch{return!1}}else return f?t.call(this,this,$l(this,this.props),$l(this,i)):t.call(this,this,s,o)};case"componentWillUpdate":return function(i,s){return t.call(this,this,$l(this,i),s)};case"UNSAFE_componentWillUpdate":return function(i,s){return t.call(this,this,$l(this,i),s)};case"componentDidUpdate":return function(i,s,o){return t.call(this,this,$l(this,i),s,o)};case"componentWillMount":return function(){return t.call(this,this)};case"UNSAFE_componentWillMount":return function(){return t.call(this,this)};case"componentDidMount":return function(){return t.call(this,this)};case"componentWillUnmount":return function(){var i=Xa(this,"cljsRatom");return i!=null&&Pl(i),this.cljsIsDirty=!1,t==null?null:t.call(this,this)};case"componentDidCatch":return function(i,s){return t.call(this,this,i,s)};default:return null}},hm=function(n){return Cf(function(t,i,s){return gj.l(t,Nj.g(gm(i)),s)},og,n)},nm=function(n,t){var i=function(){var d=jx.g(n);return l(d)?d:lx.g(n)}(),s=jx.g(n)==null,o=function(){var d=mx.g(n);return l(d)?d:(d=al(i),l(d)?d:m.g(ek("reagent")))}(),f=Cf(function(d,p,v){var _=gj.l,k=fm(p,v);return _.call(gj,d,p,l(k)?k:v)},og,n);return gj.j(f,mx,o,F([xx,s,jx,i,lx,function(){var d=this,p=Xa(d,"cljsRatom");return d.cljsIsDirty=!1,p==null?Zl(function(){e:{var v=mm;mm=d;try{var _=em(d,t);break e}finally{mm=v}_=void 0}return _},d):p._run(!1)}]))},om=function(n){return Cf(function(t,i,s){return i=qj(i),t[i]=s,t},{},n)},qm=function(n,t){return nm(Al.j(F([pm,hm(n)])),t)},vm=function(n,t){function i(p,v,_){return reactExports.Component.call(this,p,v,_),l(d)&&(d.h?d.h(this,p):d.call(null,this,p)),l(f)&&(this.state=f.g?f.g(this):f.call(null,this)),this.jf=rm+=1,this}n=qm(n,t),t=om(Kg.j(wl,n,mx,yx,Ix,F([lx,jx,um])));var s=om(hj(n,um)),o=mx.g(n),f=yx.g(n),d=Ix.g(n);return Za(i.prototype,reactExports.Component.prototype,t),l(lx.g(n))&&(i.prototype.render=lx.g(n)),l(jx.g(n))&&(i.prototype.Dc=jx.g(n)),l(xx.g(n))&&(i.prototype.Sg=xx.g(n)),Za(i,reactExports.Component,s),l(o)&&(i.displayName=o,i.he=o,i.Rg=function(p){return qd(p,o)},Object.defineProperty(i,"name",{value:o,writable:!1})),i.$f=!0,i.prototype.constructor=i},wm=function(n,t,i){return n=pl(n),t[n]=i},xm=function(n,t){for(;;){var i=t.Dc,s=t.argv,o=Kg.h(i,s);if(cf(o))return rl(n,o);if(hf(o))t.Dc=am(o)?function(f,d,p,v,_,k){return function(){function P(G){var Z=null;if(0<arguments.length){Z=0;for(var W=Array(arguments.length-0);Z<W.length;)W[Z]=arguments[Z+0],++Z;Z=new u(W,0,null)}return L.call(this,Z)}function L(G){return rl(f,Kg.l(dm,k,G))}return P.v=0,P.B=function(G){return G=w(G),L(G)},P.j=L,P}()}(n,t,i,null,s,o):o;else return o}},ym=function(n,t){var i=t.argv,s=t.Dc;t=reactExports.useState(0),I(t,0,null);var o=I(t,1,null),f=reactExports.useRef();l(f.current)||function(){var p={forceUpdate:function(){return o.g?o.g(qe):o.call(null,qe)}};return p.jf=rm+=1,p.constructor=s,p.Dc=s,f.current=p}();var d=f.current;return t=Xa(d,"cljsRatom"),reactExports.useEffect(function(){return function(){var p=Xa(d,"cljsRatom");return p==null?null:Pl(p)}},[]),d.argv=i,d.cljsIsDirty=!1,t==null?Zl(function(){e:{var p=mm;mm=d;try{var v=xm(n,d);break e}finally{mm=p}v=void 0}return v},d):t._run(!1)},zm=function(n,t){n=n.argv,t=t.argv;try{return E.h(n,t)}catch{return!1}},Am=function(n,t){function i(o){return ym(n,o)}var s=Xa(t,pl(n));return l(s)||(s=al(t),i.displayName=s,Object.defineProperty(i,"name",{value:s,writable:!1}),s=reactExports.memo(i,zm),wm(n,t,s)),s},Em=function(n,t,i,s){var o=M(og);if(o=J.h(o,Kx),n===document.activeElement&&lf(Cm,n.type)&&typeof t=="string"&&typeof i=="string"){var f=n.value;return fj.h(f,i)?nl.add_after_render(function(){return Dm.g?Dm.g(s):Dm.call(null,s)}):(i=D(f)-n.selectionStart,i=D(t)-i,s.je=t,n.value=t,Qe(o)&&(o.g?o.g(t):o.call(null,t)),n.selectionStart=i,n.selectionEnd=i)}return s.je=t,n.value=t,Qe(o)?o.g?o.g(t):o.call(null,t):null},Dm=function(n){if(l(n.hf)){n.ag=!1;var t=n.Tg,i=n.je,s=n.tf;return fj.h(t,i)?Em(s,t,i,n):null}return null},Fm=function(n,t,i){return n.je=i.target.value,l(n.ag)||(n.ag=!0,nl.add_after_render(function(){return Dm(n)})),t.g?t.g(i):t.call(null,i)},Gm=function(n){var t=mm;if(l(function(){var f=n!=null;return f&&(f=n.hasOwnProperty("onChange"),l(f)?n.hasOwnProperty("value"):f)}())){var i=n.value;i=i??"";var s=n.onChange,o=n.ref;l(t.hf)||(t.hf=!0,t.je=i),l(t.xg)||(t.xg=Qe(o)?function(f){return t.tf=f,o.g?o.g(f):o.call(null,f)}:l(l(o)?o.hasOwnProperty("current"):o)?function(f){return t.tf=f,o.current=f}:function(f){return t.tf=f}),t.Tg=i,delete n.value,n.defaultValue=i,n.onChange=function(f){return Fm(t,s,f)},n.ref=t.xg}},Lx=function(){this.tag=VegaLite,this.className=this.id=null},Im=function(n,t){return n.hasOwnProperty(t)?Xa(n,t):null},Lm=function(n,t,i){if(bl(t)){var s=Im(Jm,qj(t));s==null?(s=Zk(t),t=qj(t),t=Jm[t]=s):t=s}return i=Km.g?Km.g(i):Km.call(null,i),n[t]=i,n},Km=function(n){return aa(n)!=="object"?n:bl(n)?qj(n):Ze(n)?Cf(Lm,{},n):We(n)?Mm(n):hf(n)?function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){return Kg.h(n,s)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}():Mm(n)},Om=function(n,t,i){if(bl(t)){var s=Im(Nm,qj(t));s==null?(s=Zk(t),t=qj(t),t=Nm[t]=s):t=s}return i=Km(i),n[t]=i,n},Pm=function(n){return aa(n)!=="object"?n:bl(n)?qj(n):Ze(n)?Cf(Om,{},n):We(n)?Mm(n):hf(n)?function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){return Kg.h(n,s)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}():Mm(n)},Qm=function(n,t,i,s,o){switch(D(t)-o){case 0:return reactExports.createElement(i,s);case 1:return reactExports.createElement(i,s,rl(n,I(t,o,null)));default:return reactExports.createElement.apply(null,Cf(function(f,d,p){return d>=o&&f.push(rl(n,p)),f},[i,s],t))}},Rm=function(n,t,i,s){this.tag=n,this.id=t,this.className=i,this.Xg=s},Tm=function(n,t,i){var s=Xa(n,pl(i));return s==null?am(n)?n=wm(i,n,n):(s=Te(n),s=gj.l(s,Wx,n),s=vm(s,i),n=wm(i,n,s)):n=s,i={},i.argv=t,t=el(t),t!=null&&(i.key=t),reactExports.createElement(n,i)},Vm=function(n,t,i,s){var o={};return o.Dc=n,o.argv=Um.h(t,i),t=el(t),t!=null&&(o.key=t),reactExports.createElement(Am(s,n),o)},Wm=function(n,t,i){var s;return(s=Qe(n))&&(s=n==null?null:n.prototype,s=(s==null?null:s.render)!=null),s?Tm(n,t,i):Vm(n,t,1,i)},an=function(n,t,i,s){var o=n.tag,f=I(t,i,null),d=f==null||Ze(f),p=function(){var k=d?f:null,P=T.g(k);P=l(P)?gj.l(k,T,Xm.g(P)):k;var L=n.id;if(k=n.className,L=L!=null&&Xx.g(P)==null?gj.l(P,Xx,L):P,l(k)){var G=gj.l,Z=Xm.h,W=T.g(P);P=l(W)?W:Zx.g(P),k=G.call(gj,L,T,Z.call(Xm,k,P))}else k=L;return k=l(n.Xg)?Pm(k):Km(k),l(k)?k:{}}();i+=d?1:0;e:switch(o){case"input":case"textarea":var v=!0;break e;default:v=!1}if(v){v=dl(f);var _=function(){var k=s.uh;return l(k)?k:(k=vm($m,s),s.uh=k)}();return rl(s,Se(new R(null,6,5,S,[_,t,o,p,i,s],null),Al.j(F([l(v)?new h(null,1,[fx,v],null):null,Te(t)]))))}return v=dl(Te(t)),v!=null&&(p.key=v),sl(s,t,o,p,i)},bn=function(n,t){return pc(O.h(function(i){return rl(t,i)},n))},cn=function(n,t,i){t==null&&console.error("vec-to-elem",im.j(F([n])));var s=I(n,0,null);switch(s instanceof K?s.U:null){case">":return i=I(n,1,null),an(new Rm(i,null,null,null),n,2,t);case"r>":i=I(n,1,null),s=I(n,2,null),s=l(s)?s:{};var o=dl(Te(n));return o!=null&&(s.key=o),sl(t,n,i,s,3);case"f>":return Vm(I(n,1,null),n,2,t);case"<>":return s=I(n,1,null),i=s==null||Ze(s),s=Km(i?s:null),s=l(s)?s:{},i=1+(i?1:0),o=el(n),o!=null&&(s.key=o),sl(t,n,reactExports.Fragment,s,i);default:if(bl(s)||typeof s=="string")e:for(;;)switch(i=I(n,0,null),s=qj(i),o=s.indexOf(">"),o){case-1:t=an(ql(t,s,i),n,1,t);break e;case 0:t=null;break e;default:n=Se(new R(null,2,5,S,[s.substring(0,o),gj.l(Se(n,null),0,s.substring(o+1))],null),Te(n))}else t=s instanceof Lx?an(s,n,1,t):i.l?i.l(s,n,t):i.call(null,s,n,t);return t}},dn=function(n,t,i,s,o){this.Rb=n,this.id=t,this.dg=i,this.we=s,this.mh=o,this.A=393216,this.N=0},en=function(n){dk.l(cm(mm),Al,n)},fn=function(n){return bm.g(n)},gn=function(n){for(var t=[],i=arguments.length,s=0;s<i;)t.push(arguments[s]),s+=1;return new Nl(arguments[0],1<t.length?new u(t.slice(1),0,null):null,null)},hn=function(n){return nl.add_after_render(n)},jn=function(){var n=mm,t=n==null?null:n.constructor;return t=t==null?null:t.displayName,l(t)?n=t:(n=n==null?null:n.constructor,n=n==null?null:n.name),Mk(Mk(Le(Ok(n,/\./)),/_render/,""),/_/,"-")},qn=function(n){return Ze(n)?Ng.h(og,ul.h(kn.h(cc,Ke),wl.j(n,U,F([ay,dy,ey,fy,gy,hy,iy,jy])))):n},yn=function(n){var t=M(n);n=J.h(t,U);var i=J.h(t,gy);if(gc(!1))return og;var s=function(){var p=ky.g(i);return l(p)?p:jn()}(),o=qn(function(){var p=ly.g(i);return l(p)?p:t}()),f=M(n),d=J.h(f,rv);return f=J.h(f,un),s=new h(null,2,[my,function(p){l(p)&&(p["__rc-args"]=o);var v=Q(t,new R(null,2,5,S,[V,my],null));return l(v)&&Qe(v)?v.g?v.g(p):v.call(null,p):null},Cy,s],null),l(n)?gj.l(s,Gy,[m.g(d),":",m.g(f)].join("")):s},Hy=function(n,t){return ov.K(n,X,Al,t)},Iy=function(n){return cf(n)?n:Ye(n)?Gh(n):n==null?null:new R(null,1,5,S,[n],null)},Ly=function(n,t){var i=M(t),s=J.h(i,T),o=J.h(i,V),f=J.h(i,X);t=Al.j;var d=typeof i!="string"?i:new h(null,1,[X,new R(null,1,5,S,[i],null)],null);return s=lf(i,T)?gj.l(d,T,Ng.h(Iy(T.g(n)),Iy(s))):d,o=lf(i,V)?gj.l(s,V,Al.j(F([V.g(n),o]))):s,i=lf(i,X)?gj.l(o,X,Al.j(F([X.g(n),f]))):o,t.call(Al,F([n,i]))},Ny=function(n){for(var t=[],i=arguments.length,s=0;s<i;)t.push(arguments[s]),s+=1;return My(0<t.length?new u(t.slice(0),0,null):null)},My=function(n){return nc(Ly,og,n)},zn=function(n,t){const i=Array.prototype.slice.call(arguments),s=i.shift();if(typeof s>"u")throw Error("[goog.string.format] Template required");return s.replace(/%([0\- \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(o,f,d,p,v,_,k,P){if(_=="%")return"%";const L=i.shift();if(typeof L>"u")throw Error("[goog.string.format] Not enough arguments");return arguments[0]=L,zn.mc[_].apply(null,arguments)})},An=function(n){return n=O.h(function(t){return t instanceof K||t instanceof r?m.g(t):t},n),Kg.l(zn,"%s not implemented yet",n)},Dn=function(n){return(n!=null?n.A&32768||Zd===n.$e||!n.A&&ic(Zc,n):ic(Zc,n))?q(n):n},Oy=function(n){if(n!=null?n.A&32768||Zd===n.$e||!n.A&&ic(Zc,n):ic(Zc,n)){if(n instanceof Jl)return n.state;if(n instanceof Sl)return n._peek_at();if(n instanceof Ol)return n._peek();if(n instanceof Nl)return q(n);throw Error("Unknown reactive data type")}return n},En=function(n){return Nk(" ",O.h(function(t){return[m.g(t),"px"].join("")},n))},Gn=function(n){for(var t=[],i=arguments.length,s=0;s<i;)t.push(arguments[s]),s+=1;return Fn(arguments[0],arguments[1],2<t.length?new u(t.slice(2),0,null):null)},Fn=function(n,t,i){return i=I(i,0,null),[m.g(n)," ",m.g(E.h(1,n)?t:l(i)?i:[m.g(t),"s"].join(""))].join("")},Uy=function(n){return cf(n)?n:Ye(n)?Gh(n):n==null?null:new R(null,1,5,S,[n],null)},bz=function(n){for(var t=[],i=arguments.length,s=0;s<i;)t.push(arguments[s]),s+=1;return In(arguments[0],arguments[1],2<t.length?new u(t.slice(2),0,null):null)},In=function(n,t,i){i=M(i);var s=J.l(i,Vz,Xx);return z(Ug(function(o,f){return E.h(s.g?s.g(f):s.call(null,f),n)?o:null},t))},aA=function(n){for(var t=[],i=arguments.length,s=0;s<i;)t.push(arguments[s]),s+=1;return $z(arguments[0],arguments[1],2<t.length?new u(t.slice(2),0,null):null)},$z=function(n,t,i){i=M(i);var s=J.l(i,Vz,Xx);return Vl(function(o){return fj.h(s.g?s.g(o):s.call(null,o),n)},t)},cA=function(n){return[Nk("	",n),`
`].join("")},eA=function(n){var t=M(n);n=J.h(t,T);var i=J.h(t,X),s=J.h(t,V),o=J.h(t,dy);return t=J.l(t,Qw,dA),Ng.h(new R(null,2,5,S,[t,Al.j(F([new h(null,2,[T,n,X,i],null),s]))],null),o)},kA=function(n,t){t=M(t);var i=J.h(t,fA),s=J.l(t,gA,eA),o=J.h(t,fx),f=J.h(t,hy),d=J.h(t,iA),p=J.h(t,jA);if(l(function(){var _=cf.g?cf.g(n):cf.call(null,n);return l(_)?_:typeof n=="string"}()))return l(o)?Se(n,new h(null,1,[fx,o],null)):n;var v=Ze(n)?s:hf(n)?n:s;return l(cf.g?cf.g(v):cf.call(null,v))?v:function(){var _=Al.j(F([new h(null,1,[fA,i],null),p]));return _=l(f)?f.h?f.h(_,v):f.call(null,_,v):_,_=Ze(n)?My(F([_,n])):_,_=l(d)?My(F([_,d])):_,_=new R(null,2,5,S,[v,_],null),l(o)?Se(_,new h(null,1,[fx,o],null)):_}()},Mn=function(n){Ng.h(new R(null,1,5,S,[lA],null),eh(", ",O.h(function(t){return new R(null,2,5,S,[mA,m.g(t)],null)},n)))},PB=function(n){return Bn(n,new R(null,2,5,S,[MB,NB],null),OB)},Qn=function(n){var t=Ok(Nn(n),/\s+/),i=D(t);t=E.h(i,1)?z(t):null,i=l(t)?Ok(t,/(\d+)(.*)/):null;var s=l(t)?i:null;I(s,0,null),i=I(s,1,null);var o=I(s,2,null);s=i==null;var f=(o=E.h(o,"%")||E.h(o,"")||o==null)?"1":"0",d=o?"0px":n;return n=l(l(t)?!s:t)?[m.g(o?i:"0")," ",f," ",m.g(d)].join(""):n,new h(null,2,[QB,n,RB,n],null)},Tn=function(n){return new h(null,2,[SB,n,TB,n],null)},Wn=function(n){var t=function(){var i=n instanceof K?n.U:null;switch(i){case"start":return"flex-start";case"end":return"flex-end";case"center":return"center";case"between":return"space-between";case"around":return"space-around";default:throw Error(["No matching clause: ",m.g(i)].join(""))}}();return new h(null,2,[UB,t,VB,t],null)},Xn=function(n,t){var i=Nj.g(["-webkit-",qj(n)].join("")),s=function(){var o=t instanceof K?t.U:null;switch(o){case"start":return"flex-start";case"end":return"flex-end";case"center":return"center";case"baseline":return"baseline";case"stretch":return"stretch";default:throw Error(["No matching clause: ",m.g(o)].join(""))}}();return ng([i,s,n,s])},Yn=function(n,t){return ng([n,function(){var i=t instanceof K?t.U:null;switch(i){case"auto":return"auto";case"off":return"hidden";case"on":return"scroll";case"spill":return"visible";default:throw Error(["No matching clause: ",m.g(i)].join(""))}}()])},Ho=function(n){n=M(n);var t=J.h(n,ay),i=J.h(n,iC),s=J.h(n,kC),o=J.h(n,pC),f=J.h(n,qC),d=J.h(n,rC),p=J.h(n,V),v=J.h(n,GC),_=J.h(n,LC),k=J.h(n,SC),P=J.h(n,bD),L=J.h(n,cD),G=J.h(n,dD),Z=J.h(n,eD),W=J.h(n,fD),j=J.h(n,gD),H=J.h(n,hD),me=J.h(n,iD),$e=J.h(n,jD),De=J.h(n,kD),le=J.h(n,X),Ce=J.h(n,lD),Me=J.h(n,T),_n=J.h(n,mD),_i=J.h(n,nD),ll=J.h(n,oD),_l=J.h(n,pD);return i=Al.j(F([Tn("inherit"),Qn(De),l(Ce)?Yn(qD,Ce):null,l(W)?Yn(rD,W):null,l(o)?Yn(sD,o):null,l(j)?new h(null,1,[gD,j],null):null,l(f)?new h(null,1,[qC,f],null):null,l(v)?new h(null,1,[GC,v],null):null,l(L)?new h(null,1,[cD,L],null):null,l(me)?new h(null,1,[iD,me],null):null,l(P)?new h(null,1,[bD,P],null):null,l(Z)?Wn(Z):null,l(_)?Xn(tD,_):null,l(i)?Xn(iC,i):null,l(d)?new h(null,1,[rC,d],null):null,l(_i)?new h(null,1,[nD,_i],null):null,l(s)?new h(null,1,[kC,s],null):null,l(_n)?new h(null,1,[uD,_n],null):null,l(G)?new h(null,1,[vD,G],null):null,l(ll)?new h(null,1,[wD,ll],null):null,l(H)?new h(null,1,[xD,H],null):null,l($e)?new h(null,1,[yD,$e],null):null,l(k)?new h(null,1,[zD,k],null):og,le])),new R(null,3,5,S,[dA,Al.j(F([yn(n),new h(null,2,[T,BD.l?BD.l(_l,"display-flex",Me):BD.call(null,_l,"display-flex",Me),X,i],null),p])),t],null)},gp=function(){var n=fn(!1);return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){s=M(s);var o=J.h(s,CD),f=J.h(s,DD),d=J.h(s,V),p=J.h(s,FD),v=J.l(s,GD,"#ccc"),_=J.l(s,HD,16),k=J.l(s,ID,16),P=J.h(s,JD),L=J.h(s,U),G=J.h(s,KD),Z=J.h(s,X),W=J.h(s,gy),j=J.h(s,T),H=J.h(s,MD),me=J.l(s,ND,"#999");if(l(null))return null;var $e=Dn(o);return new R(null,13,5,S,[So,U,L,gy,l(W)?W:new h(null,2,[ky,jn(),ly,s],null),T,["rc-close-button ",m.g(Q(P,new R(null,2,5,S,[OD,T],null)))].join(""),X,Al.j(F([new h(null,4,[PD,"inline-block",QD,"relative",gD,Wo(k),qC,Wo(k)],null),l($e)?new h(null,1,[RD,"none"],null):null,Q(P,new R(null,2,5,S,[OD,X],null))])),V,Q(P,new R(null,2,5,S,[OD,V],null)),ay,new R(null,11,5,S,[So,U,null,T,j,X,Al.j(F([new h(null,6,[QD,"absolute",SD,l($e)?null:"pointer",HD,Wo(_),GD,l(q(n))?me:v,TD,Wo.j((_-k)/2-H,F([VD])),WD,Wo.j((_-k)/2-p,F([VD]))],null),Z])),V,Al.j(F([new h(null,4,[XD,f,KD,function(De){return l(l(G)?gc($e):G)&&(G.g?G.g(De):G.call(null,De),De.stopPropagation()),null},YD,function(){return N(n,!0),null},ZD,function(){return N(n,!1),null}],null),d])),ay,new R(null,2,5,S,[$D,Al.j(F([new h(null,2,[T,function(){var De=Q(P,new R(null,2,5,S,[aE,T],null));return BD.Ka?BD.Ka("rc-close-button-icon","zmdi","zmdi-hc-fw-rc","zmdi","zmdi-close",De):BD.call(null,"rc-close-button-icon","zmdi","zmdi-hc-fw-rc","zmdi","zmdi-close",De)}(),X,ph(P,new R(null,2,5,S,[aE,X],null),og)],null),Q(P,new R(null,2,5,S,[aE,V],null))]))],null)],null)],null)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()},hp=function(n,t){return[m.g(n),",",m.g(t)," "].join("")},ip=function(n){return n=Ok(m.g(n),Dj(["[",m.g("-"),":]"].join(""))),new R(null,2,5,S,[Nj.g(n.g?n.g(1):n.call(null,1)),Nj.g(n.g?n.g(2):n.call(null,2))],null)},lp=function(n,t,i,s,o,f){var d=o+f;o=function(){var _=n instanceof K?n.U:null;switch(_){case"left":return"initial";case"right":return Wo(d);case"above":case"below":return Wo.j(l(s)?s:t/2,F([VD]));default:throw Error(["No matching clause: ",m.g(_)].join(""))}}(),f=function(){var _=n instanceof K?n.U:null;switch(_){case"left":case"right":return Wo.j(l(s)?s:i/2,F([VD]));case"above":return"initial";case"below":return Wo(d);default:throw Error(["No matching clause: ",m.g(_)].join(""))}}();var p=function(){var _=n instanceof K?n.U:null;switch(_){case"left":return Wo(d);case"right":return null;case"above":return null;case"below":return null;default:throw Error(["No matching clause: ",m.g(_)].join(""))}}(),v=function(){var _=n instanceof K?n.U:null;switch(_){case"left":return null;case"right":return null;case"above":return Wo(d);case"below":return null;default:throw Error(["No matching clause: ",m.g(_)].join(""))}}();return new h(null,4,[WD,o,TD,f,ku,p,bE,v],null)},wp=function(n,t,i,s,o,f,d,p,v){var _=s/2,k=new h(null,4,[WD,[hp(0,0),hp(i,_),hp(0,s)].join(""),ku,[hp(i,0),hp(0,_),hp(i,s)].join(""),cE,[hp(0,0),hp(_,i),hp(s,0)].join(""),dE,[hp(0,i),hp(_,0),hp(s,i)].join("")],null);return new R(null,3,5,S,[eE,Al.j(F([new h(null,2,[T,function(){var P=ph(v,new R(null,2,5,S,[fE,T],null),"");return BD.l?BD.l("popover-arrow","rc-popover-arrow",P):BD.call(null,"popover-arrow","rc-popover-arrow",P)}(),X,Al.j(F([ng([QD,"absolute",function(){var P=n instanceof K?n.U:null;switch(P){case"left":return ku;case"right":return WD;case"above":return bE;case"below":return TD;default:throw Error(["No matching clause: ",m.g(P)].join(""))}}(),Wo.j(i,F([VD])),function(){var P=n instanceof K?n.U:null;switch(P){case"left":case"right":return TD;case"above":case"below":return WD;default:throw Error(["No matching clause: ",m.g(P)].join(""))}}(),t==null?"50%":Wo(t),function(){var P=n instanceof K?n.U:null;switch(P){case"left":case"right":return gE;case"above":case"below":return hE;default:throw Error(["No matching clause: ",m.g(P)].join(""))}}(),Wo.j(_,F([VD])),gD,Wo(function(){var P=n instanceof K?n.U:null;switch(P){case"left":case"right":return i;case"above":case"below":return s;default:throw Error(["No matching clause: ",m.g(P)].join(""))}}()),qC,Wo(function(){var P=n instanceof K?n.U:null;switch(P){case"left":case"right":return s;case"above":case"below":return i;default:throw Error(["No matching clause: ",m.g(P)].join(""))}}())]),Q(v,new R(null,2,5,S,[fE,X],null))]))],null),Q(v,new R(null,2,5,S,[fE,V],null))])),new R(null,2,5,S,[iE,new h(null,2,[jE,k.g?k.g(n):k.call(null,n),X,new h(null,3,[jp,l(d)?d:l(o)?"#f7f7f7":"white",kE,l(p)?p:l(f)?null:"rgba(0, 0, 0, .2)",lE,"1"],null)],null)],null)],null)},Ip=function(){var n=fn(!1);return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){s=M(s);var o=J.h(s,CD),f=J.h(s,DD),d=J.h(s,V),p=J.h(s,JD),v=J.h(s,U),_=J.h(s,KD),k=J.h(s,X),P=J.h(s,gy),L=J.h(s,mE),G=J.l(s,T,"btn-default"),Z=J.h(s,nE);if(l(null))return null;l(f)||N(n,!1);var W=Dn(o);return o=new R(null,3,5,S,[oE,Al.j(F([new h(null,4,[T,["rc-button btn ",m.g(G)].join(""),X,Al.j(F([Qn("none"),k])),pE,W,KD,function(j){return l(l(_)?gc(W):_)&&(_.g?_.g(j):_.call(null,j)),null}],null),l(f)?new h(null,2,[qE,function(){return N(n,!0),null},rE,function(){return N(n,!1),null}],null):null,d])),L],null),l(W)&&N(n,!1),new R(null,15,5,S,[So,U,v,gy,l(P)?P:new h(null,2,[ky,jn(),ly,s],null),T,["rc-button-wrapper display-inline-flex ",m.g(Q(p,new R(null,2,5,S,[OD,T],null)))].join(""),X,Q(p,new R(null,2,5,S,[OD,X],null)),V,Q(p,new R(null,2,5,S,[OD,V],null)),LC,Oo,ay,l(f)?new R(null,17,5,S,[Ep,U,null,mE,f,QD,l(Z)?Z:sE,tE,n,uE,o,T,["rc-button-tooltip ",m.g(Q(p,new R(null,2,5,S,[DD,T],null)))].join(""),X,Q(p,new R(null,2,5,S,[DD,X],null)),V,Q(p,new R(null,2,5,S,[DD,V],null))],null):o],null)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()},Lp=function(){var n=fn(!1);return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){s=M(s);var o=J.h(s,CD),f=J.h(s,DD),d=J.h(s,V),p=J.h(s,vE),v=J.l(s,wE,"zmdi-plus"),_=J.h(s,JD),k=J.h(s,U),P=J.h(s,KD),L=J.h(s,kD),G=J.h(s,X),Z=J.h(s,gy),W=J.h(s,T),j=J.h(s,nE);return l(null)?null:(l(f)||N(n,!1),d=new R(null,3,5,S,[dA,Al.j(F([new h(null,3,[T,["noselect rc-md-icon-button ",m.g(function(){switch(L instanceof K?L.U:null){case"smaller":return"rc-icon-smaller ";case"larger":return"rc-icon-larger ";default:return" "}}()),l(p)?"rc-icon-emphasis ":null,l(o)?"rc-icon-disabled ":null,m.g(W)].join(""),X,Al.j(F([new h(null,1,[SD,l(o)?null:"pointer"],null),G])),KD,function(H){return l(l(P)?gc(o):P)&&(P.g?P.g(H):P.call(null,H)),null}],null),l(f)?new h(null,2,[qE,function(){return N(n,!0),null},rE,function(){return N(n,!1),null}],null):null,d])),new R(null,2,5,S,[$D,Al.j(F([new h(null,2,[T,function(){var H=Q(_,new R(null,2,5,S,[aE,T],null));return BD.O?BD.O("zmdi","zmdi-hc-fw-rc",v,"rc-md-icon-button-icon",H):BD.call(null,"zmdi","zmdi-hc-fw-rc",v,"rc-md-icon-button-icon",H)}(),X,ph(_,new R(null,2,5,S,[aE,X],null),og)],null),Q(_,new R(null,2,5,S,[aE,V],null))]))],null)],null),new R(null,15,5,S,[So,U,k,gy,l(Z)?Z:new h(null,2,[ky,jn(),ly,s],null),LC,Oo,T,["display-inline-flex rc-md-icon-button-wrapper ",m.g(Q(_,new R(null,2,5,S,[OD,T],null)))].join(""),X,Q(_,new R(null,2,5,S,[OD,X],null)),V,Q(_,new R(null,2,5,S,[OD,V],null)),ay,l(f)?new R(null,17,5,S,[Ep,U,null,mE,f,QD,l(j)?j:sE,tE,n,uE,d,T,["rc-md-icon-button-tooltip ",m.g(Q(_,new R(null,2,5,S,[DD,T],null)))].join(""),X,Q(_,new R(null,2,5,S,[DD,X],null)),V,Q(_,new R(null,2,5,S,[DD,V],null))],null):d],null))}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()},$p=function(){var n=fn(!1);return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){s=M(s);var o=J.h(s,CD),f=J.h(s,V),d=J.h(s,JD),p=J.h(s,gD),v=J.h(s,U),_=J.h(s,X),k=J.h(s,gy),P=J.h(s,T),L=J.h(s,xE),G=J.h(s,QD);return l(null)?null:new R(null,25,5,S,[Ep,U,v,gy,l(k)?k:new h(null,2,[ky,jn(),ly,s],null),mE,L,Np,xE,QD,l(G)?G:yE,gD,l(p)?p:"250px",tE,n,zE,function(){return dk.h(n,gc)},T,["rc-info-button-popover-anchor-wrapper ",m.g(Q(d,new R(null,2,5,S,[DD,T],null)))].join(""),X,Q(d,new R(null,2,5,S,[DD,X],null)),V,Q(d,new R(null,2,5,S,[DD,V],null)),uE,new R(null,3,5,S,[dA,Al.j(F([new h(null,3,[T,["noselect rc-info-button ",l(o)?"rc-icon-disabled ":null,m.g(P)].join(""),X,Al.j(F([new h(null,1,[SD,l(o)?null:"pointer"],null),_])),KD,function(){return gc(o)&&dk.h(n,gc),null}],null),f])),new R(null,5,5,S,[eE,Al.j(F([new h(null,4,[gD,"11",qC,"11",T,["rc-info-button-icon ",m.g(Q(d,new R(null,2,5,S,[aE,T],null)))].join(""),X,ph(d,new R(null,2,5,S,[aE,X],null),og)],null),Q(d,new R(null,2,5,S,[aE,V],null))])),new R(null,2,5,S,[BE,new h(null,3,[CE,"5.5",DE,"5.5",EE,"5.5"],null)],null),new R(null,2,5,S,[BE,new h(null,4,[CE,"5.5",DE,"2.5",EE,"1.4",jp,"white"],null)],null),new R(null,2,5,S,[un,new h(null,6,[FE,"5.5",GE,"5.2",HE,"5.5",IE,"9.7",kE,"white",lE,"2.5"],null)],null)],null)],null)],null)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()},KE=function(){var n=fn(!1);return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){s=M(s);var o=J.h(s,CD),f=J.h(s,DD),d=J.h(s,V),p=J.l(s,wE,"zmdi-plus"),v=J.h(s,JD),_=J.h(s,U),k=J.h(s,KD),P=J.h(s,X),L=J.h(s,T),G=J.h(s,nE),Z=J.h(s,JE);return l(null)?null:(l(f)||N(n,!1),d=new R(null,3,5,S,[dA,Al.j(F([new h(null,3,[T,["noselect rc-row-button ",l(Z)?"rc-row-mouse-over-row ":null,l(o)?"rc-row-disabled ":null,m.g(L)].join(""),X,P,KD,function(W){return l(l(k)?gc(o):k)&&(k.g?k.g(W):k.call(null,W)),null}],null),l(f)?new h(null,2,[qE,function(){return N(n,!0),null},rE,function(){return N(n,!1),null}],null):null,d])),new R(null,2,5,S,[$D,Al.j(F([new h(null,2,[T,function(){var W=Q(v,new R(null,2,5,S,[aE,T],null));return BD.O?BD.O("zmdi","zmdi-hc-fw-rc",p," rc-row-button-icon",W):BD.call(null,"zmdi","zmdi-hc-fw-rc",p," rc-row-button-icon",W)}(),X,ph(v,new R(null,2,5,S,[aE,X],null),og)],null),Q(v,new R(null,2,5,S,[aE,V],null))]))],null)],null),new R(null,15,5,S,[So,U,_,gy,new h(null,2,[ky,jn(),ly,s],null),LC,Oo,T,["display-inline-flex rc-row-button-wrapper ",m.g(Q(v,new R(null,2,5,S,[OD,T],null)))].join(""),X,ph(v,new R(null,2,5,S,[OD,X],null),og),V,ph(v,new R(null,2,5,S,[OD,V],null),og),ay,l(f)?new R(null,17,5,S,[Ep,U,null,mE,f,QD,l(G)?G:sE,tE,n,uE,d,T,["rc-row-button-tooltip ",m.g(Q(v,new R(null,2,5,S,[DD,T],null)))].join(""),X,Q(v,new R(null,2,5,S,[DD,X],null)),V,Q(v,new R(null,2,5,S,[DD,V],null))],null):d],null))}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()},cq=function(){var n=fn(!1);return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){s=M(s);var o=J.h(s,CD),f=J.h(s,DD),d=J.h(s,V),p=J.h(s,JD),v=J.h(s,U),_=J.h(s,KD),k=J.h(s,X),P=J.h(s,gy),L=J.h(s,mE),G=J.h(s,T),Z=J.h(s,nE);if(l(null))return null;l(f)||N(n,!1),L=Dn(L);var W=Dn(o);return o=new R(null,9,5,S,[So,U,null,LC,Oo,T,function(){var j=Q(p,new R(null,2,5,S,[LE,T],null));return BD.h?BD.h("rc-hyperlink-container",j):BD.call(null,"rc-hyperlink-container",j)}(),ay,new R(null,3,5,S,[ME,Al.j(F([new h(null,3,[T,["noselect rc-hyperlink ",m.g(G)].join(""),X,Al.j(F([Qn("none"),new h(null,3,[SD,l(W)?"default":"pointer",RD,l(W)?"none":null,GD,l(W)?"grey":null],null),k])),KD,function(j){return l(l(_)?gc(W):_)&&(_.g?_.g(j):_.call(null,j)),null}],null),l(f)?new h(null,2,[qE,function(){return N(n,!0),null},rE,function(){return N(n,!1),null}],null):null,d])),L],null)],null),new R(null,15,5,S,[So,U,v,gy,l(P)?P:new h(null,2,[ky,jn(),ly,s],null),LC,Oo,T,["display-inline-flex rc-hyperlink-wrapper ",m.g(Q(p,new R(null,2,5,S,[OD,T],null)))].join(""),X,Q(p,new R(null,2,5,S,[OD,X],null)),V,Q(p,new R(null,2,5,S,[OD,V],null)),ay,l(f)?new R(null,17,5,S,[Ep,U,null,mE,f,QD,l(Z)?Z:sE,tE,n,uE,o,T,["rc-hyperlink-tooltip ",m.g(Q(p,new R(null,2,5,S,[DD,T],null)))].join(""),X,Q(p,new R(null,2,5,S,[DD,X],null)),V,Q(p,new R(null,2,5,S,[DD,V],null))],null):o],null)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()},fq=function(){var n=fn(!1);return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){s=M(s);var o=J.h(s,NE),f=J.h(s,CD),d=J.h(s,OE),p=J.h(s,DD),v=J.h(s,V),_=J.h(s,JD),k=J.h(s,U),P=J.h(s,X),L=J.h(s,gy),G=J.h(s,mE),Z=J.h(s,T),W=J.h(s,nE);return l(null)?null:(l(p)||N(n,!1),G=Dn(G),d=Dn(d),o=Dn(o),f=Dn(f),v=new R(null,3,5,S,[ME,Al.j(F([new h(null,3,[T,["rc-hyperlink-href noselect ",m.g(Z)].join(""),X,Al.j(F([Qn("none"),new h(null,3,[SD,l(f)?"default":"pointer",RD,l(f)?"none":null,GD,l(f)?"grey":null],null),P])),NE,o],null),gc(f)?new h(null,1,[OE,d],null):null,l(p)?new h(null,2,[qE,function(){return N(n,!0),null},rE,function(){return N(n,!1),null}],null):null,v])),G],null),new R(null,15,5,S,[So,U,k,gy,l(L)?L:new h(null,2,[ky,jn(),ly,s],null),LC,Oo,T,["rc-hyperlink-href-wrapper display-inline-flex ",m.g(Q(_,new R(null,2,5,S,[OD,T],null)))].join(""),X,ph(_,new R(null,2,5,S,[OD,X],null),og),V,ph(_,new R(null,2,5,S,[OD,V],null),og),ay,l(p)?new R(null,17,5,S,[Ep,U,null,mE,p,QD,l(W)?W:sE,tE,n,uE,v,T,["rc-hyperlink-href-tooltip ",m.g(Q(_,new R(null,2,5,S,[DD,T],null)))].join(""),X,ph(_,new R(null,2,5,S,[DD,X],null),og),V,ph(_,new R(null,2,5,S,[DD,V],null),og)],null):v],null))}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()},gq=function(n,t,i,s,o,f,d){this.Cb=n,this.Fb=t,this.Bb=i,this.Gb=s,this.T=o,this.I=f,this.C=d,this.A=2230716170,this.N=139264},mq=function(n){n=new h(null,2,[PE,n,QE,jq],null);var t=wl.j(n,PE,F([RE,SE,QE]));return t=bf(n)?Ng.h(og,t):t,new gq(PE.g(n),RE.g(n),SE.g(n),QE.g(n),null,pg(t),null)},oq=function(n){return function(){throw{name:TE,message:An(F([qj(n)]))}}},$E=function(n){n=M(n);var t=J.h(n,UE),i=J.h(n,X);n=S,i=new h(null,1,[X,i],null);var s=S;e:switch(t=VE.g(t),t=t instanceof K?t.U:null,t){case"open":t=WE;break e;case"closed":t=XE;break e;default:throw Error(["No matching clause: ",m.g(t)].join(""))}return new R(null,3,5,n,[lA,i,new R(null,2,5,s,[YE,new h(null,1,[ZE,t],null)],null)],null)},qq=function(n,t,i,s){return i=In(i,n,F([Vz,t])),s=E.h(s,Oo)?0:E.h(s,To)?D(n)-1:i==null?0:If(i+s,D(n)),l(l(s)?0<D(n):s)?(n=Ee(n,s),t.g?t.g(n):t.call(null,n)):null},sq=function(n,t){return n=yj(t,n),t=O.h(function(i){return Ni([Xx,aF],[ek("G__"),i])},O.h(t,O.h(z,n))),new R(null,2,5,S,[t,n],null)},tq=function(n,t,i,s){var o=s.toLowerCase();return jh.h(function(f){var d=(t.g?t.g(f):t.call(null,f))==null?"":t.g?t.g(f):t.call(null,f);return f=m.g(i.g?i.g(f):i.call(null,f)),0<=d.toLowerCase().indexOf(o)||0<=f.toLowerCase().indexOf(o)},n)},uq=function(n,t,i,s){try{var o=new RegExp(s,"i")}catch(f){if(f instanceof Object)o=null;else throw f}return s=Pk.h(function(f,d){if(f==null)return null;var p=f.test(t.g?t.g(d):t.call(null,d));return l(p)?p:f.test(i.g?i.g(d):i.call(null,d))},o),jh.h(s,n)},zq=function(n){var t=M(n);n=J.h(t,bF);var i=J.h(t,cF),s=J.h(t,dF);return t=J.h(t,fF),[l(n)?n.substring(0,i):null,m.g(t),l(n)?n.substring(s):null].join("")},Bq=function(n){function t(v){const _=String(p).toLowerCase();return v=String(v.slice(0,p.length)).toLowerCase(),(_<v?-1:_==v?0:1)==0}n=M(n);var i=J.h(n,hF),s=J.h(n,bF),o=J.h(n,cF),f=J.h(n,dF),d=J.h(n,fF),p=zq(F([bF,s,cF,o,dF,f,fF,d]));return n=function(){var v=w(jh.h(t,i));return v?(v=z(v),new h(null,3,[bF,[p,v.substring(p.length)].join(""),cF,o+D(d),dF,D(v)],null)):null}(),fj.h(cF.g(n),dF.g(n))&&w(d)?n:null},Cq=function(n){return w(n)?[z(n).toUpperCase(),n.substring(1)].join(""):n},Kq=function(n,t,i,s){function o(){if(E.h(q(s),n)){var v=q(d),_=v.offsetTop,k=_+v.clientHeight;v=v.parentNode;var P=v.clientHeight,L=v.scrollTop;k>L+P?(_=k-P,_=0<_?_:0):_=_<L?_:null,v=l(_)?v.scrollTop=_:null}else v=null;return v}var f=fn(!1),d=Tg(null),p=Pk.h(N,d);return vm(new h(null,4,[iF,o,jF,o,kF,"choice-item",Wx,function(v,_,k,P){return P=E.h(q(P),v)?"highlighted":l(q(f))?"mouseover":null,new R(null,3,5,S,[lF,new h(null,5,[T,["active-result group-option ",P].join(""),my,p,qE,function(){return N(f,!0),null},rE,function(){return N(f,!1),null},mF,function(L){return k.g?k.g(v):k.call(null,v),L.preventDefault(),null}],null),_],null)}],null),Jq)},Lq=function(n,t,i,s,o){return n=n.g?n.g(o):n.call(null,o),t=t.g?t.g(o):t.call(null,o),Se(new R(null,5,5,S,[Kq,n,t,i,s],null),new h(null,1,[fx,m.g(n)],null))},h_=function(){function n(){return q(t).firstChild.focus()}var t=Tg(null),i=Pk.h(N,t);return vm(new h(null,3,[iF,n,jF,n,Wx,function(s,o,f,d,p,v){return new R(null,3,5,S,[nF,new h(null,1,[my,i],null),new R(null,2,5,S,[oF,new h(null,8,[pF,"text",qF,"off",X,l(s)?null:new h(null,4,[QD,"absolute",gD,"0px",nD,"0px",kC,"none"],null),rF,q(o),sF,v,tF,function(_){return _=_.target.value,p.g?p.g(_):p.call(null,_),null},uF,function(_){return l(f.g?f.g(_):f.call(null,_))||(_.stopPropagation(),_.preventDefault()),null},vF,function(){return N(d,!1),null}],null)],null)],null)}],null),Jq)},Rq=function(){var n=Tg(!1);return function(t,i,s,o,f,d,p,v,_,k,P,L,G){return en(new h(null,1,[wF,_],null)),d=q(t)!=null?function(){var Z=xF.j(q(t),i,F([Vz,s]));return o.g?o.g(Z):o.call(null,Z)}():d,new R(null,4,5,S,[yF,new h(null,6,[X,Al.j(F([new h(null,3,[PD,"flex",VB,zF,gD,"100%"],null),l(L)?new h(null,1,[zD,"#EEE"],null):null,Q(G,new R(null,2,5,S,[AF,X],null))])),T,Q(G,new R(null,2,5,S,[AF,T],null)),BF,l(f)?f:0,KD,function(){return l(q(n))?N(n,!1):p.G?p.G():p.call(null),null},mF,function(){return l(q(k))&&N(n,!0),null},uF,function(Z){return v.g?v.g(Z):v.call(null,Z),E.h(Z.key,"Enter")&&N(n,!0),null}],null),new R(null,3,5,S,[lA,l(P)?new h(null,1,[XD,d],null):null,d],null),gc(L)?new R(null,2,5,S,[$E,new h(null,2,[X,new h(null,2,[CF,"8px",gE,"0.5px"],null),UE,new h(null,1,[VE,l(q(k))?DF:EF],null)],null)],null):null],null)}},Sq=function(n,t,i,s,o,f,d,p){var v=n.target,_=v.selectionStart,k=v.selectionEnd;s=l(l(s)?_===0:s)?Cq(t):t,i=l(i)?Bq(F([hF,o,bF,q(f),cF,_,dF,k,fF,s])):i,l(i)?(k=M(i),t=J.h(k,bF),_=J.h(k,cF),k=J.h(k,dF),E.h(q(f),t)?v.setSelectionRange(_,k):(N(d,new R(null,2,5,S,[_,k],null)),p.g?p.g(t):p.call(null,t)),n.preventDefault()):fj.h(t,s)&&(N(d,new R(null,2,5,S,[_+D(t),_+D(t)],null)),f=zq(F([bF,q(f),cF,_,dF,k,fF,s])),p.g?p.g(f):p.call(null,f),n.preventDefault())},Zq=function(n,t,i,s){function o(v){return d(new h(null,1,[FF,v],null))}function f(v){return d(new h(null,1,[GF,v],null))}function d(v){var _=M(v);return v=J.h(_,GF),_=J.h(_,FF),E.h(p,Xx.g(q(n)))?dk.j(n,gj,HF,!1,F([FF,_,hF,v])):null}var p=Xx.g(q(n))+1;return dk.j(n,gj,HF,!0,F([FF,null,Xx,p,IF,null])),i=new h(null,2,[JF,i,KF,s],null),t.l?t.l(i,f,o):t.call(null,i,f,o)},$q=function(n,t,i,s,o,f){if(Qe(t)){var d=IF.g(q(n));return l(d)&&clearTimeout(d),l(f)?(i=setTimeout(function(){return Zq(n,t,s,o)},i),dk.K(n,gj,IF,i)):Zq(n,t,s,o)}return null},ar=function(n,t){if(n!=null&&n.gf!=null)n=n.gf(n,t);else{var i=ar[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=ar._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("ReadPort.take!",n)}return n},br=function(n,t,i){if(n!=null&&n.ge!=null)n=n.ge(n,t,i);else{var s=br[aa(n??null)];if(s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else if(s=br._,s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else throw kc("WritePort.put!",n)}return n},cr=function(n){if(n!=null&&n.xd!=null)n=n.xd(n);else{var t=cr[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=cr._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("Channel.close!",n)}return n},dr=function(n){if(n!=null&&n.rb!=null)n=n.rb(n);else{var t=dr[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=dr._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("Handler.active?",n)}return n},er=function(n){if(n!=null&&n.Xa!=null)n=n.Xa(n);else{var t=er[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=er._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("Handler.commit",n)}return n},fr=function(n,t){if(n!=null&&n.Zf!=null)n=n.Zf(n,t);else{var i=fr[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=fr._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("Buffer.add!*",n)}return n},gr=function(n,t,i,s,o){for(var f=0;f<o;)i[s+f]=n[t+f],f+=1},hr=function(n){this.length=this.ma=this.head=0,this.o=n},ir=function(n,t){this.ha=n,this.n=t,this.A=2,this.N=0},jr=function(n){return n.ha.length>=n.n},kr=function(){return bb("iPhone")&&!bb("iPod")&&!bb("iPad")},lr=function(){var n=$a.document;return n?n.documentMode:void 0},mr=function(){var n=document,t="IFRAME";return n.contentType==="application/xhtml+xml"&&(t=t.toLowerCase()),n.createElement(t)},nr=function(n,t,i){var s=n;t&&(s=la(n,t)),s=nr.Ah(s),typeof $a.setImmediate=="function"&&(i||nr.zh())?$a.setImmediate(s):(nr.ig||(nr.ig=nr.ah()),nr.ig(s))},sr=function(){or=!0,pr=!1;for(var n=0;;){var t=qr.pop();if(t!=null&&(t.G?t.G():t.call(null),1024>n)){n+=1;continue}break}return or=!1,0<qr.length?rr.G?rr.G():rr.call(null):null},rr=function(){return pr&&or?null:(pr=!0,nr(sr))},tr=function(n){qr.unbounded_unshift(n),rr()},ur=function(n,t){setTimeout(n,t)},vr=function(n,t){this.F=n,this.fh=t,this.A=425984,this.N=0},wr=function(n){return new vr(n,og)},xr=function(n,t){this.sb=n,this.F=t},yr=function(n){return dr(n.sb)},zr=function(n,t,i,s){this.hd=n,this.ne=0,this.oc=t,this.me=0,this.ha=i,this.closed=!1,this.xb=s},Ar=function(n){for(;;){var t=n.oc.pop();if(t!=null){var i=t.sb;if(t.F,i.rb(null)){var s=i.Xa(null);tr(function(o){return function(){return o.g?o.g(!0):o.call(null,!0)}}(s))}else continue}break}n.oc.cleanup(Mg(!1)),n.xd(null)},Br=function(n){return console.log(n),null},Dr=function(n,t){var i=l(null)?null:Br;return t=i.g?i.g(t):i.call(null,t),t==null?n:Cr.h(n,t)},Er=function(n){return new zr(new hr(Array(32)),new hr(Array(32)),n,function(){var t=l(null)?null.g?null.g(Cr):null.call(null,Cr):Cr;return function(){function i(f,d){try{return t.h?t.h(f,d):t.call(null,f,d)}catch(p){return Dr(f,p)}}function s(f){try{return t.g?t.g(f):t.call(null,f)}catch(d){return Dr(f,d)}}var o=null;return o=function(f,d){switch(arguments.length){case 1:return s.call(this,f);case 2:return i.call(this,f,d)}throw Error("Invalid arity: "+arguments.length)},o.g=s,o.h=i,o}()}())},Fr=function(n,t,i){this.key=n,this.F=t,this.forward=i,this.A=2155872256,this.N=0},Gr=function(n,t,i){i=Array(i+1);for(var s=0;s<i.length;)i[s]=null,s+=1;return new Fr(n,t,i)},Hr=function(n,t,i,s){for(;;){if(0>i)return n;e:for(;;){var o=i<n.forward.length?n.forward[i]:null;if(l(o))if(o.key<t)n=o;else break e;else break e}s!=null&&(s[i]=n),--i}},Ir=function(){this.nc=Gr(null,null,0),this.level=0,this.A=2155872256,this.N=0},Kr=function(n){var t=new Date().valueOf()+n,i=Jr.ceilingEntry(t);if(i=l(l(i)?i.key<t+10:i)?i.F:null,l(i))return i;var s=Er(null);return Jr.put(t,s),ur(function(){return Jr.remove(t),cr(s)},n),s},Lr=function(n,t){this.f=n,this.gh=t,this.A=393216,this.N=0},Mr=function(n){try{var t=n[0];return t.g?t.g(n):t.call(null,n)}catch(i){throw i instanceof Object?(t=i,n[6].xd(null),t):i}},Or=function(n,t,i){return i=i.gf(null,new Lr(function(s){return n[2]=s,n[1]=t,Mr(n)},og)),l(i)?(n[2]=q(i),n[1]=t,LF):null},Pr=function(n,t,i){return t=t.ge(null,i,new Lr(function(s){return n[2]=s,n[1]=15,Mr(n)},og)),l(t)?(n[2]=q(t),n[1]=15,LF):null},Qr=function(n,t){return n=n[6],t!=null&&n.ge(null,t,new Lr(function(){return null},og)),n.xd(null),n},Rr=function(n,t,i){this.f=n,this.Sf=t,this.hh=i,this.A=393216,this.N=0},Sr=function(n){return n=E.h(n,0)?null:n,Er(typeof n=="number"?new ir(new hr(Array(n)),n):n)},Ur=function(n,t){n=br(n,t,Tr),l(n)&&q(n)},Vr=function(n){for(var t=Array(n),i=0;i<n;)t[i]=i,i+=1;for(n=Math.random,i=t.length-1;0<i;i--){const s=Math.floor(n()*(i+1)),o=t[i];t[i]=t[s],t[s]=o}return t},Wr=function(n,t){this.Kc=n,this.ih=t,this.A=393216,this.N=0},Xr=function(n,t,i){this.Kc=n,this.od=t,this.jh=i,this.A=393216,this.N=0},Yr=function(n,t){return new Xr(n,t,og)},$r=function(n,t,i){var s=new Wr(Tg(!0),og),o=D(t),f=Vr(o),d=MF.g(i),p=function(){for(var v=0;;)if(v<o){var _=l(d)?v:f[v],k=Ee(t,_),P=cf(k)?k.g?k.g(0):k.call(null,0):null,L=l(P)?function(){var G=k.g?k.g(1):k.call(null,1);return br(P,G,Yr(s,function(Z,W,j,H,me){return function($e){return $e=new R(null,2,5,S,[$e,me],null),n.g?n.g($e):n.call(null,$e)}}(v,G,_,k,P)))}():ar(k,Yr(s,function(G,Z,W){return function(j){return j=new R(null,2,5,S,[j,W],null),n.g?n.g(j):n.call(null,j)}}(v,_,k)));if(l(L))return wr(new R(null,2,5,S,[q(L),function(){var G=P;return l(G)?G:k}()],null));v+=1}else return null}();return l(p)?p:lf(i,sm)?(p=function(){var v=s.rb(null);return l(v)?s.Xa(null):v}(),l(p)?wr(new R(null,2,5,S,[sm.g(i),sm],null)):null):null},bs=function(n){for(var t=[],i=arguments.length,s=0;s<i;)t.push(arguments[s]),s+=1;return as(arguments[0],arguments[1],arguments[2],3<t.length?new u(t.slice(3),0,null):null)},as=function(n,t,i,s){return s=M(s),n[1]=t,t=$r(function(o){return n[2]=o,Mr(n)},i,s),l(t)?(n[2]=q(t),LF):null},ts=function(n){var t=M(n);n=J.h(t,tF);var i=J.h(t,NF),s=J.h(t,OF),o=J.h(t,PF),f=J.h(t,QF),d=J.h(t,RF),p=J.h(t,SF),v=J.h(t,TF);t=Dn(v);var _=Sr(null);return n=Ni([UF,RF,VF,WF,NF,QF,PF,XF,OF,YF,ZF,tF,$F,TF],[!1,l(d)?d:m,!1,"",i,f,o,rs.h?rs.h(_,p):rs.call(null,_,p),s,lh,_,n,Dn(v),Dn(v)]),l(t)?ss.h?ss.h(n,t):ss.call(null,n,t):n},us=function(n,t){var i=M(n),s=J.h(i,OF);switch(n=J.h(i,NF),i=J.h(i,PF),s=Dn(s),i=Dn(i),n=Dn(n),t instanceof K?t.U:null){case"input-text-blurred":return t=s,l(t)?gc(n):t;case"suggestion-activated":return gc(s);case"input-text-changed":return(t=gc(n))?(t=gc(s))?t:i:t;default:return!1}},vs=function(n,t){n=M(n);var i=J.h(n,tF);return l(i)&&(i.g?i.g(t):i.call(null,t)),gj.l(n,TF,t)},ss=function(n,t){n=M(n);var i=J.h(n,RF);return t=i.g?i.g(t):i.call(null,t),l(t)?gj.j(n,WF,t,F([VF,!0])):n},xs=function(n){return wl.j(n,YF,F([aG]))},zs=function(n,t){var i=M(n);n=J.h(i,YF),n=Ee(n,t),t=gj.l(i,aG,t),t=l(us(i,bG))?vs(t,n):t;e:switch(i=M(i),i=J.h(i,OF),i=Dn(i),bG instanceof K?bG.U:null){case"suggestion-activated":i=gc(i);break e;default:i=!1}return l(i)?ss(t,n):t},As=function(n,t){n=M(n);var i=J.h(n,YF);return i=Ee(i,t),xs(ss(vs(zs(n,t),i),i))},Bs=function(n){n=M(n);var t=J.h(n,aG);return l(t)?As(n,t):n},Cs=function(n){n=M(n);var t=J.h(n,YF),i=J.h(n,aG);return w(t)&&(t=D(t),n=zs(n,If(t+((l(i)?i:-1)+1),t))),n},Ds=function(n){n=M(n);var t=J.h(n,YF),i=J.h(n,aG);return w(t)&&(t=D(t),n=zs(n,If(t+((l(i)?i:0)-1),t))),n},Fs=function(n){var t=xs(n);return t=gj.j(t,UF,!1,F([WF,"",VF,!1])),l(us(n,cG))?vs(t,null):t},Gs=function(n,t){return gj.j(n,YF,t,F([UF,!1,aG,null]))},Is=function(n){n=M(n);var t=J.h(n,WF),i=J.h(n,VF);return J.h(n,TF),i=(i=gc(i))?us(n,dG):i,l(i)?vs(n,t):xs(gj.l(n,WF,t))},Js=function(n,t){return gj.l(Fs(n),QF,t)},Ks=function(n,t){return xs(gj.l(ss(vs(n,t),t),$F,t))},Ls=function(n,t,i){var s=function(){function o(f){return dk.l(t,Gs,f)}return n.h?n.h(i,o):n.call(null,i,o)}();return l(s)?dk.l(t,Gs,s):dk.K(t,gj,UF,!0)},Ms=function(n,t){var i=Sr(1);tr(function(){var s=function(){function f(d){var p=d[1];if(p===1)return d[2]=null,d[1]=2,LF;if(p===2)return Or(d,4,t);if(p===3)return Qr(d,d[2]);if(p===4){var v=d[2];p=q(n),p=QF.g(p);var _=E.h("",v);return d[7]=v,d[8]=p,d[1]=_?5:6,LF}return p===5?(p=d[8],v=dk.h(n,Fs),p=Ls(p,n,""),d[9]=v,d[2]=p,d[1]=7,LF):p===6?(v=d[7],p=d[8],p=Ls(p,n,v),d[2]=p,d[1]=7,LF):p===7?(d[10]=d[2],d[2]=null,d[1]=2,LF):null}return function(){function d(_){for(;;){try{e:for(;;){var k=f(_);if(!Vf(k,LF)){var P=k;break e}}}catch(L){if(P=L,_[2]=P,w(_[4]))_[1]=z(_[4]);else throw P;P=LF}if(!Vf(P,LF))return P}}function p(){var _=[null,null,null,null,null,null,null,null,null,null,null];return _[0]=v,_[1]=1,_}var v=null;return v=function(_){switch(arguments.length){case 0:return p.call(this);case 1:return d.call(this,_)}throw Error("Invalid arity: "+arguments.length)},v.G=p,v.g=d,v}()}(),o=function(){var f=s();return f[6]=i,f}();return Mr(o)})},Ns=function(n,t){var i=q(n),s=M(i);i=J.h(s,WF);var o=J.h(s,ZF);return E.h(t,i)?s:(Ur(o,t),dk.h(n,function(f){return f=gj.j(f,WF,t,F([VF,!1])),l(us(s,cG))?vs(f,t):f}))},Os=function(n,t){var i=t.key;return l(E.h?E.h("ArrowUp",i):E.call(null,"ArrowUp",i))?dk.h(n,Ds):l(E.h?E.h("ArrowDown",i):E.call(null,"ArrowDown",i))?dk.h(n,Cs):l(E.h?E.h("Enter",i):E.call(null,"Enter",i))?dk.h(n,Bs):l(E.h?E.h("Escape",i):E.call(null,"Escape",i))?dk.l(n,Gs,lh):l(E.h?E.h("Tab",i):E.call(null,"Tab",i))?l(pg(YF.g(q(n))))?(dk.h(n,Cs),t.preventDefault()):dk.h(n,Is):!0},rs=function(n,t){var i=Sr(null),s=Sr(1);return tr(function(){var o=function(){function d(p){var v=p[1];if(v===7)return p[2]=p[2],p[1]=6,LF;if(v===1)return p[7]=null,p[2]=null,p[1]=2,LF;if(v===4)return Or(p,7,n);if(v===15)return p[8]=p[2],p[2]=null,p[1]=14,LF;if(v===13)return v=p[9],v=E.h(v,sm),p[1]=v?16:17,LF;if(v===6){v=p[2];var _=Kr(t),k=new R(null,2,5,S,[n,_],null);return p[10]=n,p[12]=v,p[11]=_,bs(p,8,k)}if(v===17)return p[2]=null,p[1]=18,LF;if(v===3)return Qr(p,p[2]);if(v===12)return v=p[12],Pr(p,i,v);if(v===2)return v=p[7],p[1]=l(v==null)?4:5,LF;if(v===11)return v=p[2],p[7]=v,p[2]=null,p[1]=2,LF;if(v===9)return _=p[13],v=I(_,0,null),_=I(_,1,null),p[14]=_,p[2]=v,p[1]=11,LF;if(v===5)return v=p[7],p[2]=v,p[1]=6,LF;if(v===14)return p[2]=p[2],p[1]=11,LF;if(v===16)return v=p[15],p[2]=v,p[1]=18,LF;if(v===10)return v=p[9],_=p[11],v=E.h(v,_),p[1]=v?12:13,LF;if(v===18)return p[2]=p[2],p[1]=14,LF;if(v===8){var P=p[10];return _=p[2],v=I(_,0,null),k=I(_,1,null),P=E.h(k,P),p[9]=k,p[15]=v,p[13]=_,p[1]=P?9:10,LF}return null}return function(){function p(k){for(;;){try{e:for(;;){var P=d(k);if(!Vf(P,LF)){var L=P;break e}}}catch(G){if(L=G,k[2]=L,w(k[4]))k[1]=z(k[4]);else throw L;L=LF}if(!Vf(L,LF))return L}}function v(){var k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];return k[0]=_,k[1]=1,k}var _=null;return _=function(k){switch(arguments.length){case 0:return v.call(this);case 1:return p.call(this,k)}throw Error("Invalid arity: "+arguments.length)},_.G=v,_.g=p,_}()}(),f=function(){var d=o();return d[6]=s,d}();return Mr(f)}),i},Ps=function(n,t,i){n=yj(t,n);var s=O.h(function(o){return Ni([Xx,aF],[new R(null,2,5,S,[t.g?t.g(o):t.call(null,o),i.g?i.g(o):i.call(null,o)],null),t.g?t.g(o):t.call(null,o)])},O.h(z,n));return new R(null,2,5,S,[s,n],null)},Qs=function(n,t,i){var s=i.toLowerCase();return function(o){var f=n.g?n.g(o):n.call(null,o);return f=l(f)?f:"",o=m.g(t.g?t.g(o):t.call(null,o)),f.toLowerCase().indexOf(s)!=-1||o.toLowerCase().indexOf(s)!=-1}},Rs=function(n,t,i){try{var s=new RegExp(i,"i")}catch(o){if(o instanceof Object)s=null;else throw o}return Pk.h(function(o,f){if(o==null)return null;var d=o.test(n.g?n.g(f):n.call(null,f));return l(d)?d:o.test(t.g?t.g(f):t.call(null,f))},s)},Zs=function(n,t,i,s,o){return new R(null,13,5,S,[Ss,T,["rc-multi-select-filter-text-box ",m.g(Q(o,new R(null,2,5,S,[eG,T],null)))].join(""),V,Q(o,new R(null,2,5,S,[eG,V],null)),gD,"100%",LC,fG,X,Al.j(F([new h(null,1,[QD,"relative"],null),Q(o,new R(null,2,5,S,[eG,X],null))])),dy,new R(null,2,5,S,[new R(null,19,5,S,[Vs,T,["rc-multi-select-filter-input-text ",m.g(Q(o,new R(null,2,5,S,[gG,T],null)))].join(""),TF,n,OF,!1,sF,t,gD,"100%",qC,"28px",X,Al.j(F([new h(null,1,[nD,"3px 4px"],null),Q(o,new R(null,2,5,S,[gG,X],null))])),V,Q(o,new R(null,2,5,S,[gG,V],null)),tF,function(f){return N(n,f),N(i,null)}],null),new R(null,15,5,S,[gp,T,Q(o,new R(null,2,5,S,[hG,T],null)),X,Q(o,new R(null,2,5,S,[hG,X],null)),V,Q(o,new R(null,2,5,S,[hG,V],null)),KD,function(){return N(n,"")},ID,0,HD,20,FD,-13],null)],null)],null)},gt=function(){var n=fn(!1);return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){var o=M(s);s=J.h(o,iG);var f=J.h(o,CD),d=J.h(o,jG),p=J.h(o,kG);o=J.h(o,lG);var v=Xx.g(s),_=(o=E.h(o,v))?"highlighted":l(q(n))?"mouseover":null;return new R(null,3,5,S,[mG,new h(null,6,[T,_,X,Al.j(F([new h(null,3,[nG,"6px",SD,l(f)?null:"pointer",GD,o?"white":"#444"],null),l(f)?new h(null,1,[RD,"none"],null):null])),qE,function(){return N(n,!0),null},rE,function(){return N(n,!1),null},KD,l(f)?null:function(){return d.h?d.h(v,!0):d.call(null,v,!0),null},oG,l(f)?null:function(){return p.g?p.g(v):p.call(null,v),null}],null),aF.g(s)],null)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()},kt=function(){var n=fn(!1);return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){var o=M(s);s=J.h(o,pG);var f=J.h(o,Vz),d=J.h(o,qG),p=J.h(o,CD),v=J.h(o,jG),_=J.h(o,kG),k=J.h(o,lG);o=J.h(o,rG);var P=f.g?f.g(s):f.call(null,s);return f=E.h(P,k)&&gc(p)?"highlighted":l(q(n))?"mouseover":null,new R(null,3,5,S,[lF,new h(null,6,[T,["active-result group-option ",f].join(""),X,Al.j(F([l(o)?new h(null,1,[zD,"hsl(208, 56%, 92%)"],null):null,l(p)?new h(null,2,[SD,"default",RD,"none"],null):null])),qE,function(){return N(n,!0),null},rE,function(){return N(n,!1),null},KD,l(p)?null:function(){return v.h?v.h(P,!1):v.call(null,P,!1),null},oG,l(p)?null:function(){return _.g?_.g(P):_.call(null,P),null}],null),d.g?d.g(s):d.call(null,s)],null)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()},mt=function(n,t){var i=new h(null,1,[gE,"1px"],null);return t=l(l(n)?t:n)?Al.j(F([i,new h(null,1,[sG,"line-through"],null)])):i,l(l(n)?null:n)?Al.j(F([t,new h(null,1,[GD,null],null)])):t},st=function(n,t,i,s,o,f,d,p,v){var _=t.g?t.g(n):t.call(null,n);return new R(null,9,5,S,[So,T,function(){var k=Q(v,new R(null,2,5,S,[tG,T],null));return BD.K?BD.K("list-group-item","compact","rc-selection-list-group-item",k):BD.call(null,"list-group-item","compact","rc-selection-list-group-item",k)}(),X,ph(v,new R(null,2,5,S,[tG,X],null),og),V,Al.j(F([new h(null,1,[KD,function(){var k=D(i);return k=E.h(1,k)?z(i):null,gc(o)&&gc(l(d)?E.h(k,_):d)&&(l(i.g?i.g(_):i.call(null,_))?(k=ot.h(i,_),s.g?s.g(k):s.call(null,k)):(k=Qf.h(i,_),s.g?s.g(k):s.call(null,k))),null}],null),Q(v,new R(null,2,5,S,[tG,V],null))])),ay,new R(null,19,5,S,[pt,U,null,T,["rc-selection-list-checkbox ",m.g(Q(v,new R(null,2,5,S,[uG,T],null)))].join(""),X,Q(v,new R(null,2,5,S,[uG,X],null)),V,Q(v,new R(null,2,5,S,[uG,V],null)),TF,(i.g?i.g(_):i.call(null,_))!=null,tF,function(){return ge},CD,o,vG,mt(i.g?i.g(_):i.call(null,_),p),mE,f.g?f.g(n):f.call(null,n)],null)],null)},wt=function(n,t,i,s,o,f,d,p,v){var _=t.g?t.g(n):t.call(null,n);return new R(null,9,5,S,[So,T,function(){var k=Q(v,new R(null,2,5,S,[tG,T],null));return BD.K?BD.K("list-group-item","compact","rc-selection-list-group-item",k):BD.call(null,"list-group-item","compact","rc-selection-list-group-item",k)}(),X,ph(v,new R(null,2,5,S,[tG,X],null),og),V,Al.j(F([new h(null,1,[KD,function(){if(!l(o)&&!l(l(d)?i.g?i.g(_):i.call(null,_):d)){var k=l(i.g?i.g(_):i.call(null,_))?kj:lj([_]);s.g?s.g(k):s.call(null,k)}return null}],null),Q(v,new R(null,2,5,S,[tG,V],null))])),ay,new R(null,21,5,S,[tt,U,null,T,["rc-selection-list-radio-button ",m.g(Q(v,new R(null,2,5,S,[wG,T],null)))].join(""),X,Al.j(F([ph(v,new R(null,2,5,S,[wG,X],null),og),l(o)?new h(null,1,[RD,"none"],null):null])),V,Q(v,new R(null,2,5,S,[wG,V],null)),TF,z(i),rF,_,tF,function(){return ge},CD,o,vG,mt(i.g?i.g(_):i.call(null,_),p),mE,f.g?f.g(n):f.call(null,n)],null)],null)},xt=function(n,t){var i=document.documentElement;if(l(i.addEventListener))return i.addEventListener(n,t,!1),function(){return i.removeEventListener(n,t,!1)};throw Error("Couldn't find addEventListener method in document-event-listener")},yt=function(n,t){if(n!=null&&n.sg!=null)n.sg(n,t);else{var i=yt[aa(n??null)];if(i!=null)i.h?i.h(n,t):i.call(null,n,t);else if(i=yt._,i!=null)i.h?i.h(n,t):i.call(null,n,t);else throw kc("IMouseMoveTracker.captureMouseMoves",n)}},zt=function(n,t){this.wf=n,this.xf=t,this.Jc=this.Hc=null,this.re=!1,this.y=this.x=null},At=function(n,t,i){l(i.altKey)&&(t=["ROW-INDEX[",m.g(t),"]"].join(""),xG.h?xG.h(t,n):xG.call(null,t,n))},Ct=function(n,t,i,s,o){return new R(null,13,5,S,[So,U,null,T,["rc-v-table-top-left rc-v-table-content ",m.g(i)].join(""),X,Al.j(F([new h(null,1,[qD,"hidden"],null),s])),V,o,qC,Bt(l(t)?t:0),ay,l(n)?new R(null,1,5,S,[n],null):""],null)},Et=function(n,t,i,s,o,f,d,p){return new R(null,11,5,S,[Dt,U,null,T,["rc-v-table-row-header-content rc-v-table-content ",m.g(f)].join(""),X,Al.j(F([new h(null,1,[gE,Bt(o,VD)],null),d])),V,p,dy,O.l(function(v,_){return Se(new R(null,3,5,S,[n,v,_],null),new h(null,1,[fx,l(t)?t.g?t.g(_):t.call(null,_):v],null))},new ch(null,qe,null,i,null),s)],null)},Gt=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me){var $e=I(d,0,null),De=I(d,1,null),le=I(d,2,null),Ce=I(d,3,null);return new R(null,15,5,S,[Dt,U,null,T,["rc-v-table-row-headers rc-v-table-viewport ",m.g(k)].join(""),X,Al.j(F([new h(null,3,[QD,"relative",qD,"hidden",bD,Bt(_)],null),P])),V,Al.j(F([l(f)?new h(null,3,[mF,function(Me){return De.O?De.O(yG,f,_,0,Me):De.call(null,yG,f,_,0,Me),null},YD,function(){return le.g?le.g(yG):le.call(null,yG),null},ZD,function(){return Ce.g?Ce.g(yG):Ce.call(null,yG),null}],null):null,L])),kD,l(v)?"none":"auto",qC,l(v)?Bt(v):null,dy,new R(null,2,5,S,[l(p)?new R(null,4,5,S,[$e,G,Z,W],null):null,l(n)?new R(null,9,5,S,[Et,n,t,i,s,o,j,H,me],null):""],null)],null)},Ht=function(n,t,i,s,o){return new R(null,13,5,S,[So,U,null,T,["rc-v-table-bottom-left rc-v-table-content ",m.g(i)].join(""),X,Al.j(F([new h(null,1,[qD,"hidden"],null),s])),V,o,qC,Bt(l(t)?t:0),ay,l(n)?new R(null,1,5,S,[n],null):""],null)},It=function(n,t,i,s,o){return new R(null,11,5,S,[So,U,null,T,BD.l?BD.l("rc-v-table-column-header-content","rc-v-table-content",i):BD.call(null,"rc-v-table-column-header-content","rc-v-table-content",i),X,Al.j(F([new h(null,1,[hE,Bt(t,VD)],null),s])),V,o,ay,new R(null,1,5,S,[n],null)],null)},Kt=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j){var H=I(s,0,null),me=I(s,1,null),$e=I(s,2,null),De=I(s,3,null);return new R(null,15,5,S,[Dt,U,null,T,["rc-v-table-column-headers rc-v-table-viewport ",m.g(v)].join(""),X,Al.j(F([new h(null,2,[qD,"hidden",QD,"relative"],null),_])),V,Al.j(F([l(i)?new h(null,3,[mF,function(le){return me.O?me.O(zG,i,d,p,le):me.call(null,zG,i,d,p,le),null},YD,function(){return $e.g?$e.g(zG):$e.call(null,zG),null},ZD,function(){return De.g?De.g(zG):De.call(null,zG),null}],null):null,k])),gD,l(f)?Bt(f):null,qC,Bt(l(d)?d:0),dy,new R(null,2,5,S,[l(o)?new R(null,4,5,S,[H,P,L,G],null):null,l(n)?new R(null,6,5,S,[It,n,t,Z,W,j],null):""],null)],null)},Lt=function(n,t,i,s,o,f,d,p,v){return new R(null,11,5,S,[Dt,U,null,T,["rc-v-table-row-content rc-v-table-content ",m.g(d)].join(""),X,Al.j(F([new h(null,2,[hE,Bt(o,VD),gE,Bt(f,VD)],null),p])),V,v,dy,O.l(function(_,k){return Se(new R(null,3,5,S,[n,_,k],null),new h(null,1,[fx,l(t)?t.g?t.g(k):t.call(null,k):_],null))},new ch(null,qe,null,i,null),s)],null)},Nt=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De,le,Ce){var Me=I(p,0,null),_n=I(p,1,null),_i=I(p,2,null),ll=I(p,3,null);return new R(null,17,5,S,[Dt,U,null,T,["rc-v-table-rows rc-v-table-viewport ",m.g(Z)].join(""),X,Al.j(F([new h(null,3,[qD,"hidden",QD,"relative",bD,Bt(L)],null),W])),V,Al.j(F([l(d)?new h(null,3,[mF,function(_l){return _n.O?_n.O(AG,d,L,G,_l):_n.call(null,AG,d,L,G,_l),null},YD,function(){return _i.g?_i.g(AG):_i.call(null,AG),null},ZD,function(){return ll.g?ll.g(AG):ll.call(null,AG),null}],null):null,j,new h(null,1,[Xx,P],null)])),kD,l(_)?"none":"auto",gD,l(k)?Bt(k):null,qC,l(_)?Bt(_):null,dy,new R(null,2,5,S,[l(v)?new R(null,4,5,S,[Me,H,me,$e],null):null,new R(null,10,5,S,[Lt,n,t,i,s,o,f,De,le,Ce],null)],null)],null)},Ot=function(n,t,i,s,o){return new R(null,11,5,S,[So,U,null,T,BD.l?BD.l("rc-v-table-column-footer-content","rc-v-table-content",i):BD.call(null,"rc-v-table-column-footer-content","rc-v-table-content",i),X,Al.j(F([new h(null,1,[hE,Bt(t,VD)],null),s])),V,o,ay,new R(null,1,5,S,[n],null)],null)},Pt=function(n,t,i,s,o,f,d,p,v,_){return new R(null,15,5,S,[So,U,null,T,["rc-v-table-column-footers rc-v-table-viewport ",m.g(o)].join(""),X,Al.j(F([new h(null,1,[qD,"hidden"],null),f])),V,d,gD,l(i)?Bt(i):null,qC,Bt(l(s)?s:0),ay,l(n)?new R(null,6,5,S,[Ot,n,t,p,v,_],null):""],null)},Qt=function(n,t,i,s,o){return new R(null,13,5,S,[So,U,null,T,["rc-v-table-top-right rc-v-table-content ",m.g(i)].join(""),X,Al.j(F([new h(null,1,[qD,"hidden"],null),s])),V,o,qC,Bt(l(t)?t:0),ay,l(n)?new R(null,1,5,S,[n],null):""],null)},Rt=function(n,t,i,s,o,f,d,p){return new R(null,11,5,S,[Dt,U,null,T,["rc-v-table-row-footer-content rc-v-table-content ",m.g(f)].join(""),X,Al.j(F([new h(null,1,[gE,Bt(o,VD)],null),d])),V,p,dy,O.l(function(v,_){return Se(new R(null,3,5,S,[n,v,_],null),new h(null,1,[fx,l(t)?t.g?t.g(_):t.call(null,_):v],null))},new ch(null,qe,null,i,null),s)],null)},St=function(n,t,i,s,o,f,d,p,v,_,k,P,L){return new R(null,15,5,S,[So,U,null,T,["rc-v-table-row-footers rc-v-table-viewport ",m.g(p)].join(""),X,Al.j(F([new h(null,2,[qD,"hidden",bD,Bt(d)],null),v])),V,_,kD,l(f)?"none":"auto",qC,l(f)?Bt(f):null,ay,l(n)?new R(null,9,5,S,[Rt,n,t,i,s,o,k,P,L],null):""],null)},Tt=function(n,t,i,s,o){return new R(null,13,5,S,[So,U,null,T,["rc-v-table-bottom-right rc-v-table-content ",m.g(i)].join(""),X,Al.j(F([new h(null,1,[qD,"hidden"],null),s])),V,o,qC,Bt(l(t)?t:0),ay,l(n)?new R(null,1,5,S,[n],null):""],null)},JG=function(n,t){t=Al.j(F([BG,t])),t=M(t);var i=J.h(t,Xx),s=J.h(t,CG),o=kn.h(lj([i]),Xx),f=xF(i,n);switch(s=f==null?DG:E.h(s,CG.g(f))?EG:FG,s=s instanceof K?s.U:null,s){case"flip":return GG.h(function(d){return l(o(d))?ov.l(d,CG,new h(null,2,[HG,IG,IG,HG],null)):d},n);case"drop":return aA(i,n);case"add":return Gh(Qf.h(n,Al.j(F([BG,t]))));default:throw Error(["No matching clause: ",m.g(s)].join(""))}},cu=function(n){var t=M(n);return n=J.l(t,kD,"24px"),t=J.l(t,jp,"black"),new R(null,3,5,S,[eE,new h(null,3,[gD,n,qC,n,KG,"0 0 24 24"],null),new R(null,2,5,S,[LG,new h(null,2,[jp,t,Yq,"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"],null)],null)],null)},du=function(n){var t=M(n);return n=J.l(t,kD,"24px"),t=J.l(t,jp,"black"),new R(null,3,5,S,[eE,new h(null,3,[gD,n,qC,n,KG,"0 0 24 24"],null),new R(null,2,5,S,[LG,new h(null,2,[jp,t,Yq,"M7 10l5 5 5-5H7z"],null)],null)],null)},eu=function(n){var t=M(n);return n=J.l(t,kD,"24px"),t=J.l(t,jp,"black"),new R(null,3,5,S,[eE,new h(null,3,[gD,n,qC,n,KG,"0 0 24 24"],null),new R(null,2,5,S,[LG,new h(null,2,[jp,t,Yq,"M7 14l5-5 5 5H7z"],null)],null)],null)},tu=function(n,t,i,s){t=M(t);var o=J.h(t,Xx),f=J.h(t,gD),d=J.h(t,qC),p=J.h(t,LC),v=J.h(t,MG),_=J.h(t,NG);return new R(null,3,5,S,[dA,Al.j(F([new h(null,2,[T,function(){var k=Q(s,new R(null,2,5,S,[OG,T],null));return BD.h?BD.h("rc-simple-v-table-row-item",k):BD.call(null,"rc-simple-v-table-row-item",k)}(),X,Al.j(F([Ni([PG,QG,MG,RG,qD,gD,nD,PD,qC],["ellipsis",p,v,"nowrap","hidden",Wo(f),"0px 12px","inline-block",Wo(d)]),Q(s,new R(null,2,5,S,[OG,X],null)),Qe(i)?i.h?i.h(n,t):i.call(null,n,t):i]))],null),Q(s,new R(null,2,5,S,[OG,V],null))])),function(){var k=l(_)?_:kn.h(m,o);return k.g?k.g(n):k.call(null,n)}()],null)},vu=function(n){var t=M(n),i=J.h(t,SG);n=J.h(t,TG);var s=J.h(t,AG),o=J.h(t,UG),f=J.h(t,VG),d=J.h(t,WG),p=J.h(t,JD),v=J.h(t,XG),_=J.h(t,YG),k=J.h(t,ZG),P=J.h(t,$G);return t=J.h(t,aH),Ng.h(new R(null,2,5,S,[dA,Al.j(F([new h(null,5,[T,["rc-simple-v-table-row ",m.g(Q(p,new R(null,2,5,S,[bH,T],null)))].join(""),X,Al.j(F([new h(null,6,[nD,"4px 0px",qD,"hidden",RG,"nowrap",qC,Wo(_),wD,["1px solid ",m.g(P)].join(""),SD,l(k)?"pointer":null],null),l(l(n)?!$k(f):n)?new h(null,1,[zD,"#f2f2f2"],null):null,Q(p,new R(null,2,5,S,[bH,X],null)),Qe(t)?t.g?t.g(s):t.call(null,s):t])),KD,function(L){return At(s,f,L),l(k)&&(k.g?k.g(f):k.call(null,f)),null},YD,l(v)?function(){return v.g?v.g(f):v.call(null,f),null}:null,ZD,l(o)?function(){return o.g?o.g(f):o.call(null,f),null}:null],null),Q(p,new R(null,2,5,S,[bH,V],null))]))],null),function(){return function L(G){return new Yf(null,function(){for(;;){var Z=w(G);if(Z){if(df(Z)){var W=Fd(Z),j=D(W),H=ag(j);e:for(var me=0;;)if(me<j){var $e=Oe(W,me);H.add(new R(null,5,5,S,[tu,s,$e,i,p],null)),me+=1}else{W=!0;break e}return W?dg(H.fa(),L(Gd(Z))):dg(H.fa(),null)}return H=z(Z),Tf(new R(null,5,5,S,[tu,s,H,i,p],null),L(he(Z)))}return null}},null,null)}(d)}())},eH=function(n,t,i){var s=M(i),o=J.l(s,cH,mE);return i=J.l(s,dH,mf),s=J.l(s,CG,HG),n=o.g?o.g(n):o.call(null,n),t=o.g?o.g(t):o.call(null,t),t=i.h?i.h(n,t):i.call(null,n,t),E.h(IG,s)?-t:t},fH=function(n){return function(t,i){return t=z(ul.h(Ck,O.h(Pk.l(eH,t,i),n))),l(t)?t:0}},gH=function(n,t){return Kg.O(ov,n,X,Al,t)},xu=function(){this.mf=this.mf},yu=function(n,t){this.type=n,this.currentTarget=this.target=t,this.defaultPrevented=this.Ld=!1},zu=function(n,t){yu.call(this,n?n.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.Ad=null,n&&this.init(n,t)},Bu=function(n,t,i,s,o){this.listener=n,this.proxy=null,this.src=t,this.type=i,this.capture=!!s,this.sb=o,this.key=++Au,this.Od=this.$d=!1},Cu=function(n){n.Od=!0,n.listener=null,n.proxy=null,n.src=null,n.sb=null},Du=function(n){this.src=n,this.Nb={},this.Ge=0},Fu=function(n,t){var i=t.type;if(i in n.Nb){var s=n.Nb[i],o=Eu(s,t),f;(f=0<=o)&&Array.prototype.splice.call(s,o,1),f&&(Cu(t),n.Nb[i].length==0&&(delete n.Nb[i],n.Ge--))}},Gu=function(n,t,i,s){for(var o=0;o<n.length;++o){var f=n[o];if(!f.Od&&f.listener==t&&f.capture==!!i&&f.sb==s)return o}return-1},Iu=function(n,t,i,s,o){if(s&&s.once)return Hu(n,t,i,s,o);if(Array.isArray(t)){for(var f=0;f<t.length;f++)Iu(n,t[f],i,s,o);return null}return i=Ju(i),n&&n[Ku]?n.Ic.add(String(t),i,!1,ca(s)?!!s.capture:!!s,o):Lu(n,t,i,!1,s,o)},Lu=function(n,t,i,s,o,f){if(!t)throw Error("Invalid event type");var d=ca(o)?!!o.capture:!!o,p=Mu(n);if(p||(n[Nu]=p=new Du(n)),i=p.add(t,i,s,d,f),i.proxy)return i;if(s=Ou(),i.proxy=s,s.src=n,s.listener=i,n.addEventListener)Pu||(o=d),o===void 0&&(o=!1),n.addEventListener(t.toString(),s,o);else if(n.attachEvent)n.attachEvent(Qu(t.toString()),s);else if(n.addListener&&n.removeListener)n.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return i},Ou=function(){function n(i){return t.call(n.src,n.listener,i)}const t=Su;return n},Hu=function(n,t,i,s,o){if(Array.isArray(t)){for(var f=0;f<t.length;f++)Hu(n,t[f],i,s,o);return null}return i=Ju(i),n&&n[Ku]?n.Ic.add(String(t),i,!0,ca(s)?!!s.capture:!!s,o):Lu(n,t,i,!0,s,o)},Tu=function(n,t,i,s,o){if(Array.isArray(t))for(var f=0;f<t.length;f++)Tu(n,t[f],i,s,o);else s=ca(s)?!!s.capture:!!s,i=Ju(i),n&&n[Ku]?n.Ic.remove(String(t),i,s,o):n&&(n=Mu(n))&&(t=n.rf(t,i,s,o))&&Uu(t)},Uu=function(n){if(typeof n!="number"&&n&&!n.Od){var t=n.src;if(t&&t[Ku])Fu(t.Ic,n);else{var i=n.type,s=n.proxy;t.removeEventListener?t.removeEventListener(i,s,n.capture):t.detachEvent?t.detachEvent(Qu(i),s):t.addListener&&t.removeListener&&t.removeListener(s),(i=Mu(t))?(Fu(i,n),i.Ge==0&&(i.src=null,t[Nu]=null)):Cu(n)}}},Qu=function(n){return n in Vu?Vu[n]:Vu[n]="on"+n},Su=function(n,t){if(n.Od)n=!0;else{t=new zu(t,this);var i=n.listener,s=n.sb||n.src;n.$d&&Uu(n),n=i.call(s,t)}return n},Mu=function(n){return n=n[Nu],n instanceof Du?n:null},Ju=function(n){return typeof n=="function"?n:(n[Wu]||(n[Wu]=function(t){return n.handleEvent(t)}),n[Wu])},Xu=function(n){return n!=null?n.A&32768||Zd===n.$e?!0:n.A?!1:ic(Zc,n):ic(Zc,n)},Yu=function(n,t){Ql(n,t)},Zu=function(n,t){return setTimeout(n,t)},$u=function(n){return n!=null&&Zd===n.Be?[l(be.h?be.h(Jl,n):be.call(null,Jl,n))?"ra":l(be.h?be.h(Ol,n):be.call(null,Ol,n))?"rc":l(be.h?be.h(Sl,n):be.call(null,Sl,n))?"rx":l(be.h?be.h(Nl,n):be.call(null,Nl,n))?"tr":"other",m.g($d(n))].join(""):null},bv=function(n){return cf(n)?z(n):av.j(FF,F(["re-frame: expected a vector, but got:",n]))},dv=function(n,t){return J.h(J.h(q(cv),n),t)},ev=function(n,t,i){return dk.K(cv,Bn,new R(null,2,5,S,[n,t],null),i),i},gv=function(n,t){return Q(n,new R(null,2,5,S,[hH,t],null))},hv=function(n,t,i){return Bn(n,new R(null,2,5,S,[hH,t],null),i)},nv=function(n,t){for(;;){var i=Pv.g(n);if(Ve(i))return n;var s=Ue(i),o=iH.g(n);o=gj.j(n,Pv,i==null?null:Wc(i),F([iH,Qf.h(o,s)])),i=s,s=t,o=M(o);var f=J.h(o,jH),d=J.h(i,s);if(gc(d))n=o;else if(l(f))n=d.g?d.g(o):d.call(null,o);else try{n=d.g?d.g(o):d.call(null,o)}catch(p){throw t=p,n=i,i=s,s=["Interceptor Exception: ",m.g(t instanceof Error?t.message:null)].join(""),n=new h(null,2,[ZE,i,kH,Xx.g(n)],null),new Hk(s,n,t)}}},pv=function(n,t){return ov.K(n,Pv,Pg(),t)},qv=function(n){return pv(wl.h(n,Pv),iH.g(n))},yv=function(n){var t=bv(n),i=dv(lH,t);if(l(i))if(l(sv))av.j(FF,F(["re-frame: while handling",sv,", dispatch-sync was called for",n,". You can't call dispatch-sync within an event handler."]));else{t=sv,sv=n;try{var s=pv(hv(hv(og,lH,n),mH,n),i),o=dv(FF,nH);if(gc(o))nv(qv(nv(gj.l(s,jH,!0),oH)),pH);else try{nv(qv(nv(s,oH)),pH)}catch(v){s=v;var f=s instanceof Hk?s.cause:null,d=Kg.l(Al,s instanceof Hk?s.data:null,F([new h(null,1,[qH,n],null)])),p=new Hk(s instanceof Error?s.message:null,d,s instanceof Hk?s.cause:null);o.h?o.h(f,p):o.call(null,f,p)}}finally{sv=t}}},Av=function(n,t,i){var s=new R(null,2,5,S,[n,t],null);return Yu(i,function(){return dk.h(zv,function(o){return lf(o,s)&&i===J.h(o,s)?wl.h(o,s):o})}),dk.h(zv,function(o){return gj.l(o,s,i)}),i},Bv=function(n,t){return J.h(q(zv),new R(null,2,5,S,[n,t],null))},Cv=function(n,t){return Ng.l(Ne(t),O.g(function(i){var s=I(i,0,null);return i=I(i,1,null),new R(null,2,5,S,[s,n.g?n.g(i):n.call(null,i)],null)}),t)},Dv=function(n,t){var i=te;return i=Ye(n)?O.h(i,n):Ze(n)?Cv(i,n):Xu(n)?i.g?i.g(n):i.call(null,n):ge,Ye(n)?O.h(te,n):Ze(n)?Cv(te,n):Xu(n)?q(n):av.j(FF,F(["re-frame: in the reg-sub for",t,", the input-signals function returns:",n])),i},Jv=function(n){for(var t=D(n.Ta);;){if(t===0)return Ev(n,rH,null);var i=Jg(Gv,bj(Te(Ue(n.Ta))));if(l(i))return Ev(n,sH,i);Iv(n),--t}},Lv=function(n){function t(){return Ev(n,tH,null)}return nr.g?nr.g(t):nr.call(null,t)},Ev=function(n,t,i){var s=function(){var f=new R(null,2,5,S,[n.oe,t],null);if(E.h(new R(null,2,5,S,[uH,vH],null),f))return new R(null,2,5,S,[wH,function(){return n.Ta=Qf.h(n.Ta,i),Lv(n)}],null);if(E.h(new R(null,2,5,S,[xH,yH],null),f))return new R(null,2,5,S,[uH,function(){throw n.Ta=Og,i}],null);if(E.h(new R(null,2,5,S,[xH,rH],null),f))return Ve(n.Ta)?new R(null,1,5,S,[uH],null):new R(null,2,5,S,[wH,function(){return Lv(n)}],null);if(E.h(new R(null,2,5,S,[xH,sH],null),f))return new R(null,2,5,S,[zH,function(){return Sv(n,i)}],null);if(E.h(new R(null,2,5,S,[zH,AH],null),f))return new R(null,2,5,S,[xH,function(){return Iv(n),Jv(n)}],null);if(E.h(new R(null,2,5,S,[wH,tH],null),f))return new R(null,2,5,S,[xH,function(){return Jv(n)}],null);if(E.h(new R(null,2,5,S,[zH,vH],null),f))return new R(null,2,5,S,[zH,function(){return n.Ta=Qf.h(n.Ta,i)}],null);if(E.h(new R(null,2,5,S,[xH,vH],null),f))return new R(null,2,5,S,[xH,function(){return n.Ta=Qf.h(n.Ta,i)}],null);if(E.h(new R(null,2,5,S,[wH,vH],null),f))return new R(null,2,5,S,[wH,function(){return n.Ta=Qf.h(n.Ta,i)}],null);throw Ik(["re-frame: router state transition not found. ",m.g(n.oe)," ",m.g(t)].join(""),new h(null,2,[BH,n.oe,CH,t],null))}(),o=I(s,0,null);return s=I(s,1,null),n.oe=o,l(s)?s.G?s.G():s.call(null):null},Sv=function(n,t){function i(){return Ev(n,AH,null)}return t.g?t.g(i):t.call(null,i)},Iv=function(n){var t=Ue(n.Ta);try{yv(t);var i=n.Ta,s=i==null?null:Wc(i);n.Ta=s,Wv(n,t)}catch(o){Ev(n,yH,o)}},Wv=function(n,t){for(var i=w(dj(n.rh)),s=null,o=0,f=0;;)if(f<o){var d=s.S(null,f);d.h?d.h(t,n.Ta):d.call(null,t,n.Ta),f+=1}else if(i=w(i))s=i,df(s)?(i=Fd(s),o=Gd(s),s=i,d=D(i),i=o,o=d):(d=z(s),d.h?d.h(t,n.Ta):d.call(null,t,n.Ta),i=C(s),s=null,o=0),f=0;else break},Yv=function(n){if(n==null)throw Ik('re-frame: you called "dispatch" without an event vector.',og);return Ev(Xv,vH,n),null},aw=function(n){n=M(n);var t=J.h(n,DH),i=J.h(n,EH);return Ve(i)||typeof t!="number"?av.j(FF,F(["re-frame: ignoring bad :dispatch-later value:",n])):Zu(function(){return Yv(i)},t)},bw=function(n,t){return E.h(n,t)?new R(null,3,5,S,[null,null,n],null):new R(null,3,5,S,[n,t,null],null)},dw=function(n){return w(n)?nc(function(t,i){var s=I(i,0,null);return i=I(i,1,null),gj.l(t,s,i)},Gh(ah(Kg.h(cw,bj(n)),null)),n):null},fw=function(n,t,i){var s=J.h(n,i),o=J.h(t,i),f=ew(s,o),d=I(f,0,null),p=I(f,1,null);return f=I(f,2,null),n=lf(n,i),t=lf(t,i),s=n&&t&&(f!=null||s==null&&o==null),new R(null,3,5,S,[!n||d==null&&s?null:ng([i,d]),!t||p==null&&s?null:ng([i,p]),s?ng([i,f]):null],null)},hw=function(n,t){var i=O.h,s=gw.l,o=cf(n)?n:Gh(n),f=cf(t)?t:Gh(t);return n=D(n),t=D(t),Gh(i.call(O,dw,s.call(gw,o,f,xj(0,n>t?n:t))))},jw=function(n,t){return new R(null,3,5,S,[pg(iw.h(n,t)),pg(iw.h(t,n)),pg(zl.h(n,t))],null)},kw=function(n){if(n!=null&&n.Wg!=null)n=n.Wg(n);else{var t=kw[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=kw._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("EqualityPartition.equality-partition",n)}return n},lw=function(n,t){if(n!=null&&n.Vg!=null)n=n.Vg(n,t);else{var i=lw[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=lw._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("Diff.diff-similar",n)}return n},ew=function(n,t){return E.h(n,t)?new R(null,3,5,S,[null,null,n],null):E.h(kw(n),kw(t))?lw(n,t):bw(n,t)},qw=function(n){return mw.j(F([Xx,FH,oH,function(t){var i=hH.g(t),s=M(i);return i=J.h(s,GH),s=J.h(s,lH),i=n.h?n.h(i,s):n.call(null,i,s),Bn(t,new R(null,2,5,S,[HH,GH],null),i)}]))},sw=function(n){return mw.j(F([Xx,IH,oH,function(t){var i=hH.g(t);i=M(i);var s=J.h(i,lH);return gj.l(t,HH,n.h?n.h(i,s):n.call(null,i,s))}]))},ww=function(n,t){t=new R(null,5,5,S,[tw,uw,vw,null,sw(t)],null),ev(lH,n,ul.h(cc,kh(t)))},yw=function(n,t){Kg.l(xw,n,t)},Aw=function(n){return zw.g(n)},Bw=function(n,t,i,s,o){this.unit=n,this.cc=t,this.T=i,this.I=s,this.C=o,this.A=2230716170,this.N=139264},Cw=function(n,t,i,s,o){this.identifier=n,this.value=t,this.T=i,this.I=s,this.C=o,this.A=2230716170,this.N=139264},Dw=function(n){if(n!=null&&n.eg!=null)n=n.eg(n);else{var t=Dw[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Dw._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("ToString.to-str",n)}return n},Ew=function(n){return Kg.h(m,O.h(Dw,n))},Fw=function(n){return Ze(n)&&!bf(n)},Gw=function(n){return n instanceof Cw},Jw=function(n){return Gw(n)&&E.h(JH.g(n),KH)},Lw=function(n){return Gw(n)&&E.h(JH.g(n),LH)},Mw=function(n,t){return n=Dw(n),E.h("-",Le(n))?[m.g(n),m.g(t)].join(""):[m.g(n),"-",m.g(t)].join("")},Nw=function(n,t){return n=Dw(n),E.h("-",z(n))?Mw(n,t):Mw(["-",m.g(n)].join(""),t)},Ow=function(n,t,i){return t=n<=t?new R(null,2,5,S,[n,t],null):new R(null,2,5,S,[t,n],null),n=I(t,0,null),t=I(t,1,null),i=t<i?t:i,n>i?n:i},Pw=function(n){var t=Gh(n),i=function s(o){return l(o)?Tf(O.h(z,o),new Yf(null,function(){e:for(var f=D(o)-1,d=o;;){if(E.h(f,-1)){f=null;break e}var p=C(d.g?d.g(f):d.call(null,f));if(p){f=gj.l(d,f,p);break e}p=f-1,d=gj.l(d,f,t.g?t.g(f):t.call(null,f)),f=p}return s(f)},null,null)):null};return Ig(w,n)?new Yf(null,function(){return i(t)},null,null):null},Sw=function(n){var t=I(n,0,null),i=I(n,1,null);return function(s){return s=Cj(i,s),l(s)?new h(null,3,[Qw,t,MH,s,kD,D(s)],null):null}},Uw=function(n){for(var t="";;){var i=Tw(n);if(l(i)){i=M(i);var s=J.h(i,Qw),o=J.h(i,MH);i=J.h(i,kD),n=n.substring(i),t=[t,m.g(function(){var f=s;switch(f instanceof K?f.U:null){case"string":return o;case"r-brace":return"{";case"l-brace":return"}";case"r-paren":return"(";case"l-paren":return")";case"and":return"and ";case"comma":return",";case"semi-comma":return";";case"colon":return":";case"space+":return" ";case"white-space+":return"";default:return o}}())].join("")}else return t}},Vw=function(){},Y=function(n){if(n!=null&&n.Ga!=null)n=n.Ga(n);else{var t=Y[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Y._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("ICSSSelector.css-selector",n)}return n},Ww=function(n){return n!=null?Zd===n.qf?!0:n.ie?!1:ic(Vw,n):ic(Vw,n)},Xw=function(n,t,i,s){this.qc=n,this.T=t,this.I=i,this.C=s,this.A=2230716171,this.N=139264},Yw=function(n){return new Xw(n,null,null,null)},$w=function(n){n=qj(n);var t=Bj(Zw,n);if(l(t))return t;throw Ik("Selector must be either a keyword, string, or symbol.",["Invalid value ",im.j(F([n]))].join(""))},bx=function(n){return lf(ax,n)},dx=function(n){E.h(n,NH)},ex=function(n){E.h(n,NH)},kx=function(n){if(typeof n=="number")return new Bw(OH,n,null,null,null);if(n instanceof Bw){if(!E.h(OH.g?OH.g(n):OH.call(null,n),OH))e:{var t=M(n);if(n=J.h(t,QH),t=J.h(t,RH),Ig(bx,new R(null,2,5,S,[t,OH],null))){var i=Q(ax,new R(null,2,5,S,[t,OH],null)),s=Q(ax,new R(null,2,5,S,[OH,t],null));if(l(i)){n=new Bw(OH,i*n,null,null,null);break e}if(l(s)){n=new Bw(OH,n/s,null,null,null);break e}throw n=F([qj(t),qj(OH)]),n=Kg.l(zn,"Can't convert %s to %s",n),Ik(n,og)}throw n=z(Zg(bx,new R(null,2,5,S,[t,OH],null))),Ik(["Inconvertible unit ",qj(n)].join(""),og)}return n}throw t=F([n,qj(OH)]),t=Kg.l(zn,"Unable to convert %s to %s",t),Ik(t,new h(null,1,[SH,new h(null,2,[TH,n,RH,OH],null)],null))},nx=function(n){var t=cf.g?cf.g(n):cf.call(null,n);return l(t)?t:Gw(n)&&E.h(JH.g(n),VH)||Jw(n)||Lw(n)||Gw(n)&&E.h(JH.g(n),WH)},YH=function(n,t){return XH.h(jh,ul)(n,t)},ox=function(n){if(n!=null&&n.Sa!=null)n=n.Sa(n);else{var t=ox[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=ox._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("IExpandable.expand",n)}return n},qx=function(n){return Ve(n)?n:Se(px(n),Te(n))},sx=function(n){var t=Cj(rx,Dw(Le(n)));return t=l(t)?Kg.h(m,he(t)):null,l(t)?(n=pj(n),fh.h(pj(n),new Mf(null,Ew(F([Le(n),t])),null,1,null))):n},vx=function(n){var t=new R(null,2,5,S,[sj(Ww,n),Zg(Ww,n)],null);n=I(t,0,null),t=I(t,1,null);var i=tx;n=O.h(Y,n),n=w(i)?O.h(kh,Pw(F([i,n]))):O.h(ux,n),n=O.h(sx,n),t=ox(t),i=YH(Fw,t),t=I(i,0,null),i=I(i,1,null);e:{var s=tx;tx=w(n)?n:tx;try{var o=Aj(gh(ox,F([i])));break e}finally{tx=s}o=void 0}return Qf.h(o,Qf.h(new R(null,1,5,S,[n],null),gh(ox,F([t]))))},Bx=function(n){var t=Q(wx,new R(null,2,5,S,[ZH,$H],null));return t=zx.g?zx.g(t):zx.call(null,t),l(t)?t.h?t.h(n,Ax):t.call(null,n,Ax):n},Cx=function(n){if(n!=null&&n.La!=null)n=n.La(n);else{var t=Cx[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=Cx._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("CSSRenderer.render-css",n)}return n},Dx=function(n,t){return Nk(", ",function(){return function i(s){return new Yf(null,function(){for(;;){var o=w(s);if(o){if(df(o)){var f=Fd(o),d=D(f),p=ag(d);e:for(var v=0;;)if(v<d){var _=Oe(f,v);_=Ye(_)?Nk(" ",O.h(n,_)):n.g?n.g(_):n.call(null,_),p.add(_),v+=1}else{f=!0;break e}return f?dg(p.fa(),i(Gd(o))):dg(p.fa(),null)}return p=z(o),Tf(Ye(p)?Nk(" ",O.h(n,p)):n.g?n.g(p):n.call(null,p),i(he(o)))}return null}},null,null)}(t)}())},Ex=function(n){return Gw(n)&&E.h(JH.g(n),WH)?Dw(Q(n,new R(null,2,5,S,[rF,JH],null))):Cx(n)},Fx=function(n,t){return gh(function(i){return Tf(i,n.g?n.g(i):n.call(null,i))},F([t]))},Gx=function(n,t){var i=I(t,0,null),s=I(t,1,null);return function o(f){return new Yf(null,function(){for(;;){var d=w(f);if(d){if(df(d)){var p=Fd(d),v=D(p),_=ag(v);e:for(var k=0;;)if(k<v){var P=Oe(p,k);P=new R(null,2,5,S,[Nw(P,qj(i)),s],null),_.add(P),k+=1}else{p=!0;break e}return p?dg(_.fa(),o(Gd(d))):dg(_.fa(),null)}return _=z(d),Tf(new R(null,2,5,S,[Nw(_,qj(i)),s],null),o(he(d)))}return null}},null,null)}(n)},Hx=function(n,t){return Fx(Pk.h(Gx,n),t)},Jx=function(n,t){return Fx(function(i){var s=I(i,0,null);return I(i,1,null),s=qj(s),lf(oj(O.h(qj,aI.g(wx))),s)?Gx(n,i):null},t)},Nx=function(n){var t=O.h,i=bI.g(Te(n));i=l(i)?i:w(bI.g(wx));var s=l(cI.g(Te(n)))?Hx:Jx;return n=s.h?s.h(i,n):s.call(null,i,n),Nk(`
`,t.call(O,Mx,n))},Px=function(n){var t=I(n,0,null),i=I(n,1,null);return w(n)&&Ig(w,n)?[m.g(Dx(Cx,t)),` {
`,m.g(Nk(`
`,O.h(Cx,i)).replace(Ox,"  ")),`
}`].join(""):null},Qx=function(n){var t=I(n,0,null);n=I(n,1,null);var i=O.h(Ex,new R(null,2,5,S,[t,n],null));return t=I(i,0,null),i=I(i,1,null),n===!0?t:n===!1?["not ",m.g(t)].join(""):E.h("only",i)?["only ",m.g(t)].join(""):l(l(n)?w(i):n)?["(",m.g(t),": ",m.g(i),")"].join(""):["(",m.g(t),")"].join("")},Rx=function(n){var t=I(n,0,null);n=I(n,1,null);var i=O.h(Ex,new R(null,2,5,S,[t,n],null));return t=I(i,0,null),i=I(i,1,null),l(l(n)?w(i):n)?["(",m.g(t),": ",m.g(i),")"].join(""):["(",m.g(t),")"].join("")},Ux=function(n){return Kg.h(Sx,F([Tx,n]))},Yx=function(n,t){dk.K(Vx,ov,n,function(i){return E.h(dI.g(i),t)||(eI.g(i).innerHTML=t),gj.l(i,dI,t)})},$x=function(n){var t=M(n);return n=J.h(t,mv),t=J.h(t,gI),gc(t)?n:Nk(" ",O.h(function(i){if(typeof i=="string")return i;if(Ze(i)&&typeof T.g(i)=="string")return T.g(i);throw Error(["Invalid argument to :composes key:",m.g(i)].join(""))},ff(t)?Ng.h(t,n):new R(null,2,5,S,[t,n],null)))},by=function(n,t,i,s){t=Kg.K(i,t,s,s),t=M(t),i=J.h(t,hI),s=J.h(t,mv);var o=J.h(q(Vx),s);if(l(o))Yx(s,i);else{o=document.head;var f=document.createElement("style");f.setAttribute("spade-id",m.g(s));var d=new h(null,3,[eI,f,dI,i,Xx,s],null);o.appendChild(f),dk.K(Vx,gj,s,d),eI.g(d).innerHTML=i}switch(n=n instanceof K?n.U:null,n){case"attrs":return new h(null,1,[T,$x(t)],null);case"class":case"keyframes":return $x(t);case"global":return i;default:throw Error(["No matching clause: ",m.g(n)].join(""))}},cy=function(n){return n=n.name,Ve(n)?qj(ek("SPD")):Mk(Mk(Mk(n,"_factory$",""),/[_$]/,"-"),/^-/,"_")},mI=function(n){return new h(null,2,[mv,n,hI,Ux(new R(null,1,5,S,[new R(null,2,5,S,[iI,new h(null,3,[GD,jI,kI,new R(null,4,5,S,[new R(null,2,5,S,[kx(100),kx(100)],null),new R(null,2,5,S,[kx(100),kx(100)],null),new R(null,2,5,S,[kx(20),kx(20)],null),new R(null,2,5,S,[kx(20),kx(20)],null)],null),lI,new R(null,4,5,S,[new R(null,2,5,S,[kx(-2),kx(-2)],null),new R(null,2,5,S,[kx(-2),kx(-2)],null),new R(null,2,5,S,[kx(-1),kx(-1)],null),new R(null,2,5,S,[kx(-1),kx(-1)],null)],null)],null)],null)],null))],null)},qI=function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,5,[GD,nI,tD,"center",oI,"800",QG,"center",zD,pI],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)},rI=function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),og],null);return new h(null,2,[hI,Ux(t),mv,n],null)},sI=function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,8,[GD,"white",gD,"100%",HD,"24",oI,"400",kC,"none",yD,"0px",nD,"10px 10px",rC,"5px 0px"],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)},ny=function(n){switch(n){case 0:return"No Error";case 1:return"Access denied to content document";case 2:return"File not found";case 3:return"Firefox silently errored";case 4:return"Application custom error";case 5:return"An exception occurred";case 6:return"Http response at 400 or 500 level";case 7:return"Request was aborted";case 8:return"Request timed out";case 9:return"The resource is not available offline";default:return"Unrecognized error code"}},oy=function(n,t,i){if(n!=null&&n.Oe!=null)n=n.Oe(n,t,i);else{var s=oy[aa(n??null)];if(s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else if(s=oy._,s!=null)n=s.l?s.l(n,t,i):s.call(null,n,t,i);else throw kc("AjaxImpl.-js-ajax-request",n)}return n},py=function(n){if(n!=null&&n.Re!=null)n=n.Re(n);else{var t=py[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=py._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("AjaxResponse.-status",n)}return n},qy=function(n){if(n!=null&&n.Se!=null)n=n.Se(n);else{var t=qy[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=qy._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("AjaxResponse.-status-text",n)}return n},ry=function(n){if(n!=null&&n.Pe!=null)n=n.Pe(n);else{var t=ry[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=ry._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("AjaxResponse.-body",n)}return n},sy=function(n){if(n!=null&&n.Qe!=null)n=n.Qe(n,"Content-Type");else{var t=sy[aa(n??null)];if(t!=null)n=t.h?t.h(n,"Content-Type"):t.call(null,n,"Content-Type");else if(t=sy._,t!=null)n=t.h?t.h(n,"Content-Type"):t.call(null,n,"Content-Type");else throw kc("AjaxResponse.-get-response-header",n)}return n},ty=function(n){if(n!=null&&n.Te!=null)n=n.Te(n);else{var t=ty[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=ty._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("AjaxResponse.-was-aborted",n)}return n},uy=function(n,t){if(n!=null&&n.ld!=null)n=n.ld(n,t);else{var i=uy[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=uy._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("Interceptor.-process-request",n)}return n},vy=function(n,t){if(n!=null&&n.md!=null)n=n.md(n,t);else{var i=vy[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=vy._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("Interceptor.-process-response",n)}return n},wy=function(n){throw Error(m.g(n))},xy=function(n){return n=sy(n),l(n)?n:""},yy=function(n){return Xf(n)?Nk("/",XH.h(Wf,qj)(n)):n instanceof K?qj(n):n},Ay=function(n){var t=I(n,0,null);return n=I(n,1,null),[m.g(yy(t)),"=",m.g(zy.g?zy.g(n):zy.call(null,n))].join("")},By=function(n,t,i){return new R(null,2,5,S,[n.g?n.g(t):n.call(null,t),i],null)},Dy=function(n){var t=function(){var i=l(n)?n:tI;switch(i=i instanceof K?i.U:null,i){case"java":return function(){return null};case"rails":return function(){return""};case"indexed":return Df;default:throw Error(["No matching clause: ",m.g(i)].join(""))}}();return Pk.h(By,t)},Ey=function(n){return Nk(", ",typeof n=="string"?new R(null,1,5,S,[n],null):n)},Fy=function(n,t,i,s,o,f){this.read=n,this.description=t,this.Kb=i,this.T=s,this.I=o,this.C=f,this.A=2230716170,this.N=139264},Jy=function(n){var t=wl.j(n,uI,F([vI,wI]));return t=bf(n)?Ng.h(og,t):t,new Fy(uI.g(n),vI.g(n),wI.g(n),null,pg(t),null)},Ky=function(n,t,i){this.T=n,this.I=t,this.C=i,this.A=2230716170,this.N=139264},Qy=function(n,t){var i=M(n);n=J.h(i,xI);var s=J.h(i,Nq),o=J.h(i,yI);return i=J.h(i,zI),o=E.h(o,"GET")&&i==null?s:i,l(o)&&(s=m.g(t),t=l(Cj(/\?/,t))?"&":"?",n=Nk("&",O.h(Ay,Py(Dy(n),null,new R(null,2,5,S,[null,o],null)))),t=[s,t,n].join("")),t},Ry=function(n,t,i){this.T=n,this.I=t,this.C=i,this.A=2230716170,this.N=139264},Sy=function(n,t,i){this.T=n,this.I=t,this.C=i,this.A=2230716170,this.N=139264},Vy=function(n){var t=Ty;n=M(n);var i=J.h(n,AI);return i instanceof Fy?i:cf(i)?t.g?t.g(n):t.call(null,n):Ze(i)?Jy(i):i instanceof K?wy(new R(null,2,5,S,["keywords are not allowed as response formats in ajax calls: ",i],null)):hf(i)?Jy(new h(null,3,[uI,i,vI,"custom",wI,"*/*"],null)):wy(new R(null,2,5,S,["unrecognized response format: ",i],null))},Xy=function(n,t){return n=cf(t)?z(t):wI.g(Wy(n,t)),n==null?new R(null,1,5,S,["*/*"],null):typeof n=="string"?new R(null,1,5,S,[n],null):n},Yy=function(n,t,i){return t=Xy(t,i),Jg(function(s){return E.h(s,"*/*")||0<=n.indexOf(s)},t)},Zy=function(n,t){var i=M(t);t=J.h(i,AI);var s=xy(n);return Wy(i,z(jh.h(function(o){return Yy(s,i,o)},t)))},$y=function(n){return function(t){var i=Zy(t,n);return i=uI.g(i),i.g?i.g(t):i.call(null,t)}},az=function(n){var t=M(n);return n=J.h(t,AI),gh(function(i){return Xy(t,i)},F([cf(n)?n:new R(null,1,5,S,[n],null)]))},Ty=function(n){var t=az(n);return Jy(new h(null,3,[uI,$y(n),BI,["(from ",m.g(t),")"].join(""),wI,t],null))},cz=function(){xu.call(this),this.Ic=new Du(this),this.Bg=this,this.pg=null},dz=function(n,t,i,s){if(t=n.Ic.Nb[String(t)],!t)return!0;t=t.concat();for(var o=!0,f=0;f<t.length;++f){var d=t[f];if(d&&!d.Od&&d.capture==i){var p=d.listener,v=d.sb||d.src;d.$d&&Fu(n.Ic,d),o=p.call(v,s)!==!1&&o}}return o&&!s.defaultPrevented},ez=function(n,t,i){if(typeof n=="function")i&&(n=la(n,i));else if(n&&typeof n.handleEvent=="function")n=la(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:$a.setTimeout(n,t||0)},fz=function(){},hz=function(n){var t;return(t=n.Tf)||(t={},gz(n)&&(t[0]=!0,t[1]=!0),t=n.Tf=t),t},iz=function(){},jz=function(n){return(n=gz(n))?new ActiveXObject(n):new XMLHttpRequest},gz=function(n){if(!n.fg&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){const t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(let i=0;i<t.length;i++){const s=t[i];try{return new ActiveXObject(s),n.fg=s}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return n.fg},lz=function(n){cz.call(this),this.headers=new Map,this.Le=n||null,this.Wc=!1,this.Ke=this.ca=null,this.hg=this.te="",this.ed=0,this.Pc="",this.Gd=this.sf=this.qe=this.pf=!1,this.Qd=0,this.Ee=null,this.Ce=kz,this.Hf=this.rg=this.Kf=!1,this.Gf=null},nz=function(n){return mz&&typeof n.timeout=="number"&&n.ontimeout!==void 0},qz=function(n,t){n.Wc=!1,n.ca&&(n.Gd=!0,n.ca.abort(),n.Gd=!1),n.Pc=t,n.ed=5,oz(n),pz(n)},oz=function(n){n.pf||(n.pf=!0,n.dispatchEvent("complete"),n.dispatchEvent("error"))},uz=function(n){if(n.Wc&&typeof rz<"u"){if(n.Ke[1]&&sz(n)==4&&n.getStatus()==2)n.getStatus();else if(n.qe&&sz(n)==4)ez(n.mg,0,n);else if(n.dispatchEvent("readystatechange"),sz(n)==4){n.getStatus(),n.Wc=!1;try{const f=n.getStatus();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var i;if(!(i=t)){var s;if(s=f===0){var o=String(n.te).match(Eb)[1]||null;!o&&$a.self&&$a.self.location&&(o=$a.self.location.protocol.slice(0,-1)),s=!tz.test(o?o.toLowerCase():"")}i=s}i?(n.dispatchEvent("complete"),n.dispatchEvent("success")):(n.ed=6,n.Pc=n.getStatusText()+" ["+n.getStatus()+"]",oz(n))}finally{pz(n)}}}},Qz=function(n,t){return{type:t,lengthComputable:n.lengthComputable,loaded:n.loaded,total:n.total}},pz=function(n){if(n.ca){Rz(n);const t=n.ca,i=n.Ke[0]?()=>{}:null;n.ca=null,n.Ke=null,n.dispatchEvent("ready");try{t.onreadystatechange=i}catch{}}},Rz=function(n){n.ca&&n.Hf&&(n.ca.ontimeout=null),n.Ee&&($a.clearTimeout(n.Ee),n.Ee=null)},sz=function(n){return n.ca?n.ca.readyState:0},Sz=function(n){return n instanceof K?qj(n).toUpperCase():n},Tz=function(n,t){return vy(t,n)},Uz=function(n,t){return function(i){return i=nc(Tz,i,t),n.g?n.g(i):n.call(null,i)}},Yz=function(n){var t=Vy(n);return ov.l(ov.l(n,yI,Sz),CI,function(i){return fh.j(new R(null,1,5,S,[t],null),l(i)?i:q(Wz),F([Xz]))})},Zz=function(n,t){return uy(t,n)},bA=function(n){n=M(n);var t=J.h(n,CI);n=nc(Zz,n,t),t=Rf(t);var i=M(n);return i=J.h(i,DI),t=l(i)?Uz(i,t):wy("No ajax handler provided."),i=EI.g(n),i=l(i)?i:new lz,oy(i,n,t)},hA=function(n,t,i,s){var o=I(s,0,null);return s=I(s,1,null),l(o)?n.g?n.g(s):n.call(null,s):(n=Al.j(F([new h(null,5,[FI,String(i.te),GI,i.hg,HI,typeof i.Pc=="string"?i.Pc:String(i.Pc),II,i.getLastErrorCode(),JI,ny(i.getLastErrorCode())],null),s])),t.g?t.g(n):t.call(null,n))},nA=function(n){n=M(n);var t=J.l(n,KI,new R(null,1,5,S,[LI],null)),i=J.l(n,MI,new R(null,1,5,S,[NI],null)),s=new lz;return wl.j(gj.j(n,EI,s,F([DI,Pk.K(hA,function(o){return Yv(Qf.h(t,o))},function(o){return Yv(Qf.h(i,o))},s)])),KI,F([MI,OI]))},oA=function(n,t){n=OI.g(n),l(n)&&Yv(Qf.h(n,t))},pA=function(){return Math.round(15*Math.random()).toString(16)},qA=function(n,t){return 3<n.length?t?!0:(t=n.charAt(1),n.charAt(0)==="~"?t===":"||t==="$"||t==="#":!1):!1},rA=function(n){var t=Math.floor(n/44);return n=String.fromCharCode(n%44+48),t===0?"^"+n:"^"+String.fromCharCode(t+48)+n},sA=function(){this.Cg=this.Ed=this.Aa=0,this.cache={}},tA=function(){this.Aa=0,this.cache=[]},vA=function(n,t){if(n==null)return t==null;if(n===t)return!0;if(typeof n=="object"){if(uA(n)){if(uA(t)&&n.length===t.length){for(var i=0;i<n.length;i++)if(!vA(n[i],t[i]))return!1;return!0}return!1}if(n.Ab)return n.Ab(t);if(t!=null&&typeof t=="object"){if(t.Ab)return t.Ab(n);i=0;var s=wA(t).length,o;for(o in n)if(n.hasOwnProperty(o)&&(i++,!t.hasOwnProperty(o)||!vA(n[o],t[o])))return!1;return i===s}}return!1},xA=function(n,t){return n^t+2654435769+(n<<6)+(n>>2)},zA=function(n){var t=0;if(n.forEach!=null)n.forEach(function(d,p){t=(t+(yA(p)^yA(d)))%4503599627370496});else for(var i=wA(n),s=0;s<i.length;s++){var o=i[s],f=n[o];t=(t+(yA(o)^yA(f)))%4503599627370496}return t},AA=function(n){var t=0;if(uA(n))for(var i=0;i<n.length;i++)t=xA(t,yA(n[i]));else n.forEach&&n.forEach(function(s){t=xA(t,yA(s))});return t},yA=function(n){if(n==null)return 0;switch(typeof n){case"number":return n;case"boolean":return n===!0?1:0;case"string":var t=BA[n];if(t!=null)n=t;else{for(var i=t=0;i<n.length;++i)t=31*t+n.charCodeAt(i),t%=4294967296;CA++,256<=CA&&(BA={},CA=1),n=BA[n]=t}return n;case"function":return t=n.transit$hashCode$,t||(t=DA,typeof Object.defineProperty<"u"?Object.defineProperty(n,"transit$hashCode$",{value:t,enumerable:!1}):n.transit$hashCode$=t,DA++),t;default:return n instanceof Date?n.valueOf():uA(n)?AA(n):n.Jb?n.Jb():zA(n)}},EA=function(n,t){this.tag=n,this.rep=t,this.ra=-1},FA=function(n,t){return new EA(n,t)},GA=function(n){this.Ia=n,this.ra=-1},HA=function(n){this.Ia=n,this.ra=-1},IA=function(n,t,i){var s="";i=i||t+1;for(var o=8*(7-t),f=new ua(255,0).shiftLeft(o);t<i;t++,o-=8,f=Oa(f,8)){var d=Oa(n.and(f),o).toString(16);d.length==1&&(d="0"+d),s+=d}return s},JA=function(n,t){this.high=n,this.low=t,this.ra=-1},KA=function(n,t){this.entries=n,this.type=t||0,this.Aa=0},LA=function(n,t){this.map=n,this.type=t||0,this.keys=this.map.Lc(),this.Aa=0,this.Fc=null,this.xc=0},OA=function(n,t){if(n instanceof MA&&(t instanceof NA||t instanceof MA)){if(n.size!==t.size)return!1;for(var i in n.map)for(var s=n.map[i],o=0;o<s.length;o+=2)if(!vA(s[o+1],t.get(s[o])))return!1;return!0}if(n instanceof NA&&(t instanceof NA||t instanceof MA)){if(n.size!==t.size)return!1;for(n=n.sa,o=0;o<n.length;o+=2)if(!vA(n[o+1],t.get(n[o])))return!1;return!0}if(t!=null&&typeof t=="object"&&(o=wA(t),i=o.length,n.size===i)){for(s=0;s<i;s++){var f=o[s];if(!n.has(f)||!vA(t[f],n.get(f)))return!1}return!0}return!1},PA=function(n){return n==null?"null":aa(n)==="array"?"["+n.toString()+"]":aa(n)==="string"?'"'+n+'"':n.toString()},QA=function(n){var t=0,i="TransitMap {";return n.forEach(function(s,o){i+=PA(o)+" => "+PA(s),t<n.size-1&&(i+=", "),t++}),i+"}"},RA=function(n){var t=0,i="TransitSet {";return n.forEach(function(s){i+=PA(s),t<n.size-1&&(i+=", "),t++}),i+"}"},NA=function(n){this.sa=n,this.pa=null,this.ra=-1,this.size=n.length/2,this.Lf=0},TA=function(n){if(n.pa)throw Error("Invalid operation, already converted");return 8>n.size?!1:(n.Lf++,32<n.Lf?(n.pa=SA(n.sa,!1,!0),n.sa=[],!0):!1)},MA=function(n,t,i){this.map=t||{},this.Vc=n||[],this.size=i||0,this.ra=-1},SA=function(n,t,i){if(n=n||[],t=t===!1?t:!0,(i!==!0||!i)&&64>=n.length){if(t){var s=n;for(n=[],t=0;t<s.length;t+=2){var o=!1;for(i=0;i<n.length;i+=2)if(vA(n[i],s[t])){n[i+1]=s[t+1],o=!0;break}o||(n.push(s[t]),n.push(s[t+1]))}}return new NA(n)}s={},o=[];var f=0;for(t=0;t<n.length;t+=2){i=yA(n[t]);var d=s[i];if(d==null)o.push(i),s[i]=[n[t],n[t+1]],f++;else{var p=!0;for(i=0;i<d.length;i+=2)if(vA(d[i],n[t])){d[i+1]=n[t+1],p=!1;break}p&&(d.push(n[t]),d.push(n[t+1]),f++)}}return new MA(o,s,f)},UA=function(n){this.map=n,this.size=n.size},VA=function(n){n=n||[];for(var t={},i=[],s=0,o=0;o<n.length;o++){var f=yA(n[o]),d=t[f];if(d==null)i.push(f),t[f]=[n[o],n[o]],s++;else{f=!0;for(var p=0;p<d.length;p+=2)if(vA(d[p],n[o])){f=!1;break}f&&(d.push(n[o]),d.push(n[o]),s++)}}return new UA(new MA(i,t,s))},WA=function(n){this.Za=n},XA=function(n){this.options=n||{},this.Ma={};for(var t in this.zd.Ma)this.Ma[t]=this.zd.Ma[t];for(t in this.options.handlers){e:{switch(t){case"_":case"s":case"?":case"i":case"d":case"b":case"'":case"array":case"map":n=!0;break e}n=!1}if(n)throw Error('Cannot override handler for ground type "'+t+'"');this.Ma[t]=this.options.handlers[t]}this.ye=this.options.preferStrings!=null?this.options.preferStrings:this.zd.ye,this.yf=this.options.preferBuffers!=null?this.options.preferBuffers:this.zd.yf,this.lf=this.options.defaultHandler||this.zd.lf,this.Eb=this.options.mapBuilder,this.Xc=this.options.arrayBuilder},YA=function(n,t,i,s,o){if(o){var f=[];for(o=0;o<t.length;o++)f.push(n.decode(t[o],i,s,!1));return f}if(f=i&&i.Aa,t.length===2&&typeof t[0]=="string"&&(o=n.decode(t[0],i,!1,!1))&&o instanceof WA)return t=t[1],f=n.Ma[o.Za],f!=null?f=f(n.decode(t,i,s,!0),n):FA(o.Za,n.decode(t,i,s,!1));if(i&&f!=i.Aa&&(i.Aa=f),n.Xc){if(32>=t.length&&n.Xc.fromArray){for(f=[],o=0;o<t.length;o++)f.push(n.decode(t[o],i,s,!1));return n.Xc.fromArray(f,t)}for(f=n.Xc.init(t),o=0;o<t.length;o++)f=n.Xc.add(f,n.decode(t[o],i,s,!1),t);return n.Xc.finalize(f,t)}for(f=[],o=0;o<t.length;o++)f.push(n.decode(t[o],i,s,!1));return f},ZA=function(n,t){if(t.charAt(0)==="~"){var i=t.charAt(1);if(i==="~"||i==="^"||i==="`")return t.substring(1);if(i==="#")return new WA(t.substring(2));var s=n.Ma[i];return s==null?n.lf(i,t.substring(2)):s(t.substring(2),n)}return t},$A=function(n){this.Yg=new XA(n)},aB=function(n,t){this.yh=n,this.options=t||{},this.cache=this.options.cache?this.options.cache:new tA},dB=function(n){if(n==null)return"null";if(n===String)return"string";if(n===Boolean)return"boolean";if(n===Number)return"number";if(n===Array)return"array";if(n===Object)return"map";var t=n[bB];return t==null&&(typeof Object.defineProperty<"u"?(t=++cB,Object.defineProperty(n,bB,{value:t,enumerable:!1})):n[bB]=t=++cB),t},eB=function(n,t){n=n.toString();for(var i=n.length;i<t;i++)n="0"+n;return n},fB=function(){},gB=function(){},hB=function(){},iB=function(){},jB=function(){},kB=function(){},lB=function(){},mB=function(){},nB=function(){},oB=function(){},pB=function(){},qB=function(){},rB=function(){},sB=function(){},tB=function(){},uB=function(){},vB=function(){},wB=function(){},xB=function(){this.Ma={},this.set(null,new fB),this.set(String,new gB),this.set(Number,new hB),this.set(ua,new iB),this.set(Boolean,new jB),this.set(Array,new kB),this.set(Object,new lB),this.set(Date,new nB),this.set(JA,new oB),this.set(GA,new pB),this.set(HA,new qB),this.set(EA,new rB),this.set(UA,new sB),this.set(NA,new tB),this.set(MA,new uB),typeof $a.Me<"u"&&this.set($a.Me,new vB),typeof Uint8Array<"u"&&this.set(Uint8Array,new wB)},yB=function(n){if(this.Rb=n||{},this.ye=this.Rb.preferStrings!=null?this.Rb.preferStrings:!0,this.kg=this.Rb.objectBuilder||null,this.transform=this.Rb.transform||null,this.Ma=new xB,n=this.Rb.handlers){if(uA(n)||!n.forEach)throw Error('transit writer "handlers" option must be a map');var t=this;n.forEach(function(i,s){if(s!==void 0)t.Ma.set(s,i);else throw Error("Cannot create handler for JavaScript undefined")})}this.Fd=this.Rb.handlerForForeign,this.He=this.Rb.unpack||function(i){return i instanceof NA&&i.pa===null?i.sa:!1},this.Sd=this.Rb&&this.Rb.verbose||!1},zB=function(n,t,i,s,o){return n=n+t+i,o?o.write(n,s):n},BB=function(n,t,i){var s=[];if(uA(t))for(var o=0;o<t.length;o++)s.push(AB(n,t[o],!1,i));else t.forEach(function(f){s.push(AB(n,f,!1,i))});return s},CB=function(n,t){return typeof t!="string"?(n=n.sb(t))&&n.tag(t).length===1:!0},DB=function(n,t){var i=n.He(t),s=!0;if(i){for(t=0;t<i.length&&(s=CB(n,i[t]),s);t+=2);return s}if(t.keys){i=t.keys();var o=null;if(i.next){for(o=i.next();!o.done&&(s=CB(n,o.value),!!s);)o=i.next();return s}}if(t.forEach)return t.forEach(function(f,d){s=s&&CB(n,d)}),s;throw Error("Cannot walk keys of object type "+(t==null?null:t.constructor).name)},EB=function(n){if(n.constructor.transit$isObject)return!0;var t=n.constructor.toString();return t=t.substr(9),t=t.substr(0,t.indexOf("(")),t=t=="Object",typeof Object.defineProperty<"u"?Object.defineProperty(n.constructor,"transit$isObject",{value:t,enumerable:!1}):n.constructor.transit$isObject=t,t},FB=function(n,t,i){var s=null,o=null,f=null;s=null;var d=0;if(t.constructor===Object||t.forEach!=null||n.Fd&&EB(t)){if(n.Sd){if(t.forEach!=null)if(DB(n,t)){var p={};t.forEach(function(v,_){p[AB(n,_,!0,!1)]=AB(n,v,!1,i)})}else{if(s=n.He(t),o=[],f=zB("~#","cmap","",!0,i),s)for(;d<s.length;d+=2)o.push(AB(n,s[d],!1,!1)),o.push(AB(n,s[d+1],!1,i));else t.forEach(function(v,_){o.push(AB(n,_,!1,!1)),o.push(AB(n,v,!1,i))});p={},p[f]=o}else for(s=wA(t),p={};d<s.length;d++)p[AB(n,s[d],!0,!1)]=AB(n,t[s[d]],!1,i);return p}if(t.forEach!=null){if(DB(n,t)){if(s=n.He(t),p=["^ "],s)for(;d<s.length;d+=2)p.push(AB(n,s[d],!0,i)),p.push(AB(n,s[d+1],!1,i));else t.forEach(function(v,_){p.push(AB(n,_,!0,i)),p.push(AB(n,v,!1,i))});return p}if(s=n.He(t),o=[],f=zB("~#","cmap","",!0,i),s)for(;d<s.length;d+=2)o.push(AB(n,s[d],!1,i)),o.push(AB(n,s[d+1],!1,i));else t.forEach(function(v,_){o.push(AB(n,_,!1,i)),o.push(AB(n,v,!1,i))});return[f,o]}for(p=["^ "],s=wA(t);d<s.length;d++)p.push(AB(n,s[d],!0,i)),p.push(AB(n,t[s[d]],!1,i));return p}if(n.kg!=null)return n.kg(t,function(v){return AB(n,v,!0,i)},function(v){return AB(n,v,!1,i)});throw d=(t==null?null:t.constructor).name,s=Error("Cannot write "+d),s.data={uf:t,type:d},s},AB=function(n,t,i,s){n.transform!==null&&(t=n.transform(t));var o=n.sb(t)||(n.Fd?n.Fd(t,n.Ma):null),f=o?o.tag(t):null,d=o?o.rep(t):null;if(o!=null&&f!=null)switch(f){case"_":return i?zB("~","_","",i,s):null;case"s":return 0<d.length?(n=d.charAt(0),n=n==="~"||n==="^"||n==="`"?"~"+d:d):n=d,zB("","",n,i,s);case"?":return i?zB("~","?",d.toString()[0],i,s):d;case"i":return d===1/0?zB("~","z","INF",i,s):d===-1/0?zB("~","z","-INF",i,s):isNaN(d)?zB("~","z","NaN",i,s):i||typeof d=="string"||d instanceof ua?zB("~","i",d.toString(),i,s):d;case"d":return i?zB(d.Bh,"d",d,i,s):d;case"b":return zB("~","b",d,i,s);case"'":return n.Sd?(i={},t=zB("~#","'","",!0,s),i[t]=AB(n,d,!1,s),s=i):s=[zB("~#","'","",!0,s),AB(n,d,!1,s)],s;case"array":return BB(n,d,s);case"map":return FB(n,d,s);default:e:{if(f.length===1){if(typeof d=="string"){s=zB("~",f,d,i,s);break e}if(i||n.ye){if((n=n.Sd&&o.getVerboseHandler())?(f=n.tag(t),d=n.stringRep(t,n)):d=o.stringRep(t,o),d!==null){s=zB("~",f,d,i,s);break e}throw s=Error('Tag "'+f+'" cannot be encoded as string'),s.data={tag:f,rep:d,uf:t},s}}i=f,t=d,n.Sd?(o={},o[zB("~#",i,"",!0,s)]=AB(n,t,!1,s),s=o):s=[zB("~#",i,"",!0,s),AB(n,t,!1,s)]}return s}else throw s=(t==null?null:t.constructor).name,n=Error("Cannot write "+s),n.data={uf:t,type:s},n},GB=function(n,t){this.jd=n,this.options=t||{},this.cache=this.options.cache===!1?null:this.options.cache?this.options.cache:new sA},HB=function(n,t){if(n==="json"||n==="json-verbose"||n==null)return n=new $A(t),new aB(n,t);throw Error("Cannot create reader of type "+n)},IB=function(n,t){if(n==="json"||n==="json-verbose"||n==null)return n==="json-verbose"&&(t==null&&(t={}),t.verbose=!0),n=new yB(t),new GB(n,t);throw t=Error('Type must be "json"'),t.data={type:n},t},JB=function(n,t){for(var i=w(Wa(t)),s=null,o=0,f=0;;)if(f<o){var d=s.S(null,f);n[d]=Xa(t,d),f+=1}else if(i=w(i))s=i,df(s)?(i=Fd(s),f=Gd(s),s=i,o=D(i),i=f):(i=z(s),n[i]=Xa(t,i),i=C(s),s=null,o=0),f=0;else break;return n},KB=function(){},LB=function(){},WB=function(n){return HB(qj(PI),JB({handlers:Mm(Al.j(F([new h(null,6,["$",function(t){return Xj.g(t)},":",function(t){return Nj.g(t)},"set",function(t){return Ng.h(kj,t)},"list",function(t){return Ng.h(ge,t.reverse())},"cmap",function(t){for(var i=0,s=wd(og);;)if(i<t.length){var o=i+2;s=zd(s,t[i],t[i+1]),i=o}else return yd(s)},"with-meta",function(t){return Se(t[0],t[1])}],null),wl.h(QI.g(n),sm)]))),defaultHandler:sm.g(QI.g(n)),mapBuilder:new KB,arrayBuilder:new LB,preferStrings:!1,preferBuffers:!1},Mm(xl(wl.h(n,QI),new h(null,4,[RI,SI,TI,UI,VI,WI,XI,YI],null)))))},XB=function(){},YB=function(){},ZB=function(){},$B=function(){},aC=function(){},bC=function(){},cC=function(){},dC=function(n,t){this.value=n,this.D=t},eC=function(){},hC=function(n,t){var i=new ZB,s=new $B,o=new aC,f=new bC,d=Al.j(F([Ni([Mi,Sf,h,Ci,Vh,u,K,Ui,Of,Yf,Lh,Th,Hi,cj,dC,di,R,Mf,Je,jj,Zi,aj,Hh,nj,cg,r,Fk,wj,Ri,Ti],[s,i,s,i,i,i,new XB,f,i,i,f,i,i,i,new eC,i,f,i,i,o,s,i,i,o,i,new YB,new cC,i,i,f]),typeof fC<"u"&&typeof gC<"u"&&typeof fk<"u"?ng([fk,i]):null,typeof fC<"u"&&typeof gC<"u"&&typeof $g<"u"?ng([$g,i]):null,typeof fC<"u"&&typeof gC<"u"&&typeof ci<"u"?ng([ci,f]):null,QI.g(t)]));return IB(qj(n),JB({objectBuilder:function(p,v,_){return Cf(function(k,P,L){return k.push(v.g?v.g(P):v.call(null,P),_.g?_.g(L):_.call(null,L)),k},["^ "],p)},handlers:function(){var p=vc(d);return p.forEach=function(v){for(var _=w(this),k=null,P=0,L=0;;)if(L<P){var G=k.S(null,L),Z=I(G,0,null);G=I(G,1,null),E.h(sm,Z)?v.h?v.h(G,"default"):v.call(null,G,"default"):v.h?v.h(G,Z):v.call(null,G,Z),L+=1}else if(_=w(_))df(_)?(k=Fd(_),_=Gd(_),Z=k,P=D(k),k=Z):(k=z(_),Z=I(k,0,null),G=I(k,1,null),E.h(sm,Z)?v.h?v.h(G,"default"):v.call(null,G,"default"):v.h?v.h(G,Z):v.call(null,G,Z),_=C(_),k=null,P=0),L=0;else return null},p}(),unpack:function(p){return p instanceof h?p.o:!1}},Mm(wl.h(t,QI))))},jC=function(n){return n=M(n),n=J.h(n,pF),l(n)?n:PI},lC=function(n,t){var i=function(){var s=ZI.g(t);return l(s)?s:hC(n,t)}();return function(s){return i.write(s)}},oC=function(n){switch(arguments.length){case 0:return mC();case 1:return nC(arguments[0]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}},mC=function(){return nC(og)},nC=function(n){var t=jC(n),i=E.h(t,PI)||E.h(t,$I)?"json":"msgpack";return new h(null,2,[aJ,lC(t,n),wI,["application/transit+",i].join("")],null)},sC=function(n){var t=function(){var i=bJ.g(n);return l(i)?i:WB(n)}();return function(i){return i=ry(i),t.read(i)}},tC=function(n){return n=n==null?null:m.g(n),n==null?null:decodeURIComponent(n)},uC=function(n){return Gk(n)},vC=function(n){if(n!=null&&n.Ue!=null)n=n.Ue(n);else{var t=vC[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=vC._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("ParameterEncoding.encode-parameter",n)}return n},wC=function(n){if(n!=null&&n.Xd!=null)n=n.Xd(n);else{var t=wC[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=wC._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("PatternSegment.segment-regex-group",n)}return n},xC=function(n){if(n!=null&&n.Wd!=null)n=n.Wd(n);else{var t=xC[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=xC._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("PatternSegment.param-key",n)}return n},yC=function(n){if(n!=null&&n.Yd!=null)n=n.Yd(n);else{var t=yC[aa(n??null)];if(t!=null)n=t.g?t.g(n):t.call(null,n);else if(t=yC._,t!=null)n=t.g?t.g(n):t.call(null,n);else throw kc("PatternSegment.transform-param",n)}return n},zC=function(n,t){if(n!=null&&n.Ve!=null)n=n.Ve(n,t);else{var i=zC[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=zC._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("PatternSegment.unmatch-segment",n)}return n},AC=function(n,t){if(n!=null&&n.Rf!=null)n=n.Rf(n,t);else{var i=AC[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=AC._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("PatternSegment.matches?",n)}return n},BC=function(n,t){if(n!=null&&n.vc!=null)n=n.vc(n,t);else{var i=BC[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=BC._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("Pattern.match-pattern",n)}return n},CC=function(n,t){if(n!=null&&n.wc!=null)n=n.wc(n,t);else{var i=CC[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=CC._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("Pattern.unmatch-pattern",n)}return n},DC=function(n,t){if(n!=null&&n.tc!=null)n=n.tc(n,t);else{var i=DC[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=DC._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("Matched.resolve-handler",n)}return n},EC=function(n,t){if(n!=null&&n.uc!=null)n=n.uc(n,t);else{var i=EC[aa(n??null)];if(i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else if(i=EC._,i!=null)n=i.h?i.h(n,t):i.call(null,n,t);else throw kc("Matched.unresolve-handler",n)}return n},FC=function(n){return n=["http://bidi.bidi/",m.g(n)].join(""),new zb(n).getPath().substring(1)},HC=function(n,t){var i=I(n,0,null);return n=I(n,1,null),t=ov.l(t,cJ,FC),i=BC(i,t),l(i)?DC(n,i):null},IC=function(n,t){return n=Le(Bj(Dj([m.g(n),"(.*)"].join("")),cJ.g(t))),l(n)?gj.l(t,cJ,n):null},JC=function(n,t){return E.h(cJ.g(t),"")?Al.j(F([wl.h(t,cJ),new h(null,1,[DI,n],null)])):null},KC=function(n,t){var i=EC(Ke(n),t);return l(i)?[m.g(CC(z(n),t)),m.g(i)].join(""):null},MC=function(n){for(var t=[],i=arguments.length,s=0;s<i;)t.push(arguments[s]),s+=1;return i=arguments[0],s=arguments[1],t=M(2<t.length?new u(t.slice(2),0,null):null),wl.h(HC(i,gj.j(t,cJ,s,F([dJ,i]))),dJ)},NC=function(n){yu.call(this,"navigate"),this.xh=n},OC=function(n,t){n=[n];for(let i=t.length-1;0<=i;--i)n.push(typeof t[i],t[i]);return n.join("\v")},PC=function(n,t){cz.call(this),this.sc=n||window,this.Fe=t||null,this.gg=null,Iu(this.sc,"popstate",this.vf,!1,this),Iu(this.sc,"hashchange",this.vf,!1,this)},RC=function(n){return n.Rd?QC(n):n.Fe?n.Fe.yg(n.sc.location):n.sc.location.pathname.slice(n.xe.length)},TC=function(n,t){var i=eJ.history;if(n!=RC(i)){var s=i.sc.history,o=s.pushState;t=t||i.sc.document.title||"";var f=i.Rd?"#"+n:i.Fe?i.Fe.bg(n,i.xe):i.xe+n+i.sc.location.search;o.call(s,null,t,f),i.dispatchEvent(new NC(n))}},QC=function(n){if(n.Rd){n=n.sc.location.href;const t=n.indexOf("#");return 0>t?"":n.substring(t+1)}return null},UC=function(){},VC=function(){var n=new UC;return n.yg=function(t){return[m.g(t.pathname),m.g(t.search),m.g(t.hash)].join("")},n},WC=function(){var n=VC();return n.bg=function(t,i){return[m.g(i),m.g(t)].join("")},n},XC=function(n){return!Ta(tb(n))&&(gc(!!n.pc)&&gc(!!n.$b)||Bj(Dj(["^",m.g(location.origin),".*$"].join("")),m.g(n))!=null)},YC=function(n){var t=n.getPath(),i=n.getQuery();return n=n.Bc,t=w(i)?[m.g(t),"?",m.g(i)].join(""):t,w(n)?[m.g(t),"#",m.g(n)].join(""):t},ZC=function(n,t,i,s,o,f,d,p,v,_){this.Bd=n,this.qh=t,this.bc=i,this.ze=s,this.P=o,this.dh=f,this.history=d,this.Ae=p,this.dc=v,this.kh=_,this.A=393216,this.N=0},$C=function(){for(var n=eJ,t=w(q(n.Bd)),i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o);Uu(f),o+=1}else if(t=w(t))i=t,df(i)?(t=Fd(i),o=Gd(i),i=t,s=D(t),t=o):(t=z(i),Uu(t),t=C(i),i=null,s=0),o=0;else break;N(n.Bd,null)},hJ=function(n){var t=J,i=t.h,s=q(aD);return s=s.g?s.g(fJ):s.call(null,fJ),l(i.call(t,s,n))?null:Yv(new R(null,2,5,S,[gJ,n],null))},iJ=function(n,t){return Ng.h(og,O.h(function(i){var s=I(i,0,null);return i=I(i,1,null),new R(null,2,5,S,[s,We(i)?nc(function(o,f){return f.g?f.g(o):f.call(null,o)},n,i):i.g?i.g(n):i.call(null,n)],null)},t))},jJ=function(){return Kg.h(m,Vg(20,bh(function(){var n=D("abcdefghijklmnopqrstuvwxyz");return Ee("abcdefghijklmnopqrstuvwxyz",Math.floor(Math.random()*n))})))},kJ=function(n,t,i){return scale(Mm(new R(null,2,5,S,[n,t],null))).mode("lch").colors(i)},nJ=function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,4,[zD,"#f0f8ff",lJ,"0 4px 8px rgba(0, 0, 0, 0.2)",SD,"pointer",mJ,"background-color 0.3s ease, box-shadow 0.3s ease"],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)},uJ=function(n){var t=oJ.g(n),i=rF.g(n);return n=function(){var s=pJ.g(i);return l(s)||(s=qJ.g(i),l(s))||(s=rJ.g(i),l(s))?s:(s=sJ.g(i),l(s)?["Binary (",m.g(D(s))," chars)"].join(""):null)}(),new R(null,5,5,S,[Ss,tJ,"10px",dy,new R(null,2,5,S,[new R(null,3,5,S,[AD,mE,[m.g(mE.g(t)),function(){var s=mv.g(t);return l(s)?[" (",m.g(s),")"].join(""):null}()].join("")],null),new R(null,3,5,S,[AD,mE,["Value: ",m.g(n)].join("")],null)],null)],null)},AJ=function(n){return new R(null,5,5,S,[Dt,tJ,"10px",dy,new R(null,6,5,S,[new R(null,3,5,S,[AD,mE,["ID: ",m.g(Q(n,new R(null,3,5,S,[Xx,Xx,vJ],null)))].join("")],null),new R(null,3,5,S,[AD,mE,["Charge: ",m.g(wJ.g(n))].join("")],null),new R(null,5,5,S,[ED,mE,"Properties",xJ,yJ],null),new R(null,5,5,S,[Dt,tJ,"5px",dy,O.h(uJ,jA.g(n))],null),new R(null,5,5,S,[ED,mE,"Count",xJ,yJ],null),new R(null,3,5,S,[AD,mE,zJ.g(n)],null)],null)],null)},EJ=function(){var n=Aw(new R(null,1,5,S,[CJ],null));return new R(null,7,5,S,[Dt,gD,"1550px",iD,"1550px",dy,new R(null,1,5,S,[new R(null,3,5,S,[Ss,dy,new R(null,1,5,S,[new R(null,11,5,S,[LD,U,null,TF,n,iD,"1000px",WG,new R(null,2,5,S,[new h(null,6,[Xx,Xx,DJ,"Ligand ID",NG,function(t){return new R(null,3,5,S,[ME,new h(null,1,[OE,["ligand/",m.g(Xx.g(t))].join("")],null),Xx.g(t)],null)},gD,300,LC,"center",MG,"middle"],null),new h(null,6,[Xx,mv,DJ,"Name",NG,mv,LC,"left",gD,300,MG,"middle"],null)],null),YG,35],null)],null)],null)],null)],null)},LJ=function(){var n=q(Aw(new R(null,1,5,S,[FJ],null)));n=q(Aw(new R(null,2,5,S,[GJ,HJ.g(n)],null)));var t=PI.g(n),i=IJ.g(n);return i=["data:image/png;base64,",m.g(i)].join(""),new R(null,5,5,S,[Dt,tJ,"20px",dy,new R(null,2,5,S,[new R(null,5,5,S,[Ss,LC,fG,dy,new R(null,3,5,S,[new R(null,5,5,S,[ED,mE,mv.g(n),xJ,JJ],null),new R(null,3,5,S,[UD,kD,"1"],null),new R(null,2,5,S,[KJ,new h(null,2,[U,i,X,new h(null,3,[iD,"250px",bD,"250px",kC,"1px solid #ddd"],null)],null)],null)],null)],null),new R(null,2,5,S,[AJ,t],null)],null)],null)},MJ=function(){var n=q(Aw(new R(null,1,5,S,[FJ],null)));return n=q(Aw(new R(null,2,5,S,[GJ,HJ.g(n)],null))),new R(null,7,5,S,[ED,U,null,mE,mv.g(n),xJ,JJ],null)},PJ=function(n){return new R(null,7,5,S,[Dt,LC,fG,T,"btn btn-outline-secondary",dy,new R(null,1,5,S,[new R(null,5,5,S,[fq,mE,NJ.g(n),OE,["https://www.uniprot.org/taxonomy/",m.g(OJ.g(n))].join("")],null)],null)],null)},RJ=function(){return new R(null,4,5,S,[dA,new h(null,1,[X,new h(null,4,[PD,"flex",QJ,"column",tD,"center",rC,"3px 0 0 0"],null)],null),new R(null,2,5,S,[dA,new h(null,1,[X,new h(null,4,[gD,"8px",qC,"8px",zD,"#ccc",yD,"50%"],null)],null)],null),new R(null,2,5,S,[dA,new h(null,1,[X,new h(null,3,[gD,"2px",qC,"10px",zD,"#ccc"],null)],null)],null)],null)},SJ=function(n){return new R(null,3,5,S,[Dt,dy,Ve(n)?new R(null,1,5,S,[new R(null,3,5,S,[AD,mE,"No lineage available"],null)],null):Gh(Rf(eh(new R(null,1,5,S,[RJ],null),O.h(PJ,n))))],null)},PK=function(){var n=Aw(new R(null,1,5,S,[BK],null)),t=Aw(new R(null,1,5,S,[CK],null)),i=Aw(new R(null,1,5,S,[CJ],null));return function(){return new R(null,4,5,S,[DK,new R(null,2,5,S,["Volcanos",new R(null,4,5,S,[EK,n,WG,new R(null,3,5,S,[new h(null,3,[Xx,mv,DJ,"Dataset Name",NG,function(s){return new R(null,5,5,S,[cq,mE,function(){var o=pg(mv.g(Sb.g(s)));return l(o)?o:Xx.g(Sb.g(s))}(),KD,function(){return Yv(new R(null,5,5,S,[FK,GK,WD,HK,Xx.g(Sb.g(s))],null)),Yv(new R(null,2,5,S,[IK,JK],null))}],null)}],null),new h(null,3,[Xx,KK,DJ,"Taxon",NG,function(s){return new R(null,3,5,S,[ME,new h(null,1,[OE,["taxon/",m.g(KK.g(Sb.g(s)))].join("")],null),KK.g(Sb.g(s))],null)}],null),new h(null,3,[Xx,LK,DJ,"Actions",NG,function(s){return new R(null,7,5,S,[KE,wE,"zmdi-delete",JE,!0,KD,function(){return Yv(new R(null,2,5,S,[MK,new R(null,3,5,S,[NK,HK,Xx.g(Sb.g(s))],null)],null))}],null)}],null)],null)],null)],null),new R(null,2,5,S,["Taxons",new R(null,4,5,S,[EK,t,WG,new R(null,3,5,S,[new h(null,3,[Xx,Xx,NG,function(s){return s=Xx.g(Sb.g(s)),new R(null,3,5,S,[ME,new h(null,1,[OE,["taxon/",m.g(s)].join("")],null),s],null)},DJ,"Taxon ID"],null),new h(null,3,[Xx,mv,NG,kn.h(mv,Sb),DJ,"Name"],null),new h(null,3,[Xx,LK,DJ,"Actions",NG,function(s){return new R(null,7,5,S,[KE,wE,"zmdi-delete",JE,!0,KD,function(){return Yv(new R(null,2,5,S,[MK,new R(null,3,5,S,[NK,KK,Xx.g(Sb.g(s))],null)],null))}],null)}],null)],null)],null)],null),new R(null,2,5,S,["Ligands",new R(null,4,5,S,[EK,i,WG,new R(null,3,5,S,[new h(null,3,[Xx,Xx,NG,function(s){return s=vJ.g(Sb.g(s)),new R(null,3,5,S,[ME,new h(null,1,[OE,["ligand/",m.g(s)].join("")],null),s],null)},DJ,"Ligand ID"],null),new h(null,3,[Xx,mv,NG,kn.h(XD,Sb),DJ,"Name"],null),new h(null,3,[Xx,LK,DJ,"Actions",NG,function(s){return new R(null,7,5,S,[KE,wE,"zmdi-delete",JE,!0,KD,function(){return Yv(new R(null,2,5,S,[MK,new R(null,3,5,S,[NK,OK,vJ.g(Sb.g(s))],null)],null))}],null)}],null)],null)],null)],null)],null)}},RK=function(){return new R(null,7,5,S,[Ss,gD,"80%",eD,QK,dy,new R(null,1,5,S,[new R(null,2,5,S,[dA,"Hi"],null)],null)],null)},SK=function(){return new R(null,7,5,S,[ED,U,null,mE,"Protein View",xJ,JJ],null)},UK=function(){var n=Aw(new R(null,1,5,S,[CK],null));return function(){return Ve(q(n))?new R(null,3,5,S,[AE,kD,TK],null):new R(null,7,5,S,[Dt,gD,"1550px",iD,"1550px",dy,new R(null,1,5,S,[new R(null,3,5,S,[Ss,dy,new R(null,1,5,S,[new R(null,11,5,S,[LD,U,null,TF,n,iD,"1000px",WG,new R(null,2,5,S,[new h(null,6,[Xx,Xx,DJ,"Taxon ID",NG,function(t){return new R(null,3,5,S,[ME,new h(null,1,[OE,["taxon/",m.g(Xx.g(t))].join("")],null),Xx.g(t)],null)},gD,300,LC,"center",MG,"middle"],null),new h(null,6,[Xx,NJ,DJ,"Name",NG,NJ,LC,"left",gD,300,MG,"middle"],null)],null),YG,35],null)],null)],null)],null)],null)}},cL=function(){var n=q(Aw(new R(null,1,5,S,[FJ],null)));n=q(Aw(new R(null,2,5,S,[VK,WK.g(n)],null))),n=M(n);var t=J.h(n,XK);n=J.h(n,YK);var i=M(t);t=J.h(i,ZK);var s=J.h(i,$K);return i=J.h(i,aL),new R(null,3,5,S,[Dt,dy,new R(null,5,5,S,[new R(null,5,5,S,[ED,mE,"Proteome Statistics",xJ,yJ],null),new R(null,3,5,S,[AD,mE,["Reviewed Proteins: ",m.g(t)].join("")],null),new R(null,3,5,S,[AD,mE,["Unreviewed Proteins: ",m.g(s)].join("")],null),new R(null,3,5,S,[AD,mE,["Proteome Count: ",m.g(i)].join("")],null),new R(null,3,5,S,[Dt,dy,new R(null,2,5,S,[new R(null,5,5,S,[ED,mE,"Strains",xJ,yJ],null),O.h(function(o){var f=M(o);return o=J.h(f,mv),f=J.h(f,bL),new R(null,5,5,S,[Ss,tJ,"10px",dy,new R(null,2,5,S,[new R(null,3,5,S,[AD,mE,m.g(o)],null),new R(null,3,5,S,[AD,mE,["( ",Nk(", ",f)," )"].join("")],null)],null)],null)},n)],null)],null)],null)],null)},dL=function(n){return new R(null,5,5,S,[Dt,LC,fG,dy,new R(null,3,5,S,[new R(null,2,5,S,[KJ,new h(null,3,[U,"https://phil.cdc.gov//PHIL_Images/10043/10043_lores.jpg",gD,"200px",iD,"200px"],null)],null),new R(null,3,5,S,[UD,kD,"10px"],null),new R(null,3,5,S,[Dt,dy,new R(null,1,5,S,[new R(null,2,5,S,[SJ,n],null)],null)],null)],null)],null)},gL=function(){var n=q(Aw(new R(null,1,5,S,[FJ],null)));return q(Aw(new R(null,2,5,S,[eL,WK.g(n)],null))),n=q(Aw(new R(null,2,5,S,[VK,WK.g(n)],null))),n=M(n),n=J.h(n,fL),new R(null,7,5,S,[Ss,gD,"80%",eD,QK,dy,new R(null,2,5,S,[new R(null,1,5,S,[cL],null),new R(null,2,5,S,[dL,n],null)],null)],null)},iL=function(){var n=q(Aw(new R(null,1,5,S,[FJ],null)));return n=q(Aw(new R(null,2,5,S,[VK,WK.g(n)],null))),new R(null,3,5,S,[hL,mE,NJ.g(n)],null)},jL=function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,3,[HD,"22",oI,"300",nD,"15px 15px"],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)},kL=function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,1,[nD,"0px 10px"],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)},lL=function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,4,[HD,"22",oI,"300",kC,"solid black 1px",nD,"10px 20px"],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)},mL=function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,8,[GD,"white",gD,"100%",HD,"24",oI,"400",kC,"none",yD,"0px",nD,"10px 10px",rC,"5px 0px"],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)},vL=function(n,t){n=M(n);var i=J.h(n,nL),s=J.h(n,oL),o=J.h(n,pL);return function(){return new R(null,11,5,S,[eF,U,null,tE,q(o),QD,sE,uE,t,qL,new R(null,15,5,S,[gF,U,null,gD,"250px",sL,.3,zE,function(){return N(o,!1)},XD,i,tL,!0,iI,new R(null,3,5,S,[lA,new h(null,1,[X,new h(null,1,[GD,"brown"],null)],null),new R(null,2,5,S,[uL,s],null)],null)],null)],null)}},yL=function(n){return new R(null,13,5,S,[Lp,U,null,T,by(T,wL,kL,lh),wE,"zmdi-help-outline",kD,xL,DD,"What is meant by that?",KD,n],null)},zL=function(n){n=M(n);var t=J.h(n,XD),i=J.h(n,bF),s=fn(null);return function(){return new R(null,3,5,S,[vL,new h(null,3,[oL,i,nL,t,pL,s],null),new R(null,2,5,S,[yL,function(){return dk.h(s,gc)}],null)],null)}},DL=function(n){var t=M(n);n=J.h(t,mE);var i=J.h(t,CD),s=J.h(t,TF),o=J.h(t,tF),f=J.h(t,AL);return t=J.h(t,BL),new R(null,5,5,S,[Ss,T,by(T,CL,lL,lh),dy,new R(null,2,5,S,[new R(null,11,5,S,[pt,U,null,mE,n,CD,i,TF,s,tF,o],null),new R(null,2,5,S,[zL,new h(null,2,[XD,f,bF,t],null)],null)],null)],null)},FL=function(n,t){return new R(null,7,5,S,[Ss,U,null,tJ,"4px",dy,new R(null,2,5,S,[new R(null,2,5,S,[EL,n],null),new R(null,5,5,S,[$p,U,null,xE,new R(null,5,5,S,[Dt,U,null,dy,new R(null,1,5,S,[t],null)],null)],null)],null)],null)},HL=function(n){var t=fn(null);return function(){return Tj(F([q(t)])),new R(null,2,5,S,[dA,new R(null,3,5,S,[dA,new h(null,1,[T,"input-group mb-3"],null),new R(null,4,5,S,[dA,new h(null,1,[T,"custom-file"],null),new R(null,2,5,S,[oF,new h(null,4,[pF,"file",Xx,"inputGroupFile01",T,"custom-file-input",tF,function(i){return i=i.target.files,N(t,i),n.g?n.g(i):n.call(null,i)}],null)],null),new R(null,3,5,S,[mE,new h(null,2,[GL,"inputGroupFile01",T,"custom-file-label"],null),l(q(t))?q(t)[0].name:"Choose file"],null)],null)],null)],null)}},JL=function(n){return new R(null,2,5,S,[rF.g(Oo.g(IL.g(n))),rF.g(To.g(IL.g(n)))],null)},LL=function(n,t){return O.l(function(i,s){return gj.l(i,GD,s)},KL.h(vI,n),function(){var i=D(n);return t.g?t.g(i):t.call(null,i)}())},XL=function(n){var t=ML.g(n),i=km(pF,O.h(function(o){var f=pF.g(o),d=new jj(null,new h(null,3,["Transmembrane",null,"Domain",null,"Topological domain",null],null),null);d=d.g?d.g(f):d.call(null,f),f=l(d)?"Domain":f,d=vI.g(o);var p=JL(o),v=I(p,0,null);return p=I(p,1,null),v=E.h(v,p)?v:[m.g(v)," - ",m.g(p)].join(""),new h(null,4,[pF,f,vI,d,NL,v,IL,JL(o)],null)},t));t=LL(J.h(i,"Domain"),OL);var s=LL(J.h(i,"Active site"),PL);return i=LL(J.h(i,"Binding site"),QL),n=w(jh.h(function(o){return E.h("AlphaFoldDB",RL.g(o))},SL.g(n))),new h(null,4,[TL,t,UL,s,VL,i,WL,n],null)},YL=function(n){return new R(null,5,5,S,[Ss,tJ,"5px",dy,new R(null,4,5,S,[new R(null,2,5,S,[dA,new h(null,1,[X,new h(null,3,[gD,"10px",qC,"10px",zD,GD.g(n)],null)],null)],null),new R(null,2,5,S,[lA,"at residue(s)"],null),new R(null,3,5,S,[lA,NL.g(n),":"],null),new R(null,2,5,S,[lA,vI.g(n)],null)],null)],null)},$L=function(n){n=M(n);var t=J.h(n,WL),i=J.h(n,TL),s=J.h(n,UL),o=J.h(n,VL);return new R(null,5,5,S,[Dt,tJ,"5px",dy,fh.j(new R(null,1,5,S,[new R(null,5,5,S,[Ss,tJ,"5px",dy,new R(null,2,5,S,[new R(null,2,5,S,[lA,"AlphaFold structure available"],null),l(t)?new R(null,2,5,S,[$D,new h(null,1,[T,"zmdi zmdi-check"],null)],null):null],null)],null)],null),Ng.h(new R(null,1,5,S,[new R(null,2,5,S,[ZL,"Domains"],null)],null),function(){var f=w(O.h(YL,i));return f||new R(null,1,5,S,[new R(null,2,5,S,[lA,"Not available"],null)],null)}()),F([Ng.h(new R(null,1,5,S,[new R(null,2,5,S,[ZL,"Active Sites"],null)],null),function(){var f=w(O.h(YL,s));return f||new R(null,1,5,S,[new R(null,2,5,S,[lA,"Not available"],null)],null)}()),Ng.h(new R(null,1,5,S,[new R(null,2,5,S,[ZL,"Binding Sites"],null)],null),function(){var f=w(O.h(YL,o));return f||new R(null,1,5,S,[new R(null,2,5,S,[lA,"Not available"],null)],null)}())]))],null)},kM=function(n){return function(t){var i=Dj(["(?i)",m.g(l(t)?t:"")].join(""));return Ng.h(new R(null,1,5,S,[new h(null,3,[Xx,null,aM,"-",bM,null],null)],null),Vg(6,Rg(function(s){var o=function(){var p=rF.g(cM.g(z(dM.g(s))));return l(p)?p:(p=rF.g(eM.g(z(dM.g(s)))),l(p)?p:"-")}(),f=function(){var p=rF.g(fM.g(gM.g(hM.g(s))));return l(p)?p:(p=rF.g(fM.g(z(iM.g(hM.g(s))))),l(p)?p:"-")}(),d=function(){var p=jM.g(s);return l(p)?p:"-"}();return l(function(){var p=Cj(i,o);return l(p)?p:(p=Cj(i,f),l(p)?p:Cj(i,d))}())?new h(null,3,[Xx,d,aM,f,bM,o],null):null},n)))}},mM=function(){return new R(null,5,5,S,[Ss,U,null,dy,new R(null,2,5,S,[new R(null,2,5,S,[EL,"Search Proteins"],null),new R(null,5,5,S,[$p,U,null,xE,new R(null,5,5,S,[Dt,U,null,dy,new R(null,3,5,S,[new R(null,2,5,S,[lM,"Organism ID"],null),new R(null,2,5,S,[uL,"You need to put in a Uniprot or NCBI Taxonomy ID. Note they are the same."],null),new R(null,9,5,S,[fq,U,null,mE,"Link to docs.",OE,"",NE,"_blank"],null)],null)],null)],null)],null)],null)},pM=function(){return new R(null,3,5,S,[Dt,dy,new R(null,2,5,S,[new R(null,3,5,S,[FL,"Required: Name",new R(null,2,5,S,[dA,""],null)],null),new R(null,5,5,S,[nM,tF,oM(mv),sF,"Insert a name for the structure"],null)],null)],null)},uM=function(){var n=qM(KK);return new R(null,3,5,S,[Dt,dy,new R(null,2,5,S,[new R(null,3,5,S,[FL,"Required: Taxon",new R(null,1,5,S,[rM],null)],null),new R(null,5,5,S,[sM,TF,n,tF,function(t){var i=oM(KK);return i.g?i.g(t):i.call(null,t),hJ(new R(null,4,5,S,[NK,KK,t,tM],null))}],null)],null)],null)},yM=function(){return new R(null,3,5,S,[Dt,dy,new R(null,2,5,S,[new R(null,3,5,S,[FL,"Required: Structure File",new R(null,1,5,S,[rM],null)],null),new R(null,3,5,S,[vM,wM,oM(xM)],null)],null)],null)},CM=function(){var n=qM(KK),t=qM(zM);return new R(null,7,5,S,[AM,KK,q(n),BM,t,tF,oM(zM)],null)},DM=function(){return new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,3,5,S,[Dt,dy,new R(null,3,5,S,[new R(null,1,5,S,[pM],null),new R(null,1,5,S,[uM],null),new R(null,1,5,S,[CM],null)],null)],null),new R(null,1,5,S,[yM],null)],null)],null)},EM=function(){return new R(null,5,5,S,[Dt,tJ,"20px",dy,new R(null,1,5,S,[new R(null,1,5,S,[DM],null)],null)],null)},GM=function(){return new R(null,6,5,S,[FM,"Proteomics Hits Viewer","Look at volcanos!",new R(null,3,5,S,[rM,new R(null,2,5,S,[uL,"Use the interactive viewer to search for interesting hits in an omics data set."],null),new R(null,2,5,S,[KJ,new h(null,3,[U,"/assets/fluff-volcano.jpg",gD,"400px",qC,"auto"],null)],null)],null),KD,function(){return Yv(new R(null,2,5,S,[IK,JK],null))}],null)},IM=function(){return new R(null,6,5,S,[FM,"Multiple Sequence Alignments","Taxonomic Protein Comparison",new R(null,3,5,S,[rM,new R(null,3,5,S,[uL,new h(null,1,[T,"card-text"],null),"Use BLAST, UniRef or gene name-based search along a taxonomic tree to assess the taxonomic diversity of one or multiple proteins. Focus on domains of interest, identify conserved or non-conserved sites."],null),new R(null,2,5,S,[KJ,new h(null,3,[U,"/assets/fluff-alignment.gif",gD,"400px",qC,"auto"],null)],null)],null),KD,function(){return Yv(new R(null,2,5,S,[IK,HM],null))}],null)},KM=function(){return new R(null,6,5,S,[FM,"Molecular Docking","Comparative Docking",new R(null,3,5,S,[rM,new R(null,2,5,S,[uL,"Prepare a set of homologous protein structures for comparative docking, run the docking on your on machine and upload the results to get a nice set of graphics."],null),new R(null,2,5,S,[KJ,new h(null,3,[U,"/assets/fluff-docking.png",gD,"400px",qC,"auto"],null)],null)],null),KD,function(){return Yv(new R(null,2,5,S,[IK,JM],null))}],null)},MM=function(){return new R(null,6,5,S,[FM,"Upload Core Data","Feed the machine",new R(null,2,5,S,[rM,new R(null,2,5,S,[uL,"Provision new taxon data, ligand data or more volcanos. "],null)],null),KD,function(){return Yv(new R(null,2,5,S,[IK,LM],null))}],null)},NM=function(){return new R(null,3,5,S,[Dt,dy,new R(null,2,5,S,[new R(null,5,5,S,[Ss,tJ,"20px",dy,new R(null,2,5,S,[new R(null,1,5,S,[GM],null),new R(null,1,5,S,[IM],null)],null)],null),new R(null,5,5,S,[Ss,tJ,"20px",dy,new R(null,2,5,S,[new R(null,1,5,S,[KM],null),new R(null,1,5,S,[MM],null)],null)],null)],null)],null)},OM=function(n){return GG.h(function(t){return iJ(t,new R(null,2,5,S,[new R(null,2,5,S,[mE,mv],null),new R(null,2,5,S,[Xx,new R(null,4,5,S,[PI,Xx,Xx,vJ],null)],null)],null))},n)},PM=function(n){return GG.h(function(t){return iJ(t,new R(null,2,5,S,[new R(null,2,5,S,[mE,NJ],null),new R(null,2,5,S,[Xx,Xx],null)],null))},n)},UM=function(n){for(var t=w(n),i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o);hJ(new R(null,4,5,S,[NK,QM,tM,f],null)),o+=1}else if(t=w(t))i=t,df(i)?(t=Fd(i),o=Gd(i),i=t,s=D(t),t=o):(t=z(i),hJ(new R(null,4,5,S,[NK,QM,tM,t],null)),t=C(i),i=null,s=0),o=0;else break;return Yv(new R(null,5,5,S,[RM,SM,TM,KK,function(d){return Ng.h(og,O.h(function(p){var v=J.h(d,p);return l(v)?new R(null,2,5,S,[p,v],null):new R(null,2,5,S,[p,og],null)},n))}],null))},$M=function(){var n=q(Aw(new R(null,1,5,S,[CK],null))),t=q(Aw(new R(null,1,5,S,[CJ],null))),i=q(Aw(new R(null,1,5,S,[VM],null))),s=Aw(new R(null,1,5,S,[WM],null)),o=Aw(new R(null,1,5,S,[XM],null));return new R(null,3,5,S,[Dt,dy,new R(null,2,5,S,[l(i)?null:new R(null,2,5,S,[lA,"Please choose at least one taxon and ligand."],null),new R(null,5,5,S,[Ss,U,null,dy,new R(null,3,5,S,[new R(null,7,5,S,[YM,hF,PM(n),TF,s,tF,function(f){return UM(f)}],null),new R(null,3,5,S,[UD,kD,"50px"],null),new R(null,7,5,S,[ZM,hF,OM(t),TF,o,tF,function(f){return Yv(new R(null,5,5,S,[FK,SM,TM,OK,f],null))}],null)],null)],null)],null)],null)},cN=function(n){return function(){for(var t=w(n),i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o);Yv(new R(null,7,5,S,[FK,SM,TM,KK,f,aN,80],null)),o+=1}else if(t=w(t))i=t,df(i)?(t=Fd(i),s=Gd(i),i=t,f=D(t),t=s,s=f):(f=z(i),Yv(new R(null,7,5,S,[FK,SM,TM,KK,f,aN,80],null)),t=C(i),i=null,s=0),o=0;else return null}},fN=function(){var n=fn(!1);return function(){var t=q(Aw(new R(null,1,5,S,[dN],null))),i=O.h(kn.h(Xx,zM),dj(KK.g(t)));return t=bj(KK.g(t)),Ig(hc,i)?new R(null,15,5,S,[Ip,U,null,mE,"GET STRUCTURES",T,by(T,eN,mL,lh),X,new h(null,1,[zD,"#0072bb"],null),KD,cN(t),X,new h(null,1,[zD,l(q(n))?"#0072bb":"#4d90fe"],null),V,new h(null,2,[qE,function(){return N(n,!0),null},rE,function(){return N(n,!1),null}],null)],null):null}},mN=function(n){var t=Aw(new R(null,6,5,S,[gN,SM,TM,KK,Xx.g(n),zM],null)),i=q(Aw(new R(null,2,5,S,[hN,Xx.g(q(t))],null))),s=q(Aw(new R(null,1,5,S,[iN],null))),o=q(Aw(new R(null,2,5,S,[eL,Xx.g(n)],null)));return new R(null,3,5,S,[Dt,dy,new R(null,3,5,S,[new R(null,2,5,S,[ZL,NJ.g(n)],null),new R(null,7,5,S,[kN.Bi,tM,o,TF,t,tF,function(f){return Yv(new R(null,7,5,S,[FK,SM,TM,KK,Xx.g(n),zM,f],null)),Yv(new R(null,2,5,S,[gJ,new R(null,3,5,S,[NK,lN,f],null)],null))}],null),l(l(i)?gc(s):i)?new R(null,2,5,S,[$L,i],null):null],null)],null)},oN=function(){var n=q(Aw(new R(null,1,5,S,[iN],null))),t=q(Aw(new R(null,1,5,S,[nN],null))),i=oj(bj(KK.g(q(Aw(new R(null,1,5,S,[dN],null))))));return t=O.h(function(s){return Se(new R(null,2,5,S,[mN,s],null),new h(null,1,[fx,Xx.g(s)],null))},O.h(t,i)),new R(null,3,5,S,[Dt,dy,new R(null,3,5,S,[l(n)?null:new R(null,2,5,S,[lA,"Please choose a protein for each taxon and press the button to get the structures."],null),new R(null,7,5,S,[Ss,cD,"300px",tJ,"30px",dy,Ng.h(lh,t)],null),new R(null,1,5,S,[fN],null)],null)],null)},pN=function(n){return new R(null,3,5,S,[lA,"pLDDT cutoff: ",aN.g(J.h(KK.g(q(Aw(new R(null,1,5,S,[dN],null)))),n))],null)},qN=function(n){return function(t){return Yv(new R(null,7,5,S,[FK,SM,TM,KK,n,aN,t],null))}},tN=function(n){var t=Aw(new R(null,2,5,S,[rN,n],null));return new R(null,5,5,S,[sN,TF,t,tF,qN(n)],null)},BN=function(n){var t=uN.g(n),i=q(Aw(new R(null,2,5,S,[rN,t],null)));return new R(null,3,5,S,[Dt,dy,new R(null,3,5,S,[new R(null,2,5,S,[pN,t],null),new R(null,2,5,S,[tN,t],null),new R(null,7,5,S,[vN,wN,new h(null,1,[xM,xM.g(n)],null),X,new h(null,1,[xN,new h(null,1,[yN,function(s){return(l(i)?i:80)<s.b?"blue":"yellow"}],null)],null),zN,new h(null,1,[AN,"white"],null)],null)],null)],null)},DN=function(){var n=O.h(function(t){var i=I(t,0,null);return t=I(t,1,null),t=Xx.g(zM.g(t)),i=new h(null,3,[Xx,t,xM,xM.g(J.h(q(Aw(new R(null,1,5,S,[CN],null))),t)),uN,i],null),new R(null,2,5,S,[BN,i],null)},KK.g(q(Aw(new R(null,1,5,S,[dN],null)))));return new R(null,5,5,S,[Ss,tJ,"50px",dy,n],null)},EN=function(n){return Ng.h(og,gh(function(t){var i=M(t);return t=J.h(i,IL),i=J.h(i,GD),rj(Wl(z(t),Ke(t)+1),new $g(null,-1,i,null,null))},F([fh.j(TL.g(n),VL.g(n),F([UL.g(n)]))])))},FN=function(n){var t=EN(n);return function(i){return i=J.h(t,i.resi),l(i)?i:"grey"}},IN=function(n,t){var i=XL(t),s=O.h(function(o){var f=M(o);return o=J.h(f,IL),f=J.h(f,GD),new h(null,3,[GN,o,jD,3,GD,f],null)},UL.g(i));return new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,7,5,S,[vN,wN,new h(null,2,[xM,n,HN,s],null),X,new h(null,1,[xN,new h(null,1,[yN,FN(i)],null)],null),zN,new h(null,1,[AN,"white"],null)],null),new R(null,2,5,S,[$L,t],null)],null)],null)},JN=function(){var n=Aw(new R(null,1,5,S,[dN],null)),t=Aw(new R(null,1,5,S,[CN],null));return n=O.h(kn.l(function(i){var s=xM.g(J.h(q(t),i));return i=q(Aw(new R(null,2,5,S,[hN,i],null))),new R(null,3,5,S,[IN,s,i],null)},Xx,zM),dj(KK.g(q(n)))),new R(null,5,5,S,[Ss,tJ,"50px",dy,n],null)},MN=function(){return new R(null,3,5,S,[Dt,dy,new R(null,2,5,S,[new R(null,3,5,S,[KN,new h(null,1,[X,new h(null,1,[GD,"darkred"],null)],null),"Dummy button for illustration"],null),new R(null,2,5,S,[dA,new R(null,3,5,S,[LN,mE,"Download"],null)],null)],null)],null)},YN=function(n){n=M(n);var t=J.h(n,NN),i=J.h(n,ON),s=J.h(n,PN),o=J.l(n,QN,eE),f=fn(l(t)?t:l(s)?s:300),d=l(i)?i:l(s)?s:300,p=Tg(null),v=reactExports.createRef();return vm(new h(null,4,[kF,"vega-chart",Wx,function(_){_=M(_);var k=J.h(_,RN),P=J.h(_,NK),L=J.h(_,SN);_=S;var G=new h(null,3,[X,new h(null,2,[gD,"100%",PD,TN],null),T,"vega-chart-container",my,v],null),Z=S;return k=new h(null,8,[RN,gj.l(k,zN,UN),pD,"vega-chart",NK,Mm(P),LK,!1,gD,q(f),qC,d,QN,o,DD,new Handler$1().call],null),k=w(L)?gj.l(k,VN,L):k,new R(null,3,5,_,[dA,G,new R(null,2,5,Z,[WN,k],null)],null)},iF,function(){var _=v.current;return l(_)?N(p,function(){var k=new ResizeObserver(function(P){return N(f,P[0].contentRect.width)});return k.observe(_),k}()):null},XN,function(){var _=q(p);if(l(_)){var k=v.current;if(l(k))return _.unobserve(k),N(p,null)}return null}],null),Jq)},gO=function(){return new R(null,3,5,S,[Dt,dy,new R(null,3,5,S,[new R(null,3,5,S,[KN,new h(null,1,[X,new h(null,1,[GD,"darkred"],null)],null),"Dummy data for illustration"],null),new R(null,2,5,S,[dA,new R(null,3,5,S,[LN,mE,"Upload"],null)],null),new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,2,5,S,[YN,new h(null,2,[RN,new h(null,5,[ZN,"https://vega.github.io/schema/vega-lite/v5.json",NK,new h(null,1,[mv,Fv],null),vI,"A simple bar chart with embedded data.",$N,"bar",aO,new h(null,2,[TH,new h(null,3,[bO,"a",pF,"nominal",cO,new h(null,1,[dO,0],null)],null),eO,new h(null,2,[bO,"b",pF,"quantitative"],null)],null)],null),NK,new h(null,1,[Fv,new R(null,9,5,S,[new h(null,2,[ME,"A",fO,27],null),new h(null,2,[ME,"B",fO,55],null),new h(null,2,[ME,"C",fO,43],null),new h(null,2,[ME,"D",fO,91],null),new h(null,2,[ME,"E",fO,81],null),new h(null,2,[ME,"F",fO,53],null),new h(null,2,[ME,"G",fO,19],null),new h(null,2,[ME,"H",fO,87],null),new h(null,2,[ME,"I",fO,52],null)],null)],null)],null)],null),new R(null,2,5,S,[KJ,new h(null,2,[U,"https://www.ebi.ac.uk/thornton-srv/software/LigPlus/manual2/ligplot_3tmn.gif",X,new h(null,2,[gD,"300px",qC,"auto"],null)],null)],null)],null)],null)],null)],null)},hO=function(){return new R(null,7,5,S,[DK,new R(null,2,5,S,["1. Choose taxons and ligands",new R(null,1,5,S,[$M],null)],null),l(q(Aw(new R(null,1,5,S,[VM],null))))?new R(null,2,5,S,["2. Choose proteins and binding sites",new R(null,1,5,S,[oN],null)],null):null,l(q(Aw(new R(null,1,5,S,[iN],null))))?new R(null,2,5,S,["3. Preprocessing",new R(null,1,5,S,[DN],null)],null):null,l(q(Aw(new R(null,1,5,S,[iN],null))))?new R(null,2,5,S,["4. Choose target site",new R(null,1,5,S,[JN],null)],null):null,l(q(Aw(new R(null,1,5,S,[iN],null))))?new R(null,2,5,S,["5. Download docking data",new R(null,1,5,S,[MN],null)],null):null,l(q(Aw(new R(null,1,5,S,[iN],null))))?new R(null,2,5,S,["6. Upload docking results",new R(null,1,5,S,[gO],null)],null):null],null)},uO=function(){var n=q(Aw(new R(null,1,5,S,[iO],null)));return new R(null,5,5,S,[Dt,T,by(T,jO,jL,lh),dy,new R(null,2,5,S,[new R(null,3,5,S,[Dt,dy,new R(null,3,5,S,[new R(null,2,5,S,[DL,new h(null,5,[mE,"Search for homologous proteins along the Uniprot Taxonomy tree",TF,kO.g(lO.g(n)),tF,function(){return Yv(new R(null,4,5,S,[mO,nO,lO,kO],null))},AL,"What tree? You okay buddy?",BL,"No really, there is a tree!"],null)],null),new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,5,5,S,[AD,mE,"Highest Taxonomic Category",X,new h(null,1,[nD,"5px 5px"],null)],null),new R(null,11,5,S,[PH,sF,"Which is the highest level taxonomic category you are interested in?",TF,oO.g(lO.g(n)),CD,gc(kO.g(lO.g(n))),hF,pO,tF,function(t){return Yv(new R(null,5,5,S,[FK,nO,lO,oO,t],null))}],null)],null)],null),l(function(){var t=oO.g(lO.g(n)),i=oj(O.h(Xx,qO));return i.g?i.g(t):i.call(null,t)}())?new R(null,2,5,S,[DL,new h(null,6,[mE,"Really use this taxonomic level?",TF,rO.g(lO.g(n)),CD,gc(kO.g(lO.g(n))),tF,function(){return Yv(new R(null,4,5,S,[mO,nO,lO,rO],null))},AL,"Hey this is crazy!",BL,"But the number of results will be huuuge and somebody needs to download all of this."],null)],null):null],null)],null),new R(null,3,5,S,[Dt,dy,new R(null,2,5,S,[new R(null,7,5,S,[Ss,U,null,tJ,"4px",dy,new R(null,2,5,S,[new R(null,2,5,S,[EL,"Gene Names"],null),new R(null,5,5,S,[$p,U,null,xE,new R(null,5,5,S,[Dt,U,null,dy,new R(null,2,5,S,[new R(null,2,5,S,[lM,"Input Gene Names"],null),new R(null,9,5,S,[fq,U,null,mE,"Link to docs.",OE,"",NE,"_blank"],null)],null)],null)],null)],null)],null),new R(null,5,5,S,[UH,TF,sO.g(tO.g(n)),tF,function(t){return Yv(new R(null,5,5,S,[FK,nO,tO,sO,t],null))}],null)],null)],null)],null)],null)},zO=function(){var n=q(Aw(new R(null,1,5,S,[iO],null)));return new R(null,5,5,S,[Dt,T,by(T,jO,jL,lh),dy,new R(null,2,5,S,[new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,2,5,S,[DL,new h(null,5,[mE,"Use BLAST against the Uniprot database",TF,vO.g(wO.g(n)),tF,function(){return Yv(new R(null,4,5,S,[mO,nO,wO,vO],null))},AL,"What is BLAST?",BL,"Baby don't hurt me."],null)],null),new R(null,2,5,S,[DL,new h(null,6,[mE,"Filter BLAST results by taxonomy",CD,gc(vO.g(wO.g(n))),TF,xO.g(wO.g(n)),tF,function(){return Yv(new R(null,4,5,S,[mO,nO,wO,xO],null))},AL,"What is BLAST?",BL,"Baby don't hurt me."],null)],null)],null)],null),new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,5,5,S,[AD,mE,"Target Database",X,new h(null,1,[nD,"5px 5px"],null)],null),new R(null,11,5,S,[PH,sF,"Which Uniprot BLAST database do you want to search?",TF,RL.g(wO.g(n)),CD,gc(vO.g(wO.g(n))),hF,yO,tF,function(t){return Yv(new R(null,5,5,S,[FK,nO,wO,RL,t],null))}],null)],null)],null)],null)],null)},FO=function(){var n=q(Aw(new R(null,1,5,S,[iO],null)));return new R(null,5,5,S,[Dt,T,by(T,jO,jL,lh),dy,new R(null,2,5,S,[new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,2,5,S,[DL,new h(null,5,[mE,"Use UniRef Cluster search",TF,AO.g(BO.g(n)),tF,function(){return Yv(new R(null,4,5,S,[mO,nO,BO,AO],null))},AL,"Oh this is a doozy!",BL,"Somewhere over the rainbow"],null)],null),new R(null,2,5,S,[DL,new h(null,6,[mE,"Filter UniRef clusters by taxonomy",CD,gc(AO.g(BO.g(n))),TF,CO.g(BO.g(n)),tF,function(){return Yv(new R(null,4,5,S,[mO,nO,BO,CO],null))},AL,"Oh this is a doozy!",BL,"Somewhere over the rainbow"],null)],null)],null)],null),new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,5,5,S,[AD,mE,"UniRef Cluster Type",X,new h(null,1,[nD,"5px 5px"],null)],null),new R(null,9,5,S,[fI,TF,DO.g(BO.g(n)),CD,gc(AO.g(BO.g(n))),hF,EO,tF,function(t){return Yv(new R(null,5,5,S,[FK,nO,BO,DO,t],null))}],null)],null)],null)],null)],null)},HO=function(){var n=q(Aw(new R(null,1,5,S,[iO],null)));return new R(null,3,5,S,[Ss,dy,new R(null,1,5,S,[new R(null,5,5,S,[Dt,X,new h(null,1,[nD,"0px 50px"],null),dy,new R(null,2,5,S,[new R(null,7,5,S,[Ss,U,null,tJ,"4px",dy,new R(null,2,5,S,[new R(null,2,5,S,[EL,"Protein IDs"],null),new R(null,5,5,S,[$p,U,null,xE,new R(null,5,5,S,[Dt,U,null,dy,new R(null,2,5,S,[new R(null,2,5,S,[lM,"Input Protein IDs"],null),new R(null,9,5,S,[fq,U,null,mE,"Link to docs.",OE,"",NE,"_blank"],null)],null)],null)],null)],null)],null),new R(null,5,5,S,[UH,TF,GO.g(tO.g(n)),tF,function(t){return Yv(new R(null,5,5,S,[FK,nO,tO,GO,t],null))}],null)],null)],null)],null)],null)},JO=function(){return new R(null,7,5,S,[DK,new R(null,2,5,S,["1. Choose taxons and proteins",new R(null,1,5,S,[HO],null)],null),new R(null,2,5,S,["2. Configure taxonomic tree search",new R(null,1,5,S,[uO],null)],null),new R(null,2,5,S,["3. Configure BLAST search",new R(null,1,5,S,[zO],null)],null),new R(null,2,5,S,["4. Configure UniRef search",new R(null,1,5,S,[FO],null)],null),new R(null,1,5,S,["5. Set domains of interest"],null),new R(null,1,5,S,[new R(null,5,5,S,[LN,mE,"START PIPELINE",KD,function(){return Yv(new R(null,1,5,S,[IO],null))}],null)],null)],null)},KO=function(){return new R(null,1,5,S,[JO],null)},PO=function(){var n=Aw(new R(null,1,5,S,[LO],null));return function(){return new R(null,7,5,S,[Dt,gD,"1550px",iD,"1550px",dy,new R(null,1,5,S,[new R(null,4,5,S,[EK,n,WG,new R(null,4,5,S,[new h(null,2,[Xx,Xx,DJ,"Job ID"],null),new h(null,3,[Xx,GO,DJ,"Protein IDs",NG,kn.h(function(t){return Nk(", ",t)},GO)],null),new h(null,3,[Xx,MO,DJ,"Protein Names",NG,kn.h(function(t){return Nk(", ",t)},sO)],null),new h(null,3,[Xx,NO,DJ,"Done?",NG,function(t){return l(NO.g(t))?new R(null,3,5,S,[AE,kD,OO],null):new R(null,2,5,S,[$D,new h(null,2,[X,new h(null,1,[gD,"40px"],null),T,"zmdi zmdi-check zmdi-hc-2x"],null)],null)}],null)],null)],null)],null)],null)}},SO=function(){var n=Aw(new R(null,1,5,S,[QO],null));return function(){return new R(null,7,5,S,[Dt,gD,"1550px",iD,"1550px",dy,new R(null,1,5,S,[new R(null,4,5,S,[EK,n,WG,new R(null,4,5,S,[new h(null,2,[Xx,Xx,DJ,"Job ID"],null),new h(null,3,[Xx,GO,DJ,"Protein IDs",NG,kn.h(function(t){return Nk(", ",t)},GO)],null),new h(null,3,[Xx,sO,DJ,"Gene Names",NG,kn.h(function(t){return Nk(", ",t)},sO)],null),new h(null,3,[Xx,RO,DJ,"Done?",NG,function(t){return l(RO.g(t))?new R(null,3,5,S,[AE,kD,OO],null):new R(null,2,5,S,[$D,new h(null,2,[X,new h(null,1,[gD,"40px"],null),T,"zmdi zmdi-check zmdi-hc-2x"],null)],null)}],null)],null)],null)],null)],null)}},TO=function(n){return O.h(function(t){return J.h(t,"_vgsid_")},J.h(J.h(nk(n),"vlPoint"),"or"))},iP=function(n,t){return Bl(O.h(function(i){return xl(i,new h(null,5,[UO,VO,WO,XO,YO,ZO,$O,aP,bP,cP],null))},n),O.h(function(i){return xl(i,new h(null,5,[UO,dP,WO,eP,YO,fP,$O,gP,bP,hP],null))},t))},jP=function(n,t){var i=J.h(n,"effect_size"),s=I(i,0,null),o=I(i,1,null);i=J.h(n,"log_transformed_f_statistic");var f=I(i,0,null),d=I(i,1,null);return l(pg(n))?O.h(function(p){return bP.g(p)},jh.h(function(p){var v=M(p);return p=J.h(v,UO),v=J.h(v,YO),s<=p&&p<=o&&f<=v&&v<=d},t)):null},wP=function(){return new h(null,7,[ZN,"https://vega.github.io/schema/vega-lite/v5.json",NK,new h(null,1,[mv,kP],null),Nq,new R(null,5,5,S,[new h(null,3,[mv,"p_effect_type",lP,new h(null,2,[pF,"point",mP,new R(null,1,5,S,["effect_type"],null)],null),nP,"legend"],null),new h(null,3,[mv,"p_fdr_threshold",rF,.1,nP,new h(null,4,[oF,"range",oP,0,ao,1,pP,.01],null)],null),new h(null,3,[mv,"grid",lP,"interval",nP,"scales"],null),new h(null,2,[mv,"pick",lP,new h(null,2,[pF,"point",qP,"click"],null)],null),new h(null,2,[mv,"boing",nP,new h(null,1,[eI,"#test"],null)],null)],null),aO,new h(null,6,[TH,new h(null,3,[bO,"effect_size",pF,"quantitative",XD,"Effect Size"],null),eO,new h(null,3,[bO,"log_transformed_f_statistic",pF,"quantitative",XD,"Log2(F-statistic + 1)"],null),kD,new h(null,1,[rF,60],null),GD,new h(null,2,[rP,new h(null,4,[sP,"pick",bO,"effect_type",pF,"nominal",XD,"Effect type"],null),rF,"grey"],null),tP,new h(null,2,[rP,new R(null,1,5,S,[new h(null,2,[Fv,"(datum.fdr <= p_fdr_threshold)",rF,1],null)],null),rF,.2],null),DD,new R(null,2,5,S,[new h(null,3,[bO,"gene_name",XD,"Gene Name",pF,"nominal"],null),new h(null,3,[bO,"effect_size",XD,"Fold Change",pF,"quantitative"],null)],null)],null),$N,new h(null,2,[pF,"point",vP,"true"],null),gD,600,qC,400],null)},zP=function(n,t){return new R(null,5,5,S,[Ss,U,null,dy,new R(null,3,5,S,[new R(null,9,5,S,[xP,TF,HK.g(WD.g(n)),sF,"Choose a data set",hF,O.h(function(i){return new h(null,2,[Xx,Xx.g(Sb.g(i)),mE,mv.g(Sb.g(i))],null)},dj(t)),tF,function(i){return Yv(new R(null,3,5,S,[yP,WD,i],null))}],null),new R(null,3,5,S,[UD,kD,"1"],null),new R(null,9,5,S,[xP,TF,HK.g(ku.g(n)),sF,"Choose a data set",hF,O.h(function(i){return new h(null,2,[Xx,Xx.g(Sb.g(i)),mE,mv.g(Sb.g(i))],null)},dj(t)),tF,function(i){return Yv(new R(null,3,5,S,[yP,ku,i],null))}],null)],null)],null)},CP=function(n){var t=q(Aw(new R(null,1,5,S,[AP],null)));return new R(null,3,5,S,[Dt,dy,Ng.h(new R(null,1,5,S,[new R(null,3,5,S,[FL,"Selected genes",new R(null,2,5,S,[dA,""],null)],null)],null),fh.h(O.h(function(i){return new R(null,2,5,S,[lA,bP.g(Ee(n,i))],null)},BP.g(WD.g(t))),O.h(function(i){return new R(null,2,5,S,[lA,bP.g(Ee(n,i))],null)},BP.g(ku.g(t)))))],null)},DP=function(n,t){return Yv(new R(null,5,5,S,[FK,GK,WD,BP,TO(t)],null))},EP=function(n){return new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,2,5,S,[CP,n],null),new R(null,3,5,S,[dA,new h(null,1,[X,new h(null,1,[iD,"800px"],null)],null),new R(null,2,5,S,[YN,new h(null,5,[NN,800,ON,400,RN,wP(),NK,new h(null,1,[kP,n],null),SN,new h(null,1,["pick",DP],null)],null)],null)],null)],null)],null)},FP=function(n){return new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,3,5,S,[Dt,dy,new R(null,2,5,S,[new R(null,3,5,S,[FL,"Search by gene name",new R(null,2,5,S,[dA,""],null)],null),new R(null,3,5,S,[nM,V,new h(null,1,[Xx,"test"],null)],null)],null)],null),new R(null,2,5,S,[YN,new h(null,2,[RN,new h(null,7,[ZN,"https://vega.github.io/schema/vega-lite/v5.json",NK,new h(null,1,[mv,kP],null),Nq,new R(null,5,5,S,[new h(null,3,[mv,"p_effect_type",lP,new h(null,2,[pF,"point",mP,new R(null,1,5,S,["effect_type"],null)],null),nP,"legend"],null),new h(null,3,[mv,"p_fdr_threshold",rF,.1,nP,new h(null,4,[oF,"range",oP,0,ao,1,pP,.01],null)],null),new h(null,3,[mv,"grid",lP,"interval",nP,"scales"],null),new h(null,2,[mv,"pick",lP,new h(null,2,[pF,"point",qP,"click"],null)],null),new h(null,2,[mv,"boing",nP,new h(null,1,[eI,"#test"],null)],null)],null),aO,new h(null,6,[TH,new h(null,3,[bO,"effect_size",pF,"quantitative",XD,"Effect Size"],null),eO,new h(null,3,[bO,"log_transformed_f_statistic",pF,"quantitative",XD,"Log2(F-statistic + 1)"],null),kD,new h(null,1,[rF,60],null),GD,new h(null,2,[rP,new h(null,4,[Fv,"datum.gene_name === boing",bO,"effect_type",pF,"nominal",XD,"Effect type"],null),rF,"grey"],null),tP,new h(null,2,[rP,new R(null,1,5,S,[new h(null,2,[Fv,"(datum.fdr <= p_fdr_threshold)",rF,1],null)],null),rF,.2],null),DD,new R(null,2,5,S,[new h(null,3,[bO,"gene_name",XD,"Gene Name",pF,"nominal"],null),new h(null,3,[bO,"effect_size",XD,"Fold Change",pF,"quantitative"],null)],null)],null),$N,new h(null,2,[pF,"point",vP,"true"],null),gD,600,qC,400],null),NK,new h(null,1,[kP,n],null)],null)],null)],null)],null)},HP=function(n){var t=Aw(new R(null,1,5,S,[AP],null));return new R(null,3,5,S,[Dt,dy,new R(null,2,5,S,[new R(null,3,5,S,[FL,"Selected genes",new R(null,2,5,S,[dA,""],null)],null),new R(null,3,5,S,[Dt,dy,Ng.h(lh,O.h(function(i){return new R(null,2,5,S,[lA,i],null)},jP(GP.g(WD.g(q(t))),n)))],null)],null)],null)},KP=function(n){return new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,2,5,S,[HP,n],null),new R(null,2,5,S,[YN,new h(null,3,[RN,new h(null,6,[ZN,"https://vega.github.io/schema/vega-lite/v5.json",NK,new h(null,1,[mv,kP],null),Nq,new R(null,1,5,S,[new h(null,3,[mv,"p_fdr_threshold",rF,.1,nP,new h(null,4,[oF,"range",oP,0,ao,1,pP,.01],null)],null)],null),IP,new R(null,2,5,S,[new h(null,3,[$N,new h(null,2,[pF,"point",vP,"true"],null),Nq,new R(null,2,5,S,[new h(null,3,[mv,"p_effect_type",lP,new h(null,2,[pF,"point",mP,new R(null,1,5,S,["effect_type"],null)],null),nP,"legend"],null),new h(null,3,[mv,"brush",lP,"interval",JP,!1],null)],null),aO,new h(null,6,[TH,new h(null,3,[bO,"effect_size",pF,"quantitative",XD,"Effect Size"],null),eO,new h(null,3,[bO,"log_transformed_f_statistic",pF,"quantitative",XD,"Log2(F-statistic + 1)"],null),kD,new h(null,1,[rF,60],null),GD,new h(null,2,[rP,new h(null,3,[sP,"brush",rF,"green",JP,!1],null),rF,"blue"],null),tP,new h(null,2,[rP,new R(null,1,5,S,[new h(null,2,[Fv,"(datum.fdr <= p_fdr_threshold)",rF,1],null)],null),rF,.2],null),DD,new R(null,2,5,S,[new h(null,3,[bO,"gene_name",XD,"Gene Name",pF,"nominal"],null),new h(null,3,[bO,"effect_size",XD,"Fold Change",pF,"quantitative"],null)],null)],null)],null),new h(null,2,[$N,new h(null,1,[pF,"text"],null),aO,new h(null,4,[bF,new h(null,1,[bO,"gene_name"],null),tP,new h(null,2,[rP,new R(null,1,5,S,[new h(null,3,[sP,"brush",rF,1,JP,!1],null)],null),rF,0],null),TH,new h(null,3,[bO,"effect_size",pF,"quantitative",XD,"Effect Size"],null),eO,new h(null,3,[bO,"log_transformed_f_statistic",pF,"quantitative",XD,"Log2(F-statistic + 1)"],null)],null)],null)],null),gD,600,qC,400],null),NK,new h(null,1,[kP,n],null),SN,new h(null,1,["brush",function(t,i){return Yv(new R(null,5,5,S,[FK,GK,WD,GP,nk(i)],null))}],null)],null)],null)],null)],null)},VP=function(n,t){var i=S,s=new h(null,1,[X,new h(null,2,[gD,"800px",qC,"800px"],null)],null),o=S,f=M(new h(null,2,[LP,"Cefotaxime Fold Change",MP,"Amikacin Fold Change"],null)),d=J.h(f,gD),p=J.h(f,qC),v=J.h(f,LP);return f=J.h(f,MP),new R(null,3,5,i,[dA,s,new R(null,6,5,o,[YN,gD,"100%",qC,"100%",new h(null,2,[RN,new h(null,4,[ZN,"https://vega.github.io/schema/vega-lite/v5.json",NK,new h(null,1,[mv,kP],null),Nq,new R(null,2,5,S,[new h(null,3,[mv,"p_fdr_threshold",rF,.05,nP,new h(null,4,[oF,"range",oP,0,ao,1,pP,.01],null)],null),new h(null,3,[mv,"grid",lP,"interval",nP,"scales"],null)],null),NP,new R(null,2,5,S,[new h(null,5,[gD,d,qC,80,OP,new R(null,1,5,S,[new h(null,1,[PP,"datum.fdr_1 <= p_fdr_threshold && datum.fdr_2 <= p_fdr_threshold"],null)],null),$N,new h(null,2,[pF,"bar",GD,"green"],null),aO,new h(null,2,[TH,new h(null,4,[bO,"effect_size_1",QP,new h(null,1,[RP,400],null),pF,"quantitative",cO,null],null),eO,new h(null,2,[SP,"count",pF,"quantitative"],null)],null)],null),new h(null,1,[TP,new R(null,2,5,S,[new h(null,5,[gD,d,qC,p,Nq,new R(null,2,5,S,[new h(null,3,[mv,"p_effect_type_1",lP,new h(null,2,[pF,"point",mP,new R(null,1,5,S,["effect_type_1"],null)],null),nP,"legend"],null),new h(null,3,[mv,"p_effect_type_2",lP,new h(null,2,[pF,"point",mP,new R(null,1,5,S,["effect_type_2"],null)],null),nP,"legend"],null)],null),$N,new h(null,3,[pF,"point",DD,new h(null,1,[UP,"data"],null),vP,"true"],null),aO,new h(null,5,[TH,new h(null,3,[bO,"effect_size_1",pF,"quantitative",XD,v],null),eO,new h(null,3,[bO,"effect_size_2",pF,"quantitative",XD,f],null),kD,new h(null,1,[rF,60],null),GD,new h(null,2,[rP,new R(null,2,5,S,[new h(null,2,[Fv,"datum.effect_size_1 >= datum.effect_size_2 + 1",rF,"purple"],null),new h(null,2,[Fv,"datum.effect_size_2 >= datum.effect_size_1 + 1",rF,"green"],null)],null),rF,"gray"],null),tP,new h(null,2,[rP,new h(null,2,[Fv,"datum.fdr_1 > p_fdr_threshold || datum.fdr_2 > p_fdr_threshold",rF,.2],null),rF,1],null)],null)],null),new h(null,5,[gD,80,qC,p,OP,new R(null,1,5,S,[new h(null,1,[PP,"datum.fdr_1 <= p_fdr_threshold && datum.fdr_2 <= p_fdr_threshold"],null)],null),$N,new h(null,2,[pF,"bar",GD,"purple"],null),aO,new h(null,2,[TH,new h(null,2,[SP,"count",pF,"quantitative"],null),eO,new h(null,4,[bO,"effect_size_2",QP,new h(null,1,[RP,400],null),pF,"quantitative",cO,null],null)],null)],null)],null)],null)],null)],null),NK,new h(null,1,[kP,iP(n,t)],null)],null)],null)],null)},aQ=function(n,t){var i=Aw(new R(null,2,5,S,[WP,WD],null)),s=Gh(XP.pi.g?XP.pi.g(t):XP.pi.call(null,t)),o=l(z(q(i)))?function(){var f=z(q(i));return XP.oi.h?XP.oi.h(t,f):XP.oi.call(null,t,f)}():Mg(!0);return new R(null,3,5,S,[Ss,dy,new R(null,1,5,S,[new R(null,3,5,S,[Ss,dy,new R(null,2,5,S,[new R(null,17,5,S,[BJ,U,null,hF,s,TF,i,tF,function(f){return Yv(new R(null,5,5,S,[FK,GK,WD,YP,f],null))},gD,"450px",ZP,"Present GO-terms",$P,"Selected GO-terms",wF,!0],null),new R(null,3,5,S,[dA,new h(null,1,[X,new h(null,1,[gD,"400px"],null)],null),new R(null,2,5,S,[YN,new h(null,2,[RN,wP(),NK,new h(null,1,[kP,jh.h(o,n)],null)],null)],null)],null)],null)],null)],null)],null)},dQ=function(){var n=q(Aw(new R(null,1,5,S,[bQ],null))),t=q(Aw(new R(null,1,5,S,[AP],null))),i=J.h(n,HK.g(WD.g(t))),s=J.h(n,HK.g(ku.g(t))),o=KK.g(Sb.g(i)),f=q(Aw(new R(null,2,5,S,[eL,o],null)));return new R(null,3,5,S,[Dt,dy,new R(null,2,5,S,[new R(null,3,5,S,[zP,t,n],null),new R(null,6,5,S,[cQ,function(){var d=kP.g(i);return l(d)?new R(null,2,5,S,["Plot Clickable",new R(null,2,5,S,[EP,d],null)],null):null}(),function(){var d=kP.g(i);return l(d)?new R(null,2,5,S,["Plot Searchable",new R(null,2,5,S,[FP,d],null)],null):null}(),function(){var d=kP.g(i);return l(d)?new R(null,2,5,S,["Plot Brushable",new R(null,2,5,S,[KP,d],null)],null):null}(),function(){var d=kP.g(i);return l(d)?new R(null,2,5,S,["GO-term filterable",new R(null,3,5,S,[aQ,d,f],null)],null):null}(),function(){var d=kP.g(i),p=kP.g(s);return l(l(d)?p:d)?new R(null,2,5,S,["Cross-Plot",new R(null,3,5,S,[VP,d,p],null)],null):null}()],null)],null)],null)},gQ=function(n,t){var i=fn(!1);return function(){var s=E.h(t,q(Aw(new R(null,1,5,S,[eQ],null))));return new R(null,13,5,S,[Ip,U,null,mE,n,KD,function(){return Yv(We(t)?Ng.h(new R(null,1,5,S,[IK],null),t):new R(null,2,5,S,[IK,t],null))},T,by(T,fQ,sI,lh),X,new h(null,1,[zD,l(q(i))?s?"#4db6ac":"#0072bb":s?"#4db6ac":"#00796b"],null),V,new h(null,2,[qE,function(){return N(i,!0),null},rE,function(){return N(i,!1),null}],null)],null)}},nQ=function(){return new R(null,5,5,S,[Dt,T,by(T,hQ,rI,lh),dy,new R(null,12,5,S,[new R(null,3,5,S,[gQ,"Home",iQ],null),new R(null,5,5,S,[UD,U,null,kD,"40px"],null),new R(null,3,5,S,[gQ,"Data Overview",jQ],null),new R(null,3,5,S,[gQ,"Upload Data",LM],null),new R(null,5,5,S,[UD,U,null,kD,"40px"],null),new R(null,3,5,S,[gQ,"Volcano Viewer",JK],null),new R(null,5,5,S,[UD,U,null,kD,"40px"],null),new R(null,3,5,S,[gQ,"Taxonomic Protein Comparison",HM],null),new R(null,3,5,S,[gQ,"Results",lQ],null),new R(null,5,5,S,[UD,U,null,kD,"40px"],null),new R(null,3,5,S,[gQ,"Comparative Docking",JM],null),new R(null,3,5,S,[gQ,"Results",mQ],null)],null)],null)},oQ=function(){return new R(null,2,5,S,[KJ,new h(null,3,[U,"/assets/logo.png",gD,"260px",qC,"auto"],null)],null)},rz=rz||{},$a=globalThis,da="closure_uid_"+(1e9*Math.random()>>>0),ea=0;ta[" "]=function(){};var ua=class{constructor(n,t){this.wa=n|0,this.la=t|0}isSafeInteger(){var n=this.la>>21;return n==0||n==-1&&!(this.wa==0&&this.la==-2097152)}toString(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(this.isSafeInteger()){var t=Ha(this);return n==10?""+t:t.toString(n)}t=14-(n>>2);var i=Math.pow(n,t),s=va(i,i/4294967296);i=La(this,s);var o=Math,f=o.abs;return s=i.multiply(s),s=this.add(Aa(s)),o=f.call(o,Ha(s)),f=n==10?""+o:o.toString(n),f.length<t&&(f="0000000000000".slice(f.length-t)+f),o=Ha(i),(n==10?o:o.toString(n))+f}ra(){return this.wa^this.la}equals(n){return this.wa==n.wa&&this.la==n.la}compare(n){return this.la==n.la?this.wa==n.wa?0:this.wa>>>0>n.wa>>>0?1:-1:this.la>n.la?1:-1}add(n){var t=this.la>>>16,i=this.la&65535,s=this.wa>>>16,o=n.la>>>16,f=n.la&65535,d=n.wa>>>16;return n=(this.wa&65535)+(n.wa&65535),d=(n>>>16)+(s+d),s=d>>>16,s+=i+f,t=(s>>>16)+(t+o)&65535,va((d&65535)<<16|n&65535,t<<16|s&65535)}multiply(n){if(Ia(this))return this;if(Ia(n))return n;var t=this.la>>>16,i=this.la&65535,s=this.wa>>>16,o=this.wa&65535,f=n.la>>>16,d=n.la&65535,p=n.wa>>>16;n=n.wa&65535;var v=o*n,_=(v>>>16)+s*n,k=_>>>16;_=(_&65535)+o*p,k+=_>>>16,k+=i*n;var P=k>>>16;return k=(k&65535)+s*p,P+=k>>>16,k=(k&65535)+o*d,P=P+(k>>>16)+(t*n+i*p+s*d+o*f)&65535,va((_&65535)<<16|v&65535,P<<16|k&65535)}and(n){return va(this.wa&n.wa,this.la&n.la)}or(n){return va(this.wa|n.wa,this.la|n.la)}xor(n){return va(this.wa^n.wa,this.la^n.la)}shiftLeft(n){if(n&=63,n==0)return this;var t=this.wa;return 32>n?va(t<<n,this.la<<n|t>>>32-n):va(0,t<<n-32)}},Ca=va(0,0),Ja=va(1,0),Ka=va(-1,-1),wa=va(4294967295,2147483647),ya=va(0,2147483648),qb,Nn=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]},Ya="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Eu=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if(typeof n=="string")return typeof t!="string"||t.length!=1?-1:n.indexOf(t,0);for(let i=0;i<n.length;i++)if(i in n&&n[i]===t)return i;return-1},rb={},jb=class{constructor(n,t){this.qg=t===rb?n:""}toString(){return this.qg.toString()}},TJ=new jb($a.trustedTypes&&$a.trustedTypes.emptyHTML||"",rb),sb=function(n){let t=!1,i;return function(){return t||(i=n(),t=!0),i}}(function(){var n=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),n.appendChild(t),t=n.firstChild.firstChild,n.innerHTML=kb(TJ),!t.parentElement}),pb=/&([^;\s<&]+);?/g,UJ=String.prototype.repeat?function(n,t){return n.repeat(t)}:function(n,t){return Array(t+1).join(n)},Eb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");g=zb.prototype;g.toString=function(){var n=[],t=this.pc;t&&n.push(Hb(t,VJ,!0),":");var i=this.$b;return(i||t=="file")&&(n.push("//"),(t=this.Sc)&&n.push(Hb(t,VJ,!0),"@"),n.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.gd,i!=null&&n.push(":",String(i))),(i=this.getPath())&&(this.$b&&i.charAt(0)!="/"&&n.push("/"),n.push(Hb(i,i.charAt(0)=="/"?WJ:XJ,!0))),(i=this.Sb.toString())&&n.push("?",i),(i=this.Bc)&&n.push("#",Hb(i,YJ)),n.join("")};g.resolve=function(n){var t=this.clone(),i=!!n.pc;if(i?Ab(t,n.pc):i=!!n.Sc,i){var s=n.Sc;Bb(t),t.Sc=s}else i=!!n.$b;if(i?(s=n.$b,Bb(t),t.$b=s):i=n.gd!=null,s=n.getPath(),i)Cb(t,n.gd);else if(i=!!n.fd){if(s.charAt(0)!="/")if(this.$b&&!this.fd)s="/"+s;else{var o=t.getPath().lastIndexOf("/");o!=-1&&(s=t.getPath().slice(0,o+1)+s)}if(o=s,o==".."||o==".")s="";else if(o.indexOf("./")!=-1||o.indexOf("/.")!=-1){s=o.lastIndexOf("/",0)==0,o=o.split("/");for(var f=[],d=0;d<o.length;){var p=o[d++];p=="."?s&&d==o.length&&f.push(""):p==".."?((1<f.length||f.length==1&&f[0]!="")&&f.pop(),s&&d==o.length&&f.push("")):(f.push(p),s=!0)}s=f.join("/")}else s=o}return i?(Bb(t),t.fd=s):i=n.Sb.toString()!=="",i?Db(t,n.Sb.clone()):i=!!n.Bc,i&&(n=n.Bc,Bb(t),t.Bc=n),t};g.clone=function(){return new zb(this)};g.getPath=function(){return this.fd};g.getQuery=function(){return this.Sb.toString()};g.removeParameter=function(n){return Bb(this),this.Sb.remove(n),this};g.Df=function(n){this.Db=n,this.Sb&&this.Sb.Df(n)};var VJ=/[#\/\?@]/g,XJ=/[#\?:]/g,WJ=/[#\?]/g,Ib=/[#\?@]/g,YJ=/#/g;g=Gb.prototype;g.add=function(n,t){Lb(this),this.wb=null,n=Mb(this,n);var i=this.Ja.get(n);return i||this.Ja.set(n,i=[]),i.push(t),this.nb+=1,this};g.remove=function(n){return Lb(this),n=Mb(this,n),this.Ja.has(n)?(this.wb=null,this.nb-=this.Ja.get(n).length,this.Ja.delete(n)):!1};g.clear=function(){this.Ja=this.wb=null,this.nb=0};g.se=function(){return Lb(this),this.nb==0};g.forEach=function(n,t){Lb(this),this.Ja.forEach(function(i,s){i.forEach(function(o){n.call(t,o,s,this)},this)},this)};g.Lc=function(){Lb(this);const n=Array.from(this.Ja.values()),t=Array.from(this.Ja.keys()),i=[];for(let s=0;s<t.length;s++){const o=n[s];for(let f=0;f<o.length;f++)i.push(t[s])}return i};g.Mc=function(n){Lb(this);let t=[];if(typeof n=="string")Ob(this,n)&&(t=t.concat(this.Ja.get(Mb(this,n))));else{n=Array.from(this.Ja.values());for(let i=0;i<n.length;i++)t=t.concat(n[i])}return t};g.set=function(n,t){return Lb(this),this.wb=null,n=Mb(this,n),Ob(this,n)&&(this.nb-=this.Ja.get(n).length),this.Ja.set(n,[t]),this.nb+=1,this};g.get=function(n,t){return n?(n=this.Mc(n),0<n.length?String(n[0]):t):t};g.toString=function(){if(this.wb)return this.wb;if(!this.Ja)return"";const n=[],t=Array.from(this.Ja.keys());for(var i=0;i<t.length;i++){var s=t[i];const f=encodeURIComponent(String(s)),d=this.Mc(s);for(s=0;s<d.length;s++){var o=f;d[s]!==""&&(o+="="+encodeURIComponent(String(d[s]))),n.push(o)}}return this.wb=n.join("&")};g.clone=function(){var n=new Gb;return n.wb=this.wb,this.Ja&&(n.Ja=new Map(this.Ja),n.nb=this.nb),n};g.Df=function(n){n&&!this.Db&&(Lb(this),this.wb=null,this.Ja.forEach(function(t,i){var s=i.toLowerCase();i!=s&&(this.remove(i),this.remove(s),0<t.length&&(this.wb=null,this.Ja.set(Mb(this,s),db(t)),this.nb+=t.length))},this)),this.Db=n};g.extend=function(n){for(var t=0;t<arguments.length;t++)xb(arguments[t],function(i,s){this.add(s,i)},this)};g=Pb.prototype;g.yc="";g.set=function(n){this.yc=""+n};g.append=function(n,t,i){if(this.yc+=String(n),t!=null)for(let s=1;s<arguments.length;s++)this.yc+=arguments[s];return this};g.clear=function(){this.yc=""};g.getLength=function(){return this.yc.length};g.toString=function(){return this.yc};var fC={},gC={},Zd={},Sm=null,Yb=null,Xb=!0,Ua=!0,ob=null,Ej=null,ee=typeof Symbol<"u"&&aa(Symbol)==="function"?Symbol.iterator:"@@iterator",ZJ=function(){function n(s,o,f){var d=Oe[aa(s??null)];if(d!=null||(d=Oe._,d!=null))return d.l?d.l(s,o,f):d.call(null,s,o,f);throw kc("IIndexed.-nth",s)}function t(s,o){var f=Oe[aa(s??null)];if(f!=null||(f=Oe._,f!=null))return f.h?f.h(s,o):f.call(null,s,o);throw kc("IIndexed.-nth",s)}var i=null;return i=function(s,o,f){switch(arguments.length){case 2:return t.call(this,s,o);case 3:return n.call(this,s,o,f)}throw Error("Invalid arity: "+arguments.length)},i.h=t,i.l=n,i}(),Oe=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};Oe.h=function(n,t){return n!=null&&n.S!=null?n.S(n,t):ZJ(n,t)};Oe.l=function(n,t,i){return n!=null&&n.Ca!=null?n.Ca(n,t,i):ZJ(n,t,i)};Oe.v=3;var aK=function(){function n(s,o,f){var d=$J[aa(s??null)];if(d!=null||(d=$J._,d!=null))return d.l?d.l(s,o,f):d.call(null,s,o,f);throw kc("ILookup.-lookup",s)}function t(s,o){var f=$J[aa(s??null)];if(f!=null||(f=$J._,f!=null))return f.h?f.h(s,o):f.call(null,s,o);throw kc("ILookup.-lookup",s)}var i=null;return i=function(s,o,f){switch(arguments.length){case 2:return t.call(this,s,o);case 3:return n.call(this,s,o,f)}throw Error("Invalid arity: "+arguments.length)},i.h=t,i.l=n,i}(),$J=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};$J.h=function(n,t){return n!=null&&n.oa!=null?n.oa(n,t):aK(n,t)};$J.l=function(n,t,i){return n!=null&&n.V!=null?n.V(n,t,i):aK(n,t,i)};$J.v=3;var bK=function(){function n(s,o,f){var d=Bf[aa(s??null)];if(d!=null||(d=Bf._,d!=null))return d.l?d.l(s,o,f):d.call(null,s,o,f);throw kc("IReduce.-reduce",s)}function t(s,o){var f=Bf[aa(s??null)];if(f!=null||(f=Bf._,f!=null))return f.h?f.h(s,o):f.call(null,s,o);throw kc("IReduce.-reduce",s)}var i=null;return i=function(s,o,f){switch(arguments.length){case 2:return t.call(this,s,o);case 3:return n.call(this,s,o,f)}throw Error("Invalid arity: "+arguments.length)},i.h=t,i.l=n,i}(),Bf=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};Bf.h=function(n,t){return n!=null&&n.ya!=null?n.ya(n,t):bK(n,t)};Bf.l=function(n,t,i){return n!=null&&n.za!=null?n.za(n,t,i):bK(n,t,i)};Bf.v=3;var dK=function(){function n(f,d,p,v,_){var k=cK[aa(f??null)];if(k!=null||(k=cK._,k!=null))return k.O?k.O(f,d,p,v,_):k.call(null,f,d,p,v,_);throw kc("ISwap.-swap!",f)}function t(f,d,p,v){var _=cK[aa(f??null)];if(_!=null||(_=cK._,_!=null))return _.K?_.K(f,d,p,v):_.call(null,f,d,p,v);throw kc("ISwap.-swap!",f)}function i(f,d,p){var v=cK[aa(f??null)];if(v!=null||(v=cK._,v!=null))return v.l?v.l(f,d,p):v.call(null,f,d,p);throw kc("ISwap.-swap!",f)}function s(f,d){var p=cK[aa(f??null)];if(p!=null||(p=cK._,p!=null))return p.h?p.h(f,d):p.call(null,f,d);throw kc("ISwap.-swap!",f)}var o=null;return o=function(f,d,p,v,_){switch(arguments.length){case 2:return s.call(this,f,d);case 3:return i.call(this,f,d,p);case 4:return t.call(this,f,d,p,v);case 5:return n.call(this,f,d,p,v,_)}throw Error("Invalid arity: "+arguments.length)},o.h=s,o.l=i,o.K=t,o.O=n,o}(),cK=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);case 4:return n.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return n.O(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};cK.h=function(n,t){return n!=null&&n.be!=null?n.be(n,t):dK(n,t)};cK.l=function(n,t,i){return n!=null&&n.ce!=null?n.ce(n,t,i):dK(n,t,i)};cK.K=function(n,t,i,s){return n!=null&&n.de!=null?n.de(n,t,i,s):dK(n,t,i,s)};cK.O=function(n,t,i,s,o){return n!=null&&n.ee!=null?n.ee(n,t,i,s,o):dK(n,t,i,s,o)};cK.v=5;Od.prototype.Yf=function(n,t){return this.wh.append(t)};Od.prototype.hi=function(){return null};var Qd=typeof Math<"u"&&typeof Math.imul<"u"?function(n,t){return Math.imul(n,t)}:function(n,t){var i=n&65535,s=t&65535;return i*s+((n>>>16&65535)*s+i*(t>>>16&65535)<<16>>>0)|0},Wd={},Vd=0;g=r.prototype;g.toString=function(){return this.Za};g.da=function(n){return this.M(null,n)};g.M=function(n,t){return t instanceof r?this.Za===t.Za:!1};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return J.h?J.h(n,this):J.call(null,n,this)};g.h=function(n,t){return J.l?J.l(n,this,t):J.call(null,n,this,t)};g.Y=function(){return this.Xb};g.Z=function(n,t){return new r(this.Va,this.name,this.Za,this.Uc,t)};g.X=function(){var n=this.Uc;return n??(this.Uc=n=sf(this))};g.rd=function(){return this.name};g.sd=function(){return this.Va};g.W=function(n,t){return qd(t,this.Za)};var Xj=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};Xj.g=function(n){for(;;){if(n instanceof r)return n;if(typeof n=="string"){var t=n.indexOf("/");return 1>t?Xj.h(null,n):Xj.h(n.substring(0,t),n.substring(t+1,n.length))}if(n instanceof gg)return n.ii;if(n instanceof K)n=n.U;else throw Error("no conversion to symbol")}};Xj.h=function(n,t){var i=n!=null?[m.g(n),"/",m.g(t)].join(""):t;return new r(n,t,i,null,null)};Xj.v=2;g=gg.prototype;g.toString=function(){return["#'",m.g(this.ii)].join("")};g.pb=function(){return this.F.G?this.F.G():this.F.call(null)};g.Y=function(){return this.Xb};g.Z=function(n,t){return new gg(this.F,this.ii,t)};g.M=function(n,t){return t instanceof gg?(n=this.ii,t=t.ii,E.h?E.h(n,t):E.call(null,n,t)):!1};g.X=function(){return sf(this.ii)};g.Dg=Zd;g.call=function(n){switch(arguments.length-1){case 0:return this.G();case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.O(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.Ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Wa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.mb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.ab(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);case 11:return this.bb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.cb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.eb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13]);case 14:return this.fb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.gb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.hb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.ib(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.jb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.kb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.lb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.af(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.G=function(){var n=this.F.G?this.F.G():this.F.call(null);return n.G?n.G():n.call(null)};g.g=function(n){var t=this.F.G?this.F.G():this.F.call(null);return t.g?t.g(n):t.call(null,n)};g.h=function(n,t){var i=this.F.G?this.F.G():this.F.call(null);return i.h?i.h(n,t):i.call(null,n,t)};g.l=function(n,t,i){var s=this.F.G?this.F.G():this.F.call(null);return s.l?s.l(n,t,i):s.call(null,n,t,i)};g.K=function(n,t,i,s){var o=this.F.G?this.F.G():this.F.call(null);return o.K?o.K(n,t,i,s):o.call(null,n,t,i,s)};g.O=function(n,t,i,s,o){var f=this.F.G?this.F.G():this.F.call(null);return f.O?f.O(n,t,i,s,o):f.call(null,n,t,i,s,o)};g.Ka=function(n,t,i,s,o,f){var d=this.F.G?this.F.G():this.F.call(null);return d.Ka?d.Ka(n,t,i,s,o,f):d.call(null,n,t,i,s,o,f)};g.Wa=function(n,t,i,s,o,f,d){var p=this.F.G?this.F.G():this.F.call(null);return p.Wa?p.Wa(n,t,i,s,o,f,d):p.call(null,n,t,i,s,o,f,d)};g.Ra=function(n,t,i,s,o,f,d,p){var v=this.F.G?this.F.G():this.F.call(null);return v.Ra?v.Ra(n,t,i,s,o,f,d,p):v.call(null,n,t,i,s,o,f,d,p)};g.mb=function(n,t,i,s,o,f,d,p,v){var _=this.F.G?this.F.G():this.F.call(null);return _.mb?_.mb(n,t,i,s,o,f,d,p,v):_.call(null,n,t,i,s,o,f,d,p,v)};g.ab=function(n,t,i,s,o,f,d,p,v,_){var k=this.F.G?this.F.G():this.F.call(null);return k.ab?k.ab(n,t,i,s,o,f,d,p,v,_):k.call(null,n,t,i,s,o,f,d,p,v,_)};g.bb=function(n,t,i,s,o,f,d,p,v,_,k){var P=this.F.G?this.F.G():this.F.call(null);return P.bb?P.bb(n,t,i,s,o,f,d,p,v,_,k):P.call(null,n,t,i,s,o,f,d,p,v,_,k)};g.cb=function(n,t,i,s,o,f,d,p,v,_,k,P){var L=this.F.G?this.F.G():this.F.call(null);return L.cb?L.cb(n,t,i,s,o,f,d,p,v,_,k,P):L.call(null,n,t,i,s,o,f,d,p,v,_,k,P)};g.eb=function(n,t,i,s,o,f,d,p,v,_,k,P,L){var G=this.F.G?this.F.G():this.F.call(null);return G.eb?G.eb(n,t,i,s,o,f,d,p,v,_,k,P,L):G.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L)};g.fb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G){var Z=this.F.G?this.F.G():this.F.call(null);return Z.fb?Z.fb(n,t,i,s,o,f,d,p,v,_,k,P,L,G):Z.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G)};g.gb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z){var W=this.F.G?this.F.G():this.F.call(null);return W.gb?W.gb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z):W.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z)};g.hb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W){var j=this.F.G?this.F.G():this.F.call(null);return j.hb?j.hb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W):j.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W)};g.ib=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j){var H=this.F.G?this.F.G():this.F.call(null);return H.ib?H.ib(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j):H.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j)};g.jb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H){var me=this.F.G?this.F.G():this.F.call(null);return me.jb?me.jb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H):me.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H)};g.kb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me){var $e=this.F.G?this.F.G():this.F.call(null);return $e.kb?$e.kb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me):$e.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me)};g.lb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e){var De=this.F.G?this.F.G():this.F.call(null);return De.lb?De.lb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e):De.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e)};g.af=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De){var le=this.F.G?this.F.G():this.F.call(null);return Kg.Lg?Kg.Lg(le,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De):Kg.call(null,le,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De)};var E=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};E.g=function(){return!0};E.h=function(n,t){return n==null?t==null:n===t||fd(n,t)};E.j=function(n,t,i){for(;;)if(E.h(n,t))if(C(i))n=t,t=z(i),i=C(i);else return E.h(t,z(i));else return!1};E.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};E.v=2;ie.prototype.next=function(){if(this.ea!=null){var n=z(this.ea);return this.ea=C(this.ea),{value:n,done:!1}}return{value:null,done:!0}};ke.prototype.aa=function(){return this};ke.prototype.va=function(){return this.value};ke.prototype.Ba=function(){return this.Ne==null&&(this.Ne=fe.g?fe.g(this.dd):fe.call(null,this.dd)),this.Ne};var eK=Td(Sd(0,Rd(1)),0),fK=Td(Sd(0,Rd(0)),0);wc.null=!0;xc.null=function(){return 0};Date.prototype.M=function(n,t){return t instanceof Date&&this.valueOf()===t.valueOf()};Date.prototype.Zb=Zd;Date.prototype.yb=function(n,t){if(t instanceof Date)return eb(this.valueOf(),t.valueOf());throw Error(["Cannot compare ",m.g(this)," to ",m.g(t)].join(""))};fd.number=function(n,t){return n===t};tc.function=!0;$c.function=!0;ad.function=function(){return null};gd._=function(n){return fa(n)};re.prototype.pb=function(){return this.F};Ie.prototype.na=function(){return this.J<this.o.length};Ie.prototype.next=function(){var n=this.o[this.J];return this.J+=1,n};g=u.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D.g?D.g(this):D.call(null,this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.S=function(n,t){if(n=t+this.J,0<=n&&n<this.o.length)return this.o[n];throw Error("Index out of bounds")};g.Ca=function(n,t,i){return n=t+this.J,0<=n&&n<this.o.length?this.o[n]:i};g.Fa=function(){return new Ie(this.o,this.J)};g.Y=function(){return this.D};g.Ea=function(){return new u(this.o,this.J,this.D)};g.xa=function(){return this.J+1<this.o.length?new u(this.o,this.J+1,null):null};g.ba=function(){var n=this.o.length-this.J;return 0>n?0:n};g.ic=function(){var n=this.ba(null);return 0<n?new Je(this,n-1,null):null};g.X=function(){return oe(this)};g.M=function(n,t){return Lf.h?Lf.h(this,t):Lf.call(null,this,t)};g.ka=function(){return ge};g.ya=function(n,t){return ze(this.o,t,this.o[this.J],this.J+1)};g.za=function(n,t,i){return ze(this.o,t,i,this.J)};g.va=function(){return this.o[this.J]};g.Ba=function(){return this.J+1<this.o.length?new u(this.o,this.J+1,null):ge};g.aa=function(){return this.J<this.o.length?this:null};g.Z=function(n,t){return t===this.D?this:new u(this.o,this.J,t)};g.ga=function(n,t){return Tf.h?Tf.h(t,this):Tf.call(null,t,this)};u.prototype[ee]=function(){return je(this)};g=Je.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D.g?D.g(this):D.call(null,this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.Ea=function(){return new Je(this.pd,this.J,this.D)};g.xa=function(){return 0<this.J?new Je(this.pd,this.J-1,null):null};g.ba=function(){return this.J+1};g.X=function(){return oe(this)};g.M=function(n,t){return Lf.h?Lf.h(this,t):Lf.call(null,this,t)};g.ka=function(){return ge};g.ya=function(n,t){return tf?tf(t,this):xf.call(null,t,this)};g.za=function(n,t,i){return wf?wf(t,i,this):xf.call(null,t,i,this)};g.va=function(){return Oe(this.pd,this.J)};g.Ba=function(){return 0<this.J?new Je(this.pd,this.J-1,null):ge};g.aa=function(){return this};g.Z=function(n,t){return t===this.D?this:new Je(this.pd,this.J,t)};g.ga=function(n,t){return Tf.h?Tf.h(t,this):Tf.call(null,t,this)};Je.prototype[ee]=function(){return je(this)};fd._=function(n,t){return n===t};var Qf=function n(t){switch(arguments.length){case 0:return n.G();case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};Qf.G=function(){return lh};Qf.g=function(n){return n};Qf.h=function(n,t){return n!=null?Bc(n,t):new Mf(null,t,null,1,null)};Qf.j=function(n,t,i){for(;;)if(l(i))n=Qf.h(n,t),t=z(i),i=C(i);else return Qf.h(n,t)};Qf.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};Qf.v=2;var J=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};J.h=function(n,t){return n==null?null:n!=null&&(n.A&256||Zd===n.Mg)?n.oa(null,t):dc(n)?t!=null&&t<n.length?n[t|0]:null:typeof n=="string"?t!=null&&-1<t&&t<n.length?n.charAt(t|0):null:ic(Ic,n)?$J(n,t):null};J.l=function(n,t,i){return n!=null?n!=null&&(n.A&256||Zd===n.Mg)?n.V(null,t,i):dc(n)?t!=null&&-1<t&&t<n.length?n[t|0]:i:typeof n=="string"?t!=null&&-1<t&&t<n.length?n.charAt(t|0):i:ic(Ic,n)?$J(n,t,i):i:i};J.v=3;var gj=function n(t){switch(arguments.length){case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],new u(i.slice(3),0,null))}};gj.l=function(n,t,i){return n!=null&&(n.A&512||Zd===n.Eg)?n.ua(null,t,i):n!=null?Mc(n,t,i):ng([t,i])};gj.j=function(n,t,i,s){for(;;)if(n=gj.l(n,t,i),l(s))t=z(s),i=Ke(s),s=C(C(s));else return n};gj.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);return i=z(s),s=C(s),this.j(t,n,i,s)};gj.v=3;var wl=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};wl.g=function(n){return n};wl.h=function(n,t){return n==null?null:Qc(n,t)};wl.j=function(n,t,i){for(;;){if(n==null)return null;if(n=wl.h(n,t),l(i))t=z(i),i=C(i);else return n}};wl.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};wl.v=2;g=Re.prototype;g.Y=function(){return this.D};g.Z=function(n,t){return new Re(this.R,t)};g.Dg=Zd;g.call=function(n){switch(arguments.length-1){case 0:return this.G();case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.O(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.Ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Wa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.mb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.ab(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);case 11:return this.bb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.cb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.eb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13]);case 14:return this.fb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.gb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.hb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.ib(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.jb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.kb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.lb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.af(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.G=function(){return this.R.G?this.R.G():this.R.call(null)};g.g=function(n){return this.R.g?this.R.g(n):this.R.call(null,n)};g.h=function(n,t){return this.R.h?this.R.h(n,t):this.R.call(null,n,t)};g.l=function(n,t,i){return this.R.l?this.R.l(n,t,i):this.R.call(null,n,t,i)};g.K=function(n,t,i,s){return this.R.K?this.R.K(n,t,i,s):this.R.call(null,n,t,i,s)};g.O=function(n,t,i,s,o){return this.R.O?this.R.O(n,t,i,s,o):this.R.call(null,n,t,i,s,o)};g.Ka=function(n,t,i,s,o,f){return this.R.Ka?this.R.Ka(n,t,i,s,o,f):this.R.call(null,n,t,i,s,o,f)};g.Wa=function(n,t,i,s,o,f,d){return this.R.Wa?this.R.Wa(n,t,i,s,o,f,d):this.R.call(null,n,t,i,s,o,f,d)};g.Ra=function(n,t,i,s,o,f,d,p){return this.R.Ra?this.R.Ra(n,t,i,s,o,f,d,p):this.R.call(null,n,t,i,s,o,f,d,p)};g.mb=function(n,t,i,s,o,f,d,p,v){return this.R.mb?this.R.mb(n,t,i,s,o,f,d,p,v):this.R.call(null,n,t,i,s,o,f,d,p,v)};g.ab=function(n,t,i,s,o,f,d,p,v,_){return this.R.ab?this.R.ab(n,t,i,s,o,f,d,p,v,_):this.R.call(null,n,t,i,s,o,f,d,p,v,_)};g.bb=function(n,t,i,s,o,f,d,p,v,_,k){return this.R.bb?this.R.bb(n,t,i,s,o,f,d,p,v,_,k):this.R.call(null,n,t,i,s,o,f,d,p,v,_,k)};g.cb=function(n,t,i,s,o,f,d,p,v,_,k,P){return this.R.cb?this.R.cb(n,t,i,s,o,f,d,p,v,_,k,P):this.R.call(null,n,t,i,s,o,f,d,p,v,_,k,P)};g.eb=function(n,t,i,s,o,f,d,p,v,_,k,P,L){return this.R.eb?this.R.eb(n,t,i,s,o,f,d,p,v,_,k,P,L):this.R.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L)};g.fb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G){return this.R.fb?this.R.fb(n,t,i,s,o,f,d,p,v,_,k,P,L,G):this.R.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G)};g.gb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z){return this.R.gb?this.R.gb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z):this.R.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z)};g.hb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W){return this.R.hb?this.R.hb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W):this.R.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W)};g.ib=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j){return this.R.ib?this.R.ib(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j):this.R.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j)};g.jb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H){return this.R.jb?this.R.jb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H):this.R.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H)};g.kb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me){return this.R.kb?this.R.kb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me):this.R.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me)};g.lb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e){return this.R.lb?this.R.lb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e):this.R.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e)};g.af=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De){return Kg.Lg?Kg.Lg(this.R,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De):Kg.call(null,this.R,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De)};var ot=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};ot.g=function(n){return n};ot.h=function(n,t){return n==null?null:Uc(n,t)};ot.j=function(n,t,i){for(;;){if(n==null)return null;if(n=ot.h(n,t),l(i))t=z(i),i=C(i);else return n}};ot.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};ot.v=2;var kf={},pQ=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};pQ.g=function(n){return pQ.h(mf,n)};pQ.h=function(n,t){if(w(t)){var i=pf.g?pf.g(t):pf.call(null,t);return gb(i,of(n)),Se(w(i),Te(t))}return ge};pQ.v=2;var KL=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};KL.h=function(n,t){return KL.l(n,mf,t)};KL.l=function(n,t,i){return pQ.h(function(s,o){s=n.g?n.g(s):n.call(null,s),o=n.g?n.g(o):n.call(null,o);var f=of(t);return f.h?f.h(s,o):f.call(null,s,o)},i)};KL.v=3;var gK=function n(t){switch(arguments.length){case 0:return n.G();case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};gK.G=function(){return 0};gK.g=function(n){return n};gK.h=function(n,t){return n+t};gK.j=function(n,t,i){return nc(gK,n+t,i)};gK.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};gK.v=2;var hK=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};hK.g=function(n){return-n};hK.h=function(n,t){return n-t};hK.j=function(n,t,i){return nc(hK,n-t,i)};hK.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};hK.v=2;var iK=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};iK.g=function(){return!0};iK.h=function(n,t){return n>t};iK.j=function(n,t,i){for(;;)if(n>t)if(C(i))n=t,t=z(i),i=C(i);else return t>z(i);else return!1};iK.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};iK.v=2;var cw=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};cw.g=function(n){return n};cw.h=function(n,t){return n>t?n:t};cw.j=function(n,t,i){return nc(cw,n>t?n:t,i)};cw.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};cw.v=2;var m=function n(t){switch(arguments.length){case 0:return n.G();case 1:return n.g(arguments[0]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],new u(i.slice(1),0,null))}};m.G=function(){return""};m.g=function(n){return n==null?"":[n].join("")};m.j=function(n,t){for(n=new Pb(m.g(n));;)if(l(t))n=n.append(m.g(z(t))),t=C(t);else return n.toString()};m.B=function(n){var t=z(n);return n=C(n),this.j(t,n)};m.v=1;g=Mf.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,this.count)}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.Ea=function(){return new Mf(this.D,this.first,this.Tb,this.count,this.C)};g.xa=function(){return this.count===1?null:this.Tb};g.ba=function(){return this.count};g.jc=function(){return this.first};g.kc=function(){return this.Ba(null)};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return bd(ge,this.D)};g.ya=function(n,t){return tf(t,this)};g.za=function(n,t,i){return wf(t,i,this)};g.va=function(){return this.first};g.Ba=function(){return this.count===1?ge:this.Tb};g.aa=function(){return this};g.Z=function(n,t){return t===this.D?this:new Mf(t,this.first,this.Tb,this.count,this.C)};g.ga=function(n,t){return new Mf(this.D,t,this,this.count+1,null)};Mf.prototype[ee]=function(){return je(this)};g=Of.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.Ea=function(){return new Of(this.D)};g.xa=function(){return null};g.ba=function(){return 0};g.jc=function(){return null};g.kc=function(){throw Error("Can't pop empty list")};g.X=function(){return eK};g.M=function(n,t){return Nf(t)||Ye(t)?w(t)==null:!1};g.ka=function(){return this};g.ya=function(n,t){return tf(t,this)};g.za=function(n,t,i){return wf(t,i,this)};g.va=function(){return null};g.Ba=function(){return ge};g.aa=function(){return null};g.Z=function(n,t){return t===this.D?this:new Of(t)};g.ga=function(n,t){return new Mf(this.D,t,null,1,null)};var ge=new Of(null);Of.prototype[ee]=function(){return je(this)};var ux=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};ux.j=function(n){if(n instanceof u&&n.J===0)var t=n.o;else e:for(t=[];;)if(n!=null)t.push(Ec(n)),n=Hc(n);else break e;n=t.length;for(var i=ge;;)if(0<n){var s=n-1;i=Bc(i,t[n-1]),n=s}else return i};ux.v=0;ux.B=function(n){return this.j(w(n))};g=Sf.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.Ea=function(){return new Sf(this.D,this.first,this.Tb,this.C)};g.xa=function(){return this.Tb==null?null:w(this.Tb)};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.ya=function(n,t){return tf(t,this)};g.za=function(n,t,i){return wf(t,i,this)};g.va=function(){return this.first};g.Ba=function(){return this.Tb==null?ge:this.Tb};g.aa=function(){return this};g.Z=function(n,t){return t===this.D?this:new Sf(t,this.first,this.Tb,this.C)};g.ga=function(n,t){return new Sf(null,t,this,null)};Sf.prototype[ee]=function(){return je(this)};g=K.prototype;g.toString=function(){return[":",m.g(this.U)].join("")};g.da=function(n){return this.M(null,n)};g.M=function(n,t){return t instanceof K?this.U===t.U:!1};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return J.h(n,this)};g.h=function(n,t){return J.l(n,this,t)};g.X=function(){var n=this.Uc;return n??(this.Uc=n=sf(this)+2654435769|0)};g.rd=function(){return this.name};g.sd=function(){return this.Va};g.W=function(n,t){return qd(t,[":",m.g(this.U)].join(""))};var Nj=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};Nj.g=function(n){if(n instanceof K)return n;if(n instanceof r)return new K(Wf(n),qj.g?qj.g(n):qj.call(null,n),n.Za,null);if(E.h("/",n))return new K(null,n,n,null);if(typeof n=="string"){var t=n.split("/");return t.length===2?new K(t[0],t[1],n,null):new K(null,t[0],n,null)}return null};Nj.h=function(n,t){return n=n instanceof K||n instanceof r?qj.g?qj.g(n):qj.call(null,n):n,t=t instanceof K||t instanceof r?qj.g?qj.g(t):qj.call(null,t):t,new K(n,t,[l(n)?[m.g(n),"/"].join(""):null,m.g(t)].join(""),null)};Nj.v=2;g=Yf.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.xa=function(){return this.aa(null),this.ea==null?null:C(this.ea)};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return bd(ge,this.D)};g.li=function(){return gc(this.Cd)};g.ya=function(n,t){return tf(t,this)};g.za=function(n,t,i){return wf(t,i,this)};g.va=function(){return this.aa(null),this.ea==null?null:z(this.ea)};g.Ba=function(){return this.aa(null),this.ea!=null?he(this.ea):ge};g.aa=function(){if(Zf(this),this.ea==null)return null;for(var n=this.ea;;)if(n instanceof Yf)n=Zf(n);else return this.ea=n,w(this.ea)};g.Z=function(n,t){var i=this;return t===this.D?i:new Yf(t,function(){return i.aa(null)},null,this.C)};g.ga=function(n,t){return Tf(t,this)};Yf.prototype[ee]=function(){return je(this)};$f.prototype.add=function(n){return this.ha[this.end]=n,this.end+=1};$f.prototype.fa=function(){var n=new bg(this.ha,0,this.end);return this.ha=null,n};$f.prototype.ba=function(){return this.end};g=bg.prototype;g.ba=function(){return this.end-this.Qa};g.S=function(n,t){return this.o[this.Qa+t]};g.Ca=function(n,t,i){return 0<=t&&t<this.end-this.Qa?this.o[this.Qa+t]:i};g.Ze=function(){if(this.Qa===this.end)throw Error("-drop-first of empty chunk");return new bg(this.o,this.Qa+1,this.end)};g.ya=function(n,t){return ze(this.o,t,this.o[this.Qa],this.Qa+1)};g.za=function(n,t,i){return ze(this.o,t,i,this.Qa)};g=cg.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.xa=function(){return 1<xc(this.fa)?new cg(Ed(this.fa),this.Ob,null,null):this.Ob==null?null:id(this.Ob)};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.va=function(){return Oe(this.fa,0)};g.Ba=function(){return 1<xc(this.fa)?new cg(Ed(this.fa),this.Ob,null,null):this.Ob==null?ge:this.Ob};g.aa=function(){return this};g.qd=function(){return this.fa};g.zc=function(){return this.Ob==null?ge:this.Ob};g.Z=function(n,t){return t===this.D?this:new cg(this.fa,this.Ob,t,this.C)};g.ga=function(n,t){return Tf(t,this)};g.ae=function(){return this.Ob==null?null:this.Ob};cg.prototype[ee]=function(){return je(this)};var jK=function n(t){if(t==null)return null;var i=C(t);return i==null?w(z(t)):Tf(z(t),n.g?n.g(i):n.call(null,i))},fh=function n(t){switch(arguments.length){case 0:return n.G();case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};fh.G=function(){return new Yf(null,function(){return null},null,null)};fh.g=function(n){return new Yf(null,function(){return n},null,null)};fh.h=function(n,t){return new Yf(null,function(){var i=w(n);return i?df(i)?dg(Fd(i),fh.h(Gd(i),t)):Tf(z(i),fh.h(he(i),t)):t},null,null)};fh.j=function(n,t,i){return function s(o,f){return new Yf(null,function(){var d=w(o);return d?df(d)?dg(Fd(d),s(Gd(d),f)):Tf(z(d),s(he(d),f)):l(f)?s(z(f),C(f)):null},null,null)}(fh.h(n,t),i)};fh.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};fh.v=2;var Kg=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);case 4:return n.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return n.O(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],new u(i.slice(5),0,null))}};Kg.h=function(n,t){if(n.B){var i=n.v,s=fg(i+1,t);return s<=i?hg(n,s,t):n.B(t)}return t=w(t),t==null?n.G?n.G():n.call(n):kg(n,Ec(t),ig(t))};Kg.l=function(n,t,i){if(n.B){t=Tf(t,i);var s=n.v;return i=fg(s,i)+1,i<=s?hg(n,i,t):n.B(t)}return kg(n,t,w(i))};Kg.K=function(n,t,i,s){return n.B?(t=Tf(t,Tf(i,s)),i=n.v,s=2+fg(i-1,s),s<=i?hg(n,s,t):n.B(t)):jg(n,t,i,w(s))};Kg.O=function(n,t,i,s,o){return n.B?(t=Tf(t,Tf(i,Tf(s,o))),i=n.v,o=3+fg(i-2,o),o<=i?hg(n,o,t):n.B(t)):lg(n,t,i,s,w(o))};Kg.j=function(n,t,i,s,o,f){return n.B?(f=jK(f),t=Tf(t,Tf(i,Tf(s,Tf(o,f)))),i=n.v,f=4+fg(i-3,f),f<=i?hg(n,f,t):n.B(t)):mg(n,t,i,s,o,jK(f))};Kg.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);i=z(s);var o=C(s);s=z(o);var f=C(o);return o=z(f),f=C(f),this.j(t,n,i,s,o,f)};Kg.v=5;var fj=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};fj.g=function(){return!1};fj.h=function(n,t){return!E.h(n,t)};fj.j=function(n,t,i){return gc(Kg.K(E,n,t,i))};fj.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};fj.v=2;g=qg.prototype;g.Z=function(n,t){return new qg(t)};g.Y=function(){return this.lh};g.na=function(){return!1};g.next=function(){return Error("No such element")};g.remove=function(){return Error("Unsupported operation")};sg.prototype.na=function(){return this.J<this.ea.length};sg.prototype.next=function(){var n=this.ea.charAt(this.J);return this.J+=1,n};sg.prototype.remove=function(){return Error("Unsupported operation")};tg.prototype.na=function(){return this.J<this.o.length};tg.prototype.next=function(){var n=this.o[this.J];return this.J+=1,n};tg.prototype.remove=function(){return Error("Unsupported operation")};var ug={},kK={};vg.prototype.na=function(){return this.kd===ug?(this.kd=kK,this.ub=w(this.ub)):this.kd===this.ub&&(this.ub=C(this.kd)),this.ub!=null};vg.prototype.next=function(){if(this.na())return this.kd=this.ub,z(this.ub);throw Error("No such element")};vg.prototype.remove=function(){return Error("Unsupported operation")};Bg.prototype.add=function(n){return this.Ie.push(n),this};Bg.prototype.remove=function(){return this.Ie.shift()};Bg.prototype.se=function(){return this.Ie.length===0};Bg.prototype.toString=function(){return["Many: ",m.g(this.Ie)].join("")};var Fg={};Cg.prototype.add=function(n){return this.F===Fg?(this.F=n,this):new Bg([this.F,n])};Cg.prototype.remove=function(){if(this.F===Fg)throw Error("Removing object from empty buffer");var n=this.F;return this.F=Fg,n};Cg.prototype.se=function(){return this.F===Fg};Cg.prototype.toString=function(){return["Single: ",m.g(this.F)].join("")};Dg.prototype.add=function(n){return new Cg(n)};Dg.prototype.remove=function(){throw Error("Removing object from empty buffer")};Dg.prototype.se=function(){return!0};Dg.prototype.toString=function(){return"Empty"};var Eg=new Dg,lK=function n(t){return new Yf(null,function(){if(t.na())for(var i=[],s=0;;){var o=t.na();if(l(l(o)?32>s:o))i[s]=t.next(),s+=1;else return dg(new bg(i,0,s),n.g?n.g(t):n.call(null,t))}else return null},null,null)};Gg.prototype.step=function(){if(this.ub!==Fg)return!0;for(;;)if(this.ub===Fg)if(this.buffer.se()){if(this.kf)return!1;if(this.Ef.na()){if(this.nh)var n=Kg.h(this.Wb,Tf(null,this.Ef.next()));else n=this.Ef.next(),n=this.Wb.h?this.Wb.h(null,n):this.Wb.call(null,null,n);se(n)&&(this.Wb.g?this.Wb.g(null):this.Wb.call(null,null),this.kf=!0)}else this.Wb.g?this.Wb.g(null):this.Wb.call(null,null),this.kf=!0}else this.ub=this.buffer.remove();else return!0};Gg.prototype.na=function(){return this.step()};Gg.prototype.next=function(){if(this.na()){var n=this.ub;return this.ub=Fg,n}throw Error("No such element")};Gg.prototype.remove=function(){return Error("Unsupported operation")};Gg.prototype[ee]=function(){return je(this)};var kn=function n(t){switch(arguments.length){case 0:return n.G();case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],new u(i.slice(3),0,null))}};kn.G=function(){return Df};kn.g=function(n){return n};kn.h=function(n,t){return function(){function i(v,_,k){return v=t.l?t.l(v,_,k):t.call(null,v,_,k),n.g?n.g(v):n.call(null,v)}function s(v,_){return v=t.h?t.h(v,_):t.call(null,v,_),n.g?n.g(v):n.call(null,v)}function o(v){return v=t.g?t.g(v):t.call(null,v),n.g?n.g(v):n.call(null,v)}function f(){var v=t.G?t.G():t.call(null);return n.g?n.g(v):n.call(null,v)}var d=null,p=function(){function v(k,P,L,G){var Z=null;if(3<arguments.length){Z=0;for(var W=Array(arguments.length-3);Z<W.length;)W[Z]=arguments[Z+3],++Z;Z=new u(W,0,null)}return _.call(this,k,P,L,Z)}function _(k,P,L,G){return k=Kg.O(t,k,P,L,G),n.g?n.g(k):n.call(null,k)}return v.v=3,v.B=function(k){var P=z(k);k=C(k);var L=z(k);k=C(k);var G=z(k);return k=he(k),_(P,L,G,k)},v.j=_,v}();return d=function(v,_,k,P){switch(arguments.length){case 0:return f.call(this);case 1:return o.call(this,v);case 2:return s.call(this,v,_);case 3:return i.call(this,v,_,k);default:var L=null;if(3<arguments.length){L=0;for(var G=Array(arguments.length-3);L<G.length;)G[L]=arguments[L+3],++L;L=new u(G,0,null)}return p.j(v,_,k,L)}},d.v=3,d.B=p.B,d.G=f,d.g=o,d.h=s,d.l=i,d.j=p.j,d}()};kn.l=function(n,t,i){return function(){function s(_,k,P){return _=i.l?i.l(_,k,P):i.call(null,_,k,P),_=t.g?t.g(_):t.call(null,_),n.g?n.g(_):n.call(null,_)}function o(_,k){return _=i.h?i.h(_,k):i.call(null,_,k),_=t.g?t.g(_):t.call(null,_),n.g?n.g(_):n.call(null,_)}function f(_){return _=i.g?i.g(_):i.call(null,_),_=t.g?t.g(_):t.call(null,_),n.g?n.g(_):n.call(null,_)}function d(){var _=i.G?i.G():i.call(null);return _=t.g?t.g(_):t.call(null,_),n.g?n.g(_):n.call(null,_)}var p=null,v=function(){function _(P,L,G,Z){var W=null;if(3<arguments.length){W=0;for(var j=Array(arguments.length-3);W<j.length;)j[W]=arguments[W+3],++W;W=new u(j,0,null)}return k.call(this,P,L,G,W)}function k(P,L,G,Z){return P=Kg.O(i,P,L,G,Z),P=t.g?t.g(P):t.call(null,P),n.g?n.g(P):n.call(null,P)}return _.v=3,_.B=function(P){var L=z(P);P=C(P);var G=z(P);P=C(P);var Z=z(P);return P=he(P),k(L,G,Z,P)},_.j=k,_}();return p=function(_,k,P,L){switch(arguments.length){case 0:return d.call(this);case 1:return f.call(this,_);case 2:return o.call(this,_,k);case 3:return s.call(this,_,k,P);default:var G=null;if(3<arguments.length){G=0;for(var Z=Array(arguments.length-3);G<Z.length;)Z[G]=arguments[G+3],++G;G=new u(Z,0,null)}return v.j(_,k,P,G)}},p.v=3,p.B=v.B,p.G=d,p.g=f,p.h=o,p.l=s,p.j=v.j,p}()};kn.j=function(n,t,i,s){var o=Rf(Tf(n,Tf(t,Tf(i,s))));return function(){function f(p){var v=null;if(0<arguments.length){v=0;for(var _=Array(arguments.length-0);v<_.length;)_[v]=arguments[v+0],++v;v=new u(_,0,null)}return d.call(this,v)}function d(p){p=Kg.h(z(o),p);for(var v=C(o);;)if(v){var _=z(v);p=_.g?_.g(p):_.call(null,p),v=C(v)}else return p}return f.v=0,f.B=function(p){return p=w(p),d(p)},f.j=d,f}()};kn.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);return i=z(s),s=C(s),this.j(t,n,i,s)};kn.v=3;var Pk=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);case 4:return n.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],arguments[3],new u(i.slice(4),0,null))}};Pk.g=function(n){return n};Pk.h=function(n,t){return function(){function i(v,_,k){return n.K?n.K(t,v,_,k):n.call(null,t,v,_,k)}function s(v,_){return n.l?n.l(t,v,_):n.call(null,t,v,_)}function o(v){return n.h?n.h(t,v):n.call(null,t,v)}function f(){return n.g?n.g(t):n.call(null,t)}var d=null,p=function(){function v(k,P,L,G){var Z=null;if(3<arguments.length){Z=0;for(var W=Array(arguments.length-3);Z<W.length;)W[Z]=arguments[Z+3],++Z;Z=new u(W,0,null)}return _.call(this,k,P,L,Z)}function _(k,P,L,G){return Kg.j(n,t,k,P,L,F([G]))}return v.v=3,v.B=function(k){var P=z(k);k=C(k);var L=z(k);k=C(k);var G=z(k);return k=he(k),_(P,L,G,k)},v.j=_,v}();return d=function(v,_,k,P){switch(arguments.length){case 0:return f.call(this);case 1:return o.call(this,v);case 2:return s.call(this,v,_);case 3:return i.call(this,v,_,k);default:var L=null;if(3<arguments.length){L=0;for(var G=Array(arguments.length-3);L<G.length;)G[L]=arguments[L+3],++L;L=new u(G,0,null)}return p.j(v,_,k,L)}},d.v=3,d.B=p.B,d.G=f,d.g=o,d.h=s,d.l=i,d.j=p.j,d}()};Pk.l=function(n,t,i){return function(){function s(_,k,P){return n.O?n.O(t,i,_,k,P):n.call(null,t,i,_,k,P)}function o(_,k){return n.K?n.K(t,i,_,k):n.call(null,t,i,_,k)}function f(_){return n.l?n.l(t,i,_):n.call(null,t,i,_)}function d(){return n.h?n.h(t,i):n.call(null,t,i)}var p=null,v=function(){function _(P,L,G,Z){var W=null;if(3<arguments.length){W=0;for(var j=Array(arguments.length-3);W<j.length;)j[W]=arguments[W+3],++W;W=new u(j,0,null)}return k.call(this,P,L,G,W)}function k(P,L,G,Z){return Kg.j(n,t,i,P,L,F([G,Z]))}return _.v=3,_.B=function(P){var L=z(P);P=C(P);var G=z(P);P=C(P);var Z=z(P);return P=he(P),k(L,G,Z,P)},_.j=k,_}();return p=function(_,k,P,L){switch(arguments.length){case 0:return d.call(this);case 1:return f.call(this,_);case 2:return o.call(this,_,k);case 3:return s.call(this,_,k,P);default:var G=null;if(3<arguments.length){G=0;for(var Z=Array(arguments.length-3);G<Z.length;)Z[G]=arguments[G+3],++G;G=new u(Z,0,null)}return v.j(_,k,P,G)}},p.v=3,p.B=v.B,p.G=d,p.g=f,p.h=o,p.l=s,p.j=v.j,p}()};Pk.K=function(n,t,i,s){return function(){function o(k,P,L){return n.Ka?n.Ka(t,i,s,k,P,L):n.call(null,t,i,s,k,P,L)}function f(k,P){return n.O?n.O(t,i,s,k,P):n.call(null,t,i,s,k,P)}function d(k){return n.K?n.K(t,i,s,k):n.call(null,t,i,s,k)}function p(){return n.l?n.l(t,i,s):n.call(null,t,i,s)}var v=null,_=function(){function k(L,G,Z,W){var j=null;if(3<arguments.length){j=0;for(var H=Array(arguments.length-3);j<H.length;)H[j]=arguments[j+3],++j;j=new u(H,0,null)}return P.call(this,L,G,Z,j)}function P(L,G,Z,W){return Kg.j(n,t,i,s,L,F([G,Z,W]))}return k.v=3,k.B=function(L){var G=z(L);L=C(L);var Z=z(L);L=C(L);var W=z(L);return L=he(L),P(G,Z,W,L)},k.j=P,k}();return v=function(k,P,L,G){switch(arguments.length){case 0:return p.call(this);case 1:return d.call(this,k);case 2:return f.call(this,k,P);case 3:return o.call(this,k,P,L);default:var Z=null;if(3<arguments.length){Z=0;for(var W=Array(arguments.length-3);Z<W.length;)W[Z]=arguments[Z+3],++Z;Z=new u(W,0,null)}return _.j(k,P,L,Z)}},v.v=3,v.B=_.B,v.G=p,v.g=d,v.h=f,v.l=o,v.j=_.j,v}()};Pk.j=function(n,t,i,s,o){return function(){function f(p){var v=null;if(0<arguments.length){v=0;for(var _=Array(arguments.length-0);v<_.length;)_[v]=arguments[v+0],++v;v=new u(_,0,null)}return d.call(this,v)}function d(p){return Kg.O(n,t,i,s,fh.h(o,p))}return f.v=0,f.B=function(p){return p=w(p),d(p)},f.j=d,f}()};Pk.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);i=z(s);var o=C(s);return s=z(o),o=C(o),this.j(t,n,i,s,o)};Pk.v=4;g=Sg.prototype;g.da=function(n){return this.M(null,n)};g.M=function(n,t){return this===t};g.pb=function(){return this.state};g.Y=function(){return this.D};g.fe=function(n,t){for(var i=w(this.Na),s=null,o=0,f=0;;)if(f<o){var d=s.S(null,f),p=I(d,0,null);d=I(d,1,null),d.K?d.K(p,this,n,t):d.call(null,p,this,n,t),f+=1}else if(i=w(i))df(i)?(s=Fd(i),i=Gd(i),p=s,o=D(s),s=p):(s=z(i),p=I(s,0,null),d=I(s,1,null),d.K?d.K(p,this,n,t):d.call(null,p,this,n,t),i=C(i),s=null,o=0),f=0;else break};g.vd=function(n,t,i){return this.Na=gj.l(this.Na,t,i),this};g.wd=function(n,t){return this.Na=wl.h(this.Na,t)};g.X=function(){return fa(this)};var dk=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);case 4:return n.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],arguments[3],new u(i.slice(4),0,null))}};dk.h=function(n,t){if(n instanceof Sg){var i=n.state;t=t.g?t.g(i):t.call(null,i),n=N(n,t)}else n=cK(n,t);return n};dk.l=function(n,t,i){if(n instanceof Sg){var s=n.state;t=t.h?t.h(s,i):t.call(null,s,i),n=N(n,t)}else n=cK(n,t,i);return n};dk.K=function(n,t,i,s){if(n instanceof Sg){var o=n.state;t=t.l?t.l(o,i,s):t.call(null,o,i,s),n=N(n,t)}else n=cK(n,t,i,s);return n};dk.j=function(n,t,i,s,o){return n instanceof Sg?N(n,Kg.O(t,n.state,i,s,o)):cK(n,t,i,s,o)};dk.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);i=z(s);var o=C(s);return s=z(o),o=C(o),this.j(t,n,i,s,o)};dk.v=4;var O=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);case 4:return n.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],arguments[3],new u(i.slice(4),0,null))}};O.g=function(n){return function(t){return function(){function i(p,v){return v=n.g?n.g(v):n.call(null,v),t.h?t.h(p,v):t.call(null,p,v)}function s(p){return t.g?t.g(p):t.call(null,p)}function o(){return t.G?t.G():t.call(null)}var f=null,d=function(){function p(_,k,P){var L=null;if(2<arguments.length){L=0;for(var G=Array(arguments.length-2);L<G.length;)G[L]=arguments[L+2],++L;L=new u(G,0,null)}return v.call(this,_,k,L)}function v(_,k,P){return k=Kg.l(n,k,P),t.h?t.h(_,k):t.call(null,_,k)}return p.v=2,p.B=function(_){var k=z(_);_=C(_);var P=z(_);return _=he(_),v(k,P,_)},p.j=v,p}();return f=function(p,v,_){switch(arguments.length){case 0:return o.call(this);case 1:return s.call(this,p);case 2:return i.call(this,p,v);default:var k=null;if(2<arguments.length){k=0;for(var P=Array(arguments.length-2);k<P.length;)P[k]=arguments[k+2],++k;k=new u(P,0,null)}return d.j(p,v,k)}},f.v=2,f.B=d.B,f.G=o,f.g=s,f.h=i,f.j=d.j,f}()}};O.h=function(n,t){return new Yf(null,function(){var i=w(t);if(i){if(df(i)){for(var s=Fd(i),o=D(s),f=ag(o),d=0;d<o;)eg(f,function(){var p=Oe(s,d);return n.g?n.g(p):n.call(null,p)}()),d+=1;return dg(f.fa(),O.h(n,Gd(i)))}return Tf(function(){var p=z(i);return n.g?n.g(p):n.call(null,p)}(),O.h(n,he(i)))}return null},null,null)};O.l=function(n,t,i){return new Yf(null,function(){var s=w(t),o=w(i);if(s&&o){var f=z(s),d=z(o);f=n.h?n.h(f,d):n.call(null,f,d),s=Tf(f,O.l(n,he(s),he(o)))}else s=null;return s},null,null)};O.K=function(n,t,i,s){return new Yf(null,function(){var o=w(t),f=w(i),d=w(s);if(o&&f&&d){var p=z(o),v=z(f),_=z(d);p=n.l?n.l(p,v,_):n.call(null,p,v,_),o=Tf(p,O.K(n,he(o),he(f),he(d)))}else o=null;return o},null,null)};O.j=function(n,t,i,s,o){return O.h(function(f){return Kg.h(n,f)},function f(d){return new Yf(null,function(){var p=O.h(w,d);return Ig(Df,p)?Tf(O.h(z,p),f(O.h(he,p))):null},null,null)}(Qf.j(o,s,F([i,t]))))};O.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);i=z(s);var o=C(s);return s=z(o),o=C(o),this.j(t,n,i,s,o)};O.v=4;g=$g.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,this.count)}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.xa=function(){return this.next==null?1<this.count?this.next=new $g(null,this.count-1,this.F,null,null):this.count===-1?this:null:this.next};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.li=function(){return!1};g.ya=function(n,t){if(this.count===-1)for(var i=t.h?t.h(this.F,this.F):t.call(null,this.F,this.F);;){if(se(i))return q(i);i=t.h?t.h(i,this.F):t.call(null,i,this.F)}else for(n=1,i=this.F;;)if(n<this.count){if(i=t.h?t.h(i,this.F):t.call(null,i,this.F),se(i))return q(i);n+=1}else return i};g.za=function(n,t,i){if(this.count===-1)for(i=t.h?t.h(i,this.F):t.call(null,i,this.F);;){if(se(i))return q(i);i=t.h?t.h(i,this.F):t.call(null,i,this.F)}else for(n=0;;)if(n<this.count){if(i=t.h?t.h(i,this.F):t.call(null,i,this.F),se(i))return q(i);n+=1}else return i};g.va=function(){return this.F};g.Ba=function(){return this.next==null?1<this.count?this.next=new $g(null,this.count-1,this.F,null,null):this.count===-1?this:ge:this.next};g.aa=function(){return this};g.Z=function(n,t){return t===this.D?this:new $g(t,this.count,this.F,this.next,null)};g.ga=function(n,t){return Tf(t,this)};var mK={};g=ch.prototype;g.toString=function(){return Pd(this)};g.Y=function(){return this.D};g.xa=function(){return this.Ba(null)};g.ka=function(){return ge};g.li=function(){return this.seed!==mK};g.ya=function(n,t){n=this.va(null);var i=this.f.g?this.f.g(n):this.f.call(null,n);for(n=t.h?t.h(n,i):t.call(null,n,i);;){if(se(n))return q(n);i=this.f.g?this.f.g(i):this.f.call(null,i),n=t.h?t.h(n,i):t.call(null,n,i)}};g.za=function(n,t,i){for(n=this.va(null),i=t.h?t.h(i,n):t.call(null,i,n);;){if(se(i))return q(i);n=this.f.g?this.f.g(n):this.f.call(null,n),i=t.h?t.h(i,n):t.call(null,i,n)}};g.va=function(){return mK===this.seed&&(this.seed=this.f.g?this.f.g(this.zf):this.f.call(null,this.zf)),this.seed};g.Ba=function(){return this.next==null&&(this.next=new ch(null,this.f,this.va(null),mK,null)),this.next};g.aa=function(){return this};g.Z=function(n,t){return t===this.D?this:new ch(t,this.f,this.zf,this.seed,this.next)};g.ga=function(n,t){return Tf(t,this)};var dh=function n(t){switch(arguments.length){case 0:return n.G();case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};dh.G=function(){return ge};dh.g=function(n){return new Yf(null,function(){return n},null,null)};dh.h=function(n,t){return new Yf(null,function(){var i=w(n),s=w(t);return i&&s?Tf(z(i),Tf(z(s),dh.h(he(i),he(s)))):null},null,null)};dh.j=function(n,t,i){return new Yf(null,function(){var s=O.h(w,Qf.j(i,t,F([n])));return Ig(Df,s)?fh.h(O.h(z,s),Kg.h(dh,O.h(he,s))):null},null,null)};dh.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};dh.v=2;var jh=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};jh.g=function(n){return function(t){return function(){function i(d,p){return l(n.g?n.g(p):n.call(null,p))?t.h?t.h(d,p):t.call(null,d,p):d}function s(d){return t.g?t.g(d):t.call(null,d)}function o(){return t.G?t.G():t.call(null)}var f=null;return f=function(d,p){switch(arguments.length){case 0:return o.call(this);case 1:return s.call(this,d);case 2:return i.call(this,d,p)}throw Error("Invalid arity: "+arguments.length)},f.G=o,f.g=s,f.h=i,f}()}};jh.h=function(n,t){return new Yf(null,function(){var i=w(t);if(i){if(df(i)){for(var s=Fd(i),o=D(s),f=ag(o),d=0;d<o;){var p=Oe(s,d);p=n.g?n.g(p):n.call(null,p),l(p)&&(p=Oe(s,d),f.add(p)),d+=1}return dg(f.fa(),jh.h(n,Gd(i)))}return s=z(i),i=he(i),l(n.g?n.g(s):n.call(null,s))?Tf(s,jh.h(n,i)):jh.h(n,i)}return null},null,null)};jh.v=2;var ul=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};ul.g=function(n){return jh.g(Lg(n))};ul.h=function(n,t){return jh.h(Lg(n),t)};ul.v=2;var Ng=function n(t){switch(arguments.length){case 0:return n.G();case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};Ng.G=function(){return lh};Ng.g=function(n){return n};Ng.h=function(n,t){return n!=null?n!=null&&(n.N&4||Zd===n.Gg)?bd(yd(nc(xd,wd(n),t)),Te(n)):nc(Bc,n,t):nc(Qf,n,t)};Ng.l=function(n,t,i){if(n!=null&&(n.N&4||Zd===n.Gg)){var s=Te(n);return Ff(t,function(){function o(d){return bd(yd(d),s)}var f=null;return f=function(d,p){switch(arguments.length){case 1:return o.call(this,d);case 2:return xd(d,p)}throw Error("Invalid arity: "+arguments.length)},f.g=o,f.h=function(d,p){return xd(d,p)},f}(),wd(n),i)}return Ff(t,Qf,n,i)};Ng.v=3;var GG=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);case 4:return n.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],arguments[3],new u(i.slice(4),0,null))}};GG.h=function(n,t){return yd(nc(function(i,s){return s=n.g?n.g(s):n.call(null,s),xd(i,s)},wd(lh),t))};GG.l=function(n,t,i){return Ng.h(lh,O.l(n,t,i))};GG.K=function(n,t,i,s){return Ng.h(lh,O.K(n,t,i,s))};GG.j=function(n,t,i,s,o){return Ng.h(lh,Kg.j(O,n,t,i,s,F([o])))};GG.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);i=z(s);var o=C(s);return s=z(o),o=C(o),this.j(t,n,i,s,o)};GG.v=4;var Bn=function n(t,i,s){var o=w(i);i=z(o);var f=C(o);if(f){o=gj.l;var d=J.h(t,i);s=n.l?n.l(d,f,s):n.call(null,d,f,s),t=o.call(gj,t,i,s)}else t=gj.l(t,i,s);return t},nK=function n(t){switch(arguments.length){case 3:return n.l(arguments[0],arguments[1],arguments[2]);case 4:return n.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return n.O(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return n.Ka(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],new u(i.slice(6),0,null))}};nK.l=function(n,t,i){var s=w(t);if(t=z(s),s=C(s))n=gj.l(n,t,nK.l(J.h(n,t),s,i));else{s=gj.l;var o=J.h(n,t);i=i.g?i.g(o):i.call(null,o),n=s.call(gj,n,t,i)}return n};nK.K=function(n,t,i,s){var o=w(t);if(t=z(o),o=C(o))n=gj.l(n,t,nK.K(J.h(n,t),o,i,s));else{o=gj.l;var f=J.h(n,t);i=i.h?i.h(f,s):i.call(null,f,s),n=o.call(gj,n,t,i)}return n};nK.O=function(n,t,i,s,o){var f=w(t);if(t=z(f),f=C(f))n=gj.l(n,t,nK.O(J.h(n,t),f,i,s,o));else{f=gj.l;var d=J.h(n,t);i=i.l?i.l(d,s,o):i.call(null,d,s,o),n=f.call(gj,n,t,i)}return n};nK.Ka=function(n,t,i,s,o,f){var d=w(t);if(t=z(d),d=C(d))n=gj.l(n,t,nK.Ka(J.h(n,t),d,i,s,o,f));else{d=gj.l;var p=J.h(n,t);i=i.K?i.K(p,s,o,f):i.call(null,p,s,o,f),n=d.call(gj,n,t,i)}return n};nK.j=function(n,t,i,s,o,f,d){var p=w(t);return t=z(p),(p=C(p))?gj.l(n,t,Kg.j(nK,J.h(n,t),p,i,s,F([o,f,d]))):gj.l(n,t,Kg.j(i,J.h(n,t),s,o,f,F([d])))};nK.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);i=z(s);var o=C(s);s=z(o);var f=C(o);o=z(f);var d=C(f);return f=z(d),d=C(d),this.j(t,n,i,s,o,f,d)};nK.v=6;var ov=function n(t){switch(arguments.length){case 3:return n.l(arguments[0],arguments[1],arguments[2]);case 4:return n.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return n.O(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return n.Ka(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],new u(i.slice(6),0,null))}};ov.l=function(n,t,i){var s=gj.l,o=J.h(n,t);return i=i.g?i.g(o):i.call(null,o),s.call(gj,n,t,i)};ov.K=function(n,t,i,s){var o=gj.l,f=J.h(n,t);return i=i.h?i.h(f,s):i.call(null,f,s),o.call(gj,n,t,i)};ov.O=function(n,t,i,s,o){var f=gj.l,d=J.h(n,t);return i=i.l?i.l(d,s,o):i.call(null,d,s,o),f.call(gj,n,t,i)};ov.Ka=function(n,t,i,s,o,f){var d=gj.l,p=J.h(n,t);return i=i.K?i.K(p,s,o,f):i.call(null,p,s,o,f),d.call(gj,n,t,i)};ov.j=function(n,t,i,s,o,f,d){return gj.l(n,t,Kg.j(i,J.h(n,t),s,o,f,F([d])))};ov.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);i=z(s);var o=C(s);s=z(o);var f=C(o);o=z(f);var d=C(f);return f=z(d),d=C(d),this.j(t,n,i,s,o,f,d)};ov.v=6;var oK=function n(t,i,s,o){var f=sh(s),d=t.H-1>>>i&31;return i===5?f.o[d]=o:(s=s.o[d],s!=null?(i-=5,t=n.K?n.K(t,i,s,o):n.call(null,t,i,s,o)):t=uh(null,i-5,o),f.o[d]=t),f},pK=function n(t,i,s,o,f){var d=sh(s);if(i===0)d.o[o&31]=f;else{var p=o>>>i&31;i-=5,s=s.o[p],t=n.O?n.O(t,i,s,o,f):n.call(null,t,i,s,o,f),d.o[p]=t}return d},qK=function n(t,i,s){var o=t.H-2>>>i&31;if(5<i){i-=5;var f=s.o[o];return t=n.l?n.l(t,i,f):n.call(null,t,i,f),t==null&&o===0?null:(s=sh(s),s.o[o]=t,s)}return o===0?null:(s=sh(s),s.o[o]=null,s)};yh.prototype.na=function(){return this.J<this.end};yh.prototype.next=function(){this.J-this.Ud===32&&(this.o=wh(this.Ha,this.J),this.Ud+=32);var n=this.o[this.J&31];return this.J+=1,n};g=R.prototype;g.hc=function(n,t){return 0<=t&&t<this.H?new ci(t,wh(this,t)[t&31],null):null};g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){return typeof t=="number"?this.Ca(null,t,i):i};g.qb=function(n,t,i){n=0;for(var s=i;;)if(n<this.H){var o=wh(this,n);i=o.length;e:for(var f=0;;)if(f<i){var d=f+n,p=o[f];if(s=t.l?t.l(s,d,p):t.call(null,s,d,p),se(s)){o=s;break e}f+=1}else{o=s;break e}if(se(o))return q(o);n+=i,s=o}else return s};g.Ye=Zd;g.S=function(n,t){return xh(this,t)[t&31]};g.Ca=function(n,t,i){return 0<=t&&t<this.H?wh(this,t)[t&31]:i};g.Ib=function(n,t,i){if(0<=t&&t<this.H)return th(this)<=t?(n=mc(this.ma),n[t&31]=i,new R(this.D,this.H,this.shift,this.root,n,null)):new R(this.D,this.H,this.shift,pK(this,this.shift,this.root,t,i),this.ma,null);if(t===this.H)return this.ga(null,i);throw Error(["Index ",m.g(t)," out of bounds  [0,",m.g(this.H),"]"].join(""))};g.Fa=function(){return zh(this,0,this.H)};g.Y=function(){return this.D};g.Ea=function(){return new R(this.D,this.H,this.shift,this.root,this.ma,this.C)};g.ba=function(){return this.H};g.jc=function(){return 0<this.H?this.S(null,this.H-1):null};g.kc=function(){if(this.H===0)throw Error("Can't pop empty vector");if(this.H===1)return bd(lh,this.D);if(1<this.H-th(this))return new R(this.D,this.H-1,this.shift,this.root,this.ma.slice(0,-1),null);var n=wh(this,this.H-2),t=qK(this,this.shift,this.root);t=t??S;var i=this.H-1;return 5<this.shift&&t.o[1]==null?new R(this.D,i,this.shift-5,t.o[0],n,null):new R(this.D,i,this.shift,t,n,null)};g.ic=function(){return 0<this.H?new Je(this,this.H-1,null):null};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){if(t instanceof R)if(this.H===D(t))for(n=this.Fa(null),t=t.Fa(null);;)if(n.na()){var i=n.next(),s=t.next();if(!E.h(i,s))return!1}else return!0;else return!1;else return Lf(this,t)};g.Yc=function(){return new Qh(this.H,this.shift,Oh.g?Oh.g(this.root):Oh.call(null,this.root),Ph.g?Ph.g(this.ma):Ph.call(null,this.ma))};g.ka=function(){return bd(lh,this.D)};g.ya=function(n,t){return Bh(this,t,0,this.H)};g.za=function(n,t,i){n=0;for(var s=i;;)if(n<this.H){var o=wh(this,n);i=o.length;e:for(var f=0;;)if(f<i){var d=o[f];if(s=t.h?t.h(s,d):t.call(null,s,d),se(s)){o=s;break e}f+=1}else{o=s;break e}if(se(o))return q(o);n+=i,s=o}else return s};g.ua=function(n,t,i){if(typeof t=="number")return this.Ib(null,t,i);throw Error("Vector's key for assoc must be a number.")};g.Ua=function(n,t){return jf(t)?0<=t&&t<this.H:!1};g.aa=function(){if(this.H===0)return null;if(32>=this.H)return new u(this.ma,0,null);e:for(var n=this.root,t=this.shift;;)if(0<t)t-=5,n=n.o[0];else{n=n.o;break e}return Ih?Ih(this,n,0,0):Kh.call(null,this,n,0,0)};g.Z=function(n,t){return t===this.D?this:new R(t,this.H,this.shift,this.root,this.ma,this.C)};g.ga=function(n,t){if(32>this.H-th(this)){n=this.ma.length;for(var i=Array(n+1),s=0;s<n;)i[s]=this.ma[s],s+=1;return i[n]=t,new R(this.D,this.H+1,this.shift,this.root,i,null)}return n=(i=this.H>>>5>1<<this.shift)?this.shift+5:this.shift,i?(i=rh(null),i.o[0]=this.root,s=uh(null,this.shift,new qh(null,this.ma)),i.o[1]=s):i=oK(this,this.shift,this.root,new qh(null,this.ma)),new R(this.D,this.H+1,n,i,[t],null)};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){if(typeof n=="number")return this.S(null,n);throw Error("Key must be integer")};var S=new qh(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),lh=new R(null,0,5,S,[],eK);R.prototype[ee]=function(){return je(this)};var dm=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};dm.j=function(n){return n instanceof u&&n.J===0?Ch(n.o,!dc(n.o)):Gh(n)};dm.v=0;dm.B=function(n){return this.j(w(n))};g=Hh.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.xa=function(){if(this.Qa+1<this.node.length){var n=this.tb,t=this.node,i=this.J,s=this.Qa+1;return n=Ih?Ih(n,t,i,s):Kh.call(null,n,t,i,s),n??null}return this.ae()};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.ya=function(n,t){return Bh(this.tb,t,this.J+this.Qa,D(this.tb))};g.za=function(n,t,i){return Ah(this.tb,t,i,this.J+this.Qa,D(this.tb))};g.va=function(){return this.node[this.Qa]};g.Ba=function(){if(this.Qa+1<this.node.length){var n=this.tb,t=this.node,i=this.J,s=this.Qa+1;return n=Ih?Ih(n,t,i,s):Kh.call(null,n,t,i,s),n??ge}return this.zc(null)};g.aa=function(){return this};g.qd=function(){var n=this.node;return new bg(n,this.Qa,n.length)};g.zc=function(){var n=this.J+this.node.length;if(n<xc(this.tb)){var t=this.tb,i=wh(this.tb,n);return Ih?Ih(t,i,n,0):Kh.call(null,t,i,n,0)}return ge};g.Z=function(n,t){return t===this.D?this:Jh?Jh(this.tb,this.node,this.J,this.Qa,t):Kh.call(null,this.tb,this.node,this.J,this.Qa,t)};g.ga=function(n,t){return Tf(t,this)};g.ae=function(){var n=this.J+this.node.length;if(n<xc(this.tb)){var t=this.tb,i=wh(this.tb,n);return Ih?Ih(t,i,n,0):Kh.call(null,t,i,n,0)}return null};Hh.prototype[ee]=function(){return je(this)};g=Lh.prototype;g.hc=function(n,t){return 0>t?null:(n=this.start+t,n<this.end?new ci(t,$J(this.Ha,n),null):null)};g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){return typeof t=="number"?this.Ca(null,t,i):i};g.qb=function(n,t,i){n=this.start;for(var s=0;;)if(n<this.end){var o=s,f=Oe(this.Ha,n);if(i=t.l?t.l(i,o,f):t.call(null,i,o,f),se(i))return q(i);s+=1,n+=1}else return i};g.S=function(n,t){return 0>t||this.end<=this.start+t?vh(t,this.end-this.start):Oe(this.Ha,this.start+t)};g.Ca=function(n,t,i){return 0>t||this.end<=this.start+t?i:Oe(this.Ha,this.start+t,i)};g.Ib=function(n,t,i){if(n=this.start+t,0>t||this.end+1<=n)throw Error(["Index ",m.g(t)," out of bounds [0,",m.g(this.ba(null)),"]"].join(""));t=this.D,i=gj.l(this.Ha,n,i);var s=this.start,o=this.end;return n+=1,n=o>n?o:n,Mh.O?Mh.O(t,i,s,n,null):Mh.call(null,t,i,s,n,null)};g.Fa=function(){return this.Ha!=null&&Zd===this.Ha.Ye?zh(this.Ha,this.start,this.end):new vg(this)};g.Y=function(){return this.D};g.Ea=function(){return new Lh(this.D,this.Ha,this.start,this.end,this.C)};g.ba=function(){return this.end-this.start};g.jc=function(){return this.start===this.end?null:Oe(this.Ha,this.end-1)};g.kc=function(){if(this.start===this.end)throw Error("Can't pop empty vector");var n=this.D,t=this.Ha,i=this.start,s=this.end-1;return Mh.O?Mh.O(n,t,i,s,null):Mh.call(null,n,t,i,s,null)};g.ic=function(){return this.start!==this.end?new Je(this,this.end-this.start-1,null):null};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return bd(lh,this.D)};g.ya=function(n,t){return this.Ha!=null&&Zd===this.Ha.Ye?Bh(this.Ha,t,this.start,this.end):ve(this,t)};g.za=function(n,t,i){return this.Ha!=null&&Zd===this.Ha.Ye?Ah(this.Ha,t,i,this.start,this.end):we(this,t,i)};g.ua=function(n,t,i){if(typeof t=="number")return this.Ib(null,t,i);throw Error("Subvec's key for assoc must be a number.")};g.Ua=function(n,t){return jf(t)?0<=t&&t<this.end-this.start:!1};g.aa=function(){var n=this;return function t(i){return i===n.end?null:Tf(Oe(n.Ha,i),new Yf(null,function(){return t(i+1)},null,null))}(n.start)};g.Z=function(n,t){return t===this.D?this:Mh.O?Mh.O(t,this.Ha,this.start,this.end,this.C):Mh.call(null,t,this.Ha,this.start,this.end,this.C)};g.ga=function(n,t){n=this.D,t=Yc(this.Ha,this.end,t);var i=this.start,s=this.end+1;return Mh.O?Mh.O(n,t,i,s,null):Mh.call(null,n,t,i,s,null)};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.S(null,n)};g.h=function(n,t){return this.Ca(null,n,t)};Lh.prototype[ee]=function(){return je(this)};var Um=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};Um.h=function(n,t){return Um.l(n,t,D(n))};Um.l=function(n,t,i){return Mh(null,n,t|0,i|0,null)};Um.v=3;var rK=function n(t,i,s,o){s=Nh(t.root.qa,s);var f=t.H-1>>>i&31;if(i===5)t=o;else{var d=s.o[f];d!=null?(i-=5,t=n.K?n.K(t,i,d,o):n.call(null,t,i,d,o)):t=uh(t.root.qa,i-5,o)}return s.o[f]=t,s};g=Qh.prototype;g.ad=function(n,t){if(this.root.qa){if(32>this.H-th(this))this.ma[this.H&31]=t;else{n=new qh(this.root.qa,this.ma);var i=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];i[0]=t,this.ma=i,this.H>>>5>1<<this.shift?(t=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],i=this.shift+5,t[0]=this.root,t[1]=uh(this.root.qa,this.shift,n),this.root=new qh(this.root.qa,t),this.shift=i):this.root=rK(this,this.shift,this.root,n)}return this.H+=1,this}throw Error("conj! after persistent!")};g.ud=function(){if(this.root.qa){this.root.qa=null;var n=this.H-th(this),t=Array(n);return ef(this.ma,0,t,0,n),new R(null,this.H,this.shift,this.root,t,null)}throw Error("persistent! called twice")};g.$c=function(n,t,i){if(typeof t=="number")return Rh(this,t,i);throw Error("TransientVector's key for assoc! must be a number.")};g.ba=function(){if(this.root.qa)return this.H;throw Error("count after persistent!")};g.S=function(n,t){if(this.root.qa)return xh(this,t)[t&31];throw Error("nth after persistent!")};g.Ca=function(n,t,i){return 0<=t&&t<this.H?this.S(null,t):i};g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){if(this.root.qa)return typeof t=="number"?this.Ca(null,t,i):i;throw Error("lookup after persistent!")};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.oa(null,n)};g.h=function(n,t){return this.V(null,n,t)};Sh.prototype.na=function(){var n=this.cd!=null&&w(this.cd);return n||((n=this.Pd!=null)?this.Pd.na():n)};Sh.prototype.next=function(){if(this.cd!=null){var n=z(this.cd);return this.cd=C(this.cd),n}if(this.Pd!=null&&this.Pd.na())return this.Pd.next();throw Error("No such element")};Sh.prototype.remove=function(){return Error("Unsupported operation")};g=Th.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.xa=function(){var n=C(this.Ya);return n?new Th(this.D,n,this.ob,null):this.ob!=null?new Th(this.D,this.ob,null,null):null};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return bd(ge,this.D)};g.va=function(){return z(this.Ya)};g.Ba=function(){var n=C(this.Ya);return n?new Th(this.D,n,this.ob,null):this.ob==null?this.ka(null):new Th(this.D,this.ob,null,null)};g.aa=function(){return this};g.Z=function(n,t){return t===this.D?this:new Th(t,this.Ya,this.ob,this.C)};g.ga=function(n,t){return Tf(t,this)};Th.prototype[ee]=function(){return je(this)};g=Vh.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,this.count.g?this.count.g(this):this.count.call(null,this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Fa=function(){return new Sh(this.Ya,Nd(this.ob))};g.Y=function(){return this.D};g.Ea=function(){return new Vh(this.D,this.count,this.Ya,this.ob,this.C)};g.ba=function(){return this.count};g.jc=function(){return z(this.Ya)};g.kc=function(){if(l(this.Ya)){var n=C(this.Ya);return n?new Vh(this.D,this.count-1,n,this.ob,null):new Vh(this.D,this.count-1,w(this.ob),lh,null)}return this};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return bd(sK,this.D)};g.va=function(){return z(this.Ya)};g.Ba=function(){return he(w(this))};g.aa=function(){var n=w(this.ob),t=this.Ya;return l(l(t)?t:n)?new Th(null,this.Ya,w(n),null):null};g.Z=function(n,t){return t===this.D?this:new Vh(t,this.count,this.Ya,this.ob,this.C)};g.ga=function(n,t){return l(this.Ya)?(n=this.ob,t=new Vh(this.D,this.count+1,this.Ya,Qf.h(l(n)?n:lh,t),null)):t=new Vh(this.D,this.count+1,Qf.h(this.Ya,t),lh,null),t};var sK=new Vh(null,0,null,lh,eK);Vh.prototype[ee]=function(){return je(this)};Wh.prototype.da=function(n){return this.M(null,n)};Wh.prototype.M=function(){return!1};var Xh=new Wh;Zh.prototype.na=function(){var n=this.J<this.Qf;return n||this.cg.na()};Zh.prototype.next=function(){if(this.J<this.Qf){var n=Ee(this.$g,this.J);return this.J+=1,new ci(n,$J(this.vh,n),null)}return this.cg.next()};Zh.prototype.remove=function(){return Error("Unsupported operation")};$h.prototype.next=function(){if(this.ea!=null){var n=z(this.ea),t=I(n,0,null);return n=I(n,1,null),this.ea=C(this.ea),{value:[t,n],done:!1}}return{value:null,done:!0}};ai.prototype.next=function(){if(this.ea!=null){var n=z(this.ea);return this.ea=C(this.ea),{value:[n,n],done:!1}}return{value:null,done:!0}};g=ci.prototype;g.hc=function(n,t){switch(t){case 0:return new ci(0,this.key,null);case 1:return new ci(1,this.F,null);default:return null}};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.oa=function(n,t){return this.Ca(null,t,null)};g.V=function(n,t,i){return this.Ca(null,t,i)};g.S=function(n,t){if(t===0)return this.key;if(t===1)return this.F;throw Error("Index out of bounds")};g.Ca=function(n,t,i){return t===0?this.key:t===1?this.F:i};g.Ib=function(n,t,i){return new R(null,2,5,S,[this.key,this.F],null).Ib(null,t,i)};g.Y=function(){return null};g.ba=function(){return 2};g.cf=function(){return this.key};g.df=function(){return this.F};g.jc=function(){return this.F};g.kc=function(){return new R(null,1,5,S,[this.key],null)};g.ic=function(){return new u([this.F,this.key],0,null)};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return null};g.ya=function(n,t){return ve(this,t)};g.za=function(n,t,i){return we(this,t,i)};g.ua=function(n,t,i){return gj.l(new R(null,2,5,S,[this.key,this.F],null),t,i)};g.Ua=function(n,t){return t===0||t===1};g.aa=function(){return new u([this.key,this.F],0,null)};g.Z=function(n,t){return Se(new R(null,2,5,S,[this.key,this.F],null),t)};g.ga=function(n,t){return new R(null,3,5,S,[this.key,this.F,t],null)};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.S(null,n)};g.h=function(n,t){return this.Ca(null,n,t)};g=di.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.Xb};g.xa=function(){return this.J<this.o.length-2?new di(this.o,this.J+2,null):null};g.ba=function(){return(this.o.length-this.J)/2};g.X=function(){return oe(this)};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.ya=function(n,t){return tf(t,this)};g.za=function(n,t,i){return wf(t,i,this)};g.va=function(){return new ci(this.o[this.J],this.o[this.J+1],null)};g.Ba=function(){return this.J<this.o.length-2?new di(this.o,this.J+2,null):ge};g.aa=function(){return this};g.Z=function(n,t){return t===this.Xb?this:new di(this.o,this.J,t)};g.ga=function(n,t){return Tf(t,this)};di.prototype[ee]=function(){return je(this)};ei.prototype.na=function(){return this.J<this.H};ei.prototype.next=function(){var n=new ci(this.o[this.J],this.o[this.J+1],null);return this.J+=2,n};g=h.prototype;g.hc=function(n,t){return n=bi(this.o,t),n===-1?null:new ci(this.o[n],this.o[n+1],null)};g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.keys=function(){return je(bj.g?bj.g(this):bj.call(null,this))};g.entries=function(){return new $h(w(w(this)))};g.values=function(){return je(dj.g?dj.g(this):dj.call(null,this))};g.has=function(n){return lf(this,n)};g.get=function(n,t){return this.V(null,n,t)};g.forEach=function(n){for(var t=w(this),i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o),d=I(f,0,null);f=I(f,1,null),n.h?n.h(f,d):n.call(null,f,d),o+=1}else if(t=w(t))df(t)?(i=Fd(t),t=Gd(t),d=i,s=D(i),i=d):(i=z(t),d=I(i,0,null),f=I(i,1,null),n.h?n.h(f,d):n.call(null,f,d),t=C(t),i=null,s=0),o=0;else return null};g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){return n=bi(this.o,t),n===-1?i:this.o[n+1]};g.qb=function(n,t,i){n=this.o.length;for(var s=0;;)if(s<n){var o=this.o[s],f=this.o[s+1];if(i=t.l?t.l(i,o,f):t.call(null,i,o,f),se(i))return q(i);s+=2}else return i};g.Fa=function(){return new ei(this.o,2*this.H)};g.Y=function(){return this.D};g.Ea=function(){return new h(this.D,this.H,this.o,this.C)};g.ba=function(){return this.H};g.X=function(){var n=this.C;return n??(this.C=n=pe(this))};g.M=function(n,t){if(Ze(t)&&!bf(t))if(n=this.o.length,this.H===t.ba(null))for(var i=0;;)if(i<n){var s=t.V(null,this.o[i],kf);if(s!==kf)if(E.h(this.o[i+1],s))i+=2;else return!1;else return!1}else return!0;else return!1;else return!1};g.Yc=function(){return new ki(this.o.length,mc(this.o))};g.ka=function(){return bd(og,this.D)};g.ya=function(n,t){return yf(this,t)};g.za=function(n,t,i){return zf(this,t,i)};g.zb=function(n,t){if(0<=bi(this.o,t)){n=this.o.length;var i=n-2;if(i===0)return this.ka(null);i=Array(i);for(var s=0,o=0;;){if(s>=n)return new h(this.D,this.H-1,i,null);E.h(t,this.o[s])||(i[o]=this.o[s],i[o+1]=this.o[s+1],o+=2),s+=2}}else return this};g.ua=function(n,t,i){if(n=bi(this.o,t),n===-1){if(this.H<tK){n=this.o;for(var s=n.length,o=Array(s+2),f=0;f<s;)o[f]=n[f],f+=1;return o[s]=t,o[s+1]=i,new h(this.D,this.H+1,o,null)}return bd(Mc(Ng.h(li,this),t,i),this.D)}return i===this.o[n+1]?this:(t=mc(this.o),t[n+1]=i,new h(this.D,this.H,t,null))};g.Ua=function(n,t){return bi(this.o,t)!==-1};g.aa=function(){var n=this.o;return 0<=n.length-2?new di(n,0,null):null};g.Z=function(n,t){return t===this.D?this:new h(t,this.H,this.o,this.C)};g.ga=function(n,t){if(cf(t))return this.ua(null,Oe(t,0),Oe(t,1));for(n=this,t=w(t);;){if(t==null)return n;var i=z(t);if(cf(i))n=Mc(n,Oe(i,0),Oe(i,1)),t=C(t);else throw Error("conj on a map takes map entries or seqables of map entries")}};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.oa(null,n)};g.h=function(n,t){return this.V(null,n,t)};var og=new h(null,0,[],fK),tK=8;h.prototype[ee]=function(){return je(this)};g=ki.prototype;g.ba=function(){if(this.bd)return Jf(this.Qc,2);throw Error("count after persistent!")};g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){if(this.bd)return n=bi(this.o,t),n===-1?i:this.o[n+1];throw Error("lookup after persistent!")};g.ad=function(n,t){if(this.bd){if(Dh(t))return this.$c(null,Eh.g?Eh.g(t):Eh.call(null,t),Fh.g?Fh.g(t):Fh.call(null,t));if(cf(t))return this.$c(null,t.g?t.g(0):t.call(null,0),t.g?t.g(1):t.call(null,1));for(n=w(t),t=this;;){var i=z(n);if(l(i))n=C(n),t=zd(t,Eh.g?Eh.g(i):Eh.call(null,i),Fh.g?Fh.g(i):Fh.call(null,i));else return t}}else throw Error("conj! after persistent!")};g.ud=function(){if(this.bd)return this.bd=!1,new h(null,Jf(this.Qc,2),this.o,null);throw Error("persistent! called twice")};g.$c=function(n,t,i){if(this.bd)return n=bi(this.o,t),n===-1?this.Qc+2<=2*tK?(this.Qc+=2,this.o.push(t),this.o.push(i),this):Jk(mi.h?mi.h(this.Qc,this.o):mi.call(null,this.Qc,this.o),t,i):(i!==this.o[n+1]&&(this.o[n+1]=i),this);throw Error("assoc! after persistent!")};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.V(null,n,null)};g.h=function(n,t){return this.V(null,n,t)};si.prototype.advance=function(){for(var n=this.o.length;;)if(this.J<n){var t=this.o[this.J],i=this.o[this.J+1];if(t!=null?t=this.Kd=new ci(t,i,null):i!=null?(t=Nd(i),t=t.na()?this.Pb=t:!1):t=!1,this.J+=2,t)return!0}else return!1};si.prototype.na=function(){var n=this.Kd!=null;return n||((n=this.Pb!=null)?n:this.advance())};si.prototype.next=function(){if(this.Kd!=null){var n=this.Kd;return this.Kd=null,n}if(this.Pb!=null)return n=this.Pb.next(),this.Pb.na()||(this.Pb=null),n;if(this.advance())return this.next();throw Error("No such element")};si.prototype.remove=function(){return Error("Unsupported operation")};g=ti.prototype;g.Gc=function(n){if(n===this.qa)return this;var t=Kf(this.ta),i=Array(0>t?4:2*(t+1));return ef(this.o,0,i,0,2*t),new ti(n,this.ta,i)};g.Id=function(){return Di?Di(this.o):Gi.call(null,this.o)};g.Oc=function(n,t){return ri(this.o,n,t)};g.Cc=function(n,t,i,s){var o=1<<(t>>>n&31);if((this.ta&o)===0)return s;var f=Kf(this.ta&o-1);return o=this.o[2*f],f=this.o[2*f+1],o==null?f.Cc(n+5,t,i,s):gi(i,o)?f:s};g.Mb=function(n,t,i,s,o,f){var d=1<<(i>>>t&31),p=Kf(this.ta&d-1);if((this.ta&d)===0){var v=Kf(this.ta);if(2*v<this.o.length){for(n=this.Gc(n),t=n.o,f.F=!0,i=2*(v-p),f=2*p+(i-1),v=2*(p+1)+(i-1);i!==0;)t[v]=t[f],--v,--i,--f;return t[2*p]=s,t[2*p+1]=o,n.ta|=d,n}if(16<=v){for(p=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],p[i>>>t&31]=Bi.Mb(n,t+5,i,s,o,f),o=s=0;32>s;)(this.ta>>>s&1)===0||(p[s]=this.o[o]!=null?Bi.Mb(n,t+5,$d(this.o[o]),this.o[o],this.o[o+1],f):this.o[o+1],o+=2),s+=1;return new vi(n,v+1,p)}return t=Array(2*(v+4)),ef(this.o,0,t,0,2*p),t[2*p]=s,t[2*p+1]=o,ef(this.o,2*p,t,2*(p+1),2*(v-p)),f.F=!0,n=this.Gc(n),n.o=t,n.ta|=d,n}return v=this.o[2*p],d=this.o[2*p+1],v==null?(v=d.Mb(n,t+5,i,s,o,f),v===d?this:qi(this,n,2*p+1,v)):gi(s,v)?o===d?this:qi(this,n,2*p+1,o):(f.F=!0,f=t+5,s=zi?zi(n,f,v,d,i,s,o):Ai.call(null,n,f,v,d,i,s,o),o=2*p,p=2*p+1,n=this.Gc(n),n.o[o]=null,n.o[p]=s,n)};g.Lb=function(n,t,i,s,o){var f=1<<(t>>>n&31),d=Kf(this.ta&f-1);if((this.ta&f)===0){var p=Kf(this.ta);if(16<=p){for(d=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],d[t>>>n&31]=Bi.Lb(n+5,t,i,s,o),s=i=0;32>i;)(this.ta>>>i&1)===0||(d[i]=this.o[s]!=null?Bi.Lb(n+5,$d(this.o[s]),this.o[s],this.o[s+1],o):this.o[s+1],s+=2),i+=1;return new vi(null,p+1,d)}return n=Array(2*(p+1)),ef(this.o,0,n,0,2*d),n[2*d]=i,n[2*d+1]=s,ef(this.o,2*d,n,2*(d+1),2*(p-d)),o.F=!0,new ti(null,this.ta|f,n)}var v=this.o[2*d];return f=this.o[2*d+1],v==null?(p=f.Lb(n+5,t,i,s,o),p===f?this:new ti(null,this.ta,oi(this.o,2*d+1,p))):gi(i,v)?s===f?this:new ti(null,this.ta,oi(this.o,2*d+1,s)):(o.F=!0,o=this.ta,p=this.o,n+=5,n=yi?yi(n,v,f,t,i,s):Ai.call(null,n,v,f,t,i,s),i=2*d,d=2*d+1,s=mc(p),s[i]=null,s[d]=n,new ti(null,o,s))};g.Hd=function(n,t,i,s){var o=1<<(t>>>n&31);if((this.ta&o)===0)return s;var f=Kf(this.ta&o-1);return o=this.o[2*f],f=this.o[2*f+1],o==null?f.Hd(n+5,t,i,s):gi(i,o)?new ci(o,f,null):s};g.Jd=function(n,t,i){var s=1<<(t>>>n&31);if((this.ta&s)===0)return this;var o=Kf(this.ta&s-1),f=this.o[2*o],d=this.o[2*o+1];return f==null?(n=d.Jd(n+5,t,i),n===d?this:n!=null?new ti(null,this.ta,oi(this.o,2*o+1,n)):this.ta===s?null:new ti(null,this.ta^s,pi(this.o,o))):gi(i,f)?this.ta===s?null:new ti(null,this.ta^s,pi(this.o,o)):this};g.Fa=function(){return new si(this.o)};var Bi=new ti(null,0,[]);ui.prototype.na=function(){for(var n=this.o.length;;){if(this.Pb!=null&&this.Pb.na())return!0;if(this.J<n){var t=this.o[this.J];this.J+=1,t!=null&&(this.Pb=Nd(t))}else return!1}};ui.prototype.next=function(){if(this.na())return this.Pb.next();throw Error("No such element")};ui.prototype.remove=function(){return Error("Unsupported operation")};g=vi.prototype;g.Gc=function(n){return n===this.qa?this:new vi(n,this.H,mc(this.o))};g.Id=function(){return Ii?Ii(this.o):Ki.call(null,this.o)};g.Oc=function(n,t){for(var i=this.o.length,s=0;;)if(s<i){var o=this.o[s];if(o!=null){if(t=o.Oc(n,t),se(t))return t;s+=1}else s+=1}else return t};g.Cc=function(n,t,i,s){var o=this.o[t>>>n&31];return o!=null?o.Cc(n+5,t,i,s):s};g.Mb=function(n,t,i,s,o,f){var d=i>>>t&31,p=this.o[d];return p==null?(n=qi(this,n,d,Bi.Mb(n,t+5,i,s,o,f)),n.H+=1,n):(t=p.Mb(n,t+5,i,s,o,f),t===p?this:qi(this,n,d,t))};g.Lb=function(n,t,i,s,o){var f=t>>>n&31,d=this.o[f];return d==null?new vi(null,this.H+1,oi(this.o,f,Bi.Lb(n+5,t,i,s,o))):(n=d.Lb(n+5,t,i,s,o),n===d?this:new vi(null,this.H,oi(this.o,f,n)))};g.Hd=function(n,t,i,s){var o=this.o[t>>>n&31];return o!=null?o.Hd(n+5,t,i,s):s};g.Jd=function(n,t,i){var s=t>>>n&31,o=this.o[s];if(o!=null){if(n=o.Jd(n+5,t,i),n===o)s=this;else if(n==null)if(8>=this.H)e:{o=this.o,n=o.length,t=Array(2*(this.H-1)),i=0;for(var f=1,d=0;;)if(i<n)i!==s&&o[i]!=null&&(t[f]=o[i],f+=2,d|=1<<i),i+=1;else{s=new ti(null,d,t);break e}}else s=new vi(null,this.H-1,oi(this.o,s,n));else s=new vi(null,this.H,oi(this.o,s,n));return s}return this};g.Fa=function(){return new ui(this.o)};g=xi.prototype;g.Gc=function(n){if(n===this.qa)return this;var t=Array(2*(this.H+1));return ef(this.o,0,t,0,2*this.H),new xi(n,this.lc,this.H,t)};g.Id=function(){return Di?Di(this.o):Gi.call(null,this.o)};g.Oc=function(n,t){return ri(this.o,n,t)};g.Cc=function(n,t,i,s){return n=wi(this.o,this.H,i),0>n?s:gi(i,this.o[n])?this.o[n+1]:s};g.Mb=function(n,t,i,s,o,f){return i===this.lc?(t=wi(this.o,this.H,s),t===-1?this.o.length>2*this.H?(t=2*this.H,i=2*this.H+1,n=this.Gc(n),n.o[t]=s,n.o[i]=o,f.F=!0,n.H+=1,n):(i=this.o.length,t=Array(i+2),ef(this.o,0,t,0,i),t[i]=s,t[i+1]=o,f.F=!0,s=this.H+1,n===this.qa?(this.o=t,this.H=s,n=this):n=new xi(this.qa,this.lc,s,t),n):this.o[t+1]===o?this:qi(this,n,t+1,o)):new ti(n,1<<(this.lc>>>t&31),[null,this,null,null]).Mb(n,t,i,s,o,f)};g.Lb=function(n,t,i,s,o){return t===this.lc?(n=wi(this.o,this.H,i),n===-1?(n=2*this.H,t=Array(n+2),ef(this.o,0,t,0,n),t[n]=i,t[n+1]=s,o.F=!0,new xi(null,this.lc,this.H+1,t)):E.h(this.o[n+1],s)?this:new xi(null,this.lc,this.H,oi(this.o,n+1,s))):new ti(null,1<<(this.lc>>>n&31),[null,this]).Lb(n,t,i,s,o)};g.Hd=function(n,t,i,s){return n=wi(this.o,this.H,i),0>n?s:gi(i,this.o[n])?new ci(this.o[n],this.o[n+1],null):s};g.Jd=function(n,t,i){return n=wi(this.o,this.H,i),n===-1?this:this.H===1?null:new xi(null,this.lc,this.H-1,pi(this.o,Jf(n,2)))};g.Fa=function(){return new si(this.o)};g=Ci.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.xa=function(){if(this.ea==null){var n=this.Qb,t=this.J+2;return Fi?Fi(n,t,null):Gi.call(null,n,t,null)}n=this.Qb,t=this.J;var i=C(this.ea);return Fi?Fi(n,t,i):Gi.call(null,n,t,i)};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.ya=function(n,t){return tf(t,this)};g.za=function(n,t,i){return wf(t,i,this)};g.va=function(){return this.ea==null?new ci(this.Qb[this.J],this.Qb[this.J+1],null):z(this.ea)};g.Ba=function(){var n=this,t=n.ea==null?function(){var i=n.Qb,s=n.J+2;return Fi?Fi(i,s,null):Gi.call(null,i,s,null)}():function(){var i=n.Qb,s=n.J,o=C(n.ea);return Fi?Fi(i,s,o):Gi.call(null,i,s,o)}();return t??ge};g.aa=function(){return this};g.Z=function(n,t){return t===this.D?this:new Ci(t,this.Qb,this.J,this.ea,this.C)};g.ga=function(n,t){return Tf(t,this)};Ci.prototype[ee]=function(){return je(this)};g=Hi.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.xa=function(){var n=this.Qb,t=this.J,i=C(this.ea);return Ji?Ji(n,t,i):Ki.call(null,n,t,i)};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.ya=function(n,t){return tf(t,this)};g.za=function(n,t,i){return wf(t,i,this)};g.va=function(){return z(this.ea)};g.Ba=function(){var n=this.Qb,t=this.J,i=C(this.ea);return n=Ji?Ji(n,t,i):Ki.call(null,n,t,i),n??ge};g.aa=function(){return this};g.Z=function(n,t){return t===this.D?this:new Hi(t,this.Qb,this.J,this.ea,this.C)};g.ga=function(n,t){return Tf(t,this)};Hi.prototype[ee]=function(){return je(this)};Li.prototype.na=function(){return!this.Cf||this.zg.na()};Li.prototype.next=function(){return this.Cf?this.zg.next():(this.Cf=!0,new ci(null,this.Pa,null))};Li.prototype.remove=function(){return Error("Unsupported operation")};g=Mi.prototype;g.hc=function(n,t){return t==null?this.Oa?new ci(null,this.Pa,null):null:this.root==null?null:this.root.Hd(0,$d(t),t,null)};g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.keys=function(){return je(bj.g?bj.g(this):bj.call(null,this))};g.entries=function(){return new $h(w(w(this)))};g.values=function(){return je(dj.g?dj.g(this):dj.call(null,this))};g.has=function(n){return lf(this,n)};g.get=function(n,t){return this.V(null,n,t)};g.forEach=function(n){for(var t=w(this),i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o),d=I(f,0,null);f=I(f,1,null),n.h?n.h(f,d):n.call(null,f,d),o+=1}else if(t=w(t))df(t)?(i=Fd(t),t=Gd(t),d=i,s=D(i),i=d):(i=z(t),d=I(i,0,null),f=I(i,1,null),n.h?n.h(f,d):n.call(null,f,d),t=C(t),i=null,s=0),o=0;else return null};g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){return t==null?this.Oa?this.Pa:i:this.root==null?i:this.root.Cc(0,$d(t),t,i)};g.qb=function(n,t,i){return n=this.Oa?t.l?t.l(i,null,this.Pa):t.call(null,i,null,this.Pa):i,se(n)?q(n):this.root!=null?ue(this.root.Oc(t,n)):n};g.Fa=function(){var n=this.root?Nd(this.root):rg();return this.Oa?new Li(this.Pa,n):n};g.Y=function(){return this.D};g.Ea=function(){return new Mi(this.D,this.H,this.root,this.Oa,this.Pa,this.C)};g.ba=function(){return this.H};g.X=function(){var n=this.C;return n??(this.C=n=pe(this))};g.M=function(n,t){return Yh(this,t)};g.Yc=function(){return new Oi(this.root,this.H,this.Oa,this.Pa)};g.ka=function(){return bd(li,this.D)};g.zb=function(n,t){return t==null?this.Oa?new Mi(this.D,this.H-1,this.root,!1,null,null):this:this.root==null?this:(n=this.root.Jd(0,$d(t),t),n===this.root?this:new Mi(this.D,this.H-1,n,this.Oa,this.Pa,null))};g.ua=function(n,t,i){return t==null?this.Oa&&i===this.Pa?this:new Mi(this.D,this.Oa?this.H:this.H+1,this.root,!0,i,null):(n=new ni,t=(this.root==null?Bi:this.root).Lb(0,$d(t),t,i,n),t===this.root?this:new Mi(this.D,n.F?this.H+1:this.H,t,this.Oa,this.Pa,null))};g.Ua=function(n,t){return t==null?this.Oa:this.root==null?!1:this.root.Cc(0,$d(t),t,kf)!==kf};g.aa=function(){if(0<this.H){var n=this.root!=null?this.root.Id():null;return this.Oa?Tf(new ci(null,this.Pa,null),n):n}return null};g.Z=function(n,t){return t===this.D?this:new Mi(t,this.H,this.root,this.Oa,this.Pa,this.C)};g.ga=function(n,t){if(cf(t))return this.ua(null,Oe(t,0),Oe(t,1));for(n=this,t=w(t);;){if(t==null)return n;var i=z(t);if(cf(i))n=Mc(n,Oe(i,0),Oe(i,1)),t=C(t);else throw Error("conj on a map takes map entries or seqables of map entries")}};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.oa(null,n)};g.h=function(n,t){return this.V(null,n,t)};var li=new Mi(null,0,null,!1,null,fK);Mi.prototype[ee]=function(){return je(this)};g=Oi.prototype;g.ba=function(){if(this.qa)return this.count;throw Error("count after persistent!")};g.oa=function(n,t){return t==null?this.Oa?this.Pa:null:this.root==null?null:this.root.Cc(0,$d(t),t)};g.V=function(n,t,i){return t==null?this.Oa?this.Pa:i:this.root==null?i:this.root.Cc(0,$d(t),t,i)};g.ad=function(n,t){e:if(this.qa)if(Dh(t))n=Pi(this,Eh.g?Eh.g(t):Eh.call(null,t),Fh.g?Fh.g(t):Fh.call(null,t));else if(cf(t))n=Pi(this,t.g?t.g(0):t.call(null,0),t.g?t.g(1):t.call(null,1));else for(n=w(t),t=this;;){var i=z(n);if(l(i))n=C(n),t=Pi(t,Eh.g?Eh.g(i):Eh.call(null,i),Fh.g?Fh.g(i):Fh.call(null,i));else{n=t;break e}}else throw Error("conj! after persistent");return n};g.ud=function(){if(this.qa){this.qa=null;var n=new Mi(null,this.count,this.root,this.Oa,this.Pa,null)}else throw Error("persistent! called twice");return n};g.$c=function(n,t,i){return Pi(this,t,i)};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.oa(null,n)};g.h=function(n,t){return this.V(null,n,t)};g=Ri.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.D};g.xa=function(){var n=z(this.stack);return n=Qi(this.Ec?n.right:n.left,C(this.stack),this.Ec),n==null?null:new Ri(null,n,this.Ec,this.H-1,null)};g.ba=function(){return 0>this.H?D(C(this))+1:this.H};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.ya=function(n,t){return tf(t,this)};g.za=function(n,t,i){return wf(t,i,this)};g.va=function(){return Ue(this.stack)};g.Ba=function(){var n=z(this.stack);return n=Qi(this.Ec?n.right:n.left,C(this.stack),this.Ec),n!=null?new Ri(null,n,this.Ec,this.H-1,null):ge};g.aa=function(){return this};g.Z=function(n,t){return t===this.D?this:new Ri(t,this.stack,this.Ec,this.H,this.C)};g.ga=function(n,t){return Tf(t,this)};Ri.prototype[ee]=function(){return je(this)};var uK=function n(t,i,s){var o=t.left!=null?function(){var p=t.left;return n.l?n.l(p,i,s):n.call(null,p,i,s)}():s;if(se(o))return o;var f=function(){var p=t.key,v=t.F;return i.l?i.l(o,p,v):i.call(null,o,p,v)}();if(se(f))return f;if(t.right!=null){var d=t.right;return n.l?n.l(d,i,f):n.call(null,d,i,f)}return f};g=Ui.prototype;g.hc=function(n,t){switch(t){case 0:return new ci(0,this.key,null);case 1:return new ci(1,this.F,null);default:return null}};g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.Nf=function(n){return n.Pf(this)};g.Nd=function(){return new Ti(this.key,this.F,this.left,this.right,null)};g.fc=function(){return this};g.Mf=function(n){return n.Of(this)};g.replace=function(n,t,i,s){return new Ui(n,t,i,s,null)};g.Of=function(n){return new Ui(n.key,n.F,this,n.right,null)};g.Pf=function(n){return new Ui(n.key,n.F,n.left,this,null)};g.Oc=function(n,t){return uK(this,n,t)};g.oa=function(n,t){return this.Ca(null,t,null)};g.V=function(n,t,i){return this.Ca(null,t,i)};g.S=function(n,t){if(t===0)return this.key;if(t===1)return this.F;throw Error("Index out of bounds")};g.Ca=function(n,t,i){return t===0?this.key:t===1?this.F:i};g.Ib=function(n,t,i){return new R(null,2,5,S,[this.key,this.F],null).Ib(null,t,i)};g.Y=function(){return null};g.ba=function(){return 2};g.cf=function(){return this.key};g.df=function(){return this.F};g.jc=function(){return this.F};g.kc=function(){return new R(null,1,5,S,[this.key],null)};g.ic=function(){return new u([this.F,this.key],0,null)};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return null};g.ya=function(n,t){return ve(this,t)};g.za=function(n,t,i){return we(this,t,i)};g.ua=function(n,t,i){return gj.l(new R(null,2,5,S,[this.key,this.F],null),t,i)};g.Ua=function(n,t){return t===0||t===1};g.aa=function(){return new u([this.key,this.F],0,null)};g.Z=function(n,t){return bd(new R(null,2,5,S,[this.key,this.F],null),t)};g.ga=function(n,t){return new R(null,3,5,S,[this.key,this.F,t],null)};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.S(null,n)};g.h=function(n,t){return this.Ca(null,n,t)};Ui.prototype[ee]=function(){return je(this)};g=Ti.prototype;g.hc=function(n,t){switch(t){case 0:return new ci(0,this.key,null);case 1:return new ci(1,this.F,null);default:return null}};g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.Nf=function(n){return new Ti(this.key,this.F,this.left,n,null)};g.Nd=function(){throw Error("red-black tree invariant violation")};g.fc=function(){return new Ui(this.key,this.F,this.left,this.right,null)};g.Mf=function(n){return new Ti(this.key,this.F,n,this.right,null)};g.replace=function(n,t,i,s){return new Ti(n,t,i,s,null)};g.Of=function(n){return this.left instanceof Ti?new Ti(this.key,this.F,this.left.fc(),new Ui(n.key,n.F,this.right,n.right,null),null):this.right instanceof Ti?new Ti(this.right.key,this.right.F,new Ui(this.key,this.F,this.left,this.right.left,null),new Ui(n.key,n.F,this.right.right,n.right,null),null):new Ui(n.key,n.F,this,n.right,null)};g.Pf=function(n){return this.right instanceof Ti?new Ti(this.key,this.F,new Ui(n.key,n.F,n.left,this.left,null),this.right.fc(),null):this.left instanceof Ti?new Ti(this.left.key,this.left.F,new Ui(n.key,n.F,n.left,this.left.left,null),new Ui(this.key,this.F,this.left.right,this.right,null),null):new Ui(n.key,n.F,n.left,this,null)};g.Oc=function(n,t){return uK(this,n,t)};g.oa=function(n,t){return this.Ca(null,t,null)};g.V=function(n,t,i){return this.Ca(null,t,i)};g.S=function(n,t){if(t===0)return this.key;if(t===1)return this.F;throw Error("Index out of bounds")};g.Ca=function(n,t,i){return t===0?this.key:t===1?this.F:i};g.Ib=function(n,t,i){return new R(null,2,5,S,[this.key,this.F],null).Ib(null,t,i)};g.Y=function(){return null};g.ba=function(){return 2};g.cf=function(){return this.key};g.df=function(){return this.F};g.jc=function(){return this.F};g.kc=function(){return new R(null,1,5,S,[this.key],null)};g.ic=function(){return new u([this.F,this.key],0,null)};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return null};g.ya=function(n,t){return ve(this,t)};g.za=function(n,t,i){return we(this,t,i)};g.ua=function(n,t,i){return gj.l(new R(null,2,5,S,[this.key,this.F],null),t,i)};g.Ua=function(n,t){return t===0||t===1};g.aa=function(){return new u([this.key,this.F],0,null)};g.Z=function(n,t){return bd(new R(null,2,5,S,[this.key,this.F],null),t)};g.ga=function(n,t){return new R(null,3,5,S,[this.key,this.F,t],null)};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.S(null,n)};g.h=function(n,t){return this.Ca(null,n,t)};Ti.prototype[ee]=function(){return je(this)};var vK=function n(t,i,s,o,f){if(i==null)return new Ti(s,o,null,null,null);var d=function(){var p=i.key;return t.h?t.h(s,p):t.call(null,s,p)}();return d===0?(f[0]=i,null):0>d?(d=function(){var p=i.left;return n.O?n.O(t,p,s,o,f):n.call(null,t,p,s,o,f)}(),d!=null?i.Mf(d):null):(d=function(){var p=i.right;return n.O?n.O(t,p,s,o,f):n.call(null,t,p,s,o,f)}(),d!=null?i.Nf(d):null)},wK=function n(t,i){if(t==null)return i;if(i==null)return t;if(t instanceof Ti){if(i instanceof Ti){var s=function(){var o=t.right,f=i.left;return n.h?n.h(o,f):n.call(null,o,f)}();return s instanceof Ti?new Ti(s.key,s.F,new Ti(t.key,t.F,t.left,s.left,null),new Ti(i.key,i.F,s.right,i.right,null),null):new Ti(t.key,t.F,t.left,new Ti(i.key,i.F,s,i.right,null),null)}return new Ti(t.key,t.F,t.left,function(){var o=t.right;return n.h?n.h(o,i):n.call(null,o,i)}(),null)}return i instanceof Ti?new Ti(i.key,i.F,function(){var o=i.left;return n.h?n.h(t,o):n.call(null,t,o)}(),i.right,null):(s=function(){var o=t.right,f=i.left;return n.h?n.h(o,f):n.call(null,o,f)}(),s instanceof Ti?new Ti(s.key,s.F,new Ui(t.key,t.F,t.left,s.left,null),new Ui(i.key,i.F,s.right,i.right,null),null):Xi(t.key,t.F,t.left,new Ui(i.key,i.F,s,i.right,null)))},xK=function n(t,i,s,o){if(i!=null){var f=function(){var d=i.key;return t.h?t.h(s,d):t.call(null,s,d)}();return f===0?(o[0]=i,wK(i.left,i.right)):0>f?(f=function(){var d=i.left;return n.K?n.K(t,d,s,o):n.call(null,t,d,s,o)}(),f!=null||o[0]!=null?i.left instanceof Ui?Xi(i.key,i.F,f,i.right):new Ti(i.key,i.F,f,i.right,null):null):(f=function(){var d=i.right;return n.K?n.K(t,d,s,o):n.call(null,t,d,s,o)}(),f!=null||o[0]!=null?i.right instanceof Ui?Yi(i.key,i.F,i.left,f):new Ti(i.key,i.F,i.left,f,null):null)}return null},yK=function n(t,i,s,o){var f=i.key,d=t.h?t.h(s,f):t.call(null,s,f);return d===0?i.replace(f,o,i.left,i.right):0>d?i.replace(f,i.F,function(){var p=i.left;return n.K?n.K(t,p,s,o):n.call(null,t,p,s,o)}(),i.right):i.replace(f,i.F,i.left,function(){var p=i.right;return n.K?n.K(t,p,s,o):n.call(null,t,p,s,o)}())};g=Zi.prototype;g.hc=function(n,t){return $i(this,t)};g.forEach=function(n){for(var t=w(this),i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o),d=I(f,0,null);f=I(f,1,null),n.h?n.h(f,d):n.call(null,f,d),o+=1}else if(t=w(t))df(t)?(i=Fd(t),t=Gd(t),d=i,s=D(i),i=d):(i=z(t),d=I(i,0,null),f=I(i,1,null),n.h?n.h(f,d):n.call(null,f,d),t=C(t),i=null,s=0),o=0;else return null};g.get=function(n,t){return this.V(null,n,t)};g.entries=function(){return new $h(w(w(this)))};g.toString=function(){return Pd(this)};g.keys=function(){return je(bj.g?bj.g(this):bj.call(null,this))};g.values=function(){return je(dj.g?dj.g(this):dj.call(null,this))};g.da=function(n){return this.M(null,n)};g.has=function(n){return lf(this,n)};g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){return n=$i(this,t),n!=null?n.F:i};g.qb=function(n,t,i){return this.ec!=null?ue(uK(this.ec,t,i)):i};g.Y=function(){return this.D};g.Ea=function(){return new Zi(this.vb,this.ec,this.H,this.D,this.C)};g.ba=function(){return this.H};g.ic=function(){return 0<this.H?Si(this.ec,!1,this.H):null};g.X=function(){var n=this.C;return n??(this.C=n=pe(this))};g.M=function(n,t){return Yh(this,t)};g.ka=function(){return new Zi(this.vb,null,0,this.D,0)};g.zb=function(n,t){return n=[null],t=xK(this.vb,this.ec,t,n),t==null?Ee(n,0)==null?this:new Zi(this.vb,null,0,this.D,null):new Zi(this.vb,t.fc(),this.H-1,this.D,null)};g.ua=function(n,t,i){n=[null];var s=vK(this.vb,this.ec,t,i,n);return s==null?(n=Ee(n,0),E.h(i,n.F)?this:new Zi(this.vb,yK(this.vb,this.ec,t,i),this.H,this.D,null)):new Zi(this.vb,s.fc(),this.H+1,this.D,null)};g.Ua=function(n,t){return $i(this,t)!=null};g.aa=function(){return 0<this.H?Si(this.ec,!0,this.H):null};g.Z=function(n,t){return t===this.D?this:new Zi(this.vb,this.ec,this.H,t,this.C)};g.ga=function(n,t){if(cf(t))return this.ua(null,Oe(t,0),Oe(t,1));for(n=this,t=w(t);;){if(t==null)return n;var i=z(t);if(cf(i))n=Mc(n,Oe(i,0),Oe(i,1)),t=C(t);else throw Error("conj on a map takes map entries or seqables of map entries")}};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.oa(null,n)};g.h=function(n,t){return this.V(null,n,t)};Zi.prototype[ee]=function(){return je(this)};var qQ=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};qQ.j=function(n){n=w(n);for(var t=wd(li);;)if(n){var i=C(n);if(i==null)throw Error(["No value supplied for key: ",m.g(z(n))].join(""));var s=C(i);t=Jk(t,z(n),z(i)),n=s}else return yd(t)};qQ.v=0;qQ.B=function(n){return this.j(w(n))};var mk=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};mk.j=function(n){if(n=n instanceof u&&n.J===0?n.o:pc(n),!$k(n.length))throw Error(["No value supplied for key: ",m.g(Le(n))].join(""));return ng(n)};mk.v=0;mk.B=function(n){return this.j(w(n))};g=aj.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.Xb};g.xa=function(){var n=(this.ia!=null?this.ia.A&128||Zd===this.ia.td||!this.ia.A&&ic(Gc,this.ia):ic(Gc,this.ia))?this.ia.xa(null):C(this.ia);return n==null?null:new aj(n,null)};g.X=function(){return oe(this)};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.ya=function(n,t){return tf(t,this)};g.za=function(n,t,i){return wf(t,i,this)};g.va=function(){return this.ia.va(null).key};g.Ba=function(){var n=(this.ia!=null?this.ia.A&128||Zd===this.ia.td||!this.ia.A&&ic(Gc,this.ia):ic(Gc,this.ia))?this.ia.xa(null):C(this.ia);return n!=null?new aj(n,null):ge};g.aa=function(){return this};g.Z=function(n,t){return t===this.Xb?this:new aj(this.ia,t)};g.ga=function(n,t){return Tf(t,this)};aj.prototype[ee]=function(){return je(this)};g=cj.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Y=function(){return this.Xb};g.xa=function(){var n=(this.ia!=null?this.ia.A&128||Zd===this.ia.td||!this.ia.A&&ic(Gc,this.ia):ic(Gc,this.ia))?this.ia.xa(null):C(this.ia);return n==null?null:new cj(n,null)};g.X=function(){return oe(this)};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.ya=function(n,t){return tf(t,this)};g.za=function(n,t,i){return wf(t,i,this)};g.va=function(){return this.ia.va(null).F};g.Ba=function(){var n=(this.ia!=null?this.ia.A&128||Zd===this.ia.td||!this.ia.A&&ic(Gc,this.ia):ic(Gc,this.ia))?this.ia.xa(null):C(this.ia);return n!=null?new cj(n,null):ge};g.aa=function(){return this};g.Z=function(n,t){return t===this.Xb?this:new cj(this.ia,t)};g.ga=function(n,t){return Tf(t,this)};cj.prototype[ee]=function(){return je(this)};var Al=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};Al.j=function(n){return l(Jg(Df,n))?Af(function(t,i){return Qf.h(l(t)?t:og,i)},n):null};Al.v=0;Al.B=function(n){return this.j(w(n))};var ou=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],1<i.length?new u(i.slice(1),0,null):null)};ou.j=function(n,t){if(l(Jg(Df,t))){var i=function(s,o){var f=Rc(o),d=Sc(o);if(lf(s,f)){o=gj.l;var p=J.h(s,f);d=n.h?n.h(p,d):n.call(null,p,d),s=o.call(gj,s,f,d)}else s=gj.l(s,f,d);return s};return Af(function(s,o){return nc(i,l(s)?s:og,w(o))},t)}return null};ou.v=1;ou.B=function(n){var t=z(n);return n=C(n),this.j(t,n)};ij.prototype.na=function(){return this.dd.na()};ij.prototype.next=function(){if(this.dd.na())return this.dd.next().key;throw Error("No such element")};ij.prototype.remove=function(){return Error("Unsupported operation")};g=jj.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.keys=function(){return je(w(this))};g.entries=function(){return new ai(w(w(this)))};g.values=function(){return je(w(this))};g.has=function(n){return lf(this,n)};g.forEach=function(n){for(var t=w(this),i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o),d=I(f,0,null);f=I(f,1,null),n.h?n.h(f,d):n.call(null,f,d),o+=1}else if(t=w(t))df(t)?(i=Fd(t),t=Gd(t),d=i,s=D(i),i=d):(i=z(t),d=I(i,0,null),f=I(i,1,null),n.h?n.h(f,d):n.call(null,f,d),t=C(t),i=null,s=0),o=0;else return null};g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){return n=Nc(this.ac,t),l(n)?Rc(n):i};g.Fa=function(){return new ij(Nd(this.ac))};g.Y=function(){return this.D};g.Ea=function(){return new jj(this.D,this.ac,this.C)};g.ba=function(){return xc(this.ac)};g.X=function(){var n=this.C;return n??(this.C=n=pe(this))};g.M=function(n,t){if(n=Xe(t))if(n=D(this)===D(t))try{return Cf(function(i,s){return(i=lf(t,s))?i:new re(!1)},!0,this.ac)}catch(i){if(i instanceof Error)return!1;throw i}else return n;else return n};g.Yc=function(){return new mj(wd(this.ac))};g.ka=function(){return bd(kj,this.D)};g.ff=function(n,t){return new jj(this.D,Qc(this.ac,t),null)};g.aa=function(){return bj(this.ac)};g.Z=function(n,t){return t===this.D?this:new jj(t,this.ac,this.C)};g.ga=function(n,t){return new jj(this.D,gj.l(this.ac,t,null),null)};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.oa(null,n)};g.h=function(n,t){return this.V(null,n,t)};var kj=new jj(null,og,fK);jj.prototype[ee]=function(){return je(this)};g=mj.prototype;g.ad=function(n,t){return this.Rc=zd(this.Rc,t,null),this};g.ud=function(){return new jj(null,yd(this.Rc),null)};g.ba=function(){return D(this.Rc)};g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){return $J(this.Rc,t,kf)===kf?i:t};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return $J(this.Rc,n,kf)===kf?null:n};g.h=function(n,t){return $J(this.Rc,n,kf)===kf?t:n};g=nj.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.keys=function(){return je(w(this))};g.entries=function(){return new ai(w(w(this)))};g.values=function(){return je(w(this))};g.has=function(n){return lf(this,n)};g.forEach=function(n){for(var t=w(this),i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o),d=I(f,0,null);f=I(f,1,null),n.h?n.h(f,d):n.call(null,f,d),o+=1}else if(t=w(t))df(t)?(i=Fd(t),t=Gd(t),d=i,s=D(i),i=d):(i=z(t),d=I(i,0,null),f=I(i,1,null),n.h?n.h(f,d):n.call(null,f,d),t=C(t),i=null,s=0),o=0;else return null};g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){return n=$i(this.Ub,t),n!=null?n.key:i};g.Y=function(){return this.D};g.Ea=function(){return new nj(this.D,this.Ub,this.C)};g.ba=function(){return D(this.Ub)};g.ic=function(){return 0<D(this.Ub)?O.h(Eh,pd(this.Ub)):null};g.X=function(){var n=this.C;return n??(this.C=n=pe(this))};g.M=function(n,t){if(n=Xe(t))if(n=D(this)===D(t))try{return Cf(function(i,s){return(i=lf(t,s))?i:new re(!1)},!0,this.Ub)}catch(i){if(i instanceof Error)return!1;throw i}else return n;else return n};g.ka=function(){return new nj(this.D,zc(this.Ub),0)};g.ff=function(n,t){return new nj(this.D,wl.h(this.Ub,t),null)};g.aa=function(){return bj(this.Ub)};g.Z=function(n,t){return t===this.D?this:new nj(t,this.Ub,this.C)};g.ga=function(n,t){return new nj(this.D,gj.l(this.Ub,t,null),null)};g.call=function(n){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.g=function(n){return this.oa(null,n)};g.h=function(n,t){return this.V(null,n,t)};nj.prototype[ee]=function(){return je(this)};var tl=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],new u(i.slice(3),0,null))}};tl.h=function(n,t){return t};tl.l=function(n,t,i){return(n.g?n.g(t):n.call(null,t))>(n.g?n.g(i):n.call(null,i))?t:i};tl.j=function(n,t,i,s){return nc(function(o,f){return tl.l(n,o,f)},tl.l(n,t,i),s)};tl.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);return i=z(s),s=C(s),this.j(t,n,i,s)};tl.v=3;g=tj.prototype;g.ba=function(){return this.count};g.va=function(){return this.start};g.S=function(n,t){return this.start+t*this.step};g.Ca=function(n,t,i){return 0<=t&&t<this.count?this.start+t*this.step:i};g.Ze=function(){if(1>=this.count)throw Error("-drop-first of empty chunk");return new tj(this.start+this.step,this.step,this.count-1)};uj.prototype.na=function(){return 0<this.step?this.J<this.end:this.J>this.end};uj.prototype.next=function(){var n=this.J;return this.J+=this.step,n};g=vj.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Dd=function(){if(this.fa==null){var n=this.ba(null);32<n?(this.Hb=new vj(null,this.start+32*this.step,this.end,this.step,null,null,null),this.fa=new tj(this.start,this.step,32)):this.fa=new tj(this.start,this.step,n)}};g.S=function(n,t){if(0<=t&&t<this.ba(null))return this.start+t*this.step;if(0<=t&&this.start>this.end&&this.step===0)return this.start;throw Error("Index out of bounds")};g.Ca=function(n,t,i){return 0<=t&&t<this.ba(null)?this.start+t*this.step:0<=t&&this.start>this.end&&this.step===0?this.start:i};g.Fa=function(){return new uj(this.start,this.end,this.step)};g.Y=function(){return this.D};g.Ea=function(){return new vj(this.D,this.start,this.end,this.step,this.fa,this.Hb,this.C)};g.xa=function(){return 0<this.step?this.start+this.step<this.end?new vj(null,this.start+this.step,this.end,this.step,null,null,null):null:this.start+this.step>this.end?new vj(null,this.start+this.step,this.end,this.step,null,null,null):null};g.ba=function(){return Math.ceil((this.end-this.start)/this.step)};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.ya=function(n,t){return ve(this,t)};g.za=function(n,t,i){for(n=this.start;;)if(0<this.step?n<this.end:n>this.end){if(i=t.h?t.h(i,n):t.call(null,i,n),se(i))return q(i);n+=this.step}else return i};g.va=function(){return this.start};g.Ba=function(){var n=this.xa(null);return n??ge};g.aa=function(){return this};g.qd=function(){return this.Dd(),this.fa};g.zc=function(){return this.Dd(),this.Hb==null?ge:this.Hb};g.Z=function(n,t){return t===this.D?this:new vj(t,this.start,this.end,this.step,this.fa,this.Hb,this.C)};g.ga=function(n,t){return Tf(t,this)};g.ae=function(){return w(this.zc(null))};vj.prototype[ee]=function(){return je(this)};g=wj.prototype;g.toString=function(){return Pd(this)};g.da=function(n){return this.M(null,n)};g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Dd=function(){if(this.fa==null){var n=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];e:for(var t=0,i=this.start;;)if(32>t){if(n[t]=i,t+=1,i+=this.step,!(0<this.step?i<this.end:i>this.end)){t=this.fa=new bg(n,0,t);break e}}else{t=i;break e}this.fa==null&&(this.fa=new bg(n,0,32),(0<this.step?t<this.end:t>this.end)&&(this.Hb=new wj(null,t,this.end,this.step,null,null,null)))}};g.Fa=function(){return new uj(this.start,this.end,this.step)};g.Y=function(){return this.D};g.Ea=function(){return new wj(this.D,this.start,this.end,this.step,this.fa,this.Hb,this.C)};g.xa=function(){return 0<this.step?this.start+this.step<this.end?new wj(null,this.start+this.step,this.end,this.step,null,null,null):null:this.start+this.step>this.end?new wj(null,this.start+this.step,this.end,this.step,null,null,null):null};g.X=function(){var n=this.C;return n??(this.C=n=oe(this))};g.M=function(n,t){return Lf(this,t)};g.ka=function(){return ge};g.ya=function(n,t){return tf(t,this)};g.za=function(n,t,i){for(n=this.start;;)if(0<this.step?n<this.end:n>this.end){if(i=t.h?t.h(i,n):t.call(null,i,n),se(i))return q(i);n+=this.step}else return i};g.va=function(){return this.start};g.Ba=function(){var n=this.xa(null);return n??ge};g.aa=function(){return this};g.qd=function(){return this.Dd(),this.fa};g.zc=function(){return this.Dd(),this.Hb==null?ge:this.Hb};g.Z=function(n,t){return t===this.D?this:new wj(t,this.start,this.end,this.step,this.fa,this.Hb,this.C)};g.ga=function(n,t){return Tf(t,this)};g.ae=function(){return w(this.zc(null))};wj.prototype[ee]=function(){return je(this)};var XH=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],new u(i.slice(3),0,null))}};XH.g=function(n){return function(){function t(p,v,_){return new R(null,1,5,S,[n.l?n.l(p,v,_):n.call(null,p,v,_)],null)}function i(p,v){return new R(null,1,5,S,[n.h?n.h(p,v):n.call(null,p,v)],null)}function s(p){return new R(null,1,5,S,[n.g?n.g(p):n.call(null,p)],null)}function o(){return new R(null,1,5,S,[n.G?n.G():n.call(null)],null)}var f=null,d=function(){function p(_,k,P,L){var G=null;if(3<arguments.length){G=0;for(var Z=Array(arguments.length-3);G<Z.length;)Z[G]=arguments[G+3],++G;G=new u(Z,0,null)}return v.call(this,_,k,P,G)}function v(_,k,P,L){return new R(null,1,5,S,[Kg.O(n,_,k,P,L)],null)}return p.v=3,p.B=function(_){var k=z(_);_=C(_);var P=z(_);_=C(_);var L=z(_);return _=he(_),v(k,P,L,_)},p.j=v,p}();return f=function(p,v,_,k){switch(arguments.length){case 0:return o.call(this);case 1:return s.call(this,p);case 2:return i.call(this,p,v);case 3:return t.call(this,p,v,_);default:var P=null;if(3<arguments.length){P=0;for(var L=Array(arguments.length-3);P<L.length;)L[P]=arguments[P+3],++P;P=new u(L,0,null)}return d.j(p,v,_,P)}},f.v=3,f.B=d.B,f.G=o,f.g=s,f.h=i,f.l=t,f.j=d.j,f}()};XH.h=function(n,t){return function(){function i(v,_,k){return new R(null,2,5,S,[n.l?n.l(v,_,k):n.call(null,v,_,k),t.l?t.l(v,_,k):t.call(null,v,_,k)],null)}function s(v,_){return new R(null,2,5,S,[n.h?n.h(v,_):n.call(null,v,_),t.h?t.h(v,_):t.call(null,v,_)],null)}function o(v){return new R(null,2,5,S,[n.g?n.g(v):n.call(null,v),t.g?t.g(v):t.call(null,v)],null)}function f(){return new R(null,2,5,S,[n.G?n.G():n.call(null),t.G?t.G():t.call(null)],null)}var d=null,p=function(){function v(k,P,L,G){var Z=null;if(3<arguments.length){Z=0;for(var W=Array(arguments.length-3);Z<W.length;)W[Z]=arguments[Z+3],++Z;Z=new u(W,0,null)}return _.call(this,k,P,L,Z)}function _(k,P,L,G){return new R(null,2,5,S,[Kg.O(n,k,P,L,G),Kg.O(t,k,P,L,G)],null)}return v.v=3,v.B=function(k){var P=z(k);k=C(k);var L=z(k);k=C(k);var G=z(k);return k=he(k),_(P,L,G,k)},v.j=_,v}();return d=function(v,_,k,P){switch(arguments.length){case 0:return f.call(this);case 1:return o.call(this,v);case 2:return s.call(this,v,_);case 3:return i.call(this,v,_,k);default:var L=null;if(3<arguments.length){L=0;for(var G=Array(arguments.length-3);L<G.length;)G[L]=arguments[L+3],++L;L=new u(G,0,null)}return p.j(v,_,k,L)}},d.v=3,d.B=p.B,d.G=f,d.g=o,d.h=s,d.l=i,d.j=p.j,d}()};XH.l=function(n,t,i){return function(){function s(_,k,P){return new R(null,3,5,S,[n.l?n.l(_,k,P):n.call(null,_,k,P),t.l?t.l(_,k,P):t.call(null,_,k,P),i.l?i.l(_,k,P):i.call(null,_,k,P)],null)}function o(_,k){return new R(null,3,5,S,[n.h?n.h(_,k):n.call(null,_,k),t.h?t.h(_,k):t.call(null,_,k),i.h?i.h(_,k):i.call(null,_,k)],null)}function f(_){return new R(null,3,5,S,[n.g?n.g(_):n.call(null,_),t.g?t.g(_):t.call(null,_),i.g?i.g(_):i.call(null,_)],null)}function d(){return new R(null,3,5,S,[n.G?n.G():n.call(null),t.G?t.G():t.call(null),i.G?i.G():i.call(null)],null)}var p=null,v=function(){function _(P,L,G,Z){var W=null;if(3<arguments.length){W=0;for(var j=Array(arguments.length-3);W<j.length;)j[W]=arguments[W+3],++W;W=new u(j,0,null)}return k.call(this,P,L,G,W)}function k(P,L,G,Z){return new R(null,3,5,S,[Kg.O(n,P,L,G,Z),Kg.O(t,P,L,G,Z),Kg.O(i,P,L,G,Z)],null)}return _.v=3,_.B=function(P){var L=z(P);P=C(P);var G=z(P);P=C(P);var Z=z(P);return P=he(P),k(L,G,Z,P)},_.j=k,_}();return p=function(_,k,P,L){switch(arguments.length){case 0:return d.call(this);case 1:return f.call(this,_);case 2:return o.call(this,_,k);case 3:return s.call(this,_,k,P);default:var G=null;if(3<arguments.length){G=0;for(var Z=Array(arguments.length-3);G<Z.length;)Z[G]=arguments[G+3],++G;G=new u(Z,0,null)}return v.j(_,k,P,G)}},p.v=3,p.B=v.B,p.G=d,p.g=f,p.h=o,p.l=s,p.j=v.j,p}()};XH.j=function(n,t,i,s){var o=Tf(n,Tf(t,Tf(i,s)));return function(){function f(P,L,G){return nc(function(Z,W){return Qf.h(Z,W.l?W.l(P,L,G):W.call(null,P,L,G))},lh,o)}function d(P,L){return nc(function(G,Z){return Qf.h(G,Z.h?Z.h(P,L):Z.call(null,P,L))},lh,o)}function p(P){return nc(function(L,G){return Qf.h(L,G.g?G.g(P):G.call(null,P))},lh,o)}function v(){return nc(function(P,L){return Qf.h(P,L.G?L.G():L.call(null))},lh,o)}var _=null,k=function(){function P(G,Z,W,j){var H=null;if(3<arguments.length){H=0;for(var me=Array(arguments.length-3);H<me.length;)me[H]=arguments[H+3],++H;H=new u(me,0,null)}return L.call(this,G,Z,W,H)}function L(G,Z,W,j){return nc(function(H,me){return Qf.h(H,Kg.O(me,G,Z,W,j))},lh,o)}return P.v=3,P.B=function(G){var Z=z(G);G=C(G);var W=z(G);G=C(G);var j=z(G);return G=he(G),L(Z,W,j,G)},P.j=L,P}();return _=function(P,L,G,Z){switch(arguments.length){case 0:return v.call(this);case 1:return p.call(this,P);case 2:return d.call(this,P,L);case 3:return f.call(this,P,L,G);default:var W=null;if(3<arguments.length){W=0;for(var j=Array(arguments.length-3);W<j.length;)j[W]=arguments[W+3],++W;W=new u(j,0,null)}return k.j(P,L,G,W)}},_.v=3,_.B=k.B,_.G=v,_.g=p,_.h=d,_.l=f,_.j=k.j,_}()};XH.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);return i=z(s),s=C(s),this.j(t,n,i,s)};XH.v=3;var Jj={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},im=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};im.j=function(n){return Sj(n,Wb())};im.v=0;im.B=function(n){return this.j(w(n))};var lq=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};lq.j=function(n){return Sj(n,gj.l(Wb(),Rb,!1))};lq.v=0;lq.B=function(n){return this.j(w(n))};gg.prototype.ja=Zd;gg.prototype.W=function(n,t,i){return qd(t,"#'"),Mj(this.ii,t,i)};u.prototype.ja=Zd;u.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Yf.prototype.ja=Zd;Yf.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};ci.prototype.ja=Zd;ci.prototype.W=function(n,t,i){return Gj(t,Mj,"["," ","]",i,this)};Ri.prototype.ja=Zd;Ri.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Ci.prototype.ja=Zd;Ci.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Ui.prototype.ja=Zd;Ui.prototype.W=function(n,t,i){return Gj(t,Mj,"["," ","]",i,this)};di.prototype.ja=Zd;di.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};ke.prototype.ja=Zd;ke.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};nj.prototype.ja=Zd;nj.prototype.W=function(n,t,i){return Gj(t,Mj,"#{"," ","}",i,this)};Hh.prototype.ja=Zd;Hh.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Sf.prototype.ja=Zd;Sf.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};ch.prototype.ja=Zd;ch.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Je.prototype.ja=Zd;Je.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};vj.prototype.ja=Zd;vj.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Mi.prototype.ja=Zd;Mi.prototype.W=function(n,t,i){return Oj(this,Mj,t,i)};Hi.prototype.ja=Zd;Hi.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Lh.prototype.ja=Zd;Lh.prototype.W=function(n,t,i){return Gj(t,Mj,"["," ","]",i,this)};Zi.prototype.ja=Zd;Zi.prototype.W=function(n,t,i){return Oj(this,Mj,t,i)};jj.prototype.ja=Zd;jj.prototype.W=function(n,t,i){return Gj(t,Mj,"#{"," ","}",i,this)};cg.prototype.ja=Zd;cg.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Sg.prototype.ja=Zd;Sg.prototype.W=function(n,t,i){return qd(t,"#object[cljs.core.Atom "),Mj(new h(null,1,[zK,this.state],null),t,i),qd(t,"]")};cj.prototype.ja=Zd;cj.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Ti.prototype.ja=Zd;Ti.prototype.W=function(n,t,i){return Gj(t,Mj,"["," ","]",i,this)};$g.prototype.ja=Zd;$g.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};R.prototype.ja=Zd;R.prototype.W=function(n,t,i){return Gj(t,Mj,"["," ","]",i,this)};Th.prototype.ja=Zd;Th.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Of.prototype.ja=Zd;Of.prototype.W=function(n,t){return qd(t,"()")};Vh.prototype.ja=Zd;Vh.prototype.W=function(n,t,i){return Gj(t,Mj,"#queue ["," ","]",i,w(this))};h.prototype.ja=Zd;h.prototype.W=function(n,t,i){return Oj(this,Mj,t,i)};wj.prototype.ja=Zd;wj.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Gg.prototype.ja=Zd;Gg.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};aj.prototype.ja=Zd;aj.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};Mf.prototype.ja=Zd;Mf.prototype.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};r.prototype.Zb=Zd;r.prototype.yb=function(n,t){if(t instanceof r)return ce(this,t);throw Error(["Cannot compare ",m.g(this)," to ",m.g(t)].join(""))};K.prototype.Zb=Zd;K.prototype.yb=function(n,t){if(t instanceof K)return Uf(this,t);throw Error(["Cannot compare ",m.g(this)," to ",m.g(t)].join(""))};Lh.prototype.Zb=Zd;Lh.prototype.yb=function(n,t){if(cf(t))return nf(this,t);throw Error(["Cannot compare ",m.g(this)," to ",m.g(t)].join(""))};R.prototype.Zb=Zd;R.prototype.yb=function(n,t){if(cf(t))return nf(this,t);throw Error(["Cannot compare ",m.g(this)," to ",m.g(t)].join(""))};ci.prototype.Zb=Zd;ci.prototype.yb=function(n,t){if(cf(t))return nf(this,t);throw Error(["Cannot compare ",m.g(this)," to ",m.g(t)].join(""))};Ui.prototype.Zb=Zd;Ui.prototype.yb=function(n,t){if(cf(t))return nf(this,t);throw Error(["Cannot compare ",m.g(this)," to ",m.g(t)].join(""))};Ti.prototype.Zb=Zd;Ti.prototype.yb=function(n,t){if(cf(t))return nf(this,t);throw Error(["Cannot compare ",m.g(this)," to ",m.g(t)].join(""))};var ck=null;g=fk.prototype;g.indexOf=function(){var n=null;return n=function(t,i){switch(arguments.length){case 1:return Ge(this,t,0);case 2:return Ge(this,t,i)}throw Error("Invalid arity: "+arguments.length)},n.g=function(t){return Ge(this,t,0)},n.h=function(t,i){return Ge(this,t,i)},n}();g.lastIndexOf=function(){function n(i){return He(this,i,D(this))}var t=null;return t=function(i,s){switch(arguments.length){case 1:return n.call(this,i);case 2:return He(this,i,s)}throw Error("Invalid arity: "+arguments.length)},t.g=n,t.h=function(i,s){return He(this,i,s)},t}();g.Fa=function(){var n=Ag(this.ke);return Hg(this.Je,n)};g.aa=function(){var n=Ag(this.ke);return n=Hg(this.Je,n),n=lK(n),w(l(n)?n:ge)};g.ya=function(n,t){return n=Ef(t),t=this.ke,Ff(this.Je,n,n.G?n.G():n.call(null),t)};g.za=function(n,t,i){return Ff(this.Je,Ef(t),i,this.ke)};g.W=function(n,t,i){return Gj(t,Mj,"("," ",")",i,this)};fk.prototype[ee]=function(){return je(this)};var Mm=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],1<i.length?new u(i.slice(1),0,null):null)};Mm.j=function(n,t){t=M(t);var i=J.l(t,AK,qj),s=function o(f){if(f==null)return null;if(f!=null?Zd===f.Jg||!f.ie&&ic(gk,f):ic(gk,f))return hk(f);if(f instanceof K)return i.g?i.g(f):i.call(null,f);if(f instanceof r)return m.g(f);if(Ze(f)){var d={};f=w(f);for(var p=null,v=0,_=0;;)if(_<v){var k=p.S(null,_),P=I(k,0,null);k=I(k,1,null),P=ik(P,s),k=o(k),d[P]=k,_+=1}else if(f=w(f))df(f)?(v=Fd(f),f=Gd(f),p=v,v=D(v)):(v=z(f),p=I(v,0,null),v=I(v,1,null),p=ik(p,s),v=o(v),d[p]=v,f=C(f),p=null,v=0),_=0;else break;return d}if(We(f)){for(d=[],f=w(O.h(o,f)),p=null,_=v=0;;)if(_<v)P=p.S(null,_),d.push(P),_+=1;else if(f=w(f))p=f,df(p)?(f=Fd(p),_=Gd(p),p=f,v=D(f),f=_):(f=z(p),d.push(f),f=C(p),p=null,v=0),_=0;else break;return d}return f};return s(n)};Mm.v=1;Mm.B=function(n){var t=z(n);return n=C(n),this.j(t,n)};var pk=null,xk=function n(t,i,s){var o=function(){var f=q(s);return f.g?f.g(t):f.call(null,t)}();return o=l(l(o)?o.g?o.g(i):o.call(null,i):o)?!0:null,l(o)||(o=function(){for(var f=vk(i);;)if(0<D(f)){var d=z(f);n.l?n.l(t,d,s):n.call(null,t,d,s),f=he(f)}else return null}(),l(o))?o:(o=function(){for(var f=vk(t);;)if(0<D(f)){var d=z(f);n.l?n.l(d,i,s):n.call(null,d,i,s),f=he(f)}else return null}(),l(o)?o:!1)},Dk=function n(t,i,s,o,f,d,p,v){var _=nc(function(P,L){var G=I(L,0,null);if(I(L,1,null),uk(q(s),i,G)){if(P=P==null||yk(G,z(P),f,q(s))?L:P,!yk(z(P),G,f,q(s)))throw Error(["Multiple methods in multimethod '",m.g(t),"' match dispatch value: ",m.g(i)," -> ",m.g(G)," and ",m.g(z(P)),", and neither is preferred"].join(""));return P}return P},null,q(o)),k=function(){var P;return(P=_==null)&&(P=q(o),P=P.g?P.g(v):P.call(null,v)),l(P)?new R(null,2,5,S,[v,P],null):_}();return l(k)?E.h(q(p),q(s))?(dk.K(d,gj,i,Ke(k)),Ke(k)):(wk(d,o,p,s),n.Ra?n.Ra(t,i,s,o,f,d,p,v):n.call(null,t,i,s,o,f,d,p,v)):null};g=Bk.prototype;g.call=function(n){switch(arguments.length-1){case 0:return this.G();case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.O(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.Ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Wa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.mb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.ab(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);case 11:return this.bb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.cb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.eb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13]);case 14:return this.fb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.gb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.hb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.ib(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.jb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.kb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.lb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.af(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.G=function(){var n=this.P.G?this.P.G():this.P.call(null),t=Ek(this,n);return l(t)||zk(this.name,n),t.G?t.G():t.call(null)};g.g=function(n){var t=this.P.g?this.P.g(n):this.P.call(null,n),i=Ek(this,t);return l(i)||zk(this.name,t),i.g?i.g(n):i.call(null,n)};g.h=function(n,t){var i=this.P.h?this.P.h(n,t):this.P.call(null,n,t),s=Ek(this,i);return l(s)||zk(this.name,i),s.h?s.h(n,t):s.call(null,n,t)};g.l=function(n,t,i){var s=this.P.l?this.P.l(n,t,i):this.P.call(null,n,t,i),o=Ek(this,s);return l(o)||zk(this.name,s),o.l?o.l(n,t,i):o.call(null,n,t,i)};g.K=function(n,t,i,s){var o=this.P.K?this.P.K(n,t,i,s):this.P.call(null,n,t,i,s),f=Ek(this,o);return l(f)||zk(this.name,o),f.K?f.K(n,t,i,s):f.call(null,n,t,i,s)};g.O=function(n,t,i,s,o){var f=this.P.O?this.P.O(n,t,i,s,o):this.P.call(null,n,t,i,s,o),d=Ek(this,f);return l(d)||zk(this.name,f),d.O?d.O(n,t,i,s,o):d.call(null,n,t,i,s,o)};g.Ka=function(n,t,i,s,o,f){var d=this.P.Ka?this.P.Ka(n,t,i,s,o,f):this.P.call(null,n,t,i,s,o,f),p=Ek(this,d);return l(p)||zk(this.name,d),p.Ka?p.Ka(n,t,i,s,o,f):p.call(null,n,t,i,s,o,f)};g.Wa=function(n,t,i,s,o,f,d){var p=this.P.Wa?this.P.Wa(n,t,i,s,o,f,d):this.P.call(null,n,t,i,s,o,f,d),v=Ek(this,p);return l(v)||zk(this.name,p),v.Wa?v.Wa(n,t,i,s,o,f,d):v.call(null,n,t,i,s,o,f,d)};g.Ra=function(n,t,i,s,o,f,d,p){var v=this.P.Ra?this.P.Ra(n,t,i,s,o,f,d,p):this.P.call(null,n,t,i,s,o,f,d,p),_=Ek(this,v);return l(_)||zk(this.name,v),_.Ra?_.Ra(n,t,i,s,o,f,d,p):_.call(null,n,t,i,s,o,f,d,p)};g.mb=function(n,t,i,s,o,f,d,p,v){var _=this.P.mb?this.P.mb(n,t,i,s,o,f,d,p,v):this.P.call(null,n,t,i,s,o,f,d,p,v),k=Ek(this,_);return l(k)||zk(this.name,_),k.mb?k.mb(n,t,i,s,o,f,d,p,v):k.call(null,n,t,i,s,o,f,d,p,v)};g.ab=function(n,t,i,s,o,f,d,p,v,_){var k=this.P.ab?this.P.ab(n,t,i,s,o,f,d,p,v,_):this.P.call(null,n,t,i,s,o,f,d,p,v,_),P=Ek(this,k);return l(P)||zk(this.name,k),P.ab?P.ab(n,t,i,s,o,f,d,p,v,_):P.call(null,n,t,i,s,o,f,d,p,v,_)};g.bb=function(n,t,i,s,o,f,d,p,v,_,k){var P=this.P.bb?this.P.bb(n,t,i,s,o,f,d,p,v,_,k):this.P.call(null,n,t,i,s,o,f,d,p,v,_,k),L=Ek(this,P);return l(L)||zk(this.name,P),L.bb?L.bb(n,t,i,s,o,f,d,p,v,_,k):L.call(null,n,t,i,s,o,f,d,p,v,_,k)};g.cb=function(n,t,i,s,o,f,d,p,v,_,k,P){var L=this.P.cb?this.P.cb(n,t,i,s,o,f,d,p,v,_,k,P):this.P.call(null,n,t,i,s,o,f,d,p,v,_,k,P),G=Ek(this,L);return l(G)||zk(this.name,L),G.cb?G.cb(n,t,i,s,o,f,d,p,v,_,k,P):G.call(null,n,t,i,s,o,f,d,p,v,_,k,P)};g.eb=function(n,t,i,s,o,f,d,p,v,_,k,P,L){var G=this.P.eb?this.P.eb(n,t,i,s,o,f,d,p,v,_,k,P,L):this.P.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L),Z=Ek(this,G);return l(Z)||zk(this.name,G),Z.eb?Z.eb(n,t,i,s,o,f,d,p,v,_,k,P,L):Z.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L)};g.fb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G){var Z=this.P.fb?this.P.fb(n,t,i,s,o,f,d,p,v,_,k,P,L,G):this.P.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G),W=Ek(this,Z);return l(W)||zk(this.name,Z),W.fb?W.fb(n,t,i,s,o,f,d,p,v,_,k,P,L,G):W.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G)};g.gb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z){var W=this.P.gb?this.P.gb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z):this.P.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z),j=Ek(this,W);return l(j)||zk(this.name,W),j.gb?j.gb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z):j.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z)};g.hb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W){var j=this.P.hb?this.P.hb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W):this.P.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W),H=Ek(this,j);return l(H)||zk(this.name,j),H.hb?H.hb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W):H.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W)};g.ib=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j){var H=this.P.ib?this.P.ib(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j):this.P.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j),me=Ek(this,H);return l(me)||zk(this.name,H),me.ib?me.ib(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j):me.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j)};g.jb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H){var me=this.P.jb?this.P.jb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H):this.P.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H),$e=Ek(this,me);return l($e)||zk(this.name,me),$e.jb?$e.jb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H):$e.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H)};g.kb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me){var $e=this.P.kb?this.P.kb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me):this.P.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me),De=Ek(this,$e);return l(De)||zk(this.name,$e),De.kb?De.kb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me):De.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me)};g.lb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e){var De=this.P.lb?this.P.lb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e):this.P.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e),le=Ek(this,De);return l(le)||zk(this.name,De),le.lb?le.lb(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e):le.call(null,n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e)};g.af=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De){var le=Kg.j(this.P,n,t,i,s,F([o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De])),Ce=Ek(this,le);return l(Ce)||zk(this.name,le),Kg.j(Ce,n,t,i,s,F([o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e,De]))};g.Nh=function(n,t,i){return dk.K(this.ve,gj,t,i),wk(this.ue,this.ve,this.Zd,this.pe),this};g.rd=function(){return Hd(this.name)};g.sd=function(){return Id(this.name)};g.X=function(){return fa(this)};g=Fk.prototype;g.Xf=Zd;g.toString=function(){return this.Vb};g.da=function(n){return this.M(null,n)};g.M=function(n,t){return(n=t!=null?Zd===t.Xf:!1)?this.Vb===t.Vb:n};g.W=function(n,t){return qd(t,['#uuid "',m.g(this.Vb),'"'].join(""))};g.X=function(){return this.C==null&&(this.C=$d(this.Vb)),this.C};g.yb=function(n,t){if(t instanceof Fk)return eb(this.Vb,t.Vb);throw Error(["Cannot compare ",m.g(this)," to ",m.g(t)].join(""))};Hk.prototype.__proto__=Error.prototype;Hk.prototype.ja=Zd;Hk.prototype.W=function(n,t,i){return qd(t,"#error {:message "),Mj(this.message,t,i),l(this.data)&&(qd(t,", :data "),Mj(this.data,t,i)),l(this.cause)&&(qd(t,", :cause "),Mj(this.cause,t,i)),qd(t,"}")};Hk.prototype.toString=function(){return Pd(this)};typeof console<"u"&&Zb();Zb();var rQ=new K(null,"ul.chosen-results","ul.chosen-results",-932618517),sQ=new K(null,"uniprot-complete-microbial-proteomes","uniprot-complete-microbial-proteomes",-988738716),tQ=new K("font-size","xx-large","font-size/xx-large",-218228378),EI=new K(null,"api","api",-899839580),AO=new K(null,"use-uniref?","use-uniref?",-1359718854),vQ=new K("routing.data","taxon","routing.data/taxon",-927947580),hM=new K(null,"proteinDescription","proteinDescription",-262573025),wQ=new K(null,"year","year",335913393),xQ=new K(null,"left-center","left-center",374119202),po=new K(null,"intra-block-nl","intra-block-nl",1808826875),zQ=new K(null,"aria-expanded","aria-expanded",-1360942393),vP=new K(null,"filled","filled",1908725116),es=new K(null,"exponentchar","exponentchar",1986664222),AQ=new K("re-com.nested-grid","row-header","re-com.nested-grid/row-header",-1715593243),BQ=new K(null,"and","and",-971899817),AG=new K(null,"row","row",-570139521),uD=new K(null,"border-left","border-left",-1150760178),YO=new K(null,"log_transformed_f_statistic","log_transformed_f_statistic",522882548),CQ=new K(null,"any","any",1705907423),DQ=new r(null,"visited","visited",29677652,null),EQ=new K(null,"div.free-text","div.free-text",-1830216539),FQ=new K(null,"basic-t-time-no-ms","basic-t-time-no-ms",-424650106),GQ=new K(null,"selection-start","selection-start",-888859581),HQ=new K(null,"li.search-field","li.search-field",371261414),Hv=new r(null,"cljs.core","cljs.core",770546058,null),fp=new K(null,"miser","miser",-556060186),IQ=new K(null,"dppx","dppx",1920508843),cO=new K(null,"axis","axis",-1215390822),JQ=new K(null,"hour-minute-second-fraction","hour-minute-second-fraction",-1253038551),KQ=new K(null,"middle","middle",-701029031),LQ=new K("schmoho.dasudopit.client.common.http","http-delete-success","schmoho.dasudopit.client.common.http/http-delete-success",1883205863),MQ=new K("font-size","medium","font-size/medium",-296024665),NQ=new K(null,"outline","outline",793464534),OQ=new K(null,"basic-ordinal-date-time-no-ms","basic-ordinal-date-time-no-ms",-395135436),PQ=new K(null,"required?","required?",-872514462),eP=new K(null,"effect_type_2","effect_type_2",-1725345466),QQ=new r(null,"colgroup","colgroup",-2003317124,null),XO=new K(null,"effect_type_1","effect_type_1",-1428054100),RQ=new K(null,"no-clip?","no-clip?",-188884951),MK=new K("schmoho.dasudopit.client.common.http","http-delete","schmoho.dasudopit.client.common.http/http-delete",-952848186),SQ=new K(null,"around","around",-265975553),wO=new K("params.uniprot","blast","params.uniprot/blast",-687905574),TQ=new K(null,"sort-by-column","sort-by-column",-1857171302),UQ=new K(null,"do-fx","do-fx",1194163050),VQ=new K(null,"aborted","aborted",1775972619),WQ=new K(null,"left-label-container","left-label-container",-834990957),XQ=new K(null,"midnightblue","midnightblue",688164725),lx=new K(null,"render","render",-1408033454),JF=new K(null,"filter-text","filter-text",-381699202),RD=new K(null,"pointer-events","pointer-events",-1053858853),bo=new K(null,"end-pos","end-pos",-1643883926),YQ=new K(null,"foreground","foreground",499022036),cG=new K(null,"input-text-changed","input-text-changed",-1906799535),ZQ=new K(null,"est-item-height","est-item-height",-264466439),xD=new K(null,"border-bottom","border-bottom",2110948415),tF=new K(null,"on-change","on-change",-732046149),$Q=new K(null,"gainsboro","gainsboro",-218568880),aR=new r(null,"read-write","read-write",1818554410,null),bR=new K(null,"basic-time","basic-time",-923134899),cR=new K("re-com.dropdown","anchor-wrapper","re-com.dropdown/anchor-wrapper",-310465993),NI=new K(null,"http-no-on-failure","http-no-on-failure",962976084),Pv=new K(null,"queue","queue",1455835879),dR=new r(null,"if-let","if-let",1803593690,null),eR=new K(null,"lemonchiffon","lemonchiffon",1115945815),WO=new K(null,"effect_type","effect_type",1642394308),fR=new K(null,"pretty-print","pretty-print",-1314067013),gR=new K(null,"segment","segment",-964921196),hR=new K(null,"sort-by","sort-by",-322599303),iR=new r(null,"summary","summary",2021379479,null),jR=new K(null,"semicolon","semicolon",797086549),kR=new r(null,"disabled","disabled",110747309,null),lR=new K(null,"right-filter-result-count","right-filter-result-count",1601271062),mR=new K("font-size","large","font-size/large",-1749281411),zM=new K(null,"protein","protein",184296952),nR=new K(null,"uniprot-archaea","uniprot-archaea",2003855115),oR=new K(null,"mediumturquoise","mediumturquoise",2112212449),pR=new r(null,"letfn*","letfn*",-110097810,null),qR=new r(null,"first-child","first-child",-540335927,null),rR=new K(null,"focusable","focusable",1031236480),sR=new K(null,"red","red",-969428204),tR=new r(null,"cite","cite",-744995773,null),uR=new r(null,"active","active",-758473701,null),IH=new K(null,"fx-handler","fx-handler",-549783097),vR=new K(null,"rosybrown","rosybrown",1634897517),my=new K(null,"ref","ref",1289896967),wR=new r(null,"article","article",1618846482,null),Op=new K(null,"remaining-arg-count","remaining-arg-count",-1216589335),xR=new K(null,"rem","rem",-976484757),yR=new K("schmoho.dasudopit.client.panels.results.msa.events","get-msa-results-success","schmoho.dasudopit.client.panels.results.msa.events/get-msa-results-success",1137272933),zR=new K(null,"md-2","md-2",-1635087790),AR=new K(null,"md-3","md-3",158887357),BR=new K(null,"no-results-match","no-results-match",-1830285472),DG=new K(null,"add","add",235287739),CR=new K(null,"md-1","md-1",361379632),DR=new K(null,"md-6","md-6",-929946646),ER=new K(null,"md-4","md-4",363974045),FR=new K(null,"md-5","md-5",-1045052261),GR=new K(null,"status-icon?","status-icon?",1328423612),HR=new r(null,"defmacro","defmacro",2054157304,null),IR=new K(null,"range","range",1639692286),iy=new K(null,"cell","cell",764245084),JR=new K(null,"local-time","local-time",-1873195290),KR=new K(null,"darkcyan","darkcyan",-1999655442),vF=new K(null,"on-blur","on-blur",814300747),LR=new K(null,"subclass","subclass",1661186879),aL=new K(null,"proteomeCount","proteomeCount",1660467982),MR=new K("re-frame.std-interceptors","not-found","re-frame.std-interceptors/not-found",-1614827865),NR=new K(null,"vmax","vmax",-1435213544),ZP=new K(null,"left-label","left-label",-1662718913),wv=new K(null,"arglists","arglists",1661989754),tv=new K(null,"end-column","end-column",1425389514),OR=new K(null,"burlywood","burlywood",1747294160),PR=new r(null,"noscript","noscript",935754238,null),mJ=new K(null,"transition","transition",765692007),IK=new K("schmoho.dasudopit.client.routing","navigate","schmoho.dasudopit.client.routing/navigate",327419466),mQ=new K("routing.results","docking","routing.results/docking",-168277843),jM=new K(null,"primaryAccession","primaryAccession",903870118),QR=new K(null,"rad","rad",-833983012),RR=new r(null,"ruby","ruby",-653698108,null),SR=new K(null,"uniprot-viruses","uniprot-viruses",-210749393),QM=new K(null,"raw","raw",1604651272),fF=new K(null,"ins","ins",-1021983570),TR=new r(null,"binding","binding",-2114503176,null),UR=new K(null,"componentWillUnmount","componentWillUnmount",1573788814),Zx=new K(null,"className","className",-1983287057),VR=new K(null,"basic-date-time-no-ms","basic-date-time-no-ms",-899402179),WR=new K(null,"error-modal","error-modal",214887023),YR=new K(null,"export-button-renderer","export-button-renderer",1141971581),aJ=new K(null,"write","write",-1857649168),ZR=new K("re-com.nested-grid","corner-header-wrapper","re-com.nested-grid/corner-header-wrapper",1973300294),ZE=new K(null,"direction","direction",-633359395),SH=new K(null,"given","given",716253602),$R=new K(null,"row-header-content","row-header-content",-594512165),LC=new K(null,"align","align",1964212802),PP=new K(null,"filter","filter",-948537934),hD=new K(null,"b-border","b-border",-1277965683),aS=new K(null,"repeat-change?","repeat-change?",-961675100),bS=new K(null,"bottom-right","bottom-right",956401646),KJ=new K(null,"img","img",1442687358),cS=new K(null,"lightgrey","lightgrey",-729897351),dS=new K(null,"darkmagenta","darkmagenta",-1534491240),eS=new K(null,"search","search",1564939822),Mp=new K(null,"parameter-from-args","parameter-from-args",-758446196),jE=new K(null,"points","points",-1486596883),fS=new K(null,"gray","gray",1013268388),No=new K(null,"logical-block-callback","logical-block-callback",1612691194),js=new K(null,"selector","selector",762528866),gS=new K(null,"cancelable?","cancelable?",-986378679),hS=new K("provision","taxon","provision/taxon",-899097145),dP=new K(null,"effect_size_2","effect_size_2",-1124984894),iS=new K(null,"grad","grad",1125187229),VO=new K(null,"effect_size_1","effect_size_1",454993737),jS=new K(null,"dimgrey","dimgrey",265814984),sP=new K(null,"param","param",2013631823),WK=new K("taxon","id","taxon/id",-1278264438),kS=new K(null,"l-paren","l-paren",2052672514),lS=new K(null,"bottom-right-renderer","bottom-right-renderer",1863950426),tI=new K(null,"java","java",1958249105),bN=new r(null,"meta","meta",-1154898805,null),oo=new K(null,"indent","indent",-148200125),rk=new K(null,"descendants","descendants",1824886031),mS=new K(null,"otherwise","otherwise",-1127537137),nS=new K(null,"vmin","vmin",446546816),oS=new K(null,"showing-injected?","showing-injected?",-105733250),pS=new K(null,"lightgray","lightgray",-845833379),IL=new K(null,"location","location",1815599388),QI=new K(null,"handlers","handlers",79528781),qS=new K(null,"column-header-selection-fn","column-header-selection-fn",2096757610),rS=new K(null,"row-content-width","row-content-width",-1986261648),sS=new K(null,"white-space+","white-space+",1452157162),tL=new K(null,"close-button?","close-button?",-1030817687),qH=new K(null,"event-v","event-v",1378681365),qC=new K(null,"height","height",1025178622),fy=new K(null,"panel-2","panel-2",244198907),ey=new K(null,"panel-1","panel-1",998274139),tS=new K(null,"lawngreen","lawngreen",672111043),uS=new K(null,"route-params","route-params",2111411055),fL=new K(null,"lineage","lineage",1379001061),vS=new K(null,"darkslategrey","darkslategrey",-114797409),wS=new K(null,"selection-end","selection-end",696987835),SE=new K(null,"default-year","default-year",1658037695),iC=new K(null,"align-self","align-self",1475936794),xS=new K(null,"transitionPadding","transitionPadding",-1221120300),yS=new r(null,"span","span",-1259562778,null),oL=new K("popover","text","popover/text",2093273788),zS=new K(null,"blanchedalmond","blanchedalmond",-1397674477),oF=new K(null,"input","input",556931961),AS=new r(null,"doseq","doseq",221164135,null),BS=new K(null,"time-no-ms","time-no-ms",870271683),BH=new K(null,"fsm-state","fsm-state",1656310533),CS=new r(null,"details","details",-697640358,null),DS=new K(null,"data-target","data-target",-113904678),ES=new r(null,"throw","throw",595905694,null),FS=new K(null,"grid","grid",402978600),GS=new K(null,"length","length",588987862),HS=new K(null,"max-row-viewport-height","max-row-viewport-height",2061202688),Eq=new K(null,"char-format","char-format",-1016499218),IS=new K(null,"mediumvioletred","mediumvioletred",-1767902505),JS=new r(null,"blockquote","blockquote",2012795717,null),KS=new K(null,"limegreen","limegreen",-121735638),LS=new K(null,"darkslategray","darkslategray",348576839),MS=new r(null,"tbody","tbody",1559853227,null),NS=new K("provision","ligand","provision/ligand",-1930357922),OS=new K(null,"render-suggestion","render-suggestion",1472406503),PS=new K(null,"uniprot-human","uniprot-human",-989174173),QS=new K("schmoho.dasudopit.client.panels.data.events","http-failure","schmoho.dasudopit.client.panels.data.events/http-failure",-2076760437),cM=new K(null,"geneName","geneName",90639785),RS=new K(null,"sienna","sienna",-1559699358),SS=new K(null,"input-type","input-type",856973840),TS=new K(null,"deregister-event-handler","deregister-event-handler",-1096518994),US=new K(null,"title?","title?",-1510254555),OI=new K(null,"on-request","on-request",972531605),hP=new K(null,"gene_name_2","gene_name_2",-1778933157),VS=new r(null,"fn*","fn*",-752876845,null),cP=new K(null,"gene_name_1","gene_name_1",1310958386),ay=new K(null,"child","child",623967545),GI=new K(null,"last-method","last-method",-563909920),WS=new K("re-com.nested-v-grid","cell-grid","re-com.nested-v-grid/cell-grid",1481952793),XS=new K(null,"visibility","visibility",1338380893),EH=new K(null,"dispatch","dispatch",1319337009),ZS=new K(null,"row-headers","row-headers",1790514903),LI=new K(null,"http-no-on-success","http-no-on-success",-1593227158),$S=new K(null,"padding-top","padding-top",1929675955),aT=new K(null,"weekyear","weekyear",-74064500),hy=new K(null,"theme","theme",-1247880880),bT=new K(null,"orangered","orangered",-1851964317),cT=new K(null,"uniprot-vertebrates","uniprot-vertebrates",447224676),U=new K(null,"src","src",-1651076051),IP=new K(null,"layer","layer",-1601820589),dT=new K(null,"magenta","magenta",1687937081),eT=new K(null,"childContextTypes","childContextTypes",578717991),fT=new K(null,"column-footer-renderer","column-footer-renderer",1437275846),gT=new K("forms.docking.part-4","plddt-viewer","forms.docking.part-4/plddt-viewer",585566801),hT=new r(null,"last-of-type","last-of-type",986453331,null),bI=new K(null,"vendors","vendors",-153040496),iT=new K(null,"unwrap","unwrap",-1399175462),jT=new K(null,"light","light",1918998747),lT=new K(null,"header-spec","header-spec",1636767716),mT=new r(null,"last-child","last-child",-1323765444,null),nT=new K(null,"date-time-no-ms","date-time-no-ms",1655953671),mH=new K(null,"original-event","original-event",2121330403),oT=new K(null,"font","font",-1506159249),XK=new K(null,"statistics","statistics",-1140631984),pT=new K("data","structure","data/structure",1558650729),qT=new K(null,"just-drop?","just-drop?",-378249297),rT=new K("forms","all-forms","forms/all-forms",-123349875),sT=new K("schmoho.dasudopit.client.panels.results.subs","data","schmoho.dasudopit.client.panels.results.subs/data",1314563440),VL=new K(null,"binding-sites","binding-sites",499572823),tT=new K(null,"delete","delete",-1768633620),tM=new K(null,"proteome","proteome",166178322),uT=new K(null,"item-renderer","item-renderer",-743065410),vT=new K("data","volcano","data/volcano",-497400565),wT=new K(null,"lightblue","lightblue",-1333083084),lG=new K(null,"selected-item-id","selected-item-id",180338113),MI=new K(null,"on-failure","on-failure",842888245),xT=new K(null,"right-label-item-count","right-label-item-count",1865750626),qD=new K(null,"overflow","overflow",2058931880),yT=new K(null,"date-parser","date-parser",-981534587),Ut=new K(null,"directive","directive",793559132),zT=new K(null,"fixed-column-border-color","fixed-column-border-color",2036669142),PI=new K(null,"json","json",1279968570),zD=new K(null,"background-color","background-color",570434026),AT=new K(null,"hotpink","hotpink",1103829723),QP=new K(null,"bin","bin",-200999690),BT=new K(null,"above-right","above-right",791010942),aF=new K(null,"group","group",582596132),CT=new K(null,"on-export","on-export",1803619391),LO=new K("results","docking","results/docking",560393573),DT=new K(null,"dimgray","dimgray",-412750241),ET=new K(null,"ivory","ivory",-1259182451),FT=new K(null,"aquamarine","aquamarine",263648544),GT=new K(null,"mediumslateblue","mediumslateblue",-900241526),HT=new K("provision.taxon","input-model","provision.taxon/input-model",1516177260),ep=new K(null,"mandatory","mandatory",542802336),IT=new K("re-com.nested-grid","column-header","re-com.nested-grid/column-header",-446298155),OO=new K(null,"small","small",2133478704),JT=new K(null,"password","password",417022471),RP=new K(null,"maxbins","maxbins",-1005589312),zN=new K(null,"config","config",994861415),$H=new K(null,"nesting-behavior","nesting-behavior",-1555995755),dI=new K(null,"source","source",-433931539),KT=new K(null,"popover-border-color","popover-border-color",2142810267),LT=new K(null,"measure","measure",-1857519826),MT=new K("re-com.error-modal","body","re-com.error-modal/body",1623923708),QG=new K(null,"text-align","text-align",1786091845),ZF=new K(null,"c-input","c-input",-1821004232),NT=new K(null,"debug","debug",-1608172596),OT=new K(null,"chosen-drop","chosen-drop",1349975153),ls=new K(null,"else","else",-1508377146),Bp=new K(null,"seq","seq",-1817803783),PT=new r(null,"defn","defn",-126010802,null),Zv=new K(null,"set","set",304602554),QT=new K(null,"column-footer-height","column-footer-height",-1662618224),iG=new K(null,"heading","heading",-1312171873),RT=new K(null,"weekyear-week-day","weekyear-week-day",-740233533),ST=new K(null,"darkslateblue","darkslateblue",807219996),TT=new K(null,"point","point",1813198264),UT=new K(null,"uniprot-pdb","uniprot-pdb",-1556412235),VT=new K(null,"left-label-item-count","left-label-item-count",-960685406),WT=new K(null,"polygon","polygon",837053759),Zp=new K(null,"colinc","colinc",-584873385),XT=new K(null,"level4","level4",1467985519),YT=new K(null,"level3","level3",1192475079),yJ=new K(null,"level2","level2",-2044031830),JJ=new K(null,"level1","level1",813811133),ZT=new r(null,"empty","empty",-1886564811,null),$T=new r(null,"button","button",-1197855826,null),KI=new K(null,"on-success","on-success",1786904109),FK=new K("schmoho.dasudopit.client.common.forms","set-form-data","schmoho.dasudopit.client.common.forms/set-form-data",1684903879),Ub=new K(null,"print-length","print-length",1931866356),aU=new r(null,"aside","aside",-1240038232,null),kQ=new r(null,"right","right",1187949694,null),bU=new K(null,"subtitleFont","subtitleFont",-74541403),mA=new K(null,"code","code",1586293142),NO=new K(null,"docking-still-running?","docking-still-running?",529767002),tE=new K(null,"showing?","showing?",2094921488),rJ=new K(null,"sval","sval",1099195770),cU=new K("font-size","x-large","font-size/x-large",943734384),dU=new K(null,"slateblue","slateblue",79472627),eU=new K(null,"basic-week-date-time-no-ms","basic-week-date-time-no-ms",-2043113679),fU=new r(null,"body","body",-408674142,null),jy=new K(null,"edge","edge",919909153),gU=new r(null,"caption","caption",785147625,null),hU=new K("re-com.dropdown","anchor","re-com.dropdown/anchor",812839969),iU=new K(null,"animation-name","animation-name",-302195330),jU=new K(null,"comma","comma",1699024745),kU=new K(null,"radix","radix",857016463),lU=new K(null,"plum","plum",2022177528),mU=new r(null,"title","title",-2017930186,null),nU=new K(null,"crimson","crimson",-1192060857),SI=new K(null,"arrayBuilder","arrayBuilder",1446317421),oU=new K(null,"uniprot-viridiplantae","uniprot-viridiplantae",1786430518),qu=new K(null,"first","first",-644103046),pU=new K(null,"backdrop","backdrop",-1291357381),iF=new K(null,"component-did-mount","component-did-mount",-1126910518),bQ=new K("data","volcanos","data/volcanos",987009354),qU=new K(null,"khaki","khaki",-1417823979),VM=new K("forms.docking.part-1","valid?","forms.docking.part-1/valid?",718720668),rU=new K(null,"subfamily","subfamily",1284799037),sU=new K("schmoho.dasudopit.client.panels.results.msa.events","get-msa-results","schmoho.dasudopit.client.panels.results.msa.events/get-msa-results",1984086915),UI=new K(null,"mapBuilder","mapBuilder",-278083754),nE=new K(null,"tooltip-position","tooltip-position",936197013),tU=new K(null,"light-background","light-background",1498163900),uU=new K(null,"can-drop-above?","can-drop-above?",-1140582782),vU=new K(null,"line-height","line-height",1870784992),tH=new K(null,"run-queue","run-queue",-1701798027),wU=new K(null,"local-date","local-date",1829761428),WI=new K(null,"preferStrings","preferStrings",-1532249482),xU=new K(null,"cofx","cofx",2013202907),pD=new K(null,"class-name","class-name",945142584),yU=new K(null,"sort-fn","sort-fn",977815011),zU=new K(null,"xmlns","xmlns",-1862095571),AU=new K("font-size","xx-small","font-size/xx-small",-1582096184),ZI=new K(null,"writer","writer",-277568236),HN=new K(null,"spheres","spheres",1335715176),BU=new K(null,"neutral","neutral",-1941956087),CU=new K(null,"comp","comp",1191953630),sF=new K(null,"placeholder","placeholder",-104873083),fE=new K(null,"arrow","arrow",1071351425),NG=new K(null,"row-label-fn","row-label-fn",1457434308),SG=new K(null,"cell-style","cell-style",1087536089),FG=new K(null,"drop","drop",364481611),DU=new K(null,"darksalmon","darksalmon",-896495551),EU=new r(null,"recur","recur",1202958259,null),FU=new K(null,"titleFontWeight","titleFontWeight",-1346956866),oG=new K(null,"on-double-click","on-double-click",1434856980),GU=new K(null,"kHz","kHz",240398466),HU=new r(null,"indeterminate","indeterminate",1127490551,null),GJ=new K("data","ligand","data/ligand",1740958379),YG=new K(null,"row-height","row-height",527360749),IU=new K(null,"aqua","aqua",745022417),JU=new r("cljs.core","unquote","cljs.core/unquote",1013085760,null),KU=new K(null,"arrow-width","arrow-width",1926673833),LU=new K(null,"set-to-filter","set-to-filter",1270184073),MU=new r(null,"defn-","defn-",1097765044,null),nD=new K(null,"padding","padding",1660304693),NU=new K(null,"original-text","original-text",744448452),HH=new K(null,"effects","effects",-282369292),vH=new K(null,"add-event","add-event",938429088),OU=new K(null,"darkseagreen","darkseagreen",410063911),PU=new K(null,"papayawhip","papayawhip",-330388621),QU=new K(null,"dark","dark",1818973999),RU=new K("re-com.text","title-label","re-com.text/title-label",382549246),SU=new K(null,"enter-drop?","enter-drop?",1054029717),TU=new K(null,"floralwhite","floralwhite",1656937461),UU=new K(null,"checked","checked",-50955819),HG=new K(null,"asc","asc",356854569),VU=new K("upload","structure","upload/structure",254428436),WU=new K(null,"suborder","suborder",-2096334557),XU=new K("routing.data","ligand-entry","routing.data/ligand-entry",1826968623),YU=new K(null,"superkingdom","superkingdom",-774816053),ZU=new K(null,"t-time","t-time",-42016318),$U=new r(null,"wbr","wbr",1869193327,null),aV=new r(null,"ns*","ns*",1840949383,null),oE=new K(null,"button","button",1456579943),pF=new K(null,"type","type",1174270348),bV=new K(null,"none","none",1333468478),cV=new K(null,"secondary","secondary",-669381460),QD=new K(null,"position","position",-2011731912),wG=new K(null,"radio-button","radio-button",1176268647),Ys=new K(null,"else-params","else-params",-832171646),dV=new r(null,"out-of-range","out-of-range",-1962117180,null),eV=new K(null,"lightyellow","lightyellow",1576303380),fV=new r(null,"header","header",1759972661,null),gV=new K(null,"&:after","&:after",-945103658),WD=new K(null,"left","left",-399115937),hV=new K(null,"steelblue","steelblue",1620562381),RB=new K(null,"flex","flex",-1425124628),kD=new K(null,"size","size",1098693007),aO=new K(null,"encoding","encoding",1728578272),WL=new K(null,"has-afdb?","has-afdb?",23354138),iV=new r(null,"js","js",-886355190,null),jV=new K(null,"olive","olive",-2080542466),kV=new K(null,"darkolivegreen","darkolivegreen",-2098617596),lV=new r(null,"meter","meter",1452889916,null),HJ=new K("ligand","id","ligand/id",-335804633),mV=new r(null,"case*","case*",-1938255072,null),hI=new K(null,"css","css",1135045163),uH=new K(null,"idle","idle",-2007156861),ku=new K(null,"right","right",-452581833),nV=new K(null,"groupEnd","groupEnd",-337721382),sG=new K(null,"text-decoration","text-decoration",1836813207),oV=new r(null,"li","li",-1930876848,null),pV=new K(null,"lightsteelblue","lightsteelblue",-209586236),hx=new K(null,"auto-run","auto-run",1958400437),qV=new K(null,"status-tooltip","status-tooltip",1912159007),rV=new K(null,"swissprot","swissprot",239750938),sV=new K(null,"uniprot-eukaryota","uniprot-eukaryota",1399395426),tV=new K(null,"bisque","bisque",-862836634),II=new K(null,"last-error-code","last-error-code",276598110),uV=new K(null,"validation-regex","validation-regex",-197064361),vV=new r(null,"strong","strong",1910060527,null),wV=new K(null,"max-rows","max-rows",-2131113613),NN=new K(null,"init-width","init-width",1111947556),xV=new K(null,"thumb-ratio","thumb-ratio",634209799),yV=new r(null,"img","img",-1211748411,null),tO=new K("params.uniprot","protein","params.uniprot/protein",1255582181),zV=new K(null,"turn","turn",75759344),AV=new r(null,"fullscreen","fullscreen",1636160473,null),BV=new r(null,"ns","ns",2082130287,null),iH=new K(null,"stack","stack",-793405930),bL=new K(null,"synonyms","synonyms",1693474381),CV=new K(null,"error-color","error-color",-332587474),XF=new K(null,"c-search","c-search",1832536180),DV=new K(null,"lg-6","lg-6",-1523328932),EV=new K(null,"lg-4","lg-4",-1041167353),FV=new K(null,"strable","strable",1877668047),GV=new K(null,"lg-5","lg-5",567769477),EG=new K(null,"flip","flip",2033871302),HV=new r(null,"ins","ins",618547957,null),IV=new r(null,"ol","ol",-1721911718,null),JV=new K(null,"uniprotkb","uniprotkb",-1088422389),KV=new K(null,"lg-2","lg-2",295083487),LV=new K(null,"lg-3","lg-3",-1353169097),MV=new r(null,"timeParser","timeParser",1585048034,null),NV=new K(null,"gold","gold",-806826416),ZK=new K(null,"reviewedProteinCount","reviewedProteinCount",-2114188645),OV=new K(null,"lg-1","lg-1",-1614525368),PV=new r(null,"dateParser","dateParser",-1248418930,null),QV=new K("data","proteomes","data/proteomes",-42877832),WH=new K(null,"keyframes","keyframes",-1437976012),RV=new K(null,"failures","failures",-912916356),TD=new K(null,"top","top",-1856271961),bO=new K(null,"field","field",-1302436500),SV=new K(null,"week-date-time","week-date-time",540228836),cJ=new K(null,"remainder","remainder",1046186872),TV=new K(null,"phylum","phylum",317405443),Yp=new K(null,"mincol","mincol",1230695445),eM=new K(null,"orderedLocusNames","orderedLocusNames",-1669039606),UV=new K(null,"brown","brown",1414854429),VV=new K(null,"half","half",741990005),WV=new K(null,"middle-section","middle-section",-353695846),XV=new r(null,"set!","set!",250714521,null),XD=new K(null,"title","title",636505583),YV=new r(null,"link","link",-128631941,null),AF=new K(null,"chosen-single","chosen-single",1842138125),$V=new K(null,"dispatch-n","dispatch-n",-504469236),aW=new K(null,"not-delivered","not-delivered",1599158697),bW=new r(null,"select","select",-1506602266,null),ho=new K(null,"miser-width","miser-width",-1310049437),cW=new K(null,"row-footer-renderer","row-footer-renderer",2060844986),dW=new K(null,"titleFontSize","titleFontSize",-1632214750),eW=new K(null,"lavender","lavender",-1469567809),fW=new r(null,"rp","rp",-647737686,null),pI=new K(null,"#4db6ac","#4db6ac",355307138),HF=new K(null,"loading?","loading?",1905707049),gW=new K(null,"outline-offset","outline-offset",1155254595),yD=new K(null,"border-radius","border-radius",419594011),hW=new r(null,"rt","rt",-2030955077,null),iW=new K(null,"selecting","selecting",-1699771909),jW=new K(null,"trembl","trembl",184451951),lW=new r(null,"with-local-vars","with-local-vars",837642072,null),mW=new K(null,"div.popover.fade.in","div.popover.fade.in",-106226512),yE=new K(null,"right-below","right-below",586981827),nW=new K("data","proteomes-list","data/proteomes-list",-992539578),oW=new K(null,"seashell","seashell",1208259012),pW=new r(null,"th","th",1094922961,null),qW=new K(null,"data-toggle","data-toggle",436966687),rW=new r(null,"td","td",-1174502416,null),sW=new r(null,"tr","tr",215756881,null),tW=new r(null,"area","area",2112538783,null),uW=new K(null,"sequential","sequential",-1082983960),vW=new K("re-com.tree-select","label","re-com.tree-select/label",-111075912),AP=new K("forms","volcano-viewer","forms/volcano-viewer",764474630),wW=new K(null,"darkgreen","darkgreen",2002841276),vJ=new K(null,"cid","cid",-1940591320),xW=new r(null,"ul","ul",291010124,null),ru=new K(null,"allows-separator","allows-separator",-818967742),BK=new K("data","volcanos-list","data/volcanos-list",-1413944394),yW=new K(null,"left-above","left-above",1205957481),zW=new K(null,"pink","pink",393815864),AW=new K(null,"uniprot-mammals","uniprot-mammals",-1174897374),BW=new K(null,"column-section-right","column-section-right",1595609580),CW=new K(null,"mediumaquamarine","mediumaquamarine",1476241181),DW=new K(null,"azure","azure",1864287702),EW=new K(null,"below-right","below-right",1598040732),FW=new K("re-com.dropdown","backdrop","re-com.dropdown/backdrop",358193923),NL=new K(null,"location-str","location-str",-785502349),cD=new K(null,"min-height","min-height",398480837),GW=new K(null,"honeydew","honeydew",297211825),HW=new K("schmoho.dasudopit.client.common.http","register-running-query","schmoho.dasudopit.client.common.http/register-running-query",378512464),hH=new K(null,"coeffects","coeffects",497912985),TI=new K(null,"map-builder","map-builder",-1843343288),IW=new K(null,"inject-global-interceptors","inject-global-interceptors",-2144129737),MH=new K(null,"chunk","chunk",-1191159620),JW=new K(null,"Hz","Hz",-1958732916),KW=new K(null,"column-headers","column-headers",-966500841),LW=new K("routing.data","ligand","routing.data/ligand",-2119608733),MW=new r(null,"head","head",869147608,null),wF=new K(null,"filter-box?","filter-box?",-1157583688),NW=new r(null,"invalid","invalid",2053401043,null),Bo=new K(null,"buffer-blob","buffer-blob",-1830112173),yP=new K("schmoho.dasudopit.client.panels.volcano-viewer.events","selection","schmoho.dasudopit.client.panels.volcano-viewer.events/selection",1178029295),OW=new K(null,"rettag","rettag",-602973235),ML=new K(null,"features","features",-1146962336),MP=new K(null,"y-label","y-label",414010672),PW=new r(null,"hover","hover",1299389816,null),QW=new K(null,"rows","rows",850049680),VK=new K("data","taxon","data/taxon",-333100900),eD=new K(null,"justify","justify",-722524056),UB=new K(null,"-webkit-justify-content","-webkit-justify-content",205818059),iO=new K("forms","msa","forms/msa",1643721886),WF=new K(null,"input-text","input-text",-1336297114),RW=new K(null,"viewer","viewer",-783949853),SW=new K(null,"row-selection-fn","row-selection-fn",274335562),TW=new K(null,"top-left","top-left",-1396159636),UW=new K(null,"nowrap","nowrap",457264988),jQ=new K("routing.data","overview","routing.data/overview",464459615),VW=new K(null,"uniprot-bacteria","uniprot-bacteria",1123400236),WW=new K(null,"alignment","alignment",1040093386),CF=new K(null,"margin-right","margin-right",809689658),XW=new K(null,"tab","tab",-559583621),YW=new K(null,"*current-item-id","*current-item-id",-119097013),LH=new K(null,"feature","feature",27242652),Qw=new K(null,"tag","tag",-1290361223),ZW=new K(null,"tan","tan",1273609893),mE=new K(null,"label","label",1718410804),fJ=new K(null,"queries","queries",1446291995),$W=new K(null,"local-date-opt-time","local-date-opt-time",1178432599),iQ=new K("routing","home","routing/home",-1929004859),aX=new K(null,"close-button","close-button",1885538121),Wx=new K(null,"reagent-render","reagent-render",-985383853),bX=new K(null,"teal","teal",1231496088),cX=new r(null,"loop*","loop*",615029416,null),dX=new K(null,"contextTypes","contextTypes",-2023853910),eX=new K(null,"arrow-gap","arrow-gap",1490206257),fX=new K(null,"parse-error","parse-error",255902478),gX=new K(null,"date-hour-minute-second-ms","date-hour-minute-second-ms",-425334775),hX=new K(null,"enable","enable",-1839114332),iX=new K(null,"on-export-row-label-fn","on-export-row-label-fn",622654867),jX=new r(null,"dateTimeParser","dateTimeParser",-1493718282,null),VE=new K(null,"openable","openable",1470121013),qs=new K(null,"right-params","right-params",-1790676237),pE=new K(null,"disabled","disabled",-1529784218),gA=new K(null,"impl","impl",1677848700),kX=new r(null,"code","code",-1068142627,null),ej=new K("cljs.core","not-found","cljs.core/not-found",-1572889185),pJ=new K(null,"ival","ival",-1008757881),lX=new K(null,"dodgerblue","dodgerblue",-1678389350),mX=new K(null,"frames","frames",1765687497),nX=new K("provision.taxon","post-query-state","provision.taxon/post-query-state",-1277471695),GC=new K(null,"min-width","min-width",1926193728),KG=new K(null,"viewBox","viewBox",-469489477),oX=new K(null,"mysql","mysql",-1431590210),pX=new K(null,"strokeWidth","strokeWidth",-2130848332),qX=new K(null,"uniparc","uniparc",-1478140664),rX=new K(null,"yellow","yellow",-881035449),sX=new r(null,"br","br",-1720330977,null),tX=new K(null,"indianred","indianred",-1829312906),uX=new K(null,"status-text","status-text",-1834235478),vX=new K(null,"auto-complete?","auto-complete?",979505177),Pq=new K(null,"func","func",-238706040),wX=new K(null,"yield","yield",177875009),vD=new K(null,"border-right","border-right",-668932860),qL=new K(null,"popover","popover",-1809582136),xX=new K("provision.taxon","search-result","provision.taxon/search-result",413872252),yX=new K(null,"headers","headers",-835030129),lE=new K(null,"stroke-width","stroke-width",716836435),zX=new r(null,"dd","dd",300093898,null),AX=new r(null,"do","do",1686842252,null),tD=new K(null,"align-items","align-items",-267946462),BX=new r(null,"dl","dl",-499620186,null),CX=new K("schmoho.dasudopit.client.panels.results.msa.events","start-msa-success","schmoho.dasudopit.client.panels.results.msa.events/start-msa-success",800350817),DX=new K(null,"global","global",93595047),EX=new r(null,"dt","dt",1272086768,null),FX=new K(null,"comment","comment",532206069),tG=new K(null,"list-group-item","list-group-item",1978708789),GX=new K(null,"beige","beige",836725695),VN=new K(null,"signal-listeners","signal-listeners",-628875220),HX=new r(null,"em","em",-1946622734,null),IX=new K(null,"done","done",-889844188),JX=new K("schmoho.dasudopit.client.panels.data.subs","data","schmoho.dasudopit.client.panels.data.subs/data",29461040),JH=new K(null,"identifier","identifier",-805503498),KX=new K(null,"aria-controls","aria-controls",-1872379154),LX=new r(null,"h3","h3",-586824606,null),gN=new K("forms","by-path","forms/by-path",-2014160347),MX=new r(null,"h4","h4",-649572776,null),NX=new r(null,"h5","h5",-188625098,null),OX=new r(null,"h6","h6",-2097141989,null),PX=new r(null,"fn","fn",465265323,null),QX=new r(null,"h1","h1",-256355935,null),RX=new r(null,"h2","h2",1267868799,null),SX=new r(null,"dotimes","dotimes",-818708397,null),sJ=new K(null,"binary","binary",-1802232288),TX=new K(null,"chartreuse","chartreuse",-1626529775),UX=new K(null,"data-parent","data-parent",-662504021),VX=new K(null,"row-header-selection-rect","row-header-selection-rect",-1802701930),WX=new r(null,"cond","cond",1606708055,null),XX=new K(null,"mediumpurple","mediumpurple",-1891751018),uF=new K(null,"on-key-down","on-key-down",-1374733765),fx=new K(null,"key","key",-1516042587),oI=new K(null,"font-weight","font-weight",2085804583),eE=new K(null,"svg","svg",856789142),YX=new r("clojure.core","deref","clojure.core/deref",188719157,null),ZX=new K("pipeline","uuid","pipeline/uuid",1980824123),bJ=new K(null,"reader","reader",169660853),iN=new K("forms.docking.part-2","valid?","forms.docking.part-2/valid?",718720667),$X=new r(null,"hr","hr",-1276695702,null),ko=new K(null,"logical-block","logical-block",-581022564),BM=new K(null,"protein-model","protein-model",662536489),aY=new K(null,"sub","sub",-2093760025),bY=new r(null,"if","if",1181717262,null),XM=new K("forms.docking.part-1","ligand-model","forms.docking.part-1/ligand-model",-1073060634),cY=new r(null,"timeElementParser","timeElementParser",302132553,null),dY=new K(null,"darkorchid","darkorchid",-1255783536),eY=new K(null,"basic-ordinal-date-time","basic-ordinal-date-time",1054564521),TK=new K(null,"regular","regular",-1153375582),fY=new K(null,"lightslategray","lightslategray",-1109503825),gY=new K(null,"suggestions-container","suggestions-container",-24757721),fA=new K(null,"part","part",77757738),kW=new r(null,"uuid","uuid",-504564192,null),Tb=new K(null,"dup","dup",556298533),zE=new K(null,"on-cancel","on-cancel",-2071892932),Np=new K(null,"status","status",-1997798413),X=new K(null,"style","style",-496642736),hY=new K(null,"top-left-renderer","top-left-renderer",2010514596),iY=new K(null,"left-list-box","left-list-box",1536423030),jY=new r(null,"only-child","only-child",220029032,null),VI=new K(null,"prefer-strings","prefer-strings",1254507185),kY=new r(null,"struct-map","struct-map",-1387540878,null),Uo=new K(null,"end-block-t","end-block-t",1544648735),lY=new K(null,"greenyellow","greenyellow",1380924629),mY=new K(null,"ordinal-date-time-no-ms","ordinal-date-time-no-ms",-1539005490),nY=new K("protein","id","protein/id",-790527279),oY=new K(null,"space+","space+",378127624),pY=new K(null,"content-length","content-length",441319507),NJ=new K(null,"scientificName","scientificName",-1456549436),QE=new K(null,"timezone","timezone",1831928099),qY=new K(null,"orchid","orchid",-1953715528),rY=new K(null,"salmon","salmon",-1093653298),sY=new K(null,"stream","stream",1534941648),tY=new r(null,"figure","figure",1079137448,null),uY=new K(null,"severity","severity",175684886),vY=new K(null,"lightslategrey","lightslategrey",1806136178),oJ=new K(null,"urn","urn",-1943666359),wY=new K(null,"url","url",276297046),zH=new K(null,"paused","paused",-1710376127),xY=new K(null,"week-date","week-date",-1176745129),YD=new K(null,"on-mouse-enter","on-mouse-enter",-1664921661),yY=new r(null,"embed","embed",285618178,null),zY=new K(null,"lightsalmon","lightsalmon",278000114),AY=new r(null,"script","script",336087726,null),BY=new K(null,"free-text?","free-text?",1157444543),CY=new r(null,"abbr","abbr",-565843885,null),DY=new K(null,"mediumblue","mediumblue",-1579936616),EY=new K(null,"olivedrab","olivedrab",477000042),Nq=new K(null,"params","params",710516235),Uv=new K(null,"map","map",1371690461),FY=new K(null,"dpi","dpi",-986162832),GY=new K(null,"uniref-100","uniref-100",540121360),ao=new K(null,"max","max",61366548),HY=new K(null,"basic-t-time","basic-t-time",191791391),IY=new K(null,"export-header-label","export-header-label",-121029282),FI=new K(null,"uri","uri",-774711847),nP=new K(null,"bind","bind",-113428417),JY=new K(null,"genomicFields","genomicFields",1205074314),xv=new K(null,"doc","doc",1913296891),wE=new K(null,"md-icon-name","md-icon-name",681785863),KY=new r(null,"catch","catch",-1616370245,null),LG=new K(null,"path","path",-188191168),xN=new K(null,"cartoon","cartoon",-340139491),rE=new K(null,"on-mouse-out","on-mouse-out",643448647),gG=new K(null,"filter-input-text","filter-input-text",-717594502),DI=new K(null,"handler","handler",-195596612),LY=new K(null,"warning-color","warning-color",924289810),MY=new K(null,"peachpuff","peachpuff",-1932127734),qJ=new K(null,"fval","fval",2088226979),NY=new K(null,"expanded?","expanded?",2055832296),mu=new K(null,"separator","separator",-1628749125),PY=new K(null,"padding-right","padding-right",-1250249681),DO=new K(null,"cluster-types","cluster-types",-1312742939),QY=new r(null,"datalist","datalist",405488053,null),RY=new K("schmoho.dasudopit.client.common.http","http-get-success","schmoho.dasudopit.client.common.http/http-get-success",-298456760),SY=new r("clojure.core","unquote","clojure.core/unquote",843087510,null),TY=new K(null,"powderblue","powderblue",65928114),vO=new K(null,"use-blast?","use-blast?",-823596982),mG=new K(null,"li.group-result","li.group-result",1074686727),wN=new K(null,"objects","objects",2099713734),UY=new K(null,"sort-comp","sort-comp",-667012852),uN=new K(null,"taxon-id","taxon-id",1281314911),co=new K(null,"start-pos","start-pos",668789086),VY=new K(null,"r-brace","r-brace",-1335738887),xE=new K(null,"info","info",-317069002),jH=new K("re-frame.interceptor","original-exception?","re-frame.interceptor/original-exception?",-527923945),WY=new K(null,"oldlace","oldlace",-966038915),XE=new K(null,"down","down",1565245570),XY=new K(null,"chocolate","chocolate",772404615),YY=new K("provision.ligand","post-query-state","provision.ligand/post-query-state",718024198),Fv=new K(null,"test","test",577538877),ZY=new r(null,"fieldset","fieldset",-309239289,null),dA=new K(null,"div","div",1057191632),fG=new K(null,"center","center",-748944368),$Y=new K(null,"sm-6","sm-6",113033042),aZ=new K(null,"sm-5","sm-5",-1785481937),bZ=new r(null,"menu","menu",1992786725,null),cZ=new K(null,"sm-2","sm-2",-1237201019),dZ=new K(null,"sm-1","sm-1",687624747),eZ=new K(null,"sm-4","sm-4",-1482733062),fZ=new K(null,"sm-3","sm-3",1305919781),gZ=new K("provision.ligand","search-term-model","provision.ligand/search-term-model",1499426287),hZ=new K(null,"darkturquoise","darkturquoise",-80977765),iZ=new r(null,"optional","optional",-600484260,null),jZ=new K(null,"success-event","success-event",2038143820),kZ=new K(null,"bottom-left","bottom-left",1607421488),lZ=new r(null,"only-of-type","only-of-type",-1960460626,null),mZ=new r(null,"progress","progress",1884855074,null),$t=new K(null,"generator-fn","generator-fn",811851656),TB=new K(null,"flex-flow","flex-flow",544537375),YP=new K(null,"go-filter","go-filter",1082837175),$I=new K(null,"json-verbose","json-verbose",-542533531),nZ=new K(null,"on-focus","on-focus",-13737624),oZ=new K(null,"get-route-data","get-route-data",-619444727),pZ=new K(null,"blueviolet","blueviolet",887936463),SN=new K(null,"signal-handlers","signal-handlers",604610479),bF=new K(null,"text","text",-1790561697),nG=new K(null,"padding-left","padding-left",-1180879053),ix=new K(null,"on-set","on-set",-140953470),qZ=new K("routing.data","taxon-entry","routing.data/taxon-entry",-1110414902),xJ=new K(null,"level","level",1290497552),rZ=new K(null,"sticky","sticky",-2121213869),CD=new K(null,"disabled?","disabled?",-1523234181),sZ=new K(null,"t-time-no-ms","t-time-no-ms",990689905),tZ=new K(null,"middle-spacer","middle-spacer",2062831011),uZ=new K(null,"dpcm","dpcm",-1187601236),vZ=new K(null,"loaded?","loaded?",-1108015206),OP=new K(null,"transform","transform",1381301764),rN=new K("forms.docking.part-4","plddt-cutoff","forms.docking.part-4/plddt-cutoff",-904412784),wZ=new K(null,"ellipsis","ellipsis",998505738),lJ=new K(null,"box-shadow","box-shadow",1600206755),Kx=new K(null,"on-write","on-write",31519475),xZ=new K("re-com.nested-v-grid","row-header-grid","re-com.nested-v-grid/row-header-grid",254331951),sk=new K(null,"ancestors","ancestors",-776045424),hu=new K(null,"def","def",-1043430536),yZ=new K(null,"deg","deg",-681556081),zZ=new K(null,"focused","focused",1851572115),ky=new K(null,"component","component",1555936782),AZ=new K(null,"max-selected-items","max-selected-items",2143819689),BZ=new r(null,"iframe","iframe",-1770013743,null),CZ=new K(null,"kingdom","kingdom",-2098966429),DZ=new K(null,"large","large",-196820544),Zr=new K(null,"overflowchar","overflowchar",-1620088106),kP=new K(null,"table","table",-564943036),$s=new K(null,"min-remaining","min-remaining",962687677),EZ=new r(null,"pre","pre",-535978900,null),ZN=new K(null,"$schema","$schema",1635092088),AI=new K(null,"response-format","response-format",1664465322),FZ=new K(null,"success-color","success-color",-1583127221),GZ=new K(null,"threshold","threshold",204221583),HZ=new K(null,"inherit","inherit",-1840815422),RO=new K(null,"blast-still-running?","blast-still-running?",-1990063970),TF=new K(null,"model","model",331153215),IZ=new K(null,"table-padding","table-padding",-702873839),JZ=new K(null,"capitalize?","capitalize?",-2078576456),AK=new K(null,"keyword-fn","keyword-fn",-64566675),OZ=new K(null,"z-index","z-index",1892827090),PZ=new K(null,"underline","underline",2018066703),QZ=new r(null,"target","target",1893533248,null),DF=new K(null,"open","open",-1763596448),DJ=new K(null,"header-label","header-label",765876429),gx=new K(null,"on-dispose","on-dispose",2105306360),RZ=new r(null,"output","output",534662484,null),i_=new K(null,"log","log",-1595516004),o_=new K(null,"springgreen","springgreen",-1241565454),q_=new K(null,"parse","parse",-1162164619),r_=new K("re-com.error-modal","modal","re-com.error-modal/modal",-509132541),s_=new K(null,"suggestion","suggestion",1624613388),OY=new K(null,"validator","validator",-1966190681),t_=new r(null,"time","time",-1268547887,null),qE=new K(null,"on-mouse-over","on-mouse-over",-858472552),u_=new K(null,"row-footers","row-footers",-681026731),G_=new K(null,"cornflowerblue","cornflowerblue",-1713148307),aN=new K(null,"plddt-cutoff","plddt-cutoff",815254296),RI=new K(null,"array-builder","array-builder",1275998041),K_=new K(null,"sampleLength","sampleLength",2015604276),N_=new K(null,"on-drop","on-drop",1867868491),JD=new K(null,"parts","parts",849007691),O_=new K(null,"pre-theme","pre-theme",-1454266181),$N=new K(null,"mark","mark",-373816345),P_=new K(null,"basic-date-time","basic-date-time",1525413604),SP=new K(null,"aggregate","aggregate",1511468442),pP=new K(null,"step","step",1288888124),vn=new K(null,"base","base",185279322),Q_=new K(null,"wheat","wheat",783520466),MD=new K(null,"top-offset","top-offset",1235816245),vE=new K(null,"emphasise?","emphasise?",1618294247),R_=new K(null,"exclude-all-button","exclude-all-button",887045557),V_=new K(null,"date-opt-time","date-opt-time",-1507102105),W_=new K(null,"_suggestion-to-string","_suggestion-to-string",795407399),X_=new K(null,"date-time-parser","date-time-parser",-656147568),TE=new K(null,"not-implemented","not-implemented",1918806714),Sn=new K(null,"type-tag","type-tag",-1873863267),yH=new K(null,"exception","exception",-335277064),Y_=new K(null,"<-","<-",760412998),g0=new K(null,"right-center","right-center",2147253074),iD=new K(null,"max-width","max-width",-1939924051),sE=new K(null,"below-center","below-center",-2126885397),h0=new K(null,"weekyear-week","weekyear-week",795291571),LK=new K(null,"actions","actions",-812656882),i0=new K(null,"deeppink","deeppink",1577828374),q0=new K(null,"_on-change","_on-change",156649312),rM=new K(null,"<>","<>",1280186386),hF=new K(null,"choices","choices",1385611597),qG=new K(null,"label-fn","label-fn",-860923263),s0=new K(null,"silver","silver",1044501468),t0=new K(null,"darkred","darkred",1564487633),u0=new K(null,"_change-on-blur?","_change-on-blur?",1219941073),y0=new K(null,"aliceblue","aliceblue",-1185534108),SB=new K(null,"-webkit-flex-flow","-webkit-flex-flow",667076810),z0=new K(null,"year-month","year-month",735283381),OD=new K(null,"wrapper","wrapper",-969103524),A0=new K(null,"suppress-namespaces","suppress-namespaces",2130686956),B0=new K(null,"date-element-parser","date-element-parser",2072167040),wI=new K(null,"content-type","content-type",-508222634),C0=new K("re-com.error-modal","top-bar","re-com.error-modal/top-bar",-1123436494),D0=new K("re-com.nested-grid","row-header-wrapper","re-com.nested-grid/row-header-wrapper",-983747999),tn=new K(null,"cur","cur",1153190599),NE=new K(null,"target","target",253001721),E0=new K(null,"background-image","background-image",-1142314704),F0=new K(null,"on-no-results-match-click","on-no-results-match-click",1927765286),G0=new K(null,"nil","nil",99600501),H0=new K(null,"proteome-id","proteome-id",-1448586606),OF=new K(null,"change-on-blur?","change-on-blur?",854283925),I0=new K("re-com.nested-grid","cell-grid-container","re-com.nested-grid/cell-grid-container",1252223063),J0=new K(null,"lightgreen","lightgreen",-1542529498),K0=new K("re-com.dropdown","body-wrapper","re-com.dropdown/body-wrapper",-1183586298),L0=new K(null,"http-xhrio","http-xhrio",1846166714),Vn=new K(null,"trailing-white-space","trailing-white-space",1496006996),Gy=new K(null,"data-rc-src","data-rc-src",-344701880),M0=new K(null,"relative-to","relative-to",-470100051),N0=new K(null,"anchor-top","anchor-top",-1120009728),O0=new r(null,"html","html",641734630,null),P0=new K(null,"right-above","right-above",832458485),UL=new K(null,"active-sites","active-sites",-557673270),zI=new K(null,"url-params","url-params",-697567619),eG=new K(null,"filter-text-box","filter-text-box",-1298637056),LP=new K(null,"x-label","x-label",802517907),RN=new K(null,"spec","spec",347520401),Q0=new K("schmoho.dasudopit.client.common.http","queries","schmoho.dasudopit.client.common.http/queries",1698982261),R0=new K(null,"navajowhite","navajowhite",1463125346),S0=new K(null,"on-enter-press","on-enter-press",1454045387),cF=new K(null,"sel-start","sel-start",175359789),T0=new r(null,"when-let","when-let",-1383043480,null),UO=new K(null,"effect_size","effect_size",-356243045),U0=new K(null,"active-panel","active-panel",-1802545994),MF=new K(null,"priority","priority",1431093715),V0=new r(null,"thead","thead",1348656231,null),op=new K(null,"current","current",-1088038603),W0=new K(null,"hide-border?","hide-border?",1792698922),X0=new r(null,"->","->",-2139605430,null),T=new K(null,"class","class",-2030961996),Y0=new r(null,"command","command",745990803,null),Z0=new r(null,"..","..",-300507420,null),sm=new K(null,"default","default",-1987822328),jx=new K(null,"reagentRender","reagentRender",-358306383),$0=new K("schmoho.dasudopit.client.panels.results.msa.events","http-failure","schmoho.dasudopit.client.panels.results.msa.events/http-failure",232711176),a1=new K(null,"ul.chosen-choices","ul.chosen-choices",753954766),b1=new K("provision.ligand","search-result","provision.ligand/search-result",999854769),MG=new K(null,"vertical-align","vertical-align",651007333),c1=new K(null,"with-credentials","with-credentials",-1163127235),d1=new K(null,"border-dark","border-dark",-1486742501),e1=new K(null,"throbber","throbber",-1896677161),aM=new K(null,"protein-name","protein-name",2077655130),f1=new K(null,"date-hour-minute-second-fraction","date-hour-minute-second-fraction",1937143076),g1=new r(null,"keygen","keygen",1068838274,null),h1=new K("re-com.tree-select","dropdown-indicator-triangle","re-com.tree-select/dropdown-indicator-triangle",-806351935),nL=new K("popover","title","popover/title",1299066956),i1=new K(null,"hour-minute-second","hour-minute-second",-1906654770),rL=new r(null,"first","first",996428481,null),j1=new K(null,"light-foreground","light-foreground",-759500766),XI=new K(null,"prefer-buffers","prefer-buffers",377042081),k1=new K(null,"multi-select?","multi-select?",973156151),no=new K(null,"per-line-prefix","per-line-prefix",846941813),l1=new K(null,"background","background",-863952629),m1=new K(null,"chosen-results","chosen-results",-2092754283),UP=new K(null,"content","content",15833224),WP=new K("forms.volcano","go-term-selection","forms.volcano/go-term-selection",1501676136),n1=new r(null,"small","small",-520957065,null),nH=new K(null,"event-handler","event-handler",-487718843),o1=new K(null,"left-below","left-below",1290111351),p1=new K(null,"popover-color","popover-color",-2019049119),q1=new r(null,"col","col",-318831557,null),r1=new K("data","by-path","data/by-path",1981202330),s1=new K(null,"as-exclusions?","as-exclusions?",-55596285),uG=new K(null,"checkbox","checkbox",1612615655),t1=new K(null,"l-brace","l-brace",613286657),To=new K(null,"end","end",-268185958),u1=new K(null,"background-clip","background-clip",1705503920),QN=new K(null,"renderer","renderer",336841071),iE=new K(null,"polyline","polyline",-1731551044),v1=new K(null,"ghostwhite","ghostwhite",-1030428888),w1=new K(null,"post","post",269697687),x1=new K(null,"rules","rules",1198912366),y1=new K("re-com.nested-v-grid","corner-header-grid","re-com.nested-v-grid/corner-header-grid",35380063),HM=new K("routing.pipelines","msa","routing.pipelines/msa",463210360),qk=new K(null,"parents","parents",-2027538891),pL=new K("popover","showing?","popover/showing?",-2073012751),RH=new K(null,"unit","unit",375175175),xo=new K(null,"logical-blocks","logical-blocks",-1466339776),z1=new K(null,"span.b-wrapper","span.b-wrapper",126573946),cH=new K(null,"key-fn","key-fn",-636154479),A1=new K(null,"date-hour-minute","date-hour-minute",1629918346),B1=new K(null,"end-col","end-col",-724155879),gM=new K(null,"recommendedName","recommendedName",-1218648810),Cy=new K(null,"data-rc","data-rc",1949262543),zG=new K(null,"column-header","column-header",-1495823888),mP=new K(null,"fields","fields",-1932066230),C1=new r(null,"video","video",1797419657,null),D1=new K(null,"results","results",-1134170113),E1=new K(null,"atom","atom",-397043653),F1=new K(null,"contextType","contextType",1033066077),jA=new K(null,"props","props",453281727),dN=new K("forms.docking","input-model","forms.docking/input-model",-377156405),G1=new K(null,"transition!","transition!",123167659),H1=new K(null,"species","species",-1393763638),I1=new K("re-com.error-modal","code","re-com.error-modal/code",-2085263435),gJ=new K("schmoho.dasudopit.client.common.http","http-get","schmoho.dasudopit.client.common.http/http-get",1594577488),lP=new K(null,"select","select",1147833503),MB=new K(null,"re-com","re-com",-2034768951),PE=new K(null,"format-str","format-str",695206156),J1=new r(null,"when-first","when-first",821699168,null),K1=new K(null,"family","family",-1313145692),VF=new K(null,"displaying-suggestion?","displaying-suggestion?",1244493862),aP=new K(null,"fdr_1","fdr_1",1107450007),gP=new K(null,"fdr_2","fdr_2",-1903026034),BL=new K(null,"help-text","help-text",1567653015),RF=new K(null,"suggestion-to-string","suggestion-to-string",1991188962),L1=new K(null,"v-box","v-box",-1635293073),M1=new r(null,"sub","sub",-453228498,null),ZO=new K(null,"log_transformed_f_statistic_1","log_transformed_f_statistic_1",990421540),fP=new K(null,"log_transformed_f_statistic_2","log_transformed_f_statistic_2",873641874),N1=new K(null,"choices-loading","choices-loading",57752856),O1=new K(null,"row-viewport-width","row-viewport-width",1520708232),P1=new r(null,"sup","sup",-398960819,null),Po=new K(null,"start-block-t","start-block-t",-373430594),Q1=new r(null,"svg","svg",-1797646627,null),TP=new K(null,"hconcat","hconcat",633077476),kI=new K(null,"background-size","background-size",-1248630243),R1=new K(null,"column-path","column-path",-733367618),V=new K(null,"attr","attr",-604132353),S1=new K(null,"grid-row-start","grid-row-start",-1827627988),gu=new K(null,"bracket-info","bracket-info",-1600092774),xL=new K(null,"smaller","smaller",-1619801498),QK=new K(null,"between","between",1131099276),ID=new K(null,"div-size","div-size",1661625995),iI=new K(null,"body","body",-2049205669),T1=new K(null,"right-label-container","right-label-container",1591591267),U1=new K("re-com.nested-grid","column-header-wrapper","re-com.nested-grid/column-header-wrapper",-906387286),zo=new K(null,"mode","mode",654403691),V1=new K(null,"palegoldenrod","palegoldenrod",-2067529985),uI=new K(null,"read","read",1140058661),W1=new K(null,"vertical","vertical",718696748),kC=new K(null,"border","border",1444987323),X1=new K(null,"yellowgreen","yellowgreen",844595052),Rj=new K(null,"fallback-impl","fallback-impl",-1501286995),mv=new K(null,"name","name",1843675177),Y1=new K(null,"search-term","search-term",356193544),Z1=new K(null,"column-footers","column-footers",-1188771065),jF=new K(null,"component-did-update","component-did-update",-1468549173),Co=new K(null,"writing","writing",-1486865108),lk=new K(null,"keywordize-keys","keywordize-keys",1310784252),$1=new r(null,"inst","inst",-2008473268,null),a2=new K(null,"on-wheel","on-wheel",-1971630708),b2=new r(null,"struct","struct",325972931,null),nO=new K(null,"msa","msa",2016061517),c2=new K(null,"clade","clade",1709445088),d2=new r(null,"kbd","kbd",1956688402,null),VG=new K(null,"row-index","row-index",-828710296),e2=new K(null,"column-footer-content","column-footer-content",-2077092556),so=new K(null,"buffer","buffer",617295198),f2=new K("re-com.nested-grid","cell-wrapper","re-com.nested-grid/cell-wrapper",-987319991),g2=new K(null,"scroll-rows-into-view","scroll-rows-into-view",-984076694),ZG=new K(null,"on-click-row","on-click-row",-383826673),h2=new K(null,"show-info?","show-info?",-1849013397),i2=new K(null,"media-queries","media-queries",-1563277678),mx=new K(null,"displayName","displayName",-809144601),j2=new K(null,"i18n","i18n",-563422499),k2=new K(null,"sandybrown","sandybrown",-417646484),zK=new K(null,"val","val",128701612),l2=new r(null,"mark","mark",1266715182,null),fM=new K(null,"fullName","fullName",-202600044),jN=new r(null,"base","base",1825810849,null),UG=new K(null,"on-leave-row","on-leave-row",1361264390),m2=new K(null,"uniprot-arthropoda","uniprot-arthropoda",1494648752),bP=new K(null,"gene_name","gene_name",-1442201815),Qb=new K(null,"flush-on-newline","flush-on-newline",-151457939),n2=new K(null,"on-key-press","on-key-press",-399563677),o2=new K("schmoho.dasudopit.client.common.http","http-post-success","schmoho.dasudopit.client.common.http/http-post-success",-1275027253),p2=new K(null,"scrollbar-content-ratio","scrollbar-content-ratio",1658723056),QJ=new K(null,"flex-direction","flex-direction",364609438),q2=new r(null,"loop","loop",1244978678,null),r2=new K(null,"group-fn","group-fn",129203707),s2=new K("re-com.nested-v-grid","wrapper","re-com.nested-v-grid/wrapper",-616776584),t2=new K(null,"timeout","timeout",-318625318),u2=new K("schmoho.dasudopit.client.panels.data.events","post-volcano-success","schmoho.dasudopit.client.panels.data.events/post-volcano-success",1849219735),at=new K(null,"max-columns","max-columns",1742323262),v2=new K(null,"strong","strong",269529e3),kF=new K(null,"display-name","display-name",694513143),w2=new K(null,"lavenderblush","lavenderblush",667482818),x2=new K(null,"top-right","top-right",284698505),y2=new K(null,"aria-labelledby","aria-labelledby",1817118667),z2=new K(null,"output-to","output-to",-965533968),HK=new K(null,"volcano","volcano",-483691295),WM=new K("forms.docking.part-1","taxon-model","forms.docking.part-1/taxon-model",-1515109363),Vt=new K(null,"both","both",-393648840),Rv=new K(null,"symbol","symbol",-1038572696),A2=new K(null,"items","items",1031954938),CG=new K(null,"order","order",-1254677256),B2=new K(null,"keywords?","keywords?",764949733),C2=new K(null,"colnum","colnum",2023796854),dM=new K(null,"genes","genes",-154803794),kE=new K(null,"stroke","stroke",1741823555),oP=new K(null,"min","min",444991522),D2=new K(null,"fixed-column-count","fixed-column-count",721535030),E2=new r(null,"math","math",-386381276,null),IF=new K(null,"timer","timer",-1266967739),F2=new r(null,"dateOptionalTimeParser","dateOptionalTimeParser",1783230854,null),G2=new K(null,"forestgreen","forestgreen",1609185807),H2=new K("schmoho.dasudopit.client.common.db","initialize-db","schmoho.dasudopit.client.common.db/initialize-db",929025416),pG=new K(null,"item","item",249373802),mD=new K(null,"l-border","l-border",383143028),I2=new K(null,"column-header-selection-rect","column-header-selection-rect",-790796749),J2=new K(null,"fx","fx",-1237829572),yN=new K(null,"colorfunc","colorfunc",1226142597),K2=new K(null,"violet","violet",-1351470549),L2=new K(null,"column-header-renderer","column-header-renderer",-1886265578),M2=new K(null,"trim-v","trim-v",-1274938640),N2=new K(null,"lightpink","lightpink",808485476),O2=new r(null,"localTimeParser","localTimeParser",-1738135328,null),P2=new K(null,"basic-time-no-ms","basic-time-no-ms",-1720654076),Q2=new K(null,"middle-container","middle-container",-476160515),cI=new K(null,"prefix","prefix",-265908465),R2=new r(null,"bdi","bdi",317505641,null),S2=new K(null,"time-element-parser","time-element-parser",-2042883205),vI=new K(null,"description","description",-1428560544),T2=new r(null,"bdo","bdo",-490616675,null),U2=new K(null,"rfc822","rfc822",-404628697),V2=new r(null,"valid","valid",1796145767,null),Ap=new K(null,"rest","rest",-1241696419),JI=new K(null,"debug-message","debug-message",-502855302),sH=new K(null,"pause","pause",-2095325672),gE=new K(null,"margin-top","margin-top",392161226),GN=new K(null,"resi","resi",1823160172),Iq=new K(null,"colon-up-arrow","colon-up-arrow",244853007),W2=new K(null,"em","em",707813035),RE=new K(null,"overrides","overrides",1738628867),X2=new K("schmoho.dasudopit.client.panels.data.events","post-volcano","schmoho.dasudopit.client.panels.data.events/post-volcano",-2102461806),Y2=new K(null,"getDerivedStateFromProps","getDerivedStateFromProps",-991834739),Z2=new K(null,"parse-tag","parse-tag",1427313738),$2=new K("provision.ligand","search-running?","provision.ligand/search-running?",-1337551848),a3=new K(null,"navy","navy",1626342120),b3=new K(null,"ex","ex",-1413771341),c3=new r(null,"links","links",986024133,null),d3=new K(null,"shouldComponentUpdate","shouldComponentUpdate",1795750960),e3=new r(null,"checked","checked",1589575708,null),f3=new K(null,"info-color","info-color",-79203690),g3=new K(null,"time-parser","time-parser",-1636511536),ZL=new K(null,"h6","h6",557293780),h3=new K(null,"h3","h3",2067611163),i3=new K(null,"simple-wrapper","simple-wrapper",-507652041),j3=new K(null,"h5","h5",-1829156625),KN=new K(null,"h4","h4",2004862993),bE=new K(null,"bottom","bottom",-1550509018),k3=new K("volcano","id","volcano/id",-1997121470),l3=new K(null,"date-time","date-time",177938180),m3=new K(null,"ch","ch",-554717905),n3=new K(null,"cm","cm",540591536),aE=new K(null,"icon","icon",1679606541),DE=new K(null,"cy","cy",755331060),ND=new K(null,"hover-color","hover-color",663962326),o3=new K(null,"off","off",606440789),CE=new K(null,"cx","cx",1272694324),p3=new K("re-com.error-modal","title-wrapper","re-com.error-modal/title-wrapper",65087224),GH=new K(null,"db","db",993250759),q3=new K(null,"row-viewport-height","row-viewport-height",-532496779),r3=new K(null,"indigo","indigo",-280252374),s3=new K(null,"close-button-container","close-button-container",838794188),t3=new K(null,"darkkhaki","darkkhaki",1599585526),u3=new K(null,"dn","dn",1073628915),v3=new K(null,"thumb-length","thumb-length",725479795),w3=new K(null,"maroon","maroon",-952210123),x3=new r(null,"js*","js*",-1134233646,null),SF=new K(null,"debounce-delay","debounce-delay",-608187982),Ro=new K(null,"suffix","suffix",367373057),y3=new K(null,"legend","legend",-1027192245),Kp=new K(null,"at","at",1476951349),z3=new K(null,"moccasin","moccasin",885646097),JP=new K(null,"empty","empty",767870958),Un=new K(null,"nl-t","nl-t",-1608382114),VB=new K(null,"justify-content","justify-content",-1990475787),A3=new K(null,"_rigid?","_rigid?",1424449294),ZD=new K(null,"on-mouse-leave","on-mouse-leave",-1864319528),B3=new K(null,"position-offset","position-offset",1257061411),YF=new K(null,"suggestions","suggestions",-859472618),RM=new K("schmoho.dasudopit.client.common.forms","update-form-data","schmoho.dasudopit.client.common.forms/update-form-data",864990978),YK=new K(null,"strains","strains",-1441495882),uv=new K(null,"column","column",2078222095),qP=new K(null,"on","on",173873944),bG=new K(null,"suggestion-activated","suggestion-activated",316961778),TG=new K(null,"striped?","striped?",-797214979),C3=new K(null,"identity-fn","identity-fn",-884182627),pH=new K(null,"after","after",594996914),TN=new K(null,"inline-block","inline-block",1967810016),D3=new K(null,"ctx-handler","ctx-handler",-1777672230),E3=new K(null,"choices-error","choices-error",2121956865),F3=new K(null,"uniprot-rodents","uniprot-rodents",1949190802),G3=new K(null,"pc","pc",512913453),H3=new K(null,"danger","danger",-624338030),uP=new r(null,"form","form",16469056,null),Lo=new K(null,"buffer-level","buffer-level",928864731),OH=new K(null,"px","px",281329899),I3=new r(null,"object","object",-1179821820,null),J3=new K(null,"pt","pt",556460867),K3=new K(null,"connection-established","connection-established",-1403749733),wM=new K(null,"on-load","on-load",1415151594),QF=new K(null,"data-source","data-source",-658934676),L3=new K(null,"mm","mm",-1652850560),DH=new K(null,"ms","ms",-1152709733),M3=new K(null,"prevent-default-when-no-match?","prevent-default-when-no-match?",-358623618),hN=new K("data","protein","data/protein",187488154),Jo=new K(null,"pretty-writer","pretty-writer",-1222834267),oO=new K(null,"top-level","top-level",-1363225675),lv=new K(null,"ns","ns",441598760),N3=new r(null,"track","track",1836319014,null),GL=new K(null,"for","for",-1323786319),fo=new K(null,"done-nl","done-nl",-381024340),O3=new K(null,"processable-url?","processable-url?",1865408336),P3=new K(null,"row-header-selection-fn","row-header-selection-fn",1835057464),BP=new K(null,"click-selection","click-selection",231967859),eQ=new K("schmoho.dasudopit.client.routing","active-panel","schmoho.dasudopit.client.routing/active-panel",1466260713),Q3=new r(null,"condp","condp",1054325175,null),mO=new K("schmoho.dasudopit.client.common.forms","toggle-form-bool","schmoho.dasudopit.client.common.forms/toggle-form-bool",-1936067481),R3=new K(null,"label-class","label-class",-2068991202),S3=new K(null,"start-row","start-row",164678470),lF=new K(null,"li","li",723558921),T3=new K(null,"left-section","left-section",1725153983),U3=new K(null,"mediumseagreen","mediumseagreen",2130779146),V3=new K(null,"subphylum","subphylum",-1604093395),Xx=new K(null,"id","id",-1388402092),W3=new r(null,"localDateParser","localDateParser",477820077,null),X3=new r(null,"legend","legend",613339282,null),Y3=new K(null,"in","in",-1531184865),Z3=new K(null,"filter-fn","filter-fn",1689475675),$3=new K(null,"simple-column-header-item","simple-column-header-item",-1259129102),JM=new K("routing.pipelines","docking","routing.pipelines/docking",1267224660),SD=new K(null,"cursor","cursor",1011937484),kH=new K(null,"interceptor","interceptor",1127739076),SC=new K(null,"bk-color","bk-color",2004848163),CJ=new K("data","ligands-list","data/ligands-list",-1514934419),IE=new K(null,"y2","y2",-718691301),GE=new K(null,"y1","y1",589123466),GO=new K(null,"protein-ids","protein-ids",-1669516565),a4=new r(null,"&","&",-2144855648,null),BO=new K("params.uniprot","uniref","params.uniprot/uniref",-362333845),zF=new K(null,"space-between","space-between",1908176695),Hq=new K(null,"up-arrow","up-arrow",1705310333),b4=new r(null,".",".",1975675962,null),c4=new K(null,"xe","xe",676983865),d4=new K(null,"pretty-print?","pretty-print?",1932217158),e4=new K(null,"lightgoldenrodyellow","lightgoldenrodyellow",1849392877),f4=new K(null,"primary","primary",817773892),g4=new K(null,"shadow","shadow",873231803),h4=new K(null,"ul","ul",-1349521403),GK=new K(null,"volcano-viewer","volcano-viewer",530710837),lu=new K(null,"right-bracket","right-bracket",951856080),i4=new r(null,"b","b",-1172211299,null),j4=new r(null,"source","source",1206599988,null),k4=new r(null,"a","a",-482876059,null),l4=new K(null,"darkgoldenrod","darkgoldenrod",-1115778811),WE=new K(null,"up","up",-269712113),uQ=new r(null,"i","i",253690212,null),Mv=new r(null,"m","m",-1021758608,null),m4=new r(null,"p","p",1791580836,null),n4=new K(null,"basic-week-date","basic-week-date",1775847845),o4=new r(null,"q","q",-1965434072,null),yQ=new r(null,"s","s",-948495851,null),p4=new r(null,"u","u",483896742,null),FE=new K(null,"x1","x1",-1863922247),YI=new K(null,"preferBuffers","preferBuffers",1843176451),q4=new K(null,"vh","vh",79552846),r4=new K(null,"auto","auto",-566279492),s4=new K(null,"whitespace","whitespace",-1340035483),t4=new K(null,"vw","vw",1941049135),HE=new K(null,"x2","x2",-1362513475),u4=new K(null,"hierarchy","hierarchy",-1053470341),dD=new K(null,"r-border","r-border",610773511),v4=new r(null,"focus","focus",1875209438,null),w4=new K(null,"font-variant","font-variant",1251503591),x4=new K(null,"include-all-button","include-all-button",-1926507806),IG=new K(null,"desc","desc",2093485764),UE=new K(null,"state","state",-1988618099),$O=new K(null,"fdr","fdr",-431324053),y4=new K(null,"hover?","hover?",-1201331489),kO=new K(null,"use-taxonomic-search?","use-taxonomic-search?",1235436134),z4=new K(null,"request-received","request-received",2110590540),A4=new K(null,"antiquewhite","antiquewhite",-1702201183),xO=new K(null,"filter-blast-result-by-taxonomy?","filter-blast-result-by-taxonomy?",1848742013),SL=new K(null,"uniProtKBCrossReferences","uniProtKBCrossReferences",802214932),Ko=new K(null,"sections","sections",-886710106),cE=new K(null,"above","above",-1286866470),aI=new K(null,"auto-prefix","auto-prefix",1484803466),B4=new K(null,"plddt","plddt",1606051703),C4=new K(null,"choices-no-results","choices-no-results",134106368),PD=new K(null,"display","display",242065432),D4=new K(null,"goldenrod","goldenrod",2000666104),Oo=new K(null,"start","start",-355208981),E4=new K(null,"drop-direction","drop-direction",-1450183017),yG=new K(null,"row-header","row-header",1799050794),F4=new K(null,"user-select","user-select",-346451650),G4=new K(null,"on-paste","on-paste",-50859856),H4=new K(null,"tracks","tracks",-326768501),rC=new K(null,"margin","margin",-995903681),I4=new K(null,"underline?","underline?",-1123247603),J4=new K(null,"protein-entry","protein-entry",325175382),K4=new K(null,"labelFont","labelFont",-634785418),mF=new K(null,"on-mouse-down","on-mouse-down",1147755470),L4=new K(null,"saddlebrown","saddlebrown",-1556765006),M4=new K(null,"no-rank","no-rank",518468569),N4=new K(null,"flush-dom","flush-dom",-933676816),O4=new K("schmoho.dasudopit.client.common.http","http-failure","schmoho.dasudopit.client.common.http/http-failure",-1783450288),P4=new K(null,"hour-minute-second-ms","hour-minute-second-ms",1209749775),Q4=new K(null,"boxes","boxes",-420813822),HD=new K(null,"font-size","font-size",-1847940346),eI=new K(null,"element","element",1974019749),LF=new K(null,"recur","recur",-437573268),R4=new K(null,"font-family","font-family",-667419874),S4=new K(null,"merge","merge",-1804319409),T4=new r(null,"figcaption","figcaption",-149590520,null),DD=new K(null,"tooltip","tooltip",-1809677058),U4=new K(null,"row-header-renderer","row-header-renderer",-355094585),PF=new K(null,"immediate-model-update?","immediate-model-update?",-2000005618),V4=new r("cljs.core","deref","cljs.core/deref",1901963335,null),np=new K(null,"block","block",664686210),W4=new r(null,"canvas","canvas",-158285962,null),jD=new K(null,"radius","radius",-2073122258),X4=new K(null,"cadetblue","cadetblue",1126335112),Y4=new r(null,"when","when",1064114221,null),Z4=new K(null,"basic-ordinal-date","basic-ordinal-date",243220162),MO=new K(null,"protein-names","protein-names",-1102675240),$4=new K(null,"padding-bottom","padding-bottom",-1899795591),Fj=new K(null,"more-marker","more-marker",-14717935),a5=new r(null,"tfoot","tfoot",938931637,null),b5=new K(null,"right-section","right-section",-1581313735),AL=new K(null,"help-title","help-title",-1518789983),c5=new K(null,"coral","coral",1082484055),OE=new K(null,"href","href",-793805698),d5=new r(null,"enabled","enabled",-1458526013,null),e5=new K(null,"hidden","hidden",-312506092),jG=new K(null,"click-callback","click-callback",-609722293),FJ=new K("schmoho.dasudopit.client.routing","active-route-params","schmoho.dasudopit.client.routing/active-route-params",1426620865),fD=new K(null,"h-scroll","h-scroll",-1200000150),f5=new K(null,"palevioletred","palevioletred",-1198100061),vG=new K(null,"label-style","label-style",-1703650121),un=new K(null,"line","line",212345235),IJ=new K(null,"png","png",551930691),yI=new K(null,"method","method",55703592),g5=new K(null,"scroll-pos","scroll-pos",292123569),h5=new K("routing.data","protein-entry","routing.data/protein-entry",-385452920),i5=new K(null,"align-column","align-column",415630514),j5=new K(null,"row-content","row-content",-203238520),$G=new K(null,"table-row-line-color","table-row-line-color",680569135),Ix=new K(null,"constructor","constructor",-1953928811),k5=new K(null,"render-fn","render-fn",398796518),l5=new K(null,"no-cache","no-cache",1588056370),m5=new K(null,"lime","lime",-1796425088),zJ=new K(null,"count","count",2139924085),n5=new K(null,"royalblue","royalblue",978912636),o5=new K(null,"year-month-day","year-month-day",-415594169),kp=new K(null,"linear","linear",872268697),p5=new K(null,"mintcream","mintcream",1437895067),Rb=new K(null,"readably","readably",1129599760),q5=new K("re-com.text","title-wrapper","re-com.text/title-wrapper",-2139740765),r5=new K(null,"date-hour-minute-second","date-hour-minute-second",-1565419364),s5=new K(null,"date","date",-1463434462),NK=new K(null,"data","data",-232669377),t5=new K(null,"darkgrey","darkgrey",-860992715),u5=new K("re-com.nested-v-grid","column-header-grid","re-com.nested-v-grid/column-header-grid",2008839869),pC=new K(null,"v-scroll","v-scroll",-1842185668),v5=new K(null,"top-right-renderer","top-right-renderer",-1691262321),w5=new K(null,"internal-scroll-pos","internal-scroll-pos",1183420691),eL=new K("data","proteome","data/proteome",167657072),x5=new r(null,"textarea","textarea",990155703,null),y5=new K(null,"hour-minute","hour-minute",-1164421312),ZH=new K(null,"media-expressions","media-expressions",1920421643),z5=new K(null,"failed","failed",-1397425762),A5=new K(null,"darkviolet","darkviolet",552615766),B5=new r(null,"when-not","when-not",-1223136340,null),C5=new K(null,"titleFont","titleFont",2029523824),aq=new K(null,"padchar","padchar",2018584530),D5=new K(null,"validating","validating",1866468207),dJ=new K(null,"route","route",329891309),E5=new K("font-size","small","font-size/small",-576715279),F5=new K(null,"failure","failure",720415879),G5=new K(null,"blue","blue",-622100620),H5=new r(null,"first-of-type","first-of-type",900311874,null),tP=new K(null,"opacity","opacity",397153780),I5=new K(null,"seagreen","seagreen",1345424905),iu=new K(null,"offset","offset",296498311),J5=new r(null,"table","table",1075588491,null),YS=new r(null,"left","left",1241415590,null),K5=new K(null,"on-alter","on-alter",1684116964),L5=new K(null,"border-color","border-color",-2059162761),M5=new K("forms","docking","forms/docking",-303219442),N5=new K("re-com.nested-v-grid","corner-header","re-com.nested-v-grid/corner-header",1605479369),O5=new K(null,"darkgray","darkgray",-1229776547),JK=new K("routing","volcano-viewer","routing/volcano-viewer",-239427601),P5=new K("forms.docking.part-2","selected-protein-for-taxon-resolved","forms.docking.part-2/selected-protein-for-taxon-resolved",-2047693578),Q5=new K(null,"on-key-up","on-key-up",884441808),R5=new K(null,"navigate","navigate",657596805),kT=new r(null,"root","root",1191874074,null),S5=new r(null,"optgroup","optgroup",-916153551,null),T5=new K(null,"_debounce-delay","_debounce-delay",-1476744225),nN=new K("data","taxons-map","data/taxons-map",69714627),FF=new K(null,"error","error",-978969032),xM=new K(null,"pdb","pdb",2112784082),RG=new K(null,"white-space","white-space",-707351930),bH=new K(null,"simple-row","simple-row",-252554766),U5=new K(null,"response","response",-1068424192),ly=new K(null,"args","args",1315556576),V5=new K("re-com.error-modal","triangle","re-com.error-modal/triangle",1747759430),W5=new r(null,"new","new",-444906321,null),hG=new K(null,"filter-reset-button","filter-reset-button",1821484060),X5=new K(null,"above-left","above-left",-1593975744),Y5=new K("re-com.tree-select","dropdown-counter","re-com.tree-select/dropdown-counter",175574407),RL=new K(null,"database","database",1849087575),Z5=new K(null,"function-components","function-components",1492814963),Kv=new r(null,"lift-ns","lift-ns",602311926,null),$5=new r(null,"samp","samp",-1148294633,null),Tv=new K(null,"list","list",765357683),yo=new K(null,"buffering","buffering",-876713613),a6=new K(null,"arg1","arg1",951899358),Oq=new K(null,"base-args","base-args",-1268706822),b6=new K(null,"arg3","arg3",-1486822496),c6=new K(null,"arg2","arg2",1729550917),d6=new K(null,"end-row","end-row",-545103581),e6=new K("provision.taxon","search-running?","provision.taxon/search-running?",699656739),ON=new K(null,"init-height","init-height",740151377),f6=new K(null,"snow","snow",1266930033),g6=new K(null,"active-route","active-route",-1914333809),lH=new K(null,"event","event",301435442),iq=new K(null,"commainterval","commainterval",-1980061083),h6=new K(null,"ordinal-date-time","ordinal-date-time",-1386753458),i6=new K(null,"dispatch-later","dispatch-later",291951390),rF=new K(null,"value","value",305978217),j6=new K("re-com.tree-select","dropdown-anchor","re-com.tree-select/dropdown-anchor",-798171263),k6=new K(null,"date-hour","date-hour",-344234471),l6=new K(null,"skyblue","skyblue",-2076132812),m6=new K("re-com.error-modal","inner-wrapper","re-com.error-modal/inner-wrapper",983710789),n6=new K(null,"firebrick","firebrick",-214380606),o6=new K(null,"v-scroll-section","v-scroll-section",-72114244),p6=new K(null,"right-margin","right-margin",-810413306),q6=new r(null,"nav","nav",-1934895292,null),r6=new K(null,"above-center","above-center",1960103104),oD=new K(null,"t-border","t-border",1110748502),s6=new K(null,"position-injected","position-injected",205959080),aH=new K(null,"row-style","row-style",1352472052),t6=new K(null,"toggle","toggle",1291842030),u6=new K(null,"animation-duration","animation-duration",-1261077706),QO=new K("results","msa","results/msa",1032840291),aG=new K(null,"suggestion-active-index","suggestion-active-index",-1593564728),v6=new K(null,"lightskyblue","lightskyblue",397352944),w6=new K(null,"point-wrapper","point-wrapper",2115655364),PN=new K(null,"init-size","init-size",-1820528863),qF=new K(null,"auto-complete","auto-complete",244958848),x6=new K(null,"virtual?","virtual?",1554264002),y6=new r(null,"with-open","with-open",172119667,null),z6=new K(null,"spill","spill",-1725816817),A6=new K(null,"lightcyan","lightcyan",-481418530),lN=new K(null,"structure","structure",1563832083),B6=new r(null,"scope","scope",1201173109,null),C6=new K(null,"larger","larger",1304935444),VD=new K(null,"negative","negative",-1562068438),jv=new r("cljs.core","lift-ns","cljs.core/lift-ns",463499081,null),CI=new K(null,"interceptors","interceptors",-1546782951),D6=new K(null,"keyfn","keyfn",780060332),E6=new K(null,"row-renderer","row-renderer",314053346),iM=new K(null,"submissionNames","submissionNames",1857727003),UF=new K(null,"waiting?","waiting?",-2117257215),F6=new K(null,"lines","lines",-700165781),G6=new K(null,"warn","warn",-436710552),lM=new K(null,"p.info-heading","p.info-heading",-1464340767),pp=new K(null,"indent-t","indent-t",528318969),H6=new K(null,"linen","linen",-1305214018),I6=new r(null,"style","style",1143888791,null),bM=new K(null,"gene-name","gene-name",1549832912),J6=new K(null,"row-selection-rect","row-selection-rect",-1945553775),Vz=new K(null,"id-fn","id-fn",316222798),FH=new K(null,"db-handler","db-handler",579530098),CO=new K(null,"filter-clusters-by-taxonomy?","filter-clusters-by-taxonomy?",-1187081038),LE=new K(null,"container","container",-1736937707),lO=new K("params.uniprot","taxonomy","params.uniprot/taxonomy",-1513723647),K6=new K(null,"green","green",-945526839),KF=new K(null,"regex-filter?","regex-filter?",-824895668),L6=new K(null,"get","get",1683182755),M6=new K(null,"week-date-time-no-ms","week-date-time-no-ms",-1226853060),gy=new K(null,"debug-as","debug-as",283322354),NP=new K(null,"vconcat","vconcat",-2012274180),N6=new K(null,"arrow-length","arrow-length",934916707),O6=new K(null,"transitionable","transitionable",-1988279536),GD=new K(null,"color","color",1011675173),P6=new K(null,"mediumorchid","mediumorchid",114416082),Q6=new K(null,"palegreen","palegreen",1360601109),Jp=new K(null,"colon","colon",-965200945),R6=new r(null,"if-not","if-not",-265415609,null),S6=new K(null,"orange","orange",73816386),T6=new K(null,"tooltip-style?","tooltip-style?",1188162527),CH=new K(null,"trigger","trigger",103466139),iA=new K(null,"post-props","post-props",1836150684),U6=new K(null,"fuchsia","fuchsia",990719926),V6=new K(null,"grid-column-start","grid-column-start",718549073),JE=new K(null,"mouse-over-row?","mouse-over-row?",-446703882),W6=new K(null,"show-export-button?","show-export-button?",1564339113),X6=new K(null,"mediumspringgreen","mediumspringgreen",-257604339),Vv=new K(null,"vector","vector",1902966158),Y6=new K(null,"peru","peru",1147074382),jI=new K(null,"black","black",1294279647),Z6=new K(null,"left-filter-result-count","left-filter-result-count",299116355),$P=new K(null,"right-label","right-label",1465344334),$6=new K(null,"include-selected-button","include-selected-button",82106280),AH=new K(null,"resume","resume",-118572261),a7=new K(null,"time","time",1385887882),wJ=new K(null,"charge","charge",426796560),b7=new r(null,"finally","finally",-1065347064,null),tJ=new K(null,"gap","gap",80255254),GF=new K(null,"result","result",1415092211),c7=new K(null,"bottom-left-renderer","bottom-left-renderer",768170713),d7=new r(null,"label","label",-936024965,null),$K=new K(null,"unreviewedProteinCount","unreviewedProteinCount",-209826903),KK=new K(null,"taxon","taxon",-334202638),e7=new K(null,"remove-empty-row-space?","remove-empty-row-space?",2140501449),f7=new K("upload","volcano","upload/volcano",288321252),EF=new K(null,"closed","closed",-919675359),g7=new K("provision.ligand","tab-model","provision.ligand/tab-model",832076277),h7=new r(null,"quote","quote",1377916282,null),i7=new K(null,"last","last",1105735132),j7=new K(null,"wrap-nicely?","wrap-nicely?",85012288),k7=new K(null,"_immediate-model-update?","_immediate-model-update?",1035374450),l7=new r(null,"in-range","in-range",-1297863944,null),m7=new r(null,"required","required",-846788763,null),n7=new K(null,"progress-handler","progress-handler",333585589),Qv=new K(null,"deref","deref",-145586795),ps=new K(null,"max-iterations","max-iterations",2021275563),OK=new K(null,"ligand","ligand",1746238033),o7=new K(null,"slategrey","slategrey",-1531406687),p7=new r(null,"address","address",-2094936343,null),q7=new K(null,"tribe","tribe",602848396),KH=new K(null,"media","media",-1066138403),Qj=new K(null,"alt-impl","alt-impl",670969595),r7=new K(null,"unnamed","unnamed",-26044928),s7=new K("data","ligands-map","data/ligands-map",-516831602),ZV=new r(null,"var","var",870848730,null),Xp=new K(null,"minpad","minpad",323570901),t7=new K(null,"global-interceptors","global-interceptors",-1995759472),u7=new K(null,"cyan","cyan",1118839274),v7=new K("schmoho.dasudopit.client.common.http","http-post","schmoho.dasudopit.client.common.http/http-post",486418380),w7=new K(null,"basic-week-date-time","basic-week-date-time",-502077622),TM=new K(null,"input-model","input-model",-938514725),wD=new K(null,"border-top","border-top",-158897573),Ts=new K(null,"string","string",-1989541586),xI=new K(null,"vec-strategy","vec-strategy",1843221372),sD=new K(null,"overflow-y","overflow-y",-1436589285),TL=new K(null,"domains","domains",1410387719),rD=new K(null,"overflow-x","overflow-x",-26547754),NB=new K(null,"variables","variables",1563680814),x7=new K(null,"slategray","slategray",-178672671),y7=new K(null,"operation","operation",-1267664310),z7=new K("schmoho.dasudopit.client.routing","set-active-route","schmoho.dasudopit.client.routing/set-active-route",2121870810),A7=new K(null,"uniprot-nematoda","uniprot-nematoda",1926577696),lD=new K(null,"scroll","scroll",971553779),B7=new r(null,"dateElementParser","dateElementParser",984800945,null),C7=new r(null,"input","input",-2097503808,null),D7=new r(null,"div","div",-1597244137,null),E7=new K(null,"basic-date","basic-date",1566551506),F7=new K(null,"scroll-columns-into-view","scroll-columns-into-view",1543196851),gD=new K(null,"width","width",-384071477),bD=new K(null,"max-height","max-height",-612563804),G7=new K(null,"uniref-90","uniref-90",157989432),H7=new r(null,"hgroup","hgroup",-1525585280,null),I7=new r(null,"deftype*","deftype*",962659890,null),J7=new K(null,"warning-message","warning-message",1341499775),K7=new K(null,"optimize-position?","optimize-position?",1509261524),XN=new K(null,"component-will-unmount","component-will-unmount",-2058314698),L7=new K(null,"success","success",1890645906),WG=new K(null,"columns","columns",1998437288),QB=new K(null,"-webkit-flex","-webkit-flex",-1736517621),dy=new K(null,"children","children",-940561982),LM=new K("routing.data","upload","routing.data/upload",320453040),M7=new K(null,"stretch","stretch",-1888837380),N7=new K(null,"feature-queries","feature-queries",-1340998408),kG=new K(null,"double-click-callback","double-click-callback",-1057568442),dF=new K(null,"sel-end","sel-end",81085265),O7=new r(null,"def","def",597100991,null),QH=new K(null,"magnitude","magnitude",1924274222),P7=new r(null,"del","del",-2079460185,null),Q7=new K(null,"not-initialized","not-initialized",-1937378906),R7=new K("re-com.tree-select","dropdown-indicator","re-com.tree-select/dropdown-indicator",96714981),S7=new r(null,"default","default",-347290801,null),lI=new K(null,"background-position","background-position",1112702746),T7=new r(null,"dfn","dfn",1882439694,null),U7=new K(null,"row-footer-content","row-footer-content",1483533894),V7=new K(null,"uniref-50","uniref-50",348688243),SM=new K(null,"docking","docking",-535613093),$F=new K(null,"external-model","external-model",506095421),W7=new K(null,"column-header-content","column-header-content",-2026517060),X7=new K(null,"thistle","thistle",1477120028),Y7=new K(null,"inner","inner",-1383171215),Z7=new K("font-size","x-small","font-size/x-small",615623467),$7=new K(null,"mistyrose","mistyrose",-619815737),a8=new r(null,"map","map",-1282745308,null),b8=new K(null,"deepskyblue","deepskyblue",-1691758944),BE=new K(null,"circle","circle",1903212362),dH=new K(null,"comp-fn","comp-fn",1661028128),KD=new K(null,"on-click","on-click",1632826543),Mt=new K(null,"flags","flags",1775418075),xx=new K(null,"cljsLegacyRender","cljsLegacyRender",-1527295613),c8=new K(null,"darkorange","darkorange",1453996632),d8=new r(null,"param","param",-640803946,null),e8=new K("schmoho.dasudopit.client.routing","active-route","schmoho.dasudopit.client.routing/active-route",1127984570),f8=new K(null,"align-column-header","align-column-header",-1804259581),g8=new K(null,"max-scroll-pos","max-scroll-pos",-325462965),jp=new K(null,"fill","fill",883462889),h8=new K(null,"r-paren","r-paren",-1688338021),i8=new K(null,"preamble","preamble",1641040241),rv=new K(null,"file","file",-1269645878),Io=new K(null,"buffer-block","buffer-block",-10937307),j8=new K(null,"simple-column-header","simple-column-header",-1241463404),dO=new K(null,"labelAngle","labelAngle",-15299184),k8=new K(null,"processing-request","processing-request",-264947221),wH=new K(null,"scheduled","scheduled",553898551),l8=new K(null,"textarea","textarea",-650375824),m8=new K(null,"loading","loading",-737050189),n8=new K(null,"sort-keyfn","sort-keyfn",546236632),o8=new K(null,"background-disabled","background-disabled",-844674170),XG=new K(null,"on-enter-row","on-enter-row",-139996948),p8=new r(null,"queue","queue",-1198599890,null),q8=new K("re-com.dropdown","wrapper","re-com.dropdown/wrapper",1783074340),BF=new K(null,"tab-index","tab-index",895755393),FD=new K(null,"left-offset","left-offset",-331155643),r8=new r(null,"footer","footer",-1047990379,null),s8=new K(null,"baseline","baseline",1151033280),io=new K(null,"start-col","start-col",668080143),t8=new K(null,"exclude-selected-button","exclude-selected-button",-1972647705),Sb=new K(null,"meta","meta",1499536964),nI=new K(null,"white","white",-483998618),u8=new K("schmoho.dasudopit.client.panels.results.msa.events","start-msa!","schmoho.dasudopit.client.panels.results.msa.events/start-msa!",2073530218),dG=new K(null,"input-text-blurred","input-text-blurred",-501892307),OJ=new K(null,"taxonId","taxonId",-155244163),v8=new K(null,"z","z",-789527183),Xq=new K(null,"w","w",354169001),w8=new K(null,"horizontal","horizontal",2062109475),eO=new K(null,"y","y",-1757859776),TH=new K(null,"x","x",2099068185),x8=new K(null,"s","s",1705939918),y8=new K(null,"response-ready","response-ready",245208276),EE=new K(null,"r","r",-471384190),z8=new K(null,"hour","hour",-555989214),hs=new K(null,"n","n",562130025),rH=new K(null,"finish-run","finish-run",753148477),uL=new K(null,"p","p",151049309),GP=new K(null,"brush-selection","brush-selection",1036263236),A8=new K(null,"export?","export?",534848234),PG=new K(null,"text-overflow","text-overflow",-1022366814),B8=new r(null,"defrecord*","defrecord*",-1936366207,null),Nr=new K(null,"k","k",-2146297393),C8=new K("re-com.multi-select","$$$","re-com.multi-select/$$$",-567571741),D8=new K(null,"f","f",-1597136552),$D=new K(null,"i","i",-1386841315),hE=new K(null,"margin-left","margin-left",2015598377),fO=new K(null,"b","b",1482224470),ds=new K(null,"e","e",1381269198),Yq=new K(null,"d","d",1972142424),ME=new K(null,"a","a",-2123407586),yF=new K(null,"a.chosen-single.chosen-default.rc-dropddown-chosen-single","a.chosen-single.chosen-default.rc-dropddown-chosen-single",33517708),E8=new K(null,"subkingdom","subkingdom",1652761221),yx=new K(null,"getInitialState","getInitialState",1541760916),uE=new K(null,"anchor","anchor",1549638489),kq=new K(null,"commachar","commachar",652859327),F8=new r(null,"read-only","read-only",1448824641,null),rG=new K(null,"group-selected?","group-selected?",-1959240379),G8=new r(null,"let*","let*",1920721458,null),H8=new K(null,"strain","strain",1480306072),xH=new K(null,"running","running",1554969103),CK=new K("data","taxons-list","data/taxons-list",876190175),rO=new K(null,"really-use-broad-taxonomic-category?","really-use-broad-taxonomic-category?",-2147320628),BI=new K(null,"format","format",-1306924766),I8=new r(null,"try","try",-1273693247,null),HI=new K(null,"last-error","last-error",1848699973),J8=new K(null,"darkblue","darkblue",511597490),NH=new K(null,"%","%",1704198600),K8=new K(null,"section","section",-300141526),OG=new K(null,"simple-row-item","simple-row-item",1270085292),kv=new K(null,"private","private",-558947994),L8=new K(null,"tomato","tomato",1086708254),M8=new K(null,"turquoise","turquoise",876845491),sL=new K(null,"backdrop-opacity","backdrop-opacity",1467395653),lQ=new K("routing.results","msa","routing.results/msa",1781280251),N8=new K(null,"pretty","pretty",-1916372486),O8=new K(null,"warning","warning",-1685650671),AN=new K(null,"backgroundColor","backgroundColor",1738438491),nF=new K(null,"div.chosen-search","div.chosen-search",-210987404),sO=new K(null,"gene-names","gene-names",-1608237783),P8=new K(null,"whitesmoke","whitesmoke",1847137252),rP=new K(null,"condition","condition",1668437652),Q8=new r(null,"let","let",358118826,null),R8=new K(null,"li.no-results","li.no-results",-717682399),S8=new r(null,"section","section",1340390001,null),NF=new K(null,"rigid?","rigid?",-1498832118),T8=new K(null,"cornsilk","cornsilk",-1628976146),U8=new K("routing.data","volcano","routing.data/volcano",496380211),V8=new K(null,"forms","forms",2045992350),W8=new K(null,"request-method","request-method",1764796830),X8=new K(null,"content-wrapper","content-wrapper",-1075224577),Y8=new K(null,"getDerivedStateFromError","getDerivedStateFromError",166658477),Z8=new K(null,"group-heading-selected?","group-heading-selected?",-154747592),Hn=new K(null,"parent","parent",-878878779),EL=new K(null,"span.field-label","span.field-label",-67033921),$8=new K(null,"right-list-box","right-list-box",109159631),ks=new K(null,"clauses","clauses",1454841241),a9=new r(null,"defonce","defonce",-1681484013,null),b9=new K(null,"below-left","below-left",1233934732),c9=new K(null,"no-results","no-results",1269438172),oH=new K(null,"before","before",-1633692388),d9=new K(null,"purple","purple",-876021126),e9=new K(null,"lightcoral","lightcoral",-988903010),f9=new K(null,"close-callback","close-callback",651188974),g9=new r(null,"locking","locking",1542862874,null),h9=new K(null,"filter-choices-text","filter-choices-text",-253084589),i9=new K(null,"column-header-height","column-header-height",-1680092558),j9=new K(null,"uniprot-fungi","uniprot-fungi",-772207882),CN=new K("data","structures","data/structures",-555520406),k9=new K(null,"ordinal-date","ordinal-date",-77899447),gI=new K(null,"composes","composes",-378837833),l9=new r(null,"option","option",1705663799,null),m9=new K(null,"double","double",884886883),n9=new K(null,"paleturquoise","paleturquoise",1255621750),Ao=new K(null,"pos","pos",-864607220),lA=new K(null,"span","span",1394872991),o9=new r(null,"audio","audio",-835308448,null),dE=new K(null,"below","below",-926774883),p9=new K(null,"list-group","list-group",-304522729),q9=new K(null,"filter-placeholder","filter-placeholder",-1736876526),vv=new K(null,"end-line","end-line",1837326455),r9=new K(null,"lightseagreen","lightseagreen",-1503692817),s9=new r(null,"localDateOptionalTimeParser","localDateOptionalTimeParser",435955537,null),t9=new K(null,"margin-bottom","margin-bottom",388334941),IO=new K("schmoho.dasudopit.client.common.forms","start-msa!","schmoho.dasudopit.client.common.forms/start-msa!",-1927946315),VH=new K(null,"import","import",-1399500709),bq=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};bq.j=function(n){return qd(Sm,Kg.h(lq,n))};bq.v=0;bq.B=function(n){return this.j(w(n))};var Hm=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};Hm.j=function(n){return qd(Sm,Kg.h(im,n))};Hm.v=0;Hm.B=function(n){return this.j(w(n))};g=xn.prototype;g.Z=function(n,t){return new xn(this.Sh,this.ni,this.$g,t)};g.Y=function(){return this.si};g.pb=function(){return this.$g};g.hi=function(){return ae(this.Sh)};g.Yf=function(n,t){if(n=jc(t),l(E.h?E.h(String,n):E.call(null,String,n)))return n=t.lastIndexOf(`
`),0>n?sn(this,tn,rn(this,tn)+D(t)):(sn(this,tn,D(t)-n-1),sn(this,un,rn(this,un)+D(jh.h(function(i){return E.h(i,`
`)},t)))),qd(rn(this,vn),t);if(l(E.h?E.h(Number,n):E.call(null,Number,n)))return wn(this,t);throw Error(["No matching clause: ",m.g(n)].join(""))};g=Cn.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"parent":return this.parent;case"section":return this.Zh;case"start-col":return this.Uh;case"indent":return this.Th;case"done-nl":return this.Vh;case"intra-block-nl":return this.Wh;case"prefix":return this.prefix;case"per-line-prefix":return this.Yh;case"suffix":return this.$h;case"logical-block-callback":return this.Xh;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#cljs.pprint.logical-block{",", ","}",i,fh.h(new R(null,10,5,S,[new R(null,2,5,S,[Hn,this.parent],null),new R(null,2,5,S,[K8,this.Zh],null),new R(null,2,5,S,[io,this.Uh],null),new R(null,2,5,S,[oo,this.Th],null),new R(null,2,5,S,[fo,this.Vh],null),new R(null,2,5,S,[po,this.Wh],null),new R(null,2,5,S,[cI,this.prefix],null),new R(null,2,5,S,[no,this.Yh],null),new R(null,2,5,S,[Ro,this.$h],null),new R(null,2,5,S,[No,this.Xh],null)],null),this.I))};g.Fa=function(){return new Zh(this,10,new R(null,10,5,S,[Hn,K8,io,oo,fo,po,cI,no,Ro,No],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Cn(this.parent,this.Zh,this.Uh,this.Th,this.Vh,this.Wh,this.prefix,this.Yh,this.$h,this.Xh,this.T,this.I,this.C)};g.ba=function(){return 10+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=1977012399^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.parent,t.parent)&&E.h(this.Zh,t.Zh)&&E.h(this.Uh,t.Uh)&&E.h(this.Th,t.Th)&&E.h(this.Vh,t.Vh)&&E.h(this.Wh,t.Wh)&&E.h(this.prefix,t.prefix)&&E.h(this.Yh,t.Yh)&&E.h(this.$h,t.$h)&&E.h(this.Xh,t.Xh)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,10,[Ro,null,oo,null,Hn,null,K8,null,fo,null,io,null,cI,null,no,null,No,null,po,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new Cn(this.parent,this.Zh,this.Uh,this.Th,this.Vh,this.Wh,this.prefix,this.Yh,this.$h,this.Xh,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"parent":case"section":case"start-col":case"indent":case"done-nl":case"intra-block-nl":case"prefix":case"per-line-prefix":case"suffix":case"logical-block-callback":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(Hn,t):Vf.call(null,Hn,t))?new Cn(i,this.Zh,this.Uh,this.Th,this.Vh,this.Wh,this.prefix,this.Yh,this.$h,this.Xh,this.T,this.I,null):l(Vf.h?Vf.h(K8,t):Vf.call(null,K8,t))?new Cn(this.parent,i,this.Uh,this.Th,this.Vh,this.Wh,this.prefix,this.Yh,this.$h,this.Xh,this.T,this.I,null):l(Vf.h?Vf.h(io,t):Vf.call(null,io,t))?new Cn(this.parent,this.Zh,i,this.Th,this.Vh,this.Wh,this.prefix,this.Yh,this.$h,this.Xh,this.T,this.I,null):l(Vf.h?Vf.h(oo,t):Vf.call(null,oo,t))?new Cn(this.parent,this.Zh,this.Uh,i,this.Vh,this.Wh,this.prefix,this.Yh,this.$h,this.Xh,this.T,this.I,null):l(Vf.h?Vf.h(fo,t):Vf.call(null,fo,t))?new Cn(this.parent,this.Zh,this.Uh,this.Th,i,this.Wh,this.prefix,this.Yh,this.$h,this.Xh,this.T,this.I,null):l(Vf.h?Vf.h(po,t):Vf.call(null,po,t))?new Cn(this.parent,this.Zh,this.Uh,this.Th,this.Vh,i,this.prefix,this.Yh,this.$h,this.Xh,this.T,this.I,null):l(Vf.h?Vf.h(cI,t):Vf.call(null,cI,t))?new Cn(this.parent,this.Zh,this.Uh,this.Th,this.Vh,this.Wh,i,this.Yh,this.$h,this.Xh,this.T,this.I,null):l(Vf.h?Vf.h(no,t):Vf.call(null,no,t))?new Cn(this.parent,this.Zh,this.Uh,this.Th,this.Vh,this.Wh,this.prefix,i,this.$h,this.Xh,this.T,this.I,null):l(Vf.h?Vf.h(Ro,t):Vf.call(null,Ro,t))?new Cn(this.parent,this.Zh,this.Uh,this.Th,this.Vh,this.Wh,this.prefix,this.Yh,i,this.Xh,this.T,this.I,null):l(Vf.h?Vf.h(No,t):Vf.call(null,No,t))?new Cn(this.parent,this.Zh,this.Uh,this.Th,this.Vh,this.Wh,this.prefix,this.Yh,this.$h,i,this.T,this.I,null):new Cn(this.parent,this.Zh,this.Uh,this.Th,this.Vh,this.Wh,this.prefix,this.Yh,this.$h,this.Xh,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,10,5,S,[new ci(Hn,this.parent,null),new ci(K8,this.Zh,null),new ci(io,this.Uh,null),new ci(oo,this.Th,null),new ci(fo,this.Vh,null),new ci(po,this.Wh,null),new ci(cI,this.prefix,null),new ci(no,this.Yh,null),new ci(Ro,this.$h,null),new ci(No,this.Xh,null)],null),this.I))};g.Z=function(n,t){return new Cn(this.parent,this.Zh,this.Uh,this.Th,this.Vh,this.Wh,this.prefix,this.Yh,this.$h,this.Xh,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};g=Kn.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"type-tag":return this.Qh;case"data":return this.data;case"trailing-white-space":return this.bi;case"start-pos":return this.Ph;case"end-pos":return this.Oh;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#cljs.pprint.buffer-blob{",", ","}",i,fh.h(new R(null,5,5,S,[new R(null,2,5,S,[Sn,this.Qh],null),new R(null,2,5,S,[NK,this.data],null),new R(null,2,5,S,[Vn,this.bi],null),new R(null,2,5,S,[co,this.Ph],null),new R(null,2,5,S,[bo,this.Oh],null)],null),this.I))};g.Fa=function(){return new Zh(this,5,new R(null,5,5,S,[Sn,NK,Vn,co,bo],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Kn(this.Qh,this.data,this.bi,this.Ph,this.Oh,this.T,this.I,this.C)};g.ba=function(){return 5+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=1809113693^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.Qh,t.Qh)&&E.h(this.data,t.data)&&E.h(this.bi,t.bi)&&E.h(this.Ph,t.Ph)&&E.h(this.Oh,t.Oh)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,5,[bo,null,Vn,null,Sn,null,co,null,NK,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new Kn(this.Qh,this.data,this.bi,this.Ph,this.Oh,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"type-tag":case"data":case"trailing-white-space":case"start-pos":case"end-pos":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(Sn,t):Vf.call(null,Sn,t))?new Kn(i,this.data,this.bi,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(NK,t):Vf.call(null,NK,t))?new Kn(this.Qh,i,this.bi,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(Vn,t):Vf.call(null,Vn,t))?new Kn(this.Qh,this.data,i,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(co,t):Vf.call(null,co,t))?new Kn(this.Qh,this.data,this.bi,i,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(bo,t):Vf.call(null,bo,t))?new Kn(this.Qh,this.data,this.bi,this.Ph,i,this.T,this.I,null):new Kn(this.Qh,this.data,this.bi,this.Ph,this.Oh,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,5,5,S,[new ci(Sn,this.Qh,null),new ci(NK,this.data,null),new ci(Vn,this.bi,null),new ci(co,this.Ph,null),new ci(bo,this.Oh,null)],null),this.I))};g.Z=function(n,t){return new Kn(this.Qh,this.data,this.bi,this.Ph,this.Oh,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};g=Ln.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"type-tag":return this.Qh;case"type":return this.type;case"logical-block":return this.Rh;case"start-pos":return this.Ph;case"end-pos":return this.Oh;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#cljs.pprint.nl-t{",", ","}",i,fh.h(new R(null,5,5,S,[new R(null,2,5,S,[Sn,this.Qh],null),new R(null,2,5,S,[pF,this.type],null),new R(null,2,5,S,[ko,this.Rh],null),new R(null,2,5,S,[co,this.Ph],null),new R(null,2,5,S,[bo,this.Oh],null)],null),this.I))};g.Fa=function(){return new Zh(this,5,new R(null,5,5,S,[Sn,pF,ko,co,bo],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Ln(this.Qh,this.type,this.Rh,this.Ph,this.Oh,this.T,this.I,this.C)};g.ba=function(){return 5+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=-1640656800^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.Qh,t.Qh)&&E.h(this.type,t.type)&&E.h(this.Rh,t.Rh)&&E.h(this.Ph,t.Ph)&&E.h(this.Oh,t.Oh)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,5,[bo,null,pF,null,ko,null,Sn,null,co,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new Ln(this.Qh,this.type,this.Rh,this.Ph,this.Oh,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"type-tag":case"type":case"logical-block":case"start-pos":case"end-pos":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(Sn,t):Vf.call(null,Sn,t))?new Ln(i,this.type,this.Rh,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(pF,t):Vf.call(null,pF,t))?new Ln(this.Qh,i,this.Rh,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(ko,t):Vf.call(null,ko,t))?new Ln(this.Qh,this.type,i,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(co,t):Vf.call(null,co,t))?new Ln(this.Qh,this.type,this.Rh,i,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(bo,t):Vf.call(null,bo,t))?new Ln(this.Qh,this.type,this.Rh,this.Ph,i,this.T,this.I,null):new Ln(this.Qh,this.type,this.Rh,this.Ph,this.Oh,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,5,5,S,[new ci(Sn,this.Qh,null),new ci(pF,this.type,null),new ci(ko,this.Rh,null),new ci(co,this.Ph,null),new ci(bo,this.Oh,null)],null),this.I))};g.Z=function(n,t){return new Ln(this.Qh,this.type,this.Rh,this.Ph,this.Oh,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};g=On.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"type-tag":return this.Qh;case"logical-block":return this.Rh;case"start-pos":return this.Ph;case"end-pos":return this.Oh;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#cljs.pprint.start-block-t{",", ","}",i,fh.h(new R(null,4,5,S,[new R(null,2,5,S,[Sn,this.Qh],null),new R(null,2,5,S,[ko,this.Rh],null),new R(null,2,5,S,[co,this.Ph],null),new R(null,2,5,S,[bo,this.Oh],null)],null),this.I))};g.Fa=function(){return new Zh(this,4,new R(null,4,5,S,[Sn,ko,co,bo],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new On(this.Qh,this.Rh,this.Ph,this.Oh,this.T,this.I,this.C)};g.ba=function(){return 4+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=-414877272^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.Qh,t.Qh)&&E.h(this.Rh,t.Rh)&&E.h(this.Ph,t.Ph)&&E.h(this.Oh,t.Oh)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,4,[bo,null,ko,null,Sn,null,co,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new On(this.Qh,this.Rh,this.Ph,this.Oh,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"type-tag":case"logical-block":case"start-pos":case"end-pos":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(Sn,t):Vf.call(null,Sn,t))?new On(i,this.Rh,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(ko,t):Vf.call(null,ko,t))?new On(this.Qh,i,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(co,t):Vf.call(null,co,t))?new On(this.Qh,this.Rh,i,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(bo,t):Vf.call(null,bo,t))?new On(this.Qh,this.Rh,this.Ph,i,this.T,this.I,null):new On(this.Qh,this.Rh,this.Ph,this.Oh,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,4,5,S,[new ci(Sn,this.Qh,null),new ci(ko,this.Rh,null),new ci(co,this.Ph,null),new ci(bo,this.Oh,null)],null),this.I))};g.Z=function(n,t){return new On(this.Qh,this.Rh,this.Ph,this.Oh,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};g=Pn.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"type-tag":return this.Qh;case"logical-block":return this.Rh;case"start-pos":return this.Ph;case"end-pos":return this.Oh;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#cljs.pprint.end-block-t{",", ","}",i,fh.h(new R(null,4,5,S,[new R(null,2,5,S,[Sn,this.Qh],null),new R(null,2,5,S,[ko,this.Rh],null),new R(null,2,5,S,[co,this.Ph],null),new R(null,2,5,S,[bo,this.Oh],null)],null),this.I))};g.Fa=function(){return new Zh(this,4,new R(null,4,5,S,[Sn,ko,co,bo],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Pn(this.Qh,this.Rh,this.Ph,this.Oh,this.T,this.I,this.C)};g.ba=function(){return 4+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=1365867980^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.Qh,t.Qh)&&E.h(this.Rh,t.Rh)&&E.h(this.Ph,t.Ph)&&E.h(this.Oh,t.Oh)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,4,[bo,null,ko,null,Sn,null,co,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new Pn(this.Qh,this.Rh,this.Ph,this.Oh,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"type-tag":case"logical-block":case"start-pos":case"end-pos":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(Sn,t):Vf.call(null,Sn,t))?new Pn(i,this.Rh,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(ko,t):Vf.call(null,ko,t))?new Pn(this.Qh,i,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(co,t):Vf.call(null,co,t))?new Pn(this.Qh,this.Rh,i,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(bo,t):Vf.call(null,bo,t))?new Pn(this.Qh,this.Rh,this.Ph,i,this.T,this.I,null):new Pn(this.Qh,this.Rh,this.Ph,this.Oh,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,4,5,S,[new ci(Sn,this.Qh,null),new ci(ko,this.Rh,null),new ci(co,this.Ph,null),new ci(bo,this.Oh,null)],null),this.I))};g.Z=function(n,t){return new Pn(this.Qh,this.Rh,this.Ph,this.Oh,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};g=Rn.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"type-tag":return this.Qh;case"logical-block":return this.Rh;case"relative-to":return this.ai;case"offset":return this.offset;case"start-pos":return this.Ph;case"end-pos":return this.Oh;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#cljs.pprint.indent-t{",", ","}",i,fh.h(new R(null,6,5,S,[new R(null,2,5,S,[Sn,this.Qh],null),new R(null,2,5,S,[ko,this.Rh],null),new R(null,2,5,S,[M0,this.ai],null),new R(null,2,5,S,[iu,this.offset],null),new R(null,2,5,S,[co,this.Ph],null),new R(null,2,5,S,[bo,this.Oh],null)],null),this.I))};g.Fa=function(){return new Zh(this,6,new R(null,6,5,S,[Sn,ko,M0,iu,co,bo],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Rn(this.Qh,this.Rh,this.ai,this.offset,this.Ph,this.Oh,this.T,this.I,this.C)};g.ba=function(){return 6+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=-1602780238^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.Qh,t.Qh)&&E.h(this.Rh,t.Rh)&&E.h(this.ai,t.ai)&&E.h(this.offset,t.offset)&&E.h(this.Ph,t.Ph)&&E.h(this.Oh,t.Oh)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,6,[iu,null,bo,null,M0,null,ko,null,Sn,null,co,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new Rn(this.Qh,this.Rh,this.ai,this.offset,this.Ph,this.Oh,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"type-tag":case"logical-block":case"relative-to":case"offset":case"start-pos":case"end-pos":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(Sn,t):Vf.call(null,Sn,t))?new Rn(i,this.Rh,this.ai,this.offset,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(ko,t):Vf.call(null,ko,t))?new Rn(this.Qh,i,this.ai,this.offset,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(M0,t):Vf.call(null,M0,t))?new Rn(this.Qh,this.Rh,i,this.offset,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(iu,t):Vf.call(null,iu,t))?new Rn(this.Qh,this.Rh,this.ai,i,this.Ph,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(co,t):Vf.call(null,co,t))?new Rn(this.Qh,this.Rh,this.ai,this.offset,i,this.Oh,this.T,this.I,null):l(Vf.h?Vf.h(bo,t):Vf.call(null,bo,t))?new Rn(this.Qh,this.Rh,this.ai,this.offset,this.Ph,i,this.T,this.I,null):new Rn(this.Qh,this.Rh,this.ai,this.offset,this.Ph,this.Oh,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,6,5,S,[new ci(Sn,this.Qh,null),new ci(ko,this.Rh,null),new ci(M0,this.ai,null),new ci(iu,this.offset,null),new ci(co,this.Ph,null),new ci(bo,this.Oh,null)],null),this.I))};g.Z=function(n,t){return new Rn(this.Qh,this.Rh,this.ai,this.offset,this.Ph,this.Oh,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};var Zn=function(){var n=Tg(og),t=Tg(og),i=Tg(og),s=Tg(og),o=J.l(og,u4,tk.G?tk.G():tk.call(null));return new Bk(Xj.h("cljs.pprint","write-token"),function(f,d){return Sn.g(d)},o,n,t,i,s)}();Zn.Nh(null,Po,function(n,t){var i=No.g(q(q(n)));return l(i)&&(i.g?i.g(Oo):i.call(null,Oo)),t=ko.g(t),i=cI.g(t),l(i)&&qd(vn.g(q(q(n))),i),n=rn(vn.g(q(q(n))),tn),N(io.g(t),n),N(oo.g(t),n)});Zn.Nh(null,Uo,function(n,t){var i=No.g(q(q(n)));return l(i)&&(i.g?i.g(To):i.call(null,To)),t=Ro.g(ko.g(t)),l(t)?qd(vn.g(q(q(n))),t):null});Zn.Nh(null,pp,function(n,t){var i=ko.g(t),s=oo.g(i),o=iu.g(t);if(t=M0.g(t),l(E.h?E.h(np,t):E.call(null,np,t)))n=q(io.g(i));else if(l(E.h?E.h(op,t):E.call(null,op,t)))n=rn(vn.g(q(q(n))),tn);else throw Error(["No matching clause: ",m.g(t)].join(""));return N(s,o+n)});Zn.Nh(null,Bo,function(n,t){return qd(vn.g(q(q(n))),NK.g(t))});Zn.Nh(null,Un,function(n,t){var i=E.h(pF.g(t),ep);return i||(i=(i=!E.h(pF.g(t),jp))?q(fo.g(ko.g(t))):i),l(i)?qo.h?qo.h(n,t):qo.call(null,n,t):(t=Vn.g(q(q(n))),l(t)&&qd(vn.g(q(q(n))),t)),dk.K(q(n),gj,Vn,null)});var u9=function(){var n=Tg(og),t=Tg(og),i=Tg(og),s=Tg(og),o=J.l(og,u4,tk.G?tk.G():tk.call(null));return new Bk(Xj.h("cljs.pprint","emit-nl?"),function(f){return pF.g(f)},o,n,t,i,s)}();u9.Nh(null,kp,function(n,t,i){return n=ko.g(n),go(t,n,i)});u9.Nh(null,fp,function(n,t,i){return n=ko.g(n),jo(t,n,i)});u9.Nh(null,jp,function(n,t,i,s){n=ko.g(n);var o=q(po.g(n));return l(o)?o:(s=!eo(t,s))?s:jo(t,n,i)});u9.Nh(null,ep,function(){return!0});var to=function n(t,i){var s=ro(i);i=I(s,0,null);var o=I(s,1,null);if(l(i)&&$n(t,i,!1),l(o)){s=lo(o),i=I(s,0,null),s=I(s,1,null);var f=z(o),d=u9.K(f,t,i,mo(o));return l(d)&&(qo(t,f),o=C(o)),eo(t,o)?t=o:(o=n.h?n.h(t,i):n.call(null,t,i),E.h(o,i)?($n(t,i,!1),t=s):t=Ng.h(lh,fh.h(o,s))),t}return null};g=Eo.prototype;g.Z=function(n,t){return new Eo(this.Sh,this.ni,this.yi,this.ri,this.$g,t)};g.Y=function(){return this.ti};g.pb=function(){return this.$g};g.Yf=function(n,t){if(n=jc(t),l(E.h?E.h(String,n):E.call(null,String,n))){var i=Do(this,t);t=i.replace(/\s+$/,""),n=i.substring(t.length);var s=zo.g(q(q(this)));return E.h(s,Co)?(wo(this),qd(vn.g(q(q(this))),t),dk.K(q(this),gj,Vn,n)):(s=Ao.g(q(q(this))),i=s+D(i),dk.K(q(this),gj,Ao,i),vo(this,new Kn(Bo,t,n,s,i,null,null,null)))}if(l(E.h?E.h(Number,n):E.call(null,Number,n)))return E.h(zo.g(q(q(this))),Co)?(wo(this),t=qd(vn.g(q(q(this))),t)):E.h(t,`
`)?t=Do(this,`
`):(n=Ao.g(q(q(this))),i=n+1,dk.K(q(this),gj,Ao,i),t=nh(t),t=vo(this,new Kn(Bo,t,null,n,i,null,null,null))),t;throw Error(["No matching clause: ",m.g(n)].join(""))};g.hi=function(){return this.mi(null),ae(vn.g(q(q(this))))};g.mi=function(){return E.h(zo.g(q(q(this))),yo)?($n(this,so.g(q(q(this))),!0),dk.K(q(this),gj,so,lh)):wo(this)};var Zo=!0,$o=null,Fo=72,Go=40,v9=null,w9=null,x9=null,Up=null,Tp=10,cp=0,Yo=null,y9=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],1<i.length?new u(i.slice(1),0,null):null)};y9.j=function(n,t){var i=Al.j(F([new h(null,1,[sY,!0],null),Kg.h(qQ,t)]));t=Tp;var s=w9,o=ob,f=Ej,d=v9,p=Go,v=$o,_=Zo,k=Up,P=Ua,L=Fo,G=x9,Z=vn.h(i,Tp),W=BE.h(i,w9),j=GS.h(i,ob),H=xJ.h(i,Ej),me=F6.h(i,v9),$e=ho.h(i,Go),De=EH.h(i,$o),le=N8.h(i,Zo),Ce=kU.h(i,Up),Me=Rb.h(i,Ua),_n=p6.h(i,Fo),_i=A0.h(i,x9);Tp=Z,w9=W,ob=j,Ej=H,v9=me,Go=$e,$o=De,Zo=le,Up=Ce,Ua=Me,Fo=_n,x9=_i;try{var ll=new Pb,_l=lf(i,sY)?sY.g(i):!0,oa=_l===!0||_l==null?new Od(ll):_l;if(l(Zo)){var Ru=gc(Xo(oa));i=Sm,Sm=Ru?Mo(oa):oa;try{ap(n),pn()}finally{Sm=i}}else{Ru=Sm,Sm=oa;try{Hm.call(null,n)}finally{Sm=Ru}}return _l===!0&&Ij(m.g(ll)),_l==null?m.g(ll):null}finally{x9=G,Fo=L,Ua=P,Up=k,Zo=_,$o=v,Go=p,v9=d,Ej=f,ob=o,w9=s,Tp=t}};y9.v=1;y9.B=function(n){var t=z(n);return n=C(n),this.j(t,n)};var z9=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};z9.g=function(n){var t=new Pb,i=Sm;Sm=new Od(t);try{return z9.h(n,Sm),Ij(m.g(t))}finally{Sm=i}};z9.h=function(n,t){var i=gc(Xo(t)),s=Sm;Sm=i?Mo(t):t;try{t=Zo,Zo=!0;try{ap(n)}finally{Zo=t}return E.h(0,rn(Sm,tn))||qd(Sm,`
`),pn()}finally{Sm=s}};z9.v=2;var xp=null;g=zp.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"seq":return this.gi;case"rest":return this.Tb;case"pos":return this.fi;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#cljs.pprint.arg-navigator{",", ","}",i,fh.h(new R(null,3,5,S,[new R(null,2,5,S,[Bp,this.gi],null),new R(null,2,5,S,[Ap,this.Tb],null),new R(null,2,5,S,[Ao,this.fi],null)],null),this.I))};g.Fa=function(){return new Zh(this,3,new R(null,3,5,S,[Bp,Ap,Ao],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new zp(this.gi,this.Tb,this.fi,this.T,this.I,this.C)};g.ba=function(){return 3+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=-402038447^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.gi,t.gi)&&E.h(this.Tb,t.Tb)&&E.h(this.fi,t.fi)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,3,[Ao,null,Bp,null,Ap,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new zp(this.gi,this.Tb,this.fi,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"seq":case"rest":case"pos":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(Bp,t):Vf.call(null,Bp,t))?new zp(i,this.Tb,this.fi,this.T,this.I,null):l(Vf.h?Vf.h(Ap,t):Vf.call(null,Ap,t))?new zp(this.gi,i,this.fi,this.T,this.I,null):l(Vf.h?Vf.h(Ao,t):Vf.call(null,Ao,t))?new zp(this.gi,this.Tb,i,this.T,this.I,null):new zp(this.gi,this.Tb,this.fi,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,3,5,S,[new ci(Bp,this.gi,null),new ci(Ap,this.Tb,null),new ci(Ao,this.fi,null)],null),this.I))};g.Z=function(n,t){return new zp(this.gi,this.Tb,this.fi,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};g=Hp.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"func":return this.di;case"def":return this.ci;case"params":return this.ei;case"offset":return this.offset;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#cljs.pprint.compiled-directive{",", ","}",i,fh.h(new R(null,4,5,S,[new R(null,2,5,S,[Pq,this.di],null),new R(null,2,5,S,[hu,this.ci],null),new R(null,2,5,S,[Nq,this.ei],null),new R(null,2,5,S,[iu,this.offset],null)],null),this.I))};g.Fa=function(){return new Zh(this,4,new R(null,4,5,S,[Pq,hu,Nq,iu],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Hp(this.di,this.ci,this.ei,this.offset,this.T,this.I,this.C)};g.ba=function(){return 4+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=-829256337^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.di,t.di)&&E.h(this.ci,t.ci)&&E.h(this.ei,t.ei)&&E.h(this.offset,t.offset)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,4,[iu,null,Pq,null,Nq,null,hu,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new Hp(this.di,this.ci,this.ei,this.offset,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"func":case"def":case"params":case"offset":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(Pq,t):Vf.call(null,Pq,t))?new Hp(i,this.ci,this.ei,this.offset,this.T,this.I,null):l(Vf.h?Vf.h(hu,t):Vf.call(null,hu,t))?new Hp(this.di,i,this.ei,this.offset,this.T,this.I,null):l(Vf.h?Vf.h(Nq,t):Vf.call(null,Nq,t))?new Hp(this.di,this.ci,i,this.offset,this.T,this.I,null):l(Vf.h?Vf.h(iu,t):Vf.call(null,iu,t))?new Hp(this.di,this.ci,this.ei,i,this.T,this.I,null):new Hp(this.di,this.ci,this.ei,this.offset,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,4,5,S,[new ci(Pq,this.di,null),new ci(hu,this.ci,null),new ci(Nq,this.ei,null),new ci(iu,this.offset,null)],null),this.I))};g.Z=function(n,t){return new Hp(this.di,this.ci,this.ei,this.offset,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};var Vp=new h(null,3,[2,"#b",8,"#o",16,"#x"],null),pq=new R(null,20,5,S,"zero one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nineteen".split(" "),null),A9=new R(null,20,5,S,"zeroth first second third fourth fifth sixth seventh eighth ninth tenth eleventh twelfth thirteenth fourteenth fifteenth sixteenth seventeenth eighteenth nineteenth".split(" "),null),rq=new R(null,10,5,S,"  twenty thirty forty fifty sixty seventy eighty ninety".split(" "),null),B9=new R(null,10,5,S,"  twentieth thirtieth fortieth fiftieth sixtieth seventieth eightieth ninetieth".split(" "),null),wq=new R(null,22,5,S," thousand million billion trillion quadrillion quintillion sextillion septillion octillion nonillion decillion undecillion duodecillion tredecillion quattuordecillion quindecillion sexdecillion septendecillion octodecillion novemdecillion vigintillion".split(" "),null),C9=new R(null,4,5,S,[new R(null,9,5,S,"I II III IIII V VI VII VIII VIIII".split(" "),null),new R(null,9,5,S,"X XX XXX XXXX L LX LXX LXXX LXXXX".split(" "),null),new R(null,9,5,S,"C CC CCC CCCC D DC DCC DCCC DCCCC".split(" "),null),new R(null,3,5,S,["M","MM","MMM"],null)],null),D9=new R(null,4,5,S,[new R(null,9,5,S,"I II III IV V VI VII VIII IX".split(" "),null),new R(null,9,5,S,"X XX XXX XL L LX LXX LXXX XC".split(" "),null),new R(null,9,5,S,"C CC CCC CD D DC DCC DCCC CM".split(" "),null),new R(null,3,5,S,["M","MM","MMM"],null)],null),Aq=new h(null,5,[8,"Backspace",9,"Tab",10,"Newline",13,"Return",32,"Space"],null);bt.prototype.Z=function(n,t){return new bt(this.Sh,t)};bt.prototype.Y=function(){return this.ui};bt.prototype.hi=function(){return ae(this.Sh)};bt.prototype.Yf=function(n,t){if(n=jc(t),l(E.h?E.h(String,n):E.call(null,String,n)))return qd(this.Sh,t.toLowerCase());if(l(E.h?E.h(Number,n):E.call(null,Number,n)))return qd(this.Sh,nh(t).toLowerCase());throw Error(["No matching clause: ",m.g(n)].join(""))};dt.prototype.Z=function(n,t){return new dt(this.Sh,t)};dt.prototype.Y=function(){return this.vi};dt.prototype.hi=function(){return ae(this.Sh)};dt.prototype.Yf=function(n,t){if(n=jc(t),l(E.h?E.h(String,n):E.call(null,String,n)))return qd(this.Sh,t.toUpperCase());if(l(E.h?E.h(Number,n):E.call(null,Number,n)))return qd(this.Sh,nh(t).toUpperCase());throw Error(["No matching clause: ",m.g(n)].join(""))};ht.prototype.Z=function(n,t){return new ht(this.Sh,this.ki,t)};ht.prototype.Y=function(){return this.wi};ht.prototype.hi=function(){return ae(this.Sh)};ht.prototype.Yf=function(n,t){if(n=jc(t),l(E.h?E.h(String,n):E.call(null,String,n)))return qd(this.Sh,ft(t.toLowerCase(),q(this.ki))),0<t.length?N(this.ki,Ta(Ee(t,D(t)-1))):null;if(l(E.h?E.h(Number,n):E.call(null,Number,n)))return t=nh(t),n=l(q(this.ki))?t.toUpperCase():t,qd(this.Sh,n),N(this.ki,Ta(t));throw Error(["No matching clause: ",m.g(n)].join(""))};jt.prototype.Z=function(n,t){return new jt(this.Sh,this.ji,t)};jt.prototype.Y=function(){return this.xi};jt.prototype.hi=function(){return ae(this.Sh)};jt.prototype.Yf=function(n,t){if(n=jc(t),l(E.h?E.h(String,n):E.call(null,String,n)))return t=t.toLowerCase(),gc(q(this.ji))?(n=RegExp("\\S","g").exec(t),n=l(n)?n.index:n,l(n)?(qd(this.Sh,[t.substring(0,n),Ee(t,n).toUpperCase(),t.substring(n+1).toLowerCase()].join("")),N(this.ji,!0)):qd(this.Sh,t)):qd(this.Sh,t.toLowerCase());if(l(E.h?E.h(Number,n):E.call(null,Number,n)))return t=nh(t),n=gc(q(this.ji)),l(n&&ra(t))?(N(this.ji,!0),qd(this.Sh,t.toUpperCase())):qd(this.Sh,t.toLowerCase());throw Error(["No matching clause: ",m.g(n)].join(""))};var Zt=Ni(`ASDBOXRPCFEG$%&|~
T*?()[;]{}<>^W_I`.split(""),[new h(null,5,[Ut,"A",Nq,new h(null,4,[Yp,new R(null,2,5,S,[0,Number],null),Zp,new R(null,2,5,S,[1,Number],null),Xp,new R(null,2,5,S,[0,Number],null),aq,new R(null,2,5,S,[" ",String],null)],null),Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,og,$t,function(){return function(n,t){return dq(lq,n,t)}}],null),new h(null,5,[Ut,"S",Nq,new h(null,4,[Yp,new R(null,2,5,S,[0,Number],null),Zp,new R(null,2,5,S,[1,Number],null),Xp,new R(null,2,5,S,[0,Number],null),aq,new R(null,2,5,S,[" ",String],null)],null),Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,og,$t,function(){return function(n,t){return dq(im,n,t)}}],null),new h(null,5,[Ut,"D",Nq,new h(null,4,[Yp,new R(null,2,5,S,[0,Number],null),aq,new R(null,2,5,S,[" ",String],null),kq,new R(null,2,5,S,[",",String],null),iq,new R(null,2,5,S,[3,Number],null)],null),Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,og,$t,function(){return function(n,t){return nq(10,n,t)}}],null),new h(null,5,[Ut,"B",Nq,new h(null,4,[Yp,new R(null,2,5,S,[0,Number],null),aq,new R(null,2,5,S,[" ",String],null),kq,new R(null,2,5,S,[",",String],null),iq,new R(null,2,5,S,[3,Number],null)],null),Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,og,$t,function(){return function(n,t){return nq(2,n,t)}}],null),new h(null,5,[Ut,"O",Nq,new h(null,4,[Yp,new R(null,2,5,S,[0,Number],null),aq,new R(null,2,5,S,[" ",String],null),kq,new R(null,2,5,S,[",",String],null),iq,new R(null,2,5,S,[3,Number],null)],null),Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,og,$t,function(){return function(n,t){return nq(8,n,t)}}],null),new h(null,5,[Ut,"X",Nq,new h(null,4,[Yp,new R(null,2,5,S,[0,Number],null),aq,new R(null,2,5,S,[" ",String],null),kq,new R(null,2,5,S,[",",String],null),iq,new R(null,2,5,S,[3,Number],null)],null),Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,og,$t,function(){return function(n,t){return nq(16,n,t)}}],null),new h(null,5,[Ut,"R",Nq,new h(null,5,[vn,new R(null,2,5,S,[null,Number],null),Yp,new R(null,2,5,S,[0,Number],null),aq,new R(null,2,5,S,[" ",String],null),kq,new R(null,2,5,S,[",",String],null),iq,new R(null,2,5,S,[3,Number],null)],null),Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,og,$t,function(n){return l(z(vn.g(n)))?function(t,i){return nq(vn.g(t),t,i)}:l(function(){var t=Kp.g(n);return l(t)?Jp.g(n):t}())?function(t,i){return yq(C9,i)}:l(Kp.g(n))?function(t,i){return yq(D9,i)}:l(Jp.g(n))?function(t,i){if(t=Cp(i),i=I(t,0,null),t=I(t,1,null),E.h(0,i))bq.j(F(["zeroth"]));else{var s=eq(1e3,0>i?-i:i);if(D(s)<=D(wq)){var o=O.h(vq,Xg(1,s));o=xq(o,1);var f=Le(s);s=Jf(f,100),f=zj(f,100);var d=0<s?[m.g(Ee(pq,s))," hundred"].join(""):null,p=m,v=p.g;if(0<f)if(20>f)var _=Ee(A9,f);else{_=Jf(f,10);var k=zj(f,10);_=0<_&&!(0<k)?Ee(B9,_):[m.g(0<_?Ee(rq,_):null),0<_&&0<k?"-":null,m.g(0<k?Ee(A9,k):null)].join("")}else _=0<s?"th":null;s=[d,0<s&&0<f?" ":null,v.call(p,_)].join(""),bq.j(F([[0>i?"minus ":null,Ve(o)||Ve(s)?Ve(o)?s:[o,"th"].join(""):[o,", ",s].join("")].join("")]))}else nq(10,new h(null,5,[Yp,0,aq," ",kq,",",iq,3,Jp,!0],null),sp(new R(null,1,5,S,[i],null))),o=zj(i,100),i=11<o||19>o,o=zj(o,10),bq.j(F([o===1&&i?"st":o===2&&i?"nd":o===3&&i?"rd":"th"]))}return t}:function(t,i){if(i=Cp(i),t=I(i,0,null),i=I(i,1,null),E.h(0,t))bq.j(F(["zero"]));else{var s=eq(1e3,0>t?-t:t);D(s)<=D(wq)?(s=O.h(vq,s),s=xq(s,0),bq.j(F([[0>t?"minus ":null,s].join("")]))):nq(10,new h(null,5,[Yp,0,aq," ",kq,",",iq,3,Jp,!0],null),sp(new R(null,1,5,S,[t],null)))}return i}}],null),new h(null,5,[Ut,"P",Nq,og,Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,og,$t,function(){return function(n,t){t=l(Jp.g(n))?Fp(t,-1):t,n=l(Kp.g(n))?new R(null,2,5,S,["y","ies"],null):new R(null,2,5,S,["","s"],null);var i=Cp(t);return t=I(i,0,null),i=I(i,1,null),bq.j(F([E.h(t,1)?z(n):Ke(n)])),i}}],null),new h(null,5,[Ut,"C",Nq,new h(null,1,[Eq,new R(null,2,5,S,[null,String],null)],null),Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,og,$t,function(n){return l(Jp.g(n))?Dq:l(Kp.g(n))?Fq:Gq}],null),new h(null,5,[Ut,"F",Nq,new h(null,5,[Xq,new R(null,2,5,S,[null,Number],null),Yq,new R(null,2,5,S,[null,Number],null),Nr,new R(null,2,5,S,[0,Number],null),Zr,new R(null,2,5,S,[null,String],null),aq,new R(null,2,5,S,[" ",String],null)],null),Mt,new jj(null,new h(null,1,[Kp,null],null),null),gu,og,$t,function(){return cs}],null),new h(null,5,[Ut,"E",Nq,new h(null,7,[Xq,new R(null,2,5,S,[null,Number],null),Yq,new R(null,2,5,S,[null,Number],null),ds,new R(null,2,5,S,[null,Number],null),Nr,new R(null,2,5,S,[1,Number],null),Zr,new R(null,2,5,S,[null,String],null),aq,new R(null,2,5,S,[" ",String],null),es,new R(null,2,5,S,[null,String],null)],null),Mt,new jj(null,new h(null,1,[Kp,null],null),null),gu,og,$t,function(){return fs}],null),new h(null,5,[Ut,"G",Nq,new h(null,7,[Xq,new R(null,2,5,S,[null,Number],null),Yq,new R(null,2,5,S,[null,Number],null),ds,new R(null,2,5,S,[null,Number],null),Nr,new R(null,2,5,S,[1,Number],null),Zr,new R(null,2,5,S,[null,String],null),aq,new R(null,2,5,S,[" ",String],null),es,new R(null,2,5,S,[null,String],null)],null),Mt,new jj(null,new h(null,1,[Kp,null],null),null),gu,og,$t,function(){return gs}],null),new h(null,5,[Ut,"$",Nq,new h(null,4,[Yq,new R(null,2,5,S,[2,Number],null),hs,new R(null,2,5,S,[1,Number],null),Xq,new R(null,2,5,S,[0,Number],null),aq,new R(null,2,5,S,[" ",String],null)],null),Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,og,$t,function(){return is}],null),new h(null,5,[Ut,"%",Nq,new h(null,1,[zJ,new R(null,2,5,S,[1,Number],null)],null),Mt,kj,gu,og,$t,function(){return function(n,t){n=zJ.g(n);for(var i=0;i<n;)Ym(),i+=1;return t}}],null),new h(null,5,[Ut,"&",Nq,new h(null,1,[zJ,new R(null,2,5,S,[1,Number],null)],null),Mt,new jj(null,new h(null,1,[N8,null],null),null),gu,og,$t,function(){return function(n,t){n=zJ.g(n),0<n&&((Sm!=null?Sm.A&32768||Zd===Sm.$e||!Sm.A&&ic(Zc,Sm):ic(Zc,Sm))&&E.h(0,rn(vn.g(q(q(Sm))),tn))||Ym()),--n;for(var i=0;i<n;)Ym(),i+=1;return t}}],null),new h(null,5,[Ut,"|",Nq,new h(null,1,[zJ,new R(null,2,5,S,[1,Number],null)],null),Mt,kj,gu,og,$t,function(){return function(n,t){n=zJ.g(n);for(var i=0;i<n;)bq.j(F(["\f"])),i+=1;return t}}],null),new h(null,5,[Ut,"~",Nq,new h(null,1,[hs,new R(null,2,5,S,[1,Number],null)],null),Mt,kj,gu,og,$t,function(){return function(n,t){return n=hs.g(n),bq.j(F([Kg.h(m,ah(n,"~"))])),t}}],null),new h(null,5,[Ut,`
`,Nq,og,Mt,new jj(null,new h(null,2,[Jp,null,Kp,null],null),null),gu,og,$t,function(){return function(n,t){return l(Kp.g(n))&&Ym(),t}}],null),new h(null,5,[Ut,"T",Nq,new h(null,2,[C2,new R(null,2,5,S,[1,Number],null),Zp,new R(null,2,5,S,[1,Number],null)],null),Mt,new jj(null,new h(null,2,[Kp,null,N8,null],null),null),gu,og,$t,function(n){return l(Kp.g(n))?function(t,i){var s=C2.g(t);t=Zp.g(t);var o=s+rn(vn.g(q(q(Sm))),tn);return o=0<t?zj(o,t):0,s+=E.h(0,o)?0:t-o,bq.j(F([Kg.h(m,ah(s," "))])),i}:function(t,i){var s=C2.g(t);t=Zp.g(t);var o=rn(vn.g(q(q(Sm))),tn);return s=o<s?s-o:E.h(t,0)?0:t-zj(o-s,t),bq.j(F([Kg.h(m,ah(s," "))])),i}}],null),new h(null,5,[Ut,"*",Nq,new h(null,1,[hs,new R(null,2,5,S,[1,Number],null)],null),Mt,new jj(null,new h(null,2,[Jp,null,Kp,null],null),null),gu,og,$t,function(){return function(n,t){var i=hs.g(n);return l(Kp.g(n))?Gp(t,i):Fp(t,l(Jp.g(n))?-i:i)}}],null),new h(null,5,[Ut,"?",Nq,og,Mt,new jj(null,new h(null,1,[Kp,null],null),null),gu,og,$t,function(n){return l(Kp.g(n))?function(t,i){var s=Dp(i);return i=I(s,0,null),s=I(s,1,null),Qq(i,s,Oq.g(t))}:function(t,i){var s=Dp(i);i=I(s,0,null),s=I(s,1,null);var o=Cp(s);return s=I(o,0,null),o=I(o,1,null),s=sp(s),Qq(i,s,Oq.g(t)),o}}],null),new h(null,5,[Ut,"(",Nq,og,Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,new h(null,3,[ku,")",ru,null,ls,null],null),$t,function(n){var t=l(function(){var i=Kp.g(n);return l(i)?Jp.g(n):i}())?et:l(Jp.g(n))?it:l(Kp.g(n))?lt:ct;return function(i,s){e:{var o=z(ks.g(i)),f=Sm;Sm=t.g?t.g(Sm):t.call(null,Sm);try{var d=Qq(o,s,Oq.g(i));break e}finally{Sm=f}d=void 0}return d}}],null),new h(null,5,[Ut,")",Nq,og,Mt,kj,gu,og,$t,function(){return null}],null),new h(null,5,[Ut,"[",Nq,new h(null,1,[js,new R(null,2,5,S,[null,Number],null)],null),Mt,new jj(null,new h(null,2,[Jp,null,Kp,null],null),null),gu,new h(null,3,[ku,"]",ru,!0,ls,i7],null),$t,function(n){return l(Jp.g(n))?ns:l(Kp.g(n))?os:ms}],null),new h(null,5,[Ut,";",Nq,new h(null,2,[$s,new R(null,2,5,S,[null,Number],null),at,new R(null,2,5,S,[null,Number],null)],null),Mt,new jj(null,new h(null,1,[Jp,null],null),null),gu,new h(null,1,[mu,!0],null),$t,function(){return null}],null),new h(null,5,[Ut,"]",Nq,og,Mt,kj,gu,og,$t,function(){return null}],null),new h(null,5,[Ut,"{",Nq,new h(null,1,[ps,new R(null,2,5,S,[null,Number],null)],null),Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,new h(null,2,[ku,"}",ru,!1],null),$t,function(n){var t=Kp.g(n);return t=l(t)?Jp.g(n):t,l(t)?Hs:l(Jp.g(n))?ys:l(Kp.g(n))?Es:ws}],null),new h(null,5,[Ut,"}",Nq,og,Mt,new jj(null,new h(null,1,[Jp,null],null),null),gu,og,$t,function(){return null}],null),new h(null,5,[Ut,"<",Nq,new h(null,4,[Yp,new R(null,2,5,S,[0,Number],null),Zp,new R(null,2,5,S,[1,Number],null),Xp,new R(null,2,5,S,[0,Number],null),aq,new R(null,2,5,S,[" ",String],null)],null),Mt,new jj(null,new h(null,4,[Jp,null,Kp,null,Vt,null,N8,null],null),null),gu,new h(null,3,[ku,">",ru,!0,ls,qu],null),$t,function(){return Ws}],null),new h(null,5,[Ut,">",Nq,og,Mt,new jj(null,new h(null,1,[Jp,null],null),null),gu,og,$t,function(){return null}],null),new h(null,5,[Ut,"^",Nq,new h(null,3,[a6,new R(null,2,5,S,[null,Number],null),c6,new R(null,2,5,S,[null,Number],null),b6,new R(null,2,5,S,[null,Number],null)],null),Mt,new jj(null,new h(null,1,[Jp,null],null),null),gu,og,$t,function(){return function(n,t){var i=a6.g(n),s=c6.g(n),o=b6.g(n),f=l(Jp.g(n))?Iq:Hq;return l(l(i)?l(s)?o:s:i)?i<=s&&s<=o?new R(null,2,5,S,[f,t],null):t:l(l(i)?s:i)?E.h(i,s)?new R(null,2,5,S,[f,t],null):t:l(i)?E.h(i,0)?new R(null,2,5,S,[f,t],null):t:(l(Jp.g(n))?Ve(Ap.g(Oq.g(n))):Ve(Ap.g(t)))?new R(null,2,5,S,[f,t],null):t}}],null),new h(null,5,[Ut,"W",Nq,og,Mt,new jj(null,new h(null,4,[Jp,null,Kp,null,Vt,null,N8,null],null),null),gu,og,$t,function(n){if(l(function(){var i=Kp.g(n);return l(i)?i:Jp.g(n)}())){var t=fh.h(l(Kp.g(n))?new R(null,4,5,S,[xJ,null,GS,null],null):lh,l(Jp.g(n))?new R(null,2,5,S,[N8,!0],null):lh);return function(i,s){return s=Cp(s),i=I(s,0,null),s=I(s,1,null),l(Kg.l(y9,i,t))?new R(null,2,5,S,[Hq,s],null):s}}return function(i,s){return s=Cp(s),i=I(s,0,null),s=I(s,1,null),l(ap(i))?new R(null,2,5,S,[Hq,s],null):s}}],null),new h(null,5,[Ut,"_",Nq,og,Mt,new jj(null,new h(null,3,[Jp,null,Kp,null,Vt,null],null),null),gu,og,$t,function(){return qt}],null),new h(null,5,[Ut,"I",Nq,new h(null,1,[hs,new R(null,2,5,S,[0,Number],null)],null),Mt,new jj(null,new h(null,1,[Jp,null],null),null),gu,og,$t,function(){return nt}],null)]),rt=/^([vV]|#|('.)|([+-]?\d+)|(?=,))/,Xt=new jj(null,new h(null,2,[Op,null,Mp,null],null),null),Ft=new h(null,2,[":",Jp,"@",Kp],null),tp=function n(t){for(;;){if(Ve(t))return!1;var i=N8.g(Mt.g(hu.g(z(t))));if(l(i)||(i=Jg(n,z(ks.g(Nq.g(z(t))))),i=l(i)?i:Jg(n,z(ls.g(Nq.g(z(t)))))),l(i))return!0;t=C(t)}},ow=jm(rp),uu=new h(null,6,[h7,"'",ZV,"#'",YX,"@",SY,"~",V4,"@",JU,"~"],null);(function(){var n=ow("~<[~;~@{~w~^, ~:_~}~;]~:>");return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){return s=sp(s),up(n,s)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()})();var E9=function(){var n=ow("~<#{~;~@{~w~^ ~:_~}~;}~:>");return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){return s=sp(s),up(n,s)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()}(),F9=new h(null,2,["core$future_call","Future","core$promise","Promise"],null),G9=function(){var n=ow("~<<-(~;~@{~w~^ ~_~}~;)-<~:>");return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){return s=sp(s),up(n,s)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()}(),H9,I9=Tg(og),J9=Tg(og),K9=Tg(og),L9=Tg(og),M9=J.l(og,u4,tk.G?tk.G():tk.call(null));H9=new Bk(Xj.h("cljs.pprint","simple-dispatch"),$v,M9,I9,J9,K9,L9);lm(H9,Tv,function(n){if(gc(fv(n)))if(l(dp()))qd(Sm,"#");else{var t=cp,i=Yo;cp+=1,Yo=0;try{Qo("(",")");for(var s=0,o=w(n);;){if(gc(ob)||s<ob){if(o&&(ap(z(o)),C(o))){qd(Sm," "),mp(kp),n=s+1;var f=C(o);s=n,o=f;continue}}else qd(Sm,"...");break}Vo()}finally{Yo=i,cp=t}}return null});lm(H9,Vv,iv);lm(H9,Uv,Nv);lm(H9,Zv,E9);lm(H9,null,function(){return qd(Sm,im.j(F([null])))});lm(H9,sm,Ov);$o=H9;var N9=function(){var n=ow("~:<~w~^ ~@_~w~^ ~_~@{~w~^ ~_~}~:>");return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){return s=sp(s),up(n,s)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()}(),O9=function(){var n=ow("~:<~1I~w~^ ~@_~w~@{ ~_~w~}~:>");return function(){function t(s){var o=null;if(0<arguments.length){o=0;for(var f=Array(arguments.length-0);o<f.length;)f[o]=arguments[o+0],++o;o=new u(f,0,null)}return i.call(this,o)}function i(s){return s=sp(s),up(n,s)}return t.v=0,t.B=function(s){return s=w(s),i(s)},t.j=i,t}()}(),P9=og,Q9=function(n){return Ng.h(og,gh(Df,F([function(){return function t(i){return new Yf(null,function(){for(;;){var s=w(i);if(s){if(df(s)){var o=Fd(s),f=D(o),d=ag(f);e:for(var p=0;;)if(p<f){var v=Oe(o,p);v=new R(null,2,5,S,[v,new R(null,2,5,S,[Xj.g(qj(z(v))),Ke(v)],null)],null),d.add(v),p+=1}else{o=!0;break e}return o?dg(d.fa(),t(Gd(s))):dg(d.fa(),null)}return d=z(s),Tf(new R(null,2,5,S,[d,new R(null,2,5,S,[Xj.g(qj(z(d))),Ke(d)],null)],null),t(he(s)))}return null}},null,null)}(n)}()])))}(function(n){return Ng.h(og,O.h(function(t){var i=I(t,0,null),s=I(t,1,null),o=Wf(i);return o=l(o)?o:lf(new jj(null,new h(null,24,[a4,"null",mV,"null",B8,"null",I8,"null",aV,"null",b7,"null",cX,"null",AX,"null",pR,"null",bY,"null",W5,"null",BV,"null",I7,"null",G8,"null",x3,"null",VS,"null",EU,"null",XV,"null",b4,"null",ZV,"null",h7,"null",KY,"null",ES,"null",O7,"null"],null),null),i),gc(o)?new R(null,2,5,S,[Xj.h("clojure.core",qj(i)),s],null):t},n))}(Ni([b4,VS,J1,bY,Q3,Z0,HR,PT,q2,b2,AS,R6,B5,O7,Y4,y6,lW,a9,T0,BV,SX,WX,Q8,PX,MU,g9,X0,dR,TR,kY],[N9,function(n){var t=Ke(n),i=z(he(he(n)));if(cf(t)){n=P9,P9=E.h(1,D(t))?ng([z(t),"%"]):Ng.h(og,O.l(function(s,o){return new R(null,2,5,S,[s,["%",m.g(o)].join("")],null)},t,Wl(1,D(t)+1)));try{return function(){var s=ow("~<#(~;~@{~w~^ ~_~}~;)~:>");return function(){function o(d){var p=null;if(0<arguments.length){p=0;for(var v=Array(arguments.length-0);p<v.length;)v[p]=arguments[p+0],++p;p=new u(v,0,null)}return f.call(this,p)}function f(d){return d=sp(d),up(s,d)}return o.v=0,o.B=function(d){return d=w(d),f(d)},o.j=f,o}()}()(i)}finally{P9=n}}else return Iw(n)},cx,O9,function(n){if(3<D(n)){if(l(dp()))qd(Sm,"#");else{var t=cp,i=Yo;cp+=1,Yo=0;try{Qo("(",")"),qp(np,1),Kg.h(function(){var p=ow("~w ~@_~w ~@_~w ~_");return function(){function v(k){var P=null;if(0<arguments.length){P=0;for(var L=Array(arguments.length-0);P<L.length;)L[P]=arguments[P+0],++P;P=new u(L,0,null)}return _.call(this,P)}function _(k){return k=sp(k),up(p,k)}return v.v=0,v.B=function(k){return k=w(k),_(k)},v.j=_,v}()}(),n);for(var s=0,o=w(Wg(3,n));;){if(gc(ob)||s<ob){if(o){if(l(dp()))qd(Sm,"#");else{n=cp;var f=Yo;cp+=1,Yo=0;try{Qo(null,null),ap(z(o)),C(o)&&(qd(Sm," "),mp(fp),ap(Ke(o))),Vo()}finally{Yo=f,cp=n}}if(C(he(o))){qd(Sm," "),mp(kp),n=s+1;var d=C(he(o));s=n,o=d;continue}}}else qd(Sm,"...");break}Vo()}finally{Yo=i,cp=t}}return null}return Iw(n)},N9,Kw,Kw,cx,N9,cx,O9,O9,N9,O9,cx,cx,N9,cx,function(n){if(C(n)){var t=w(n);n=z(t);var i=C(t);t=z(i),i=C(i);var s=typeof z(i)=="string"?new R(null,2,5,S,[z(i),C(i)],null):new R(null,2,5,S,[null,i],null);i=I(s,0,null),s=I(s,1,null),s=Ze(z(s))?new R(null,2,5,S,[z(s),C(s)],null):new R(null,2,5,S,[null,s],null);var o=I(s,0,null),f=I(s,1,null);if(l(dp()))qd(Sm,"#");else{s=cp;var d=Yo;cp+=1,Yo=0;try{for(Qo("(",")"),function(){var v=ow("~w ~1I~@_~w");return function(){function _(P){var L=null;if(0<arguments.length){L=0;for(var G=Array(arguments.length-0);L<G.length;)G[L]=arguments[L+0],++L;L=new u(G,0,null)}return k.call(this,L)}function k(P){return P=sp(P),up(v,P)}return _.v=0,_.B=function(P){return P=w(P),k(P)},_.j=k,_}()}()(n,t),l(l(i)?i:l(o)?o:w(f))&&function(){var v=ow("~@:_");return function(){function _(P){var L=null;if(0<arguments.length){L=0;for(var G=Array(arguments.length-0);L<G.length;)G[L]=arguments[L+0],++L;L=new u(G,0,null)}return k.call(this,L)}function k(P){return P=sp(P),up(v,P)}return _.v=0,_.B=function(P){return P=w(P),k(P)},_.j=k,_}()}()(),l(i)&&vp(!0,'"~a"~:[~;~:@_~]',F([i,l(o)?o:w(f)])),l(o)&&function(){var v=ow("~w~:[~;~:@_~]");return function(){function _(P){var L=null;if(0<arguments.length){L=0;for(var G=Array(arguments.length-0);L<G.length;)G[L]=arguments[L+0],++L;L=new u(G,0,null)}return k.call(this,L)}function k(P){return P=sp(P),up(v,P)}return _.v=0,_.B=function(P){return P=w(P),k(P)},_.j=k,_}()}()(o,w(f)),n=f;;){pw(z(n));var p=C(n);if(p)t=p,mp(kp),n=t;else break}Vo()}finally{Yo=d,cp=s}}return null}return ap(n)},cx,function(n){if(l(dp()))qd(Sm,"#");else{var t=cp,i=Yo;cp+=1,Yo=0;try{if(Qo("(",")"),qp(np,1),ap(z(n)),C(n)){qd(Sm," "),mp(kp);for(var s=0,o=C(n);;){if(gc(ob)||s<ob){if(o){if(l(dp()))qd(Sm,"#");else{n=cp;var f=Yo;cp+=1,Yo=0;try{Qo(null,null),ap(z(o)),C(o)&&(qd(Sm," "),mp(fp),ap(Ke(o))),Vo()}finally{Yo=f,cp=n}}if(C(he(o))){qd(Sm," "),mp(kp),n=s+1;var d=C(he(o));s=n,o=d;continue}}}else qd(Sm,"...");break}}Vo()}finally{Yo=i,cp=t}}return null},cx,Kw,Kw,N9,N9,cx,cx,N9]))),R9,S9=Tg(og),T9=Tg(og),U9=Tg(og),V9=Tg(og),W9=J.l(og,u4,tk.G?tk.G():tk.call(null));R9=new Bk(Xj.h("cljs.pprint","code-dispatch"),$v,W9,S9,T9,U9,V9);lm(R9,Tv,function(n){if(gc(fv(n))){var t=Q9.call(null,z(n));return l(t)?t.g?t.g(n):t.call(null,n):Iw(n)}return null});lm(R9,Rv,function(n){var t=n.g?n.g(P9):n.call(null,P9);return l(t)?bq.j(F([t])):l(x9)?bq.j(F([qj(n)])):Hm.call(null,n)});lm(R9,Vv,iv);lm(R9,Uv,Nv);lm(R9,Zv,E9);lm(R9,Pv,G9);lm(R9,Qv,function(n){var t=m,i=t.g,s=jc(n).name,o=Cj(/^[^$]+\$[^$]+/,s);if(o=l(o)?F9.g?F9.g(o):F9.call(null,o):null,t=["#<",i.call(t,l(o)?o:s),"@",m.g(fa(n)),": "].join(""),l(dp()))qd(Sm,"#");else{i=cp,s=Yo,cp+=1,Yo=0;try{Qo(t,">"),qp(np,-(t.length-2)),mp(kp);var f=n!=null?n.N&1||Zd===n.zi?!0:n.N?!1:ic(qf,n):ic(qf,n),d=f&&!rf(n);ap(d?aW:q(n)),Vo()}finally{Yo=s,cp=i}}return null});lm(R9,null,Hm);lm(R9,sm,Ov);$o=H9;var Qk,X9=Tg(og),Y9=Tg(og),Z9=Tg(og),$9=Tg(og),a$=J.l(og,u4,tk.G?tk.G():tk.call(null));Qk=new Bk(Xj.h("cljs.tools.reader.impl.inspect","inspect*"),function(n,t){return t==null?G0:typeof t=="string"?Ts:t instanceof K||typeof t=="number"||t instanceof r?FV:cf(t)?Vv:Nf(t)?Tv:Ze(t)?Uv:Xe(t)?Zv:E.h(t,!0)||E.h(t,!1)?FV:jc(t)},a$,X9,Y9,Z9,$9);Qk.Nh(null,Ts,function(n,t){n=l(n)?5:20;var i=t.length>n?'..."':'"',s=t.length;return['"',m.g(t.substring(0,n<s?n:s)),i].join("")});Qk.Nh(null,FV,function(n,t){return m.g(t)});Qk.Nh(null,u,function(){return"<indexed seq>"});Qk.Nh(null,di,function(){return"<map seq>"});Qk.Nh(null,Ci,function(){return"<map seq>"});Qk.Nh(null,Sf,function(){return"<cons>"});Qk.Nh(null,Yf,function(){return"<lazy seq>"});Qk.Nh(null,G0,function(){return"nil"});Qk.Nh(null,Tv,function(n,t){return Rk(n,t,"(",")")});Qk.Nh(null,Uv,function(n,t){var i=D(t),s=l(n)?0:i;return t=Kg.h(fh,Vg(s,t)),Rk(n,t,"{",i>s?"...}":"}")});Qk.Nh(null,Zv,function(n,t){return Rk(n,t,"#{","}")});Qk.Nh(null,Vv,function(n,t){return Rk(n,t,"[","]")});Qk.Nh(null,sm,function(n,t){return im.j(F([jc(t)]))});new Pb;var Vk=function(){var n=new R(null,13,5,S,[null,31,28,31,30,31,30,31,31,30,31,30,31],null),t=new R(null,13,5,S,[null,31,29,31,30,31,30,31,31,30,31,30,31],null);return function(i,s){return J.h(l(s)?t:n,i)}}(),Uk=/(\d\d\d\d)(?:-(\d\d)(?:-(\d\d)(?:[T](\d\d)(?::(\d\d)(?::(\d\d)(?:[.](\d+))?)?)?)?)?)?(?:[Z]|([-+])(\d\d):(\d\d))?/;Al.j(F([new h(null,4,[$1,function(n){if(typeof n=="string"){var t=Wk(n);if(l(t)){n=I(t,0,null);var i=I(t,1,null),s=I(t,2,null),o=I(t,3,null),f=I(t,4,null),d=I(t,5,null),p=I(t,6,null);t=I(t,7,null),t=new Date(Date.UTC(n,i-1,s,o,f,d,p)-6e4*t)}else throw Error(["Unrecognized date/time syntax: ",m.g(n)].join(""));return t}throw Error("Instance literal expects a string for its timestamp.")},kW,function(n){if(typeof n=="string")return Gk(n);throw Error("UUID literal expects a string as its representation.")},p8,function(n){if(cf(n))return Ng.h(sK,n);throw Error("Queue literal expects a vector for its elements.")},iV,function(n){if(cf(n)){var t=[];n=w(n);for(var i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o);t.push(f),o+=1}else if(n=w(n))i=n,df(i)?(n=Fd(i),o=Gd(i),i=n,s=D(n),n=o):(n=z(i),t.push(n),n=C(i),i=null,s=0),o=0;else break;return t}if(Ze(n)){for(t={},n=w(n),i=null,o=s=0;;)if(o<s){var d=i.S(null,o);f=I(d,0,null),d=I(d,1,null),f=qj(f),t[f]=d,o+=1}else if(n=w(n))df(n)?(s=Fd(n),n=Gd(n),i=s,s=D(s)):(s=z(n),i=I(s,0,null),s=I(s,1,null),i=qj(i),t[i]=s,n=C(n),i=null,s=0),o=0;else break;return t}throw Error("JS literal expects a vector or map containing only string or unqualified keyword keys")}],null),og]));var KZ=typeof window<"u"&&window.document!=null,Yk=new jj(null,new h(null,2,["aria",null,"data",null],null),null),Xm=function n(t){switch(arguments.length){case 0:return n.G();case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};Xm.G=function(){return null};Xm.g=function(n){return We(n)?(n=Rg(function(t){return l(t)?bl(t)?qj(t):t:null},n),w(n)?Nk(" ",n):null):bl(n)?qj(n):n};Xm.h=function(n,t){return l(n)?l(t)?[m.g(Xm.g(n))," ",m.g(Xm.g(t))].join(""):Xm.g(n):Xm.g(t)};Xm.j=function(n,t,i){return nc(Xm,Xm.h(n,t),i)};Xm.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};Xm.v=2;var rm=0,LZ=KZ?function(){var n=window;return function(){var t=n.requestAnimationFrame;return l(t)||(t=n.webkitRequestAnimationFrame,l(t))||(t=n.mozRequestAnimationFrame,l(t))?t:(t=n.msRequestAnimationFrame,l(t)?t:fl)}().bind(n)}():fl;g=ml.prototype;g.flush_after_render=function(){var n=this.Td;return n==null?null:(this.Td=null,il(n))};g.queue_render=function(n){return this.le==null&&(this.le=[]),jl(this,this.le,n)};g.schedule=function(){function n(){return t.run_queues()}var t=this;return this.De?null:(this.De=!0,LZ.g?LZ.g(n):LZ.call(null,n))};g.flush_before_flush=function(){var n=this.Vd;return n==null?null:(this.Vd=null,il(n))};g.flush_queues=function(){return this.flush_before_flush(),hl(),this.flush_render(),this.flush_after_render()};g.run_queues=function(){return this.De=!1,this.flush_queues()};g.add_before_flush=function(n){return this.Vd==null&&(this.Vd=[]),jl(this,this.Vd,n)};g.add_after_render=function(n){return this.Td==null&&(this.Td=[]),jl(this,this.Td,n)};g.flush_render=function(){var n=this.le;if(n==null)return null;this.le=null;e:{n.sort(gl);for(var t=n.length,i=0;;)if(i<t){var s=n[i];s.cljsIsDirty===!0&&s.forceUpdate(),i+=1}else break e}return null};var nl=new ml,b$=function n(t){switch(arguments.length){case 0:return n.G();case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};b$.G=function(){return kj};b$.g=function(n){return n};b$.h=function(n,t){return D(n)<D(t)?nc(Qf,t,n):nc(Qf,n,t)};b$.j=function(n,t,i){return n=vl(D,Qf.j(i,t,F([n]))),nc(Ng,z(n),he(n))};b$.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};b$.v=2;var zl=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};zl.g=function(n){return n};zl.h=function(n,t){for(;;)if(D(t)<D(n)){var i=n;n=t,t=i}else return nc(function(s,o){return function(f,d){return lf(o,d)?f:ot.h(f,d)}}(n,t),n,n)};zl.j=function(n,t,i){return n=vl(function(s){return-D(s)},Qf.j(i,t,F([n]))),nc(zl,z(n),he(n))};zl.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};zl.v=2;var iw=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],new u(i.slice(2),0,null))}};iw.g=function(n){return n};iw.h=function(n,t){return D(n)<D(t)?nc(function(i,s){return lf(t,s)?ot.h(i,s):i},n,n):nc(ot,n,t)};iw.j=function(n,t,i){return nc(iw,n,Qf.h(i,t))};iw.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};iw.v=2;var Cl,Tl=null;g=Jl.prototype;g.Be=Zd;g.W=function(n,t,i){return Il(t,i,"RAtom",new h(null,1,[zK,this.pb(null)],null))};g.Y=function(){return this.D};g.X=function(){return fa(this)};g.M=function(n,t){return this===t};g.$a=function(n,t){return n=this.state,this.state=t,this.Na!=null&&Hl(this,n,t),t};g.be=function(n,t){return this.$a(null,t.g?t.g(this.state):t.call(null,this.state))};g.ce=function(n,t,i){return this.$a(null,t.h?t.h(this.state,i):t.call(null,this.state,i))};g.de=function(n,t,i,s){return this.$a(null,t.l?t.l(this.state,i,s):t.call(null,this.state,i,s))};g.ee=function(n,t,i,s,o){return this.$a(null,Kg.O(t,this.state,i,s,o))};g.fe=function(n,t){Hl(this,n,t)};g.vd=function(n,t,i){return Fl(this,t,i)};g.wd=function(n,t){return Gl(this,t)};g.Z=function(n,t){return new Jl(this.state,t,this.If,this.Na)};g.pb=function(){return El(this),this.state};var bm=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);default:for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],new u(i.slice(1),0,null))}};bm.g=function(n){return new Jl(n,null,null,null)};bm.j=function(n,t){var i=M(t);return t=J.h(i,Sb),i=J.h(i,OY),new Jl(n,t,i,null)};bm.B=function(n){var t=z(n);return n=C(n),this.j(t,n)};bm.v=1;g=Nl.prototype;g.Be=Zd;g.pb=function(){var n=this,t=n.Md;return t==null?Ml(function(){return Kg.h(n.f,n.nd)},n.f,n.nd,this):q(t)};g.M=function(n,t){return t instanceof Nl&&E.h(this.f,t.f)&&E.h(this.nd,t.nd)};g.X=function(){return $d(new R(null,2,5,S,[this.f,this.nd],null))};g.W=function(n,t,i){return Il(t,i,"Track",new h(null,2,[zK,this.pb(null),D8,this.f],null))};g=Ol.prototype;g._peek=function(){var n=Cl;Cl=null;try{return this.pb(null)}finally{Cl=n}};g._set_state=function(n,t){return n===t?null:(this.state=t,this.Na!=null?Hl(this,n,t):null)};g.Be=Zd;g.W=function(n,t,i){return Il(t,i,"RCursor",new h(null,2,[zK,this.pb(null),LG,this.path],null))};g.X=function(){return $d(new R(null,2,5,S,[this.Da,this.path],null))};g.M=function(n,t){return t instanceof Ol&&E.h(this.path,t.path)&&E.h(this.Da,t.Da)};g.$a=function(n,t){return this._set_state(this.state,t),(this.Da!=null?this.Da.A&32768||Zd===this.Da.$e||!this.Da.A&&ic(Zc,this.Da):ic(Zc,this.Da))?E.h(this.path,lh)?N(this.Da,t):dk.K(this.Da,Bn,this.path,t):this.Da.h?this.Da.h(this.path,t):this.Da.call(null,this.path,t),t};g.be=function(n,t){n=this.$a;var i=this._peek();return t=t.g?t.g(i):t.call(null,i),n.call(this,null,t)};g.ce=function(n,t,i){n=this.$a;var s=this._peek();return t=t.h?t.h(s,i):t.call(null,s,i),n.call(this,null,t)};g.de=function(n,t,i,s){n=this.$a;var o=this._peek();return t=t.l?t.l(o,i,s):t.call(null,o,i,s),n.call(this,null,t)};g.ee=function(n,t,i,s,o){return this.$a(null,Kg.O(t,this._peek(),i,s,o))};g.fe=function(n,t){Hl(this,n,t)};g.vd=function(n,t,i){return Fl(this,t,i)};g.wd=function(n,t){return Gl(this,t)};g.pb=function(){var n=this,t=this,i=n.state,s=function(){var o=n.Md;return o==null?Ml((n.Da!=null?n.Da.A&32768||Zd===n.Da.$e||!n.Da.A&&ic(Zc,n.Da):ic(Zc,n.Da))?function(){return Q(q(n.Da),n.path)}:function(){return n.Da.g?n.Da.g(n.path):n.Da.call(null,n.path)},n.Da,n.path,t):q(o)}();return t._set_state(i,s),s};g=Sl.prototype;g._peek_at=function(){var n=Cl;Cl=null;try{return this.pb(null)}finally{Cl=n}};g._handle_change=function(n,t,i){return t===i||this.Ac?null:this.Yb==null?(this.Ac=!0,Tl==null&&(Tl=[],nl.De===!1&&nl.schedule()),Tl.push(this)):this.Yb===!0?this._run(!1):this.Yb.g?this.Yb.g(this):this.Yb.call(null,this)};g._update_watching=function(n){var t=oj(n),i=oj(this.Tc);this.Tc=n,n=w(iw.h(t,i));for(var s=null,o=0,f=0;;)if(f<o){var d=s.S(null,f);td(d,this,Rl),f+=1}else if(n=w(n))s=n,df(s)?(n=Fd(s),f=Gd(s),s=n,o=D(n),n=f):(n=z(s),td(n,this,Rl),n=C(s),s=null,o=0),f=0;else break;for(t=w(iw.h(i,t)),i=null,o=s=0;;)if(o<s)n=i.S(null,o),vd(n,this),o+=1;else if(t=w(t))i=t,df(i)?(t=Fd(i),s=Gd(i),i=t,n=D(t),t=s,s=n):(n=z(i),vd(n,this),t=C(i),i=null,s=0),o=0;else return null};g._queued_run=function(){return this.Ac&&this.Tc!=null?this._run(!0):null};g._try_capture=function(n){try{return this.Xe=null,Dl(n,this)}catch(t){return this.Xe=this.state=n=t,this.Ac=!1}};g._run=function(n){var t=this.state;return n=l(n)?this._try_capture(this.f):Dl(this.f,this),this.jg||(this.state=n,this.Na==null||E.h(t,n)||Hl(this,t,n)),n};g._set_opts=function(n){var t=M(n);n=J.h(t,hx);var i=J.h(t,ix),s=J.h(t,gx);return t=J.h(t,l5),n!=null&&(this.Yb=n),i!=null&&(this.ph=i),s!=null&&(this.ng=s),t!=null?this.jg=t:null};g.Be=Zd;g.W=function(n,t,i){return Il(t,i,"Reaction",new h(null,1,[zK,this.pb(null)],null))};g.X=function(){return fa(this)};g.M=function(n,t){return this===t};g.Bf=function(){var n=this.state,t=this.Tc;this.Yb=this.state=this.Tc=null,this.Ac=!0,t=w(oj(t));for(var i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o);vd(f,this),o+=1}else if(t=w(t))i=t,df(i)?(t=Fd(i),o=Gd(i),i=t,s=D(t),t=o):(t=z(i),vd(t,this),t=C(i),i=null,s=0),o=0;else break;if(this.ng!=null&&this.ng(n),n=this.og,n==null)return null;for(t=n.length,i=0;;)if(i<t)s=n[i],s.g?s.g(this):s.call(null,this),i+=1;else return null};g.wg=function(n,t){return n=this.og,n==null?this.og=[t]:n.push(t)};g.$a=function(n,t){return n=this.state,this.state=t,this.ph(n,t),Hl(this,n,t),t};g.be=function(n,t){n=this.$a;var i=this._peek_at();return t=t.g?t.g(i):t.call(null,i),n.call(this,null,t)};g.ce=function(n,t,i){n=this.$a;var s=this._peek_at();return t=t.h?t.h(s,i):t.call(null,s,i),n.call(this,null,t)};g.de=function(n,t,i,s){n=this.$a;var o=this._peek_at();return t=t.l?t.l(o,i,s):t.call(null,o,i,s),n.call(this,null,t)};g.ee=function(n,t,i,s,o){return this.$a(null,Kg.O(t,this._peek_at(),i,s,o))};g.fe=function(n,t){Hl(this,n,t)};g.vd=function(n,t,i){return Fl(this,t,i)};g.wd=function(n,t){return n=Ve(this.Na),Gl(this,t),!n&&Ve(this.Na)&&this.Yb==null?this.Bf(null):null};g.pb=function(){var n=this.Xe;if(n!=null)throw n;return(n=Cl==null)&&(Ul.G?Ul.G():Ul.call(null)),n&&this.Yb==null?this.Ac&&(n=this.state,this.state=this.f.G?this.f.G():this.f.call(null),this.Na==null||E.h(n,this.state)||Hl(this,n,this.state)):(El(this),this.Ac&&this._run(!1)),this.state};hl=Ul;var Yl=Kl(null),mm,Xl=new h(null,1,[l5,!0],null),pm=new h(null,2,[d3,null,UR,null],null),gm=function(n){var t=Tg(og);return function(i){var s=J.h(q(t),i);return s!=null||(s=n.g?n.g(i):n.call(null,i),dk.K(t,gj,i,s)),s}}(function(n){if(typeof n=="string")return n;n=qj(n),n=Mk(n,/(unsafe|UNSAFE)[-_]/,"UNSAFE_"),n=Ok(n,/-/);var t=w(n);return n=z(t),t=C(t),Kg.l(m,n,O.h(Xk,t))}),um=new R(null,5,5,S,[eT,dX,F1,Y2,Y8],null),Cm=new jj(null,new h(null,6,["url",null,"tel",null,"text",null,"textarea",null,"password",null,"search",null],null),null),$m=new h(null,4,[kF,"ReagentInput",jF,Dm,XN,function(n){return n.hf=null},Wx,function(n,t,i,s,o){return Gm(i),sl(o,n,t,i,s)}],null),MZ=/([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?/,Jm={class:"className",for:"htmlFor",charset:"charSet"},Nm={},NZ={};g=dn.prototype;g.Z=function(n,t){return new dn(this.Rb,this.id,this.dg,this.we,t)};g.Y=function(){return this.mh};g.th=function(){return this.id};g.vg=function(n,t,i){return this.we.l?this.we.l(this,t,i):this.we.call(null,this,t,i)};g.tg=function(n,t){return aa(t)!=="object"?t:cf(t)?cn(t,this,this.dg):ff(t)?bn(t,this):bl(t)?qj(t):(t!=null?t.A&2147483648||Zd===t.ja||!t.A&&ic(rd,t):ic(rd,t))?im.j(F([t])):t};g.ug=function(n,t,i,s,o){return Qm(this,t,i,s,o)};var Jq,c$=og,d$=ek("reagent-compiler"),e$=l(Z5.g(c$))?Wm:Tm,f$=J.l(c$,Z2,function(n,t){if(n=Im(NZ,t),n==null){var i=C(Bj(MZ,qj(t)));n=I(i,0,null);var s=I(i,1,null);i=I(i,2,null),i=i==null?null:Mk(i,/\./," ");var o=fj.h(-1,n.indexOf("-"));return n=new Rm(n,s,i,o),NZ[t]=n}return n});Jq=new dn(c$,d$,e$,f$,og);var xG=function(){switch(qj("js")){case"pr-str":return kn.h(console.log,im);case"js":return console.log;case"pretty":return z9;default:return console.log}}(),BD=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};BD.j=function(n){return Gh(jh.h(hc,kh(n)))};BD.v=0;BD.B=function(n){return this.j(w(n))};zn.mc={};zn.mc.s=function(n,t,i){return isNaN(i)||i==""||n.length>=Number(i)?n:n=-1<t.indexOf("-",0)?n+UJ(" ",Number(i)-n.length):UJ(" ",Number(i)-n.length)+n};zn.mc.f=function(n,t,i,s,o){s=n.toString(),isNaN(o)||o==""||(s=parseFloat(n).toFixed(o));let f;return f=0>Number(n)?"-":0<=t.indexOf("+")?"+":0<=t.indexOf(" ")?" ":"",0<=Number(n)&&(s=f+s),isNaN(i)||s.length>=Number(i)||(s=isNaN(o)?Math.abs(Number(n)).toString():Math.abs(Number(n)).toFixed(o),n=Number(i)-s.length-f.length,0<=t.indexOf("-",0)?s=f+s+UJ(" ",n):(t=0<=t.indexOf("0",0)?"0":" ",s=f+UJ(t,n)+s)),s};zn.mc.d=function(n,t,i,s,o,f,d,p){return zn.mc.f(parseInt(n,10),t,i,s,0,f,d,p)};zn.mc.i=zn.mc.d;zn.mc.u=zn.mc.d;var jq={id:"UTC",std_offset:0,names:new R(null,1,5,S,["UTC"],null),transitions:lh},Wo=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],1<i.length?new u(i.slice(1),0,null):null)};Wo.j=function(n,t){return[m.g(l(t)?-n:n),"px"].join("")};Wo.v=1;Wo.B=function(n){var t=z(n);return n=C(n),this.j(t,n)};var xF=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],2<i.length?new u(i.slice(2),0,null):null)};xF.j=function(n,t,i){i=M(i);var s=J.l(i,Vz,Xx);return z(jh.h(function(o){return E.h(s.g?s.g(o):s.call(null,o),n)},t))};xF.v=2;xF.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};kn.h(Nj,qj);var YE=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};YE.j=function(n){n=M(n);var t=J.l(n,gD,"9px"),i=J.l(n,qC,"9px"),s=J.l(n,jp,"currentColor"),o=J.h(n,ZE);return new R(null,3,5,S,[eE,new h(null,4,[gD,t,qC,i,KG,"0 0 9 9",zU,"http://www.w3.org/2000/svg"],null),new R(null,2,5,S,[WT,new h(null,2,[jE,function(){var f=o instanceof K?o.U:null;switch(f){case"right":return"2,2 8,5 2,8";case"up":return"4,2 8,7 0,7";case"down":return"4,7 8,2 0,2";default:throw Error(["No matching clause: ",m.g(f)].join(""))}}(),jp,s],null)],null)],null)};YE.v=0;YE.B=function(n){return this.j(w(n))};var SZ=new R(null,5,5,S,[Oo,To,fG,s8,M7],null),TZ=new R(null,4,5,S,[r4,o3,qP,z6],null),UZ=new R(null,4,5,S,[bV,xE,O8,H3],null),VZ=new R(null,3,5,S,[TK,xL,C6],null),WZ=new R(null,4,5,S,[TK,xL,OO,DZ],null),XZ=new R(null,4,5,S,[L7,O8,FF,D5],null),YZ=new R(null,5,5,S,[L7,O8,FF,D5,xE],null),ZZ=new R(null,4,5,S,[JJ,yJ,YT,XT],null),$Z=new R(null,12,5,S,[X5,r6,BT,b9,sE,EW,yW,xQ,o1,P0,g0,yE],null);Mn(new R(null,5,5,S,[Oo,To,fG,QK,SQ],null));Mn(SZ);Mn(TZ);Mn(UZ);Mn(VZ);Mn(WZ);Mn(XZ);Mn(YZ);Mn(ZZ);Mn($Z);Ll();kn.h(Nj,qj);Ll();var g$=Ni([m9,fZ,GV,cZ,EV,OV,DR,dZ,aZ,CR,zR,$Y,VV,LV,eZ,FR,DV,ER,AR,KV],"100px 3px 2349px 2px 1452px 343px 212px 1px 7px 19px 31px 12px 25px 897px 5px 131px 3800px 81px 50px 554px".split(" ")),h$=Ni([j1,f4,nI,o8,BU,l1,cV,QU,O8,H3,L7,YQ,xE,FF,d1,jT,kC,g4,tU,jI],"#ccc;#0d6efd;#ffffff;#EEE;#555555;white;#6c757d;#212529;#ffc107;#dc3545;#198754;#767a7c;#0dcaf0;#bf1010;#aaa;#f8f9fa;#cccccc;rgba(0, 0, 0, 0.2);#eee;#000000".split(";")),i$=new h(null,7,[AU,Wo(11),Z7,Wo(12),E5,Wo(13),MQ,Wo(14),mR,Wo(15),cU,Wo(16),tQ,Wo(17)],null),OB=Al.j(F([h$,g$,i$])),j$,k$=Tg(og),l$=Tg(og),m$=Tg(og),n$=Tg(og),o$=J.l(og,u4,tk.G?tk.G():tk.call(null));j$=new Bk(Xj.h("re-com.theme.default","base"),fA,o$,k$,l$,m$,n$);j$.Nh(null,sm,function(n){return n});var p$,q$=Tg(og),r$=Tg(og),s$=Tg(og),t$=Tg(og),u$=J.l(og,u4,tk.G?tk.G():tk.call(null));p$=new Bk(Xj.h("re-com.theme.default","main"),fA,u$,q$,r$,s$,t$);p$.Nh(null,sm,function(n){return n});j$.Nh(null,sm,function(n){return n});var v$=jm(function(n){n=M(n);var t=J.h(n,fA),i=ov.K;return t=["rc-",Wf(t).substring(7),"-",qj(t)].join(""),i.call(ov,n,T,BD,t)}),UD=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};UD.j=function(n){n=M(n);var t=J.h(n,kD),i=J.h(n,gD),s=J.h(n,qC),o=J.h(n,T),f=J.h(n,X),d=J.h(n,V);return l(null)?null:(t=Al.j(F([l(t)?Qn(t):null,l(i)?new h(null,1,[gD,i],null):null,l(s)?new h(null,1,[qC,s],null):null,null,f])),new R(null,2,5,S,[dA,Al.j(F([yn(n),new h(null,2,[T,BD.h?BD.h("rc-gap",o):BD.call(null,"rc-gap",o),X,t],null),d]))],null))};UD.v=0;UD.B=function(n){return this.j(w(n))};var a_=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};a_.j=function(n){n=M(n);var t=J.l(n,kD,"1px"),i=J.l(n,GD,"lightgray"),s=J.h(n,T),o=J.h(n,X),f=J.h(n,V);return l(null)?null:(t=Al.j(F([Qn(["0 0 ",m.g(t)].join("")),new h(null,1,[zD,i],null),o])),new R(null,2,5,S,[dA,Al.j(F([yn(n),new h(null,2,[T,BD.h?BD.h("rc-line",s):BD.call(null,"rc-line",s),X,t],null),f]))],null))};a_.v=0;a_.B=function(n){return this.j(w(n))};var Ss=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};Ss.j=function(n){n=M(n);var t=J.h(n,iC),i=J.h(n,qC),s=J.h(n,rC),o=J.h(n,V),f=J.h(n,GC),d=J.h(n,dy),p=J.l(n,LC,M7),v=J.h(n,bD),_=J.h(n,cD),k=J.l(n,eD,Oo),P=J.h(n,gD),L=J.h(n,iD),G=J.l(n,kD,"none"),Z=J.h(n,X),W=J.h(n,T),j=J.h(n,nD),H=J.h(n,tJ);return l(null)?null:(t=Al.j(F([Tn("row nowrap"),Qn(G),l(P)?new h(null,1,[gD,P],null):null,l(i)?new h(null,1,[qC,i],null):null,l(f)?new h(null,1,[GC,f],null):null,l(_)?new h(null,1,[cD,_],null):null,l(L)?new h(null,1,[iD,L],null):null,l(v)?new h(null,1,[bD,v],null):null,Wn(k),Xn(tD,p),l(t)?Xn(iC,t):null,l(s)?new h(null,1,[rC,s],null):null,l(j)?new h(null,1,[nD,j],null):null,null,Z])),i=l(H)?new R(null,7,5,S,[UD,U,null,kD,H,gD,H],null):null,d=l(H)?eh(i,jh.h(Df,d)):d,Ng.h(new R(null,2,5,S,[dA,Al.j(F([yn(n),new h(null,2,[T,BD.l?BD.l("rc-h-box","display-flex",W):BD.call(null,"rc-h-box","display-flex",W),X,t],null),o]))],null),d))};Ss.v=0;Ss.B=function(n){return this.j(w(n))};var Dt=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};Dt.j=function(n){n=M(n);var t=J.h(n,iC),i=J.h(n,qC),s=J.h(n,rC),o=J.h(n,V),f=J.h(n,GC),d=J.h(n,dy),p=J.l(n,LC,M7),v=J.h(n,bD),_=J.h(n,cD),k=J.l(n,eD,Oo),P=J.h(n,gD),L=J.h(n,iD),G=J.l(n,kD,"none"),Z=J.h(n,X),W=J.h(n,T),j=J.h(n,nD),H=J.h(n,tJ);return l(null)?null:(t=Al.j(F([Tn("column nowrap"),Qn(G),l(P)?new h(null,1,[gD,P],null):null,l(i)?new h(null,1,[qC,i],null):null,l(f)?new h(null,1,[GC,f],null):null,l(_)?new h(null,1,[cD,_],null):null,l(L)?new h(null,1,[iD,L],null):null,l(v)?new h(null,1,[bD,v],null):null,Wn(k),Xn(tD,p),l(t)?Xn(iC,t):null,l(s)?new h(null,1,[rC,s],null):null,l(j)?new h(null,1,[nD,j],null):null,null,Z])),i=typeof H=="string"?new R(null,7,5,S,[UD,U,null,kD,H,qC,H],null):kA(H,og),d=l(H)?eh(i,jh.h(Df,d)):d,Ng.h(new R(null,2,5,S,[dA,Al.j(F([yn(n),new h(null,2,[T,BD.l?BD.l("rc-v-box","display-flex",W):BD.call(null,"rc-v-box","display-flex",W),X,t],null),o]))],null),d))};Dt.v=0;Dt.B=function(n){return this.j(w(n))};var So=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};So.j=function(n){var t=M(n);n=J.h(t,ay);var i=J.h(t,iC),s=J.h(t,qC),o=J.h(t,rC),f=J.h(t,V),d=J.h(t,GC),p=J.h(t,LC),v=J.h(t,bD),_=J.h(t,cD),k=J.h(t,eD),P=J.h(t,gD),L=J.h(t,iD),G=J.h(t,U),Z=J.l(t,kD,"none"),W=J.h(t,X),j=J.h(t,gy),H=J.h(t,T);return t=J.h(t,nD),l(null)?null:Ho(F([kD,Z,gD,P,qC,s,GC,d,cD,_,iD,L,bD,v,eD,k,LC,p,iC,i,rC,o,nD,t,ay,n,pD,"rc-box",T,H,X,W,V,f,U,G,gy,j]))};So.v=0;So.B=function(n){return this.j(w(n))};var b_=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};b_.j=function(n){var t=M(n);n=J.h(t,ay);var i=J.h(t,kC),s=J.h(t,qC),o=J.h(t,rC),f=J.h(t,V),d=J.h(t,GC),p=J.h(t,bD),v=J.h(t,cD),_=J.h(t,dD),k=J.h(t,gD),P=J.h(t,hD),L=J.h(t,iD),G=J.h(t,U),Z=J.h(t,jD),W=J.l(t,kD,"none"),j=J.h(t,X),H=J.h(t,gy),me=J.h(t,T),$e=J.h(t,mD),De=J.h(t,nD);if(t=J.h(t,oD),l(null))return null;var le=Ig(cc,new R(null,5,5,S,[i,$e,_,t,P],null));return Ho(F([kD,W,gD,k,qC,s,GC,d,cD,v,iD,L,bD,p,rC,o,nD,De,kC,le?"1px solid lightgrey":i,mD,$e,dD,_,oD,t,hD,P,jD,Z,ay,n,pD,"rc-border",T,me,X,j,V,f,U,G,gy,H]))};b_.v=0;b_.B=function(n){return this.j(w(n))};var c_=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};c_.j=function(n){n=M(n);var t=J.h(n,tP),i=J.h(n,KD),s=J.h(n,T),o=J.h(n,X),f=J.h(n,V);return l(null)?null:new R(null,2,5,S,[dA,Al.j(F([new h(null,3,[T,["noselect rc-backdrop ",m.g(s)].join(""),X,Al.j(F([new h(null,7,[QD,"fixed",WD,"0px",TD,"0px",gD,"100%",qC,"100%",zD,"black",tP,l(t)?t:0],null),o])),KD,function(){return i.G?i.G():i.call(null),null}],null),yn(n),f]))],null)};c_.v=0;c_.B=function(n){return this.j(w(n))};var d_=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};d_.j=function(n){n=M(n);var t=J.h(n,tE),i=J.h(n,XD),s=J.h(n,tL),o=J.h(n,f9),f=J.h(n,T),d=J.h(n,X),p=J.h(n,V),v=J.h(n,JD);return l(null)?null:(s=s??!0,new R(null,3,5,S,[h3,Al.j(F([new h(null,2,[T,BD.l?BD.l("popover-title","rc-popover-title",f):BD.call(null,"popover-title","rc-popover-title",f),X,Al.j(F([Qn("inherit"),new h(null,1,[HD,"18px"],null),d]))],null),yn(n),p])),new R(null,15,5,S,[Ss,U,null,T,ph(v,new R(null,2,5,S,[LE,T],null),""),X,Q(v,new R(null,2,5,S,[LE,X],null)),V,Q(v,new R(null,2,5,S,[LE,V],null)),eD,QK,LC,fG,dy,new R(null,2,5,S,[i,l(s)?new R(null,19,5,S,[gp,U,null,T,ph(v,new R(null,2,5,S,[aX,T],null),""),X,Q(v,new R(null,2,5,S,[aX,X],null)),V,Q(v,new R(null,2,5,S,[aX,V],null)),KD,function(){return l(o)?o.G?o.G():o.call(null):N(t,!1)},ID,0,HD,26,MD,-1,FD,-5],null):null],null)],null)],null))};d_.v=0;d_.B=function(n){return this.j(w(n))};var e_=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};e_.j=function(n){function t(W){var j=document.getElementById(d),H=ip(W);W=I(H,0,null);var me=I(H,1,null);H=l(o)?E.h(W,dE)||E.h(me,dE):o,N(_,l(j)?2*((j.clientWidth+1)/2|0):0),N(k,l(j)?2*((j.clientHeight+1)/2|0):0);e:{j=q(_);var $e=q(k);switch(me=me instanceof K?me.U:null,me){case"center":j=null;break e;case"right":j=20+s;break e;case"below":j=20+s;break e;case"left":j=l(j)?j-25-s:j;break e;case"above":j=l($e)?$e-25-s:$e;break e;default:throw Error(["No matching clause: ",m.g(me)].join(""))}}return N(P,j),new R(null,2,5,S,[W,H],null)}n=M(n);var i=J.h(n,QD),s=J.h(n,B3),o=J.h(n,XD),f=J.l(n,K7,!0);if(J.h(n,U),l(null))return null;var d=ek("popover-"),p=fn(!1),v=fn(!1),_=fn(0),k=fn(0),P=fn(0),L=fn(!1),G=Tg(null),Z=Pk.h(N,G);return vm(new h(null,4,[kF,"popover-border",iF,function(){return N(p,!0)},jF,function(){var W=q(G),j=window.innerWidth,H=window.innerHeight,me=W.getBoundingClientRect();W=me.left;var $e=me.right,De=me.top;return me=me.bottom,H=(0>W?-W:null)!=null||($e>j?$e-j:null)!=null||(0>De?-De:null)!=null||(me>H?me-H:null)!=null,j=q(G).parentNode.parentNode.parentNode,H&&(H=Dn(f),H=l(H)?gc(q(L)):H),l(H)&&(j=j.getBoundingClientRect(),H=new R(null,2,5,S,[(j.right+j.left)/2,(j.bottom+j.top)/2],null),j=I(H,0,null),H=I(H,1,null),W=Jf(window.innerWidth,3),j=Nj.g([H<Jf(window.innerHeight,2)?"below":"above","-",j<W?"right":j<2*W?"center":"left"].join("")),N(i,j),N(L,!0)),t(q(i)),N(v,!0)},Wx,function(){function W(H){var me=null;if(0<arguments.length){me=0;for(var $e=Array(arguments.length-0);me<$e.length;)$e[me]=arguments[me+0],++me;me=new u($e,0,null)}return j.call(this,me)}function j(H){H=M(H);var me=J.h(H,KT),$e=J.h(H,qC),De=J.h(H,T6),le=J.h(H,V),Ce=J.h(H,p1),Me=J.h(H,dy),_n=J.l(H,N6,11);J.h(H,B3);var _i=J.h(H,hE),ll=J.l(H,KU,22),_l=J.h(H,gE),oa=J.h(H,JD),Ru=J.h(H,gD);J.h(H,U);var ga=J.h(H,XD),_s=J.h(H,X),Sa=J.l(H,eX,-1),Ra=J.h(H,T),Da=J.h(H,nD),Fa=J.h(H,QD);if(l(null))return null;Fa=t(q(Fa));var Na=I(Fa,0,null);return Fa=I(Fa,1,null),new R(null,5,5,S,[mW,Al.j(F([new h(null,3,[T,BD.h?BD.h("rc-popover-border",Ra):BD.call(null,"rc-popover-border",Ra),Xx,d,X,Al.j(F([l(q(p))?l(d)?lp(Na,q(_),q(k),q(P),_n,Sa):null:new h(null,2,[TD,"-10000px",WD,"-10000px"],null),l(Ru)?new h(null,1,[gD,Ru],null):null,l($e)?new h(null,1,[qC,$e],null):null,l(Ce)?new h(null,1,[zD,Ce],null):null,l(me)?new h(null,1,[L5,me],null):null,l(De)?new h(null,3,[yD,"4px",lJ,"none",kC,"none"],null):null,function(){var _a=Na instanceof K?Na.U:null;switch(_a){case"left":return new h(null,1,[hE,"-2000px"],null);case"right":case"above":case"below":return new h(null,1,[CF,"-2000px"],null);default:throw Error(["No matching clause: ",m.g(_a)].join(""))}}(),l(_i)?new h(null,1,[hE,_i],null):null,l(_l)?new h(null,1,[gE,_l],null):null,new h(null,4,[PD,"block",tP,l(q(v))?"1":"0",iD,"none",nD,"0px"],null),_s]))],null),yn(H),le,new h(null,1,[my,Z],null)])),new R(null,10,5,S,[wp,Na,q(P),_n,ll,Fa,De,Ce,me,oa],null),l(ga)?ga:null,Ng.h(new R(null,2,5,S,[dA,Al.j(F([new h(null,2,[T,function(){var _a=ph(oa,new R(null,2,5,S,[UP,T],null),"");return BD.l?BD.l("popover-content","rc-popover-content",_a):BD.call(null,"popover-content","rc-popover-content",_a)}(),X,Al.j(F([new h(null,1,[nD,Da],null),Q(oa,new R(null,2,5,S,[UP,X],null))]))],null),Q(oa,new R(null,2,5,S,[UP,V],null))]))],null),Me)],null)}return W.v=0,W.B=function(H){return H=w(H),j(H)},W.j=j,W}()],null),Jq)};e_.v=0;e_.B=function(n){return this.j(w(n))};var gF=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};gF.j=function(n){function t(){if(l(i)){var p=q(f).parentNode.getBoundingClientRect();return N(s,p.left),N(o,p.top)}return null}n=M(n);var i=J.h(n,RQ);if(l(null))return null;var s=fn(0),o=fn(0),f=Tg(null),d=Pk.h(N,f);return vm(new h(null,4,[kF,"popover-content-wrapper",iF,function(p){return t()},jF,function(p){return t()},Wx,function(){function p(_){var k=null;if(0<arguments.length){k=0;for(var P=Array(arguments.length-0);k<P.length;)P[k]=arguments[k+0],++k;k=new u(P,0,null)}return v.call(this,k)}function v(_){var k=M(_);_=J.h(k,iI);var P=J.h(k,KT),L=J.h(k,zE),G=J.h(k,oS),Z=J.h(k,qC),W=J.h(k,T6),j=J.h(k,V),H=J.h(k,p1),me=J.l(k,N6,11),$e=J.h(k,B3),De=J.h(k,sL),le=J.h(k,s6),Ce=J.h(k,RQ),Me=J.h(k,tL),_n=J.l(k,KU,22),_i=J.h(k,JD),ll=J.h(k,gD),_l=J.h(k,XD),oa=J.h(k,X),Ru=J.l(k,eX,-1),ga=J.h(k,T),_s=J.l(k,K7,!0),Sa=J.h(k,nD);if(l(null))return null;q(le);var Ra=S;return k=Al.j(F([new h(null,2,[T,BD.l?BD.l("popover-content-wrapper","rc-popover-content-wrapper",ga):BD.call(null,"popover-content-wrapper","rc-popover-content-wrapper",ga),X,Al.j(F([Qn("inherit"),l(Ce)?new h(null,3,[QD,"fixed",WD,Wo(q(s)),TD,Wo(q(o))],null):null,oa]))],null),yn(k),j,new h(null,1,[my,d],null)])),j=Dn(G),new R(null,4,5,Ra,[dA,k,l(l(j)?L:j)?new R(null,13,5,S,[c_,U,null,T,ph(_i,new R(null,2,5,S,[pU,T],null),""),X,Q(_i,new R(null,2,5,S,[pU,X],null)),V,Q(_i,new R(null,2,5,S,[pU,V],null)),tP,De,KD,L],null):null,new R(null,2,5,S,[e_,Ni([p1,dy,B3,N6,KU,gD,U,XD,X,eX,K7,T,nD,QD,KT,qC,T6,V],[H,new R(null,1,5,S,[_],null),$e,me,_n,ll,null,l(_l)?new R(null,17,5,S,[d_,U,null,T,ph(_i,new R(null,2,5,S,[XD,T],null),""),X,Q(_i,new R(null,2,5,S,[XD,X],null)),V,Q(_i,new R(null,2,5,S,[XD,V],null)),XD,_l,tE,G,tL,Me,f9,L],null):null,Q(_i,new R(null,2,5,S,[kC,X],null)),Ru,_s,ph(_i,new R(null,2,5,S,[kC,T],null),""),Sa,le,P,Z,W,Q(_i,new R(null,2,5,S,[kC,V],null))])],null)],null)}return p.v=0,p.B=function(_){return _=w(_),v(_)},p.j=v,p}()],null),Jq)};gF.v=0;gF.B=function(n){return this.j(w(n))};var eF=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};eF.j=function(n){n=M(n);var t=J.h(n,tE),i=J.h(n,QD);if(J.h(n,U),l(null))return null;var s=fn(i),o=fn(q(s)),f=Kl(function(){return l(Dn(t))?null:N(o,q(s))});return vm(new h(null,2,[kF,"popover-anchor-wrapper",Wx,function(){function d(v){var _=null;if(0<arguments.length){_=0;for(var k=Array(arguments.length-0);_<k.length;)k[_]=arguments[_+0],++_;_=new u(k,0,null)}return p.call(this,_)}function p(v){v=M(v);var _=J.h(v,tE),k=J.h(v,QD),P=J.h(v,uE),L=J.h(v,qL),G=J.h(v,T),Z=J.h(v,X),W=J.h(v,V),j=J.h(v,JD);if(l(null))return null;q(f),fj.h(q(s),k)&&(N(s,k),N(o,q(s)));var H=ip(q(o));k=I(H,0,null),I(H,1,null);e:switch(k instanceof K?k.U:null){case"left":case"above":H=!1;break e;default:H=!0}e:switch(k instanceof K?k.U:null){case"left":case"right":k="row";break e;default:k="column"}return new R(null,3,5,S,[dA,Al.j(F([new h(null,2,[T,BD.l?BD.l("rc-popover-anchor-wrapper","display-inline-flex",G):BD.call(null,"rc-popover-anchor-wrapper","display-inline-flex",G),X,Al.j(F([Qn("inherit"),Z]))],null),yn(v),W])),new R(null,5,5,S,[dA,new h(null,3,[T,function(){var me=ph(j,new R(null,2,5,S,[w6,T],null),"");return BD.l?BD.l("display-inline-flex","rc-point-wrapper",me):BD.call(null,"display-inline-flex","rc-point-wrapper",me)}(),X,Al.j(F([Qn("auto"),Tn(k),Xn(tD,fG),Q(j,new R(null,2,5,S,[w6,X],null))])),V,Q(j,new R(null,2,5,S,[w6,V],null))],null),l(H)?P:null,l(Dn(_))?new R(null,3,5,S,[dA,new h(null,3,[T,function(){var me=ph(j,new R(null,2,5,S,[TT,T],null),"");return BD.l?BD.l("display-inline-flex","rc-popover-point",me):BD.call(null,"display-inline-flex","rc-popover-point",me)}(),X,Al.j(F([Qn("auto"),new h(null,2,[QD,"relative",OZ,4],null),Q(j,new R(null,2,5,S,[TT,X],null))])),V,Q(j,new R(null,2,5,S,[TT,V],null))],null),Ng.h(L,new R(null,4,5,S,[oS,_,s6,o],null))],null):null,l(H)?null:P],null)],null)}return d.v=0,d.B=function(v){return v=w(v),p(v)},d.j=p,d}()],null),Jq)};eF.v=0;eF.B=function(n){return this.j(w(n))};var Ep=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};Ep.j=function(n){n=M(n);var t=J.h(n,uE),i=J.h(n,zE),s=J.h(n,V),o=J.l(n,p1,"black"),f=J.l(n,RQ,!0),d=J.h(n,tL),p=J.h(n,JD),v=J.h(n,gD),_=J.l(n,FZ,"#13C200"),k=J.h(n,U),P=J.l(n,CV,"#d50000"),L=J.h(n,tE),G=J.h(n,X),Z=J.l(n,LY,"#f57c00"),W=J.h(n,gy),j=J.h(n,Np),H=J.h(n,mE),me=J.h(n,T),$e=J.l(n,f3,"#333333"),De=J.h(n,QD);if(l(null))return null;H=Dn(H);var le=function(){switch(j instanceof K?j.U:null){case"warning":return Z;case"error":return P;case"info":return $e;case"success":return _;default:return o}}();return new R(null,19,5,S,[eF,U,k,gy,l(W)?W:new h(null,2,[ky,jn(),ly,n],null),tE,L,QD,l(De)?De:sE,uE,t,T,["rc-popover-tooltip ",m.g(me)].join(""),X,G,V,s,qL,new R(null,29,5,S,[gF,U,null,T,ph(p,new R(null,2,5,S,[X8,T],null),""),X,Q(p,new R(null,2,5,S,[X8,X],null)),V,Q(p,new R(null,2,5,S,[X8,V],null)),RQ,f,zE,i,gD,v,T6,!0,p1,le,nD,"3px 8px",N6,6,KU,12,eX,4,iI,new R(null,11,5,S,[Dt,U,null,T,ph(p,new R(null,2,5,S,[L1,T],null),""),X,Al.j(F([E.h(j,xE)?new h(null,3,[GD,"white",HD,"14px",nD,"4px"],null):new h(null,4,[GD,"white",HD,"12px",oI,"bold",QG,"center"],null),Q(p,new R(null,2,5,S,[L1,X],null))])),V,Q(p,new R(null,2,5,S,[L1,V],null)),dy,new R(null,2,5,S,[l(d)?new R(null,13,5,S,[So,U,null,T,["rc-popover-tooltip-close-button-container ",m.g(ph(p,new R(null,2,5,S,[s3,T],null),""))].join(""),X,Q(p,new R(null,2,5,S,[s3,X],null)),V,Q(p,new R(null,2,5,S,[s3,V],null)),iC,To,ay,new R(null,17,5,S,[gp,U,null,T,["rc-popover-tooltip-close-button ",m.g(ph(p,new R(null,2,5,S,[aX,T],null),""))].join(""),X,Q(p,new R(null,2,5,S,[aX,X],null)),V,Q(p,new R(null,2,5,S,[aX,V],null)),KD,function(){return l(i)?i.G?i.G():i.call(null):N(L,!1)},ID,15,HD,20,FD,5],null)],null):null,H],null)],null)],null)],null)};Ep.v=0;Ep.B=function(n){return this.j(w(n))};var pt=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};pt.j=function(n){function t(){if(l(l(s)?gc(W):s)){var j=gc(Z);return s.g?s.g(j):s.call(null,j)}return null}n=M(n);var i=J.h(n,CD),s=J.h(n,tF),o=J.h(n,R3),f=J.h(n,TF),d=J.h(n,V),p=J.h(n,JD),v=J.h(n,U),_=J.h(n,X),k=J.h(n,gy),P=J.h(n,mE),L=J.h(n,T),G=J.h(n,vG);if(l(null))return null;var Z=Dn(f),W=Dn(i);return new R(null,15,5,S,[Ss,U,v,gy,l(k)?k:new h(null,2,[ky,jn(),ly,n],null),T,["noselect rc-checkbox-wrapper ",m.g(Q(p,new R(null,2,5,S,[OD,T],null)))].join(""),X,Q(p,new R(null,2,5,S,[OD,X],null)),V,Q(p,new R(null,2,5,S,[OD,V],null)),LC,Oo,dy,new R(null,2,5,S,[new R(null,2,5,S,[oF,Al.j(F([new h(null,6,[T,["rc-checkbox ",m.g(L)].join(""),pF,"checkbox",X,Al.j(F([Qn("none"),new h(null,1,[SD,"default"],null),_])),pE,W,UU,gf(Z),tF,function(){return t(),null}],null),d]))],null),l(P)?new R(null,3,5,S,[lA,new h(null,3,[T,["rc-checkbox-label ",m.g(o)].join(""),X,Al.j(F([Qn("none"),new h(null,2,[nG,"8px",SD,"default"],null),G])),KD,function(){return t(),null}],null),P],null):null],null)],null)};pt.v=0;pt.B=function(n){return this.j(w(n))};g=gq.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"format-str":return this.Cb;case"overrides":return this.Fb;case"default-year":return this.Bb;case"timezone":return this.Gb;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#cljs-time.format.Formatter{",", ","}",i,fh.h(new R(null,4,5,S,[new R(null,2,5,S,[PE,this.Cb],null),new R(null,2,5,S,[RE,this.Fb],null),new R(null,2,5,S,[SE,this.Bb],null),new R(null,2,5,S,[QE,this.Gb],null)],null),this.I))};g.Fa=function(){return new Zh(this,4,new R(null,4,5,S,[PE,RE,SE,QE],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new gq(this.Cb,this.Fb,this.Bb,this.Gb,this.T,this.I,this.C)};g.ba=function(){return 4+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=-987738732^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.Cb,t.Cb)&&E.h(this.Fb,t.Fb)&&E.h(this.Bb,t.Bb)&&E.h(this.Gb,t.Gb)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,4,[QE,null,RE,null,PE,null,SE,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new gq(this.Cb,this.Fb,this.Bb,this.Gb,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"format-str":case"overrides":case"default-year":case"timezone":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(PE,t):Vf.call(null,PE,t))?new gq(i,this.Fb,this.Bb,this.Gb,this.T,this.I,null):l(Vf.h?Vf.h(RE,t):Vf.call(null,RE,t))?new gq(this.Cb,i,this.Bb,this.Gb,this.T,this.I,null):l(Vf.h?Vf.h(SE,t):Vf.call(null,SE,t))?new gq(this.Cb,this.Fb,i,this.Gb,this.T,this.I,null):l(Vf.h?Vf.h(QE,t):Vf.call(null,QE,t))?new gq(this.Cb,this.Fb,this.Bb,i,this.T,this.I,null):new gq(this.Cb,this.Fb,this.Bb,this.Gb,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,4,5,S,[new ci(PE,this.Cb,null),new ci(RE,this.Fb,null),new ci(SE,this.Bb,null),new ci(QE,this.Gb,null)],null),this.I))};g.Z=function(n,t){return new gq(this.Cb,this.Fb,this.Bb,this.Gb,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};var f_=Ni([B0,y5,ZU,Z4,s5,z8,BS,RT,SV,f1,P_,l3,P2,yT,n4,FQ,JR,nT,o5,V_,U2,gX,eY,k9,JQ,A1,a7,w7,aT,bR,i1,h6,mY,P4,g3,X_,wQ,sZ,eU,E7,h0,wU,OQ,z0,$W,xY,k6,S2,r5,M6,VR,oX,HY],[oq(B7),mq("HH:mm"),mq("'T'HH:mm:ss.SSSZZ"),mq("yyyyDDD"),mq("yyyy-MM-dd"),mq("HH"),mq("HH:mm:ssZZ"),mq("xxxx-'W'ww-e"),mq("xxxx-'W'ww-e'T'HH:mm:ss.SSSZZ"),mq("yyyy-MM-dd'T'HH:mm:ss.SSS"),mq("yyyyMMdd'T'HHmmss.SSSZ"),mq("yyyy-MM-dd'T'HH:mm:ss.SSSZZ"),mq("HHmmssZ"),oq(PV),mq("xxxx'W'wwe"),mq("'T'HHmmssZ"),oq(O2),mq("yyyy-MM-dd'T'HH:mm:ssZZ"),mq("yyyy-MM-dd"),oq(F2),mq("EEE, dd MMM yyyy HH:mm:ss Z"),mq("yyyy-MM-dd'T'HH:mm:ss.SSS"),mq("yyyyDDD'T'HHmmss.SSSZ"),mq("yyyy-DDD"),mq("HH:mm:ss.SSS"),mq("yyyy-MM-dd'T'HH:mm"),mq("HH:mm:ss.SSSZZ"),mq("xxxx'W'wwe'T'HHmmss.SSSZ"),mq("xxxx"),mq("HHmmss.SSSZ"),mq("HH:mm:ss"),mq("yyyy-DDD'T'HH:mm:ss.SSSZZ"),mq("yyyy-DDD'T'HH:mm:ssZZ"),mq("HH:mm:ss.SSS"),mq(MV),oq(jX),mq("yyyy"),mq("'T'HH:mm:ssZZ"),mq("xxxx'W'wwe'T'HHmmssZ"),mq("yyyyMMdd"),mq("xxxx-'W'ww"),oq(W3),mq("yyyyDDD'T'HHmmssZ"),mq("yyyy-MM"),oq(s9),mq("xxxx-'W'ww-e"),mq("yyyy-MM-dd'T'HH"),oq(cY),mq("yyyy-MM-dd'T'HH:mm:ss"),mq("xxxx-'W'ww-e'T'HH:mm:ssZZ"),mq("yyyyMMdd'T'HHmmssZ"),mq("yyyy-MM-dd HH:mm:ss"),mq("'T'HHmmss.SSSZ")]),g_=new jj(null,new h(null,9,[B0,null,yT,null,JR,null,V_,null,g3,null,X_,null,wU,null,$W,null,S2,null],null),null);iw.h(oj(bj(f_)),g_);mq("MMMM yyyy");mq("ww");mq("yyyy MMM dd");mq("E dd MMM Y HH:mm:ss");j$.Nh(null,K0,function(n){n=M(n);var t=J.h(n,QD),i=J.h(n,TD),s=J.h(n,WD),o=J.h(n,N0);return ov.K(n,X,Al,new h(null,7,[QD,t,TD,Wo(i),WD,Wo(s),tP,l(o)?null:0,sD,"auto",rD,"visible",OZ,30],null))});j$.Nh(null,cR,function(n){n=M(n);var t=J.h(n,MB);t=M(t);var i=J.h(t,NB);i=M(i),i=J.h(i,cZ);var s=J.h(t,UE),o=J.h(t,G1);return My(F([n,new h(null,2,[V,new h(null,2,[BF,function(){var f=BF.g(s);return l(f)?f:0}(),KD,function(){return o.g?o.g(t6):o.call(null,t6)}],null),X,new h(null,6,[NQ,E.h(zZ,rR.g(s))&&fj.h(DF,VE.g(s))?[m.g(i)," auto #ddd"].join(""):null,gW,["-",m.g(i)].join(""),QD,"relative",qD,"hidden",F4,"none",OZ,function(){var f=VE.g(s);switch(f instanceof K?f.U:null){case"open":return 20;default:return null}}()],null)],null)]))});p$.Nh(null,cR,function(n){n=M(n);var t=J.h(n,MB),i=M(t);t=J.h(i,NB);var s=J.h(i,UE);return i=E.h(DF,VE.g(s)),s=E.h(EF,VE.g(s)),My(F([n,new h(null,2,[LC,fG,X,Ni([lJ,GD,RG,mJ,zD,u1,nD,sG,kC,yD,qC],[i?"0 1px 1px rgba(0, 0, 0, .075) inset, 0 0 8px rgba(82, 168, 236, .6)":"0 1px 1px rgba(0, 0, 0, .075) inset",YQ.g(t),"nowrap","border 0.2s box-shadow 0.2s",nI.g(t),"padding-box","0 8px 0 8px","none",["1px solid ",m.g(s?kC.g(t):i?"#66afe9":null)].join(""),"4px","34px"])],null)]))});j$.Nh(null,FW,function(n){return My(F([n,new h(null,2,[T,"noselect",X,new h(null,6,[QD,"fixed",WD,"0px",TD,"0px",gD,"100%",qC,"100%",RD,"none"],null)],null)]))});p$.Nh(null,FW,function(n){n=M(n);var t=J.h(n,MB);return t=M(t),t=J.h(t,UE),Hy(n,new h(null,3,[zD,"black",tP,E.h(O6.g(t),Y3)?.1:0,mJ,"opacity 0.25s"],null))});j$.Nh(null,q8,function(n){return Hy(n,new h(null,2,[PD,"inline-block",QD,"relative"],null))});p$.Nh(null,K0,function(n){var t=NB.g(MB.g(n)),i=M(t);t=J.h(i,cZ);var s=J.h(i,fZ),o=J.h(i,$Y),f=J.h(i,g4);return i=J.h(i,kC),ov.K(n,X,Al,new h(null,5,[zD,"white",yD,"4px",kC,["thin solid ",m.g(i)].join(""),nD,s,lJ,Nk(" ",new R(null,4,5,S,[t,t,o,f],null))],null))});p$.Nh(null,hU,function(n){n=M(n);var t=J.h(n,MB);t=M(t),t=J.h(t,NB);var i=J.h(n,UE),s=new h(null,4,[GD,YQ.g(t),qD,"hidden",PG,"ellipsis",RG,"nowrap"],null);return t=E.h(hX.g(i),pE)?Al.j(F([s,new h(null,1,[zD,o8.g(t)],null)])):s,Hy(n,t)});Se(function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H){return new R(null,2,5,S,[a1,new R(null,2,5,S,[HQ,new R(null,4,5,S,[EQ,new h(null,1,[X,l(H)?new h(null,1,[zD,"#EEE"],null):null],null),new R(null,2,5,S,[oF,Ni([qF,BF,n2,sF,pE,my,nZ,rF,vF,pF,mF,G4,X,T,tF,uF],["off",f,function(me){var $e=me.key;return E.h(D($e),1)&&Sq(me,$e,Z,j,W,o,s,G),null},d,H,function(me){return N(n,me)},function(){return N(i,!0),N(t,!0),null},q(o),function(){return l(_)||(P.G?P.G():P.call(null)),N(i,!1),null},"text",function(me){return l(q(k))&&(P.G?P.G():P.call(null),me.preventDefault()),null},function(me){var $e=me.clipboardData.getData("Text");return Sq(me,$e,Z,j,W,o,s,G),null},new h(null,1,[gD,L],null),"form-control",function(me){return me=me.target.value,me=l(j)?Cq(me):me,G.g?G.g(me):G.call(null,me),null},function(me){return l(v.g?v.g(me):v.call(null,me))||(me.stopPropagation(),me.preventDefault()),null}])],null),new R(null,3,5,S,[z1,new h(null,1,[mF,function(me){return p.G?p.G():p.call(null),l(q(i))&&me.preventDefault(),null}],null),gc(H)?new R(null,1,5,S,[fO],null):null],null)],null)],null)],null)},new h(null,1,[jF,function(n){n=$l(n,n.props),I(n,0,null);var t=I(n,1,null),i=I(n,2,null),s=I(n,3,null),o=I(n,4,null);return l(function(){var f=q(t);return l(f)?(f=q(i),l(f)?q(s):f):f}())&&q(t).select(),l(function(){var f=q(t);return l(f)?q(o):f}())?(q(t).setSelectionRange(z(q(o)),Ke(q(o))),N(o,null)):null}],null));var PH=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};PH.j=function(n){function t(){var _n=q(Ce);return _n=_n==null?null:_n.getElementsByClassName("chosen-single"),_n=_n==null?null:_n.item(0),_n==null?null:_n.focus()}function i(_n){return N(Me,_n)}function s(_n){return N(Ce,_n)}function o(){return l(q(De))?q(De).focus():null}function f(_n,_i,ll){return _i=M(_i),_i=J.h(_i,KF),H(_n,_i,ll),N(Z,_n)}n=M(n);var d=J.h(n,hF),p=J.h(n,TF),v=J.h(n,KF),_=J.l(n,SF,250),k=J.h(n,qT);if(l(null))return null;var P=fn(Dn(p)),L=fn(q(P)),G=fn(gf(k)),Z=fn(""),W=Qe(d),j=fn(new h(null,5,[HF,W,FF,null,hF,lh,Xx,0,IF,null],null)),H=Pk.K($q,j,d,_),me=fn(!1);gn(function(){var _n=gc(q(G));return _n&&q(me)});var $e=fn(!1),De=fn(null),le=fn(!1);fn(null);var Ce=fn(null),Me=fn(null);return H("",v,!1),function(){function _n(ll){var _l=null;if(0<arguments.length){_l=0;for(var oa=Array(arguments.length-0);_l<oa.length;)oa[_l]=arguments[_l+0],++_l;_l=new u(oa,0,null)}return _i.call(this,_l)}function _i(ll){function _l(vf){if(l(_S))return!1;switch(vf.key){case"Enter":return ga();case"Escape":return vf=q(G),Sa(),l(vf)&&t(),gc(vf);case"Tab":if(vf=vf.shiftKey,l(_S))Sa();else{var c0=q(G);Da(),N(G,!1),f("",Fa,!1),l(l(c0)?vf:c0)&&t()}return N(G,!1),!0;case"ArrowUp":return Ru(-1);case"ArrowDown":return Ru(1);case"PageUp":return Ru(-(_s()-1));case"PageDown":return Ru(_s()-1);case"Home":return oa(Oo);case"End":return oa(To);default:return l(ih)?ih:Uh}}function oa(vf){return gc(q($e))&&w(b0)&&(N(L,qq(b0,xg,q(L),vf)),N(le,!0)),!0}function Ru(vf){var c0=q(G);return c0=l(c0)?w(b0):c0,l(c0)&&(N(L,qq(b0,xg,q(L),vf)),l(a0)||Da()),N(G,!0),N(le,!0),!0}function ga(){var vf=q(G);return l(_S)?Sa():l(function(){var c0=S0.g(_1);return l(c0)&&(c0=w(q(Z)))&&(c0=Ve(b0))?l(Uh)?q(G):Uh:c0}())?Ra(q(Z)):l(function(){var c0=q(G);return l(c0)?c0:ec}())&&Ra(q(L)),gc(vf)}function _s(){var vf=q(Ce);return vf=l(vf)?q(Ce).getElementsByClassName("chosen-results").item(0):vf,l(l(vf)?vf.firstChild:vf)?Jf(vf.clientHeight,vf.firstChild.offsetHeight):0}function Sa(){return l(q($e))||o(),N(G,!1),f("",Fa,!1),N(L,q(P))}function Ra(vf){return N(L,l(l(Uh)?Bd:Uh)?Cq(vf):vf),N(le,!0),Da(),vf=q(G),l(vf)&&o(),l(k)||N(G,gc(vf)),l(vf)&&t(),f("",Fa,!1)}function Da(){var vf=l(e0)?(vf=fj.h(q(L),q(rc)))?vf:wg:e0;return l(vf)?(N(P,q(L)),vf=q(L),qc.g?qc.g(vf):qc.call(null,vf)):null}var Fa=M(ll),Na=J.l(Fa,ZQ,30);J.h(Fa,vX);var _a=J.l(Fa,r2,aF),Pa=J.h(Fa,CD),qc=J.h(Fa,tF),uf=J.h(Fa,j2);ll=J.h(Fa,DD);var _h=J.h(Fa,TF),Uh=J.h(Fa,BY),Kd=J.h(Fa,V),ud=J.l(Fa,qG,mE),sc=J.h(Fa,BF),Yd=J.h(Fa,uU),wg=J.h(Fa,aS),Pf=J.h(Fa,bD),ac=J.h(Fa,sF),fc=J.h(Fa,US),nd=J.l(Fa,k5,ud),a0=J.l(Fa,gS,!0),_1=J.h(Fa,LU),_$=J.h(Fa,JD),$b=J.h(Fa,gD),Z_=J.h(Fa,N_),_b=J.h(Fa,KF),cb=J.h(Fa,hF),ib=J.l(Fa,Vz,Xx),_2=J.h(Fa,X),Nb=J.h(Fa,q9);J.h(Fa,SF);var _D=J.h(Fa,T),ec=J.l(Fa,SU,!0);J.h(Fa,nE);var Jc=J.h(Fa,E4),ih=J.h(Fa,wF),Bd=J.h(Fa,JZ);if(l(null))return null;cb=W?hF.g(q(j)):Dn(cb);var xg=l(Uh)?Df:ib;ud=l(Uh)?Df:ud;var hb=l(Uh)?Df:nd,_S=Dn(Pa);Pa=Dn(_b);var rc=fn(Dn(_h));fj.h(q(P),q(rc))&&(N(P,q(rc)),N(L,q(rc)));var e0=l(qc)?gc(_S):qc,b0=W?cb:l(Pa)?uq(cb,_a,ud,q(Z)):tq(cb,_a,ud,q(Z)),nb=gn(function(){var vf=q(Ce);if(vf=l(vf)?q(Ce).getElementsByClassName("chosen-drop").item(0):vf,l(vf))vf=vf.getBoundingClientRect().height;else{if(vf=D(b0)*Na,gc(Pf))var c0=240;else Qa(Pf,"px")?c0=parseInt(Pf,10):(console.warn(Kg.h(m,F(["max-height is not in pxs, using 240px for estimation"]))),c0=240);vf=vf+12+(l(ih)?32:0),vf=vf<c0?vf:c0}return vf});return _h=l(function(){var vf=new jj(null,new h(null,2,[WE,null,cE,null],null),null);return vf.g?vf.g(Jc):vf.call(null,Jc)}())?!0:l(function(){var vf=new jj(null,new h(null,3,[XE,null,u3,null,dE,null],null),null);return vf.g?vf.g(Jc):vf.call(null,Jc)}())?!1:gn(function(){if(l(l(Yd)?q(Ce):Yd)){var vf=q(Ce).getBoundingClientRect().top,c0=document.documentElement.clientHeight;return c0=vf+34+q(nb)>c0,0>vf-q(nb)?!1:c0?!0:null}return null}),sc=new R(null,14,5,S,[Rq,L,cb,xg,ud,sc,ac,function(){return l(_S)?null:l(q(G))?Sa():(N(G,!0),o(),N(le,!0))},_l,ih,G,fc,_S,_$],null),Kd=new R(null,4,5,S,[dA,Al.j(F([new h(null,2,[T,function(){var vf=l(Uh)?"chosen-container-multi":"chosen-container-single",c0=q(G);c0=l(c0)?c0:q($e),c0=l(c0)?"chosen-container-active":null;var Ba=l(q(G))?"chosen-with-drop":null;return BD.Wa?BD.Wa("rc-dropdown","chosen-container",vf,"noselect",c0,Ba,_D):BD.call(null,"rc-dropdown","chosen-container",vf,"noselect",c0,Ba,_D)}(),X,Al.j(F([Qn(l($b)?"0 0 auto":"auto"),new h(null,1,[gD,$b],null),_2]))],null),l(ll)?new h(null,2,[qE,function(){return N(me,!0),null},rE,function(){return N(me,!1),null}],null):null,yn(Bn(Fa,new R(null,2,5,S,[V,my],null),s)),Kd])),sc,l(function(){var vf=q(G);return l(vf)?gc(_S):vf}())?new R(null,4,5,S,[dA,Al.j(F([new h(null,3,[T,function(){var vf=Q(_$,new R(null,2,5,S,[OT,T],null));return BD.l?BD.l("chosen-drop","rc-dropdown-chosen-drop",vf):BD.call(null,"chosen-drop","rc-dropdown-chosen-drop",vf)}(),X,Al.j(F([l(Dn(_h))?new h(null,1,[OP,zn("translate3d(0px, -%ipx, 0px)",34+q(nb)+-2)],null):null,Q(_$,new R(null,2,5,S,[OT,X],null))])),my,i],null),Q(_$,new R(null,2,5,S,[OT,V],null))])),l(function(){var vf=l(ih)?ih:gc(Uh);return l(vf)?gc(k):vf}())?new R(null,7,5,S,[h_,ih,Z,_l,G,function(vf){return f(vf,Fa,!0)},Nb],null):null,new R(null,3,5,S,[h4,Al.j(F([new h(null,2,[T,function(){var vf=Q(_$,new R(null,2,5,S,[m1,T],null));return BD.l?BD.l("chosen-results","rc-dropdown-chosen-results",vf):BD.call(null,"chosen-results","rc-dropdown-chosen-results",vf)}(),X,Al.j(F([l(Pf)?new h(null,1,[bD,Pf],null):null,Q(_$,new R(null,2,5,S,[m1,X],null))]))],null),Q(_$,new R(null,2,5,S,[m1,V],null))])),l(W&&HF.g(q(j)))?new R(null,3,5,S,[lF,Al.j(F([new h(null,2,[T,function(){var vf=Q(_$,new R(null,2,5,S,[N1,T],null));return BD.l?BD.l("loading","rc-dropdown-choices-loading",vf):BD.call(null,"loading","rc-dropdown-choices-loading",vf)}(),X,ph(_$,new R(null,2,5,S,[N1,X],null),og)],null),Q(_$,new R(null,2,5,S,[N1,V],null))])),J.l(uf,m8,"Loading...")],null):l(W&&FF.g(q(j)))?new R(null,3,5,S,[lF,Al.j(F([new h(null,2,[T,function(){var vf=Q(_$,new R(null,2,5,S,[E3,T],null));return BD.l?BD.l("error","rc-dropdown-choices-error",vf):BD.call(null,"error","rc-dropdown-choices-error",vf)}(),X,ph(_$,new R(null,2,5,S,[E3,X],null),og)],null),Q(_$,new R(null,2,5,S,[E3,V],null))])),FF.g(q(j))],null):0<D(b0)?function(){function vf(ka,Pp){return ka=Se(new R(null,2,5,S,[mG,aF.g(ka)],null),new h(null,1,[fx,Xx.g(ka)],null)),Tf(ka,O.h($_,Pp))}var c0=sq(b0,_a),Ba=I(c0,0,null);c0=I(c0,1,null);var $_=Pk.j(Lq,xg,hb,Ra,F([L])),_A=aF.g(z(Ba))==null;return E.h(1,D(c0))&&_A?O.h($_,z(c0)):Kg.h(fh,O.l(vf,Ba,c0))}():new R(null,3,5,S,[lF,Al.j(F([new h(null,3,[T,["no-results rc-dropdown-choices-no-results ",m.g(Q(_$,new R(null,2,5,S,[C4,T],null)))].join(""),X,ph(_$,new R(null,2,5,S,[C4,X],null),og),mF,function(){var vf=F0.g(_1);return l(vf)&&(vf=(vf=w(q(Z)))?Uh:vf),l(vf)&&Ra(q(Z)),null}],null),Q(_$,new R(null,2,5,S,[C4,V],null))])),zn(function(){var vf=function(){var c0=w(q(Z));return c0&&BR.g(uf)}();return l(vf)||(vf=function(){var c0=Ve(q(Z));return c0&&c9.g(uf)}(),l(vf))?vf:(vf=BR.g(uf),l(vf)?vf:'No results match "%s"')}(),q(Z))],null)],null)],null):null],null),l(ll)&&bk(G,DD,function(){return N(me,!1)}),l(Z_)&&bk(G,N_,function(vf,c0,Ba,$_){return vf=gc(Ba),l(vf&&$_)?Z_.G?Z_.G():Z_.call(null):null}),Kd}return _n.v=0,_n.B=function(ll){return ll=w(ll),_i(ll)},_n.j=_i,_n}()};PH.v=0;PH.B=function(n){return this.j(w(n))};var AE=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};AE.j=function(n){function t(){var k=S,P=Al.j,L=Q(p,new R(null,2,5,S,[gR,T],null));return L=BD.h?BD.h("rc-throbber-segment",L):BD.call(null,"rc-throbber-segment",L),new R(null,2,5,k,[lF,P.call(Al,F([new h(null,2,[T,L,X,Al.j(F([l(s)?new h(null,1,[zD,s],null):null,Q(p,new R(null,2,5,S,[gR,X],null))]))],null),Q(p,new R(null,2,5,S,[gR,V],null))]))],null)}n=M(n);var i=J.h(n,kD),s=J.h(n,GD),o=J.h(n,T),f=J.h(n,X),d=J.h(n,V),p=J.h(n,JD),v=J.h(n,U),_=J.h(n,gy);return l(null)?null:new R(null,15,5,S,[So,U,v,gy,l(_)?_:new h(null,2,[ky,jn(),ly,n],null),T,["rc-throbber-wrapper ",m.g(Q(p,new R(null,2,5,S,[OD,T],null)))].join(""),X,Q(p,new R(null,2,5,S,[OD,X],null)),V,Q(p,new R(null,2,5,S,[OD,V],null)),LC,Oo,ay,new R(null,10,5,S,[h4,Al.j(F([new h(null,2,[T,function(){var k=function(){switch(i instanceof K?i.U:null){case"smaller":return"smaller";case"small":return"small";case"large":return"large";default:return null}}();return BD.l?BD.l("loader rc-throbber",k,o):BD.call(null,"loader rc-throbber",k,o)}(),X,f],null),d])),new R(null,1,5,S,[t],null),new R(null,1,5,S,[t],null),new R(null,1,5,S,[t],null),new R(null,1,5,S,[t],null),new R(null,1,5,S,[t],null),new R(null,1,5,S,[t],null),new R(null,1,5,S,[t],null),new R(null,1,5,S,[t],null)],null)],null)};AE.v=0;AE.B=function(n){return this.j(w(n))};var j_=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};j_.j=function(n){n=M(n);var t=J.h(n,TF),i=J.h(n,SS);if(J.h(n,U),l(null))return null;var s=fn(Dn(t)),o=fn(q(s)==null?"":q(s));return function(){function f(p){var v=null;if(0<arguments.length){v=0;for(var _=Array(arguments.length-0);v<_.length;)_[v]=arguments[v+0],++v;v=new u(_,0,null)}return d.call(this,v)}function d(p){function v(){if(Qe(k)){var _s=function(){return N(s,q(o))};if(E.h(2,k.length)){var Sa=q(o);return k.h?k.h(Sa,_s):k.call(null,Sa,_s)}return Sa=q(o),k.g?k.g(Sa):k.call(null,Sa),_s()}return null}p=M(p);var _=J.h(p,CD),k=J.h(p,tF),P=J.h(p,GR),L=J.h(p,qC),G=J.h(p,qV),Z=J.h(p,TF),W=J.h(p,V),j=J.l(p,K5,Df),H=J.h(p,sF),me=J.h(p,JD),$e=J.h(p,gD),De=J.h(p,U),le=J.h(p,QW),Ce=J.h(p,X),Me=J.h(p,gy),_n=J.h(p,Np),_i=J.h(p,T),ll=J.l(p,OF,!0),_l=J.h(p,uV);if(l(null))return null;Z=Dn(Z);var oa=Dn(_),Ru=Dn(ll),ga=fn(!1);return fj.h(q(s),Z)&&(N(s,Z),N(o,Z)),new R(null,17,5,S,[Ss,U,De,gy,l(Me)?Me:new h(null,2,[ky,jn(),ly,p],null),LC,Oo,T,["rc-input-text ",m.g(Q(me,new R(null,2,5,S,[OD,T],null)))].join(""),X,Q(me,new R(null,2,5,S,[OD,X],null)),V,Q(me,new R(null,2,5,S,[OD,V],null)),gD,l($e)?$e:"250px",dy,new R(null,2,5,S,[new R(null,3,5,S,[dA,Al.j(F([new h(null,2,[T,function(){var _s=function(){switch(_n instanceof K?_n.U:null){case"success":return"has-success";case"warning":return"has-warning";case"error":return"has-error";default:return""}}(),Sa=l(l(_n)?P:_n)?"has-feedback ":null,Ra=Q(me,new R(null,2,5,S,[Y7,T],null));return BD.K?BD.K("rc-input-text-inner",_s,Sa,Ra):BD.call(null,"rc-input-text-inner",_s,Sa,Ra)}(),X,Al.j(F([Qn("auto"),Q(me,new R(null,2,5,S,[Y7,X],null))]))],null),Q(me,new R(null,2,5,S,[Y7,V],null))])),new R(null,2,5,S,[E.h(i,JT)?oF:i,Al.j(F([Ni([sF,pE,rF,vF,pF,X,QW,Q5,T,tF],[H,oa,q(o),function(){return l(l(Ru)?fj.h(q(o),q(s)):Ru)&&v(),null},function(){switch(i instanceof K?i.U:null){case"input":return"text";case"password":return"password";default:return null}}(),Al.j(F([Qn("none"),new h(null,2,[qC,L,PY,"12px"],null),Ce])),E.h(i,l8)?l(le)?le:3:null,function(_s){if(l(oa))_s.preventDefault();else switch(_s.key){case"Enter":v();break;case"Escape":N(o,q(s))}return null},["form-control rc-input-text-field ",m.g(_i)].join(""),function(_s){var Sa=_s.target.value,Ra=j.g?j.g(Sa):j.call(null,Sa);return fj.h(Ra,Sa)&&(_s.target.value=Ra),_s=l(k)?(_s=gc(oa))?l(_l)?Cj(_l,Ra):!0:_s:k,l(_s)&&(N(o,Ra),l(Ru)||v()),null}]),W]))],null)],null),l(l(P)?_n:P)?function(){var _s=function(){var Sa=_n instanceof K?_n.U:null;switch(Sa){case"success":return"zmdi-check-circle";case"warning":return"zmdi-alert-triangle";case"error":return"zmdi-alert-circle";case"validating":return"zmdi-hc-spin zmdi-rotate-right zmdi-spinner";default:throw Error(["No matching clause: ",m.g(Sa)].join(""))}}();return l(G)?new R(null,15,5,S,[Ep,U,null,mE,G,QD,g0,Np,_n,tE,ga,uE,E.h(D5,_n)?new R(null,7,5,S,[AE,kD,TK,T,"smaller",V,new h(null,2,[qE,function(){return l(l(P)?_n:P)&&N(ga,!0),null},rE,function(){return N(ga,!1),null}],null)],null):new R(null,2,5,S,[$D,new h(null,4,[T,["zmdi zmdi-hc-fw ",m.g(_s)," form-control-feedback"].join(""),X,new h(null,3,[QD,"static",qC,"auto",tP,l(l(P)?_n:P)?"1":"0"],null),qE,function(){return l(l(P)?_n:P)&&N(ga,!0),null},rE,function(){return N(ga,!1),null}],null)],null),X,Al.j(F([Qn("none"),Xn(iC,fG),new h(null,2,[HD,"130%",hE,"4px"],null)]))],null):E.h(D5,_n)?new R(null,7,5,S,[AE,U,null,kD,TK,T,"smaller"],null):new R(null,2,5,S,[$D,new h(null,3,[T,BD.K?BD.K("zmdi","zmdi-hc-fw",_s,"form-control-feedback"):BD.call(null,"zmdi","zmdi-hc-fw",_s,"form-control-feedback"),X,Al.j(F([Qn("none"),Xn(iC,fG),new h(null,5,[QD,"static",HD,"130%",hE,"4px",tP,l(l(P)?_n:P)?"1":"0",qC,"auto"],null)])),XD,G],null)],null)}():null],null)],null)}return f.v=0,f.B=function(p){return p=w(p),d(p)},f.j=d,f}()};j_.v=0;j_.B=function(n){return this.j(w(n))};var Vs=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};Vs.j=function(n){return Kg.j(j_,SS,oF,gy,new h(null,2,[ky,jn(),ly,n],null),F([n]))};Vs.v=0;Vs.B=function(n){return this.j(w(n))};var UH=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};UH.j=function(n){return Kg.j(j_,SS,l8,gy,new h(null,2,[ky,jn(),ly,n],null),F([n]))};UH.v=0;UH.B=function(n){return this.j(w(n))};var Cr=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};Cr.g=function(n){return n};Cr.h=function(n,t){return fr(n,t)};Cr.v=2;g=hr.prototype;g.pop=function(){if(this.length===0)return null;var n=this.o[this.ma];return this.o[this.ma]=null,this.ma=(this.ma+1)%this.o.length,--this.length,n};g.unshift=function(n){return this.o[this.head]=n,this.head=(this.head+1)%this.o.length,this.length+=1,null};g.unbounded_unshift=function(n){return this.length+1===this.o.length&&this.resize(),this.unshift(n)};g.resize=function(){var n=Array(2*this.o.length);return this.ma<this.head?(gr(this.o,this.ma,n,0,this.length),this.ma=0,this.head=this.length,this.o=n):this.ma>this.head?(gr(this.o,this.ma,n,0,this.o.length-this.ma),gr(this.o,0,n,this.o.length-this.ma,this.head),this.ma=0,this.head=this.length,this.o=n):this.ma===this.head?(this.head=this.ma=0,this.o=n):null};g.cleanup=function(n){for(var t=this.length,i=0;;)if(i<t){var s=this.pop();(n.g?n.g(s):n.call(null,s))&&this.unshift(s),i+=1}else return null};ir.prototype.Zf=function(n,t){return this.ha.unbounded_unshift(t),this};ir.prototype.ba=function(){return this.ha.length};var k_=bb("Opera"),mz=bb("Trident")||bb("MSIE"),l_=bb("Edge"),m_=bb("Gecko")&&!(ab().toLowerCase().indexOf("webkit")!=-1&&!bb("Edge"))&&!(bb("Trident")||bb("MSIE"))&&!bb("Edge"),n_=ab().toLowerCase().indexOf("webkit")!=-1&&!bb("Edge");n_&&bb("Mobile");bb("Macintosh");bb("Windows");bb("Linux")||bb("CrOS");var w$=$a.navigator||null;w$&&(w$.appVersion||"").indexOf("X11");bb("Android");kr();bb("iPad");bb("iPod");kr()||bb("iPad")||bb("iPod");ab().toLowerCase().indexOf("kaios");var p_;e:{var x$="",y$=function(){var n=ab();if(m_)return/rv:([^\);]+)(\)|;)/.exec(n);if(l_)return/Edge\/([\d\.]+)/.exec(n);if(mz)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(n_)return/WebKit\/(\S+)/.exec(n);if(k_)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(y$&&(x$=y$?y$[1]:""),mz){var z$=lr();if(z$!=null&&z$>parseFloat(x$)){p_=String(z$);break e}}p_=x$}var A$;if($a.document&&mz){var B$=lr();A$=B$||parseInt(p_,10)||void 0}else A$=void 0;var v_=A$;nr.zh=function(){return!($a.Window&&$a.Window.prototype&&!bb("Edge")&&$a.Window.prototype.setImmediate==$a.setImmediate)};nr.ah=function(){var n=$a.MessageChannel;if(typeof n>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!bb("Presto")&&(n=function(){var o=mr();o.style.display="none",document.documentElement.appendChild(o);var f=o.contentWindow;o=f.document,o.open(),o.close();var d="callImmediate"+Math.random(),p=f.location.protocol=="file:"?"*":f.location.protocol+"//"+f.location.host;o=la(function(v){(p=="*"||v.origin==p)&&v.data==d&&this.port1.onmessage()},this),f.addEventListener("message",o,!1),this.port1={},this.port2={postMessage:function(){f.postMessage(d,p)}}}),typeof n<"u"&&!bb("Trident")&&!bb("MSIE")){var t=new n,i={},s=i;return t.port1.onmessage=function(){if(i.next!==void 0){i=i.next;var o=i.od;i.od=null,o()}},function(o){s.next={od:o},s=s.next,t.port2.postMessage(0)}}return function(o){$a.setTimeout(o,0)}};nr.Ah=function(n){return n};var qr=new hr(Array(32)),or=!1,pr=!1;vr.prototype.Z=function(n,t){return new vr(this.F,t)};vr.prototype.Y=function(){return this.fh};vr.prototype.pb=function(){return this.F};zr.prototype.ge=function(n,t,i){var s=this,o=this,f=s.closed;if(i.rb(null)){if(f)return i.Xa(null),wr(!1);if(l(function(){var P=s.ha;return l(P)?gc(jr(s.ha)):P}())){i.Xa(null);var d=se(s.xb.h?s.xb.h(s.ha,t):s.xb.call(null,s.ha,t));if(i=function(){for(var P=lh;;)if(0<s.hd.length&&0<D(s.ha)){var L=s.hd.pop();if(L.rb(null)){var G=L.Xa(null),Z=s.ha.ha.pop();P=Qf.h(P,function(W,j,H){return function(){return j.g?j.g(H):j.call(null,H)}}(P,G,Z))}}else return P}(),d&&Ar(o),w(i)){i=w(i),n=null;for(var p=0,v=0;;)if(v<p){var _=n.S(null,v);tr(_),v+=1}else if(i=w(i))n=i,df(n)?(i=Fd(n),v=Gd(n),n=i,p=D(i),i=v):(i=z(n),tr(i),i=C(n),n=null,p=0),v=0;else break}return wr(!0)}if(n=function(){for(;;){var P=s.hd.pop();if(l(P)){if(l(P.rb(null)))return P}else return null}}(),l(n)){var k=n.Xa(null);return i.Xa(null),tr(function(){return k.g?k.g(t):k.call(null,t)}),wr(!0)}return 64<s.me?(s.me=0,s.oc.cleanup(yr)):s.me+=1,l(i.yd())&&s.oc.unbounded_unshift(new xr(i,t)),null}return wr(!f)};zr.prototype.gf=function(n,t){var i=this;if(t.rb(null)){if(i.ha!=null&&0<D(i.ha)){if(n=t.Xa(null),l(n)){var s=i.ha.ha.pop(),o=gc(jr(i.ha))&&0<i.oc.length?function(){for(var W=lh;;){var j=i.oc.pop(),H=j.sb;j=j.F;var me=H.rb(null);if(H=me&&H.Xa(null),W=l(H)?Qf.h(W,H):W,j=l(H)?se(i.xb.h?i.xb.h(i.ha,j):i.xb.call(null,i.ha,j)):null,!(gc(j)&&gc(jr(i.ha))&&0<i.oc.length))return new R(null,2,5,S,[j,W],null)}}():null,f=I(o,0,null),d=I(o,1,null);l(f)&&Ar(this);for(var p=w(d),v=null,_=0,k=0;;)if(k<_){var P=v.S(null,k);tr(function(W,j,H,me,$e){return function(){return $e.g?$e.g(!0):$e.call(null,!0)}}(p,v,_,k,P)),k+=1}else{var L=w(p);if(L){if(P=L,df(P))p=Fd(P),k=Gd(P),v=p,_=D(p),p=k;else{var G=z(P);tr(function(W,j,H,me,$e){return function(){return $e.g?$e.g(!0):$e.call(null,!0)}}(p,v,_,k,G)),p=C(P),v=null,_=0}k=0}else break}return wr(s)}return null}if(n=function(){for(;;){var W=i.oc.pop();if(l(W)){if(dr(W.sb))return W}else return null}}(),l(n)){var Z=er(n.sb);return t.Xa(null),tr(function(){return Z.g?Z.g(!0):Z.call(null,!0)}),wr(n.F)}if(l(i.closed))return l(i.ha)&&(i.xb.g?i.xb.g(i.ha):i.xb.call(null,i.ha)),l(function(){var W=t.rb(null);return l(W)?t.Xa(null):W}())?(n=function(){var W=i.ha;return l(W)?0<D(i.ha):W}(),s=l(n)?i.ha.ha.pop():null,wr(s)):null;64<i.ne?(i.ne=0,i.hd.cleanup(dr)):i.ne+=1,l(t.yd())&&i.hd.unbounded_unshift(t)}return null};zr.prototype.xd=function(){var n=this;if(!n.closed)for(n.closed=!0,l(function(){var o=n.ha;return l(o)?n.oc.length===0:o}())&&(n.xb.g?n.xb.g(n.ha):n.xb.call(null,n.ha));;){var t=n.hd.pop();if(t!=null){if(t.rb(null)){var i=t.Xa(null),s=l(function(){var o=n.ha;return l(o)?0<D(n.ha):o}())?n.ha.ha.pop():null;tr(function(o,f){return function(){return o.g?o.g(f):o.call(null,f)}}(i,s))}}else break}return null};Fr.prototype.aa=function(){return new Mf(null,this.key,new Mf(null,this.F,null,1,null),2,null)};Fr.prototype.W=function(n,t,i){return Gj(t,Mj,"["," ","]",i,this)};g=Ir.prototype;g.put=function(n,t){var i=Array(15),s=Hr(this.nc,n,this.level,i).forward[0];if(s!=null&&s.key===n)return s.F=t;e:for(s=0;;)if(.5>Math.random()&&15>s)s+=1;else break e;if(s>this.level){for(var o=this.level+1;o<=s+1;)i[o]=this.nc,o+=1;this.level=s}for(n=Gr(n,t,Array(s)),t=0;;)if(t<=this.level)s=i[t].forward,t<n.forward.length?n.forward[t]=s[t]:n.forward.push(t<s.length?s[t]:null),t<s.length?s[t]=n:s.push(n),t+=1;else return null};g.remove=function(n){var t=Array(15),i=Hr(this.nc,n,this.level,t);if(i=i.forward.length===0?null:i.forward[0],i!=null&&i.key===n){for(n=0;n<=this.level;){var s=t[n].forward;i===(n<s.length?s[n]:null)&&(s[n]=i.forward[n]),n+=1}for(;;)if(0<this.level&&this.level<this.nc.forward.length&&this.nc.forward[this.level]==null)--this.level;else return null}else return null};g.ceilingEntry=function(n){for(var t=this.nc,i=this.level;;){if(0>i)return E.h(t.key,n)?t:t.forward[0];var s;e:for(s=t;;){var o=i<s.forward.length?s.forward[i]:null;if(o!=null){if(o.key>n)break e;s=o}else{s=i===0?s:null;break e}}l(s)?(--i,t=s):--i}};g.floorEntry=function(n){for(var t=this.nc,i=this.level;;){if(0>i)return t===this.nc?null:t;var s;e:for(s=t;;){var o=i<s.forward.length?s.forward[i]:null;if(o!=null){if(o.key>n)break e;s=o}else{s=i===0?s:null;break e}}l(s)?(--i,t=s):--i}};g.aa=function(){return function n(t){return new Yf(null,function(){return t==null?null:Tf(new R(null,2,5,S,[t.key,t.F],null),n(t.forward[0]))},null,null)}(this.nc.forward[0])};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"{",", ","}",i,this)};var Jr=new Ir;g=Lr.prototype;g.Z=function(n,t){return new Lr(this.f,t)};g.Y=function(){return this.gh};g.rb=function(){return!0};g.yd=function(){return!0};g.Xa=function(){return this.f};g=Rr.prototype;g.Z=function(n,t){return new Rr(this.f,this.Sf,t)};g.Y=function(){return this.hh};g.rb=function(){return!0};g.yd=function(){return this.Sf};g.Xa=function(){return this.f};var Tr=new Rr(function(){return null},!0,og);g=Wr.prototype;g.Z=function(n,t){return new Wr(this.Kc,t)};g.Y=function(){return this.ih};g.rb=function(){return q(this.Kc)};g.yd=function(){return!0};g.Xa=function(){return N(this.Kc,null),!0};g=Xr.prototype;g.Z=function(n,t){return new Xr(this.Kc,this.od,t)};g.Y=function(){return this.jh};g.rb=function(){return dr(this.Kc)};g.yd=function(){return!0};g.Xa=function(){return er(this.Kc),this.od};var w_=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};w_.j=function(n){var t=M(n);if(l(null))return null;var i=ts(t),s=M(i),o=J.h(s,XF),f=J.h(s,ZF),d=fn(s),p=new Ol(d,new R(null,1,5,S,[WF],null),null,null,null);return Ms(d,o),function(){function v(k){var P=null;if(0<arguments.length){P=0;for(var L=Array(arguments.length-0);P<L.length;)L[P]=arguments[P+0],++P;P=new u(L,0,null)}return _.call(this,P)}function _(k){var P=M(k),L=J.h(P,CD),G=J.h(P,GR),Z=J.h(P,qC),W=J.h(P,qV),j=J.h(P,TF),H=J.h(P,T5),me=J.h(P,V),$e=J.h(P,q0),De=J.h(P,sF),le=J.h(P,OS),Ce=J.h(P,W_),Me=J.h(P,JD),_n=J.h(P,gD),_i=J.h(P,QF),ll=J.h(P,U),_l=J.h(P,A3),oa=J.h(P,X),Ru=J.h(P,u0),ga=J.h(P,k7),_s=J.h(P,gy),Sa=J.h(P,Np),Ra=J.h(P,T);if(l(null))return null;var Da=q(d),Fa=M(Da),Na=J.h(Fa,YF),_a=J.h(Fa,UF),Pa=J.h(Fa,aG),qc=J.h(Fa,$F),uf=QF.g(Fa),_h=Dn(j),Uh=l(_n)?_n:"250px";return fj.h(uf,_i)&&dk.l(d,Js,_i),fj.h(_h,qc)&&dk.l(d,Ks,_h),new R(null,13,5,S,[Dt,U,ll,gy,l(_s)?_s:new h(null,2,[ky,jn(),ly,P],null),T,"rc-typeahead",V,me,gD,Uh,dy,new R(null,2,5,S,[new R(null,29,5,S,[Vs,U,null,TF,p,T,Ra,X,oa,CD,L,GR,G,Np,Sa,qV,W,gD,Uh,qC,Z,sF,De,tF,Pk.h(Ns,d),OF,!1,V,new h(null,3,[uF,Pk.h(Os,d),nZ,function(){return ge},vF,function(){return dk.h(d,Is)}],null)],null),l(function(){var Kd=pg(Na);return l(Kd)?Kd:_a}())?new R(null,7,5,S,[So,U,null,X,new h(null,1,[QD,"relative"],null),ay,new R(null,7,5,S,[Dt,U,null,T,["rc-typeahead-suggestions-container ",m.g(Q(Me,new R(null,2,5,S,[gY,T],null)))].join(""),dy,new R(null,2,5,S,[l(_a)?new R(null,7,5,S,[So,U,null,LC,fG,ay,new R(null,7,5,S,[AE,U,null,kD,OO,T,function(){var Kd=Q(Me,new R(null,2,5,S,[e1,T],null));return BD.h?BD.h("rc-typeahead-throbber",Kd):BD.call(null,"rc-typeahead-throbber",Kd)}()],null)],null):null,function(){return function Kd(ud){return new Yf(null,function(){for(;;){var sc=w(ud);if(sc){var Yd=sc;if(df(Yd)){var wg=Fd(Yd),Pf=D(wg),ac=ag(Pf);return function(){for(var _$=0;;)if(_$<Pf){var $b=Oe(wg,_$),Z_=I($b,0,null),_b=I($b,1,null),cb=E.h(Pa,Z_);eg(ac,Se(new R(null,9,5,S,[So,U,null,ay,l(le)?le.g?le.g(_b):le.call(null,_b):_b,T,function(){var ib=cb?" active":null,_2=Q(Me,new R(null,2,5,S,[s_,T],null));return BD.l?BD.l("rc-typeahead-suggestion",ib,_2):BD.call(null,"rc-typeahead-suggestion",ib,_2)}(),V,new h(null,2,[qE,function(ib,_2,Nb,_D,ec,Jc,ih,Bd,xg,hb,_S,rc,e0,b0,nb,vf,c0,Ba,$_,_A,ka,Pp,_0,Oc,zg,_p,_O,_M,_T,_9,_q,Ez,_z,xz,Vj,Kz,_ee,dee,zz,$j,Gz,nee,_V,Ree,Sne,Lee,Bne,Une,_B,Kne,sne,une){return function(){return dk.l(une,zs,_D)}}(_$,cb,$b,Z_,_b,wg,Pf,ac,Yd,sc,Da,Fa,Fa,Na,_a,Pa,qc,uf,_h,Uh,null,k,P,P,L,G,Z,W,j,H,me,$e,De,le,Ce,Me,_n,_i,ll,_l,oa,Ru,ga,_s,Sa,Ra,i,s,s,o,f,d),mF,function(ib,_2,Nb,_D,ec,Jc,ih,Bd,xg,hb,_S,rc,e0,b0,nb,vf,c0,Ba,$_,_A,ka,Pp,_0,Oc,zg,_p,_O,_M,_T,_9,_q,Ez,_z,xz,Vj,Kz,_ee,dee,zz,$j,Gz,nee,_V,Ree,Sne,Lee,Bne,Une,_B,Kne,sne,une){return function(Gne){return Gne.preventDefault(),dk.l(une,As,_D)}}(_$,cb,$b,Z_,_b,wg,Pf,ac,Yd,sc,Da,Fa,Fa,Na,_a,Pa,qc,uf,_h,Uh,null,k,P,P,L,G,Z,W,j,H,me,$e,De,le,Ce,Me,_n,_i,ll,_l,oa,Ru,ga,_s,Sa,Ra,i,s,s,o,f,d)],null)],null),new h(null,1,[fx,Z_],null))),_$+=1}else return!0}()?dg(ac.fa(),Kd(Gd(Yd))):dg(ac.fa(),null)}var fc=z(Yd),nd=I(fc,0,null),a0=I(fc,1,null),_1=E.h(Pa,nd);return Tf(Se(new R(null,9,5,S,[So,U,null,ay,l(le)?le.g?le.g(a0):le.call(null,a0):a0,T,function(){var _$=_1?" active":null,$b=Q(Me,new R(null,2,5,S,[s_,T],null));return BD.l?BD.l("rc-typeahead-suggestion",_$,$b):BD.call(null,"rc-typeahead-suggestion",_$,$b)}(),V,new h(null,2,[qE,function(_$,$b,Z_,_b,cb,ib,_2,Nb,_D,ec,Jc,ih,Bd,xg,hb,_S,rc,e0,b0,nb,vf,c0,Ba,$_,_A,ka,Pp,_0,Oc,zg,_p,_O,_M,_T,_9,_q,Ez,_z,xz,Vj,Kz,_ee,dee,zz,$j,Gz,nee,_V){return function(){return dk.l(_V,zs,Z_)}}(_1,fc,nd,a0,Yd,sc,Da,Fa,Fa,Na,_a,Pa,qc,uf,_h,Uh,null,k,P,P,L,G,Z,W,j,H,me,$e,De,le,Ce,Me,_n,_i,ll,_l,oa,Ru,ga,_s,Sa,Ra,i,s,s,o,f,d),mF,function(_$,$b,Z_,_b,cb,ib,_2,Nb,_D,ec,Jc,ih,Bd,xg,hb,_S,rc,e0,b0,nb,vf,c0,Ba,$_,_A,ka,Pp,_0,Oc,zg,_p,_O,_M,_T,_9,_q,Ez,_z,xz,Vj,Kz,_ee,dee,zz,$j,Gz,nee,_V){return function(Ree){return Ree.preventDefault(),dk.l(_V,As,Z_)}}(_1,fc,nd,a0,Yd,sc,Da,Fa,Fa,Na,_a,Pa,qc,uf,_h,Uh,null,k,P,P,L,G,Z,W,j,H,me,$e,De,le,Ce,Me,_n,_i,ll,_l,oa,Ru,ga,_s,Sa,Ra,i,s,s,o,f,d)],null)],null),new h(null,1,[fx,nd],null)),Kd(he(Yd)))}return null}},null,null)}(O.l(dm,xj(0,Number.MAX_VALUE),Na))}()],null)],null)],null):null],null)],null)}return v.v=0,v.B=function(k){return k=w(k),_(k)},v.j=_,v}()};w_.v=0;w_.B=function(n){return this.j(w(n))};var AD=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};AD.j=function(n){n=M(n);var t=J.h(n,V),i=J.h(n,JD),s=J.h(n,gD),o=J.h(n,U),f=J.h(n,KD),d=J.h(n,X),p=J.h(n,gy),v=J.h(n,mE),_=J.h(n,T);return l(null)?null:new R(null,17,5,S,[So,gy,l(p)?p:new h(null,2,[ky,jn(),ly,n],null),U,o,T,["display-inline-flex rc-label-wrapper ",m.g(Q(i,new R(null,2,5,S,[OD,T],null)))].join(""),X,Q(i,new R(null,2,5,S,[OD,X],null)),V,Q(i,new R(null,2,5,S,[OD,V],null)),gD,s,LC,Oo,ay,new R(null,3,5,S,[lA,Al.j(F([new h(null,2,[T,BD.h?BD.h("rc-label",_):BD.call(null,"rc-label",_),X,Al.j(F([Qn("none"),d]))],null),l(f)?new h(null,1,[KD,function(){return f.G?f.G():f.call(null),null}],null):null,t])),v],null)],null)};AD.v=0;AD.B=function(n){return this.j(w(n))};var ED=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};ED.j=function(n){var t=M(n),i=J.h(t,O_),s=J.l(t,t9,"0.3em"),o=J.h(t,V),f=J.l(t,gE,"0.6em"),d=J.h(t,JD),p=J.h(t,I4);n=J.h(t,U);var v=J.h(t,xJ),_=J.h(t,X),k=J.h(t,hy),P=J.h(t,gy),L=J.h(t,mE),G=J.h(t,T);if(l(null))return null;var Z=v==null?"":qj(v);k=Kg.h(kn,Vl(hc,new R(null,7,5,S,[k,v$,null,p$,j$,i,PB],null))),i=S,t=l(P)?P:new h(null,2,[ky,jn(),ly,t],null),P=["rc-title-wrapper ",Z," ",m.g(Q(d,new R(null,2,5,S,[OD,T],null)))].join(""),v=Q(d,new R(null,2,5,S,[OD,X],null));var W=Q(d,new R(null,2,5,S,[OD,V],null)),j=S;return o=kA(eA,new h(null,3,[fA,RU,hy,k,jA,Al.j(F([new h(null,4,[Qw,lA,T,BD.K?BD.K("display-flex","rc-title",Z,G):BD.call(null,"display-flex","rc-title",Z,G),X,Al.j(F([Qn("none"),new h(null,1,[gE,f],null),new h(null,1,[vU,1],null),l(p)?null:new h(null,1,[t9,s],null),_])),dy,new R(null,1,5,S,[L],null)],null),o]))],null)),l(p)?(p=S,f=Q(d,new R(null,2,5,S,[PZ,T],null)),f=BD.h?BD.h("rc-title-underline",f):BD.call(null,"rc-title-underline",f),s=new R(null,11,5,p,[a_,U,null,kD,"1px",T,f,X,Al.j(F([new h(null,1,[t9,s],null),Q(d,new R(null,2,5,S,[PZ,X],null))])),V,Q(d,new R(null,2,5,S,[PZ,V],null))],null)):s=null,n=new h(null,7,[U,n,fA,q5,gy,t,T,P,X,v,V,W,dy,new R(null,2,5,j,[o,s],null)],null),n=k.g?k.g(n):k.call(null,n),new R(null,2,5,i,[Dt,n],null)};ED.v=0;ED.B=function(n){return this.j(w(n))};p$.Nh(null,r_,function(n){return My(F([n,new h(null,2,[j7,!1,X,new h(null,1,[OZ,50],null)],null)]))});p$.Nh(null,m6,function(n){n=M(n);var t=J.h(n,MB);return t=M(t),t=J.h(t,NB),My(F([n,new h(null,1,[X,new h(null,6,[zD,nI.g(t),lJ,"2.82843px 2.82843px 4px rgba(1,1,1,0.2)",HD,MQ.g(t),GC,Wo(474),cD,Wo(300),iD,Wo(525)],null)],null)]))});p$.Nh(null,C0,function(n){n=M(n);var t=J.h(n,MB);t=M(t);var i=J.h(t,WR);i=M(i);var s=J.h(i,uY);t=J.h(t,NB);var o=M(t);return t=J.h(o,zR),i=J.h(o,$Y),My(F([n,new h(null,4,[eD,QK,LC,fG,X,new h(null,4,[zD,function(){switch(s instanceof K?s.U:null){case"error":return FF.g(o);case"warning":return O8.g(o);default:return"#1e1e1e"}}(),GD,"#FFFFFF",nG,t,PY,i],null),qC,Wo(50)],null)]))});p$.Nh(null,p3,function(n){n=M(n);var t=J.h(n,MB);return t=M(t),t=J.h(t,NB),My(F([n,new h(null,1,[X,new h(null,4,[HD,25,GD,nI.g(t),nD,0,rC,"0px"],null)],null)]))});p$.Nh(null,V5,function(n){n=M(n);var t=J.h(n,MB);t=M(t);var i=J.h(t,WR);i=M(i);var s=J.h(i,uY),o=J.h(t,NB);return My(F([n,new h(null,1,[X,new h(null,1,[jp,function(){switch(s instanceof K?s.U:null){case"error":return FF.g(o);case"warning":return O8.g(o);default:return"#1e1e1e"}}()],null)],null)]))});p$.Nh(null,I1,function(n){n=M(n);var t=J.h(n,MB);return t=M(t),t=J.h(t,NB),My(F([n,new h(null,1,[X,new h(null,4,[R4,"monospace",RG,"pre-wrap",HD,AU,GD,BU.g(t)],null)],null)]))});p$.Nh(null,MT,function(n){n=M(n);var t=J.h(n,MB);t=M(t),t=J.h(t,NB);var i=M(t);return t=J.h(i,zR),i=J.h(i,eZ),My(F([n,new h(null,1,[X,new h(null,1,[nD,[m.g(i)," ",m.g(t)].join("")],null)],null)]))});var x_=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};x_.j=function(n){function t(j,H){return j=Se(new R(null,11,5,S,[gt,iG,j,CD,f,jG,v,kG,p,lG,q(_)],null),new h(null,1,[fx,Xx.g(j)],null)),Tf(j,Aj(O.h(i,H)))}function i(j){return Se(new R(null,17,5,S,[kt,pG,j,Vz,P,qG,d,CD,f,jG,v,kG,p,lG,q(_),rG,l(G)?E.h(z(q(_)),o.g?o.g(j):o.call(null,j)):null],null),new h(null,1,[fx,m.g(P.g?P.g(j):P.call(null,j))],null))}var s=M(n);n=J.h(s,A2);var o=J.h(s,r2),f=J.h(s,CD),d=J.h(s,qG),p=J.h(s,kG),v=J.h(s,jG),_=J.h(s,YW),k=J.h(s,U),P=J.h(s,Vz),L=J.h(s,h9),G=J.h(s,Z8),Z=Ps(n,o,P);s=I(Z,0,null),Z=I(Z,1,null);var W=!(aF.g(z(s))==null&&E.h(1,D(Z)));return new R(null,11,5,S,[So,U,k,kD,"1",T,l(f)?"bm-multi-select-list-disabled":"bm-multi-select-list",X,new h(null,3,[zD,"#fafafa",kC,"1px solid #ccc",yD,"4px"],null),ay,new R(null,3,5,S,[rQ,new h(null,1,[X,new h(null,1,[bD,"none"],null)],null),0<D(n)?W?Kg.h(fh,Aj(O.l(t,s,Z))):Aj(O.h(i,z(Z))):Ta(tb(L))?"":new R(null,2,5,S,[R8,['No results match "',m.g(L),'"'].join("")],null)],null)],null)};x_.v=0;x_.B=function(n){return this.j(w(n))};var BJ=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};BJ.j=function(n){n=M(n);var t=J.h(n,TF);if(J.l(n,yU,Df),J.h(n,U),l(null))return null;var i=fn(Dn(t)),s=fn(q(i)),o=fn(null),f=fn(null),d=fn(!1),p=fn(!1),v=fn(null),_=fn(""),k=fn(""),P=new h(null,7,[gD,"86px",qC,"24px",nD,"0px 8px 2px 8px",rC,"8px 6px",QG,"left",w4,"small-caps",HD,11],null);return function(){function L(Z){var W=null;if(0<arguments.length){W=0;for(var j=Array(arguments.length-0);W<j.length;)j[W]=arguments[W+0],++W;W=new u(j,0,null)}return G.call(this,W)}function G(Z){function W(){if(l(Yd))if(l(q(p))){var ac=iw.h(q(s),oj(O.h(Fa,jh.h(function(fc){return E.h(z(q(f)),Uh.g?Uh.g(fc):Uh.call(null,fc))},Pf))));l(l(uf)?Ve(ac):uf)?(N(s,lj([z(q(s))])),N(v,"Must have at least one")):(N(s,ac),N(p,!1),N(v,null))}else dk.l(s,ot,q(f)),N(v,null);else N(v,"Must have at least one");return l(l(sc)?fj.h(q(s),q(ud)):sc)&&(N(i,q(s)),ac=q(s),De.g?De.g(ac):De.call(null,ac)),N(f,null)}function j(){if(l(q(d))){var ac=oj(O.h(Fa,jh.h(function(fc){return E.h(z(q(o)),Uh.g?Uh.g(fc):Uh.call(null,fc))},wg)));ga!=null&&D(q(s))+D(ac)>ga?N(v,_h):(N(s,oj(fh.h(q(s),ac))),N(d,!1))}else ga!=null&&D(q(s))>=ga?N(v,_h):(dk.l(s,Qf,q(o)),N(v,null));return l(l(sc)?fj.h(q(s),q(ud)):sc)&&(N(i,q(s)),ac=q(s),De.g?De.g(ac):De.call(null,ac)),N(o,null)}Z=M(Z);var H=J.l(Z,r2,aF),me=J.h(Z,Z3),$e=J.h(Z,CD),De=J.h(Z,tF),le=J.h(Z,qC),Ce=J.h(Z,TF),Me=J.h(Z,V),_n=J.h(Z,ZP),_i=J.l(Z,qG,mE);J.h(Z,BF);var ll=J.l(Z,PQ,!1),_l=J.l(Z,yU,mf),oa=J.h(Z,bD),Ru=J.h(Z,sF),ga=J.h(Z,AZ),_s=J.h(Z,JD),Sa=J.h(Z,gD),Ra=J.h(Z,KF);J.h(Z,U);var Da=J.h(Z,hF),Fa=J.l(Z,Vz,Xx),Na=J.h(Z,$P),_a=J.h(Z,X),Pa=J.h(Z,T),qc=J.h(Z,wF);if(l(null))return null;var uf=Dn(ll);ll=Dn(qc),Ra=Dn(Ra);var _h=["Max items allowed is ",m.g(ga)].join(""),Uh=l(H)?H:C8,Kd=oj(Dn(Da));H=Dn($e),$e=Dn(Ra);var ud=fn(Dn(Ce));fj.h(q(i),q(ud))&&(N(i,q(ud)),N(s,q(ud)));var sc=l(De)?gc(H):De,Yd=function(){var ac=q(f);return l(ac)?D(q(s))>(l(uf)?1:0):ac}();Ce=l(me)?me:kn.h(m,_i),me=l($e)?Rs(Uh,Ce,q(_)):Qs(Uh,Ce,q(_));var wg=Ng.h(lh,KL.h(_l,jh.h(me,ul.h(function(ac){return lf(q(s),Fa.g?Fa.g(ac):Fa.call(null,ac))},Kd))));me=Ng.h(lh,KL.h(_l,O.h(function(ac){return xF.j(ac,Kd,F([Vz,Fa]))},q(s)))),Ce=l($e)?Rs(Uh,Ce,q(k)):Qs(Uh,Ce,q(k));var Pf=Ng.h(lh,KL.h(_l,jh.h(Ce,me)));return _l=D(iw.h(oj(O.h(Fa,Kd)),q(s))),me=D(me),new R(null,3,5,S,[dA,Al.j(F([new h(null,2,[T,BD.O?BD.O("rc-multi-select","noselect","chosen-container","chosen-container-single",Pa):BD.call(null,"rc-multi-select","noselect","chosen-container","chosen-container-single",Pa),X,Al.j(F([Qn(l(Sa)?"0 0 auto":"auto"),Xn(iC,Oo),new h(null,2,[qD,"hidden",gD,Sa],null),_a]))],null),yn(Z),Me])),new R(null,17,5,S,[Ss,U,null,T,["rc-multi-select-container ",m.g(Q(_s,new R(null,2,5,S,[LE,T],null)))].join(""),X,Q(_s,new R(null,2,5,S,[LE,X],null)),V,Q(_s,new R(null,2,5,S,[LE,V],null)),qC,le,bD,oa,tJ,"4px",dy,new R(null,3,5,S,[new R(null,15,5,S,[Dt,U,null,T,["rc-multi-select-left ",m.g(Q(_s,new R(null,2,5,S,[WD,T],null)))].join(""),X,Q(_s,new R(null,2,5,S,[WD,X],null)),V,Q(_s,new R(null,2,5,S,[WD,V],null)),kD,"50%",tJ,"4px",dy,new R(null,3,5,S,[l(_n)?typeof _n=="string"?new R(null,13,5,S,[Ss,U,null,T,["rc-multi-select-left-label-container ",m.g(Q(_s,new R(null,2,5,S,[WQ,T],null)))].join(""),X,Q(_s,new R(null,2,5,S,[WQ,X],null)),V,Q(_s,new R(null,2,5,S,[WQ,V],null)),eD,QK,dy,new R(null,2,5,S,[new R(null,3,5,S,[lA,Al.j(F([new h(null,2,[T,function(){var ac=Q(_s,new R(null,2,5,S,[ZP,T],null));return BD.h?BD.h("rc-multi-select-left-label",ac):BD.call(null,"rc-multi-select-left-label",ac)}(),X,Al.j(F([new h(null,2,[HD,"small",oI,"bold"],null),Q(_s,new R(null,2,5,S,[ZP,X],null))]))],null),Q(_s,new R(null,2,5,S,[ZP,V],null))])),_n],null),new R(null,3,5,S,[lA,Al.j(F([new h(null,2,[T,function(){var ac=Q(_s,new R(null,2,5,S,[VT,T],null));return BD.h?BD.h("rc-multi-select-left-label-item-count",ac):BD.call(null,"rc-multi-select-left-label-item-count",ac)}(),X,Al.j(F([new h(null,1,[HD,"smaller"],null),Q(_s,new R(null,2,5,S,[VT,X],null))]))],null),Q(_s,new R(null,2,5,S,[VT,V],null))])),Ta(tb(q(_)))?Gn(_l,"item"):["showing ",m.g(D(wg))," of ",m.g(_l)].join("")],null)],null)],null):_n:null,new R(null,25,5,S,[x_,U,null,T,["rc-multi-select-left-list-box ",m.g(Q(_s,new R(null,2,5,S,[iY,T],null)))].join(""),A2,wg,Vz,Fa,qG,_i,r2,Uh,CD,H,YW,o,Z8,q(d),jG,function(ac,fc){return N(o,ac),N(d,fc),N(v,null)},kG,j,h9,q(_)],null),l(ll)?new R(null,5,5,S,[rM,new R(null,5,5,S,[UD,U,null,kD,"4px"],null),new R(null,6,5,S,[Zs,_,Ru,v,H,_s],null),new R(null,5,5,S,[UD,U,null,kD,"4px"],null),Ta(tb(q(_)))?new R(null,7,5,S,[AD,U,null,mE,"document"in $a?lb():mb(),X,new h(null,1,[HD,"smaller"],null)],null):new R(null,11,5,S,[AD,U,null,T,function(){var ac=Q(_s,new R(null,2,5,S,[Z6,T],null));return BD.h?BD.h("rc-multi-select-left-filter-result-count",ac):BD.call(null,"rc-multi-select-left-filter-result-count",ac)}(),X,Al.j(F([new h(null,1,[HD,"smaller"],null),Q(_s,new R(null,2,5,S,[Z6,X],null))])),V,Q(_s,new R(null,2,5,S,[Z6,V],null)),mE,new R(null,5,5,S,[lA,"Found ",Fn(D(wg),"match",F(["matches"]))," containing ",new R(null,2,5,S,[v2,q(_)],null)],null)],null)],null):null],null)],null),new R(null,13,5,S,[Dt,U,null,T,["rc-multi-select-middle-container ",m.g(Q(_s,new R(null,2,5,S,[Q2,T],null)))].join(""),X,Q(_s,new R(null,2,5,S,[Q2,X],null)),V,Q(_s,new R(null,2,5,S,[Q2,V],null)),eD,QK,dy,new R(null,3,5,S,[new R(null,13,5,S,[So,U,null,T,function(){var ac=Q(_s,new R(null,2,5,S,[tZ,T],null));return BD.h?BD.h("rc-multi-select-middle-spacer",ac):BD.call(null,"rc-multi-select-middle-spacer",ac)}(),X,Q(_s,new R(null,2,5,S,[tZ,X],null)),V,Q(_s,new R(null,2,5,S,[tZ,V],null)),kD,"0 1 22px",ay,""],null),new R(null,13,5,S,[Dt,U,null,T,["rc-multi-select-middle ",m.g(Q(_s,new R(null,2,5,S,[KQ,T],null)))].join(""),X,Q(_s,new R(null,2,5,S,[KQ,X],null)),V,Q(_s,new R(null,2,5,S,[KQ,V],null)),eD,fG,dy,new R(null,4,5,S,[new R(null,15,5,S,[Ip,U,null,T,["rc-multi-select-include-all-button ",m.g(Q(_s,new R(null,2,5,S,[x4,T],null)))].join(""),mE,new R(null,3,5,S,[lA,new R(null,2,5,S,[$D,new h(null,1,[T,BD.l?BD.l("zmdi","zmdi-hc-fw-rc","zmdi-fast-forward"):BD.call(null,"zmdi","zmdi-hc-fw-rc","zmdi-fast-forward")],null)],null),new R(null,3,5,S,[lA,new h(null,1,[X,new h(null,2,[QD,"relative",TD,"-1px"],null)],null),[" include ",m.g(Ta(tb(q(_)))?_l:D(wg))].join("")],null)],null),CD,l(H)?H:D(wg)===0,X,Al.j(F([P,Q(_s,new R(null,2,5,S,[x4,X],null))])),V,Q(_s,new R(null,2,5,S,[x4,V],null)),KD,function(){if(ga!=null&&D(q(s))+D(wg)>ga?N(v,_h):(N(s,oj(fh.h(q(s),O.h(Fa,wg)))),N(v,null)),l(l(sc)?fj.h(q(s),q(ud)):sc)){N(i,q(s));var ac=q(s);De.g?De.g(ac):De.call(null,ac)}return N(o,null)}],null),new R(null,15,5,S,[Ip,U,null,T,["rc-multi-select-include-selected-button ",m.g(Q(_s,new R(null,2,5,S,[$6,T],null)))].join(""),mE,new R(null,3,5,S,[lA,new R(null,2,5,S,[$D,new h(null,1,[T,BD.l?BD.l("zmdi","zmdi-hc-fw-rc","zmdi-play"):BD.call(null,"zmdi","zmdi-hc-fw-rc","zmdi-play")],null)],null),new R(null,3,5,S,[lA,new h(null,1,[X,new h(null,2,[QD,"relative",TD,"-1px"],null)],null),[" include ",m.g(l(q(d))?D(jh.h(function(ac){return E.h(z(q(o)),Uh.g?Uh.g(ac):Uh.call(null,ac))},wg)):null)].join("")],null)],null),CD,l(H)?H:gc(q(o)),X,Al.j(F([P,Q(_s,new R(null,2,5,S,[$6,X],null))])),V,Q(_s,new R(null,2,5,S,[$6,V],null)),KD,j],null),new R(null,15,5,S,[Ip,U,null,T,["rc-multi-select-exclude-selected-button ",m.g(Q(_s,new R(null,2,5,S,[t8,T],null)))].join(""),mE,new R(null,3,5,S,[lA,new R(null,2,5,S,[$D,new h(null,1,[T,BD.K?BD.K("zmdi","zmdi-hc-fw-rc","zmdi-play","zmdi-hc-rotate-180"):BD.call(null,"zmdi","zmdi-hc-fw-rc","zmdi-play","zmdi-hc-rotate-180")],null)],null),new R(null,3,5,S,[lA,new h(null,1,[X,new h(null,2,[QD,"relative",TD,"-1px"],null)],null),[" exclude ",m.g(l(q(p))?D(jh.h(function(ac){return E.h(z(q(f)),Uh.g?Uh.g(ac):Uh.call(null,ac))},Pf)):null)].join("")],null)],null),CD,l(H)?H:gc(Yd),X,Al.j(F([P,Q(_s,new R(null,2,5,S,[t8,X],null))])),V,Q(_s,new R(null,2,5,S,[t8,V],null)),KD,W],null),new R(null,15,5,S,[Ip,U,null,T,["rc-multi-select-exclude-all-button ",m.g(Q(_s,new R(null,2,5,S,[R_,T],null)))].join(""),mE,new R(null,3,5,S,[lA,new R(null,2,5,S,[$D,new h(null,1,[T,BD.l?BD.l("zmdi","zmdi-hc-fw-rc","zmdi-fast-rewind"):BD.call(null,"zmdi","zmdi-hc-fw-rc","zmdi-fast-rewind")],null)],null),new R(null,3,5,S,[lA,new h(null,1,[X,new h(null,2,[QD,"relative",TD,"-1px"],null)],null),[" exclude ",m.g(Ta(tb(q(k)))?me:D(Pf))].join("")],null)],null),CD,l(H)?H:D(Pf)===0||!(D(q(s))>(l(uf)?1:0)),X,Al.j(F([P,Q(_s,new R(null,2,5,S,[R_,X],null))])),V,Q(_s,new R(null,2,5,S,[R_,V],null)),KD,function(){var ac=iw.h(q(s),oj(O.h(Fa,Pf)));return l(l(uf)?D(ac)===0:uf)?(N(s,lj([z(q(s))])),N(v,"Must have at least one")):(N(s,ac),N(v,null)),l(l(sc)?fj.h(q(s),q(ud)):sc)&&(N(i,q(s)),ac=q(s),De.g?De.g(ac):De.call(null,ac)),N(f,null)}],null)],null)],null),new R(null,7,5,S,[So,U,null,kD,["0 2 ",l(ll)?"55px":"0px"].join(""),ay,""],null)],null)],null),new R(null,15,5,S,[Dt,U,null,T,["rc-multi-select-right ",m.g(Q(_s,new R(null,2,5,S,[ku,T],null)))].join(""),kD,"50%",tJ,"4px",X,Al.j(F([new h(null,1,[QD,"relative"],null),Q(_s,new R(null,2,5,S,[ku,X],null))])),V,Q(_s,new R(null,2,5,S,[ku,V],null)),dy,new R(null,4,5,S,[Se(new R(null,11,5,S,[AD,U,null,mE,q(v),T,function(){var ac=Q(_s,new R(null,2,5,S,[J7,T],null));return BD.h?BD.h("rc-multi-select-warning-message",ac):BD.call(null,"rc-multi-select-warning-message",ac)}(),X,l(q(v))?Al.j(F([Ni([GD,zD,OZ,tP,nD,u6,ku,QD,yD,iU,qC],["white","green",1,"0","3px 6px","5000ms","0px","absolute","0px","rc-multi-select-fade-warning-msg","25px"]),Q(_s,new R(null,2,5,S,[J7,X],null))])):null,V,Q(_s,new R(null,2,5,S,[J7,V],null))],null),new h(null,1,[fx,ek("G__")],null)),l(Na)?typeof Na=="string"?new R(null,13,5,S,[Ss,U,null,T,["rc-multi-select-right-label-container ",m.g(Q(_s,new R(null,2,5,S,[T1,T],null)))].join(""),X,Q(_s,new R(null,2,5,S,[T1,X],null)),V,Q(_s,new R(null,2,5,S,[T1,V],null)),eD,QK,dy,new R(null,2,5,S,[new R(null,3,5,S,[lA,Al.j(F([new h(null,2,[T,function(){var ac=Q(_s,new R(null,2,5,S,[$P,T],null));return BD.h?BD.h("rc-multi-select-right-label",ac):BD.call(null,"rc-multi-select-right-label",ac)}(),X,Al.j(F([new h(null,2,[HD,"small",oI,"bold"],null),Q(_s,new R(null,2,5,S,[$P,X],null))]))],null),Q(_s,new R(null,2,5,S,[$P,V],null))])),Na],null),new R(null,3,5,S,[lA,Al.j(F([new h(null,2,[T,function(){var ac=Q(_s,new R(null,2,5,S,[xT,T],null));return BD.h?BD.h("rc-multi-select-right-label-item-count",ac):BD.call(null,"rc-multi-select-right-label-item-count",ac)}(),X,Al.j(F([new h(null,1,[HD,"smaller"],null),Q(_s,new R(null,2,5,S,[xT,X],null))]))],null),Q(_s,new R(null,2,5,S,[xT,V],null))])),Ta(tb(q(k)))?Gn(me,"item"):["showing ",m.g(D(Pf))," of ",m.g(me)].join("")],null)],null)],null):Na:null,new R(null,29,5,S,[x_,U,null,T,["rc-multi-select-right-list-box ",m.g(Q(_s,new R(null,2,5,S,[$8,T],null)))].join(""),X,Q(_s,new R(null,2,5,S,[$8,X],null)),V,Q(_s,new R(null,2,5,S,[$8,V],null)),A2,Pf,Vz,Fa,qG,_i,r2,Uh,CD,H,YW,f,Z8,q(p),jG,function(ac,fc){return N(f,ac),N(p,fc),N(v,null)},kG,W,h9,q(k)],null),l(ll)?new R(null,5,5,S,[rM,new R(null,5,5,S,[UD,U,null,kD,"4px"],null),new R(null,6,5,S,[Zs,k,Ru,v,H,_s],null),new R(null,5,5,S,[UD,U,null,kD,"4px"],null),Ta(tb(q(k)))?new R(null,7,5,S,[AD,U,null,mE,"document"in $a?lb():mb(),X,new h(null,1,[HD,"smaller"],null)],null):new R(null,11,5,S,[AD,U,null,mE,new R(null,5,5,S,[lA,"Found ",Fn(D(Pf),"match",F(["matches"]))," containing ",new R(null,2,5,S,[v2,q(k)],null)],null),T,function(){var ac=Q(_s,new R(null,2,5,S,[lR,T],null));return BD.h?BD.h("rc-multi-select-right-filter-result-count",ac):BD.call(null,"rc-multi-select-right-filter-result-count",ac)}(),X,Al.j(F([new h(null,1,[HD,"smaller"],null),Q(_s,new R(null,2,5,S,[lR,X],null))])),V,Q(_s,new R(null,2,5,S,[lR,V],null))],null)],null):null],null)],null)],null)],null)],null)}return L.v=0,L.B=function(Z){return Z=w(Z),G(Z)},L.j=G,L}()};BJ.v=0;BJ.B=function(n){return this.j(w(n))};var tt=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};tt.j=function(n){function t(){return l(l(s)?gc(W)&&!j:s)?s.g?s.g(p):s.call(null,p):null}n=M(n);var i=J.h(n,CD),s=J.h(n,tF),o=J.h(n,R3),f=J.h(n,TF),d=J.h(n,V),p=J.h(n,rF),v=J.h(n,JD),_=J.h(n,U),k=J.h(n,X),P=J.h(n,gy),L=J.h(n,mE),G=J.h(n,T),Z=J.h(n,vG);if(l(null))return null;f=Dn(f);var W=Dn(i),j=E.h(f,p);return new R(null,15,5,S,[Ss,U,_,gy,l(P)?P:new h(null,2,[ky,jn(),ly,n],null),T,["noselect rc-radio-button-wrapper ",m.g(Q(v,new R(null,2,5,S,[OD,T],null)))].join(""),X,Q(v,new R(null,2,5,S,[OD,X],null)),V,Q(v,new R(null,2,5,S,[OD,V],null)),LC,Oo,dy,new R(null,2,5,S,[new R(null,2,5,S,[oF,Al.j(F([new h(null,6,[T,["rc-radio-button ",m.g(G)].join(""),X,Al.j(F([Qn("none"),new h(null,1,[SD,"default"],null),k])),pF,"radio",pE,W,UU,j,tF,function(){return t(),null}],null),d]))],null),l(L)?new R(null,3,5,S,[lA,new h(null,3,[T,["rc-radio-button-label ",m.g(o)].join(""),X,Al.j(F([Qn("none"),new h(null,2,[nG,"8px",SD,"default"],null),Z])),KD,function(){return t(),null}],null),L],null):null],null)],null)};tt.v=0;tt.B=function(n){return this.j(w(n))};var y_=new h(null,2,[rD,"hidden",sD,"auto"],null),z_=new h(null,6,[$S,"0px",$4,"0px",nG,"5px",PY,"5px",gE,"5px",t9,"5px"],null),A_=new h(null,6,[nG,"0px",PY,"5px",$S,"0px",$4,"0px",gE,"0px",t9,"0px"],null),fI=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};fI.j=function(n){n=M(n);var t=J.l(n,CD,!1),i=J.h(n,tF),s=J.h(n,qC),o=J.h(n,uT),f=J.h(n,TF),d=J.h(n,V),p=J.l(n,qG,mE),v=J.l(n,PQ,!1),_=J.l(n,s1,!1),k=J.h(n,bD),P=J.l(n,W0,!1),L=J.h(n,JD),G=J.h(n,gD),Z=J.h(n,U),W=J.h(n,hF),j=J.l(n,Vz,Xx),H=J.h(n,X),me=J.h(n,gy),$e=J.h(n,T),De=J.l(n,k1,!0);if(l(null))return null;W=Dn(W),f=Dn(f);var le=Dn(i);i=Dn(De);var Ce=Dn(_),Me=Dn(v);Dn(G),Dn(s),Dn(k);var _n=Dn(t);t=Dn(P);var _i=Dn(o),ll=l(i)?f:oj(new R(null,1,5,S,[z(f)],null));return o=O.h(l(_i)?function(_l){return _i.Ra?_i.Ra(_l,j,ll,le,_n,p,Me,Ce):_i.call(null,_l,j,ll,le,_n,p,Me,Ce)}:l(i)?function(_l){return st(_l,j,ll,le,_n,p,Me,Ce,L)}:function(_l){return wt(_l,j,ll,le,_n,p,Me,Ce,L)},W),s=hj(n,new R(null,3,5,S,[gD,qC,bD],null)),v=l(t)?A_:z_,new R(null,17,5,S,[b_,U,Z,gy,l(me)?me:new h(null,2,[ky,jn(),ly,n],null),T,["rc-selection-list ",l(Dn(_n))?"rc-disabled":null,m.g($e)].join(""),X,H,V,d,jD,"4px",kC,l(t)?"none":null,ay,Ng.h(new R(null,2,5,S,[dA,Al.j(F([new h(null,2,[T,function(){var _l=Q(L,new R(null,2,5,S,[p9,T],null));return BD.K?BD.K("list-group","noselect","rc-selection-list-group",_l):BD.call(null,"list-group","noselect","rc-selection-list-group",_l)}(),X,Al.j(F([y_,s,v,Q(L,new R(null,2,5,S,[p9,X],null))]))],null),Q(L,new R(null,2,5,S,[p9,V],null))]))],null),o)],null)};fI.v=0;fI.B=function(n){return this.j(w(n))};var sN=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};sN.j=function(n){n=M(n);var t=J.h(n,CD),i=J.h(n,tF),s=J.h(n,pP),o=J.h(n,TF),f=J.h(n,V),d=J.l(n,oP,0),p=J.h(n,JD),v=J.h(n,gD),_=J.h(n,U),k=J.h(n,X),P=J.h(n,gy),L=J.h(n,T),G=J.l(n,ao,100);return l(null)?null:(o=Dn(o),d=Dn(d),G=Dn(G),s=Dn(s),t=Dn(t),new R(null,15,5,S,[So,U,_,gy,l(P)?P:new h(null,2,[ky,jn(),ly,n],null),T,["rc-slider-wrapper ",m.g(Q(p,new R(null,2,5,S,[OD,T],null)))].join(""),X,ph(p,new R(null,2,5,S,[OD,X],null),og),V,ph(p,new R(null,2,5,S,[OD,V],null),og),LC,Oo,ay,new R(null,2,5,S,[oF,Al.j(F([Ni([oP,pE,rF,pF,X,ao,T,tF,pP],[d,t,o,"range",Al.j(F([Qn("none"),new h(null,2,[gD,l(v)?v:"400px",SD,l(t)?"default":"pointer"],null),k])),G,["rc-slider ",m.g(L)].join(""),function(Z){return Z=Number(Z.target.value),i.g?i.g(Z):i.call(null,Z),null},s]),f]))],null)],null))};sN.v=0;sN.B=function(n){return this.j(w(n))};j$.Nh(null,vW,function(n){return ov.K(n,X,Al,new h(null,3,[RG,UW,qD,e5,PG,wZ],null))});p$.Nh(null,j6,function(n){n=M(n);var t=J.h(n,MB);t=M(t),t=J.h(t,NB);var i=J.h(n,UE);return Hy(n,new h(null,4,[nD,"0 0 0 0",qD,"hidden",GD,YQ.g(t),SD,E.h(hX.g(i),pE)?"default":"pointer"],null))});p$.Nh(null,R7,function(n){n=M(n);var t=J.h(n,MB);return t=M(t),t=J.h(t,NB),My(F([n,new h(null,2,[LC,fG,X,new h(null,2,[tJ,"5px",GD,j1.g(t)],null)],null)]))});p$.Nh(null,h1,function(n){n=M(n);var t=J.h(n,MB);return t=M(t),t=J.h(t,NB),My(F([n,new h(null,2,[LC,fG,X,new h(null,2,[tJ,"5px",GD,YQ.g(t)],null)],null)]))});p$.Nh(null,Y5,function(n){return Hy(n,new h(null,1,[X,new h(null,1,[tP,"50%"],null)],null))});kn.h(new jj(null,new h(null,1,[aF,null],null),null),pF);kn.j(function(n){return String(n.charAt(0)).toUpperCase()+String(n.slice(1)).toLowerCase()},qj,Le,F([aF]));zt.prototype.sg=function(n,t){var i=this;return gc(this.Hc)&&gc(this.Jc)&&(this.Hc=xt("mousemove",function(s){var o=s.clientX,f=s.clientY,d=o-i.x,p=f-i.y,v=s.ctrlKey,_=s.shiftKey;return i.wf.Wa?i.wf.Wa(d,p,o,f,v,_,s):i.wf.call(null,d,p,o,f,v,_,s),i.x=o,i.y=f,s.preventDefault()}),this.Jc=xt("mouseup",function(s){if(l(i.Hc)&&(i.Hc.G?i.Hc.G():i.Hc.call(null),i.Hc=null),l(i.Jc)&&(i.Jc.G?i.Jc.G():i.Jc.call(null),i.Jc=null),l(i.re)){i.re=!1,i.x=null,i.y=null;var o=s.ctrlKey,f=s.shiftKey;s=i.xf.l?i.xf.l(o,f,s):i.xf.call(null,o,f,s)}else s=null;return s})),l(this.re)?null:(this.re=!0,this.x=t.clientX,this.y=t.clientY)};var Bt=jm(Wo),B_=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};B_.j=function(n){function t(H){var me=H.target;me=me==null?og:me.getBoundingClientRect();var $e=(_?H.clientX-me.left:H.clientY-me.top)<=w5.g(q(j))?hK:gK,De=w5.g(q(j))+function(){var le=GS.g(q(j))/xV.g(q(j));return $e.g?$e.g(le):$e.call(null,le)}();return H=function(){var le=g5.g(q(j)),Ce=GS.g(q(j));return $e.h?$e.h(le,Ce):$e.call(null,le,Ce)}(),me=0>=De,De=De>=g8.g(q(j)),me?v.g?v.g(0):v.call(null,0):(De&&(H=Math.round(g8.g(q(j))*p2.g(q(j)))),v.g?v.g(H):v.call(null,H))}function i(){return N(P,!1),null}function s(){return N(P,!0),null}function o(){return N(L,!1),N(W,null)}function f(H,me,$e,De){return $e=(_?$e:De)-q(G)-q(Z),H=0>=$e,me=$e>=g8.g(q(j)),$e=Math.round($e*p2.g(q(j))),H?v.g?v.g(0):v.call(null,0):me?(H=Math.round(g8.g(q(j))*p2.g(q(j))),v.g?v.g(H):v.call(null,H)):v.g?v.g($e):v.call(null,$e)}n=M(n);var d=J.h(n,pF),p=J.l(n,gD,10),v=J.h(n,tF),_=E.h(d,w8),k=Bt(p/2),P=fn(!1),L=fn(!1),G=fn(0),Z=fn(0),W=Tg(null),j=Tg(og);return function(){function H($e){var De=null;if(0<arguments.length){De=0;for(var le=Array(arguments.length-0);De<le.length;)le[De]=arguments[De+0],++De;De=new u(le,0,null)}return me.call(this,De)}function me($e){var De=M($e),le=J.h(De,GS),Ce=J.l(De,gD,10),Me=J.h(De,pY);$e=J.h(De,g5);var _n=J.h(De,X);De=J.h(De,U);var _i=Me/le,ll=function(){var ga=1.5*Ce,_s=le/_i;return ga>_s?ga:_s}(),_l=Me>le,oa=le-ll;Me=(Me-le)/oa;var Ru=$e/Me;return N(j,new h(null,7,[GS,le,g5,$e,xV,_i,v3,ll,g8,oa,p2,Me,w5,Ru],null)),new R(null,15,5,S,[So,U,De,gD,_?l(le)?Bt(le):null:Bt(Ce),qC,_?Bt(Ce):l(le)?Bt(le):null,T,[_?"horizontal":"vertical","-scrollbar"].join(""),X,Al.j(F([new h(null,3,[zD,_l?l(function(){var ga=q(P);return l(ga)?ga:q(L)}())?"#ccc":"#eee":null,yD,k,qD,"hidden"],null),_n])),V,new h(null,3,[YD,s,ZD,i,mF,function(ga){return _l&&t(ga),null}],null),ay,new R(null,13,5,S,[So,U,null,gD,Bt(_?_l?ll:0:Ce),qC,Bt(_?Ce:_l?ll:0),X,ng([zD,l(function(){var ga=q(P);return l(ga)?ga:q(L)}())?l(q(L))?"#777":"#999":"#bbb",SD,"default",yD,k,_?hE:gE,Bt(Ru)]),V,new h(null,1,[mF,function(ga){var _s=ga.target.parentNode;return _s=_s==null?og:_s.getBoundingClientRect(),N(G,_?_s.left:_s.top),N(Z,_?ga.clientX-q(G)-Ru:ga.clientY-q(G)-Ru),N(W,new zt(f,o)),yt(q(W),ga),N(L,!0),ga.stopPropagation(),null}],null),ay,""],null)],null)}return H.v=0,H.B=function($e){return $e=w($e),me($e)},H.j=me,H}()};B_.v=0;B_.B=function(n){return this.j(w(n))};var C_=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};C_.j=function(n){function t(ac,fc,nd,a0){l(!1)&&N(_h,null),l(!1)&&N(Uh,a0);var _1=s();return ac.O?ac.O(wS,_1,fc,nd,a0):ac.call(null,wS,_1,fc,nd,a0),N(Yd,!1),N(wg,!1),N(Na,null),N(Fa,null)}function i(ac,fc,nd,a0,_1,_$,$b,Z_){fc=q(Na).top,nd=q(Na).left;var _b=q(Na).bottom,cb=q(Na).right,ib=l(function(){var Nb=q(wg);return l(Nb)?fj.h(q(Kd),zG):Nb}())?_1<fc?_1-fc:_1>_b?_1-_b:0:0,_2=l(function(){var Nb=q(wg);return l(Nb)?fj.h(q(Kd),yG):Nb}())?a0<nd?a0-nd:a0>cb?a0-cb:0:0;return N(qc,a0+-nd+q(Z)),N(uf,_1+-fc+q(W)),N(Z,function(){var Nb=q(ll),_D=q(Z)+_2;return Nb=Nb<_D?Nb:_D,0>Nb?0:Nb}()),N(W,function(){var Nb=q(_l),_D=q(W)+ib;return Nb=Nb<_D?Nb:_D,0>Nb?0:Nb}()),l(!1)&&N(Uh,Z_),a0=s(),ac.O?ac.O(iW,a0,_$,$b,Z_):ac.call(null,iW,a0,_$,$b,Z_)}function s(){if(l(q(Na))){var ac=q(uf)>q(Pa),fc=q(qc)>q(_a),nd=fj.h(q(Kd),zG),a0=q(ac?Pa:uf),_1=q(ac?uf:Pa),_$=q(fc?_a:qc),$b=q(fc?qc:_a);return ac=function(){var Z_=q(ud);return Z_=Z_<a0?Z_:a0,0>Z_?0:Z_}(),fc=function(){var Z_=q(ud);return Z_=Z_<_1?Z_:_1,0>Z_?0:Z_}(),nd=new h(null,4,[S3,nd?ac/k|0:ac,d6,nd?fc/k|0:fc,io,function(){var Z_=q(sc);return Z_=Z_<_$?Z_:_$,0>Z_?0:Z_}(),B1,function(){var Z_=q(sc);return Z_=Z_<$b?Z_:$b,0>Z_?0:Z_}()],null),l(!1)&&N(_h,nd),nd}return og}function o(ac){var fc=ac.deltaX,nd=ac.deltaY;return N(Z,function(){var a0=q(ll),_1=q(Z)+fc;return a0=a0<_1?a0:_1,0>a0?0:a0}()),N(W,function(){var a0=q(_l),_1=q(W)+nd;return a0=a0<_1?a0:_1,0>a0?0:a0}())}function f(ac){return ac=ac.target,ac=ac==null?og:ac.getBoundingClientRect(),N(De,l(P)?P:ac.width),N(le,l(L)?L:ac.height),N(Z,function(){var fc=q(ll),nd=q(Z);return fc=fc<nd?fc:nd,0>fc?0:fc}()),N(W,function(){var fc=q(_l),nd=q(W);return fc=fc<nd?fc:nd,0>fc?0:fc}())}function d(ac){return N(W,ac)}function p(ac){return N(Z,ac)}n=M(n);var v=J.h(n,TF),_=J.l(n,x6,!0),k=J.h(n,YG),P=J.h(n,O1),L=J.h(n,q3),G=J.h(n,HS);if(J.h(n,U),l(null))return null;var Z=fn(0),W=fn(0),j=fn(0),H=fn(0),me=ek("row-viewport-"),$e=fn(null),De=fn(0),le=fn(function(){var ac=k*D(q(v));return ac<G?ac:G}()),Ce=fn(null),Me=fn(null),_n=Kl(function(){return D(q(v))}),_i=Kl(function(){return Math.round(q(le)/k)}),ll=Kl(function(){return q(j)-q(De)}),_l=Kl(function(){return q(H)-q(le)}),oa=Kl(function(){return q(W)/k|0}),Ru=Kl(function(){var ac=q(oa)+(q(_i)-1),fc=q(_n);return ac<fc?ac:fc}),ga=Kl(function(){return If(q(W),k)}),_s=fn(null),Sa=Kl(function(){var ac=q(_s);if(l(ac)){var fc=q(v);ac=ac.g?ac.g(fc):ac.call(null,fc),ac=Gh(ac)}else ac=q(v);return ac}),Ra=Kl(function(){return 0<q(_n)?Um.l(q(Sa),function(){var ac=q(oa),fc=q(_n);return ac<fc?ac:fc}(),function(){var ac=q(oa)+q(_i)+2,fc=q(_n);return ac<fc?ac:fc}()):null}),Da=Kl(function(){return l(_)?q(Ra):q(Sa)}),Fa=Tg(null),Na=fn(null),_a=fn(0),Pa=fn(0),qc=fn(0),uf=fn(0),_h=fn(null),Uh=fn(null),Kd=fn(null),ud=fn(0),sc=fn(0),Yd=fn(!1),wg=fn(!1),Pf=new R(null,4,5,S,[function(ac,fc,nd){var a0=q(uf)>q(Pa),_1=q(qc)>q(_a),_$=_1?q(qc)-q(_a):q(_a)-q(qc),$b=a0?q(uf)-q(Pa):q(Pa)-q(uf);return a0=a0?q(Pa)-q(W):q(Pa)-q(W)-$b,_1=_1?q(_a)-q(Z):q(_a)-q(Z)-_$,new R(null,3,5,S,[dA,Al.j(F([new h(null,2,[T,BD.h?BD.h("rc-v-table-selection",ac):BD.call(null,"rc-v-table-selection",ac),X,Al.j(F([new h(null,8,[QD,"absolute",OZ,1,TD,Bt(a0),WD,Bt(_1),gD,Bt(_$),qC,Bt($b),zD,"rgba(0,0,255,0.1)",kC,"1px solid rgba(0,0,255,0.4)"],null),fc]))],null),nd])),""],null)},function(ac,fc,nd,a0,_1){return N(Kd,ac),N(ud,nd-1),N(sc,a0-1),N(Na,_1.currentTarget.getBoundingClientRect()),ac=-q(Na).top,nd=-q(Na).left,N(_a,_1.clientX+nd+q(Z)),N(Pa,_1.clientY+ac+q(W)),N(qc,q(_a)),N(uf,q(Pa)),l(!1)&&N(Uh,_1),ac=s(),nd=_1.ctrlKey,a0=_1.shiftKey,fc.O?fc.O(GQ,ac,nd,a0,_1):fc.call(null,GQ,ac,nd,a0,_1),ac=Pk.h(i,fc),fc=Pk.h(t,fc),N(Fa,new zt(ac,fc)),yt(q(Fa),_1),N(Yd,!0),N(wg,!1)},function(ac){var fc=q(Yd);return ac=l(fc)?E.h(q(Kd),ac):fc,l(ac)?N(wg,!1):null},function(ac){var fc=q(Yd);return ac=l(fc)?E.h(q(Kd),ac):fc,l(ac)?N(wg,!0):null}],null);return gc(function(){var ac=window.hasOwnProperty("addResizeListener");return l(ac)?ac:window.hasOwnProperty("removeResizeListener")}())?console.error(`Your project is missing detect-element-resize.js or detect-element-resize-externs.js
         could not setup v-table. See https://re-com.day8.com.au/#/v-table requirements`):vm(new h(null,5,[kF,"v-table",iF,function(){return N($e,document.getElementById(me)),window.addResizeListener(q($e),f)},jF,function(ac,fc){fc=w(fc),z(fc),fc=C(fc);var nd=M(fc);fc=J.h(nd,n8),nd=J.h(nd,UY),ac=$l(ac,ac.props),ac=w(ac),z(ac),ac=C(ac);var a0=M(ac);return ac=J.h(a0,n8),a0=J.h(a0,UY),fj.h(fc,ac)||fj.h(a0,nd)?l(l(ac)?a0:ac)?N(_s,Pk.h(ac,a0)):l(ac)?N(_s,Pk.h(KL,ac)):l(a0)?N(_s,Pk.h(pQ,a0)):null:null},XN,function(){return window.removeResizeListener(q($e),f),N($e,null)},Wx,function(){function ac(nd){var a0=null;if(0<arguments.length){a0=0;for(var _1=Array(arguments.length-0);a0<_1.length;)_1[a0]=arguments[a0+0],++a0;a0=new u(_1,0,null)}return fc.call(this,a0)}function fc(nd){nd=M(nd);var a0=J.h(nd,c7),_1=J.h(nd,cW),_$=J.h(nd,lS),$b=J.h(nd,HS),Z_=J.h(nd,E6),_b=J.l(nd,x6,!0);J.l(nd,yU,null);var cb=J.h(nd,hY),ib=J.h(nd,fT),_2=J.h(nd,U4),Nb=J.h(nd,O1),_D=J.l(nd,e7,!0),ec=J.h(nd,g2),Jc=J.h(nd,SW),ih=J.h(nd,qS),Bd=J.h(nd,JD);J.h(nd,UY);var xg=J.h(nd,YG),hb=J.h(nd,iD),_S=J.h(nd,U),rc=J.h(nd,v5),e0=J.h(nd,rS),b0=J.h(nd,QT),nb=J.l(nd,cH,null),vf=J.h(nd,i9),c0=J.h(nd,gy),Ba=J.h(nd,F7),$_=J.h(nd,T),_A=J.h(nd,q3),ka=J.h(nd,L2);J.h(nd,n8);var Pp=J.h(nd,P3);if(l(null))return null;if(N(j,e0),N(H,q(_n)*xg),fj.h(Dn(ec),q(Ce))){e0=Dn(ec);var _0=M(e0);e0=J.h(_0,S3),_0=J.h(_0,d6);var Oc=e0==null&&_0==null?null:e0<=q(oa)?e0*xg:_0>=q(Ru)?_0*xg+xg+-q(le):null;Oc!=null&&N(W,function(){var _p=q(_l);return _p=_p<Oc?_p:Oc,0>_p?0:_p}()),N(Ce,Dn(ec))}if(fj.h(Dn(Ba),q(Me))){ec=Dn(Ba),xg=M(ec),ec=J.h(xg,io),xg=J.h(xg,B1),e0=q(Z),_0=q(Z)+q(De)+-1;var zg=ec<e0?ec:xg>_0?xg-q(De):null;zg!=null&&N(Z,function(){var _p=q(ll);return _p=_p<zg?_p:zg,0>_p?0:_p}()),N(Me,Dn(Ba))}return q(W)>q(_l)&&N(W,function(){var _p=q(_l),_O=q(W);return _p=_p<_O?_p:_O,0>_p?0:_p}()),new R(null,15,5,S,[Ss,U,_S,gy,l(c0)?c0:new h(null,2,[ky,jn(),ly,nd],null),T,["rc-v-table ",m.g($_)," ",m.g(Q(Bd,new R(null,2,5,S,[OD,T],null)))].join(""),X,Al.j(F([new h(null,2,[iD,hb,bD,l(_D)?(l(vf)?vf:0)+(l($b)?$b:q(H)+1)+(l(b0)?b0:0)+14:null],null),Q(Bd,new R(null,2,5,S,[OD,X],null))])),V,Al.j(F([new h(null,1,[a2,function(_p){return o(_p),null}],null),Q(Bd,new R(null,2,5,S,[OD,V],null))])),kD,"auto",dy,new R(null,4,5,S,[new R(null,11,5,S,[Dt,U,null,T,["rc-v-table-left-section ",m.g(Q(Bd,new R(null,2,5,S,[T3,T],null)))].join(""),X,Q(Bd,new R(null,2,5,S,[T3,X],null)),V,Q(Bd,new R(null,2,5,S,[T3,V],null)),dy,new R(null,4,5,S,[new R(null,6,5,S,[Ct,cb,vf,Q(Bd,new R(null,2,5,S,[TW,T],null)),Q(Bd,new R(null,2,5,S,[TW,X],null)),Q(Bd,new R(null,2,5,S,[TW,V],null))],null),new R(null,20,5,S,[Gt,_2,nb,q(oa),q(Da),l(_b)?q(ga):q(W),Pp,Pf,function(){if(l(Pp)){var _p=q(Na);return l(_p)?E.h(q(Kd),yG):_p}return Pp}(),_A,q(H),Q(Bd,new R(null,2,5,S,[ZS,T],null)),Q(Bd,new R(null,2,5,S,[ZS,X],null)),Q(Bd,new R(null,2,5,S,[ZS,V],null)),Q(Bd,new R(null,2,5,S,[VX,T],null)),Q(Bd,new R(null,2,5,S,[VX,X],null)),Q(Bd,new R(null,2,5,S,[VX,V],null)),Q(Bd,new R(null,2,5,S,[$R,T],null)),Q(Bd,new R(null,2,5,S,[$R,X],null)),Q(Bd,new R(null,2,5,S,[$R,V],null))],null),new R(null,6,5,S,[Ht,a0,b0,Q(Bd,new R(null,2,5,S,[kZ,T],null)),Q(Bd,new R(null,2,5,S,[kZ,X],null)),Q(Bd,new R(null,2,5,S,[kZ,V],null))],null),new R(null,5,5,S,[UD,U,null,kD,Bt(14)],null)],null)],null),new R(null,13,5,S,[Dt,U,null,T,["rc-v-table-middle-section ",m.g(Q(Bd,new R(null,2,5,S,[WV,T],null)))].join(""),X,Al.j(F([new h(null,1,[iD,Bt(q(j))],null),Q(Bd,new R(null,2,5,S,[WV,X],null))])),V,Q(Bd,new R(null,2,5,S,[WV,V],null)),kD,l(Nb)?"none":"auto",dy,new R(null,4,5,S,[new R(null,18,5,S,[Kt,ka,q(Z),ih,Pf,function(){if(l(ih)){var _p=q(Na);return l(_p)?E.h(q(Kd),zG):_p}return ih}(),Nb,vf,q(j),Q(Bd,new R(null,2,5,S,[KW,T],null)),Q(Bd,new R(null,2,5,S,[KW,X],null)),Q(Bd,new R(null,2,5,S,[KW,V],null)),Q(Bd,new R(null,2,5,S,[I2,T],null)),Q(Bd,new R(null,2,5,S,[I2,X],null)),Q(Bd,new R(null,2,5,S,[I2,V],null)),Q(Bd,new R(null,2,5,S,[W7,T],null)),Q(Bd,new R(null,2,5,S,[W7,X],null)),Q(Bd,new R(null,2,5,S,[W7,V],null))],null),new R(null,24,5,S,[Nt,Z_,nb,q(oa),q(Da),q(Z),l(_b)?q(ga):q(W),Jc,Pf,function(){if(l(Jc)){var _p=q(Na);return l(_p)?E.h(q(Kd),AG):_p}return Jc}(),_A,Nb,me,q(H),q(j),Q(Bd,new R(null,2,5,S,[QW,T],null)),Q(Bd,new R(null,2,5,S,[QW,X],null)),Q(Bd,new R(null,2,5,S,[QW,V],null)),Q(Bd,new R(null,2,5,S,[J6,T],null)),Q(Bd,new R(null,2,5,S,[J6,X],null)),Q(Bd,new R(null,2,5,S,[J6,V],null)),Q(Bd,new R(null,2,5,S,[j5,T],null)),Q(Bd,new R(null,2,5,S,[j5,X],null)),Q(Bd,new R(null,2,5,S,[j5,V],null))],null),new R(null,11,5,S,[Pt,ib,q(Z),Nb,b0,Q(Bd,new R(null,2,5,S,[Z1,T],null)),Q(Bd,new R(null,2,5,S,[Z1,X],null)),Q(Bd,new R(null,2,5,S,[Z1,V],null)),Q(Bd,new R(null,2,5,S,[e2,T],null)),Q(Bd,new R(null,2,5,S,[e2,X],null)),Q(Bd,new R(null,2,5,S,[e2,V],null))],null),new R(null,21,5,S,[B_,U,null,T,["rc-v-table-h-scroll ",m.g(Q(Bd,new R(null,2,5,S,[fD,T],null)))].join(""),pF,w8,GS,q(De),gD,10,pY,q(j),g5,q(Z),tF,p,X,Al.j(F([new h(null,1,[rC,En(F([2,0]))],null),Q(Bd,new R(null,2,5,S,[fD,X],null))])),V,Q(Bd,new R(null,2,5,S,[fD,V],null))],null)],null)],null),new R(null,11,5,S,[Dt,U,null,T,["rc-v-table-right-section ",m.g(Q(Bd,new R(null,2,5,S,[b5,T],null)))].join(""),X,Q(Bd,new R(null,2,5,S,[b5,X],null)),V,Q(Bd,new R(null,2,5,S,[b5,V],null)),dy,new R(null,4,5,S,[new R(null,6,5,S,[Qt,rc,vf,Q(Bd,new R(null,2,5,S,[x2,T],null)),Q(Bd,new R(null,2,5,S,[x2,X],null)),Q(Bd,new R(null,2,5,S,[x2,V],null))],null),new R(null,14,5,S,[St,_1,nb,q(oa),q(Da),l(_b)?q(ga):q(W),_A,q(H),Q(Bd,new R(null,2,5,S,[u_,T],null)),Q(Bd,new R(null,2,5,S,[u_,X],null)),Q(Bd,new R(null,2,5,S,[u_,V],null)),Q(Bd,new R(null,2,5,S,[U7,T],null)),Q(Bd,new R(null,2,5,S,[U7,X],null)),Q(Bd,new R(null,2,5,S,[U7,V],null))],null),new R(null,6,5,S,[Tt,_$,b0,Q(Bd,new R(null,2,5,S,[bS,T],null)),Q(Bd,new R(null,2,5,S,[bS,X],null)),Q(Bd,new R(null,2,5,S,[bS,V],null))],null),new R(null,5,5,S,[UD,U,null,kD,Bt(14)],null)],null)],null),new R(null,11,5,S,[Dt,U,null,T,["rc-v-table-v-scroll-section ",m.g(Q(Bd,new R(null,2,5,S,[o6,T],null)))].join(""),X,Q(Bd,new R(null,2,5,S,[o6,X],null)),V,Q(Bd,new R(null,2,5,S,[o6,V],null)),dy,new R(null,4,5,S,[new R(null,5,5,S,[UD,U,null,kD,Bt(l(vf)?vf:0)],null),new R(null,7,5,S,[So,U,null,kD,"auto",ay,new R(null,21,5,S,[B_,U,null,T,["rc-v-table-v-scroll ",m.g(Q(Bd,new R(null,2,5,S,[pC,T],null)))].join(""),pF,W1,GS,q(le),gD,10,pY,q(H),g5,q(W),tF,d,X,Al.j(F([new h(null,1,[rC,En(F([0,2]))],null),Q(Bd,new R(null,2,5,S,[pC,X],null))])),V,Q(Bd,new R(null,2,5,S,[pC,V],null))],null)],null),new R(null,5,5,S,[UD,U,null,kD,Bt(l(b0)?b0:0)],null),new R(null,5,5,S,[UD,U,null,kD,Bt(14)],null)],null)],null)],null)],null)}return ac.v=0,ac.B=function(nd){return nd=w(nd),fc(nd)},ac.j=fc,ac}()],null),Jq)};C_.v=0;C_.B=function(n){return this.j(w(n))};var BG=new h(null,2,[D6,mE,CG,HG],null),C$=new h(null,3,[WD,Oo,ku,To,fG,fG],null),pu=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};pu.j=function(){return function(n){function t(W){return W=W.shiftKey,W=l(W)?W:Ve(ul.h(kn.h(lj([o]),Xx),q(k))),l(W)?dk.l(k,JG,Al.j(F([G,L]))):N(k,new R(null,1,5,S,[Al.j(F([G,L]))],null))}var i=M(n);n=J.h(i,uv);var s=M(n),o=J.h(s,Xx),f=J.h(s,NG);n=J.h(s,gD);var d=J.h(s,qC),p=J.h(s,LC),v=J.h(s,DJ),_=J.h(s,hR);s=J.h(i,JD);var k=J.h(i,TQ),P=J.h(i,y4);J.h(i,i9);var L=_===!0?og:_,G=new h(null,4,[cH,f,CU,mf,Xx,o,CG,HG],null);i=bz(o,q(k)),f=xF(o,q(k)),f=M(f);var Z=J.h(f,CG);return p=J.l(C$,Nj.g(p),Oo),f=1<D(q(k)),new R(null,3,5,S,[Dt,dy,new R(null,1,5,S,[new R(null,15,5,S,[Ss,T,["rc-simple-v-table-column-header-item ",m.g(Q(s,new R(null,2,5,S,[$3,T],null)))].join(""),gD,Wo(n),eD,p,LC,fG,X,Al.j(F([new h(null,7,[nD,"0px 12px",cD,"24px",qC,Wo(d),oI,"bold",RG,"nowrap",qD,"hidden",PG,"ellipsis"],null),l(L)?new h(null,1,[SD,"pointer"],null):null,Q(s,new R(null,2,5,S,[$3,X],null))])),V,Al.j(F([l(L)?new h(null,1,[KD,t],null):null,Q(s,new R(null,2,5,S,[$3,V],null))])),dy,new R(null,2,5,S,[v,l(L)?new R(null,11,5,S,[Ss,GC,"35px",eD,fG,X,new h(null,1,[tP,.5],null),LC,fG,dy,gc(function(){var W=q(P);return l(W)?W:Z}())?lh:new R(null,2,5,S,[new R(null,2,5,S,[function(){switch(Z instanceof K?Z.U:null){case"asc":return eu;case"desc":return du;default:return cu}}(),new h(null,2,[kD,l(d)?d:"16px",jp,"#777"],null)],null),l(i)?new R(null,5,5,S,[AD,X,new h(null,1,[XS,f?null:"hidden"],null),mE,i+1],null):null],null)],null):null],null)],null)],null)],null)}};pu.v=0;pu.B=function(n){return this.j(w(n))};var D$=Ni([W6,YG,$G,IZ,i9,D2,zT,L2,YR,CT],[!1,31,"#EAEEF1",19,31,0,"#BBBEC0",function(n){n=M(n);var t=J.h(n,WG),i=J.h(n,JD),s=J.h(n,TQ),o=J.h(n,i9),f=J.h(n,y4);return new R(null,9,5,S,[Ss,T,["rc-simple-v-table-column-header noselect ",m.g(Q(i,new R(null,2,5,S,[j8,T],null)))].join(""),X,Al.j(F([new h(null,3,[nD,"4px 0px",qD,"hidden",RG,"nowrap"],null),Q(i,new R(null,2,5,S,[j8,X],null))])),V,Al.j(F([new h(null,3,[YD,l(f)?function(){return N(f,!0),null}:null,ZD,l(f)?function(){return N(f,!1),null}:null,KD,function(d){return At(t,0,d),null}],null),Q(i,new R(null,2,5,S,[j8,V],null))])),dy,Ng.h(lh,function(){return function d(p){return new Yf(null,function(){for(;;){var v=w(p);if(v){if(df(v)){var _=Fd(v),k=D(_),P=ag(k);e:for(var L=0;;)if(L<k){var G=Oe(_,L);P.add(new R(null,2,5,S,[pu,new h(null,5,[i9,o,uv,G,JD,i,TQ,s,y4,f],null)],null)),L+=1}else{_=!0;break e}return _?dg(P.fa(),d(Gd(v))):dg(P.fa(),null)}return P=z(v),Tf(new R(null,2,5,S,[pu,new h(null,5,[i9,o,uv,P,JD,i,TQ,s,y4,f],null)],null),d(he(v)))}return null}},null,null)}(t)}())],null)},function(n){var t=M(n);n=J.h(t,WG);var i=J.h(t,QW);return t=J.h(t,CT),new R(null,11,5,S,[KE,U,null,wE,"zmdi zmdi-copy",JE,!0,DD,["Copy ",m.g(D(i))," rows, ",m.g(D(n))," columns to clipboard."].join(""),KD,t],null)},function(n){n=M(n);var t=J.h(n,WG);n=J.h(n,QW),t=ul.h(kn.h(mh,A8),t);var i=cl(IY,DJ,kn.h(qj,Xx)),s=Kg.h(XH,O.h(cl(iX,NG,Xx),t));return n=Kg.h(m,O.h(cA,Tf(O.h(i,t),O.h(s,n)))),navigator.clipboard.writeText(n)}]),LD=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};LD.j=function(n){if(n=M(n),J.h(n,U),l(null))return null;var t=fn(null),i=fn(null);return function(){function s(f){var d=null;if(0<arguments.length){d=0;for(var p=Array(arguments.length-0);d<p.length;)p[d]=arguments[d+0],++d;d=new u(p,0,null)}return o.call(this,d)}function o(f){if(f=M(f),l(null))return null;f=Al.j(F([D$,f]));var d=M(f),p=J.h(d,YR);J.h(d,TG);var v=J.h(d,TF),_=J.h(d,CT);J.h(d,UG);var k=J.h(d,WG);f=J.h(d,W6);var P=J.h(d,JD);J.h(d,XG);var L=J.h(d,YG),G=J.h(d,iD),Z=J.h(d,U);J.h(d,ZG);var W=J.h(d,$G),j=J.h(d,IZ),H=J.h(d,i9),me=J.h(d,gy),$e=J.h(d,wV);J.h(d,aH);var De=J.h(d,T),le=J.h(d,zT),Ce=J.h(d,L2),Me=J.h(d,D2),_n=function(){var Ru=D(k);return Me<Ru?Me:Ru}(),_i=Um.l(k,0,_n),ll=Um.l(k,_n,D(k)),_l=nc(gK,0,O.h(function(Ru){return gD.h(Ru,25)},_i));_n=nc(gK,0,O.h(function(Ru){return gD.h(Ru,25)},ll)),W=["1px solid ",m.g(W)].join("");var oa=["1px solid ",m.g(le)].join("");return le=_l+(0<Me?1:null)+_n+14+2*j+2,new R(null,13,5,S,[So,U,Z,gy,l(me)?me:new h(null,2,[ky,jn(),ly,d],null),T,["rc-simple-v-table-wrapper ",m.g(Q(P,new R(null,2,5,S,[i3,T],null)))].join(""),X,Al.j(F([new h(null,6,[RB,l($e)?"0 1 auto":"100%",zD,"white",nD,Wo(j),iD,l(G)?G:Wo(le),kC,W,yD,"3px"],null),Q(P,new R(null,2,5,S,[i3,X],null))])),V,Q(P,new R(null,2,5,S,[i3,V],null)),ay,new R(null,29,5,S,[C_,U,null,TF,v,UY,fH(Uy(q(t))),L2,function(){return new R(null,2,5,S,[Ce,Ng.h(d,new h(null,3,[WG,ll,y4,i,TQ,t],null))],null)},i9,H,U4,function(){return function(Ru,ga){return new R(null,2,5,S,[vu,Ng.h(d,new h(null,3,[WG,_i,AG,ga,VG,Ru],null))],null)}},E6,function(){return function(Ru,ga){return new R(null,2,5,S,[vu,Ng.h(d,new h(null,3,[WG,ll,AG,ga,VG,Ru],null))],null)}},rS,_n,YG,L,HS,l($e)?$e*L:null,hY,function(){return new R(null,2,5,S,[Ce,new h(null,4,[WG,_i,y4,i,JD,P,TQ,t],null)],null)},v5,l(f)?function(){var Ru=Dn(v),ga=Dn(k),_s=Dn(t);return new R(null,2,5,S,[p,new h(null,3,[QW,Ru,WG,ga,CT,function(){var Sa=new h(null,2,[WG,ga,QW,l(_s)?pQ.h(fH(Uy(_s)),Ru):Ru],null);return _.g?_.g(Sa):_.call(null,Sa)}],null)],null)}:null,T,De,JD,function(){var Ru=new h(null,1,[OD,new h(null,1,[X,new h(null,2,[HD,"13px",SD,"default"],null)],null)],null);if(0<Me){var ga=new h(null,2,[TW,new h(null,1,[X,new h(null,1,[vD,oa],null)],null),ZS,new h(null,1,[X,new h(null,1,[vD,oa],null)],null)],null);Ru=Ny.h?Ny.h(Ru,ga):Ny.call(null,Ru,ga)}return ga=Kg.l(wl,P,null),Ny.h?Ny.h(Ru,ga):Ny.call(null,Ru,ga)}()],null)],null)}return s.v=0,s.B=function(f){return f=w(f),o(f)},s.j=o,s}()};LD.v=0;LD.B=function(n){return this.j(w(n))};var E$=new h(null,3,[F4,"none",qD,"hidden",QD,"relative"],null);j$.Nh(null,f2,function(n){return ov.K(n,X,Al,E$)});var F$=new h(null,2,[F4,"none",qC,"100%"],null);j$.Nh(null,D0,function(n){return ov.K(n,X,Al,F$)});j$.Nh(null,U1,function(n){return ov.K(n,X,Al,new h(null,3,[F4,"none",gD,"100%",qC,"100%"],null))});p$.Nh(null,U1,function(n){n=M(n);var t=J.h(n,MB);t=M(t),t=J.h(t,NB);var i=M(t);t=J.h(i,eZ);var s=J.h(i,fZ),o=J.h(i,tU),f=J.h(i,d1);i=J.h(i,kC);var d=J.h(n,lT),p=M(d);d=J.h(p,i5);var v=J.h(p,f8);return p=J.h(p,LC),ov.K(n,X,Al,Ni([PG,vD,GD,QG,RG,HD,qD,zD,PY,$S,nG,wD,xD],[wZ,l(J.h(jy.g(n),BW))?["thin solid ",m.g(f)].join(""):l(J.h(jy.g(n),ku))?["thin solid ",m.g(f)].join(""):["thin solid ",m.g(i)].join(""),"#666",l(v)?v:l(d)?d:l(p)?p:fG,UW,"13px",e5,o,t,s,t,l(J.h(jy.g(n),TD))?["thin solid ",m.g(f)].join(""):null,["thin solid ",m.g(i)].join("")]))});j$.Nh(null,AQ,function(n){return ov.K(n,X,Al,new h(null,5,[gD,"100%",PG,wZ,qD,e5,RG,UW,QD,rZ],null))});j$.Nh(null,IT,function(n){return ov.K(n,X,Al,new h(null,4,[qC,"100%",PG,wZ,qD,e5,s4,UW],null))});var G$,H$=M(g$),I$=J.h(H$,fZ),J$=J.h(H$,$Y),K$=M(h$),aaa=J.h(K$,tU);G$=Ni([GD,QG,RG,HD,zD,uD,PY,$S,nG,xD],["#666","left","nowrap","13px",aaa,"thin solid #ccc",I$,I$,J$,"thin solid #ccc"]);j$.Nh(null,ZR,function(n){return ov.K(n,X,Al,F$)});p$.Nh(null,ZR,function(n){n=M(n);var t=J.h(n,MB);t=M(t),t=J.h(t,NB);var i=M(t);t=J.h(i,d1);var s=J.h(i,kC);return i=J.h(i,tU),ov.Ka(n,X,Al,G$,new h(null,3,[qD,"hidden",PG,"ellipsis",RG,"nowrap"],null),new h(null,5,[uD,lf(jy.g(n),WD)?["thin solid ",m.g(t)].join(""):null,wD,l(J.h(jy.g(n),TD))?["thin solid ",m.g(t)].join(""):null,xD,l(J.h(jy.g(n),bE))?["thin solid ",m.g(s)].join(""):null,vD,l(J.h(jy.g(n),ku))?["thin solid ",m.g(s)].join(""):null,zD,i],null))});j$.Nh(null,I0,function(n){return Hy(n,new h(null,2,[QD,"relative",tJ,"0px"],null))});p$.Nh(null,I0,function(n){return Hy(n,new h(null,2,[nD,"0px",zD,"transparent"],null))});var L$,baa=M(g$),M$=J.h(baa,fZ);L$=Ni([vD,GD,QG,HD,zD,PY,$S,nG,xD],["thin solid #ccc","#777",ku,12,"white",M$,M$,M$,"thin solid #ccc"]);p$.Nh(null,f2,function(n){n=M(n);var t=J.h(n,jy),i=J.h(n,rF),s=J.h(n,R1);return s=Jg(LC,s),ov.Ka(n,X,Al,L$,l(s)?new h(null,1,[QG,s],null):typeof i=="string"?new h(null,1,[QG,WD],null):null,w(t)?new h(null,2,[vD,lf(t,BW)||lf(t,ku)?"thin solid #aaa":"thin solid #ccc",xD,lf(t,bE)?"thin solid #aaa":"thin solid #ccc"],null):null)});p$.Nh(null,D0,function(n){n=M(n);var t=J.h(n,jy);return ov.j(n,X,Al,G$,lf(t,ku)?new h(null,1,[vD,"thin solid #aaa"],null):null,lf(t,WD)?new h(null,1,[uD,"thin solid #aaa"],null):null,F([lf(t,bE)?new h(null,1,[xD,"thin solid #aaa"],null):null]))});kn.h(w,he);j$.Nh(null,s2,function(n){return gH(n,F([new h(null,3,[qD,r4,RB,"1 1 auto",PD,FS],null)]))});j$.Nh(null,WS,function(n){return gH(n,F([new h(null,4,[PD,FS,qD,e5,S1,2,V6,2],null)]))});j$.Nh(null,u5,function(n){return gH(n,F([new h(null,4,[PD,FS,qD,e5,QD,rZ,TD,0],null)]))});j$.Nh(null,xZ,function(n){return gH(n,F([new h(null,3,[PD,FS,QD,rZ,WD,0],null)]))});j$.Nh(null,y1,function(n){return gH(n,F([new h(null,6,[QD,rZ,PD,FS,S1,1,V6,1,WD,0,TD,0],null)]))});var N$=M(g$),caa=J.h(N$,fZ),O$=J.h(N$,eZ),daa=M(h$),eaa=J.h(daa,tU);Ni([PG,GD,RG,HD,qD,zD,PY,$S,nG],[wZ,"#666",UW,13,e5,eaa,O$,caa,O$]);p$.Nh(null,N5,function(n){n=M(n);var t=J.h(n,jy);return gH(n,F([og,l(t.g?t.g(TD):t.call(null,TD))?new h(null,1,[wD,"thin solid #ccc"],null):null,l(t.g?t.g(ku):t.call(null,ku))?new h(null,1,[vD,"thin solid #ccc"],null):null,l(t.g?t.g(bE):t.call(null,bE))?new h(null,1,[xD,"thin solid #ccc"],null):null,l(t.g?t.g(WD):t.call(null,WD))?new h(null,1,[uD,"thin solid #ccc"],null):null]))});kn.h(Pk.h(Ig,jf),Oy);kn.h(Pk.h(Ig,jf),Oy);xu.prototype.mf=!1;yu.prototype.stopPropagation=function(){this.Ld=!0};yu.prototype.preventDefault=function(){this.defaultPrevented=!0};var Pu=function(){if(!$a.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$a.addEventListener("test",()=>{},t),$a.removeEventListener("test",()=>{},t)}catch{}return n}();na(zu,yu);var D_={2:"touch",3:"pen",4:"mouse"};zu.prototype.init=function(n,t){var i=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.currentTarget=t,t=n.relatedTarget){if(m_){e:{try{ta(t.nodeName);var o=!0;break e}catch{}o=!1}o||(t=null)}}else i=="mouseover"?t=n.fromElement:i=="mouseout"&&(t=n.toElement);this.relatedTarget=t,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.offsetX=n_||n.offsetX!==void 0?n.offsetX:n.layerX,this.offsetY=n_||n.offsetY!==void 0?n.offsetY:n.layerY,this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.keyCode=n.keyCode||0,this.key=n.key||"",this.charCode=n.charCode||(i=="keypress"?n.keyCode:0),this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:D_[n.pointerType]||"",this.state=n.state,this.Ad=n,n.defaultPrevented&&zu.Ff.preventDefault.call(this)};zu.prototype.stopPropagation=function(){zu.Ff.stopPropagation.call(this),this.Ad.stopPropagation?this.Ad.stopPropagation():this.Ad.cancelBubble=!0};zu.prototype.preventDefault=function(){zu.Ff.preventDefault.call(this);var n=this.Ad;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ku="closure_listenable_"+(1e6*Math.random()|0),Au=0;Du.prototype.add=function(n,t,i,s,o){var f=n.toString();n=this.Nb[f],n||(n=this.Nb[f]=[],this.Ge++);var d=Gu(n,t,s,o);return-1<d?(t=n[d],i||(t.$d=!1)):(t=new Bu(t,this.src,f,!!s,o),t.$d=i,n.push(t)),t};Du.prototype.remove=function(n,t,i,s){if(n=n.toString(),!(n in this.Nb))return!1;var o=this.Nb[n];return t=Gu(o,t,i,s),-1<t?(Cu(o[t]),Array.prototype.splice.call(o,t,1),o.length==0&&(delete this.Nb[n],this.Ge--),!0):!1};Du.prototype.rf=function(n,t,i,s){n=this.Nb[n.toString()];var o=-1;return n&&(o=Gu(n,t,i,s)),-1<o?n[o]:null};var Nu="closure_lm_"+(1e6*Math.random()|0),Vu={},Wu="__closure_events_fn_"+(1e9*Math.random()>>>0),Og=Ng.h(sK,lh),aD=fn(og),E_=Tg(new h(null,6,[i_,console.log.bind(console),G6,console.warn.bind(console),FF,console.error.bind(console),NT,console.debug.bind(console),aF,l(console.group)?console.group.bind(console):console.log.bind(console),nV,l(console.groupEnd)?console.groupEnd.bind(console):function(){return ge}],null)),av=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],1<i.length?new u(i.slice(1),0,null):null)};av.j=function(n,t){var i=Kg,s=i.h,o=q(E_);return n=n.g?n.g(o):n.call(null,o),s.call(i,n,t)};av.v=1;av.B=function(n){var t=z(n);return n=C(n),this.j(t,n)};var F_=Tg(new h(null,2,[vZ,!1,t7,Og],null)),faa=function(){return dk.h(F_,function(n){return gj.l(n,vZ,!0)})};try{Iu(self,"load",faa)}catch(n){}var cv=Tg(og),H_=function n(t){switch(arguments.length){case 0:return n.G();case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};H_.G=function(){return N(cv,og)};H_.g=function(n){return dk.l(cv,wl,n)};H_.h=function(n,t){return l(dv(n,t))?dk.j(cv,nK,new R(null,1,5,S,[n],null),wl,F([t])):av.j(G6,F(["re-frame: can't clear",m.g(n),"handler for",[m.g(t),". Handler not found."].join("")]))};H_.v=2;var mw=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};mw.j=function(n){var t=M(n),i=J.h(t,Xx);n=J.h(t,FX);var s=J.h(t,oH);return t=J.h(t,pH),i=new h(null,3,[Xx,l(i)?i:r7,oH,s,pH,t],null),l(n)?gj.l(i,FX,n):i};mw.v=0;mw.B=function(n){return this.j(w(n))};var sv=null,zv=Tg(og),zw=function n(t){switch(arguments.length){case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};zw.g=function(n){var t=Bv(n,lh);if(l(t))return t;var i=bv(n);return t=dv(aY,i),t==null?av.j(FF,F([["re-frame: no subscription handler registered for: ",m.g(i),". Returning a nil subscription."].join("")])):Av(n,lh,t.h?t.h(aD,n):t.call(null,aD,n))};zw.h=function(n,t){var i=Bv(n,t);if(l(i))return i;i=bv(n);var s=dv(aY,i);if(s==null)return av.j(FF,F([["re-frame: no subscription handler registered for: ",m.g(i),". Returning a nil subscription."].join("")]));var o=Kl(function(){return GG.h(te,t)}),f=Kl(function(){var d=q(o);return s.l?s.l(aD,n,d):s.call(null,aD,n,d)});return Av(n,t,Kl(function(){return q(q(f))}))};zw.v=2;var I_=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],3<i.length?new u(i.slice(3),0,null):null)};I_.j=function(n,t,i,s){var o=["re-frame: reg-sub for ",m.g(n),", "].join(""),f=Yg(s),d=I(f,0,null),p=I(f,1,null);n=l(function(){var k=E.h(1,D(f));return k||((k=Qe(d))?k:i.g?i.g(d):i.call(null,d))}())?new R(null,2,5,S,[pj(s),Le(s)],null):function(){var k=Xg(2,s);switch(d instanceof K?d.U:null){case"->":return new R(null,2,5,S,[k,function(P){return p.g?p.g(P):p.call(null,P)}],null);case"=>":return new R(null,2,5,S,[k,function(P,L){return Ze(L)?p.h?p.h(P,L):p.call(null,P,L):(L=w(L),z(L),L=C(L),Kg.l(p,P,L))}],null);default:return av.j(FF,F([o,"expected :-> or :=> as second to last argument, got:",d]))}}();var v=I(n,0,null);n=I(n,1,null);var _=function(){switch(D(v)){case 0:return function(){var Z=null;return Z=function(W,j){switch(arguments.length){case 1:return aD;case 2:return aD}throw Error("Invalid arity: "+arguments.length)},Z.g=function(){return aD},Z.h=function(){return aD},Z}();case 1:var k=z(v);return Qe(k)||av.j(FF,F([o,"2nd argument expected to be an inputs function, got:",k])),k;case 2:k=I(v,0,null);var P=I(v,1,null);return E.h(Y_,k)||av.j(FF,F([o,"expected :<-, got:",k])),function(){function Z(){return t.g?t.g(P):t.call(null,P)}function W(){return t.g?t.g(P):t.call(null,P)}var j=null;return j=function(H,me){switch(arguments.length){case 1:return W.call(this,H);case 2:return Z.call(this,H,me)}throw Error("Invalid arity: "+arguments.length)},j.g=W,j.h=Z,j}();default:k=oh(2,2,v);var L=O.h(z,k),G=O.h(Ke,k);return Ig(new jj(null,new h(null,1,[Y_,null],null),null),L)&&Ig(i,G)||av.j(FF,F([o,"expected pairs of :<- and vectors, got:",k])),function(){function Z(){return O.h(t,G)}function W(){return O.h(t,G)}var j=null;return j=function(H,me){switch(arguments.length){case 1:return W.call(this,H);case 2:return Z.call(this,H,me)}throw Error("Invalid arity: "+arguments.length)},j.g=W,j.h=Z,j}()}}();return new R(null,2,5,S,[_,n],null)};I_.v=3;I_.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);return i=z(s),s=C(s),this.j(t,n,i,s)};var xw=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],1<i.length?new u(i.slice(1),0,null):null)};xw.j=function(n,t){t=Kg.O(I_,n,zw,cf,t);var i=I(t,0,null),s=I(t,1,null);return ev(aY,n,function(){function o(p,v,_){var k=i.h?i.h(v,_):i.call(null,v,_);p=Tg(null);var P=Kl(function(){var L=Dv(k,n);return s.l?s.l(L,v,_):s.call(null,L,v,_)});return N(p,$u(P)),P}function f(p,v){var _=i.h?i.h(v,null):i.call(null,v,null);p=Tg(null);var k=Kl(function(){var P=Dv(_,n);return s.h?s.h(P,v):s.call(null,P,v)});return N(p,$u(k)),k}var d=null;return d=function(p,v,_){switch(arguments.length){case 2:return f.call(this,p,v);case 3:return o.call(this,p,v,_)}throw Error("Invalid arity: "+arguments.length)},d.h=f,d.l=o,d}())};xw.v=1;xw.B=function(n){var t=z(n);return n=C(n),this.j(t,n)};var Gv=new h(null,2,[N4,function(n){function t(){return nr.g?nr.g(n):nr.call(null,n)}return hn.g?hn.g(t):hn.call(null,t)},wX,nr],null),Xv=new function(n,t,i){this.oe=n,this.Ta=t,this.rh=i}(uH,Og,og),uw=mw.j(F([Xx,UQ,pH,function(n){var t=HH.g(n);if(n=wl.h(t,GH),t=GH.g(t),l(t)){var i=dv(J2,GH);i.g?i.g(t):i.call(null,t)}i=w(n);for(var s=null,o=0,f=0;;)if(f<o){n=s.S(null,f),t=I(n,0,null),n=I(n,1,null);var d=dv(J2,t);l(d)?(t=d,t.g?t.g(n):t.call(null,n)):av.j(G6,F(["re-frame: no handler registered for effect:",t,". Ignoring.",E.h(lH,t)?"You may be trying to return a coeffect map from an event-fx handler. See https://day8.github.io/re-frame/use-cofx-as-fx/":null])),f+=1}else if(n=w(i))i=n,df(i)?(t=Fd(i),i=Gd(i),n=t,t=D(t),s=n,o=t):(n=z(i),t=I(n,0,null),n=I(n,1,null),s=dv(J2,t),l(s)?(t=s,t.g?t.g(n):t.call(null,n)):av.j(G6,F(["re-frame: no handler registered for effect:",t,". Ignoring.",E.h(lH,t)?"You may be trying to return a coeffect map from an event-fx handler. See https://day8.github.io/re-frame/use-cofx-as-fx/":null])),i=C(i),s=null,o=0),f=0;else return null}]));ev(J2,i6,function(n){if(Ze(n))return aw(n);n=w(ul.h(cc,n));for(var t=null,i=0,s=0;;)if(s<i){var o=t.S(null,s);aw(o),s+=1}else if(n=w(n))t=n,df(t)?(n=Fd(t),i=Gd(t),t=n,o=D(n),n=i,i=o):(o=z(t),aw(o),n=C(t),t=null,i=0),s=0;else return null});ev(J2,J2,function(n){if(Ye(n)){n=w(ul.h(cc,n));for(var t=null,i=0,s=0;;)if(s<i){var o=t.S(null,s),f=I(o,0,null);o=I(o,1,null),E.h(GH,f)&&av.j(G6,F(['re-frame: ":fx" effect should not contain a :db effect']));var d=dv(J2,f);l(d)?(f=d,f.g?f.g(o):f.call(null,o)):av.j(G6,F(['re-frame: in ":fx" effect found ',f," which has no associated handler. Ignoring."])),s+=1}else if(n=w(n))df(n)?(o=Fd(n),n=Gd(n),f=o,o=D(o),t=f,i=o):(o=z(n),f=I(o,0,null),o=I(o,1,null),E.h(GH,f)&&av.j(G6,F(['re-frame: ":fx" effect should not contain a :db effect'])),t=dv(J2,f),l(t)?(f=t,f.g?f.g(o):f.call(null,o)):av.j(G6,F(['re-frame: in ":fx" effect found ',f," which has no associated handler. Ignoring."])),n=C(n),t=null,i=0),s=0;else return null}else return av.j(G6,F(['re-frame: ":fx" effect expects a seq, but was given ',jc(n)]))});ev(J2,EH,function(n){return cf(n)?Yv(n):av.j(FF,F(["re-frame: ignoring bad :dispatch value. Expected a vector, but got:",n]))});ev(J2,$V,function(n){if(Ye(n)){n=w(ul.h(cc,n));for(var t=null,i=0,s=0;;)if(s<i){var o=t.S(null,s);Yv(o),s+=1}else if(n=w(n))t=n,df(t)?(n=Fd(t),i=Gd(t),t=n,o=D(n),n=i,i=o):(o=z(t),Yv(o),n=C(t),t=null,i=0),s=0;else return null}else return av.j(FF,F(["re-frame: ignoring bad :dispatch-n value. Expected a collection, but got:",n]))});ev(J2,TS,function(n){var t=Pk.h(H_,lH);if(Ye(n)){n=w(n);for(var i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o);t(f),o+=1}else if(n=w(n))i=n,df(i)?(n=Fd(i),s=Gd(i),i=n,f=D(n),n=s,s=f):(f=z(i),t(f),n=C(i),i=null,s=0),o=0;else return null}else return t(n)});ev(J2,GH,function(n){return q(aD)!==n?N(aD,n):null});ev(xU,GH,function(n){return gj.l(n,GH,q(aD))});var tw=function(n){return mw.j(F([Xx,hH,oH,function(t){var i=dv(xU,n);return l(i)?ov.l(t,hH,i):av.j(FF,F(["No cofx handler registered for",n]))}]))}(GH),gw=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};gw.h=function(n,t){return gw.l(n,t,b$.h(bj(n),bj(t)))};gw.l=function(n,t,i){return nc(function(s,o){return Aj(O.l(Al,s,o))},new R(null,3,5,S,[null,null,null],null),O.h(Pk.l(fw,n,t),i))};gw.v=3;kw.null=function(){return E1};kw.string=function(){return E1};kw.number=function(){return E1};kw.array=function(){return uW};kw.function=function(){return E1};kw.boolean=function(){return E1};kw._=function(n){return(n!=null?n.A&1024||Zd===n.Ng||!n.A&&ic(Pc,n):ic(Pc,n))?Uv:(n!=null?n.A&4096||Zd===n.Qg||!n.A&&ic(Tc,n):ic(Tc,n))?Zv:(n!=null?n.A&16777216||Zd===n.ef||!n.A&&ic(jd,n):ic(jd,n))?uW:E1};lw.null=function(n,t){return bw(n,t)};lw.string=function(n,t){return bw(n,t)};lw.number=function(n,t){return bw(n,t)};lw.array=function(n,t){return hw(n,t)};lw.function=function(n,t){return bw(n,t)};lw.boolean=function(n,t){return bw(n,t)};lw._=function(n,t){var i=function(){var s=kw(n);switch(s=s instanceof K?s.U:null,s){case"atom":return bw;case"set":return jw;case"sequential":return hw;case"map":return gw;default:throw Error(["No matching clause: ",m.g(s)].join(""))}}();return i.h?i.h(n,t):i.call(null,n,t)};mw.j(F([Xx,NT,oH,function(n){return av.j(i_,F(["Handling re-frame event:",gv(n,lH)])),n},pH,function(n){var t=gv(n,lH),i=gv(n,GH),s=ph(n,new R(null,2,5,S,[HH,GH],null),MR);return E.h(s,MR)?av.j(i_,F(["No app-db changes in:",t])):(s=ew(i,s),i=I(s,0,null),s=I(s,1,null),i!=null||s!=null?(av.j(aF,F(["db clojure.data/diff for:",t])),av.j(i_,F(["only before:",i])),av.j(i_,F(["only after :",s])),av(nV)):av.j(i_,F(["No app-db changes resulted from:",t]))),n}]));mw.j(F([Xx,iT,oH,function(n){var t=gv(n,lH);I(t,0,null);var i=I(t,1,null);if(E.h(2,D(t))&&Ze(i))return hv(n,lH,i);throw Ik('re-frame: "unwrap" interceptor must be a vector of two elements "[event-id payload-map]"',t)},pH,function(n){return hv(n,lH,gv(n,mH))}]));mw.j(F([Xx,M2,oH,function(n){return cf(gv(n,lH))?Kg.O(nK,n,new R(null,2,5,S,[hH,lH],null),Um,F([1])):(av.j(G6,F(['re-frame: "trim-v" interceptor expected event to be a vector. Got a ',jc(gv(n,lH))])),n)},pH,function(n){return hv(n,lH,gv(n,mH))}]));var vw=mw.j(F([Xx,IW,oH,function(n){return ov.l(n,Pv,function(t){return Ng.h(t7.g(q(F_)),t)})}])),J_=function n(t){switch(arguments.length){case 2:return n.h(arguments[0],arguments[1]);case 3:return n.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};J_.h=function(n,t){return J_.l(n,null,t)};J_.l=function(n,t,i){return t=new R(null,5,5,S,[tw,uw,vw,t,qw(i)],null),ev(lH,n,ul.h(cc,kh(t)))};J_.v=3;ev(FF,nH,function(n,t){var i=M(t instanceof Hk?t.data:null);t=J.h(i,qH);var s=J.h(i,ZE);i=J.h(i,kH);var o=new jj(null,new h(null,3,[IH,null,FH,null,D3,null],null),null);throw o=o.g?o.g(i):o.call(null,i),Kg.j(av,FF,"An error occured while handling the re-frame event:",m.g(t),`
`,F([O.h(m,l(o)?new R(null,3,5,S,["Within the",z(t),"event handler function."],null):new R(null,5,5,S,["Within the",s,"phase of the",im.j(F([i])),"interceptor."],null))])),n});var gaa=new h(null,1,[V8,new h(null,2,[nO,new h(null,3,[lO,new h(null,1,[kO,!0],null),BO,new h(null,2,[AO,!0,DO,new jj(null,new h(null,2,[GY,null,G7,null],null),null)],null),wO,new h(null,1,[vO,!1],null)],null),SM,og],null)],null);J_.h(H2,function(){return gaa});g=Bw.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"unit":return this.unit;case"magnitude":return this.cc;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#garden.types.CSSUnit{",", ","}",i,fh.h(new R(null,2,5,S,[new R(null,2,5,S,[RH,this.unit],null),new R(null,2,5,S,[QH,this.cc],null)],null),this.I))};g.Fa=function(){return new Zh(this,2,new R(null,2,5,S,[RH,QH],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Bw(this.unit,this.cc,this.T,this.I,this.C)};g.ba=function(){return 2+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=70281654^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.unit,t.unit)&&E.h(this.cc,t.cc)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,2,[RH,null,QH,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new Bw(this.unit,this.cc,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"unit":case"magnitude":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(RH,t):Vf.call(null,RH,t))?new Bw(i,this.cc,this.T,this.I,null):l(Vf.h?Vf.h(QH,t):Vf.call(null,QH,t))?new Bw(this.unit,i,this.T,this.I,null):new Bw(this.unit,this.cc,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,2,5,S,[new ci(RH,this.unit,null),new ci(QH,this.cc,null)],null),this.I))};g.Z=function(n,t){return new Bw(this.unit,this.cc,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};g=Cw.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"identifier":return this.identifier;case"value":return this.value;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#garden.types.CSSAtRule{",", ","}",i,fh.h(new R(null,2,5,S,[new R(null,2,5,S,[JH,this.identifier],null),new R(null,2,5,S,[rF,this.value],null)],null),this.I))};g.Fa=function(){return new Zh(this,2,new R(null,2,5,S,[JH,rF],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Cw(this.identifier,this.value,this.T,this.I,this.C)};g.ba=function(){return 2+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=-1632374092^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.identifier,t.identifier)&&E.h(this.value,t.value)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,2,[rF,null,JH,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new Cw(this.identifier,this.value,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"identifier":case"value":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(JH,t):Vf.call(null,JH,t))?new Cw(i,this.value,this.T,this.I,null):l(Vf.h?Vf.h(rF,t):Vf.call(null,rF,t))?new Cw(this.identifier,i,this.T,this.I,null):new Cw(this.identifier,this.value,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,2,5,S,[new ci(JH,this.identifier,null),new ci(rF,this.value,null)],null),this.I))};g.Z=function(n,t){return new Cw(this.identifier,this.value,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};K.prototype.eg=function(){return qj(this)};Dw._=function(n){return m.g(n)};Dw.null=function(){return""};Pk.l(Ow,0,100);Pk.l(Ow,0,1);Pk.l(Ow,0,255);Ni([FT,m5,b8,DU,A4,oR,o7,x7,RS,S6,R0,w2,n6,bT,f5,tS,oW,N2,kV,y0,fS,pV,P8,l4,ZW,tV,nI,J0,OU,nU,LS,$7,XY,rX,X4,a3,v1,jS,I5,K6,U3,r3,EY,u7,MY,KS,GT,K2,k2,X1,X6,hV,vR,G_,ET,e4,rY,KR,Y6,T8,fY,pZ,G2,r9,NV,$Q,dY,OR,v6,TX,f6,z3,GW,IU,t0,P6,zY,L4,Q_,o_,vY,J8,TY,M8,zS,PU,dU,wT,l6,sR,eV,G5,Q6,lY,qU,w3,t5,XQ,TU,i0,n9,t3,DW,tX,A5,XX,U6,c5,IS,eR,DY,dS,D4,c8,qY,lU,zW,bX,dT,cS,d9,lX,hZ,p5,AT,X7,n5,wW,ST,s0,O5,WY,CW,UV,pS,jV,e9,L8,A6,H6,vS,eW,DT,V1,GX,jI],"#7fffd4 #00ff00 #00bfff #e9967a #faebd7 #48d1cc #708090 #708090 #a0522d #ffa500 #ffdead #fff0f5 #b22222 #ff4500 #db7093 #7cfc00 #fff5ee #ffb6c1 #556b2f #f0f8ff #808080 #b0c4de #f5f5f5 #b8860b #d2b48c #ffe4c4 #ffffff #90ee90 #8fbc8f #dc143c #2f4f4f #ffe4e1 #d2691e #ffff00 #5f9ea0 #000080 #f8f8ff #696969 #2e8b57 #008000 #3cb371 #4b0082 #6b8e23 #00ffff #ffdab9 #32cd32 #7b68ee #ee82ee #f4a460 #9acd32 #00fa9a #4682b4 #bc8f8f #6495ed #fffff0 #fafad2 #fa8072 #008b8b #cd853f #fff8dc #778899 #8a2be2 #228b22 #20b2aa #ffd700 #dcdcdc #9932cc #deb887 #87cefa #7fff00 #fffafa #ffe4b5 #f0fff0 #00ffff #8b0000 #ba55d3 #ffa07a #8b4513 #f5deb3 #00ff7f #778899 #00008b #b0e0e6 #40e0d0 #ffebcd #ffefd5 #6a5acd #add8e6 #87ceeb #ff0000 #ffffe0 #0000ff #98fb98 #adff2f #f0e68c #800000 #a9a9a9 #191970 #fffaf0 #ff1493 #afeeee #bdb76b #f0ffff #cd5c5c #9400d3 #9370db #ff00ff #ff7f50 #c71585 #fffacd #0000cd #8b008b #daa520 #ff8c00 #da70d6 #dda0dd #ffc0cb #008080 #ff00ff #d3d3d3 #800080 #1e90ff #00ced1 #f5fffa #ff69b4 #d8bfd8 #4169e1 #006400 #483d8b #c0c0c0 #a9a9a9 #fdf5e6 #66cdaa #a52a2a #d3d3d3 #808000 #f08080 #ff6347 #e0ffff #faf0e6 #2f4f4f #e6e6fa #696969 #eee8aa #f5f5dc #000000".split(" "));var Tw=function(n){var t=O.h(Sw,n);return function(i){return Jg(function(s){return s.g?s.g(i):s.call(null,i)},t)}}(F([new R(null,2,5,S,[Ts,/^"(?:\\.|[^"])*"/],null),new R(null,2,5,S,[VY,/^\s*\{\s*/],null),new R(null,2,5,S,[t1,/^;?\s*}/],null),new R(null,2,5,S,[h8,/^\s*\(\s*/],null),new R(null,2,5,S,[kS,/^\s*\)/],null),new R(null,2,5,S,[jU,/^,\s*/],null),new R(null,2,5,S,[Jp,/^:\s*/],null),new R(null,2,5,S,[jR,/^;/],null),new R(null,2,5,S,[BQ,/^and\s+/],null),new R(null,2,5,S,[oY,/^ +/],null),new R(null,2,5,S,[sS,/^\s+/],null),new R(null,2,5,S,[CQ,/^./],null)]));Vw.string=!0;Y.string=function(n){return n};K.prototype.qf=Zd;K.prototype.Ga=function(){return qj(this)};r.prototype.qf=Zd;r.prototype.Ga=function(){return qj(this)};g=Xw.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"selector":return this.qc;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#garden.selectors.CSSSelector{",", ","}",i,fh.h(new R(null,1,5,S,[new R(null,2,5,S,[js,this.qc],null)],null),this.I))};g.Fa=function(){return new Zh(this,1,new R(null,1,5,S,[js],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Xw(this.qc,this.T,this.I,this.C)};g.ba=function(){return 1+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=-1534393016^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.qc,t.qc)&&E.h(this.I,t.I)};g.qf=Zd;g.Ga=function(){return Y(js.g(this))};g.zb=function(n,t){return lf(new jj(null,new h(null,1,[js,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new Xw(this.qc,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"selector":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(js,t):Vf.call(null,js,t))?new Xw(i,this.T,this.I,null):new Xw(this.qc,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,1,5,S,[new ci(js,this.qc,null)],null),this.I))};g.Z=function(n,t){return new Xw(this.qc,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};g.call=function(n){switch(arguments.length-1){case 0:return this.G();case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.O(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.Ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Wa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.mb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.ab(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);case 11:return this.bb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.cb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.eb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13]);case 14:return this.fb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.gb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.hb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.ib(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.jb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.kb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.lb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);default:throw Error(["Invalid arity: ",m.g(arguments.length-1)].join(""))}};g.apply=function(n,t){return this.call.apply(this,[this].concat(mc(t)))};g.G=function(){return this};g.g=function(n){return new Xw([m.g(this.Ga(null)),m.g(Y(n))].join(""),null,null,null)};g.h=function(n,t){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t))].join(""),null,null,null)};g.l=function(n,t,i){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i))].join(""),null,null,null)};g.K=function(n,t,i,s){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s))].join(""),null,null,null)};g.O=function(n,t,i,s,o){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o))].join(""),null,null,null)};g.Ka=function(n,t,i,s,o,f){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f))].join(""),null,null,null)};g.Wa=function(n,t,i,s,o,f,d){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d))].join(""),null,null,null)};g.Ra=function(n,t,i,s,o,f,d,p){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p))].join(""),null,null,null)};g.mb=function(n,t,i,s,o,f,d,p,v){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v))].join(""),null,null,null)};g.ab=function(n,t,i,s,o,f,d,p,v,_){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v)),m.g(Y(_))].join(""),null,null,null)};g.bb=function(n,t,i,s,o,f,d,p,v,_,k){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v)),m.g(Y(_)),m.g(Y(k))].join(""),null,null,null)};g.cb=function(n,t,i,s,o,f,d,p,v,_,k,P){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v)),m.g(Y(_)),m.g(Y(k)),m.g(Y(P))].join(""),null,null,null)};g.eb=function(n,t,i,s,o,f,d,p,v,_,k,P,L){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v)),m.g(Y(_)),m.g(Y(k)),m.g(Y(P)),m.g(Y(L))].join(""),null,null,null)};g.fb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v)),m.g(Y(_)),m.g(Y(k)),m.g(Y(P)),m.g(Y(L)),m.g(Y(G))].join(""),null,null,null)};g.gb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v)),m.g(Y(_)),m.g(Y(k)),m.g(Y(P)),m.g(Y(L)),m.g(Y(G)),m.g(Y(Z))].join(""),null,null,null)};g.hb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v)),m.g(Y(_)),m.g(Y(k)),m.g(Y(P)),m.g(Y(L)),m.g(Y(G)),m.g(Y(Z)),m.g(Y(W))].join(""),null,null,null)};g.ib=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v)),m.g(Y(_)),m.g(Y(k)),m.g(Y(P)),m.g(Y(L)),m.g(Y(G)),m.g(Y(Z)),m.g(Y(W)),m.g(Y(j))].join(""),null,null,null)};g.jb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v)),m.g(Y(_)),m.g(Y(k)),m.g(Y(P)),m.g(Y(L)),m.g(Y(G)),m.g(Y(Z)),m.g(Y(W)),m.g(Y(j)),m.g(Y(H))].join(""),null,null,null)};g.kb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v)),m.g(Y(_)),m.g(Y(k)),m.g(Y(P)),m.g(Y(L)),m.g(Y(G)),m.g(Y(Z)),m.g(Y(W)),m.g(Y(j)),m.g(Y(H)),m.g(Y(me))].join(""),null,null,null)};g.lb=function(n,t,i,s,o,f,d,p,v,_,k,P,L,G,Z,W,j,H,me,$e){return new Xw([m.g(this.Ga(null)),m.g(Y(n)),m.g(Y(t)),m.g(Y(i)),m.g(Y(s)),m.g(Y(o)),m.g(Y(f)),m.g(Y(d)),m.g(Y(p)),m.g(Y(v)),m.g(Y(_)),m.g(Y(k)),m.g(Y(P)),m.g(Y(L)),m.g(Y(G)),m.g(Y(Z)),m.g(Y(W)),m.g(Y(j)),m.g(Y(H)),m.g(Y(me)),m.g(Y($e))].join(""),null,null,null)};Ch([k4,CY,p7,tW,wR,aU,o9,i4,jN,R2,T2,JS,fU,sX,$T,W4,gU,tR,kX,q1,QQ,Y0,QY,zX,P7,CS,T7,D7,BX,EX,HX,yY,ZY,T4,tY,r8,uP,QX,RX,LX,MX,NX,OX,MW,fV,H7,$X,O0,uQ,BZ,yV,C7,HV,d2,g1,d7,X3,oV,YV,a8,l2,E2,bZ,bN,lV,q6,PR,I3,IV,S5,l9,RZ,m4,d8,EZ,mZ,o4,fW,hW,RR,yQ,$5,AY,S8,bW,n1,j4,yS,vV,I6,M1,iR,P1,Q1,J5,MS,rW,x5,a5,pW,V0,t_,mU,sW,N3,p4,xW,ZV,C1,$U],!0);Ch([uR,e3,S7,kR,ZT,d5,rL,qR,H5,AV,v4,PW,HU,l7,NW,mT,hT,YS,c3,jY,lZ,iZ,dV,F8,aR,m7,kQ,kT,B6,QZ,V2,DQ],!0);Se(function(){function n(i){var s=null;if(0<arguments.length){s=0;for(var o=Array(arguments.length-0);s<o.length;)o[s]=arguments[s+0],++s;s=new u(o,0,null)}return t.call(this,s)}function t(i){return i=Kg.h(function(s){return qj(s)},i),i=Ww(i)?Y(i):i,Yw([":lang(",m.g(i),")"].join(""))}return n.v=0,n.B=function(i){return i=w(i),t(i)},n.j=t,n}(),new h(null,1,[OW,null],null));Se(function(){function n(i){var s=null;if(0<arguments.length){s=0;for(var o=Array(arguments.length-0);s<o.length;)o[s]=arguments[s+0],++s;s=new u(o,0,null)}return t.call(this,s)}function t(i){return i=Kg.h(function(s){return Y(s)},i),i=Ww(i)?Y(i):i,Yw([":not(",m.g(i),")"].join(""))}return n.v=0,n.B=function(i){return i=w(i),t(i)},n.j=t,n}(),new h(null,1,[OW,null],null));var Zw=RegExp("\\s*(?:[-+]?\\d+n\\s*(?:[-+]\\s*\\d+)?|[-+]?\\d+|odd|even)\\s*","i");Se(function(){function n(i){var s=null;if(0<arguments.length){s=0;for(var o=Array(arguments.length-0);s<o.length;)o[s]=arguments[s+0],++s;s=new u(o,0,null)}return t.call(this,s)}function t(i){return i=Kg.h(function(s){return $w(typeof s=="number"?[m.g(s),"n"].join(""):s)},i),i=Ww(i)?Y(i):i,Yw([":nth-child(",m.g(i),")"].join(""))}return n.v=0,n.B=function(i){return i=w(i),t(i)},n.j=t,n}(),new h(null,1,[OW,null],null));Se(function(){function n(i){var s=null;if(0<arguments.length){s=0;for(var o=Array(arguments.length-0);s<o.length;)o[s]=arguments[s+0],++s;s=new u(o,0,null)}return t.call(this,s)}function t(i){return i=Kg.h(function(s){return $w(s)},i),i=Ww(i)?Y(i):i,Yw([":nth-last-child(",m.g(i),")"].join(""))}return n.v=0,n.B=function(i){return i=w(i),t(i)},n.j=t,n}(),new h(null,1,[OW,null],null));Se(function(){function n(i){var s=null;if(0<arguments.length){s=0;for(var o=Array(arguments.length-0);s<o.length;)o[s]=arguments[s+0],++s;s=new u(o,0,null)}return t.call(this,s)}function t(i){return i=Kg.h(function(s){return $w(s)},i),i=Ww(i)?Y(i):i,Yw([":nth-of-type(",m.g(i),")"].join(""))}return n.v=0,n.B=function(i){return i=w(i),t(i)},n.j=t,n}(),new h(null,1,[OW,null],null));Se(function(){function n(i){var s=null;if(0<arguments.length){s=0;for(var o=Array(arguments.length-0);s<o.length;)o[s]=arguments[s+0],++s;s=new u(o,0,null)}return t.call(this,s)}function t(i){return i=Kg.h(function(s){return $w(s)},i),i=Ww(i)?Y(i):i,Yw([":nth-last-of-type(",m.g(i),")"].join(""))}return n.v=0,n.B=function(i){return i=w(i),t(i)},n.j=t,n}(),new h(null,1,[OW,null],null));lj([L3,J3,OH,G3,Nj.g("%"),n3,Y3]);var ax=Ni([L3,GU,J3,OH,xR,W2,JW,G3,Nj.g("%"),x8,yZ,n3,zV,DH,QR,iS,Y3],[new h(null,3,[L3,1,J3,2.83464567,OH,3.7795275591],null),new h(null,1,[GU,1],null),new h(null,2,[J3,1,OH,1.3333333333],null),new h(null,1,[OH,1],null),new h(null,1,[xR,1],null),new h(null,1,[W2,1],null),new h(null,2,[JW,1,GU,.001],null),new h(null,4,[L3,4.23333333,G3,1,J3,12,OH,16],null),ng([Nj.g("%"),1]),new h(null,2,[DH,1e3,x8,1],null),new h(null,4,[yZ,1,iS,1.111111111,QR,.0174532925,zV,.002777778],null),new h(null,5,[n3,1,L3,10,G3,2.36220473,J3,28.3464567,OH,37.795275591],null),new h(null,1,[zV,1],null),new h(null,1,[DH,1],null),new h(null,2,[QR,1,zV,.159154943],null),new h(null,3,[iS,1,QR,63.661977237,zV,.0025],null),new h(null,6,[n3,2.54,Y3,1,L3,25.4,G3,6,J3,72,OH,96],null)]);dx(n3);ex(n3);dx(L3);ex(L3);dx(Y3);ex(Y3);dx(OH);ex(OH);dx(J3);ex(J3);dx(G3);ex(G3);dx(NH);ex(NH);dx(W2);ex(W2);dx(b3);ex(b3);dx(m3);ex(m3);dx(xR);ex(xR);dx(t4);ex(t4);dx(q4);ex(q4);dx(nS);ex(nS);dx(NR);ex(NR);dx(yZ);ex(yZ);dx(iS);ex(iS);dx(QR);ex(QR);dx(zV);ex(zV);dx(x8);ex(x8);dx(DH);ex(DH);dx(JW);ex(JW);dx(GU);ex(GU);dx(FY);ex(FY);dx(uZ);ex(uZ);dx(IQ);ex(IQ);var wx=new h(null,6,[d4,!0,i8,lh,z2,null,bI,lh,aI,kj,ZH,new h(null,1,[$H,sm],null)],null),zx=new h(null,2,[S4,function(n,t){return Al.j(F([t,n]))},sm,function(n){return n}],null),tx=null,Ax=null,L_=function n(t){return gh(function(i){return ff(i)?n.g?n.g(i):n.call(null,i):new Mf(null,i,null,1,null)},F([t]))},px=function n(t){return nc(function(i,s){var o=I(s,0,null);return s=I(s,1,null),Fw(s)?nc(function(f,d){var p=I(d,0,null);return d=I(d,1,null),gj.l(f,Ew(F([o,"-",p])),d)},i,n.g?n.g(s):n.call(null,s)):gj.l(i,Dw(o),s)},Ne(t),t)},rx=/^&(?:\S+)?$/,M_,haa=Tg(og),iaa=Tg(og),jaa=Tg(og),kaa=Tg(og),laa=J.l(og,u4,tk.G?tk.G():tk.call(null));M_=new Bk(Xj.h("garden.compiler","expand-at-rule"),JH,laa,haa,iaa,jaa,kaa);M_.Nh(null,sm,function(n){return new Mf(null,n,null,1,null)});M_.Nh(null,WH,function(n){n=M(n),n=J.h(n,rF);var t=M(n);return n=J.h(t,JH),t=J.h(t,mX),new Mf(null,new Cw(WH,new h(null,2,[JH,Dw(n),mX,gh(ox,F([t]))],null),null,null,null),null,1,null)});M_.Nh(null,KH,function(n){n=M(n),n=J.h(n,rF);var t=M(n);n=J.h(t,i2),t=J.h(t,x1),n=Bx(n);e:{var i=Ax;Ax=n;try{var s=Aj(gh(ox,F([ox(t)])));break e}finally{Ax=i}s=void 0}return t=YH(Jw,s),s=I(t,0,null),t=I(t,1,null),Tf(new Cw(KH,new h(null,2,[i2,n,x1,t],null),null,null,null),s)});M_.Nh(null,LH,function(n){n=M(n),n=J.h(n,rF);var t=M(n);n=J.h(t,N7),t=J.h(t,x1),n=Bx(n);e:{var i=Ax;Ax=n;try{var s=Aj(gh(ox,F([ox(t)])));break e}finally{Ax=i}s=void 0}return t=YH(Lw,s),s=I(t,0,null),t=I(t,1,null),Tf(new Cw(LH,new h(null,2,[N7,n,x1,t],null),null,null,null),s)});ox.null=function(){return null};u.prototype.Sa=function(){return L_(this)};Yf.prototype.Sa=function(){return L_(this)};Ci.prototype.Sa=function(){return L_(this)};Ui.prototype.Sa=function(){return vx(this)};di.prototype.Sa=function(){return L_(this)};Hh.prototype.Sa=function(){return L_(this)};Sf.prototype.Sa=function(){return L_(this)};Je.prototype.Sa=function(){return L_(this)};Mi.prototype.Sa=function(){return new Mf(null,qx(this),null,1,null)};Hi.prototype.Sa=function(){return L_(this)};Lh.prototype.Sa=function(){return vx(this)};ox._=function(n){return new Mf(null,n,null,1,null)};Zi.prototype.Sa=function(){return new Mf(null,qx(this),null,1,null)};cg.prototype.Sa=function(){return L_(this)};Cw.prototype.Sa=function(){return M_.g(this)};Ti.prototype.Sa=function(){return vx(this)};R.prototype.Sa=function(){return vx(this)};h.prototype.Sa=function(){return new Mf(null,qx(this),null,1,null)};Mf.prototype.Sa=function(){return L_(this)};var Ox=RegExp("(?=[ A-Za-z#.}-]+)^","gm"),Mx=function n(t){var i=I(t,0,null);return t=I(t,1,null),Xe(t)?Nk(`
`,O.h(n,oh(2,2,dh.h(new $g(null,-1,i,null,null),t)))):(t=Ye(t)?Dx(Ex,t):Ex(t),Ew(F([i,": ",t,";"])))},S_=function n(t){return Ye(t)?Dx(Cx,O.h(n,t)):Nk(" and ",O.h(Qx,t))},T_=function n(t){return Ye(t)?Dx(Cx,O.h(n,t)):Nk(" and ",O.h(Rx,t))},U_,maa=Tg(og),naa=Tg(og),oaa=Tg(og),paa=Tg(og),qaa=J.l(og,u4,tk.G?tk.G():tk.call(null));U_=new Bk(Xj.h("garden.compiler","render-at-rule"),JH,qaa,maa,naa,oaa,paa);U_.Nh(null,sm,function(){return null});U_.Nh(null,VH,function(n){n=M(n),n=J.h(n,rF);var t=M(n);return n=J.h(t,wY),t=J.h(t,i2),n=typeof n=="string"?['"',m.g(n),'"'].join(""):Cx(n),t=l(t)?S_(t):null,["@import ",m.g(l(t)?[m.g(n)," ",m.g(t)].join(""):n),";"].join("")});U_.Nh(null,WH,function(n){n=M(n),n=J.h(n,rF);var t=M(n);if(n=J.h(t,JH),t=J.h(t,mX),w(t)){var i=[m.g(Dw(n)),` {

`,m.g(Nk(`

`,O.h(Cx,t)).replace(Ox,"  ")),`

}`].join("");return Nk(`

`,O.h(function(s){return[m.g(s),i].join("")},Tf("@keyframes ",O.h(function(s){return["@",Nw(s,"keyframes ")].join("")},w(bI.g(wx))))))}return null});U_.Nh(null,KH,function(n){n=M(n),n=J.h(n,rF);var t=M(n);return n=J.h(t,i2),t=J.h(t,x1),w(t)?["@media ",m.g(S_(n)),` {

`,m.g(Nk(`

`,O.h(Cx,t)).replace(Ox,"  ")),`

}`].join(""):null});U_.Nh(null,LH,function(n){n=M(n),n=J.h(n,rF);var t=M(n);return n=J.h(t,N7),t=J.h(t,x1),w(t)?["@supports ",m.g(T_(n)),` {

`,m.g(Nk(`

`,O.h(Cx,t)).replace(Ox,"  ")),`

}`].join(""):null});Cx.null=function(){return""};u.prototype.La=function(){return O.h(Cx,this)};Yf.prototype.La=function(){return O.h(Cx,this)};Ci.prototype.La=function(){return O.h(Cx,this)};Ui.prototype.La=function(){return Px(this)};di.prototype.La=function(){return O.h(Cx,this)};Bw.prototype.La=function(){var n=M(this),t=J.h(n,QH);return n=J.h(n,RH),[m.g(t),qj(n)].join("")};Hh.prototype.La=function(){return O.h(Cx,this)};Sf.prototype.La=function(){return O.h(Cx,this)};Je.prototype.La=function(){return O.h(Cx,this)};Cx.number=function(n){return m.g(n)};Mi.prototype.La=function(){return Nx(this)};Hi.prototype.La=function(){return O.h(Cx,this)};Lh.prototype.La=function(){return Px(this)};Cx._=function(n){return m.g(n)};Zi.prototype.La=function(){return Nx(this)};cg.prototype.La=function(){return O.h(Cx,this)};Cw.prototype.La=function(){return U_.g(this)};Ti.prototype.La=function(){return Px(this)};R.prototype.La=function(){return Px(this)};K.prototype.La=function(){return qj(this)};h.prototype.La=function(){return Nx(this)};Mf.prototype.La=function(){return O.h(Cx,this)};var Sx=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],1<i.length?new u(i.slice(1),0,null):null)};Sx.j=function(n,t){var i=(i=Fw(n))?Jg(oj(bj(n)),bj(wx)):i;t=l(i)?new R(null,2,5,S,[Al.j(F([wx,n])),t],null):new R(null,2,5,S,[wx,Tf(n,t)],null),n=I(t,0,null);e:{t=I(t,1,null),i=wx,wx=n;try{var s=Nk(`

`,ul.h(cc,O.h(Cx,jh.h(nx,Kg.h(fh,O.h(ox,ox(t)))))));break e}finally{wx=i}s=void 0}return t=M(n),J.h(t,i8),i=M(n),t=J.h(i,d4),i=J.h(i,fR),s=l(l(t)?t:i)?s:Uw(s),n=M(n),J.h(n,z2),s};Sx.v=1;Sx.B=function(n){var t=z(n);return n=C(n),this.j(t,n)};var Vx=Tg(og),Tx=new h(null,1,[d4,!1],null),raa=cy(mI);by(DX,raa,mI,null);var saa=cy(qI),hQ=cy(rI);cy(function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,5,[GD,K6,QD,"absolute",bE,"0",gD,"100%",kC,"solid black 1px"],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)});cy(function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,1,[nD,"0px 5px"],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)});var fQ=cy(sI),j0=new jj(null,new h(null,7,[206,null,204,null,304,null,1223,null,201,null,202,null,200,null],null),null),zy=encodeURIComponent,Py=function n(t,i,s){var o=I(s,0,null);s=I(s,1,null);var f=yy(o);return i=l(i)?l(o)?[m.g(i),"[",m.g(f),"]"].join(""):i:f,o=Pk.l(n,t,i),typeof s=="string"?new R(null,1,5,S,[new R(null,2,5,S,[i,s],null)],null):Xf(s)?new R(null,1,5,S,[new R(null,2,5,S,[i,Nk("/",XH.h(Wf,qj)(s))],null)],null):s instanceof K?new R(null,1,5,S,[new R(null,2,5,S,[i,qj(s)],null)],null):Ze(s)?gh(o,F([w(s)])):Ye(s)||Xe(s)?gh(o,F([Qg(t,w(s))])):new R(null,1,5,S,[new R(null,2,5,S,[i,s],null)],null)},k0=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],3<i.length?new u(i.slice(3),0,null):null)};k0.j=function(n,t,i,s){return new R(null,2,5,S,[!1,nc(Qf,new h(null,3,[Np,n,uX,t,F5,i],null),O.h(Gh,oh(2,2,s)))],null)};k0.v=3;k0.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);return i=z(s),s=C(s),this.j(t,n,i,s)};g=Fy.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){switch(t instanceof K?t.U:null){case"read":return this.read;case"description":return this.description;case"content-type":return this.Kb;default:return J.l(this.I,t,i)}};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.ld=function(n,t){n=M(n),J.h(n,wI),n=M(this);var i=J.h(n,wI);return ov.l(t,yX,function(s){return Al.j(F([new h(null,1,["Accept",Ey(i)],null),l(s)?s:og]))})};g.md=function(n,t){n=M(n),J.h(n,uI),n=M(this);var i=J.h(n,uI);try{var s=py(t),o=Pk.h(k0,s);switch(s){case 0:return o("Request failed.",z5);case-1:return l(ty(t))?o("Request aborted by client.",VQ):o("Request timed out.",t2);case 204:return new R(null,2,5,S,[!0,null],null);case 205:return new R(null,2,5,S,[!0,null],null);default:try{var f=i.g?i.g(t):i.call(null,t);return lf(j0,s)?new R(null,2,5,S,[!0,f],null):o(qy(t),FF,U5,f)}catch(L){if(L instanceof Object){f=L,o=S;var d=M(n),p=J.h(d,vI),v=new h(null,3,[Np,s,F5,FF,U5,null],null),_=[m.g(f.message),"  Format should have been ",m.g(p)].join(""),k=gj.j(v,uX,_,F([F5,q_,NU,ry(t)])),P=lf(j0,s)?k:gj.j(v,uX,qy(t),F([fX,k]));return new R(null,2,5,o,[!1,P],null)}throw L}}}catch(L){if(L instanceof Object)return f=L,k0.j(0,f.message,yH,F([yH,f]));throw L}};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#ajax.interceptors.ResponseFormat{",", ","}",i,fh.h(new R(null,3,5,S,[new R(null,2,5,S,[uI,this.read],null),new R(null,2,5,S,[vI,this.description],null),new R(null,2,5,S,[wI,this.Kb],null)],null),this.I))};g.Fa=function(){return new Zh(this,3,new R(null,3,5,S,[uI,vI,wI],null),l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Fy(this.read,this.description,this.Kb,this.T,this.I,this.C)};g.ba=function(){return 3+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=-2103965186^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.read,t.read)&&E.h(this.description,t.description)&&E.h(this.Kb,t.Kb)&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(new jj(null,new h(null,3,[vI,null,uI,null,wI,null],null),null),t)?wl.h(bd(Ng.h(og,this),this.T),t):new Fy(this.read,this.description,this.Kb,this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){switch(t instanceof K?t.U:null){case"read":case"description":case"content-type":return!0;default:return lf(this.I,t)}};g.ua=function(n,t,i){return l(Vf.h?Vf.h(uI,t):Vf.call(null,uI,t))?new Fy(i,this.description,this.Kb,this.T,this.I,null):l(Vf.h?Vf.h(vI,t):Vf.call(null,vI,t))?new Fy(this.read,i,this.Kb,this.T,this.I,null):l(Vf.h?Vf.h(wI,t):Vf.call(null,wI,t))?new Fy(this.read,this.description,i,this.T,this.I,null):new Fy(this.read,this.description,this.Kb,this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(new R(null,3,5,S,[new ci(uI,this.read,null),new ci(vI,this.description,null),new ci(wI,this.Kb,null)],null),this.I))};g.Z=function(n,t){return new Fy(this.read,this.description,this.Kb,t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};g=Ky.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){return J.l(this.I,t,i)};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.ld=function(n,t){n=M(t),J.h(n,FI),J.h(n,yI);var i=J.h(n,BI),s=J.h(n,Nq);t=J.h(n,yX);var o=Ze(i)?i:i instanceof K?wy(new R(null,2,5,S,["keywords are not allowed as request formats in ajax calls: ",i],null)):hf(i)?new h(null,2,[aJ,i,wI,"text/plain"],null):og;o=M(o);var f=J.h(o,aJ);return o=J.h(o,wI),i=f!=null?f.g?f.g(s):f.call(null,s):wy(new R(null,2,5,S,["unrecognized request format: ",i],null)),t=l(t)?t:og,gj.j(n,iI,i,F([yX,l(o)?gj.l(t,"Content-Type",Ey(o)):t]))};g.md=function(n,t){return t};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#ajax.interceptors.ApplyRequestFormat{",", ","}",i,fh.h(lh,this.I))};g.Fa=function(){return new Zh(this,0,lh,l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Ky(this.T,this.I,this.C)};g.ba=function(){return 0+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=1698259290^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(kj,t)?wl.h(bd(Ng.h(og,this),this.T),t):new Ky(this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){return lf(this.I,t)};g.ua=function(n,t,i){return new Ky(this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(lh,this.I))};g.Z=function(n,t){return new Ky(t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};g=Ry.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){return J.l(this.I,t,i)};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.ld=function(n,t){return t=M(t),n=J.h(t,yI),t=ov.l(t,FI,Pk.h(Qy,t)),E.h(n,"GET")?new re(t):t};g.md=function(n,t){return t};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#ajax.interceptors.ProcessUrlParameters{",", ","}",i,fh.h(lh,this.I))};g.Fa=function(){return new Zh(this,0,lh,l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Ry(this.T,this.I,this.C)};g.ba=function(){return 0+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=-516728758^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(kj,t)?wl.h(bd(Ng.h(og,this),this.T),t):new Ry(this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){return lf(this.I,t)};g.ua=function(n,t,i){return new Ry(this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(lh,this.I))};g.Z=function(n,t){return new Ry(t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};g=Sy.prototype;g.oa=function(n,t){return this.V(null,t,null)};g.V=function(n,t,i){return J.l(this.I,t,i)};g.qb=function(n,t,i){return nc(function(s,o){var f=I(o,0,null);return o=I(o,1,null),t.l?t.l(s,f,o):t.call(null,s,f,o)},i,this)};g.ld=function(n,t){return n=M(t),J.h(n,iI)==null?n:new re(n)};g.md=function(n,t){return t};g.W=function(n,t,i){return Gj(t,function(s){return Gj(t,Mj,""," ","",i,s)},"#ajax.interceptors.DirectSubmission{",", ","}",i,fh.h(lh,this.I))};g.Fa=function(){return new Zh(this,0,lh,l(this.I)?Nd(this.I):rg())};g.Y=function(){return this.T};g.Ea=function(){return new Sy(this.T,this.I,this.C)};g.ba=function(){return 0+D(this.I)};g.X=function(){var n=this.C;return n??(this.C=n=-1077152635^pe(this))};g.M=function(n,t){return t!=null&&this.constructor===t.constructor&&E.h(this.I,t.I)};g.zb=function(n,t){return lf(kj,t)?wl.h(bd(Ng.h(og,this),this.T),t):new Sy(this.T,pg(wl.h(this.I,t)),null)};g.Ua=function(n,t){return lf(this.I,t)};g.ua=function(n,t,i){return new Sy(this.T,gj.l(this.I,t,i),null)};g.aa=function(){return w(fh.h(lh,this.I))};g.Z=function(n,t){return new Sy(t,this.I,this.C)};g.ga=function(n,t){return cf(t)?this.ua(null,Oe(t,0),Oe(t,1)):nc(Bc,this,t)};var Xz=new R(null,3,5,S,[new Ry(null,null,null),new Sy(null,null,null),new Ky(null,null,null)],null),Wy=function n(t,i){return i==null||Ze(i)?i:cf(i)?(i=Ke(i),n.h?n.h(t,i):n.call(null,t,i)):i.g?i.g(t):i.call(null,t)};na(cz,xu);cz.prototype[Ku]=!0;cz.prototype.addEventListener=function(n,t,i,s){Iu(this,n,t,i,s)};cz.prototype.removeEventListener=function(n,t,i,s){Tu(this,n,t,i,s)};cz.prototype.dispatchEvent=function(n){var t,i=this.pg;if(i)for(t=[];i;i=i.pg)t.push(i);i=this.Bg;var s=n.type||n;if(typeof n=="string")n=new yu(n,i);else if(n instanceof yu)n.target=n.target||i;else{var o=n;n=new yu(s,i),Za(n,o)}if(o=!0,t)for(var f=t.length-1;!n.Ld&&0<=f;f--){var d=n.currentTarget=t[f];o=dz(d,s,!0,n)&&o}if(n.Ld||(d=n.currentTarget=i,o=dz(d,s,!0,n)&&o,n.Ld||(o=dz(d,s,!1,n)&&o)),t)for(f=0;!n.Ld&&f<t.length;f++)d=n.currentTarget=t[f],o=dz(d,s,!1,n)&&o;return o};cz.prototype.rf=function(n,t,i,s){return this.Ic.rf(String(n),t,i,s)};fz.prototype.Tf=null;var l0;na(iz,fz);l0=new iz;na(lz,cz);var kz="",tz=/^https?$/i,m0=["POST","PUT"];g=lz.prototype;g.setTimeoutInterval=function(n){this.Qd=Math.max(0,n)};g.setResponseType=function(n){this.Ce=n};g.setWithCredentials=function(n){this.Kf=n};g.setProgressEventsEnabled=function(n){this.rg=n};g.setTrustToken=function(n){this.Gf=n};g.send=function(n,t,i,s){if(this.ca)throw Error("[goog.net.XhrIo] Object is active with another request="+this.te+"; newUri="+n);t=t?t.toUpperCase():"GET",this.te=n,this.Pc="",this.ed=0,this.hg=t,this.pf=!1,this.Wc=!0,this.ca=this.Le?jz(this.Le):jz(l0),this.Ke=this.Le?hz(this.Le):hz(l0),this.ca.onreadystatechange=la(this.mg,this),this.rg&&"onprogress"in this.ca&&(this.ca.onprogress=la(function(f){this.lg(f,!0)},this),this.ca.upload&&(this.ca.upload.onprogress=la(this.lg,this)));try{this.getStatus(),this.sf=!0,this.ca.open(t,String(n),!0),this.sf=!1}catch(f){this.getStatus(),qz(this,f);return}if(n=i||"",i=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var o in s)i.set(o,s[o]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const f of s.keys())i.set(f,s.get(f));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(i.keys()).find(f=>f.toLowerCase()=="content-type"),o=$a.FormData&&n instanceof $a.FormData,!(0<=Eu(m0,t))||s||o||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,d]of i)this.ca.setRequestHeader(f,d);if(this.Ce&&(this.ca.responseType=this.Ce),"withCredentials"in this.ca&&this.ca.withCredentials!==this.Kf&&(this.ca.withCredentials=this.Kf),"setTrustToken"in this.ca&&this.Gf)try{this.ca.setTrustToken(this.Gf)}catch{this.getStatus()}try{Rz(this),0<this.Qd&&(this.Hf=nz(this.ca),this.getStatus(),this.Hf?(this.ca.timeout=this.Qd,this.ca.ontimeout=la(this.Ag,this)):this.Ee=ez(this.Ag,this.Qd,this)),this.getStatus(),this.qe=!0,this.ca.send(n),this.qe=!1}catch(f){this.getStatus(),qz(this,f)}};g.Ag=function(){typeof rz<"u"&&this.ca&&(this.Pc="Timed out after "+this.Qd+"ms, aborting",this.ed=8,this.getStatus(),this.dispatchEvent("timeout"),this.abort(8))};g.abort=function(n){this.ca&&this.Wc&&(this.getStatus(),this.Wc=!1,this.Gd=!0,this.ca.abort(),this.Gd=!1,this.ed=n||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),pz(this))};g.mg=function(){this.mf||(this.sf||this.qe||this.Gd?uz(this):this.oh())};g.oh=function(){uz(this)};g.lg=function(n,t){this.dispatchEvent(Qz(n,"progress")),this.dispatchEvent(Qz(n,t?"downloadprogress":"uploadprogress"))};g.isActive=function(){return!!this.ca};g.getStatus=function(){try{return 2<sz(this)?this.ca.status:-1}catch{return-1}};g.getStatusText=function(){try{return 2<sz(this)?this.ca.statusText:""}catch{return""}};g.getResponse=function(){try{if(!this.ca)return null;if("response"in this.ca)return this.ca.response;switch(this.Ce){case kz:case"text":return this.ca.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.ca)return this.ca.mozResponseArrayBuffer}return null}catch{return null}};g.getResponseHeader=function(n){if(this.ca&&sz(this)==4)return n=this.ca.getResponseHeader(n),n===null?void 0:n};g.getAllResponseHeaders=function(){return this.ca&&2<=sz(this)&&this.ca.getAllResponseHeaders()||""};g.getResponseHeaders=function(){const n={},t=this.getAllResponseHeaders().split(`\r
`);for(let s=0;s<t.length;s++){if(Ta(t[s]))continue;var i=ub(t[s]);const o=i[0];if(i=i[1],typeof i!="string")continue;i=i.trim();const f=n[o]||[];n[o]=f,f.push(i)}return Va(n,function(s){return s.join(", ")})};g.getLastErrorCode=function(){return this.ed};var Wz=Tg(lh);g=lz.prototype;g.Oe=function(n,t,i){var s=M(t);n=J.h(s,FI),t=J.h(s,yI);var o=J.h(s,iI),f=J.h(s,yX),d=J.l(s,t2,0),p=J.l(s,c1,!1),v=J.h(s,AI);return s=J.h(s,n7),v=pF.g(v),l(v)&&this.setResponseType(qj(v)),Qe(s)&&(this.setProgressEventsEnabled(!0),Iu(this,"uploadprogress",s)),Iu(this,"complete",function(_){return _=_.target,i.g?i.g(_):i.call(null,_)}),this.setTimeoutInterval(d),this.setWithCredentials(p),this.send(n,t,o,Mm(f)),this};g.Pe=function(){return this.getResponse()};g.Re=function(){return this.getStatus()};g.Se=function(){return this.getStatusText()};g.Qe=function(n,t){return this.getResponseHeader(t)};g.Te=function(){return E.h(this.getLastErrorCode(),7)};ev(J2,L0,function(n){n=w(Ye(n)?n:new R(null,1,5,S,[n],null));for(var t=null,i=0,s=0;;)if(s<i){var o=t.S(null,s),f=bA(Yz(nA(o)));oA(o,f),s+=1}else if(n=w(n))df(n)?(t=Fd(n),n=Gd(n),o=t,i=D(t),t=o):(o=z(n),t=bA(Yz(nA(o))),oA(o,t),n=C(n),t=null,i=0),s=0;else return null});var wA=typeof Object.keys<"u"?function(n){return Object.keys(n)}:function(n){return Wa(n)},uA=typeof Array.isArray<"u"?function(n){return Array.isArray(n)}:function(n){return aa(n)==="array"};sA.prototype.write=function(n,t){return qA(n,t)?(this.Cg===4096?(this.clear(),this.Ed=0,this.cache={}):this.Aa===1936&&this.clear(),t=this.cache[n],t==null?(this.cache[n]=[rA(this.Aa),this.Ed],this.Aa++,n):t[1]!=this.Ed?(t[1]=this.Ed,t[0]=rA(this.Aa),this.Aa++,n):t[0]):n};sA.prototype.clear=function(){this.Aa=0,this.Ed++};tA.prototype.write=function(n){return this.Aa==1936&&(this.Aa=0),this.cache[this.Aa]=n,this.Aa++,n};tA.prototype.read=function(n){return this.cache[n.length===2?n.charCodeAt(1)-48:44*(n.charCodeAt(1)-48)+(n.charCodeAt(2)-48)]};tA.prototype.clear=function(){this.Aa=0};var DA=1,BA={},CA=0,n0=typeof Symbol<"u"?Symbol.iterator:"@@iterator";EA.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"};EA.prototype.da=function(n){return vA(this,n)};EA.prototype.equiv=EA.prototype.da;EA.prototype.Ab=function(n){return n instanceof EA?this.tag===n.tag&&vA(this.rep,n.rep):!1};EA.prototype.Jb=function(){return this.ra===-1&&(this.ra=xA(yA(this.tag),yA(this.rep))),this.ra};var o0=Ga("9007199254740991"),p0=Ga("-9007199254740991");ua.prototype.da=function(n){return vA(this,n)};ua.prototype.equiv=ua.prototype.da;ua.prototype.Ab=function(n){return n instanceof ua&&this.equals(n)};ua.prototype.Jb=function(){return this.wa};GA.prototype.toString=function(){return":"+this.Ia};GA.prototype.namespace=function(){var n=this.Ia.indexOf("/");return n!=-1?this.Ia.substring(0,n):null};GA.prototype.name=function(){var n=this.Ia.indexOf("/");return n!=-1?this.Ia.substring(n+1,this.Ia.length):this.Ia};GA.prototype.da=function(n){return vA(this,n)};GA.prototype.equiv=GA.prototype.da;GA.prototype.Ab=function(n){return n instanceof GA&&this.Ia==n.Ia};GA.prototype.Jb=function(){return this.ra===-1&&(this.ra=yA(this.Ia)),this.ra};HA.prototype.namespace=function(){var n=this.Ia.indexOf("/");return n!=-1?this.Ia.substring(0,n):null};HA.prototype.name=function(){var n=this.Ia.indexOf("/");return n!=-1?this.Ia.substring(n+1,this.Ia.length):this.Ia};HA.prototype.toString=function(){return this.Ia};HA.prototype.da=function(n){return vA(this,n)};HA.prototype.equiv=HA.prototype.da;HA.prototype.Ab=function(n){return n instanceof HA&&this.Ia==n.Ia};HA.prototype.Jb=function(){return this.ra===-1&&(this.ra=yA(this.Ia)),this.ra};JA.prototype.toString=function(){var n=this.high,t=this.low,i=IA(n,0,4)+"-";return i+=IA(n,4,6)+"-",i+=IA(n,6,8)+"-",i+=IA(t,0,2)+"-",i+=IA(t,2,8)};JA.prototype.da=function(n){return vA(this,n)};JA.prototype.equiv=JA.prototype.da;JA.prototype.Ab=function(n){return n instanceof JA&&this.high.equals(n.high)&&this.low.equals(n.low)};JA.prototype.Jb=function(){return this.ra===-1&&(this.ra=yA(this.toString())),this.ra};Date.prototype.Ab=function(n){return n instanceof Date?this.valueOf()===n.valueOf():!1};Date.prototype.Jb=function(){return this.valueOf()};KA.prototype.next=function(){if(this.Aa<this.entries.length){var n={value:this.type===0?this.entries[this.Aa]:this.type===1?this.entries[this.Aa+1]:[this.entries[this.Aa],this.entries[this.Aa+1]],done:!1};return this.Aa+=2,n}return{value:null,done:!0}};KA.prototype.next=KA.prototype.next;KA.prototype[n0]=function(){return this};LA.prototype.next=function(){if(this.Aa<this.map.size){this.Fc!=null&&this.xc<this.Fc.length||(this.Fc=this.map.map[this.keys[this.Aa]],this.xc=0);var n={value:this.type===0?this.Fc[this.xc]:this.type===1?this.Fc[this.xc+1]:[this.Fc[this.xc],this.Fc[this.xc+1]],done:!1};return this.Aa++,this.xc+=2,n}return{value:null,done:!0}};LA.prototype.next=LA.prototype.next;LA.prototype[n0]=function(){return this};NA.prototype.toString=function(){return QA(this)};NA.prototype.inspect=function(){return this.toString()};NA.prototype.clear=function(){this.ra=-1,this.pa?this.pa.clear():this.sa=[],this.size=0};NA.prototype.clear=NA.prototype.clear;NA.prototype.keys=function(){return this.pa?this.pa.keys():new KA(this.sa,0)};NA.prototype.keys=NA.prototype.keys;NA.prototype.Nc=function(){if(this.pa)return this.pa.Nc();for(var n=[],t=0,i=0;i<this.sa.length;t++,i+=2)n[t]=this.sa[i];return n};NA.prototype.keySet=NA.prototype.Nc;NA.prototype.entries=function(){return this.pa?this.pa.entries():new KA(this.sa,2)};NA.prototype.entries=NA.prototype.entries;NA.prototype.values=function(){return this.pa?this.pa.values():new KA(this.sa,1)};NA.prototype.values=NA.prototype.values;NA.prototype.forEach=function(n){if(this.pa)this.pa.forEach(n);else for(var t=0;t<this.sa.length;t+=2)n(this.sa[t+1],this.sa[t])};NA.prototype.forEach=NA.prototype.forEach;NA.prototype.get=function(n,t){if(this.pa)return this.pa.get(n);if(TA(this))return this.get(n);for(var i=0;i<this.sa.length;i+=2)if(vA(this.sa[i],n))return this.sa[i+1];return t};NA.prototype.get=NA.prototype.get;NA.prototype.has=function(n){if(this.pa)return this.pa.has(n);if(TA(this))return this.has(n);for(var t=0;t<this.sa.length;t+=2)if(vA(this.sa[t],n))return!0;return!1};NA.prototype.has=NA.prototype.has;NA.prototype.set=function(n,t){if(this.ra=-1,this.pa)this.pa.set(n,t),this.size=this.pa.size;else{for(var i=0;i<this.sa.length;i+=2)if(vA(this.sa[i],n)){this.sa[i+1]=t;return}this.sa.push(n),this.sa.push(t),this.size++,32<this.size&&(this.pa=SA(this.sa,!1,!0),this.sa=null)}};NA.prototype.set=NA.prototype.set;NA.prototype.delete=function(n){if(this.ra=-1,this.pa)return n=this.pa.delete(n),this.size=this.pa.size,n;for(var t=0;t<this.sa.length;t+=2)if(vA(this.sa[t],n))return n=this.sa[t+1],this.sa.splice(t,2),this.size--,n};NA.prototype.clone=function(){var n=SA();return this.forEach(function(t,i){n.set(i,t)}),n};NA.prototype.clone=NA.prototype.clone;NA.prototype[n0]=function(){return this.entries()};NA.prototype.Jb=function(){return this.pa?this.pa.Jb():(this.ra===-1&&(this.ra=zA(this)),this.ra)};NA.prototype.Ab=function(n){return this.pa?OA(this.pa,n):OA(this,n)};MA.prototype.toString=function(){return QA(this)};MA.prototype.inspect=function(){return this.toString()};MA.prototype.clear=function(){this.ra=-1,this.map={},this.Vc=[],this.size=0};MA.prototype.clear=MA.prototype.clear;MA.prototype.Lc=function(){return this.Vc!=null?this.Vc:wA(this.map)};MA.prototype.delete=function(n){this.ra=-1,this.Vc=null;for(var t=yA(n),i=this.map[t],s=0;s<i.length;s+=2)if(vA(n,i[s]))return n=i[s+1],i.splice(s,2),i.length===0&&delete this.map[t],this.size--,n};MA.prototype.entries=function(){return new LA(this,2)};MA.prototype.entries=MA.prototype.entries;MA.prototype.forEach=function(n){for(var t=this.Lc(),i=0;i<t.length;i++)for(var s=this.map[t[i]],o=0;o<s.length;o+=2)n(s[o+1],s[o],this)};MA.prototype.forEach=MA.prototype.forEach;MA.prototype.get=function(n,t){var i=yA(n);if(i=this.map[i],i!=null){for(t=0;t<i.length;t+=2)if(vA(n,i[t]))return i[t+1]}else return t};MA.prototype.get=MA.prototype.get;MA.prototype.has=function(n){var t=yA(n);if(t=this.map[t],t!=null){for(var i=0;i<t.length;i+=2)if(vA(n,t[i]))return!0}return!1};MA.prototype.has=MA.prototype.has;MA.prototype.keys=function(){return new LA(this,0)};MA.prototype.keys=MA.prototype.keys;MA.prototype.Nc=function(){for(var n=this.Lc(),t=[],i=0;i<n.length;i++)for(var s=this.map[n[i]],o=0;o<s.length;o+=2)t.push(s[o]);return t};MA.prototype.keySet=MA.prototype.Nc;MA.prototype.set=function(n,t){this.ra=-1;var i=yA(n),s=this.map[i];if(s==null)this.Vc&&this.Vc.push(i),this.map[i]=[n,t],this.size++;else{i=!0;for(var o=0;o<s.length;o+=2)if(vA(t,s[o])){i=!1,s[o]=t;break}i&&(s.push(n),s.push(t),this.size++)}};MA.prototype.set=MA.prototype.set;MA.prototype.values=function(){return new LA(this,1)};MA.prototype.values=MA.prototype.values;MA.prototype.clone=function(){var n=SA();return this.forEach(function(t,i){n.set(i,t)}),n};MA.prototype.clone=MA.prototype.clone;MA.prototype[n0]=function(){return this.entries()};MA.prototype.Jb=function(){return this.ra===-1&&(this.ra=zA(this)),this.ra};MA.prototype.Ab=function(n){return OA(this,n)};UA.prototype.toString=function(){return RA(this)};UA.prototype.inspect=function(){return this.toString()};UA.prototype.add=function(n){this.map.set(n,n),this.size=this.map.size};UA.prototype.add=UA.prototype.add;UA.prototype.clear=function(){this.map=new MA,this.size=0};UA.prototype.clear=UA.prototype.clear;UA.prototype.delete=function(n){return n=this.map.delete(n),this.size=this.map.size,n};UA.prototype.entries=function(){return this.map.entries()};UA.prototype.entries=UA.prototype.entries;UA.prototype.forEach=function(n){var t=this;this.map.forEach(function(i,s){n(s,t)})};UA.prototype.forEach=UA.prototype.forEach;UA.prototype.has=function(n){return this.map.has(n)};UA.prototype.has=UA.prototype.has;UA.prototype.keys=function(){return this.map.keys()};UA.prototype.keys=UA.prototype.keys;UA.prototype.Nc=function(){return this.map.Nc()};UA.prototype.keySet=UA.prototype.Nc;UA.prototype.values=function(){return this.map.values()};UA.prototype.values=UA.prototype.values;UA.prototype.clone=function(){var n=VA();return this.forEach(function(t){n.add(t)}),n};UA.prototype.clone=UA.prototype.clone;UA.prototype[n0]=function(){return this.values()};UA.prototype.Ab=function(n){if(n instanceof UA){if(this.size===n.size)return vA(this.map,n.map)}else return!1};UA.prototype.Jb=function(){return yA(this.map)};XA.prototype.zd={Ma:{_:function(){return null},"?":function(n){return n==="t"},b:function(n,t){if(t&&t.yf===!1||typeof $a.Me>"u")if(typeof Uint8Array<"u"){if(typeof atob<"u")var i=atob(n);else{if(n=String(n).replace(/=+$/,""),n.length%4==1)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");t=0;for(var s,o=0,f="";s=n.charAt(o++);~s&&(i=t%4?64*i+s:s,t++%4)?f+=String.fromCharCode(255&i>>(-2*t&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);i=f}for(n=i.length,t=new Uint8Array(n),s=0;s<n;s++)t[s]=i.charCodeAt(s);i=t}else i=FA("b",n);else i=new $a.Me(n,"base64");return i},i:function(n){return typeof n=="number"||n instanceof ua||(n=Ga(n,10),n=0<n.compare(o0)||0>n.compare(p0)?n:Ha(n)),n},n:function(n){return FA("n",n)},d:function(n){return parseFloat(n)},f:function(n){return FA("f",n)},c:function(n){return n},":":function(n){return new GA(n)},$:function(n){return new HA(n)},r:function(n){return FA("r",n)},z:function(n){e:switch(n){case"-INF":n=-1/0;break e;case"INF":n=1/0;break e;case"NaN":n=NaN;break e;default:throw Error("Invalid special double value "+n)}return n},"'":function(n){return n},m:function(n){return n=typeof n=="number"?n:parseInt(n,10),new Date(n)},t:function(n){return new Date(n)},u:function(n){n=n.replace(/-/g,"");var t,i,s=t=0;for(i=24;8>s;s+=2,i-=8)t|=parseInt(n.substring(s,s+2),16)<<i;var o=0;for(s=8,i=24;16>s;s+=2,i-=8)o|=parseInt(n.substring(s,s+2),16)<<i;var f=va(o,t);for(t=0,s=16,i=24;24>s;s+=2,i-=8)t|=parseInt(n.substring(s,s+2),16)<<i;for(o=0,i=s=24;32>s;s+=2,i-=8)o|=parseInt(n.substring(s,s+2),16)<<i;return new JA(f,va(o,t))},set:function(n){return VA(n)},list:function(n){return FA("list",n)},link:function(n){return FA("link",n)},cmap:function(n){return SA(n,!1)}},lf:function(n,t){return FA(n,t)},ye:!0,yf:!0};XA.prototype.decode=function(n,t,i,s){if(n==null)return null;switch(typeof n){case"string":return qA(n,i)?(n=ZA(this,n),t&&t.write(n,i),t=n):t=n.charAt(0)==="^"&&n.charAt(1)!==" "?t.read(n,i):ZA(this,n),t;case"object":if(uA(n))if(n[0]==="^ ")if(this.Eb)if(17>n.length&&this.Eb.fromArray){for(s=[],i=1;i<n.length;i+=2)s.push(this.decode(n[i],t,!0,!1)),s.push(this.decode(n[i+1],t,!1,!1));t=this.Eb.fromArray(s,n)}else{for(s=this.Eb.init(n),i=1;i<n.length;i+=2)s=this.Eb.add(s,this.decode(n[i],t,!0,!1),this.decode(n[i+1],t,!1,!1),n);t=this.Eb.finalize(s,n)}else{for(s=[],i=1;i<n.length;i+=2)s.push(this.decode(n[i],t,!0,!1)),s.push(this.decode(n[i+1],t,!1,!1));t=SA(s,!1)}else t=YA(this,n,t,i,s);else{i=wA(n);var o=i[0];if((s=i.length==1?this.decode(o,t,!1,!1):null)&&s instanceof WA)n=n[o],i=this.Ma[s.Za],t=i!=null?i(this.decode(n,t,!1,!0),this):FA(s.Za,this.decode(n,t,!1,!1));else if(this.Eb)if(16>i.length&&this.Eb.fromArray){var f=[];for(s=0;s<i.length;s++)o=i[s],f.push(this.decode(o,t,!0,!1)),f.push(this.decode(n[o],t,!1,!1));t=this.Eb.fromArray(f,n)}else{for(f=this.Eb.init(n),s=0;s<i.length;s++)o=i[s],f=this.Eb.add(f,this.decode(o,t,!0,!1),this.decode(n[o],t,!1,!1),n);t=this.Eb.finalize(f,n)}else{for(f=[],s=0;s<i.length;s++)o=i[s],f.push(this.decode(o,t,!0,!1)),f.push(this.decode(n[o],t,!1,!1));t=SA(f,!1)}}return t}return n};XA.prototype.decode=XA.prototype.decode;aB.prototype.read=function(n){var t=this.cache;return n=this.yh.Yg.decode(JSON.parse(n),t),this.cache.clear(),n};aB.prototype.read=aB.prototype.read;var cB=0,taa=(8|3&Math.round(14*Math.random())).toString(16),bB="transit$guid$"+(pA()+pA()+pA()+pA()+pA()+pA()+pA()+pA()+"-"+pA()+pA()+pA()+pA()+"-4"+pA()+pA()+pA()+"-"+taa+pA()+pA()+pA()+"-"+pA()+pA()+pA()+pA()+pA()+pA()+pA()+pA()+pA()+pA()+pA()+pA());fB.prototype.tag=function(){return"_"};fB.prototype.rep=function(){return null};fB.prototype.stringRep=function(){return"null"};gB.prototype.tag=function(){return"s"};gB.prototype.rep=function(n){return n};gB.prototype.stringRep=function(n){return n};hB.prototype.tag=function(){return"i"};hB.prototype.rep=function(n){return n};hB.prototype.stringRep=function(n){return n.toString()};iB.prototype.tag=function(){return"i"};iB.prototype.rep=function(n){return n.toString()};iB.prototype.stringRep=function(n){return n.toString()};jB.prototype.tag=function(){return"?"};jB.prototype.rep=function(n){return n};jB.prototype.stringRep=function(n){return n.toString()};kB.prototype.tag=function(){return"array"};kB.prototype.rep=function(n){return n};kB.prototype.stringRep=function(){return null};lB.prototype.tag=function(){return"map"};lB.prototype.rep=function(n){return n};lB.prototype.stringRep=function(){return null};mB.prototype.tag=function(){return"t"};mB.prototype.rep=function(n){return n.getUTCFullYear()+"-"+eB(n.getUTCMonth()+1,2)+"-"+eB(n.getUTCDate(),2)+"T"+eB(n.getUTCHours(),2)+":"+eB(n.getUTCMinutes(),2)+":"+eB(n.getUTCSeconds(),2)+"."+eB(n.getUTCMilliseconds(),3)+"Z"};mB.prototype.stringRep=function(n,t){return t.rep(n)};nB.prototype.tag=function(){return"m"};nB.prototype.rep=function(n){return n.valueOf()};nB.prototype.stringRep=function(n){return n.valueOf().toString()};nB.prototype.getVerboseHandler=function(){return new mB};oB.prototype.tag=function(){return"u"};oB.prototype.rep=function(n){return n.toString()};oB.prototype.stringRep=function(n){return n.toString()};pB.prototype.tag=function(){return":"};pB.prototype.rep=function(n){return n.Ia};pB.prototype.stringRep=function(n,t){return t.rep(n)};qB.prototype.tag=function(){return"$"};qB.prototype.rep=function(n){return n.Ia};qB.prototype.stringRep=function(n,t){return t.rep(n)};rB.prototype.tag=function(n){return n.tag};rB.prototype.rep=function(n){return n.rep};rB.prototype.stringRep=function(){return null};sB.prototype.tag=function(){return"set"};sB.prototype.rep=function(n){var t=[];return n.forEach(function(i){t.push(i)}),FA("array",t)};sB.prototype.stringRep=function(){return null};tB.prototype.tag=function(){return"map"};tB.prototype.rep=function(n){return n};tB.prototype.stringRep=function(){return null};uB.prototype.tag=function(){return"map"};uB.prototype.rep=function(n){return n};uB.prototype.stringRep=function(){return null};vB.prototype.tag=function(){return"b"};vB.prototype.rep=function(n){return n.toString("base64")};vB.prototype.stringRep=function(){return null};wB.prototype.tag=function(){return"b"};wB.prototype.rep=function(n){for(var t,i=0,s=n.length,o="",f;i<s;)f=n.subarray(i,Math.min(i+32768,s)),o+=String.fromCharCode.apply(null,f),i+=32768;if(typeof btoa<"u")t=btoa(o);else{for(n=String(o),s=0,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="";n.charAt(s|0)||(o="=",s%1);f+=o.charAt(63&t>>8-s%1*8)){if(i=n.charCodeAt(s+=.75),255<i)throw Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|i}t=f}return t};wB.prototype.stringRep=function(){return null};xB.prototype.get=function(n){return n=typeof n=="string"?this.Ma[n]:this.Ma[dB(n)],n??this.Ma.default};xB.prototype.get=xB.prototype.get;xB.prototype.set=function(n,t){var i;if(i=typeof n=="string")e:{switch(n){case"null":case"string":case"boolean":case"number":case"array":case"map":i=!1;break e}i=!0}i?this.Ma[n]=t:this.Ma[dB(n)]=t};yB.prototype.sb=function(n){var t=this.Ma.get(n==null?null:n.constructor);return t??((n=n&&n.transitTag)?this.Ma.get(n):null)};GB.prototype.eh=function(){return this.jd};GB.prototype.marshaller=GB.prototype.eh;GB.prototype.write=function(n,t){var i=t||{};t=i.asMapKey||!1;var s=this.jd.Sd?!1:this.cache;if(i.marshalTop===!1)n=AB(this.jd,n,t,s);else{i=this.jd;var o=JSON,f=o.stringify,d=AB,p=i.sb(n)||(i.Fd?i.Fd(n,i.Ma):null);if(p!=null)n=p.tag(n).length===1?FA("'",n):n;else throw t=(n==null?null:n.constructor).name,s=Error("Cannot write "+t),s.data={uf:n,type:t},s;n=f.call(o,d(i,n,t,s))}return this.cache!=null&&this.cache.clear(),n};GB.prototype.write=GB.prototype.write;GB.prototype.register=function(n,t){this.jd.Ma.set(n,t)};GB.prototype.register=GB.prototype.register;Fk.prototype.M=function(n,t){return t instanceof Fk?this.Vb===t.Vb:t instanceof JA?this.Vb===t.toString():!1};Fk.prototype.Zb=Zd;Fk.prototype.yb=function(n,t){if(t instanceof Fk||t instanceof JA)return mf(this.toString(),t.toString());throw Error(["Cannot compare ",m.g(this)," to ",m.g(t)].join(""))};JA.prototype.Zb=Zd;JA.prototype.yb=function(n,t){if(t instanceof Fk||t instanceof JA)return mf(this.toString(),t.toString());throw Error(["Cannot compare ",m.g(this)," to ",m.g(t)].join(""))};ua.prototype.M=function(n,t){return this.da(t)};JA.prototype.M=function(n,t){return t instanceof Fk?t.M(null,this):this.da(t)};EA.prototype.M=function(n,t){return this.da(t)};ua.prototype.bf=Zd;ua.prototype.X=function(){return yA(this)};JA.prototype.bf=Zd;JA.prototype.X=function(){return $d(this.toString())};EA.prototype.bf=Zd;EA.prototype.X=function(){return yA(this)};JA.prototype.Xf=Zd;JA.prototype.ja=Zd;JA.prototype.W=function(n,t){return qd(t,['#uuid "',m.g(this.toString()),'"'].join(""))};KB.prototype.init=function(){return wd(og)};KB.prototype.add=function(n,t,i){return zd(n,t,i)};KB.prototype.finalize=function(n){return yd(n)};KB.prototype.fromArray=function(n){return fi.l?fi.l(n,!0,!0):fi.call(null,n,!0,!0)};LB.prototype.init=function(){return wd(lh)};LB.prototype.add=function(n,t){return xd(n,t)};LB.prototype.finalize=function(n){return yd(n)};LB.prototype.fromArray=function(n){return Ch.h?Ch.h(n,!0):Ch.call(null,n,!0)};XB.prototype.tag=function(){return":"};XB.prototype.rep=function(n){return n.U};XB.prototype.stringRep=function(n){return n.U};YB.prototype.tag=function(){return"$"};YB.prototype.rep=function(n){return n.Za};YB.prototype.stringRep=function(n){return n.Za};ZB.prototype.tag=function(){return"list"};ZB.prototype.rep=function(n){var t=[];n=w(n);for(var i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o);t.push(f),o+=1}else if(n=w(n))i=n,df(i)?(n=Fd(i),o=Gd(i),i=n,s=D(n),n=o):(n=z(i),t.push(n),n=C(i),i=null,s=0),o=0;else break;return FA("array",t)};ZB.prototype.stringRep=function(){return null};$B.prototype.tag=function(){return"map"};$B.prototype.rep=function(n){return n};$B.prototype.stringRep=function(){return null};aC.prototype.tag=function(){return"set"};aC.prototype.rep=function(n){var t=[];n=w(n);for(var i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o);t.push(f),o+=1}else if(n=w(n))i=n,df(i)?(n=Fd(i),o=Gd(i),i=n,s=D(n),n=o):(n=z(i),t.push(n),n=C(i),i=null,s=0),o=0;else break;return FA("array",t)};aC.prototype.stringRep=function(){return null};bC.prototype.tag=function(){return"array"};bC.prototype.rep=function(n){var t=[];n=w(n);for(var i=null,s=0,o=0;;)if(o<s){var f=i.S(null,o);t.push(f),o+=1}else if(n=w(n))i=n,df(i)?(n=Fd(i),o=Gd(i),i=n,s=D(n),n=o):(n=z(i),t.push(n),n=C(i),i=null,s=0),o=0;else break;return t};bC.prototype.stringRep=function(){return null};cC.prototype.tag=function(){return"u"};cC.prototype.rep=function(n){return n.Vb};cC.prototype.stringRep=function(n){return this.rep(n)};eC.prototype.tag=function(){return"with-meta"};eC.prototype.rep=function(n){return FA("array",[n.value,n.D])};eC.prototype.stringRep=function(){return null};var r0=function n(t){switch(arguments.length){case 0:return n.G();case 1:return n.g(arguments[0]);case 2:return n.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",m.g(arguments.length)].join(""))}};r0.G=function(){return r0.g(og)};r0.g=function(n){return r0.h(jC(n),n)};r0.h=function(n,t){return Jy(new h(null,3,[uI,sC(t),vI,"Transit",wI,new R(null,1,5,S,["application/transit+json"],null)],null))};r0.v=2;var P$;if(typeof rz<"u"&&typeof $a<"u"&&typeof $a.XMLHttpRequest<"u")P$=$a.XMLHttpRequest;else{var Q$;if(typeof require<"u"){var R$=require;Q$=(R$.g?R$.g("xmlhttprequest"):R$.call(null,"xmlhttprequest")).XMLHttpRequest}else Q$=null;P$=Q$}var v0=P$;g=v0.prototype;g.Oe=function(n,t,i){var s=M(t),o=J.h(s,FI),f=J.h(s,yI);n=J.h(s,iI),t=J.h(s,yX);var d=J.l(s,t2,0),p=J.l(s,c1,!1);s=J.h(s,AI);var v=this;for(v.withCredentials=p,v.onreadystatechange=function(_){var k=E,P=k.h;_=_.target.readyState;var L=new h(null,5,[0,Q7,1,K3,2,z4,3,k8,4,y8],null);return _=L.g?L.g(_):L.call(null,_),P.call(k,y8,_)?i.g?i.g(v):i.call(null,v):null},v.open(f,o,!0),v.timeout=d,o=pF.g(s),l(o)&&(v.responseType=qj(o)),t=w(t),o=null,d=f=0;;)if(d<f)s=o.S(null,d),p=I(s,0,null),s=I(s,1,null),v.setRequestHeader(p,s),d+=1;else if(t=w(t))df(t)?(f=Fd(t),t=Gd(t),o=f,f=D(f)):(f=z(t),o=I(f,0,null),f=I(f,1,null),v.setRequestHeader(o,f),t=C(t),o=null,f=0),d=0;else break;return v.send(l(n)?n:""),v};g.Pe=function(){return this.response};g.Re=function(){return this.status};g.Se=function(){return this.statusText};g.Qe=function(n,t){return this.getResponseHeader(t)};g.Te=function(){return E.h(0,this.readyState)};ww(gJ,function(n,t){n=M(n),n=J.h(n,GH),I(t,0,null),t=I(t,1,null);var i=["http://localhost:3001/api/",Nk("/",O.h(qj,t))].join(""),s=mC?mC():oC.call(null),o=new h(null,1,[B2,!0],null);return o=r0.g?r0.g(o):r0.call(null,o),new h(null,2,[GH,n,L0,new h(null,8,[yI,L6,FI,i,t2,1e4,BI,s,AI,o,OI,new R(null,2,5,S,[HW,t],null),KI,new R(null,2,5,S,[RY,t],null),MI,new R(null,2,5,S,[O4,t],null)],null)],null)});J_.h(RY,function(n,t){I(t,0,null);var i=I(t,1,null);return t=I(t,2,null),Bn(Bn(n,i,t),new R(null,2,5,S,[fJ,i],null),IX)});ww(v7,function(n,t){n=M(n),n=J.h(n,GH),I(t,0,null);var i=I(t,1,null);t=I(t,2,null);var s=M(t);t=J.h(s,Nq),s=J.h(s,jZ);var o=["/",Nk("/",O.h(qj,i))].join(""),f=mC?mC():oC.call(null),d=new h(null,1,[B2,!0],null);return d=r0.g?r0.g(d):r0.call(null,d),new h(null,2,[GH,n,L0,Ni([BI,yI,AI,Nq,KI,MI,OI,FI,t2],[f,w1,d,l(t)?t:og,l(s)?s:new R(null,2,5,S,[o2,i],null),new R(null,2,5,S,[O4,i],null),new R(null,2,5,S,[HW,i],null),["http://localhost:3001/api",o].join(""),1e4])],null)});J_.h(o2,function(n,t){I(t,0,null);var i=I(t,1,null);return t=I(t,2,null),Bn(Bn(n,i,t),new R(null,2,5,S,[fJ,i],null),IX)});ww(MK,function(n,t){n=M(n),n=J.h(n,GH),I(t,0,null),t=I(t,1,null);var i=["http://localhost:3001/api/",Nk("/",O.h(qj,t))].join(""),s=mC?mC():oC.call(null),o=new h(null,1,[B2,!0],null);return o=r0.g?r0.g(o):r0.call(null,o),new h(null,2,[GH,n,L0,new h(null,8,[yI,tT,FI,i,t2,1e4,BI,s,AI,o,OI,new R(null,2,5,S,[HW,t],null),KI,new R(null,2,5,S,[LQ,t],null),MI,new R(null,2,5,S,[O4,t],null)],null)],null)});J_.h(LQ,function(n,t){I(t,0,null);var i=I(t,1,null);return nK.l(nK.l(n,pj(i),function(s){return wl.h(s,Le(i))}),new R(null,2,5,S,[fJ,i],null),wl)});J_.h(O4,function(n,t){I(t,0,null);var i=I(t,1,null);return t=I(t,2,null),Bn(Bn(n,new R(null,2,5,S,[RV,i],null),t),new R(null,2,5,S,[fJ,i],null),F5)});J_.h(HW,function(n,t){return I(t,0,null),t=I(t,1,null),Bn(n,new R(null,2,5,S,[fJ,t],null),xH)});yw(Q0,F([function(n){return fJ.g(n)}]));ww(X2,function(n){n=M(n),n=J.h(n,GH);var t=f7.g(V8.g(n)),i=mC?mC():oC.call(null),s=new h(null,1,[B2,!0],null);return s=r0.g?r0.g(s):r0.call(null,s),new h(null,2,[GH,n,L0,new h(null,8,[yI,w1,FI,"http://localhost:3001/api/data/upload/volcano",Nq,t,t2,1e4,BI,i,AI,s,KI,new R(null,1,5,S,[u2],null),MI,new R(null,1,5,S,[QS],null)],null)],null)});J_.h(u2,function(n,t){I(t,0,null);var i=I(t,1,null);return nK.l(n,new R(null,3,5,S,[NK,oF,HK],null),function(s){return Al.j(F([s,i]))})});vC.string=function(n){return n};vC.number=function(n){return n};Fk.prototype.Ue=function(){return m.g(this)};K.prototype.Ue=function(){var n=[Wf(this),l(Wf(this))?"/":null,qj(this)].join("");return n=n==null?null:m.g(n),n=n==null?null:encodeURIComponent(n),n==null?null:n.replace("+","%20")};wC.string=function(n){return n};xC.string=function(){return null};yC.string=function(){return Df};zC.string=function(n){return n};RegExp.prototype.Xd=function(){return this.source};RegExp.prototype.Wd=function(){return null};RegExp.prototype.Yd=function(){return Df};RegExp.prototype.Rf=function(n,t){return Bj(this,m.g(t))};R.prototype.Xd=function(){return wC(z(this))};R.prototype.Wd=function(){var n=Ke(this);if(n instanceof K)return n;throw Ik([`If a PatternSegment is represented by a vector, the second
                               element must be the keyword associated with the pattern: `,m.g(this)].join(""),og)};R.prototype.Yd=function(){return yC(z(this))};R.prototype.Ve=function(n,t){if(n=Ke(this),!(n instanceof K))throw Ik([`If a PatternSegment is represented by a vector, the second element
                               must be the key associated with the pattern: `,m.g(this)].join(""),og);if(t=J.h(t,n),l(t)){if(l(AC(z(this),t)))return vC(t);throw Ik(["Parameter value of ",m.g(t)," (key ",m.g(n),") is not compatible with the route pattern ",m.g(this)].join(""),og)}throw Ik(["No parameter found in params for key ",m.g(n)].join(""),og)};K.prototype.Xd=function(){return"[A-Za-z0-9\\-\\_\\.]+"};K.prototype.Wd=function(){return this};K.prototype.Yd=function(){return Df};K.prototype.Ve=function(n,t){if(n=this.g(t),l(n))return vC(n);throw Ik(["Cannot form URI without a value given for ",m.g(this)," parameter"].join(""),og)};wC.function=function(n){if(l(E.h?E.h(Nj,n):E.call(null,Nj,n)))return"[A-Za-z]+[A-Za-z0-9\\*\\+\\!\\-\\_\\?\\.]*(?:%2F[A-Za-z]+[A-Za-z0-9\\*\\+\\!\\-\\_\\?\\.]*)?";if(l(E.h?E.h(Hf,n):E.call(null,Hf,n)))return"-?\\d{1,19}";if(l(E.h?E.h(uC,n):E.call(null,uC,n)))return"[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}";throw l(E.h?E.h(mS,n):E.call(null,mS,n))?Ik(["Unidentified function qualifier to pattern segment: ",m.g(n)].join(""),og):Error(["No matching clause: ",m.g(n)].join(""))};yC.function=function(n){if(l(E.h?E.h(Nj,n):E.call(null,Nj,n)))return kn.h(Nj,tC);if(l(E.h?E.h(Hf,n):E.call(null,Hf,n)))return function(t){return Number(t)};if(l(E.h?E.h(uC,n):E.call(null,uC,n)))return uC;throw Ik(["Unrecognized function ",m.g(n)].join(""),og)};AC.function=function(n,t){if(l(E.h?E.h(Nj,n):E.call(null,Nj,n)))return t instanceof K;if(l(E.h?E.h(Hf,n):E.call(null,Hf,n)))return gc(isNaN(t));if(l(E.h?E.h(uC,n):E.call(null,uC,n)))return t instanceof Fk;throw Error(["No matching clause: ",m.g(n)].join(""))};R.prototype.vc=function(n,t){var i=this;if(n=function(){var o=O.h(wC,i);return o=O.h(function(f){return["(",m.g(f),")"].join("")},o),o=Af(m,o),o=[m.g(o),"(.*)"].join(""),o=Dj(o),o=Bj(o,cJ.g(t)),C(o)}()){var s=Ng.h(og,jh.h(z,O.l(dm,O.h(xC,i),O.l(Kg,O.h(yC,i),O.h(ux,pj(n))))));return nK.K(Bn(t,new R(null,1,5,S,[cJ],null),Le(n)),new R(null,1,5,S,[uS],null),Al,s)}return null};R.prototype.wc=function(n,t){return Kg.h(m,O.h(function(i){return zC(i,Nq.g(t))},this))};RegExp.prototype.vc=function(n,t){return IC(["(",m.g(wC(this)),")"].join(""),t)};RegExp.prototype.wc=function(n,t){return n=this.pattern(),CC(Mk(n,/\\\\/,""),t)};BC.boolean=function(n,t){return n?gj.l(t,cJ,""):null};CC.boolean=function(n){return n?"":null};jj.prototype.vc=function(n,t){return Jg(function(i){return BC(i,t)},KL.l(D,iK,this))};jj.prototype.wc=function(n,t){return CC(z(this),t)};nj.prototype.vc=function(n,t){return Jg(function(i){return BC(i,t)},KL.l(D,iK,this))};nj.prototype.wc=function(n,t){return CC(z(this),t)};h.prototype.vc=function(n,t){return Ig(function(i){var s=I(i,0,null);return i=I(i,1,null),Qe(i)||Xe(i)?(s=J.h(t,s),i.g?i.g(s):i.call(null,s)):E.h(i,J.h(t,s))},w(this))?t:null};h.prototype.wc=function(){return""};BC.string=function(n,t){return IC(["(",m.g(wC(n)),")"].join(""),t)};CC.string=function(n){return n};Mi.prototype.vc=function(n,t){return Ig(function(i){var s=I(i,0,null);return i=I(i,1,null),Qe(i)||Xe(i)?(s=J.h(t,s),i.g?i.g(s):i.call(null,s)):E.h(i,J.h(t,s))},w(this))?t:null};Mi.prototype.wc=function(){return""};K.prototype.vc=function(n,t){return E.h(this,W8.g(t))?t:null};K.prototype.wc=function(){return""};DC.null=function(){return null};EC.null=function(){return null};R.prototype.tc=function(n,t){return Jg(function(i){return HC(i,t)},this)};R.prototype.uc=function(n,t){return Jg(function(i){return KC(i,t)},this)};gg.prototype.tc=function(n,t){return JC(this,t)};gg.prototype.uc=function(n,t){return EC(q(this),t)};h.prototype.tc=function(n,t){return Jg(function(i){return HC(i,t)},this)};h.prototype.uc=function(n,t){return Jg(function(i){return KC(i,t)},this)};Mf.prototype.tc=function(n,t){return Jg(function(i){return HC(i,t)},this)};Mf.prototype.uc=function(n,t){return Jg(function(i){return KC(i,t)},this)};EC.string=function(){return null};r.prototype.tc=function(n,t){return JC(this,t)};r.prototype.uc=function(n,t){return E.h(this,DI.g(t))?"":null};DC.function=function(n,t){return JC(n,t)};EC.function=function(n,t){return E.h(n,DI.g(t))?"":null};Mi.prototype.tc=function(n,t){return Jg(function(i){return HC(i,t)},this)};Mi.prototype.uc=function(n,t){return Jg(function(i){return KC(i,t)},this)};Yf.prototype.tc=function(n,t){return Jg(function(i){return HC(i,t)},this)};Yf.prototype.uc=function(n,t){return Jg(function(i){return KC(i,t)},this)};K.prototype.tc=function(n,t){return JC(this,t)};K.prototype.uc=function(n,t){return E.h(this,DI.g(t))?"":null};var w0=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],2<i.length?new u(i.slice(2),0,null):null)};w0.j=function(n,t,i){if(i=M(i),t==null)throw Ik("Cannot form URI from a nil handler",og);return KC(n,new h(null,2,[DI,t,Nq,i],null))};w0.v=2;w0.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};na(NC,yu);var x0=new WeakMap;(function(n,t=OC){const i=fa(n),s=([,...f])=>t(i,f),o=([f,...d])=>n.apply(f,d);return function(...f){var d=this||$a,p=x0.get(d);return p||(p={},x0.set(d,p)),d=p,f=[this,...f],p=s?s(f):f,Object.prototype.hasOwnProperty.call(d,p)?d[p]:d[p]=o(f)}})(function(){return mz?8<=Number(v_):"onhashchange"in $a});na(PC,cz);PC.prototype.nf=!1;PC.prototype.Rd=!0;PC.prototype.xe="/";PC.prototype.vf=function(n){if(this.nf){const t=QC(this);(n.type=="popstate"||t!=this.gg)&&(this.gg=t,this.dispatchEvent(new NC(RC(this))))}};UC.prototype.yg=function(){};UC.prototype.bg=function(){};ZC.prototype.Z=function(n,t){return new ZC(this.Bd,this.qh,this.bc,this.ze,this.P,this.dh,this.history,this.Ae,this.dc,t)};ZC.prototype.Y=function(){return this.kh};ww(u8,function(n){return n=M(n),n=J.h(n,GH),new h(null,2,[GH,n,L0,new h(null,8,[yI,w1,FI,"http://localhost:3001/api/pipelines/msa",Nq,nK.l(nK.l(nO.g(V8.g(n)),new R(null,2,5,S,[tO,GO],null),function(t){return oj(Ok(Mk(t,/[,;]/," "),/\s+/))}),new R(null,2,5,S,[tO,sO],null),function(t){return oj(Ok(Mk(t,/[,;]/," "),/\s+/))}),t2,1e4,BI,mC?mC():oC.call(null),AI,function(){var t=new h(null,1,[B2,!0],null);return r0.g?r0.g(t):r0.call(null,t)}(),KI,new R(null,1,5,S,[CX],null),MI,new R(null,1,5,S,[$0],null)],null)],null)});ww(sU,function(n){n=M(n),n=J.h(n,GH);var t=mC?mC():oC.call(null),i=new h(null,1,[B2,!0],null);return i=r0.g?r0.g(i):r0.call(null,i),new h(null,2,[GH,n,L0,new h(null,7,[yI,L6,FI,"http://localhost:3001/api/results/msa",t2,1e4,BI,t,AI,i,KI,new R(null,1,5,S,[yR],null),MI,new R(null,1,5,S,[$0],null)],null)],null)});ww(CX,function(n,t){return n=M(n),n=J.h(n,GH),I(t,0,null),I(t,1,null),new h(null,2,[GH,n,R5,lQ],null)});ww(yR,function(n,t){return n=M(n),n=J.h(n,GH),I(t,0,null),t=I(t,1,null),new h(null,2,[GH,Bn(n,new R(null,2,5,S,[D1,nO],null),rj(O.h(ZX,D1.g(t)),D1.g(t))),R5,lQ],null)});var XP={},OL=Pk.l(kJ,"#fafa6e","#2A4858"),PL=Pk.l(kJ,"#FFCCCC","#FF0000"),QL=Pk.l(kJ,"#6A0DAD","#FF69B4"),S$,uaa=Tg(og),vaa=Tg(og),waa=Tg(og),xaa=Tg(og),yaa=J.l(og,u4,tk.G?tk.G():tk.call(null));S$=new Bk(Xj.h("schmoho.dasudopit.client.routing","panels"),Df,yaa,uaa,vaa,waa,xaa);S$.Nh(null,sm,function(){return new R(null,2,5,S,[dA,"No panel found for this route."],null)});var T$,zaa=Tg(og),Aaa=Tg(og),Baa=Tg(og),Caa=Tg(og),Daa=J.l(og,u4,tk.G?tk.G():tk.call(null));T$=new Bk(Xj.h("schmoho.dasudopit.client.routing","header"),Df,Daa,zaa,Aaa,Baa,Caa);T$.Nh(null,sm,function(){return new R(null,2,5,S,[dA,"No header found for this route."],null)});var U$=Tg(new R(null,2,5,S,["/",new h(null,5,["",iQ,"data/",new h(null,8,["overview",jQ,"taxon",vQ,"taxon/",ng([lj([new R(null,2,5,S,[WK,""],null),new R(null,2,5,S,[WK,"/"],null)]),qZ]),"ligand",LW,"ligand/",ng([lj([new R(null,2,5,S,[HJ,""],null),new R(null,2,5,S,[HJ,"/"],null)]),XU]),"protein/",ng([lj([new R(null,2,5,S,[nY,""],null),new R(null,2,5,S,[nY,"/"],null)]),h5]),"upload",LM,"volcano/",ng([lj([new R(null,2,5,S,[k3,""],null),new R(null,2,5,S,[k3,"/"],null)]),U8])],null),"pipelines/",new h(null,2,["msa",HM,"docking",JM],null),"volcano-viewer",new h(null,2,["",JK,"/",JK],null),"results/",new h(null,2,["msa-results",lQ,"docking-results",mQ],null)],null)],null)),V$=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};V$.j=function(n){return Kg.h(w0,Ng.h(new R(null,1,5,S,[q(U$)],null),n))};V$.v=0;V$.B=function(n){return this.j(w(n))};var eJ=function(n){for(var t=[],i=arguments.length,s=0;s<i;)t.push(arguments[s]),s+=1;i=arguments[0],s=arguments[1],t=2<t.length?new u(t.slice(2),0,null):null;var o=M(t),f=J.l(o,O3,XC),d=J.l(o,C3,Df),p=J.l(o,M3,Mg(!1)),v=WC();return v=new PC(window,v),v.Rd!=0&&(Tu(v.sc,"hashchange",v.vf,!1,v),v.Rd=!1),v.xe="",v.nf!=1&&(v.nf=!0,v.dispatchEvent(new NC(RC(v)))),new ZC(Tg(null),t,d,p,i,o,v,f,s,og)}(function(n){return Yv(new R(null,2,5,S,[z7,n],null))},function(n){return MC(q(U$),n)});ww(IK,function(n,t){return I(t,0,null),n=I(t,1,null),new h(null,1,[R5,n],null)});ww(z7,function(n,t){return n=M(n),n=J.h(n,GH),I(t,0,null),t=I(t,1,null),new h(null,2,[GH,gj.j(n,g6,t,F([U0,DI.g(t)])),oZ,t],null)});ev(J2,R5,function(n){return n=We(n)?Kg.h(V$,n):V$.j(F([n])),TC(n)});ev(J2,oZ,function(n){var t=M(n);switch(n=J.h(t,DI),t=J.h(t,uS),n instanceof K?n.U:null){case"routing.results/msa-results":return Yv(new R(null,1,5,S,[sU],null));case"routing.data/overview":return hJ(new R(null,2,5,S,[NK,HK],null)),hJ(new R(null,2,5,S,[NK,OK],null)),hJ(new R(null,2,5,S,[NK,KK],null));case"routing.data/taxon-entry":return hJ(new R(null,3,5,S,[NK,KK,WK.g(t)],null));case"routing.data/taxon":return hJ(new R(null,2,5,S,[NK,KK],null));case"routing.data/ligand-entry":return hJ(new R(null,3,5,S,[NK,OK,HJ.g(t)],null));case"routing.data/ligand":return hJ(new R(null,2,5,S,[NK,OK],null));case"routing.data/upload":return hJ(new R(null,2,5,S,[NK,KK],null));case"routing/volcano-viewer":return hJ(new R(null,2,5,S,[NK,HK],null));case"routing.pipelines/docking":return hJ(new R(null,2,5,S,[NK,OK],null)),hJ(new R(null,2,5,S,[NK,KK],null));default:return null}});yw(e8,F([function(n){return g6.g(n)}]));yw(eQ,F([Y_,new R(null,1,5,S,[e8],null),function(n){return DI.g(n)}]));yw(FJ,F([Y_,new R(null,1,5,S,[e8],null),function(n){return uS.g(n)}]));var Eaa=cy(nJ);cy(function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,3,[zD,"#f0f8ff",lJ,"0 4px 8px rgba(0, 0, 0, 0.2)",mJ,"background-color 0.3s ease, box-shadow 0.3s ease"],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)});var W$=new h(null,6,[qC,"100px",gD,"100px",NQ,"black",kI,"100%, 100%",yD,"50%",E0,"none"],null);cy(function(n){var t=new R(null,3,5,S,[[".",m.g(n)].join(""),W$,new R(null,2,5,S,[gV,new h(null,3,[UP,'"<"',HD,"55px",GD,"#787878"],null)],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)});cy(function(n){var t=new R(null,3,5,S,[[".",m.g(n)].join(""),W$,new R(null,2,5,S,[gV,new h(null,3,[UP,'">"',HD,"55px",GD,"#787878"],null)],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)});var FM=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],arguments[2],3<i.length?new u(i.slice(3),0,null):null)};FM.j=function(n,t,i,s){s=M(s);var o=J.h(s,KD),f=fn(!1);return function(){return new R(null,4,5,S,[dA,new h(null,5,[T,["card bg-light mb-3 ",m.g(l(q(f))?by(T,Eaa,nJ,lh):"")].join(""),X,new h(null,1,[gD,"42rem"],null),qE,function(){return N(f,!0),null},rE,function(){return N(f,!1),null},KD,o],null),new R(null,3,5,S,[dA,new h(null,1,[T,"card-header"],null),n],null),new R(null,4,5,S,[dA,new h(null,2,[T,"card-body",X,new h(null,1,[HD,"16px"],null)],null),new R(null,3,5,S,[j3,new h(null,1,[T,"card-title"],null),t],null),i],null)],null)}};FM.v=3;FM.B=function(n){var t=z(n),i=C(n);n=z(i);var s=C(i);return i=z(s),s=C(s),this.j(t,n,i,s)};var X$=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],arguments[1],2<i.length?new u(i.slice(2),0,null):null)};X$.j=function(n,t,i){var s=M(i);i=J.h(s,NY);var o=J.h(s,UX);s=J.h(s,Xx),s=l(s)?s:jJ();var f=[m.g(s),"-aria"].join("");return new R(null,4,5,S,[dA,new h(null,1,[T,"card bg-light"],null),new R(null,3,5,S,[dA,new h(null,6,[T,"card-header",Xx,s,qW,"collapse",DS,["#",f].join(""),zQ,i,KX,f],null),new R(null,3,5,S,[ZL,new h(null,1,[T,"mb-0"],null),n],null)],null),new R(null,3,5,S,[dA,new h(null,4,[Xx,f,T,"collapse show",y2,s,UX,o],null),new R(null,3,5,S,[dA,new h(null,1,[T,"card-body"],null),t],null)],null)],null)};X$.v=2;X$.B=function(n){var t=z(n),i=C(n);return n=z(i),i=C(i),this.j(t,n,i)};var cQ=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};cQ.j=function(n){var t=jJ();return Ng.h(new R(null,2,5,S,[dA,new h(null,3,[T,"accordion",Xx,t,X,new h(null,1,[gD,"1200px"],null)],null)],null),function(){return function i(s){return new Yf(null,function(){for(var o=s;;)if(o=w(o)){if(df(o)){var f=Fd(o),d=D(f),p=ag(d);e:for(var v=0;;)if(v<d){var _=Oe(f,v);_!=null&&(_=Se(new R(null,5,5,S,[X$,z(_),Ke(_),UX,["#",m.g(t)].join("")],null),new h(null,1,[fx,z(_)],null)),p.add(_)),v+=1}else{f=!0;break e}return f?dg(p.fa(),i(Gd(o))):dg(p.fa(),null)}if(p=z(o),p!=null)return Tf(Se(new R(null,5,5,S,[X$,z(p),Ke(p),UX,["#",m.g(t)].join("")],null),new h(null,1,[fx,z(p)],null)),i(he(o)));o=he(o)}else return null},null,null)}(n)}())};cQ.v=0;cQ.B=function(n){return this.j(w(n))};var DK=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};DK.j=function(n){var t=jJ();return Ng.h(new R(null,2,5,S,[dA,new h(null,3,[T,"accordion",Xx,t,X,new h(null,1,[gD,"1200px"],null)],null)],null),function(){return function i(s){return new Yf(null,function(){for(var o=s;;)if(o=w(o)){if(df(o)){var f=Fd(o),d=D(f),p=ag(d);e:for(var v=0;;)if(v<d){var _=Oe(f,v);_!=null&&(_=Se(new R(null,3,5,S,[X$,z(_),Ke(_)],null),new h(null,1,[fx,z(_)],null)),p.add(_)),v+=1}else{f=!0;break e}return f?dg(p.fa(),i(Gd(o))):dg(p.fa(),null)}if(p=z(o),p!=null)return Tf(Se(new R(null,3,5,S,[X$,z(p),Ke(p)],null),new h(null,1,[fx,z(p)],null)),i(he(o)));o=he(o)}else return null},null,null)}(n)}())};DK.v=0;DK.B=function(n){return this.j(w(n))};var hL=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};hL.j=function(n){return n=M(n),n=J.h(n,mE),new R(null,9,5,S,[ED,U,null,mE,n,xJ,JJ,X,new h(null,1,[GD,"white"],null)],null)};hL.v=0;hL.B=function(n){return this.j(w(n))};S$.Nh(null,LW,function(){return new R(null,1,5,S,[EJ],null)});T$.Nh(null,LW,function(){return new R(null,3,5,S,[hL,mE,"Ligands Library"],null)});S$.Nh(null,XU,function(){return new R(null,1,5,S,[LJ],null)});T$.Nh(null,XU,function(){return new R(null,1,5,S,[MJ],null)});J_.h(FK,function(n,t){t=w(t),z(t);var i=C(t);return t=z(i),i=C(i),Bn(n,fh.h(new R(null,2,5,S,[V8,t],null),pj(i)),Le(i))});J_.h(RM,function(n,t){t=w(t),z(t);var i=C(t);return t=z(i),i=C(i),nK.l(n,fh.h(new R(null,2,5,S,[V8,t],null),pj(i)),Le(i))});J_.h(mO,function(n,t){t=w(t),z(t);var i=C(t);return t=z(i),i=C(i),nK.l(n,fh.h(new R(null,2,5,S,[V8,t],null),i),gc)});yw(rT,F([function(n){return V8.g(n)}]));yw(gN,F([Y_,new R(null,1,5,S,[rT],null),function(n,t){return t=w(t),z(t),t=C(t),Q(n,t)}]));var kN={},vN=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};vN.j=function(n){n=M(n);var t=J.h(n,wN),i=J.h(n,X),s=J.h(n,zN),o=J.h(n,wM),f=reactExports.createRef(),d=fn(null);return vm(new h(null,3,[kF,"pdb-viewer",Wx,function(){function p(_){var k=null;if(0<arguments.length){k=0;for(var P=Array(arguments.length-0);k<P.length;)P[k]=arguments[k+0],++k;k=new u(P,0,null)}return v.call(this,k)}function v(_){_=M(_);var k=J.h(_,wN);_=J.h(_,X);var P=q(d);if(l(P)){k=M(k);var L=J.h(k,HN);k=J.h(k,Q4),P.removeAllShapes(),L=w(jh.h(hc,L));for(var G=null,Z=0,W=0;;)if(W<Z){var j=G.S(null,W);if(l(GN.g(j))){var H=z(P.selectedAtoms(Mm(new h(null,1,[GN,GN.g(j)],null))));l(H)&&P.addSphere(Mm(new h(null,3,[fG,new h(null,3,[TH,H.x,eO,H.y,v8,H.z],null),jD,function(){var $e=jD.g(j);return l($e)?$e:4}(),GD,GD.g(j)],null)))}W+=1}else if(L=w(L)){if(df(L))Z=Fd(L),L=Gd(L),G=Z,Z=D(Z);else{var me=z(L);l(GN.g(me))&&(G=z(P.selectedAtoms(Mm(new h(null,1,[GN,GN.g(me)],null)))),l(G)&&P.addSphere(Mm(new h(null,3,[fG,new h(null,3,[TH,G.x,eO,G.y,v8,G.z],null),jD,function(){var $e=jD.g(me);return l($e)?$e:4}(),GD,GD.g(me)],null)))),L=C(L),G=null,Z=0}W=0}else break;for(k=w(jh.h(hc,k)),L=null,Z=G=0;;)if(Z<G)W=L.S(null,Z),P.addBox(Mm(W)),Z+=1;else if(k=w(k))L=k,df(L)?(k=Fd(L),Z=Gd(L),L=k,G=D(k),k=Z):(k=z(L),P.addBox(Mm(k)),k=C(L),L=null,G=0),Z=0;else break;P.setStyle(Mm(og),Mm(_)),P.render()}return new R(null,3,5,S,[dA,new h(null,3,[T,"mol-container",X,new h(null,4,[gD,"450px",qC,"450px",QD,"relative",kC,"solid grey 1px"],null),my,f],null),"Loading viewer..."],null)}return p.v=0,p.B=function(_){return _=w(_),v(_)},p.j=v,p}(),iF,function(){var p=f.current;if(l(p)){p=_3DmolExports.createViewer(p,Mm(s));var v=M(t),_=J.h(v,xM),k=J.h(v,HN);v=J.h(v,Q4),N(d,p),k=w(jh.h(hc,k));for(var P=null,L=0,G=0;;)if(G<L){var Z=P.S(null,G);if(l(GN.g(Z))){var W=z(p.selectedAtoms(Mm(new h(null,1,[GN,GN.g(Z)],null))));l(W)&&p.addSphere(Mm(new h(null,3,[fG,new h(null,3,[TH,W.x,eO,W.y,v8,W.z],null),jD,function(){var H=jD.g(Z);return l(H)?H:4}(),GD,GD.g(Z)],null)))}G+=1}else if(k=w(k)){if(df(k))L=Fd(k),k=Gd(k),P=L,L=D(L);else{var j=z(k);l(GN.g(j))&&(P=z(p.selectedAtoms(Mm(new h(null,1,[GN,GN.g(j)],null)))),l(P)&&p.addSphere(Mm(new h(null,3,[fG,new h(null,3,[TH,P.x,eO,P.y,v8,P.z],null),jD,function(){var H=jD.g(j);return l(H)?H:4}(),GD,GD.g(j)],null)))),k=C(k),P=null,L=0}G=0}else break;for(v=w(jh.h(hc,v)),k=null,L=P=0;;)if(L<P)G=k.S(null,L),p.addBox(Mm(G)),L+=1;else if(v=w(v))k=v,df(k)?(v=Fd(k),L=Gd(k),k=v,P=D(v),v=L):(v=z(k),p.addBox(Mm(v)),v=C(k),k=null,P=0),L=0;else break;return p.addModel(_,"pdb"),p.setStyle(Mm(og),Mm(i)),p.zoomTo(),p.render(),p.zoom(1.2,1e3),l(o)?o.g?o.g(d):o.call(null,d):null}return null}],null),Jq)};vN.v=0;vN.B=function(n){return this.j(w(n))};var EK=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(arguments[0],1<i.length?new u(i.slice(1),0,null):null)};EK.j=function(n,t){var i=M(t);t=J.h(i,WG);var s=J.h(i,XG);return i=J.h(i,UG),q(n)==null?new R(null,3,5,S,[AE,kD,TK],null):new R(null,7,5,S,[Dt,gD,"1550px",iD,"1550px",dy,new R(null,1,5,S,[new R(null,3,5,S,[Ss,dy,new R(null,1,5,S,[new R(null,15,5,S,[LD,U,null,TF,n,iD,"1000px",WG,GG.l(function(o,f){return Al.j(F([o,f]))},O.h(function(o){return gj.j(new h(null,3,[gD,300,LC,"center",MG,"middle"],null),NG,function(f){var d=Xx.g(o);return d.g?d.g(f):d.call(null,f)},F([DJ,qj(Xx.g(o))]))},t),t),YG,35,XG,s,UG,i],null)],null)],null)],null)],null)};EK.v=1;EK.B=function(n){var t=z(n);return n=C(n),this.j(t,n)};var sM=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};sM.j=function(n){n=M(n);var t=J.h(n,tF);n=J.h(n,TF);var i=Aw(new R(null,1,5,S,[CK],null));return new R(null,9,5,S,[PH,hF,Qf.h(O.h(function(s){return iJ(s,new h(null,2,[Xx,new R(null,2,5,S,[Sb,Xx],null),mE,new R(null,2,5,S,[Sb,mv],null)],null))},q(i)),new h(null,2,[Xx,null,mE,"-"],null)),TF,n,tF,function(s){return l(t)?t.g?t.g(s):t.call(null,s):null},sF,"For which taxon?"],null)};sM.v=0;sM.B=function(n){return this.j(w(n))};S$.Nh(null,jQ,function(){return new R(null,1,5,S,[PK],null)});T$.Nh(null,jQ,function(){return new R(null,3,5,S,[hL,mE,"Data Overview"],null)});T$.Nh(null,J4,function(){return new R(null,1,5,S,[SK],null)});S$.Nh(null,J4,function(){return new R(null,1,5,S,[RK],null)});yw(JX,F([function(n){return NK.g(n)}]));yw(r1,F([Y_,new R(null,1,5,S,[JX],null),function(n,t){return t=w(t),z(t),t=C(t),Q(n,t)}]));yw(nN,F([Y_,new R(null,1,5,S,[JX],null),function(n){return KK.g(n)}]));yw(CK,F([Y_,new R(null,1,5,S,[JX],null),function(n){return Gh(dj(KK.g(n)))}]));yw(VK,F([Y_,new R(null,1,5,S,[nN],null),function(n,t){return I(t,0,null),t=I(t,1,null),J.h(n,t)}]));yw(nW,F([Y_,new R(null,1,5,S,[CK],null),function(n){return O.h(tM,n)}]));yw(eL,F([Y_,new R(null,1,5,S,[nN],null),function(n,t){return I(t,0,null),t=I(t,1,null),tM.g(J.h(n,t))}]));yw(hN,F([Y_,new R(null,1,5,S,[nW],null),function(n,t){I(t,0,null);var i=I(t,1,null);return z(O.h(function(s){return jh.h(function(o){return fj.h(i,H0.g(Sb.g(o)))},s)},n))}]));yw(CJ,F([Y_,new R(null,1,5,S,[JX],null),function(n){return Gh(dj(OK.g(n)))}]));yw(s7,F([Y_,new R(null,1,5,S,[JX],null),function(n){return OK.g(n)}]));yw(GJ,F([Y_,new R(null,1,5,S,[s7],null),function(n,t){return I(t,0,null),t=I(t,1,null),J.h(n,t)}]));yw(pT,F([function(n){return lN.g(n)}]));yw(bQ,F([Y_,new R(null,1,5,S,[JX],null),function(n){return HK.g(n)}]));yw(BK,F([Y_,new R(null,1,5,S,[JX],null),function(n){return Gh(dj(HK.g(n)))}]));yw(vT,F([Y_,new R(null,1,5,S,[bQ],null),function(n,t){return I(t,0,null),t=I(t,1,null),J.h(n,t)}]));S$.Nh(null,vQ,function(){return new R(null,1,5,S,[UK],null)});T$.Nh(null,vQ,function(){return new R(null,3,5,S,[hL,mE,"Taxon Library"],null)});S$.Nh(null,qZ,function(){return new R(null,1,5,S,[gL],null)});T$.Nh(null,qZ,function(){return new R(null,1,5,S,[iL],null)});var jO=cy(jL);cy(function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,2,[HD,"150%",oI,"300"],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)});var wL=cy(kL);cy(function(n){var t=new R(null,2,5,S,[[".",m.g(n)].join(""),new h(null,1,[nD,"10px 10px"],null)],null);return new h(null,2,[hI,Ux(t),mv,n],null)});var CL=cy(lL),eN=cy(mL),vM=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};vM.j=function(n){var t=M(n),i=J.h(t,wM);return new R(null,2,5,S,[HL,function(s){s=w(F(s));for(var o=null,f=0,d=0;;)if(d<f){var p=o.S(null,d);if(Qa(p.name,".pdb")){var v=new FileReader;v.onload=function(P,L,G,Z,W,j,H,me,$e){return function(){var De=W.result;return $e.g?$e.g(De):$e.call(null,De)}}(s,o,f,d,v,p,n,t,i),v.readAsText(p)}else alert("Can only handle pdb data.");d+=1}else{var _=w(s);if(_){if(v=_,df(v))s=Fd(v),d=Gd(v),o=s,f=D(s),s=d;else{if(p=z(v),Qa(p.name,".pdb")){var k=new FileReader;k.onload=function(P,L,G,Z,W,j,H,me,$e,De,le){return function(){var Ce=W.result;return le.g?le.g(Ce):le.call(null,Ce)}}(s,o,f,d,k,p,v,_,n,t,i),k.readAsText(p)}else alert("Can only handle pdb data.");s=C(v),o=null,f=0}d=0}else return null}}],null)};vM.v=0;vM.B=function(n){return this.j(w(n))};var nM=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};nM.j=function(n){n=M(n);var t=J.h(n,tF),i=J.h(n,sF),s=J.h(n,V),o=fn(null);return function(){return new R(null,9,5,S,[Vs,TF,o,tF,function(f){return N(o,f),l(t)?t.g?t.g(f):t.call(null,f):null},sF,i,V,s],null)}};nM.v=0;nM.B=function(n){return this.j(w(n))};var LN=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};LN.j=function(n){n=M(n);var t=J.h(n,mE),i=J.h(n,KD),s=fn(!1);return function(){return new R(null,15,5,S,[Ip,U,null,mE,t,T,by(T,eN,mL,lh),X,new h(null,1,[zD,"#0072bb"],null),KD,function(o){return l(i)?i.g?i.g(o):i.call(null,o):null},X,new h(null,1,[zD,l(q(s))?"#0072bb":"#4d90fe"],null),V,new h(null,2,[qE,function(){return N(s,!0),null},rE,function(){return N(s,!1),null}],null)],null)}};LN.v=0;LN.B=function(n){return this.j(w(n))};var xP=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};xP.j=function(n){var t=M(n);n=J.h(t,hF);var i=J.h(t,tF),s=J.h(t,sF);t=J.h(t,TF);var o=l(t)?t:fn(null);return new R(null,9,5,S,[PH,TF,o,hF,n,tF,function(f){return N(o,f),i.g?i.g(f):i.call(null,f)},sF,s],null)};xP.v=0;xP.B=function(n){return this.j(w(n))};yw(gZ,F([Y_,new R(null,2,5,S,[gN,NS],null),function(n){return Y1.g(n)}]));yw(b1,F([Y_,new R(null,1,5,S,[s7],null),Y_,new R(null,1,5,S,[gZ],null),function(n){var t=I(n,0,null);return n=I(n,1,null),eS.g(J.h(t,n))}]));yw(g7,F([Y_,new R(null,2,5,S,[gN,NS],null),Y_,new R(null,1,5,S,[b1],null),function(n){var t=I(n,0,null);return n=I(n,1,null),t=XW.g(t),l(t)?t:z(z(n))}]));yw($2,F([Y_,new R(null,1,5,S,[Q0],null),Y_,new R(null,1,5,S,[gZ],null),function(n){var t=I(n,0,null);return n=I(n,1,null),E.h(J.h(t,new R(null,4,5,S,[NK,OK,n,eS],null)),xH)}]));yw(YY,F([Y_,new R(null,1,5,S,[Q0],null),Y_,new R(null,1,5,S,[g7],null),function(n){var t=I(n,0,null);return n=I(n,1,null),J.h(t,new R(null,3,5,S,[NK,OK,n],null))}]));var Y$=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};Y$.j=function(n){var t=M(n);n=J.h(t,tM);var i=J.h(t,tF);return t=J.h(t,TF),new R(null,5,5,S,[Dt,U,null,dy,new R(null,2,5,S,[new R(null,1,5,S,[mM],null),new R(null,19,5,S,[w_,U,null,TF,t,QF,kM(n),sF,m.g(aM.g(q(t))),NF,!0,OF,!0,tF,function(s){return l(i)?i.g?i.g(s):i.call(null,s):null},RF,function(s){return aM.g(s)},OS,function(s){var o=M(s);s=J.h(o,aM);var f=J.h(o,bM);return o=J.h(o,Xx),new R(null,2,5,S,[lA,[m.g(o)," - ",m.g(f)," - ",m.g(s)].join("")],null)}],null)],null)],null)};Y$.v=0;Y$.B=function(n){return this.j(w(n))};var AM=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};AM.j=function(n){var t=M(n),i=J.l(t,h2,!0);n=J.h(t,KK);var s=J.h(t,BM),o=J.h(t,tF),f=Aw(new R(null,2,5,S,[hN,Xx.g(q(s))],null));return t=NK.g(q(Aw(new R(null,2,5,S,[eL,n],null)))),new R(null,3,5,S,[Dt,dy,new R(null,3,5,S,[new R(null,2,5,S,[ZL,NJ.g(n)],null),new R(null,7,5,S,[Y$,tM,t,TF,s,tF,function(d){return l(o)?o.g?o.g(d):o.call(null,d):null}],null),l(function(){var d=q(f);return l(d)?i:d}())?new R(null,2,5,S,[$L,XL(q(f))],null):null],null)],null)};AM.v=0;AM.B=function(n){return this.j(w(n))};var Z$=new h(null,4,[KK,new R(null,2,5,S,[VU,KK],null),zM,new R(null,2,5,S,[VU,zM],null),mv,new R(null,3,5,S,[VU,Sb,mv],null),xM,new R(null,2,5,S,[VU,xM],null)],null),qM=Pk.h(function(n,t){return n=J.h(n,t),Aw(Ng.h(new R(null,1,5,S,[gN],null),n))},Z$),oM=Pk.h(function(n,t){var i=J.h(n,t);return function(s){return Yv(Qf.h(Ng.h(new R(null,1,5,S,[FK],null),i),s))}},Z$);yw(HT,F([Y_,new R(null,2,5,S,[gN,hS],null),function(n){return oF.g(n)}]));yw(xX,F([Y_,new R(null,1,5,S,[nN],null),Y_,new R(null,1,5,S,[HT],null),function(n){var t=I(n,0,null);return n=I(n,1,null),eS.g(J.h(t,n))}]));yw(e6,F([Y_,new R(null,1,5,S,[Q0],null),Y_,new R(null,1,5,S,[HT],null),function(n){var t=I(n,0,null);return n=I(n,1,null),E.h(J.h(t,new R(null,4,5,S,[NK,KK,n,eS],null)),xH)}]));yw(nX,F([Y_,new R(null,1,5,S,[HT],null),Y_,new R(null,1,5,S,[Q0],null),function(n){var t=I(n,0,null);return n=I(n,1,null),J.h(n,new R(null,3,5,S,[NK,KK,t],null))}]));S$.Nh(null,LM,function(){return new R(null,1,5,S,[EM],null)});T$.Nh(null,LM,function(){return new R(null,3,5,S,[hL,mE,"Upload Data"],null)});S$.Nh(null,iQ,function(){return new R(null,1,5,S,[NM],null)});T$.Nh(null,iQ,function(){return new R(null,3,5,S,[hL,mE,"Dario's Super Dope Pipeline Thingy"],null)});var ZM=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};ZM.j=function(n){var t=M(n);n=J.h(t,hF);var i=J.h(t,tF);return t=J.h(t,TF),Ve(n)?new R(null,5,5,S,[Dt,eD,fG,dy,new R(null,1,5,S,[new R(null,5,5,S,[AE,kD,DZ,X,new h(null,1,[gD,"410px"],null)],null)],null)],null):new R(null,21,5,S,[BJ,U,null,hF,n,TF,t,tF,function(s){return l(i)?i.g?i.g(s):i.call(null,s):null},gD,"450px",ZP,"Available ligands",$P,"Selected ligands",sF,"Select at least one ligand.",PQ,!0,wF,!1],null)};ZM.v=0;ZM.B=function(n){return this.j(w(n))};var YM=function n(t){for(var i=[],s=arguments.length,o=0;o<s;)i.push(arguments[o]),o+=1;return n.j(0<i.length?new u(i.slice(0),0,null):null)};YM.j=function(n){var t=M(n);n=J.h(t,hF);var i=J.h(t,tF);return t=J.h(t,TF),Ve(n)?new R(null,5,5,S,[Dt,eD,fG,dy,new R(null,1,5,S,[new R(null,5,5,S,[AE,kD,DZ,X,new h(null,1,[gD,"410px"],null)],null)],null)],null):new R(null,21,5,S,[BJ,U,null,hF,n,TF,t,tF,function(s){return l(i)?i.g?i.g(s):i.call(null,s):null},gD,"450px",ZP,"Available taxons",$P,"Selected taxons",sF,"Select some taxons.",PQ,!0,wF,!1],null)};YM.v=0;YM.B=function(n){return this.j(w(n))};yw(M5,F([Y_,new R(null,1,5,S,[rT],null),function(n){return SM.g(n)}]));yw(dN,F([Y_,new R(null,1,5,S,[M5],null),function(n){return TM.g(n)}]));yw(WM,F([Y_,new R(null,1,5,S,[dN],null),function(n){return oj(bj(KK.g(n)))}]));yw(XM,F([Y_,new R(null,1,5,S,[dN],null),function(n){return oj(OK.g(n))}]));yw(VM,F([Y_,new R(null,1,5,S,[WM],null),Y_,new R(null,1,5,S,[XM],null),function(n){var t=I(n,0,null);n=I(n,1,null);var i=pg(t);return l(i)?(i=pg(n),l(i)?t!=null&&n!=null:i):i}]));yw(P5,F([Y_,new R(null,1,5,S,[dN],null),Y_,new R(null,1,5,S,[QV],null),function(n,t){var i=I(n,0,null);return n=I(n,1,null),I(t,0,null),t=I(t,1,null),i=zM.g(J.h(KK.g(i),t)),n=J.h(n,t),n=rj(O.h(jM,n),n),J.h(n,i)}]));yw(iN,F([Y_,new R(null,1,5,S,[dN],null),Y_,new R(null,1,5,S,[CN],null),function(n){var t=I(n,0,null),i=I(n,1,null);return n=O.h(kn.h(Xx,zM),dj(KK.g(t))),Ig(hc,O.h(function(s){return J.h(i,s)},n))&&0<D(n)}]));yw(rN,F([Y_,new R(null,1,5,S,[dN],null),function(n,t){return I(t,0,null),t=I(t,1,null),aN.g(J.h(KK.g(n),t))}]));yw(gT,F([Y_,new R(null,1,5,S,[dN],null),function(n,t){return I(t,0,null),t=I(t,1,null),B4.g(RW.g(J.h(KK.g(n),t)))}]));var WN=new Lx,UN=new h(null,5,[nD,5,cO,new h(null,4,[K4,HZ,C5,HZ,dW,13,FU,500],null),y3,new h(null,2,[K4,HZ,C5,HZ],null),XD,new h(null,2,[oT,HZ,bU,HZ],null),bF,new h(null,1,[oT,HZ],null)],null);S$.Nh(null,JM,function(){return new R(null,1,5,S,[hO],null)});T$.Nh(null,JM,function(){return new R(null,3,5,S,[hL,mE,"Comparative Docking Pipeline"],null)});yw(iO,F([Y_,new R(null,1,5,S,[rT],null),function(n){return nO.g(n)}]));S$.Nh(null,HM,function(){return new R(null,1,5,S,[KO],null)});T$.Nh(null,HM,function(){return new R(null,3,5,S,[hL,mE,"Sequence Comparison Pipeline"],null)});var yO=new R(null,21,5,S,[new h(null,2,[Xx,VW,mE,"Uniprot Bacteria"],null),new h(null,2,[Xx,sQ,mE,"Uniprot Complete Microbial Proteomes"],null),new h(null,2,[Xx,JV,mE,"UniprotKB "],null),new h(null,2,[Xx,qX,mE,"UniParc"],null),new h(null,2,[Xx,GY,mE,"Uniref 100"],null),new h(null,2,[Xx,V7,mE,"Uniref 50"],null),new h(null,2,[Xx,G7,mE,"Uniref 90"],null),new h(null,2,[Xx,rV,mE,"Swissprot"],null),new h(null,2,[Xx,jW,mE,"TrEMBL"],null),new h(null,2,[Xx,UT,mE,"Uniprot PDB"],null),new h(null,2,[Xx,nR,mE,"Uniprot Archaea"],null),new h(null,2,[Xx,m2,mE,"Uniprot Arthropoda"],null),new h(null,2,[Xx,sV,mE,"Uniprot Eukaryota"],null),new h(null,2,[Xx,j9,mE,"Uniprot Fungi"],null),new h(null,2,[Xx,PS,mE,"Uniprot Human"],null),new h(null,2,[Xx,AW,mE,"Uniprot Mammals"],null),new h(null,2,[Xx,A7,mE,"Uniprot Nematoda"],null),new h(null,2,[Xx,F3,mE,"Uniprot Rodents"],null),new h(null,2,[Xx,cT,mE,"Uniprot Vertebrates"],null),new h(null,2,[Xx,oU,mE,"Uniprot Viridiplantae"],null),new h(null,2,[Xx,SR,mE,"Uniprot Viruses"],null)],null),EO=new R(null,3,5,S,[new h(null,2,[Xx,GY,mE,"UniRef 100"],null),new h(null,2,[Xx,G7,mE,"UniRef 90"],null),new h(null,2,[Xx,V7,mE,"UniRef 50"],null)],null),qO=new R(null,14,5,S,[new h(null,2,[Xx,M4,mE,"no rank"],null),new h(null,2,[Xx,TV,mE,"phylum"],null),new h(null,2,[Xx,T,mE,"class"],null),new h(null,2,[Xx,CG,mE,"order"],null),new h(null,2,[Xx,K1,mE,"family"],null),new h(null,2,[Xx,YU,mE,"superkingdom"],null),new h(null,2,[Xx,CZ,mE,"kingdom"],null),new h(null,2,[Xx,c2,mE,"clade"],null),new h(null,2,[Xx,E8,mE,"subkingdom"],null),new h(null,2,[Xx,V3,mE,"subphylum"],null),new h(null,2,[Xx,LR,mE,"subclass"],null),new h(null,2,[Xx,WU,mE,"suborder"],null),new h(null,2,[Xx,rU,mE,"subfamily"],null),new h(null,2,[Xx,q7,mE,"tribe"],null)],null),pO=fh.h(new R(null,2,5,S,[new h(null,2,[Xx,H1,mE,"species"],null),new h(null,2,[Xx,H8,mE,"strain"],null)],null),qO);S$.Nh(null,mQ,function(){return new R(null,1,5,S,[PO],null)});T$.Nh(null,mQ,function(){return new R(null,3,5,S,[hL,mE,"Comparative Docking Results"],null)});Ni([eO,kE,GD,$N,gD,XD,pX,c4,TH,qC,NK],[new h(null,3,[bO,"gap",pF,"quantitative",cO,"right"],null),new h(null,1,[rF,"white"],null),new h(null,1,[rF,"gray"],null),"bar",800,"Gap",new h(null,1,[rF,0],null),new h(null,3,[bO,"end",pF,"genomic",cO,"none"],null),new h(null,3,[bO,"start",pF,"genomic",cO,"none"],null),100,new h(null,4,[wY,"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/alignment_viewer_p53.gap.csv",pF,"csv",JY,new R(null,1,5,S,["pos"],null),K_,99999],null)]);Ni([eO,kE,GD,$N,gD,XD,pX,c4,TH,qC,NK],[new h(null,3,[bO,"conservation",pF,"quantitative",cO,"right"],null),new h(null,1,[rF,"white"],null),new h(null,2,[bO,"conservation",pF,"quantitative"],null),"bar",800,"Conservation",new h(null,1,[rF,0],null),new h(null,3,[bO,"end",pF,"genomic",cO,"none"],null),new h(null,3,[bO,"start",pF,"genomic",cO,"none"],null),150,new h(null,4,[wY,"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/alignment_viewer_p53.conservation.csv",pF,"csv",JY,new R(null,1,5,S,["pos"],null),K_,99999],null)]);Ni([kE,GD,WW,H4,gD,pX,TH,qC,AG,bF,NK],[new h(null,1,[rF,"white"],null),new h(null,4,[bO,"base",pF,"nominal",IR,new R(null,20,5,S,"#d60000 #018700 #b500ff #05acc6 #97ff00 #ffa52f #ff8ec8 #79525e #00fdcf #afa5ff #93ac83 #9a6900 #366962 #d3008c #fdf490 #c86e66 #9ee2ff #00c846 #a877ac #b8ba01".split(" "),null),y3,!0],null),"overlay",new R(null,2,5,S,[new h(null,1,[$N,"rect"],null),new h(null,6,[$N,"text",TH,new h(null,2,[bO,"start",pF,"genomic"],null),c4,new h(null,2,[bO,"end",pF,"genomic"],null),GD,new h(null,1,[rF,"black"],null),kD,new h(null,1,[rF,12],null),XS,new R(null,1,5,S,[new h(null,5,[LT,"zoomLevel",NE,"track",GZ,10,y7,"LT",xS,100],null)],null)],null)],null),800,new h(null,1,[rF,0],null),new h(null,3,[bO,"pos",pF,"genomic",cO,"bottom"],null),500,new h(null,3,[bO,"name",pF,"nominal",y3,!0],null),new h(null,2,[bO,"base",pF,"nominal"],null),new h(null,4,[wY,"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/alignment_viewer_p53.fasta.csv",pF,"csv",JY,new R(null,1,5,S,["pos"],null),K_,99999],null)]);Ni([kE,GD,$N,gD,pX,TH,qC,AG,bF,NK],[new h(null,1,[rF,"white"],null),new h(null,4,[bO,"base",pF,"nominal",IR,new R(null,20,5,S,"#d60000 #018700 #b500ff #05acc6 #97ff00 #ffa52f #ff8ec8 #79525e #00fdcf #afa5ff #93ac83 #9a6900 #366962 #d3008c #fdf490 #c86e66 #9ee2ff #00c846 #a877ac #b8ba01".split(" "),null),y3,!1],null),"rect",800,new h(null,1,[rF,0],null),new h(null,3,[bO,"pos",pF,"genomic",cO,"none"],null),150,new h(null,3,[bO,"name",pF,"nominal",y3,!1],null),new h(null,2,[bO,"base",pF,"nominal"],null),new h(null,4,[wY,"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/alignment_viewer_p53.fasta.csv",pF,"csv",JY,new R(null,1,5,S,["pos"],null),K_,99999],null)]);Ni([eO,kE,GD,$N,gD,pX,c4,TH,qC,NK],[new h(null,3,[bO,"conservation",pF,"quantitative",cO,"none"],null),new h(null,1,[rF,"white"],null),new h(null,2,[bO,"conservation",pF,"quantitative"],null),"bar",800,new h(null,1,[rF,0],null),new h(null,3,[bO,"end",pF,"genomic",cO,"none"],null),new h(null,3,[bO,"start",pF,"genomic",cO,"none"],null),150,new h(null,4,[wY,"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/alignment_viewer_p53.conservation.csv",pF,"csv",JY,new R(null,1,5,S,["pos"],null),K_,99999],null)]);Ni([eO,kE,GD,$N,gD,pX,c4,TH,qC,NK],[new h(null,3,[bO,"gap",pF,"quantitative",cO,"none"],null),new h(null,1,[rF,"white"],null),new h(null,1,[rF,"gray"],null),"bar",800,new h(null,1,[rF,0],null),new h(null,3,[bO,"end",pF,"genomic",cO,"none"],null),new h(null,3,[bO,"start",pF,"genomic",cO,"none"],null),150,new h(null,4,[wY,"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/alignment_viewer_p53.gap.csv",pF,"csv",JY,new R(null,1,5,S,["pos"],null),K_,99999],null)]);S$.Nh(null,lQ,function(){return new R(null,1,5,S,[SO],null)});T$.Nh(null,lQ,function(){return new R(null,3,5,S,[hL,mE,"Sequence Comparison Results"],null)});yw(QO,F([Y_,new R(null,1,5,S,[sT],null),function(n){return GG.h(function(t){var i=I(t,0,null);t=I(t,1,null),t=M(t),J.h(t,lO),J.h(t,BO),J.h(t,wO);var s=J.h(t,tO);return new h(null,4,[Xx,m.g(i),GO,GO.g(s),sO,sO.g(s),RO,RO.g(t)],null)},nO.g(D1.g(n)))}]));yw(LO,F([Y_,new R(null,1,5,S,[sT],null),function(n){return GG.h(function(t){return new h(null,3,[Xx,m.g(Gk),GO,GO.g(t),NO,NO.g(t)],null)},SM.g(D1.g(n)))}]));ww(yP,function(n,t){n=M(n),n=J.h(n,GH),I(t,0,null);var i=I(t,1,null);t=I(t,2,null);var s=KK.g(Sb.g(J.h(HK.g(oF.g(NK.g(n))),t))),o=J.h(tM.g(QM.g(NK.g(n))),s);return l(o)||Yv(new R(null,2,5,S,[gJ,new R(null,4,5,S,[NK,QM,tM,s],null)],null)),new h(null,1,[GH,Bn(n,new R(null,4,5,S,[V8,GK,i,HK],null),t)],null)});yw(AP,F([Y_,new R(null,1,5,S,[rT],null),function(n){return GK.g(n)}]));yw(WP,F([Y_,new R(null,1,5,S,[AP],null),function(n,t){return I(t,0,null),t=I(t,1,null),oj(YP.g(J.h(n,t)))}]));S$.Nh(null,JK,function(){return new R(null,1,5,S,[dQ],null)});T$.Nh(null,JK,function(){return new R(null,3,5,S,[hL,mE,"Volcano Viewer"],null)});var Faa=clientExports.createRoot(document.getElementById("app"));(function(){$C(),dk.l(eJ.Bd,Qf,Iu(eJ.history,"navigate",function(t){return t=t.xh,t=eJ.dc.g?eJ.dc.g(t):eJ.dc.call(null,t),t=eJ.bc.g?eJ.bc.g(t):eJ.bc.call(null,t),l(t)?eJ.P.g?eJ.P.g(t):eJ.P.call(null,t):null}));var n=function(){var t=RC(eJ.history);return t=eJ.dc.g?eJ.dc.g(t):eJ.dc.call(null,t),eJ.bc.g?eJ.bc.g(t):eJ.bc.call(null,t)}();l(n)&&(eJ.P.g?eJ.P.g(n):eJ.P.call(null,n)),dk.l(eJ.Bd,Qf,Iu(document,"click",function(t){var i=function(){var d=t==null?null:t.target;if(d==null)d=null;else e:{for(var p=0;d;){var v=d,_=v.tagName,k=new jj(null,new h(null,2,["AREA",null,"A",null],null),null);if(_=k.g?k.g(_):k.call(null,_),l(_)?v.hasAttribute("href"):_)break e;d=d.parentNode,p++}d=null}return d}();if(l(i)){var s=Jb(i.href);if(l(function(){var d=eJ.Ae.g?eJ.Ae.g(s):eJ.Ae.call(null,s);return l(d)?gc(t.altKey)&&gc(t.ctrlKey)&&gc(t.metaKey)&&gc(t.shiftKey)&&gc(J.h(new jj(null,new h(null,2,["_self",null,"_blank",null],null),null),i.getAttribute("target")))&&(gc(i.hasAttribute("data-pushy-ignore"))||E.h(i.getAttribute("data-pushy-ignore"),"false"))&&E.h(0,t.button):d}())){var o=YC(s);if(l(function(){var d=eJ.dc.g?eJ.dc.g(o):eJ.dc.call(null,o);return eJ.bc.g?eJ.bc.g(d):eJ.bc.call(null,d)}())){var f=i.title;return l(f)?TC(o,f):TC(o),t.preventDefault()}return l(eJ.ze.g?eJ.ze.g(o):eJ.ze.call(null,o))?t.preventDefault():null}}return null}))})();var $$=new R(null,1,5,S,[H2],null);yv($$);Wv(Xv,$$);Faa.render(rl(Jq,new R(null,1,5,S,[function(){var n=Aw(new R(null,1,5,S,[eQ],null));return new R(null,9,5,S,[Dt,gD,"100%",LC,M7,tJ,"1em",dy,new R(null,2,5,S,[new R(null,7,5,S,[Ss,T,by(T,saa,qI,lh),eD,QK,dy,new R(null,3,5,S,[new R(null,1,5,S,[oQ],null),T$.g(q(n)),new R(null,3,5,S,[UD,kD,"100px"],null)],null)],null),new R(null,5,5,S,[Ss,tJ,"30px",dy,new R(null,2,5,S,[new R(null,1,5,S,[nQ],null),S$.g(q(n))],null)],null)],null)],null)}],null)));
